!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(w,e){"use strict";function g(e){return null!=e&&e===e.window}var t=[],C=w.document,i=Object.getPrototypeOf,o=t.slice,f=t.concat,l=t.push,n=t.indexOf,s={},a=s.toString,_=s.hasOwnProperty,r=_.toString,d=r.call(Object),v={},b=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},h={type:!0,src:!0,noModule:!0};function x(e,t,i){var s,n=(t=t||C).createElement("script");if(n.text=e,i)for(s in h)i[s]&&(n[s]=i[s]);t.head.appendChild(n).parentNode.removeChild(n)}function m(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?s[a.call(e)]||"object":typeof e}var c="3.3.1",S=function(e,t){return new S.fn.init(e,t)},u=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function p(e){var t=!!e&&"length"in e&&e.length,i=m(e);return!b(e)&&!g(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:c,constructor:S,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=S.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return S.each(this,e)},map:function(i){return this.pushStack(S.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,i,s,n,a=arguments[0]||{},r=1,o=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[r]||{},r++),"object"==typeof a||b(a)||(a={}),r===o&&(a=this,r--);r<o;r++)if(null!=(e=arguments[r]))for(t in e)n=a[t],a!==(i=e[t])&&(l&&i&&(S.isPlainObject(i)||(s=Array.isArray(i)))?(n=s?(s=!1,n&&Array.isArray(n)?n:[]):n&&S.isPlainObject(n)?n:{},a[t]=S.extend(l,n,i)):void 0!==i&&(a[t]=i));return a},S.extend({expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==a.call(e))&&(!(e=i(e))||"function"==typeof(e=_.call(e,"constructor")&&e.constructor)&&r.call(e)===d)},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e){x(e)},each:function(e,t){var i,s=0;if(p(e))for(i=e.length;s<i&&!1!==t.call(e[s],s,e[s]);s++);else for(s in e)if(!1===t.call(e[s],s,e[s]))break;return e},trim:function(e){return null==e?"":(e+"").replace(u,"")},makeArray:function(e,t){t=t||[];return null!=e&&(p(Object(e))?S.merge(t,"string"==typeof e?[e]:e):l.call(t,e)),t},inArray:function(e,t,i){return null==t?-1:n.call(t,e,i)},merge:function(e,t){for(var i=+t.length,s=0,n=e.length;s<i;s++)e[n++]=t[s];return e.length=n,e},grep:function(e,t,i){for(var s=[],n=0,a=e.length,r=!i;n<a;n++)!t(e[n],n)!=r&&s.push(e[n]);return s},map:function(e,t,i){var s,n,a=0,r=[];if(p(e))for(s=e.length;a<s;a++)null!=(n=t(e[a],a,i))&&r.push(n);else for(a in e)null!=(n=t(e[a],a,i))&&r.push(n);return f.apply([],r)},guid:1,support:v}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){s["[object "+t+"]"]=t.toLowerCase()});var y=function(i){function c(e,t,i){var s="0x"+t-65536;return s!=s||i?t:s<0?String.fromCharCode(65536+s):String.fromCharCode(s>>10|55296,1023&s|56320)}function s(){w()}var e,p,x,a,n,m,u,g,y,l,d,w,C,r,S,f,o,h,_,T="sizzle"+ +new Date,v=i.document,R=0,b=0,k=re(),O=re(),D=re(),I=function(e,t){return e===t&&(d=!0),0},j={}.hasOwnProperty,t=[],L=t.pop,A=t.push,E=t.push,P=t.slice,M=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",z="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",V="\\["+N+"*("+z+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+z+"))|)"+N+"*\\]",B=":("+z+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",H=new RegExp(N+"+","g"),Y=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),U=new RegExp("^"+N+"*,"+N+"*"),W=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),X=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),G=new RegExp(B),$=new RegExp("^"+z+"$"),q={ID:new RegExp("^#("+z+")"),CLASS:new RegExp("^\\.("+z+")"),TAG:new RegExp("^("+z+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,se=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=fe(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{E.apply(t=P.call(v.childNodes),v.childNodes),t[v.childNodes.length].nodeType}catch(e){E={apply:t.length?function(e,t){A.apply(e,P.call(t))}:function(e,t){for(var i=e.length,s=0;e[i++]=t[s++];);e.length=i-1}}}function ae(e,t,i,s){var n,a,r,o,l,d,h,c=t&&t.ownerDocument,u=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return i;if(!s&&((t?t.ownerDocument||t:v)!==C&&w(t),t=t||C,S)){if(11!==u&&(l=J.exec(e)))if(n=l[1]){if(9===u){if(!(r=t.getElementById(n)))return i;if(r.id===n)return i.push(r),i}else if(c&&(r=c.getElementById(n))&&_(t,r)&&r.id===n)return i.push(r),i}else{if(l[2])return E.apply(i,t.getElementsByTagName(e)),i;if((n=l[3])&&p.getElementsByClassName&&t.getElementsByClassName)return E.apply(i,t.getElementsByClassName(n)),i}if(p.qsa&&!D[e+" "]&&(!f||!f.test(e))){if(1!==u)c=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((o=t.getAttribute("id"))?o=o.replace(ie,se):t.setAttribute("id",o=T),a=(d=m(e)).length;a--;)d[a]="#"+o+" "+ge(d[a]);h=d.join(","),c=ee.test(e)&&pe(t.parentNode)||t}if(h)try{return E.apply(i,c.querySelectorAll(h)),i}catch(e){}finally{o===T&&t.removeAttribute("id")}}}return g(e.replace(Y,"$1"),t,i,s)}function re(){var i=[];function s(e,t){return i.push(e+" ")>x.cacheLength&&delete s[i.shift()],s[e+" "]=t}return s}function oe(e){return e[T]=!0,e}function le(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var i=e.split("|"),s=i.length;s--;)x.attrHandle[i[s]]=t}function he(e,t){var i=t&&e,s=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(s)return s;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ce(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ne(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ue(r){return oe(function(a){return a=+a,oe(function(e,t){for(var i,s=r([],e.length,a),n=s.length;n--;)e[i=s[n]]&&(e[i]=!(t[i]=e[i]))})})}function pe(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in p=ae.support={},n=ae.isXML=function(e){e=e&&(e.ownerDocument||e).documentElement;return!!e&&"HTML"!==e.nodeName},w=ae.setDocument=function(e){var t,e=e?e.ownerDocument||e:v;return e!==C&&9===e.nodeType&&e.documentElement&&(r=(C=e).documentElement,S=!n(C),v!==C&&(t=C.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",s,!1):t.attachEvent&&t.attachEvent("onunload",s)),p.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),p.getElementsByTagName=le(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),p.getElementsByClassName=Z.test(C.getElementsByClassName),p.getById=le(function(e){return r.appendChild(e).id=T,!C.getElementsByName||!C.getElementsByName(T).length}),p.getById?(x.filter.ID=function(e){var t=e.replace(te,c);return function(e){return e.getAttribute("id")===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&S){e=t.getElementById(e);return e?[e]:[]}}):(x.filter.ID=function(e){var t=e.replace(te,c);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i,s,n,a=t.getElementById(e);if(a){if((i=a.getAttributeNode("id"))&&i.value===e)return[a];for(n=t.getElementsByName(e),s=0;a=n[s++];)if((i=a.getAttributeNode("id"))&&i.value===e)return[a]}return[]}}),x.find.TAG=p.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):p.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,s=[],n=0,a=t.getElementsByTagName(e);if("*"!==e)return a;for(;i=a[n++];)1===i.nodeType&&s.push(i);return s},x.find.CLASS=p.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&S)return t.getElementsByClassName(e)},o=[],f=[],(p.qsa=Z.test(C.querySelectorAll))&&(le(function(e){r.appendChild(e).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+N+"*(?:value|"+F+")"),e.querySelectorAll("[id~="+T+"-]").length||f.push("~="),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+T+"+*").length||f.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")})),(p.matchesSelector=Z.test(h=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector))&&le(function(e){p.disconnectedMatch=h.call(e,"*"),h.call(e,"[s!='']:x"),o.push("!=",B)}),f=f.length&&new RegExp(f.join("|")),o=o.length&&new RegExp(o.join("|")),t=Z.test(r.compareDocumentPosition),_=t||Z.test(r.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(i.contains?i.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},I=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!p.sortDetached&&t.compareDocumentPosition(e)===i?e===C||e.ownerDocument===v&&_(v,e)?-1:t===C||t.ownerDocument===v&&_(v,t)?1:l?M(l,e)-M(l,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var i,s=0,n=e.parentNode,a=t.parentNode,r=[e],o=[t];if(!n||!a)return e===C?-1:t===C?1:n?-1:a?1:l?M(l,e)-M(l,t):0;if(n===a)return he(e,t);for(i=e;i=i.parentNode;)r.unshift(i);for(i=t;i=i.parentNode;)o.unshift(i);for(;r[s]===o[s];)s++;return s?he(r[s],o[s]):r[s]===v?-1:o[s]===v?1:0}),C},ae.matches=function(e,t){return ae(e,null,null,t)},ae.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&w(e),t=t.replace(X,"='$1']"),p.matchesSelector&&S&&!D[t+" "]&&(!o||!o.test(t))&&(!f||!f.test(t)))try{var i=h.call(e,t);if(i||p.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return 0<ae(t,C,null,[e]).length},ae.contains=function(e,t){return(e.ownerDocument||e)!==C&&w(e),_(e,t)},ae.attr=function(e,t){(e.ownerDocument||e)!==C&&w(e);var i=x.attrHandle[t.toLowerCase()],i=i&&j.call(x.attrHandle,t.toLowerCase())?i(e,t,!S):void 0;return void 0!==i?i:p.attributes||!S?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},ae.escape=function(e){return(e+"").replace(ie,se)},ae.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ae.uniqueSort=function(e){var t,i=[],s=0,n=0;if(d=!p.detectDuplicates,l=!p.sortStable&&e.slice(0),e.sort(I),d){for(;t=e[n++];)t===e[n]&&(s=i.push(n));for(;s--;)e.splice(i[s],1)}return l=null,e},a=ae.getText=function(e){var t,i="",s=0,n=e.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=a(e)}else if(3===n||4===n)return e.nodeValue}else for(;t=e[s++];)i+=a(t);return i},(x=ae.selectors={cacheLength:50,createPseudo:oe,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,c),e[3]=(e[3]||e[4]||e[5]||"").replace(te,c),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ae.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ae.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&G.test(i)&&(t=m(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,c).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&k(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,i,s){return function(e){e=ae.attr(e,t);return null==e?"!="===i:!i||(e+="","="===i?e===s:"!="===i?e!==s:"^="===i?s&&0===e.indexOf(s):"*="===i?s&&-1<e.indexOf(s):"$="===i?s&&e.slice(-s.length)===s:"~="===i?-1<(" "+e.replace(H," ")+" ").indexOf(s):"|="===i&&(e===s||e.slice(0,s.length+1)===s+"-"))}},CHILD:function(m,e,t,g,f){var _="nth"!==m.slice(0,3),v="last"!==m.slice(-4),b="of-type"===e;return 1===g&&0===f?function(e){return!!e.parentNode}:function(e,t,i){var s,n,a,r,o,l,d=_!=v?"nextSibling":"previousSibling",h=e.parentNode,c=b&&e.nodeName.toLowerCase(),u=!i&&!b,p=!1;if(h){if(_){for(;d;){for(r=e;r=r[d];)if(b?r.nodeName.toLowerCase()===c:1===r.nodeType)return!1;l=d="only"===m&&!l&&"nextSibling"}return!0}if(l=[v?h.firstChild:h.lastChild],v&&u){for(p=(o=(s=(n=(a=(r=h)[T]||(r[T]={}))[r.uniqueID]||(a[r.uniqueID]={}))[m]||[])[0]===R&&s[1])&&s[2],r=o&&h.childNodes[o];r=++o&&r&&r[d]||(p=o=0)||l.pop();)if(1===r.nodeType&&++p&&r===e){n[m]=[R,o,p];break}}else if(u&&(p=o=(s=(n=(a=(r=e)[T]||(r[T]={}))[r.uniqueID]||(a[r.uniqueID]={}))[m]||[])[0]===R&&s[1]),!1===p)for(;(r=++o&&r&&r[d]||(p=o=0)||l.pop())&&((b?r.nodeName.toLowerCase()!==c:1!==r.nodeType)||!++p||(u&&((n=(a=r[T]||(r[T]={}))[r.uniqueID]||(a[r.uniqueID]={}))[m]=[R,p]),r!==e)););return(p-=f)===g||p%g==0&&0<=p/g}}},PSEUDO:function(e,a){var t,r=x.pseudos[e]||x.setFilters[e.toLowerCase()]||ae.error("unsupported pseudo: "+e);return r[T]?r(a):1<r.length?(t=[e,e,"",a],x.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var i,s=r(e,a),n=s.length;n--;)e[i=M(e,s[n])]=!(t[i]=s[n])}):function(e){return r(e,0,t)}):r}},pseudos:{not:oe(function(e){var s=[],n=[],o=u(e.replace(Y,"$1"));return o[T]?oe(function(e,t,i,s){for(var n,a=o(e,null,s,[]),r=e.length;r--;)(n=a[r])&&(e[r]=!(t[r]=n))}):function(e,t,i){return s[0]=e,o(s,null,i,n),s[0]=null,!n.pop()}}),has:oe(function(t){return function(e){return 0<ae(t,e).length}}),contains:oe(function(t){return t=t.replace(te,c),function(e){return-1<(e.textContent||e.innerText||a(e)).indexOf(t)}}),lang:oe(function(i){return $.test(i||"")||ae.error("unsupported lang: "+i),i=i.replace(te,c).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ce(!1),disabled:ce(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:ue(function(){return[0]}),last:ue(function(e,t){return[t-1]}),eq:ue(function(e,t,i){return[i<0?i+t:i]}),even:ue(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:ue(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:ue(function(e,t,i){for(var s=i<0?i+t:i;0<=--s;)e.push(s);return e}),gt:ue(function(e,t,i){for(var s=i<0?i+t:i;++s<t;)e.push(s);return e})}}).pseudos.nth=x.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})x.pseudos[e]=function(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}(e);function me(){}function ge(e){for(var t=0,i=e.length,s="";t<i;t++)s+=e[t].value;return s}function fe(r,e,t){var o=e.dir,l=e.next,d=l||o,h=t&&"parentNode"===d,c=b++;return e.first?function(e,t,i){for(;e=e[o];)if(1===e.nodeType||h)return r(e,t,i);return!1}:function(e,t,i){var s,n,a=[R,c];if(i){for(;e=e[o];)if((1===e.nodeType||h)&&r(e,t,i))return!0}else for(;e=e[o];)if(1===e.nodeType||h)if(s=(n=e[T]||(e[T]={}))[e.uniqueID]||(n[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[o]||e;else{if((n=s[d])&&n[0]===R&&n[1]===c)return a[2]=n[2];if((s[d]=a)[2]=r(e,t,i))return!0}return!1}}function _e(n){return 1<n.length?function(e,t,i){for(var s=n.length;s--;)if(!n[s](e,t,i))return!1;return!0}:n[0]}function ve(e,t,i,s,n){for(var a,r=[],o=0,l=e.length,d=null!=t;o<l;o++)(a=e[o])&&(i&&!i(a,s,n)||(r.push(a),d&&t.push(o)));return r}function be(p,m,g,f,_,e){return f&&!f[T]&&(f=be(f)),_&&!_[T]&&(_=be(_,e)),oe(function(e,t,i,s){var n,a,r,o=[],l=[],d=t.length,h=e||function(e,t,i){for(var s=0,n=t.length;s<n;s++)ae(e,t[s],i);return i}(m||"*",i.nodeType?[i]:i,[]),c=!p||!e&&m?h:ve(h,o,p,i,s),u=g?_||(e?p:d||f)?[]:t:c;if(g&&g(c,u,i,s),f)for(n=ve(u,l),f(n,[],i,s),a=n.length;a--;)(r=n[a])&&(u[l[a]]=!(c[l[a]]=r));if(e){if(_||p){if(_){for(n=[],a=u.length;a--;)(r=u[a])&&n.push(c[a]=r);_(null,u=[],n,s)}for(a=u.length;a--;)(r=u[a])&&-1<(n=_?M(e,r):o[a])&&(e[n]=!(t[n]=r))}}else u=ve(u===t?u.splice(d,u.length):u),_?_(null,t,u,s):E.apply(t,u)})}function xe(f,_){function e(e,t,i,s,n){var a,r,o,l=0,d="0",h=e&&[],c=[],u=y,p=e||b&&x.find.TAG("*",n),m=R+=null==u?1:Math.random()||.1,g=p.length;for(n&&(y=t===C||t||n);d!==g&&null!=(a=p[d]);d++){if(b&&a){for(r=0,t||a.ownerDocument===C||(w(a),i=!S);o=f[r++];)if(o(a,t||C,i)){s.push(a);break}n&&(R=m)}v&&((a=!o&&a)&&l--,e&&h.push(a))}if(l+=d,v&&d!==l){for(r=0;o=_[r++];)o(h,c,t,i);if(e){if(0<l)for(;d--;)h[d]||c[d]||(c[d]=L.call(s));c=ve(c)}E.apply(s,c),n&&!e&&0<c.length&&1<l+_.length&&ae.uniqueSort(s)}return n&&(R=m,y=u),h}var v=0<_.length,b=0<f.length;return v?oe(e):e}return me.prototype=x.filters=x.pseudos,x.setFilters=new me,m=ae.tokenize=function(e,t){var i,s,n,a,r,o,l,d=O[e+" "];if(d)return t?0:d.slice(0);for(r=e,o=[],l=x.preFilter;r;){for(a in i&&!(s=U.exec(r))||(s&&(r=r.slice(s[0].length)||r),o.push(n=[])),i=!1,(s=W.exec(r))&&(i=s.shift(),n.push({value:i,type:s[0].replace(Y," ")}),r=r.slice(i.length)),x.filter)!(s=q[a].exec(r))||l[a]&&!(s=l[a](s))||(i=s.shift(),n.push({value:i,type:a,matches:s}),r=r.slice(i.length));if(!i)break}return t?r.length:r?ae.error(e):O(e,o).slice(0)},u=ae.compile=function(e,t){var i,s=[],n=[],a=D[e+" "];if(!a){for(i=(t=t||m(e)).length;i--;)((a=function e(t){for(var s,i,n,a=t.length,r=x.relative[t[0].type],o=r||x.relative[" "],l=r?1:0,d=fe(function(e){return e===s},o,!0),h=fe(function(e){return-1<M(s,e)},o,!0),c=[function(e,t,i){return i=!r&&(i||t!==y)||((s=t).nodeType?d:h)(e,t,i),s=null,i}];l<a;l++)if(i=x.relative[t[l].type])c=[fe(_e(c),i)];else{if((i=x.filter[t[l].type].apply(null,t[l].matches))[T]){for(n=++l;n<a&&!x.relative[t[n].type];n++);return be(1<l&&_e(c),1<l&&ge(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(Y,"$1"),i,l<n&&e(t.slice(l,n)),n<a&&e(t=t.slice(n)),n<a&&ge(t))}c.push(i)}return _e(c)}(t[i]))[T]?s:n).push(a);(a=D(e,xe(n,s))).selector=e}return a},g=ae.select=function(e,t,i,s){var n,a,r,o,l,d="function"==typeof e&&e,h=!s&&m(e=d.selector||e);if(i=i||[],1===h.length){if(2<(a=h[0]=h[0].slice(0)).length&&"ID"===(r=a[0]).type&&9===t.nodeType&&S&&x.relative[a[1].type]){if(!(t=(x.find.ID(r.matches[0].replace(te,c),t)||[])[0]))return i;d&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(n=q.needsContext.test(e)?0:a.length;n--&&(r=a[n],!x.relative[o=r.type]);)if((l=x.find[o])&&(s=l(r.matches[0].replace(te,c),ee.test(a[0].type)&&pe(t.parentNode)||t))){if(a.splice(n,1),!(e=s.length&&ge(a)))return E.apply(i,s),i;break}}return(d||u(e,h))(s,t,!S,i,!t||ee.test(e)&&pe(t.parentNode)||t),i},p.sortStable=T.split("").sort(I).join("")===T,p.detectDuplicates=!!d,w(),p.sortDetached=le(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||de("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),p.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||de("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||de(F,function(e,t,i){if(!i)return!0===e[t]?t.toLowerCase():(t=e.getAttributeNode(t))&&t.specified?t.value:null}),ae}(w);S.find=y,S.expr=y.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=y.uniqueSort,S.text=y.getText,S.isXMLDoc=y.isXML,S.contains=y.contains,S.escapeSelector=y.escape;function T(e,t,i){for(var s=[],n=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&S(e).is(i))break;s.push(e)}return s}function R(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}var k=S.expr.match.needsContext;function O(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(e,i,s){return b(i)?S.grep(e,function(e,t){return!!i.call(e,t,e)!==s}):i.nodeType?S.grep(e,function(e){return e===i!==s}):"string"!=typeof i?S.grep(e,function(e){return-1<n.call(i,e)!==s}):S.filter(i,e,s)}S.filter=function(e,t,i){var s=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===s.nodeType?S.find.matchesSelector(s,e)?[s]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,i,s=this.length,n=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<s;t++)if(S.contains(n[t],this))return!0}));for(i=this.pushStack([]),t=0;t<s;t++)S.find(e,n[t],i);return 1<s?S.uniqueSort(i):i},filter:function(e){return this.pushStack(I(this,e||[],!1))},not:function(e){return this.pushStack(I(this,e||[],!0))},is:function(e){return!!I(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var j,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,i){if(!e)return this;if(i=i||j,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):b(e)?void 0!==i.ready?i.ready(e):e(S):S.makeArray(e,this);if(!(s="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!s[1]&&t)return(!t||t.jquery?t||i:this.constructor(t)).find(e);if(s[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:C,!0)),D.test(s[1])&&S.isPlainObject(t))for(var s in t)b(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}return(e=C.getElementById(s[2]))&&(this[0]=e,this.length=1),this}).prototype=S.fn,j=S(C);var A=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}S.fn.extend({has:function(e){var t=S(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var i,s=0,n=this.length,a=[],r="string"!=typeof e&&S(e);if(!k.test(e))for(;s<n;s++)for(i=this[s];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(r?-1<r.index(i):1===i.nodeType&&S.find.matchesSelector(i,e))){a.push(i);break}return this.pushStack(1<a.length?S.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?n.call(S(e),this[0]):n.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,i){return T(e,"parentNode",i)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,i){return T(e,"nextSibling",i)},prevUntil:function(e,t,i){return T(e,"previousSibling",i)},siblings:function(e){return R((e.parentNode||{}).firstChild,e)},children:function(e){return R(e.firstChild)},contents:function(e){return O(e,"iframe")?e.contentDocument:(O(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(s,n){S.fn[s]=function(e,t){var i=S.map(this,n,e);return"Until"!==s.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=S.filter(t,i)),1<this.length&&(E[s]||S.uniqueSort(i),A.test(s)&&i.reverse()),this.pushStack(i)}});var M=/[^\x20\t\r\n\f]+/g;function F(e){return e}function N(e){throw e}function z(e,t,i,s){var n;try{e&&b(n=e.promise)?n.call(e).done(t).fail(i):e&&b(n=e.then)?n.call(e,t,i):t.apply(void 0,[e].slice(s))}catch(e){i.apply(void 0,[e])}}S.Callbacks=function(s){var e,i;s="string"==typeof s?(e=s,i={},S.each(e.match(M)||[],function(e,t){i[t]=!0}),i):S.extend({},s);function n(){for(o=o||s.once,r=a=!0;d.length;h=-1)for(t=d.shift();++h<l.length;)!1===l[h].apply(t[0],t[1])&&s.stopOnFalse&&(h=l.length,t=!1);s.memory||(t=!1),a=!1,o&&(l=t?[]:"")}var a,t,r,o,l=[],d=[],h=-1,c={add:function(){return l&&(t&&!a&&(h=l.length-1,d.push(t)),function i(e){S.each(e,function(e,t){b(t)?s.unique&&c.has(t)||l.push(t):t&&t.length&&"string"!==m(t)&&i(t)})}(arguments),t&&!a&&n()),this},remove:function(){return S.each(arguments,function(e,t){for(var i;-1<(i=S.inArray(t,l,i));)l.splice(i,1),i<=h&&h--}),this},has:function(e){return e?-1<S.inArray(e,l):0<l.length},empty:function(){return l=l&&[],this},disable:function(){return o=d=[],l=t="",this},disabled:function(){return!l},lock:function(){return o=d=[],t||a||(l=t=""),this},locked:function(){return!!o},fireWith:function(e,t){return o||(t=[e,(t=t||[]).slice?t.slice():t],d.push(t),a||n()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},S.extend({Deferred:function(e){var a=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var n=arguments;return S.Deferred(function(s){S.each(a,function(e,t){var i=b(n[t[4]])&&n[t[4]];o[t[1]](function(){var e=i&&i.apply(this,arguments);e&&b(e.promise)?e.promise().progress(s.notify).done(s.resolve).fail(s.reject):s[t[0]+"With"](this,i?[e]:arguments)})}),n=null}).promise()},then:function(t,i,s){var l=0;function d(n,a,r,o){return function(){function e(){var e,t;if(!(n<l)){if((e=r.apply(i,s))===a.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,b(t)?o?t.call(e,d(l,a,F,o),d(l,a,N,o)):(l++,t.call(e,d(l,a,F,o),d(l,a,N,o),d(l,a,F,a.notifyWith))):(r!==F&&(i=void 0,s=[e]),(o||a.resolveWith)(i,s))}}var i=this,s=arguments,t=o?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),l<=n+1&&(r!==N&&(i=void 0,s=[e]),a.rejectWith(i,s))}};n?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),w.setTimeout(t))}}return S.Deferred(function(e){a[0][3].add(d(0,e,b(s)?s:F,e.notifyWith)),a[1][3].add(d(0,e,b(t)?t:F)),a[2][3].add(d(0,e,b(i)?i:N))}).promise()},promise:function(e){return null!=e?S.extend(e,r):r}},o={};return S.each(a,function(e,t){var i=t[2],s=t[5];r[t[1]]=i.add,s&&i.add(function(){n=s},a[3-e][2].disable,a[3-e][3].disable,a[0][2].lock,a[0][3].lock),i.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=i.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){function t(t){return function(e){n[t]=this,a[t]=1<arguments.length?o.call(arguments):e,--i||r.resolveWith(n,a)}}var i=arguments.length,s=i,n=Array(s),a=o.call(arguments),r=S.Deferred();if(i<=1&&(z(e,r.done(t(s)).resolve,r.reject,!i),"pending"===r.state()||b(a[s]&&a[s].then)))return r.then();for(;s--;)z(a[s],t(s),r.reject);return r.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&V.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){w.setTimeout(function(){throw e})};var B=S.Deferred();function H(){C.removeEventListener("DOMContentLoaded",H),w.removeEventListener("load",H),S.ready()}S.fn.ready=function(e){return B.then(e).catch(function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||B.resolveWith(C,[S])}}),S.ready.then=B.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?w.setTimeout(S.ready):(C.addEventListener("DOMContentLoaded",H),w.addEventListener("load",H));var Y=function(e,t,i,s,n,a,r){var o=0,l=e.length,d=null==i;if("object"===m(i))for(o in n=!0,i)Y(e,t,o,i[o],!0,a,r);else if(void 0!==s&&(n=!0,b(s)||(r=!0),d&&(t=r?(t.call(e,s),null):(d=t,function(e,t,i){return d.call(S(e),i)})),t))for(;o<l;o++)t(e[o],i,r?s:s.call(e[o],o,t(e[o],i)));return n?e:d?t.call(e):l?t(e[0],i):a},U=/^-ms-/,W=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function G(e){return e.replace(U,"ms-").replace(W,X)}function $(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function q(){this.expando=S.expando+q.uid++}q.uid=1,q.prototype={cache:function(e){var t=e[this.expando];return t||(t={},$(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var s,n=this.cache(e);if("string"==typeof t)n[G(t)]=i;else for(s in t)n[G(s)]=t[s];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][G(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,s=e[this.expando];if(void 0!==s){if(void 0!==t){i=(t=Array.isArray(t)?t.map(G):(t=G(t))in s?[t]:t.match(M)||[]).length;for(;i--;)delete s[t[i]]}void 0!==t&&!S.isEmptyObject(s)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var Q=new q,K=new q,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function ee(e,t,i){var s,n;if(void 0===i&&1===e.nodeType)if(s="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(s))){try{i="true"===(n=i)||"false"!==n&&("null"===n?null:n===+n+""?+n:Z.test(n)?JSON.parse(n):n)}catch(e){}K.set(e,t,i)}else i=void 0;return i}S.extend({hasData:function(e){return K.hasData(e)||Q.hasData(e)},data:function(e,t,i){return K.access(e,t,i)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,i){return Q.access(e,t,i)},_removeData:function(e,t){Q.remove(e,t)}}),S.fn.extend({data:function(i,e){var t,s,n,a=this[0],r=a&&a.attributes;if(void 0!==i)return"object"==typeof i?this.each(function(){K.set(this,i)}):Y(this,function(e){var t;return a&&void 0===e?void 0!==(t=K.get(a,i))||void 0!==(t=ee(a,i))?t:void 0:void this.each(function(){K.set(this,i,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(n=K.get(a),1===a.nodeType&&!Q.get(a,"hasDataAttrs"))){for(t=r.length;t--;)r[t]&&0===(s=r[t].name).indexOf("data-")&&(s=G(s.slice(5)),ee(a,s,n[s]));Q.set(a,"hasDataAttrs",!0)}return n},removeData:function(e){return this.each(function(){K.remove(this,e)})}}),S.extend({queue:function(e,t,i){var s;if(e)return t=(t||"fx")+"queue",s=Q.get(e,t),i&&(!s||Array.isArray(i)?s=Q.access(e,t,S.makeArray(i)):s.push(i)),s||[]},dequeue:function(e,t){t=t||"fx";var i=S.queue(e,t),s=i.length,n=i.shift(),a=S._queueHooks(e,t);"inprogress"===n&&(n=i.shift(),s--),n&&("fx"===t&&i.unshift("inprogress"),delete a.stop,n.call(e,function(){S.dequeue(e,t)},a)),!s&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Q.get(e,i)||Q.access(e,i,{empty:S.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",i])})})}}),S.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===i?this:this.each(function(){var e=S.queue(this,t,i);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function i(){--n||a.resolveWith(r,[r])}var s,n=1,a=S.Deferred(),r=this,o=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(s=Q.get(r[o],e+"queueHooks"))&&s.empty&&(n++,s.empty.add(i));return i(),a.promise(t)}});function te(e,t,i,s){var n,a={};for(n in t)a[n]=e.style[n],e.style[n]=t[n];for(n in s=i.apply(e,s||[]),t)e.style[n]=a[n];return s}var c=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+c+")([a-z%]*)$","i"),se=["Top","Right","Bottom","Left"],ne=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&S.contains(e.ownerDocument,e)&&"none"===S.css(e,"display")};function ae(e,t,i,s){var n,a,r=20,o=s?function(){return s.cur()}:function(){return S.css(e,t,"")},l=o(),d=i&&i[3]||(S.cssNumber[t]?"":"px"),h=(S.cssNumber[t]||"px"!==d&&+l)&&ie.exec(S.css(e,t));if(h&&h[3]!==d){for(l/=2,d=d||h[3],h=+l||1;r--;)S.style(e,t,h+d),(1-a)*(1-(a=o()/l||.5))<=0&&(r=0),h/=a;h*=2,S.style(e,t,h+d),i=i||[]}return i&&(h=+h||+l||0,n=i[1]?h+(i[1]+1)*i[2]:+i[2],s&&(s.unit=d,s.start=h,s.end=n)),n}var re={};function oe(e,t){for(var i,s,n,a,r,o=[],l=0,d=e.length;l<d;l++)(s=e[l]).style&&(i=s.style.display,t?("none"===i&&(o[l]=Q.get(s,"display")||null,o[l]||(s.style.display="")),""===s.style.display&&ne(s)&&(o[l]=(r=a=void 0,a=(n=s).ownerDocument,r=n.nodeName,(n=re[r])||(a=a.body.appendChild(a.createElement(r)),n=S.css(a,"display"),a.parentNode.removeChild(a),"none"===n&&(n="block"),re[r]=n)))):"none"!==i&&(o[l]="none",Q.set(s,"display",i)));for(l=0;l<d;l++)null!=o[l]&&(e[l].style.display=o[l]);return e}S.fn.extend({show:function(){return oe(this,!0)},hide:function(){return oe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ne(this)?S(this).show():S(this).hide()})}});var le=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ce={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ue(e,t){var i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&O(e,t)?S.merge([e],i):i}function pe(e,t){for(var i=0,s=e.length;i<s;i++)Q.set(e[i],"globalEval",!t||Q.get(t[i],"globalEval"))}ce.optgroup=ce.option,ce.tbody=ce.tfoot=ce.colgroup=ce.caption=ce.thead,ce.th=ce.td;var me=/<|&#?\w+;/;function ge(e,t,i,s,n){for(var a,r,o,l,d,h=t.createDocumentFragment(),c=[],u=0,p=e.length;u<p;u++)if((a=e[u])||0===a)if("object"===m(a))S.merge(c,a.nodeType?[a]:a);else if(me.test(a)){for(r=r||h.appendChild(t.createElement("div")),o=(de.exec(a)||["",""])[1].toLowerCase(),o=ce[o]||ce._default,r.innerHTML=o[1]+S.htmlPrefilter(a)+o[2],d=o[0];d--;)r=r.lastChild;S.merge(c,r.childNodes),(r=h.firstChild).textContent=""}else c.push(t.createTextNode(a));for(h.textContent="",u=0;a=c[u++];)if(s&&-1<S.inArray(a,s))n&&n.push(a);else if(l=S.contains(a.ownerDocument,a),r=ue(h.appendChild(a),"script"),l&&pe(r),i)for(d=0;a=r[d++];)he.test(a.type||"")&&i.push(a);return h}t=C.createDocumentFragment().appendChild(C.createElement("div")),(y=C.createElement("input")).setAttribute("type","radio"),y.setAttribute("checked","checked"),y.setAttribute("name","t"),t.appendChild(y),v.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue;var fe=C.documentElement,_e=/^key/,ve=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,be=/^([^.]*)(?:\.(.+)|)/;function xe(){return!0}function ye(){return!1}function we(){try{return C.activeElement}catch(e){}}function Ce(e,t,i,s,n,a){var r,o;if("object"==typeof t){for(o in"string"!=typeof i&&(s=s||i,i=void 0),t)Ce(e,o,i,s,t[o],a);return e}if(null==s&&null==n?(n=i,s=i=void 0):null==n&&("string"==typeof i?(n=s,s=void 0):(n=s,s=i,i=void 0)),!1===n)n=ye;else if(!n)return e;return 1===a&&(r=n,(n=function(e){return S().off(e),r.apply(this,arguments)}).guid=r.guid||(r.guid=S.guid++)),e.each(function(){S.event.add(this,t,n,s,i)})}S.event={global:{},add:function(t,e,i,s,n){var a,r,o,l,d,h,c,u,p,m=Q.get(t);if(m)for(i.handler&&(i=(a=i).handler,n=a.selector),n&&S.find.matchesSelector(fe,n),i.guid||(i.guid=S.guid++),(o=m.events)||(o=m.events={}),(r=m.handle)||(r=m.handle=function(e){return void 0!==S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(M)||[""]).length;l--;)c=p=(d=be.exec(e[l])||[])[1],u=(d[2]||"").split(".").sort(),c&&(h=S.event.special[c]||{},c=(n?h.delegateType:h.bindType)||c,h=S.event.special[c]||{},d=S.extend({type:c,origType:p,data:s,handler:i,guid:i.guid,selector:n,needsContext:n&&S.expr.match.needsContext.test(n),namespace:u.join(".")},a),(p=o[c])||((p=o[c]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,s,u,r)||t.addEventListener&&t.addEventListener(c,r)),h.add&&(h.add.call(t,d),d.handler.guid||(d.handler.guid=i.guid)),n?p.splice(p.delegateCount++,0,d):p.push(d),S.event.global[c]=!0)},remove:function(e,t,i,s,n){var a,r,o,l,d,h,c,u,p,m,g,f=Q.hasData(e)&&Q.get(e);if(f&&(l=f.events)){for(d=(t=(t||"").match(M)||[""]).length;d--;)if(p=g=(o=be.exec(t[d])||[])[1],m=(o[2]||"").split(".").sort(),p){for(c=S.event.special[p]||{},u=l[p=(s?c.delegateType:c.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=a=u.length;a--;)h=u[a],!n&&g!==h.origType||i&&i.guid!==h.guid||o&&!o.test(h.namespace)||s&&s!==h.selector&&("**"!==s||!h.selector)||(u.splice(a,1),h.selector&&u.delegateCount--,c.remove&&c.remove.call(e,h));r&&!u.length&&(c.teardown&&!1!==c.teardown.call(e,m,f.handle)||S.removeEvent(e,p,f.handle),delete l[p])}else for(p in l)S.event.remove(e,p+t[d],i,s,!0);S.isEmptyObject(l)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,i,s,n,a,r=S.event.fix(e),o=new Array(arguments.length),l=(Q.get(this,"events")||{})[r.type]||[],e=S.event.special[r.type]||{};for(o[0]=r,t=1;t<arguments.length;t++)o[t]=arguments[t];if(r.delegateTarget=this,!e.preDispatch||!1!==e.preDispatch.call(this,r)){for(a=S.event.handlers.call(this,r,l),t=0;(s=a[t++])&&!r.isPropagationStopped();)for(r.currentTarget=s.elem,i=0;(n=s.handlers[i++])&&!r.isImmediatePropagationStopped();)r.rnamespace&&!r.rnamespace.test(n.namespace)||(r.handleObj=n,r.data=n.data,void 0!==(n=((S.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,o))&&!1===(r.result=n)&&(r.preventDefault(),r.stopPropagation()));return e.postDispatch&&e.postDispatch.call(this,r),r.result}},handlers:function(e,t){var i,s,n,a,r,o=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&!("click"===e.type&&1<=e.button))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(a=[],r={},i=0;i<l;i++)void 0===r[n=(s=t[i]).selector+" "]&&(r[n]=s.needsContext?-1<S(n,this).index(d):S.find(n,this,null,[d]).length),r[n]&&a.push(s);a.length&&o.push({elem:d,handlers:a})}return d=this,l<t.length&&o.push({elem:d,handlers:t.slice(l)}),o},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:b(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==we()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===we()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&O(this,"input"))return this.click(),!1},_default:function(e){return O(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?xe:ye,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:ye,isPropagationStopped:ye,isImmediatePropagationStopped:ye,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=xe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=xe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=xe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ve.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},S.event.addProp),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,n){S.event.special[e]={delegateType:n,bindType:n,handle:function(e){var t,i=e.relatedTarget,s=e.handleObj;return i&&(i===this||S.contains(this,i))||(e.type=s.origType,t=s.handler.apply(this,arguments),e.type=n),t}}}),S.fn.extend({on:function(e,t,i,s){return Ce(this,e,t,i,s)},one:function(e,t,i,s){return Ce(this,e,t,i,s,1)},off:function(e,t,i){var s,n;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,S(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=ye),this.each(function(){S.event.remove(this,e,i,t)});for(n in e)this.off(n,t,e[n]);return this}});var Se=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Te=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return O(e,"table")&&O(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var i,s,n,a,r,o;if(1===t.nodeType){if(Q.hasData(e)&&(a=Q.access(e),r=Q.set(t,a),o=a.events))for(n in delete r.handle,r.events={},o)for(i=0,s=o[n].length;i<s;i++)S.event.add(t,n,o[n][i]);K.hasData(e)&&(e=K.access(e),e=S.extend({},e),K.set(t,e))}}function Le(i,s,n,a){s=f.apply([],s);var e,t,r,o,l,d,h=0,c=i.length,u=c-1,p=s[0],m=b(p);if(m||1<c&&"string"==typeof p&&!v.checkClone&&Re.test(p))return i.each(function(e){var t=i.eq(e);m&&(s[0]=p.call(this,e,t.html())),Le(t,s,n,a)});if(c&&(t=(e=ge(s,i[0].ownerDocument,!1,i,a)).firstChild,1===e.childNodes.length&&(e=t),t||a)){for(o=(r=S.map(ue(e,"script"),De)).length;h<c;h++)l=e,h!==u&&(l=S.clone(l,!0,!0),o&&S.merge(r,ue(l,"script"))),n.call(i[h],l,h);if(o)for(d=r[r.length-1].ownerDocument,S.map(r,Ie),h=0;h<o;h++)l=r[h],he.test(l.type||"")&&!Q.access(l,"globalEval")&&S.contains(d,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?S._evalUrl&&S._evalUrl(l.src):x(l.textContent.replace(ke,""),d,l))}return i}function Ae(e,t,i){for(var s,n=t?S.filter(t,e):e,a=0;null!=(s=n[a]);a++)i||1!==s.nodeType||S.cleanData(ue(s)),s.parentNode&&(i&&S.contains(s.ownerDocument,s)&&pe(ue(s,"script")),s.parentNode.removeChild(s));return e}S.extend({htmlPrefilter:function(e){return e.replace(Se,"<$1></$2>")},clone:function(e,t,i){var s,n,a,r,o,l,d,h=e.cloneNode(!0),c=S.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(r=ue(h),s=0,n=(a=ue(e)).length;s<n;s++)o=a[s],l=r[s],d=void 0,"input"===(d=l.nodeName.toLowerCase())&&le.test(o.type)?l.checked=o.checked:"input"!==d&&"textarea"!==d||(l.defaultValue=o.defaultValue);if(t)if(i)for(a=a||ue(e),r=r||ue(h),s=0,n=a.length;s<n;s++)je(a[s],r[s]);else je(e,h);return 0<(r=ue(h,"script")).length&&pe(r,!c&&ue(e,"script")),h},cleanData:function(e){for(var t,i,s,n=S.event.special,a=0;void 0!==(i=e[a]);a++)if($(i)){if(t=i[Q.expando]){if(t.events)for(s in t.events)n[s]?S.event.remove(i,s):S.removeEvent(i,s,t.handle);i[Q.expando]=void 0}i[K.expando]&&(i[K.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Ae(this,e,!0)},remove:function(e){return Ae(this,e)},text:function(e){return Y(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Le(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Le(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=Oe(this,e)).insertBefore(e,t.firstChild)})},before:function(){return Le(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Le(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ue(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return Y(this,function(e){var t=this[0]||{},i=0,s=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Te.test(e)&&!ce[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;i<s;i++)1===(t=this[i]||{}).nodeType&&(S.cleanData(ue(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return Le(this,arguments,function(e){var t=this.parentNode;S.inArray(this,i)<0&&(S.cleanData(ue(this)),t&&t.replaceChild(e,this))},i)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,r){S.fn[e]=function(e){for(var t,i=[],s=S(e),n=s.length-1,a=0;a<=n;a++)t=a===n?this:this.clone(!0),S(s[a])[r](t),l.apply(i,t.get());return this.pushStack(i)}});var Ee,Pe,Me,Fe,Ne,ze,Ve,Be=new RegExp("^("+c+")(?!px)[a-z%]+$","i"),He=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=w),t.getComputedStyle(e)},Ye=new RegExp(se.join("|"),"i");function Ue(){var e;Ve&&(ze.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",Ve.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",fe.appendChild(ze).appendChild(Ve),e=w.getComputedStyle(Ve),Ee="1%"!==e.top,Ne=12===We(e.marginLeft),Ve.style.right="60%",Fe=36===We(e.right),Pe=36===We(e.width),Ve.style.position="absolute",Me=36===Ve.offsetWidth||"absolute",fe.removeChild(ze),Ve=null)}function We(e){return Math.round(parseFloat(e))}function Xe(e,t,i){var s,n,a=e.style;return(i=i||He(e))&&(""!==(n=i.getPropertyValue(t)||i[t])||S.contains(e.ownerDocument,e)||(n=S.style(e,t)),!v.pixelBoxStyles()&&Be.test(n)&&Ye.test(t)&&(s=a.width,e=a.minWidth,t=a.maxWidth,a.minWidth=a.maxWidth=a.width=n,n=i.width,a.width=s,a.minWidth=e,a.maxWidth=t)),void 0!==n?n+"":n}function Ge(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}ze=C.createElement("div"),(Ve=C.createElement("div")).style&&(Ve.style.backgroundClip="content-box",Ve.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===Ve.style.backgroundClip,S.extend(v,{boxSizingReliable:function(){return Ue(),Pe},pixelBoxStyles:function(){return Ue(),Fe},pixelPosition:function(){return Ue(),Ee},reliableMarginLeft:function(){return Ue(),Ne},scrollboxSize:function(){return Ue(),Me}}));var $e=/^(none|table(?!-c[ea]).+)/,qe=/^--/,Qe={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"},Ze=["Webkit","Moz","ms"],Je=C.createElement("div").style;function et(e){return S.cssProps[e]||(S.cssProps[e]=function(e){if(e in Je)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=Ze.length;i--;)if((e=Ze[i]+t)in Je)return e}(e)||e)}function tt(e,t,i){var s=ie.exec(t);return s?Math.max(0,s[2]-(i||0))+(s[3]||"px"):t}function it(e,t,i,s,n,a){var r="width"===t?1:0,o=0,l=0;if(i===(s?"border":"content"))return 0;for(;r<4;r+=2)"margin"===i&&(l+=S.css(e,i+se[r],!0,n)),s?("content"===i&&(l-=S.css(e,"padding"+se[r],!0,n)),"margin"!==i&&(l-=S.css(e,"border"+se[r]+"Width",!0,n))):(l+=S.css(e,"padding"+se[r],!0,n),"padding"!==i?l+=S.css(e,"border"+se[r]+"Width",!0,n):o+=S.css(e,"border"+se[r]+"Width",!0,n));return!s&&0<=a&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-o-.5))),l}function st(e,t,i){var s=He(e),n=Xe(e,t,s),a="border-box"===S.css(e,"boxSizing",!1,s),r=a;if(Be.test(n)){if(!i)return n;n="auto"}return r=r&&(v.boxSizingReliable()||n===e.style[t]),"auto"!==n&&(parseFloat(n)||"inline"!==S.css(e,"display",!1,s))||(n=e["offset"+t[0].toUpperCase()+t.slice(1)],r=!0),(n=parseFloat(n)||0)+it(e,t,i||(a?"border":"content"),r,s,n)+"px"}function nt(e,t,i,s,n){return new nt.prototype.init(e,t,i,s,n)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){e=Xe(e,"opacity");return""===e?"1":e}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,a,r,o=G(t),l=qe.test(t),d=e.style;if(l||(t=et(o)),r=S.cssHooks[t]||S.cssHooks[o],void 0===i)return r&&"get"in r&&void 0!==(n=r.get(e,!1,s))?n:d[t];"string"===(a=typeof i)&&(n=ie.exec(i))&&n[1]&&(i=ae(e,t,n),a="number"),null!=i&&i==i&&("number"===a&&(i+=n&&n[3]||(S.cssNumber[o]?"":"px")),v.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),r&&"set"in r&&void 0===(i=r.set(e,i,s))||(l?d.setProperty(t,i):d[t]=i))}},css:function(e,t,i,s){var n,a=G(t);return qe.test(t)||(t=et(a)),(a=S.cssHooks[t]||S.cssHooks[a])&&"get"in a&&(n=a.get(e,!0,i)),void 0===n&&(n=Xe(e,t,s)),"normal"===n&&t in Ke&&(n=Ke[t]),""===i||i?(t=parseFloat(n),!0===i||isFinite(t)?t||0:n):n}}),S.each(["height","width"],function(e,r){S.cssHooks[r]={get:function(e,t,i){if(t)return!$e.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?st(e,r,i):te(e,Qe,function(){return st(e,r,i)})},set:function(e,t,i){var s,n=He(e),a="border-box"===S.css(e,"boxSizing",!1,n),i=i&&it(e,r,i,a,n);return a&&v.scrollboxSize()===n.position&&(i-=Math.ceil(e["offset"+r[0].toUpperCase()+r.slice(1)]-parseFloat(n[r])-it(e,r,"border",!1,n)-.5)),i&&(s=ie.exec(t))&&"px"!==(s[3]||"px")&&(e.style[r]=t,t=S.css(e,r)),tt(0,t,i)}}}),S.cssHooks.marginLeft=Ge(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Xe(e,"marginLeft"))||e.getBoundingClientRect().left-te(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(n,a){S.cssHooks[n+a]={expand:function(e){for(var t=0,i={},s="string"==typeof e?e.split(" "):[e];t<4;t++)i[n+se[t]+a]=s[t]||s[t-2]||s[0];return i}},"margin"!==n&&(S.cssHooks[n+a].set=tt)}),S.fn.extend({css:function(e,t){return Y(this,function(e,t,i){var s,n,a={},r=0;if(Array.isArray(t)){for(s=He(e),n=t.length;r<n;r++)a[t[r]]=S.css(e,t[r],!1,s);return a}return void 0!==i?S.style(e,t,i):S.css(e,t)},e,t,1<arguments.length)}}),(S.Tween=nt).prototype={constructor:nt,init:function(e,t,i,s,n,a){this.elem=e,this.prop=i,this.easing=n||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=s,this.unit=a||(S.cssNumber[i]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return(e&&e.get?e:nt.propHooks._default).get(this)},run:function(e){var t,i=nt.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(i&&i.set?i:nt.propHooks._default).set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=S.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[S.cssProps[e.prop]]&&!S.cssHooks[e.prop]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=nt.prototype.init,S.fx.step={};var at,rt,ot=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function dt(){rt&&(!1===C.hidden&&w.requestAnimationFrame?w.requestAnimationFrame(dt):w.setTimeout(dt,S.fx.interval),S.fx.tick())}function ht(){return w.setTimeout(function(){at=void 0}),at=Date.now()}function ct(e,t){var i,s=0,n={height:e};for(t=t?1:0;s<4;s+=2-t)n["margin"+(i=se[s])]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function ut(e,t,i){for(var s,n=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),a=0,r=n.length;a<r;a++)if(s=n[a].call(i,t,e))return s}function pt(n,e,t){var i,a,s=0,r=pt.prefilters.length,o=S.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var e=at||ht(),e=Math.max(0,d.startTime+d.duration-e),t=1-(e/d.duration||0),i=0,s=d.tweens.length;i<s;i++)d.tweens[i].run(t);return o.notifyWith(n,[d,t,e]),t<1&&s?e:(s||o.notifyWith(n,[d,1,0]),o.resolveWith(n,[d]),!1)},d=o.promise({elem:n,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:at||ht(),duration:t.duration,tweens:[],createTween:function(e,t){e=S.Tween(n,d.opts,e,t,d.opts.specialEasing[e]||d.opts.easing);return d.tweens.push(e),e},stop:function(e){var t=0,i=e?d.tweens.length:0;if(a)return this;for(a=!0;t<i;t++)d.tweens[t].run(1);return e?(o.notifyWith(n,[d,1,0]),o.resolveWith(n,[d,e])):o.rejectWith(n,[d,e]),this}}),h=d.props;for(!function(e,t){var i,s,n,a,r;for(i in e)if(n=t[s=G(i)],a=e[i],Array.isArray(a)&&(n=a[1],a=e[i]=a[0]),i!==s&&(e[s]=a,delete e[i]),(r=S.cssHooks[s])&&"expand"in r)for(i in a=r.expand(a),delete e[s],a)i in e||(e[i]=a[i],t[i]=n);else t[s]=n}(h,d.opts.specialEasing);s<r;s++)if(i=pt.prefilters[s].call(d,n,h,d.opts))return b(i.stop)&&(S._queueHooks(d.elem,d.opts.queue).stop=i.stop.bind(i)),i;return S.map(h,ut,d),b(d.opts.start)&&d.opts.start.call(n,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),S.fx.timer(S.extend(l,{elem:n,anim:d,queue:d.opts.queue})),d}S.Animation=S.extend(pt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return ae(i.elem,e,ie.exec(t),i),i}]},tweener:function(e,t){for(var i,s=0,n=(e=b(e)?(t=e,["*"]):e.match(M)).length;s<n;s++)i=e[s],pt.tweeners[i]=pt.tweeners[i]||[],pt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var s,n,a,r,o,l,d,h="width"in t||"height"in t,c=this,u={},p=e.style,m=e.nodeType&&ne(e),g=Q.get(e,"fxshow");for(s in i.queue||(null==(r=S._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,o=r.empty.fire,r.empty.fire=function(){r.unqueued||o()}),r.unqueued++,c.always(function(){c.always(function(){r.unqueued--,S.queue(e,"fx").length||r.empty.fire()})})),t)if(n=t[s],ot.test(n)){if(delete t[s],a=a||"toggle"===n,n===(m?"hide":"show")){if("show"!==n||!g||void 0===g[s])continue;m=!0}u[s]=g&&g[s]||S.style(e,s)}if((l=!S.isEmptyObject(t))||!S.isEmptyObject(u))for(s in h&&1===e.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(d=g&&g.display)&&(d=Q.get(e,"display")),"none"===(h=S.css(e,"display"))&&(d?h=d:(oe([e],!0),d=e.style.display||d,h=S.css(e,"display"),oe([e]))),("inline"===h||"inline-block"===h&&null!=d)&&"none"===S.css(e,"float")&&(l||(c.done(function(){p.display=d}),null==d&&(h=p.display,d="none"===h?"":h)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,u)l||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:d}),a&&(g.hidden=!m),m&&oe([e],!0),c.done(function(){for(s in m||oe([e]),Q.remove(e,"fxshow"),u)S.style(e,s,u[s])})),l=ut(m?g[s]:0,s,c),s in g||(g[s]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),S.speed=function(e,t,i){var s=e&&"object"==typeof e?S.extend({},e):{complete:i||!i&&t||b(e)&&e,duration:e,easing:i&&t||t&&!b(t)&&t};return S.fx.off?s.duration=0:"number"!=typeof s.duration&&(s.duration in S.fx.speeds?s.duration=S.fx.speeds[s.duration]:s.duration=S.fx.speeds._default),null!=s.queue&&!0!==s.queue||(s.queue="fx"),s.old=s.complete,s.complete=function(){b(s.old)&&s.old.call(this),s.queue&&S.dequeue(this,s.queue)},s},S.fn.extend({fadeTo:function(e,t,i,s){return this.filter(ne).css("opacity",0).show().end().animate({opacity:t},e,i,s)},animate:function(t,e,i,s){var n=S.isEmptyObject(t),a=S.speed(e,i,s),s=function(){var e=pt(this,S.extend({},t),a);(n||Q.get(this,"finish"))&&e.stop(!0)};return s.finish=s,n||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(n,e,a){function r(e){var t=e.stop;delete e.stop,t(a)}return"string"!=typeof n&&(a=e,e=n,n=void 0),e&&!1!==n&&this.queue(n||"fx",[]),this.each(function(){var e=!0,t=null!=n&&n+"queueHooks",i=S.timers,s=Q.get(this);if(t)s[t]&&s[t].stop&&r(s[t]);else for(t in s)s[t]&&s[t].stop&&lt.test(t)&&r(s[t]);for(t=i.length;t--;)i[t].elem!==this||null!=n&&i[t].queue!==n||(i[t].anim.stop(a),e=!1,i.splice(t,1));!e&&a||S.dequeue(this,n)})},finish:function(r){return!1!==r&&(r=r||"fx"),this.each(function(){var e,t=Q.get(this),i=t[r+"queue"],s=t[r+"queueHooks"],n=S.timers,a=i?i.length:0;for(t.finish=!0,S.queue(this,r,[]),s&&s.stop&&s.stop.call(this,!0),e=n.length;e--;)n[e].elem===this&&n[e].queue===r&&(n[e].anim.stop(!0),n.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,s){var n=S.fn[s];S.fn[s]=function(e,t,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ct(s,!0),e,t,i)}}),S.each({slideDown:ct("show"),slideUp:ct("hide"),slideToggle:ct("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,s){S.fn[e]=function(e,t,i){return this.animate(s,e,t,i)}}),S.timers=[],S.fx.tick=function(){var e,t=0,i=S.timers;for(at=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||S.fx.stop(),at=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){rt||(rt=!0,dt())},S.fx.stop=function(){rt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(s,e){return s=S.fx&&S.fx.speeds[s]||s,e=e||"fx",this.queue(e,function(e,t){var i=w.setTimeout(e,s);t.stop=function(){w.clearTimeout(i)}})},t=C.createElement("input"),c=C.createElement("select").appendChild(C.createElement("option")),t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=c.selected,(t=C.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value;var mt,gt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return Y(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,i){var s,n,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?S.prop(e,t,i):(1===a&&S.isXMLDoc(e)||(n=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?mt:void 0)),void 0!==i?null===i?void S.removeAttr(e,t):n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:(e.setAttribute(t,i+""),i):!(n&&"get"in n&&null!==(s=n.get(e,t)))&&null==(s=S.find.attr(e,t))?void 0:s)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&O(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,s=0,n=t&&t.match(M);if(n&&1===e.nodeType)for(;i=n[s++];)e.removeAttribute(i)}}),mt={set:function(e,t,i){return!1===t?S.removeAttr(e,i):e.setAttribute(i,i),i}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var r=gt[t]||S.find.attr;gt[t]=function(e,t,i){var s,n,a=t.toLowerCase();return i||(n=gt[a],gt[a]=s,s=null!=r(e,t,i)?a:null,gt[a]=n),s}});var ft=/^(?:input|select|textarea|button)$/i,_t=/^(?:a|area)$/i;function vt(e){return(e.match(M)||[]).join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}S.fn.extend({prop:function(e,t){return Y(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,i){var s,n,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&S.isXMLDoc(e)||(t=S.propFix[t]||t,n=S.propHooks[t]),void 0!==i?n&&"set"in n&&void 0!==(s=n.set(e,i,t))?s:e[t]=i:n&&"get"in n&&null!==(s=n.get(e,t))?s:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||_t.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(S.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,i,s,n,a,r,o=0;if(b(t))return this.each(function(e){S(this).addClass(t.call(this,e,bt(this)))});if((e=xt(t)).length)for(;i=this[o++];)if(r=bt(i),s=1===i.nodeType&&" "+vt(r)+" "){for(a=0;n=e[a++];)s.indexOf(" "+n+" ")<0&&(s+=n+" ");r!==(r=vt(s))&&i.setAttribute("class",r)}return this},removeClass:function(t){var e,i,s,n,a,r,o=0;if(b(t))return this.each(function(e){S(this).removeClass(t.call(this,e,bt(this)))});if(!arguments.length)return this.attr("class","");if((e=xt(t)).length)for(;i=this[o++];)if(r=bt(i),s=1===i.nodeType&&" "+vt(r)+" "){for(a=0;n=e[a++];)for(;-1<s.indexOf(" "+n+" ");)s=s.replace(" "+n+" "," ");r!==(r=vt(s))&&i.setAttribute("class",r)}return this},toggleClass:function(n,t){var a=typeof n,r="string"==a||Array.isArray(n);return"boolean"==typeof t&&r?t?this.addClass(n):this.removeClass(n):b(n)?this.each(function(e){S(this).toggleClass(n.call(this,e,bt(this),t),t)}):this.each(function(){var e,t,i,s;if(r)for(t=0,i=S(this),s=xt(n);e=s[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==n&&"boolean"!=a||((e=bt(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==n&&Q.get(this,"__className__")||""))})},hasClass:function(e){for(var t,i=0,s=" "+e+" ";t=this[i++];)if(1===t.nodeType&&-1<(" "+vt(bt(t))+" ").indexOf(s))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(t){var i,e,s,n=this[0];return arguments.length?(s=b(t),this.each(function(e){1===this.nodeType&&(null==(e=s?t.call(this,e,S(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=S.map(e,function(e){return null==e?"":e+""})),(i=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,e,"value")||(this.value=e))})):n?(i=S.valHooks[n.type]||S.valHooks[n.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(n,"value"))?e:"string"==typeof(e=n.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:vt(S.text(e))}},select:{get:function(e){for(var t,i=e.options,s=e.selectedIndex,n="select-one"===e.type,a=n?null:[],r=n?s+1:i.length,o=s<0?r:n?s:0;o<r;o++)if(((t=i[o]).selected||o===s)&&!t.disabled&&(!t.parentNode.disabled||!O(t.parentNode,"optgroup"))){if(t=S(t).val(),n)return t;a.push(t)}return a},set:function(e,t){for(var i,s,n=e.options,a=S.makeArray(t),r=n.length;r--;)((s=n[r]).selected=-1<S.inArray(S.valHooks.option.get(s),a))&&(i=!0);return i||(e.selectedIndex=-1),a}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},v.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in w;function wt(e){e.stopPropagation()}var Ct=/^(?:focusinfocus|focusoutblur)$/;S.extend(S.event,{trigger:function(e,t,i,s){var n,a,r,o,l,d,h,c=[i||C],u=_.call(e,"type")?e.type:e,p=_.call(e,"namespace")?e.namespace.split("."):[],m=h=a=i=i||C;if(3!==i.nodeType&&8!==i.nodeType&&!Ct.test(u+S.event.triggered)&&(-1<u.indexOf(".")&&(u=(p=u.split(".")).shift(),p.sort()),o=u.indexOf(":")<0&&"on"+u,(e=e[S.expando]?e:new S.Event(u,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:S.makeArray(t,[e]),d=S.event.special[u]||{},s||!d.trigger||!1!==d.trigger.apply(i,t))){if(!s&&!d.noBubble&&!g(i)){for(r=d.delegateType||u,Ct.test(r+u)||(m=m.parentNode);m;m=m.parentNode)c.push(m),a=m;a===(i.ownerDocument||C)&&c.push(a.defaultView||a.parentWindow||w)}for(n=0;(m=c[n++])&&!e.isPropagationStopped();)h=m,e.type=1<n?r:d.bindType||u,(l=(Q.get(m,"events")||{})[e.type]&&Q.get(m,"handle"))&&l.apply(m,t),(l=o&&m[o])&&l.apply&&$(m)&&(e.result=l.apply(m,t),!1===e.result&&e.preventDefault());return e.type=u,s||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(c.pop(),t)||!$(i)||o&&b(i[u])&&!g(i)&&((a=i[o])&&(i[o]=null),S.event.triggered=u,e.isPropagationStopped()&&h.addEventListener(u,wt),i[u](),e.isPropagationStopped()&&h.removeEventListener(u,wt),S.event.triggered=void 0,a&&(i[o]=a)),e.result}},simulate:function(e,t,i){e=S.extend(new S.Event,i,{type:e,isSimulated:!0});S.event.trigger(e,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return S.event.trigger(e,t,i,!0)}}),v.focusin||S.each({focus:"focusin",blur:"focusout"},function(i,s){function n(e){S.event.simulate(s,e.target,S.event.fix(e))}S.event.special[s]={setup:function(){var e=this.ownerDocument||this,t=Q.access(e,s);t||e.addEventListener(i,n,!0),Q.access(e,s,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q.access(e,s)-1;t?Q.access(e,s,t):(e.removeEventListener(i,n,!0),Q.remove(e,s))}}});var St=w.location,Tt=Date.now(),Rt=/\?/;S.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+e),t};var kt=/\[\]$/,Ot=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;S.param=function(e,t){function i(e,t){t=b(t)?t():t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var s,n=[];if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(s in e)!function i(s,e,n,a){if(Array.isArray(e))S.each(e,function(e,t){n||kt.test(s)?a(s,t):i(s+"["+("object"==typeof t&&null!=t?e:"")+"]",t,n,a)});else if(n||"object"!==m(e))a(s,e);else for(var t in e)i(s+"["+t+"]",e[t],n,a)}(s,e[s],t,i);return n.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&It.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!le.test(e))}).map(function(e,t){var i=S(this).val();return null==i?null:Array.isArray(i)?S.map(i,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:i.replace(Ot,"\r\n")}}).get()}});var jt=/%20/g,Lt=/#.*$/,At=/([?&])_=[^&]*/,Et=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,Mt=/^\/\//,Ft={},Nt={},zt="*/".concat("*"),Vt=C.createElement("a");function Bt(a){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,s=0,n=e.toLowerCase().match(M)||[];if(b(t))for(;i=n[s++];)"+"===i[0]?(i=i.slice(1)||"*",(a[i]=a[i]||[]).unshift(t)):(a[i]=a[i]||[]).push(t)}}function Ht(t,s,n,a){var r={},o=t===Nt;function l(e){var i;return r[e]=!0,S.each(t[e]||[],function(e,t){t=t(s,n,a);return"string"!=typeof t||o||r[t]?o?!(i=t):void 0:(s.dataTypes.unshift(t),l(t),!1)}),i}return l(s.dataTypes[0])||!r["*"]&&l("*")}function Yt(e,t){var i,s,n=S.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((n[i]?e:s=s||{})[i]=t[i]);return s&&S.extend(!0,e,s),e}Vt.href=St.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,S.ajaxSettings),t):Yt(S.ajaxSettings,e)},ajaxPrefilter:Bt(Ft),ajaxTransport:Bt(Nt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var l,d,h,i,c,s,u,p,n,m=S.ajaxSetup({},t),g=m.context||m,f=m.context&&(g.nodeType||g.jquery)?S(g):S.event,_=S.Deferred(),v=S.Callbacks("once memory"),b=m.statusCode||{},a={},r={},o="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(u){if(!i)for(i={};t=Et.exec(h);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return u?h:null},setRequestHeader:function(e,t){return null==u&&(e=r[e.toLowerCase()]=r[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==u&&(m.mimeType=e),this},statusCode:function(e){if(e)if(u)x.always(e[x.status]);else for(var t in e)b[t]=[b[t],e[t]];return this},abort:function(e){e=e||o;return l&&l.abort(e),y(0,e),this}};if(_.promise(x),m.url=((e||m.url||St.href)+"").replace(Mt,St.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(M)||[""],null==m.crossDomain){s=C.createElement("a");try{s.href=m.url,s.href=s.href,m.crossDomain=Vt.protocol+"//"+Vt.host!=s.protocol+"//"+s.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=S.param(m.data,m.traditional)),Ht(Ft,m,t,x),u)return x;for(n in(p=S.event&&m.global)&&0==S.active++&&S.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Pt.test(m.type),d=m.url.replace(Lt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(jt,"+")):(e=m.url.slice(d.length),m.data&&(m.processData||"string"==typeof m.data)&&(d+=(Rt.test(d)?"&":"?")+m.data,delete m.data),!1===m.cache&&(d=d.replace(At,"$1"),e=(Rt.test(d)?"&":"?")+"_="+Tt+++e),m.url=d+e),m.ifModified&&(S.lastModified[d]&&x.setRequestHeader("If-Modified-Since",S.lastModified[d]),S.etag[d]&&x.setRequestHeader("If-None-Match",S.etag[d])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+zt+"; q=0.01":""):m.accepts["*"]),m.headers)x.setRequestHeader(n,m.headers[n]);if(m.beforeSend&&(!1===m.beforeSend.call(g,x,m)||u))return x.abort();if(o="abort",v.add(m.complete),x.done(m.success),x.fail(m.error),l=Ht(Nt,m,t,x)){if(x.readyState=1,p&&f.trigger("ajaxSend",[x,m]),u)return x;m.async&&0<m.timeout&&(c=w.setTimeout(function(){x.abort("timeout")},m.timeout));try{u=!1,l.send(a,y)}catch(e){if(u)throw e;y(-1,e)}}else y(-1,"No Transport");function y(e,t,i,s){var n,a,r,o=t;u||(u=!0,c&&w.clearTimeout(c),l=void 0,h=s||"",x.readyState=0<e?4:0,s=200<=e&&e<300||304===e,i&&(r=function(e,t,i){for(var s,n,a,r,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===s&&(s=e.mimeType||t.getResponseHeader("Content-Type"));if(s)for(n in o)if(o[n]&&o[n].test(s)){l.unshift(n);break}if(l[0]in i)a=l[0];else{for(n in i){if(!l[0]||e.converters[n+" "+l[0]]){a=n;break}r=r||n}a=a||r}if(a)return a!==l[0]&&l.unshift(a),i[a]}(m,x,i)),r=function(e,t,i,s){var n,a,r,o,l,d={},h=e.dataTypes.slice();if(h[1])for(r in e.converters)d[r.toLowerCase()]=e.converters[r];for(a=h.shift();a;)if(e.responseFields[a]&&(i[e.responseFields[a]]=t),!l&&s&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=h.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(r=d[l+" "+a]||d["* "+a]))for(n in d)if(o=n.split(" "),o[1]===a&&(r=d[l+" "+o[0]]||d["* "+o[0]])){!0===r?r=d[n]:!0!==d[n]&&(a=o[0],h.unshift(o[1]));break}if(!0!==r)if(r&&e.throws)t=r(t);else try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(m,r,x,s),s?(m.ifModified&&((i=x.getResponseHeader("Last-Modified"))&&(S.lastModified[d]=i),(i=x.getResponseHeader("etag"))&&(S.etag[d]=i)),204===e||"HEAD"===m.type?o="nocontent":304===e?o="notmodified":(o=r.state,n=r.data,s=!(a=r.error))):(a=o,!e&&o||(o="error",e<0&&(e=0))),x.status=e,x.statusText=(t||o)+"",s?_.resolveWith(g,[n,o,x]):_.rejectWith(g,[x,o,a]),x.statusCode(b),b=void 0,p&&f.trigger(s?"ajaxSuccess":"ajaxError",[x,m,s?n:a]),v.fireWith(g,[x,o]),p&&(f.trigger("ajaxComplete",[x,m]),--S.active||S.event.trigger("ajaxStop")))}return x},getJSON:function(e,t,i){return S.get(e,t,i,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,n){S[n]=function(e,t,i,s){return b(t)&&(s=s||i,i=t,t=void 0),S.ajax(S.extend({url:e,type:n,dataType:s,data:t,success:i},S.isPlainObject(e)&&e))}}),S._evalUrl=function(e){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},S.fn.extend({wrapAll:function(e){return this[0]&&(b(e)&&(e=e.call(this[0])),e=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return b(i)?this.each(function(e){S(this).wrapInner(i.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=b(t);return this.each(function(e){S(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Wt=S.ajaxSettings.xhr();v.cors=!!Wt&&"withCredentials"in Wt,v.ajax=Wt=!!Wt,S.ajaxTransport(function(n){var a,r;if(v.cors||Wt&&!n.crossDomain)return{send:function(e,t){var i,s=n.xhr();if(s.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(i in n.xhrFields)s[i]=n.xhrFields[i];for(i in n.mimeType&&s.overrideMimeType&&s.overrideMimeType(n.mimeType),n.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)s.setRequestHeader(i,e[i]);a=function(e){return function(){a&&(a=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?t(0,"error"):t(s.status,s.statusText):t(Ut[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=a(),r=s.onerror=s.ontimeout=a("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&w.setTimeout(function(){a&&r()})},a=a("abort");try{s.send(n.hasContent&&n.data||null)}catch(e){if(a)throw e}},abort:function(){a&&a()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(i){var s,n;if(i.crossDomain)return{send:function(e,t){s=S("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",n=function(e){s.remove(),n=null,e&&t("error"===e.type?404:200,e.type)}),C.head.appendChild(s[0])},abort:function(){n&&n()}}});var Xt=[],Gt=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||S.expando+"_"+Tt++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,i){var s,n,a,r=!1!==e.jsonp&&(Gt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(e.data)&&"data");if(r||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=b(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(Gt,"$1"+s):!1!==e.jsonp&&(e.url+=(Rt.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return a||S.error(s+" was not called"),a[0]},e.dataTypes[0]="json",n=w[s],w[s]=function(){a=arguments},i.always(function(){void 0===n?S(w).removeProp(s):w[s]=n,e[s]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(s)),a&&b(n)&&n(a[0]),a=n=void 0}),"script"}),v.createHTMLDocument=((t=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===t.childNodes.length),S.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(v.createHTMLDocument?((s=(t=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,t.head.appendChild(s)):t=C),s=!i&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=ge([e],t,s),s&&s.length&&S(s).remove(),S.merge([],i.childNodes)));var s},S.fn.load=function(e,t,i){var s,n,a,r=this,o=e.indexOf(" ");return-1<o&&(s=vt(e.slice(o)),e=e.slice(0,o)),b(t)?(i=t,t=void 0):t&&"object"==typeof t&&(n="POST"),0<r.length&&S.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done(function(e){a=arguments,r.html(s?S("<div>").append(S.parseHTML(e)).find(s):e)}).always(i&&function(e,t){r.each(function(){i.apply(this,a||[e.responseText,t,e])})}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,i){var s,n,a,r,o=S.css(e,"position"),l=S(e),d={};"static"===o&&(e.style.position="relative"),a=l.offset(),s=S.css(e,"top"),r=S.css(e,"left"),r=("absolute"===o||"fixed"===o)&&-1<(s+r).indexOf("auto")?(n=(o=l.position()).top,o.left):(n=parseFloat(s)||0,parseFloat(r)||0),b(t)&&(t=t.call(e,i,S.extend({},a))),null!=t.top&&(d.top=t.top-a.top+n),null!=t.left&&(d.left=t.left-a.left+r),"using"in t?t.using.call(e,d):l.css(d)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),i=i.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,s=this[0],n={top:0,left:0};if("fixed"===S.css(s,"position"))t=s.getBoundingClientRect();else{for(t=this.offset(),i=s.ownerDocument,e=s.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===S.css(e,"position");)e=e.parentNode;e&&e!==s&&1===e.nodeType&&((n=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),n.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-n.top-S.css(s,"marginTop",!0),left:t.left-n.left-S.css(s,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===S.css(e,"position");)e=e.offsetParent;return e||fe})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var a="pageYOffset"===n;S.fn[t]=function(e){return Y(this,function(e,t,i){var s;return g(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===i?s?s[n]:e[t]:void(s?s.scrollTo(a?s.pageXOffset:i,a?i:s.pageYOffset):e[t]=i)},t,e,arguments.length)}}),S.each(["top","left"],function(e,i){S.cssHooks[i]=Ge(v.pixelPosition,function(e,t){if(t)return t=Xe(e,i),Be.test(t)?S(e).position()[i]+"px":t})}),S.each({Height:"height",Width:"width"},function(r,o){S.each({padding:"inner"+r,content:o,"":"outer"+r},function(s,a){S.fn[a]=function(e,t){var i=arguments.length&&(s||"boolean"!=typeof e),n=s||(!0===e||!0===t?"margin":"border");return Y(this,function(e,t,i){var s;return g(e)?0===a.indexOf("outer")?e["inner"+r]:e.document.documentElement["client"+r]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+r],s["scroll"+r],e.body["offset"+r],s["offset"+r],s["client"+r])):void 0===i?S.css(e,t,n):S.style(e,t,i,n)},o,i?e:void 0,i)}})}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){S.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),S.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,s){return this.on(t,e,i,s)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),S.proxy=function(e,t){var i,s;if("string"==typeof t&&(s=e[t],t=e,e=s),b(e))return i=o.call(arguments,2),(s=function(){return e.apply(t||this,i.concat(o.call(arguments)))}).guid=e.guid=e.guid||S.guid++,s},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=O,S.isFunction=b,S.isWindow=g,S.camelCase=G,S.type=m,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var $t=w.jQuery,qt=w.$;return S.noConflict=function(e){return w.$===S&&(w.$=qt),e&&w.jQuery===S&&(w.jQuery=$t),S},e||(w.jQuery=w.$=S),S}),function(t,i){var e=i.jQuery;"object"==typeof exports?module.exports=e?t(i,e):function(e){if(e&&!e.fn)throw"Provide jQuery or null";return t(i,e)}:"function"==typeof define&&define.amd?define(function(){return t(i)}):t(i,!1)}(function(c,b){"use strict";var e=!1===b;b=b&&b.fn?b:c.jQuery;var t,n,H,u,x,y,V,d,B,p,F,Y,N,z,a,r,U,W,o,s,i,m,l="v1.0.2",g="_ocp",X=/[ \t]*(\r\n|\n|\r)/g,G=/\\(['"])/g,h=/['"\\]/g,$=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,q=/^if\s/,f=/<(\w+)[>\s]/,_=/[\x00`><\"'&=]/,Q=/^on[A-Z]|^convert(Back)?$/,K=/^\#\d+_`[\s\S]*\/\d+_`$/,v=/[\x00`><"'&=]/g,w=/[&<>]/g,C=/&(amp|gt|lt);/g,S=/\[['"]?|['"]?\]/g,T=0,R={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},k={amp:"&",gt:">",lt:"<"},Z="html",O="object",D="data-jsv-tmpl",I="jsvTmpl",j="For #index in nested block use #getIndex().",L={},A=c.jsrender,E=A&&b&&!b.render,P={template:{compile:function i(s,e,n,a){function t(e){var t;if(""+e===e||0<e.nodeType&&(r=e)){if(!r)if(/^\.\/[^\\:*?"<>]*$/.test(e))(t=d[s=s||e])?e=t:r=document.getElementById(e);else if(b.fn&&!Y.rTmpl.test(e))try{r=b(e,document)[0]}catch(e){}r&&("SCRIPT"!==r.tagName&&ye(e+": Use script block, not "+r.tagName),a?e=r.innerHTML:((t=r.getAttribute(D))&&(t!==I?(e=d[t],delete d[t]):b.fn&&(e=b.data(r)[I])),t&&e||(s=s||(b.fn?I:e),e=i(s,r.innerHTML,n,a)),e.tmplName=s=s||t,s!==I&&(d[s]=e),r.setAttribute(D,s),b.fn&&b.data(r,I,e))),r=void 0}else e.fn||(e=void 0);return e}var r,o,l=e=e||"";Y._html=B.html;0===a&&(a=void 0,l=t(l));a=a||(e.markup?e.bnds?ne({},e):e:{});a.tmplName=a.tmplName||s||"unnamed";n&&(a._parentTmpl=n);!l&&e.markup&&(l=t(e.markup))&&l.fn&&(l=l.markup);if(void 0!==l)return l.render||e.render?l.tmpls&&(o=l):(e=fe(l,a),Ce(l.replace(h,"\\$&"),e)),o||me(o=ne(function(){return o.render.apply(o,arguments)},e)),o}},tag:{compile:function(e,t,i){var s,n,a,r=new Y._tg;function o(){this._={unlinked:!0},this.inline=!0,this.tagName=e}y(t)?t={depends:t.depends,render:t}:""+t===t&&(t={template:t});if(n=t.baseTag)for(a in t.flow=!!t.flow,(n=""+n===n?i&&i.tags[n]||F[n]:n)||ye('baseTag: "'+t.baseTag+'" not found'),r=ne(r,n),t)r[a]=J(n[a],t[a]);else r=ne(r,t);void 0!==(s=r.template)&&(r.template=""+s===s?d[s]||d(s):s);(o.prototype=r).constructor=r._ctr=o,i&&(r._parentTmpl=i);return r}},viewModel:{compile:function(r,e){var s,t,d=this,h=e.getters,i=e.extend,u=e.id,n=b.extend({_is:r||"unnamed",unmap:v,merge:_},i),a="",o="",c=h?h.length:0,p=b.observable,m={};function l(e){t.apply(this,e)}function g(){return new l(arguments)}function f(e,t){for(var i,s,n,a,r,o,l=0;l<c;l++)i=void 0,(n=h[l])+""!==n&&(n=(i=n).getter),void 0===(a=e[n])&&i&&void 0!==(s=i.defaultVal)&&(o=e,a=y(r=s)?r.call(o):r),t(a,i&&d[i.type],n)}function _(e){e=e+""===e?JSON.parse(e):e;var t,i,s,n,a,r,o,l,d,h=0,c=this;if(V(c)){for(o={},d=[],i=e.length,s=c.length;h<i;h++){for(l=e[h],r=!1,t=0;t<s&&!r;t++)o[t]||(a=c[t],u&&(o[t]=r=u+""===u?l[u]&&(m[u]?a[u]():a[u])===l[u]:u(a,l)));r?(a.merge(l),d.push(a)):d.push(g.map(l))}p?p(c).refresh(d,!0):c.splice.apply(c,[0,c.length].concat(d))}else for(n in f(e,function(e,t,i){t?c[i]().merge(e):c[i](e)}),e)n===x||m[n]||(c[n]=e[n])}function v(){var e,t,i,s,n=0,a=this;if(V(a))return ge(a);for(e={};n<c;n++)i=void 0,(t=h[n])+""!==t&&(t=(i=t).getter),s=a[t](),e[t]=i&&s&&d[i.type]?V(s)?ge(s):s.unmap():s;for(t in a)"_is"===t||m[t]||t===x||"_"===t.charAt(0)&&m[t.slice(1)]||y(a[t])||(e[t]=a[t]);return e}for(l.prototype=n,s=0;s<c;s++)!function(t){t=t.getter||t,m[t]=s+1;var i="_"+t;a+=(a?",":"")+t,o+="this."+i+" = "+t+";\n",n[t]=n[t]||function(e){if(!arguments.length)return this[i];p?p(this).setProperty(t,e):this[i]=e},p&&(n[t].set=n[t].set||function(e){this[i]=e})}(h[s]);return((t=new Function(a,o.slice(0,-1))).prototype=n).constructor=t,g.map=function(e){e=e+""===e?JSON.parse(e):e;var t,i,s=0,n=e,a=[];if(V(e)){for(t=(e=e||[]).length;s<t;s++)a.push(this.map(e[s]));return a._is=r,a.unmap=v,a.merge=_,a}if(e)for(i in f(e,function(e,t){t&&(e=t.map(e)),a.push(e)}),n=this.apply(this,a),e)i===x||m[i]||(n[i]=e[i]);return n},g.getters=h,g.extend=i,g.id=u,g}},helper:{},converter:{}};function M(i,s){return function(){var e,t=this.base;return this.base=i,e=s.apply(this,arguments),this.base=t,e}}function J(e,t){return y(t)&&((t=M(e?e._d?e:M(ie,e):ie,t))._d=(e&&e._d||0)+1),t}function ee(e,t){var i,s=t.props;for(i in s)!Q.test(i)||e[i]&&e[i].fix||(e[i]="convert"!==i?J(e.constructor.prototype[i],s[i]):s[i])}function te(e){return e}function ie(){return""}function se(e){this.name=(b.link?"JsViews":"JsRender")+" Error",this.message=e||this.name}function ne(e,t){if(e){for(var i in t)e[i]=t[i];return e}}function ae(e,t,i){return e?V(e)?ae.apply(u,e):(s=i?i[0]:s,/^(\W|_){5}$/.test(e+t+s)||ye("Invalid delimiters"),r=e[0],U=e[1],W=t[0],o=t[1],N.delimiters=[r+U,W+o,s],e="\\"+r+"(\\"+s+")?\\"+U,t="\\"+W+"\\"+o,n="(?:(\\w+(?=[\\/\\s\\"+W+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+W+"]|\\"+W+"(?!\\"+o+"))*?)",Y.rTag="(?:"+n+")",n=new RegExp("(?:"+e+n+"(\\/)?|\\"+r+"(\\"+s+")?\\"+U+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+t,"g"),Y.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+e+".*"+t),a):N.delimiters}function re(){var e=this.get("item");return e?e.index:void 0}function oe(){return this.index}function le(e,t,i,s){var n,a,r,o=0;if(1===i&&(s=1,i=void 0),t)for(r=(a=t.split(".")).length;e&&o<r;o++)n=e,e=a[o]?e[a[o]]:e;return i&&(i.lt=i.lt||o<r),void 0===e?s?ie:"":s?function(){return e.apply(n,arguments)}:e}function de(e,t,i){var s,n,a,r,o,l=this,d=!m&&1<arguments.length,h=l.ctx;if(e){if(l._||(o=l.index,l=l.tag),r=l,h&&h.hasOwnProperty(e)||(h=p).hasOwnProperty(e)){if(n=h[e],"tag"===e||"tagCtx"===e||"root"===e||"parentTags"===e||l._.it===e)return n}else h=void 0;if((!m&&l.tagCtx||l.linked)&&(n&&n._cxp||(l=l.tagCtx||y(n)?l:!(l=l.scope||l).isTop&&l.ctx.tag||l,void 0!==n&&l.tagCtx&&(l=l.tagCtx.view.scope),h=l._ocps,(n=h&&h.hasOwnProperty(e)&&h[e]||n)&&n._cxp||!i&&!d||((h||(l._ocps=l._ocps||{}))[e]=n=[{_ocp:n,_vw:r,_key:e}],n._cxp={path:g,ind:0,updateValue:function(e,t){return b.observable(n[0]).setProperty(g,e),this}})),a=n&&n._cxp)){if(2<arguments.length)return(h=n[1]?Y._ceo(n[1].deps):[g]).unshift(n[0]),h._cxp=a,h;if(o=a.tagElse,o=n[1]?a.tag&&a.tag.cvtArgs?a.tag.cvtArgs(o,1)[a.ind]:n[1](n[0].data,n[0],Y):n[0]._ocp,d)return n&&o!==t&&Y._ucp(e,t,l,a),l;n=o}return n&&y(n)&&ne(s=function(){return n.apply(this&&this!==c?this:r,arguments)},n),s||n}}function he(e,t){var i,s,n,a,r,o,l,d=this;if(d.tagName){if(!(d=((o=d).tagCtxs||[d])[e||0]))return}else o=d.tag;if(r=o.bindFrom,a=d.args,(l=o.convert)&&""+l===l&&(l="true"===l?void 0:d.view.getRsc("converters",l)||ye("Unknown converter: '"+l+"'")),l&&!t&&(a=a.slice()),r){for(n=[],i=r.length;i--;)s=r[i],n.unshift(ce(d,s));t&&(a=n)}if(l){if(void 0===(l=l.apply(o,n||a)))return a;if(i=(r=r||[0]).length,V(l)&&l.length===i||(l=[l],r=[0],i=1),t)a=l;else for(;i--;)+(s=r[i])===s&&(a[s]=l[i])}return a}function ce(e,t){return(e=e[+t===t?"args":"props"])&&e[t]}function ue(e){return this.cvtArgs(e,1)}function pe(e,t,i,s,n,a,r,o){var l=this,d="array"===t;l.content=o,l.views=d?[]:{},l.data=s,l.tmpl=n,d=l._={key:0,useKey:d?0:1,id:""+T++,onRender:r,bnds:{}},l.linked=!!r,l.type=t||"top",(l.parent=i)?(l.root=i.root||l,r=i.views,t=i._,l.isTop=t.scp,l.scope=(!e.tag||e.tag===i.ctx.tag)&&!l.isTop&&i.scope||l,t.useKey?((r[d.key="_"+t.useKey++]=l).index=j,l.getIndex=re):r.length===(d.key=l.index=a)?r.push(l):r.splice(a,0,l),l.ctx=e||i.ctx):l.ctx=e||{}}function me(e){var t,i,s;for(t in P)e[i=t+"s"]&&(s=e[i],e[i]={},u[i](s,e))}function ge(e){for(var t=[],i=0,s=e.length;i<s;i++)t.push(e[i].unmap());return t}function fe(e,t){var i,s=z._wm||{},n={tmpls:[],links:{},bnds:[],_is:"template",render:be};return t&&(n=ne(n,t)),n.markup=e,n.htmlTag||(i=f.exec(e),n.htmlTag=i?i[1].toLowerCase():""),(i=s[n.htmlTag])&&i!==s.div&&(n.markup=b.trim(n.markup)),n}function _e(t){a[t]=function(e){return arguments.length?(N[t]=e,a):N[t]}}function ve(i){function s(e,t){this.tgt=i.getTgt(e,t),t.map=this}return y(i)&&(i={getTgt:i}),i.baseMap&&(i=ne(ne({},i.baseMap),i)),i.map=function(e,t){return new s(e,t)},i}function be(e,t,i,s,n,a){var r,o,l,d,h,c,u=s,p="";if(!0===t?(i=t,t=void 0):typeof t!==O&&(t=void 0),(l=this.tag)?(d=(u=u||this.view)._getTmpl(l.template||this.tmpl),arguments.length||(e=l.contentCtx&&y(l.contentCtx)?e=l.contentCtx(e):u)):d=this,d){if(!s&&e&&"view"===e._is&&(u=e),u&&e===u&&(e=u.data),s=!u,m=m||s,u||((t=t||{}).root=e),!m||z.useViews||d.useViews||u&&u!==H)p=xe(d,e,t,i,u,n,a,l);else{if(u?(h=u.data,c=u.index,u.index=j):(h=(u=H).data,u.data=e,u.ctx=t),V(e)&&!i)for(r=0,o=e.length;r<o;r++)u.index=r,u.data=e[r],p+=d.fn(e[r],u,Y);else u.data=e,p+=d.fn(e,u,Y);u.data=h,u.index=c}s&&(m=void 0)}return p}function xe(e,t,i,s,n,a,r,o){function l(e){(b=ne({},i))[v]=e}var d,h,c,u,p,m,g,f,_,v,b,x,y,w="";if(o&&(_=o.tagName,x=o.tagCtx,i=i?De(i,o.ctx):o.ctx,e===n.content?g=e!==n.ctx._wrp?n.ctx._wrp:void 0:e!==x.content?e===o.template?(g=x.tmpl,i._wrp=x.content):g=x.content||n.content:g=n.content,!1===x.props.link&&((i=i||{}).link=!1),(v=x.props.itemVar)&&("~"!==v[0]&&we("Use itemVar='~myItem'"),v=v.slice(1))),n&&(r=r||n._.onRender,(y=i&&!1===i.link)&&n._.nl&&(r=void 0),i=De(i,n.ctx)),!0===a&&(m=!0,a=0),r&&o&&o._.noVws&&(r=void 0),!0===(f=r)&&(f=void 0,r=n._.onRender),i=e.helpers?De(e.helpers,i):i,b=i,V(t)&&!s)for((c=m?n:void 0!==a&&n||new pe(i,"array",n,t,e,a,r,g))._.nl=y,n&&n._.useKey&&(c._.bnd=!o||o._.bnd&&o,c.tag=o),d=0,h=t.length;d<h;d++)v&&l(t[d]),(u=new pe(b,"item",c,t[d],e,(a||0)+d,r,c.content))._.it=v,p=e.fn(t[d],u,Y),w+=c._.onRender?c._.onRender(p,u):p;else v&&l(t),(c=m?n:new pe(b,_||"data",n,t,e,a,r,g))._.it=v,c.tag=o,c._.nl=y,w+=e.fn(t,c,Y);return o&&(c.tagElse=x.index,x.contentView=c),f?f(w,c):w}function ye(e){throw new Y.Err(e)}function we(e){ye("Syntax error\n"+e)}function Ce(C,S,T,R,k){function O(e){(e-=A)&&P.push(C.substr(A,e).replace(X,"\\n"))}function D(e,t){e&&(e+="}}",we((t?"{{"+t+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+C))}var e,t,I,j,i,L=N.allowCode||S&&S.allowCode||!0===a.allowCode,s=[],A=0,E=[],P=s,M=[,,s];if(L&&S._is&&(S.allowCode=L),T&&(void 0!==R&&(C=C.slice(0,-R.length-2)+W),C=r+C+o),D(E[0]&&E[0][2].pop()[0]),C.replace(n,function(e,t,i,s,n,a,r,o,l,d,h,c){(r&&t||l&&!i||o&&":"===o.slice(-1)||d)&&we(e),a&&(n=":",s=Z);var u,p,m,t=(t||T)&&[[]],g="",f="",_="",v="",b="",x="",y="",w="",l=!(l=l||T&&!k)&&!n;i=i||(o=o||"#data",n),O(c),A=c+e.length,r?L&&P.push(["*","\n"+o.replace(/^:/,"ret+= ").replace(G,"$1")+";\n"]):i?("else"===i&&(q.test(o)&&we('For "{{else if expr}}" use "{{else expr}}"'),t=M[9]&&[[]],M[10]=C.substring(M[10],c),p=M[11]||M[0]||we("Mismatched: "+e),M=E.pop(),P=M[2],l=!0),o&&ke(o.replace(X," "),t,S,T).replace($,function(e,t,i,s,n,a,r,o){return"this:"===s&&(a="undefined"),o&&(m=m||"@"===o[0]),s="'"+n+"':",r?(f+=i+a+",",v+="'"+o+"',"):i?(_+=s+"j._cp("+a+',"'+o+'",view),',x+=s+"'"+o+"',"):t?y+=a:("trigger"===n&&(w+=a),"lateRender"===n&&(u="false"!==o),g+=s+a+",",b+=s+"'"+o+"',",j=j||Q.test(n)),""}).slice(0,-1),t&&t[0]&&t.pop(),I=[i,s||!!R||j||"",l&&[],Te(v||(":"===i?"'#data',":""),b,x),Te(f||(":"===i?"data,":""),g,_),y,w,u,m,t||0],P.push(I),l&&(E.push(M),(M=I)[10]=A,M[11]=p)):h&&(D(h!==M[0]&&h!==M[11]&&h,M[0]),M[10]=C.substring(M[10],c),M=E.pop()),D(!M&&h),P=M[2]}),O(C.length),(A=s[s.length-1])&&D(""+A!==A&&+A[10]===A[10]&&A[0]),T){for(t=Oe(s,C,T),i=[],e=s.length;e--;)i.unshift(s[e][9]);Se(t,i)}else t=Oe(s,S);return t}function Se(e,t){var i,s,n=0,a=t.length;for(e.deps=[],e.paths=[];n<a;n++)for(i in e.paths.push(s=t[n]),s)"_jsvto"!==i&&s.hasOwnProperty(i)&&s[i].length&&!s[i].skp&&(e.deps=e.deps.concat(s[i]))}function Te(e,t,i){return[e.slice(0,-1),t.slice(0,-1),i.slice(0,-1)]}function Re(e,t){return"\n\t"+(t?t+":{":"")+"args:["+e[0]+"],\n\tprops:{"+e[1]+"}"+(e[2]?",\n\tctx:{"+e[2]+"}":"")}function ke(R,k,O,D){var I,j,L,A,e,E=k&&k[0],P={bd:E},M={0:P},F=0,N=(O?O.links:E&&(E.links=E.links||{}))||H.tmpl.links,z=0,V={},B={};return"@"===R[0]&&(R=R.replace(S,".")),e=(R+(O?" ":"")).replace(Y.rPrm,function(e,t,i,s,d,n,a,r,o,h,c,l,u,p,m,g,f,_,v,b,x){s&&!r&&(d=s+d),n=n||"",i=i||t||u,d=d||o,(h=h&&!/\)|]/.test(x[b-1]))&&(d=d.slice(1).split(".").join("^"));var y,w,C,S,T,o=")";if("["===(c=c||_||"")&&(c="[j._sq(",o=")]"),!a||A||L){if(E&&f&&!A&&!L&&z&&(y=B[z-1],x.length-1>b-(y||0))){if(y=x.slice(y,b+e.length),!0!==w)if(C=j||M[z-1].bd,(S=C[C.length-1])&&S.prm){for(;S.sb&&S.sb.prm;)S=S.sb;T=S.sb={path:S.sb,bnd:S.bnd}}else C.push(T={path:C.pop()});(w=N[f=U+":"+y+" onerror=''"+W])||(N[f]=!0,N[f]=w=Ce(f,O,!0)),!0!==w&&T&&(T._cpfn=w,T.prm=P.bd,T.bnd=T.bnd||T.path&&0<=T.path.indexOf("^"))}return A?(A=!p)?e:u+'"':L?(L=!m)?e:u+'"':(i?(B[z]=b++,P=M[++z]={bd:[]},i):"")+(v?z?"":(F=x.slice(F,b),(I?(I=j=!1,"\b"):"\b,")+F+(F=b+e.length,E&&k.push(P.bd=[]),"\b")):r?(z&&we(R),E&&k.pop(),I="_"+d,F=b+e.length,E&&((E=P.bd=k[I]=[]).skp=!s),d+":"):d?d.split("^").join(".").replace(Y.rPath,function(e,t,i,s,n,a,r,o){var l="."===i;if(i&&(d=d.slice(t.length),/^\.?constructor$/.test(o||d)&&we(e),l||(e=(h?(D?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(s?'view.ctxPrm("'+s+'")':n?"view":"data")+(h?")===undefined"+(D?"":")")+'?"":view._getOb(ob,"':"")+(o?(a?"."+a:s||n?"":"."+i)+(r||""):(o=s?"":n?a||"":i,"")),e=t+("view.data"===(e+=o?"."+o:"").slice(0,9)?e.slice(5):e)+(h?(D?'"':'",ltOb')+(c?",1)":")"):"")),E)){if(C="_linkTo"===I?j=k._jsvto=k._jsvto||[]:P.bd,S=l&&C[C.length-1]){if(S._cpfn){for(;S.sb;)S=S.sb;S.bnd&&(d="^"+d.slice(1)),S.sb=d,S.bnd=S.bnd||"^"===d[0]}}else C.push(d);B[z]=b+(l?1:0)}return e})+(c?(P=M[++z]={bd:[]},V[z]=o,c):n):n||(g?(g=V[z]||g,V[z]=!1,P=M[--z],g+(c?(P=M[++z],V[z]=o,c):"")):l?(V[z]||we(R),","):t?"":(A=p,L=m,'"')))}we(R)}),!z&&e||we(R)}function Oe(e,t,i){var s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L=0,A=z.useViews||t.useViews||t.tags||t.templates||t.helpers||t.converters,E="",P={},M=e.length;for(""+t===t?(_=i?'data-link="'+t.replace(X," ").slice(1,-1)+'"':t,t=0):(_=t.tmplName||"unnamed",t.allowCode&&(P.allowCode=!0),t.debug&&(P.debug=!0),u=t.bnds,f=t.tmpls),s=0;s<M;s++)if(""+(n=e[s])===n)E+='\n+"'+n+'"';else if("*"===(a=n[0]))E+=";\n"+n[1]+"\nret=ret";else{if(r=n[1],x=!i&&n[2],o=Re(n[3],"params")+"},"+Re(m=n[4]),O=n[6],D=n[7],j=n[8]?(I="\nvar ob,ltOb={},ctxs=",";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(I="\nreturn ",""),k=n[10]&&n[10].replace(G,"$1"),(C="else"===a)?p&&p.push(n[9]):(R=n[5]||!1!==N.debugMode&&"undefined",u&&(p=n[9])&&(p=[p],L=u.push(1))),A=A||m[1]||m[2]||p||/view.(?!index)/.test(m[0]),(S=":"===a)?r&&(a=r===Z?">":r+a):(x&&((v=fe(k,P)).tmplName=_+"/"+a,v.useViews=v.useViews||A,Oe(x,v),A=v.useViews,f.push(v)),C||(b=a,A=A||a&&(!F[a]||!F[a].flow),w=E,E=""),y=(y=e[s+1])&&"else"===y[0]),k=R?";\ntry{\nret+=":"\n+",C=v="",S&&(p||O||r&&r!==Z||D)){if((T=new Function("data,view,j,u","// "+_+" "+ ++L+" "+a+I+"{"+o+"};"+j))._er=R,T._tag=a,T._bd=!!p,T._lr=D,i)return T;Se(T,p),c=!0,v=(g='c("'+r+'",view,')+L+",",C=")"}if(E+=S?(i?(R?"try{\n":"")+"return ":k)+(c?(A=h=!(c=void 0),g+(T?(u[L-1]=T,L):"{"+o+"}")+")"):">"===a?(d=!0,"h("+m[0]+")"):"((v="+m[0]+")!=null?v:"+(i?"null)":'"")')):(l=!0,"\n{view:view,content:false,tmpl:"+(x?f.length:"false")+","+o+"},"),b&&!y){if(E="["+E.slice(0,-1)+"]",g='t("'+b+'",view,this,',i||p){if((E=new Function("data,view,j,u"," // "+_+" "+L+" "+b+I+E+j))._er=R,E._tag=b,p&&Se(u[L-1]=E,p),E._lr=D,i)return E;v=g+L+",undefined,",C=")"}E=w+k+g+(p&&L||E)+")",b=p=0}R&&!y&&(A=!0,E+=";\n}catch(e){ret"+(i?"urn ":"+=")+v+"j._err(e,view,"+R+")"+C+";}"+(i?"":"ret=ret"))}E="// "+_+(P.debug?"\ndebugger;":"")+"\nvar v"+(l?",t=j._tag":"")+(h?",c=j._cnvt":"")+(d?",h=j._html":"")+(i?(n[8]?", ob":"")+";\n":',ret=""')+E+(i?"\n":";\nreturn ret;");try{E=new Function("data,view,j,u",E)}catch(e){we("Compiled template code:\n\n"+E+'\n: "'+(e.message||e)+'"')}return t&&(t.fn=E,t.useViews=!!A),E}function De(e,t){return e&&e!==t?t?ne(ne({},t),e):e:t&&ne({},t)}function Ie(t,e){var i,s,n,a=e.tag,r=e.props,o=e.params.props,l=r.filter,d=r.sort,h=!0===d,c=parseInt(r.step),u=r.reverse?-1:1;if(!V(t))return t;if(h||d&&""+d===d?((i=t.map(function(e,t){return{i:t,v:""+(e=h?e:le(e,d))===e?e.toLowerCase():e}})).sort(function(e,t){return e.v>t.v?u:e.v<t.v?-u:0}),t=i.map(function(e){return t[e.i]})):(d||u<0)&&!a.dataMap&&(t=t.slice()),y(d)&&(t=t.sort(function(){return d.apply(e,arguments)})),u<0&&(!d||y(d))&&(t=t.reverse()),t.filter&&l&&(t=t.filter(l,e),e.tag.onFilter&&e.tag.onFilter(e)),o.sorted&&(i=d||u<0?t:t.slice(),a.sorted?b.observable(a.sorted).refresh(i):e.map.sorted=i),s=r.start,n=r.end,(o.start&&void 0===s||o.end&&void 0===n)&&(s=n=0),isNaN(s)&&isNaN(n)||(s=+s||0,n=void 0===n||n>t.length?t.length:+n,t=t.slice(s,n)),1<c){for(s=0,n=t.length,i=[];s<n;s+=c)i.push(t[s]);t=i}return o.paged&&a.paged&&$observable(a.paged).refresh(t),t}function je(e,t,i){var s=this.jquery&&(this[0]||ye("Unknown template")),n=s.getAttribute(D);return be.call(n&&b.data(s)[I]||d(s),e,t,i)}function Le(e){return R[e]||(R[e]="&#"+e.charCodeAt(0)+";")}function Ae(e,t){return k[t]||""}function Ee(e){return null!=e?_.test(e)&&(""+e).replace(v,Le)||e:""}if(u={jsviews:l,sub:{rPath:/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,rPrm:/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,View:pe,Err:se,tmplFn:Ce,parse:ke,extend:ne,extendCtx:De,syntaxErr:we,onStore:{template:function(e,t){null===t?delete L[e]:e&&(L[e]=t)}},addSetting:_e,settings:{allowCode:!1},advSet:ie,_thp:ee,_gm:J,_tg:function(){},_cnvt:function(e,t,i,s){var n,a,r,o,l,d="number"==typeof i&&t.tmpl.bnds[i-1];void 0===s&&d&&d._lr&&(s="");void 0!==s?i=s={props:{},args:[s]}:d&&(i=d(t.data,t,Y));if(d=d._bd&&d,e||d){if(a=t._lc,n=a&&a.tag,i.view=t,!n){if(n=ne(new Y._tg,{_:{bnd:d,unlinked:!0,lt:i.lt},inline:!a,tagName:":",convert:e,flow:!0,tagCtx:i,tagCtxs:[i],_is:"tag"}),1<(o=i.args.length))for(l=n.bindTo=[];o--;)l.unshift(o);a&&((a.tag=n).linkCtx=a),i.ctx=De(i.ctx,(a?a.view:t).ctx),ee(n,i)}n._er=s&&r,n.ctx=i.ctx||n.ctx||{},i.ctx=void 0,r=n.cvtArgs()[0],n._er=s&&r}else r=i.args[0];return null!=(r=d&&t._.onRender?t._.onRender(r,t,n):r)?r:""},_tag:function(e,t,i,s,n,a){function r(e){var t=o[e];if(void 0!==t)for(t=V(t)?t:[t],u=t.length;u--;)D=t[u],isNaN(parseInt(D))||(t[u]=parseInt(D));return t||[0]}var o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L,A,E=0,P="",M=(t=t||H)._lc||!1,F=t.ctx,N=i||t.tmpl,z="number"==typeof s&&t.tmpl.bnds[s-1];"tag"===e._is?(e=(o=e).tagName,s=o.tagCtxs,o.template):(l=t.getRsc("tags",e)||ye("Unknown tag: {{"+e+"}} "),l.template);void 0===a&&z&&(z._lr=l.lateRender&&!1!==z._lr||z._lr)&&(a="");void 0!==a?(P+=a,s=a=[{props:{},args:[],params:{props:{}}}]):z&&(s=z(t.data,t,Y));for(c=s.length;E<c;E++)g=s[E],y=g.tmpl,(!M||!M.tag||E&&!M.tag.inline||o._er||y&&+y===y)&&(y&&N.tmpls&&(g.tmpl=g.content=N.tmpls[y-1]),g.index=E,g.ctxPrm=de,g.render=be,g.cvtArgs=he,g.bndArgs=ue,g.view=t,g.ctx=De(De(g.ctx,l&&l.ctx),F)),(i=g.props.tmpl)&&(g.tmpl=t._getTmpl(i),g.content=g.content||g.tmpl),o?M&&M.fn._lr&&(w=!!o.init):(o=new l._ctr,w=!!o.init,o.parent=h=F&&F.tag,o.tagCtxs=s,M&&(o.inline=!1,M.tag=o),o.linkCtx=M,(o._.bnd=z||M.fn)?(o._.ths=g.params.props.this,o._.lt=s.lt,o._.arrVws={}):o.dataBoundOnly&&ye(e+" must be data-bound:\n{^{"+e+"}}")),k=o.dataMap,g.tag=o,k&&s&&(g.map=s[E].map),o.flow||(f=g.ctx=g.ctx||{},y=o.parents=f.parentTags=F&&De(f.parentTags,F.parentTags)||{},h&&(y[h.tagName]=h),y[o.tagName]=f.tag=o,f.tagCtx=g);if(!(o._er=a)){for(ee(o,s[0]),o.rendering={rndr:o.rendering},E=0;E<c;E++){if(g=o.tagCtx=s[E],R=g.props,o.ctx=g.ctx,!E){if(w&&(o.init(g,M,o.ctx),w=void 0),g.args.length||!1===g.argDefault||!1===o.argDefault||(g.args=S=[g.view.data],g.params.args=["#data"]),v=r("bindTo"),void 0!==o.bindTo&&(o.bindTo=v),void 0!==o.bindFrom?o.bindFrom=r("bindFrom"):o.bindTo&&(o.bindFrom=o.bindTo=v),b=o.bindFrom||v,j=v.length,I=b.length,o._.bnd&&(L=o.linkedElement)&&(o.linkedElement=L=V(L)?L:[L],j!==L.length&&ye("linkedElement not same length as bindTo")),(L=o.linkedCtxParam)&&(o.linkedCtxParam=L=V(L)?L:[L],I!==L.length&&ye("linkedCtxParam not same length as bindFrom/bindTo")),b)for(o._.fromIndex={},o._.toIndex={},p=I;p--;)for(D=b[p],u=j;u--;)D===v[u]&&(o._.fromIndex[u]=p,o._.toIndex[p]=u);M&&(M.attr=o.attr=M.attr||o.attr||M._dfAt),d=o.attr,o._.noVws=d&&d!==Z}if(S=o.cvtArgs(E),o.linkedCtxParam)for(T=o.cvtArgs(E,1),u=I,A=o.constructor.prototype.ctx;u--;)(_=o.linkedCtxParam[u])&&(D=b[u],x=T[u],g.ctx[_]=Y._cp(A&&void 0===x?A[_]:x,void 0!==x&&ce(g.params,D),g.view,o._.bnd&&{tag:o,cvt:o.convert,ind:u,tagElse:E}));(C=R.dataMap||k)&&(S.length||R.dataMap)&&((O=g.map)&&O.src===S[0]&&!n||(O&&O.src&&O.unmap(),C.map(S[0],g,O,!o._.bnd),O=g.map),S=[O.tgt]),m=void 0,o.render&&(m=o.render.apply(o,S),t.linked&&m&&!K.test(m)&&((i={links:[]}).render=i.fn=function(){return m},m=xe(i,t.data,void 0,!0,t,void 0,void 0,o))),S.length||(S=[t]),void 0===m&&(O=S[0],o.contentCtx&&(O=!0===o.contentCtx?t:o.contentCtx(O)),m=g.render(O,!0)||(n?void 0:"")),P=P?P+(m||""):void 0!==m?""+m:void 0}o.rendering=o.rendering.rndr}o.tagCtx=s[0],o.ctx=o.tagCtx.ctx,o._.noVws&&o.inline&&(P="text"===d?B.html(P):"");return z&&t._.onRender?t._.onRender(P,t,o):P},_er:ye,_err:function(e,t,i){var s=void 0!==i?y(i)?i.call(t.data,e,t):i||"":"{Error: "+(e.message||e)+"}";N.onError&&void 0!==(i=N.onError.call(t.data,e,i&&s,t))&&(s=i);return t&&!t._lc?B.html(s):s},_cp:te,_sq:function(e){return"constructor"===e&&we(""),e}},settings:{delimiters:ae,advanced:function(e){return e?(ne(z,e),Y.advSet(),a):z}},map:ve},(se.prototype=new Error).constructor=se,re.depends=function(){return[this.get("item"),"index"]},oe.depends="index",pe.prototype={get:function(e,t){t||!0===e||(t=e,e=void 0);var i,s,n,a,r=this,o="root"===t;if(e){if(!(a=t&&r.type===t&&r))if(i=r.views,r._.useKey){for(s in i)if(a=t?i[s].get(e,t):i[s])break}else for(s=0,n=i.length;!a&&s<n;s++)a=t?i[s].get(e,t):i[s]}else if(o)a=r.root;else if(t)for(;r&&!a;)a=r.type===t?r:void 0,r=r.parent;else a=r.parent;return a||void 0},getIndex:oe,ctxPrm:de,getRsc:function(e,t){var i,s,n=this;if(""+t===t){for(;void 0===i&&n;)i=(s=n.tmpl&&n.tmpl[e])&&s[t],n=n.parent;return i||u[e][t]}},_getTmpl:function(e){return e&&(e.fn?e:this.getRsc("templates",e)||d(e))},_getOb:le,_is:"view"},Y=u.sub,a=u.settings,!(A||b&&b.render)){for(t in P)!function(l,d){var h=l+"s";u[h]=function e(t,i,s){var n,a,r,o=Y.onStore[l];if(!t||typeof t!==O||t.nodeType||t.markup||t.getTgt||"viewModel"===l&&t.getters||t.extend)return t&&""+t!==t&&(s=i,i=t,t=void 0),r=s?"viewModel"===l?s:s[h]=s[h]||{}:e,n=d.compile,void 0===i&&(i=n?t:r[t],t=void 0),null===i?t&&delete r[t]:(n&&((i=n.call(r,t,i,s,0)||{})._is=l),t&&(r[t]=i)),o&&o(t,i,s,n),i;for(a in t)e(a,t[a],i);return i||u}}(t,P[t]);if(B=u.converters,p=u.helpers,F=u.tags,Y._tg.prototype={baseApply:function(e){return this.base.apply(this,e)},cvtArgs:he,bndArgs:ue,ctxPrm:de},H=Y.topView=new pe,b){if(b.fn.render=je,x=b.expando,b.observable){if(l!==(l=b.views.jsviews))throw"JsObservable requires JsRender "+l;ne(Y,b.views.sub),u.map=b.views.map}}else b={},e&&(c.jsrender=b),b.renderFile=b.__express=b.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},b.isFunction=function(e){return"function"==typeof e},b.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},Y._jq=function(e){e!==b&&(ne(e,b),(b=e).fn.render=je,delete b.jsrender,x=b.expando)},b.jsrender=l;for(i in(N=Y.settings).allowCode=!1,y=b.isFunction,b.render=L,b.views=u,b.templates=d=u.templates,N)_e(i);(a.debugMode=function(e){return void 0===e?N.debugMode:(N.debugMode=e,N.onError=e+""===e?function(){return e}:y(e)?e:void 0,a)})(!1),z=N.advanced={useViews:!1,_jsv:!1},F({if:{render:function(e){var t=this.tagCtx;return this.rendering.done||!e&&(t.args.length||!t.index)?"":(this.rendering.done=!0,void(this.selected=t.index))},contentCtx:!0,flow:!0},for:{sortDataMap:ve(Ie),init:function(e,t){for(var i,s,n=this.tagCtxs,a=n.length;a--;)s=(i=n[a]).params.props,i.argDefault=void 0===i.props.end||0<i.args.length,!1!==i.argDefault&&V(i.args[0])&&(void 0!==s.sort||s.start||s.end||s.step||s.filter||s.reverse)&&(i.props.dataMap=this.sortDataMap)},render:function(e){var t,i,s,n,a=this.tagCtx,r=!1===a.argDefault,o=a.props,l=r||a.args.length,d="",h=0;if(!this.rendering.done){if(t=l?e:a.view.data,r)for(r=o.reverse?"unshift":"push",s=+o.end,n=+o.step||1,t=[],i=+o.start||0;0<(s-i)*n;i+=n)t[r](i);void 0!==t&&(e=V(t),d+=a.render(t,!l||o.noIteration),h+=e?t.length:1),(this.rendering.done=h)&&(this.selected=a.index)}return d},flow:!0},props:{baseTag:"for",dataMap:ve(function(e,t){var i,s,n=t.map,a=n&&n.propsArr;if(!a){if(a=[],typeof e===O||y(e))for(i in e)s=e[i],i===x||!e.hasOwnProperty(i)||t.props.noFunctions&&b.isFunction(s)||a.push({key:i,prop:s});n&&(n.propsArr=n.options&&a)}return Ie(a,t)}),init:ie,flow:!0},include:{flow:!0},"*":{render:te,flow:!0},":*":{render:te,flow:!0},dbg:p.dbg=B.dbg=function(e){try{throw console.log("JsRender dbg breakpoint: "+e),"dbg breakpoint"}catch(e){}return this.base?this.baseApply(arguments):e}}),B({html:Ee,attr:Ee,encode:function(e){return""+e===e?e.replace(w,Le):e},unencode:function(e){return""+e===e?e.replace(C,Ae):e},url:function(e){return null!=e?encodeURI(""+e):null===e?e:""}})}return N=Y.settings,V=(b||A).isArray,a.delimiters("{{","}}","^"),E&&A.views.sub._jq(b),b||A},window),function(e){"use strict";var t,n=20,a=1,r=-7,o=21,l="[big.js] ",d=l+"Invalid ",b=d+"decimal places",h=d+"rounding mode",x=l+"Division by zero",c={},y=void 0,u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function w(e,t,i,s){var n=e.c,a=e.e+t+1;if(a<n.length){if(1===i)s=5<=n[a];else if(2===i)s=5<n[a]||5==n[a]&&(s||a<0||n[a+1]!==y||1&n[a-1]);else if(3===i)s=s||!!n[0];else if(s=!1,0!==i)throw Error(h);if(a<1)n.length=1,s?(e.e=-t,n[0]=1):n[0]=e.e=0;else{if(n.length=a--,s)for(;9<++n[a];)n[a]=0,a--||(++e.e,n.unshift(1));for(a=n.length;!n[--a];)n.pop()}}else if(i<0||3<i||i!==~~i)throw Error(h);return e}function i(e,t,i,s){var n,a,r=e.constructor,o=!e.c[0];if(i!==y){if(i!==~~i||i<(3==t)||1e6<i)throw Error(3==t?d+"precision":b);for(i=s-(e=new r(e)).e,e.c.length>++s&&w(e,i,r.RM),2==t&&(s=e.e+i+1);e.c.length<s;)e.c.push(0)}if(n=e.e,i=(a=e.c.join("")).length,2!=t&&(1==t||3==t&&s<=n||n<=r.NE||n>=r.PE))a=a.charAt(0)+(1<i?"."+a.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)a="0"+a;a="0."+a}else if(0<n)if(++n>i)for(n-=i;n--;)a+="0";else n<i&&(a=a.slice(0,n)+"."+a.slice(n));else 1<i&&(a=a.charAt(0)+"."+a.slice(1));return e.s<0&&(!o||4==t)?"-"+a:a}c.abs=function(){var e=new this.constructor(this);return e.s=1,e},c.cmp=function(e){var t,i=this.c,s=(e=new this.constructor(e)).c,n=this.s,a=e.s,r=this.e,e=e.e;if(!i[0]||!s[0])return i[0]?n:s[0]?-a:0;if(n!=a)return n;if(t=n<0,r!=e)return e<r^t?1:-1;for(a=(r=i.length)<(e=s.length)?r:e,n=-1;++n<a;)if(i[n]!=s[n])return i[n]>s[n]^t?1:-1;return r==e?0:e<r^t?1:-1},c.div=function(e){var t=this.constructor,i=this.c,s=(e=new t(e)).c,n=this.s==e.s?1:-1,a=t.DP;if(a!==~~a||a<0||1e6<a)throw Error(b);if(!s[0])throw Error(x);if(!i[0])return new t(0*n);var r,o,l,d,h,c=s.slice(),u=r=s.length,p=i.length,m=i.slice(0,r),g=m.length,f=e,_=f.c=[],v=0,e=a+(f.e=this.e-e.e)+1;for(f.s=n,n=e<0?0:e,c.unshift(0);g++<r;)m.push(0);do{for(l=0;l<10;l++){if(r!=(g=m.length))d=g<r?1:-1;else for(h=-1,d=0;++h<r;)if(s[h]!=m[h]){d=s[h]>m[h]?1:-1;break}if(!(d<0))break;for(o=g==r?s:c;g;){if(m[--g]<o[g]){for(h=g;h&&!m[--h];)m[h]=9;--m[h],m[g]+=10}m[g]-=o[g]}for(;!m[0];)m.shift()}}while(_[v++]=d?l:++l,m[0]&&d?m[g]=i[u]||0:m=[i[u]],(u++<p||m[0]!==y)&&n--);return _[0]||1==v||(_.shift(),f.e--),e<v&&w(f,a,t.RM,m[0]!==y),f},c.eq=function(e){return!this.cmp(e)},c.gt=function(e){return 0<this.cmp(e)},c.gte=function(e){return-1<this.cmp(e)},c.lt=function(e){return this.cmp(e)<0},c.lte=function(e){return this.cmp(e)<1},c.minus=c.sub=function(e){var t,i,s,n,a=this,r=a.constructor,o=a.s,l=(e=new r(e)).s;if(o!=l)return e.s=-l,a.plus(e);var d=a.c.slice(),h=a.e,c=e.c,u=e.e;if(!d[0]||!c[0])return c[0]?(e.s=-l,e):new r(d[0]?a:0);if(o=h-u){for((s=(n=o<0)?(o=-o,d):(u=h,c)).reverse(),l=o;l--;)s.push(0);s.reverse()}else for(i=((n=d.length<c.length)?d:c).length,o=l=0;l<i;l++)if(d[l]!=c[l]){n=d[l]<c[l];break}if(n&&(s=d,d=c,c=s,e.s=-e.s),0<(l=(i=c.length)-(t=d.length)))for(;l--;)d[t++]=0;for(l=t;o<i;){if(d[--i]<c[i]){for(t=i;t&&!d[--t];)d[t]=9;--d[t],d[i]+=10}d[i]-=c[i]}for(;0===d[--l];)d.pop();for(;0===d[0];)d.shift(),--u;return d[0]||(e.s=1,d=[u=0]),e.c=d,e.e=u,e},c.mod=function(e){var t,i=this,s=i.constructor,n=i.s,a=(e=new s(e)).s;if(!e.c[0])throw Error(x);return t=(i.s=e.s=1)==e.cmp(i),i.s=n,e.s=a,t?new s(i):(n=s.DP,a=s.RM,s.DP=s.RM=0,i=i.div(e),s.DP=n,s.RM=a,this.minus(i.times(e)))},c.plus=c.add=function(e){var t,i=this,s=i.constructor,n=i.s,a=(e=new s(e)).s;if(n!=a)return e.s=-a,i.minus(e);var r=i.e,o=i.c,l=e.e,d=e.c;if(!o[0]||!d[0])return d[0]?e:new s(o[0]?i:0*n);if(o=o.slice(),n=r-l){for((t=0<n?(l=r,d):(n=-n,o)).reverse();n--;)t.push(0);t.reverse()}for(o.length-d.length<0&&(t=d,d=o,o=t),n=d.length,a=0;n;o[n]%=10)a=(o[--n]=o[n]+d[n]+a)/10|0;for(a&&(o.unshift(a),++l),n=o.length;0===o[--n];)o.pop();return e.c=o,e.e=l,e},c.pow=function(e){var t=this,i=new t.constructor(1),s=i,n=e<0;if(e!==~~e||e<-1e6||1e6<e)throw Error(d+"exponent");for(n&&(e=-e);1&e&&(s=s.times(t)),e>>=1;)t=t.times(t);return n?i.div(s):s},c.round=function(e,t){var i=this.constructor;if(e===y)e=0;else if(e!==~~e||e<-1e6||1e6<e)throw Error(b);return w(new i(this),e,t===y?i.RM:t)},c.sqrt=function(){var e,t,i,s=this,n=s.constructor,a=s.s,r=s.e,o=new n(.5);if(!s.c[0])return new n(s);if(a<0)throw Error(l+"No square root");for(a=Math.sqrt(s+""),e=0===a||a===1/0?((t=s.c.join("")).length+r&1||(t+="0"),r=((r+1)/2|0)-(r<0||1&r),new n(((a=Math.sqrt(t))==1/0?"1e":(a=a.toExponential()).slice(0,a.indexOf("e")+1))+r)):new n(a),r=e.e+(n.DP+=4);i=e,e=o.times(i.plus(s.div(i))),i.c.slice(0,r).join("")!==e.c.slice(0,r).join(""););return w(e,n.DP-=4,n.RM)},c.times=c.mul=function(e){var t,i=this.constructor,s=this.c,n=(e=new i(e)).c,a=s.length,r=n.length,o=this.e,l=e.e;if(e.s=this.s==e.s?1:-1,!s[0]||!n[0])return new i(0*e.s);for(e.e=o+l,a<r&&(t=s,s=n,n=t,l=a,a=r,r=l),t=new Array(l=a+r);l--;)t[l]=0;for(o=r;o--;){for(r=0,l=a+o;o<l;)r=t[l]+n[o]*s[l-o-1]+r,t[l--]=r%10,r=r/10|0;t[l]=r}for(r?++e.e:t.shift(),o=t.length;!t[--o];)t.pop();return e.c=t,e},c.toExponential=function(e){return i(this,1,e,e)},c.toFixed=function(e){return i(this,2,e,this.e+e)},c.toPrecision=function(e){return i(this,3,e,e-1)},c.toString=function(){return i(this)},c.valueOf=c.toJSON=function(){return i(this,4)},(t=function i(){function s(e){var t=this;if(!(t instanceof s))return e===y?i():new s(e);e instanceof s?(t.s=e.s,t.e=e.e,t.c=e.c.slice()):function(e,t){var i,s,n;if(0===t&&1/t<0)t="-0";else if(!u.test(t+=""))throw Error(d+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,-1<(i=t.indexOf("."))&&(t=t.replace(".","")),0<(s=t.search(/e/i))?(i<0&&(i=s),i+=+t.slice(s+1),t=t.substring(0,s)):i<0&&(i=t.length),n=t.length,s=0;s<n&&"0"==t.charAt(s);)++s;if(s==n)e.c=[e.e=0];else{for(;0<n&&"0"==t.charAt(--n););for(e.e=i-s-1,e.c=[],i=0;s<=n;)e.c[i++]=+t.charAt(s++)}}(t,e),t.constructor=s}return s.prototype=c,s.DP=n,s.RM=a,s.NE=r,s.PE=o,s.version="5.2.2",s}()).default=t.Big=t,"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:e.Big=t}(this),window.ej=window.Syncfusion=window.Syncfusion||{},function(g,f,d){"use strict";function e(e){e=String(e);return 1===e.length&&(e="0"+e),e}f.version="17.4.0.39",f.consts={NamespaceJoin:"-"},f.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},f.Orientation={Horizontal:"horizontal",Vertical:"vertical"},f.serverTimezoneOffset=0,f.parseDateInUTC=!1,f.persistStateVersion=null,f.locales=f.locales||[],Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==d}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e=e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();e=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:e[1]||"",version:e[2]||"0"}},f.defineClass=function(e,t,i,s){if(!e||!i)return d;for(var n=e.split("."),a=window,r=0;r<n.length-1;r++)f.isNullOrUndefined(a[n[r]])&&(a[n[r]]={}),a=a[n[r]];return(s||f.isNullOrUndefined(a[n[r]]))&&(t="function"==typeof t?t:function(){},a[n[r]]=t,a[n[r]].prototype=i),a[n[r]]},f.util={getNameSpace:function(e){e=e.toLowerCase().split(".");return"ej"===e[0]&&(e[0]="e"),e.join(f.consts.NamespaceJoin)},getObject:function(e,t){if(!t||!e)return d;"string"!=typeof e&&(e=JSON.stringify(e));for(var i=t,s=e.split("."),n=0;n<s.length&&!f.util.isNullOrUndefined(i);n++)i=i[s[n]];return i},createObject:function(e,t,i){for(var s,n=e.split("."),i=i||window,a=i,r=n.length,o=0;o<r;o++)s=n[o],o+1==r?a[s]=t:f.isNullOrUndefined(a[s])&&(a[s]={}),a=a[s];return i},isNullOrUndefined:function(e){return e===d||null===e},exportAll:function(e,t){var i=[],s=[],e={action:e,method:"post","data-ajax":"false"},n=f.buildTag("form","",null,e);if(0!=t.length){for(var a=0;a<t.length;a++){var r=a,o=g("#"+t[a]),l=g("#"+t[a]).data().ejWidgets,d=g(o).data(l[0]);s.push({id:d._id,locale:d.model.locale}),f.isNullOrUndefined(d)||(o=d._getExportModel(d.model),i.push({name:l[0],type:"hidden",value:d.stringify(o)}),r=f.buildTag("input","",null,i[r]),n.append(r))}g("body").append(n),n.submit(),setTimeout(function(){var e;if(s.length)for(var t=0;t<s.length;t++)f.isNullOrUndefined(s[t].locale)||(e=g("#"+s[t].id).data(),l=e.ejWidgets,g("#"+s[t].id).data(l[0]).model.locale=s[t].locale)},0),n.remove()}return!0},print:function(e,t){var i=f.buildTag("div"),e=e.clone();i.append(e),(t=t||window.open("","print","height=452,width=1024,tabbar=no")).document.write("<!DOCTYPE html>");var s,e=g("head").find("link").add("style");"msie"===f.browserInfo().name?(s="",e.each(function(e,t){"LINK"==t.tagName&&g(t).attr("href",t.href),s+=t.outerHTML}),t.document.write("<html><head></head><body>"+s+i[0].innerHTML+"</body></html>")):(s="",t.document.write("<html><head>"),e.each(function(e,t){"LINK"==t.tagName&&g(t).attr("href",t.href),s+=t.outerHTML}),t.document.writeln(s+"</head><body>"),t.document.writeln(i[0].innerHTML+"</body></html>")),t.document.close(),t.focus(),setTimeout(function(){f.isNullOrUndefined(t.window)||(t.print(),setTimeout(function(){t.close()},1e3))},1e3)},ieClearRemover:function(e){var t=g(e).height();e.style.paddingTop=parseFloat(t/2)+"px",e.style.paddingBottom=parseFloat(t/2)+"px",e.style.height="1px",e.style.lineHeight="1px"},sendAjaxRequest:function(e){g.ajax({type:e.type,cache:e.cache,url:e.url,dataType:e.dataType,data:e.data,contentType:e.contentType,async:e.async,success:e.successHandler,error:e.errorHandler,beforeSend:e.beforeSendHandler,complete:e.completeHandler})},buildTag:function(e,t,i,s){var n=/^[a-z]*[0-9a-z]+/gi.exec(e)[0],a=(a=/#([_a-z0-9-&@\/\\,+()$~%:*?<>{}\[\]]+\S)/gi.exec(e))?a[a.length-1].replace(/[&@\/\\,+()$~%.:*?<>{}\[\]]/g,""):d,e=(e=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(e))?e[e.length-1]:d;return g(document.createElement(n)).attr(a?{id:a}:{}).addClass(e||"").css(i||{}).attr(s||{}).html(t||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var e=1;return(e=Math.max.apply(null,g.map(g("body *"),function(e,t){if("absolute"==g(e).css("position")||"fixed"==g(e).css("position"))return parseInt(g(e).css("z-index"))||1})))!=d&&null!=e||(e=1),e},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(e,t){var i,s,n,a=g(e).parents().andSelf().filter(":hidden");return a&&(s={visibility:"hidden",display:"block"},n=[],a.each(function(){var e,t={};for(e in s)t[e]=this.style[e],this.style[e]=s[e];n.push(t)}),i=/(outer)/g.test(t)?g(e)[t](!0):g(e)[t](),a.each(function(e){var t,i=n[e];for(t in s)this.style[t]=i[t]})),i},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[f.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[f.userAgent()]},startEvent:function(){return f.isTouchDevice()||g.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return f.isTouchDevice()||g.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return f.isTouchDevice()||g.support.hasPointer?g.support.hasPointer&&!f.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return f.isTouchDevice()||g.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return f.isTouchDevice()||g.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return f.isTouchDevice()||g.support.hasPointer?"taphold":"click"},isDevice:function(){return f.getBooleanVal(g("head"),"data-ej-forceset",!1)?f.getBooleanVal(g("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&f.isPortrait()&&f.isDevice()||window.innerWidth<=800&&!f.isDevice()||window.innerWidth<=800&&!f.isPortrait()&&f.isWindows()&&f.isDevice()||f.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===f.getBooleanVal(g("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===f.getBooleanVal(g("head"),"data-ej-tablet",!1)||!f.isMobile()&&f.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&f.isMobile())&&this.isDevice()},getClearString:function(e){return g.trim(e.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(e,t,i){t=g(e).attr(t);return null!=t?"true"==t.toLowerCase():i},_getSkewClass:function(e,t,i){var s=e.width(),n=e.height(),a=e.offset().left,r=e.offset().left+s,o=e.offset().top,e=e.offset().top+n,s=.3*s,n=.3*n;return t<a+s&&i<o+n?"e-m-skew-topleft":r-s<t&&i<o+n?"e-m-skew-topright":r-s<t&&e-n<i?"e-m-skew-bottomright":t<a+s&&e-n<i?"e-m-skew-bottomleft":a+s<t&&i<o+n&&t<r-s?"e-m-skew-top":t<a+s?"e-m-skew-left":r-s<t?"e-m-skew-right":e-n<i?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(e){g(e).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){e&&(e=e.touches?e.touches[0]:e,t._distX=0,t._distY=0,t._moved=!1,t._pointX=e.pageX,t._pointY=e.pageY)},_isTouchMoved:function(e,t){if(e){var i=e.touches?e.touches[0]:e,s=i.pageX-t._pointX,e=i.pageY-t._pointY;Date.now();return t._pointX=i.pageX,t._pointY=i.pageY,t._distX+=s,t._distY+=e,e=Math.abs(t._distX),t=Math.abs(t._distY),!(e<5&&t<5)}},listenEvents:function(e,t,i,s,n,a){for(var r=0;r<e.length;r++)f.listenTouchEvent(e[r],t[r],i[r],s,n,a)},listenTouchEvent:function(e,t,i,s,n,a){for(var r=s?"removeEventListener":"addEventListener",o=s?"off":"on",l=g(e),d=0;d<l.length;d++){var h=l[d];switch(t){case"touchstart":f._bindEvent(h,r,t,i,"mousedown","MSPointerDown","pointerdown",a);break;case"touchmove":f._bindEvent(h,r,t,i,"mousemove","MSPointerMove","pointermove",a);break;case"touchend":f._bindEvent(h,r,t,i,"mouseup","MSPointerUp","pointerup",a);break;case"touchcancel":f._bindEvent(h,r,t,i,"mousecancel","MSPointerCancel","pointercancel",a);break;case"tap":case"taphold":case"ejtouchmove":case"click":g(h)[o](t,i);break;default:"msie"==f.browserInfo().name&&f.browserInfo().version<9?n._on(g(h),t,i):h[r](t,i,!0)}}},_bindEvent:function(e,t,i,s,n,a,r,o){g.support.hasPointer?e[t](window.navigator.pointerEnabled?r:a,s,!0):e[t](i,s,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),t=0,i=e.length;t<i;t++)if(e[t]+"ransform"in f.styles)return e[t].substr(0,e[t].length-1);return!1},addPrefix:function(e){return""===f.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),f.userAgent()+e)},destroyWidgets:function(e){g(e).find("[data-role *= ejm]").each(function(e,t){var i=g(t),t=i.data("ejWidgets");t&&i[t]("destroy")})},getAttrVal:function(e,t,i){t=g(e).attr(t);return null!=t?t:i},getOffset:function(e){var t={},e=e.offset()||{left:0,top:0};return g.extend(!0,t,e),"static"!=g("body").css("position")&&(e=g("body").offset(),t.left-=e.left,t.top-=e.top),t},getZindexPartial:function(e,t){if(!f.isNullOrUndefined(e)&&0<e.length){var i=e.parents(),s=g("body").children();!f.isNullOrUndefined(e)&&0<e.length&&s.splice(s.index(t),1),g(s).each(function(e,t){i.push(t)});var n=Math.max.apply(n,g.map(i,function(e,t){if("static"!=g(e).css("position"))return parseInt(g(e).css("z-index"))||1}));return!n||n<1e4?n=1e4:n+=1,n}},isValidAttr:function(e,t){if(void 0!==(e=g(e)[0])[t])return!0;var i=!1;return g.each(e,function(e){if(e.toLowerCase()==t.toLowerCase())return!(i=!0)}),i}},g.extend(f,f.util),f.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(e,t,i,s,n){var a=null;if(("object"==typeof e||e.startsWith("#")||e.startsWith("."))&&(a=g(e).attr("type")),a){if(a=a.toLowerCase(),f.template[a])return f.template[a](this,e,t,i,s)}else if(!f.isNullOrUndefined(n))return f.template["text/x-"+n](this,e,t,i,s);return f.template.render(this,e,t,i,s)},destroy:function(){if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),g(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(var e=this.element.data("ejWidgets")||[],t=0;t<e.length;t++)e[t]==this.pluginName&&e.splice(t,1);for(e.length||this.element.removeData("ejWidgets");this._events;){var i=this._events.pop(),s=[];if(!i)break;for(t=0;t<i[1].length;t++)g.isPlainObject(i[1][t])||s.push(i[1][t]);g.fn.off.apply(i[0],s)}this._events=null,this.element.removeClass(f.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(e){this._events||(this._events=[]);for(var t=[].splice.call(arguments,1,arguments.length-1),i={},s=t.length;i&&"function"!=typeof i;)i=t[--s];return t[s]=f.proxy(t[s],this),this._events.push([e,t,i,t[s]]),g.fn.on.apply(e,t),this},_off:function(e,t,i,s){var n,a=this._events;if(!a||!a.length)return this;"function"==typeof i&&(n=s,s=i,i=n);for(var r=t.match(/\S+/g)||[""],o=0;o<a.length;o++){var l=a[o];if(l[0].length&&(!s||l[2]===s)&&(l[1][0]===t||r[0])&&(!i||l[1][1]===i)&&-1<g.inArray(e[0],l[0])){g.fn.off.apply(e,s?[t,i,l[3]]:[t,i]),a.splice(o,1);break}}return this},_trigger:function(e,t){var i,s=null,n={};if(g.extend(n,t),e in this.model&&(s=this.model[e]),s&&("string"==typeof s&&(s=f.util.getObject(s,window)),g.isFunction(s)&&(i=f.event(e,this.model,t),a=s.call(this,i),t&&g.extend(t,i),i.cancel||!f.isNullOrUndefined(a))))return!1===a||i.cancel;var a=Boolean(t);return(t=t||{}).originalEventType=e,t.type=this.pluginName+e,i=g.Event(t.type,f.event(t.type,this.model,t)),this.element&&this.element.trigger(i),a&&g.extend(t,i),f.isOnWebForms&&0==i.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&f.raiseWebFormsServerEvents(e,t,n),i.cancel},setModel:function(e,t){if(!this._trigger("modelChange",{changes:e})){for(var i in e){if(!t){if(this.model[i]===e[i]){delete e[i];continue}if(g.isPlainObject(e[i])&&(a(this.model[i],e[i]),g.isEmptyObject(e[i]))){delete e[i];continue}}if(this.dataTypes){var s=this._isValidModelValue(i,this.dataTypes,e);if(!0!==s)throw"setModel - Invalid input for property :"+i+" - "+s}this.model.notifyOnEachPropertyChanges&&this.model[i]!==e[i]&&(s={oldValue:this.model[i],newValue:e[i]},e[i]=this._trigger(i+"Change",s)?this.model[i]:s.newValue)}var n;g.isEmptyObject(e)||(this._setFirst?((n=e.dataSource)&&delete e.dataSource,g.extend(!0,this.model,e),n&&(this.model.dataSource=n instanceof Array?n.slice():n,e.dataSource=this.model.dataSource),this._setModel&&this._setModel(e)):this._setModel&&!1===this._setModel(e)||g.extend(!0,this.model,e),"enablePersistence"in e&&this._setState(e.enablePersistence))}},option:function(e,t,i){if(!e)return this.model;if(g.isPlainObject(e))return this.setModel(e,i);if("string"==typeof e){e=e.replace(/^model\./,"");var s=f.getObject(e,this.model);if(t===d&&!i)return s;if("enablePersistence"===e)return this._setState(t);if(i&&t===f.extensions.modelGUID)return this._setModel(f.createObject(e,f.getObject(e,this.model),{}));if(i||f.getObject(e,this.model)!==t)return this.setModel(f.createObject(e,t,{}),i)}return d},_isValidModelValue:function(e,t,i){var s,n,a=t[e],r=i[e];if(!a)return!0;if("string"==typeof a){if("enum"==a&&(i[e]=r&&r.toString().toLowerCase(),a="string"),"array"===a){if("[object Array]"===Object.prototype.toString.call(r))return!0}else{if("data"===a)return!0;if("parent"===a)return!0;if(typeof r===a)return!0}return"Expected type - "+a}if(r instanceof Array){for(var o=0;o<r.length;o++)if(!0!==(s=this._isValidModelValue(e,t,r[o])))return" ["+o+"] - "+s;return!0}for(n in r)if(!0!==(s=this._isValidModelValue(n,a,r)))return n+" : "+s;return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},_removeCircularRef:function(e){var a=[];return function e(t,i,s){if("object"==typeof t)if(Array.prototype.indexOf||(Array.prototype.indexOf=function(e){return jQuery.inArray(e,this)}),0<=a.indexOf(t))delete s[i];else{for(var n in a.push(t),t)t.hasOwnProperty(n)&&e(t[n],n,t);a.pop()}}(e,"obj",null),e},stringify:function(e,t){for(var i=this.observables,s=0;s<i.length;s++){var n=f.getObject(i[s],e);f.isNullOrUndefined(n)||"function"!=typeof n||this._returnFn(e,i[s])}return t&&(e=this._removeCircularRef(e)),JSON.stringify(e)},_setState:function(e){!0===e?(this._persistHandler=f.proxy(this.persistState,this),g(window).on("unload",this._persistHandler)):(this.deleteState(),g(window).off("unload",this._persistHandler))},_removeProp:function(e,t){f.isNullOrUndefined(e)||(-1!=t.indexOf(".")?this._removeProp(e[t.split(".")[0]],t.split(".").slice(1).join(".")):delete e[t])},persistState:function(){var e;if(this._ignoreOnPersist){e=v({},this.model);for(var t=0;t<this._ignoreOnPersist.length;t++)this._removeProp(e,this._ignoreOnPersist[t]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){e={};for(t=0;t<this._addToPersist.length;t++)f.createObject(this._addToPersist[t],f.getObject(this._addToPersist[t],this.model),e);e.addToPersist=this._addToPersist}else e=v({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(f.isNullOrUndefined(f.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",f.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(f.isNullOrUndefined(f.persistStateVersion)||null!=f.cookie.get("persistKey")||f.cookie.set("persistKey",f.persistStateVersion),f.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&f.cookie.set("$ej$"+this.pluginName+this._id,void 0,new Date)},restoreState:function(e){var t,i=null;if(window.localStorage?i=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(i=f.cookie.get("$ej$"+this.pluginName+this._id)),i&&(t=JSON.parse(i),this._restoreState&&(this._restoreState(t.customPersists),delete t.customPersists),!1===f.isNullOrUndefined(t)&&(f.isNullOrUndefined(t.ignoreOnPersist)?f.isNullOrUndefined(t.addToPersist)||(this._addToPersist=t.addToPersist,delete t.addToPersist):(this._ignoreOnPersist=t.ignoreOnPersist,delete t.ignoreOnPersist))),f.isNullOrUndefined(t)||f.isNullOrUndefined(this._ignoreOnPersist))this.model=g.extend(!0,this.model,t);else{for(var s=0,n=this._ignoreOnPersist.length;s<n;s++)-1!==this._ignoreOnPersist[s].indexOf(".")?f.createObject(this._ignoreOnPersist[s],f.getObject(this._ignoreOnPersist[s],this.model),t):t[this._ignoreOnPersist[s]]=this.model[this._ignoreOnPersist[s]];this.model=t}!e&&i&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t=[];if("object"==typeof e?t=e:"string"==typeof e&&t.push(e),this._addToPersist===d){this._ignoreOnPersist=this._ignoreOnPersist||[];for(var i=0;i<t.length;i++)this._ignoreOnPersist.push(t[i])}else for(i=0;i<t.length;i++){var s=this._addToPersist.indexOf(t[i]);this._addToPersist.splice(s,1)}},addToPersist:function(e){var t=[];if("object"==typeof e?t=e:"string"==typeof e&&t.push(e),this._addToPersist===d){this._ignoreOnPersist=this._ignoreOnPersist||[];for(var i=0;i<t.length;i++){var s=this._ignoreOnPersist.indexOf(t[i]);this._ignoreOnPersist.splice(s,1)}}else for(i=0;i<t.length;i++)-1===g.inArray(t[i],this._addToPersist)&&this._addToPersist.push(t[i])},formatting:function(e,t,i){e=e.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),i=f.preferredCulture(i)?i:"en-US";var s=e,n=e.split("{0:"),a=e.split("}"),n=n[0],a=a[1];if("string"==typeof t&&g.isNumeric(t)&&(t=Number(t)),-1!=e.indexOf("{0:")){e=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(e);return null!=e&&null!=t?t=null!=n&&null!=a?n+f.format(t,e[2],i)+a:f.format(t,e[2],i):null!=t||(t=""),t}if(!s.startsWith("{")||s.startsWith("{0:"))return null!=this.data&&null==this.data.Value?(g.each(this.data,function(e,t){s=s.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),s):this.data.Value;for(var r=s.split(""),t=(t=(t||"")+"").split(""),o=/[0aA\*CN<>\?]/gm,l=0,d=0;l<r.length;l++)r[l]=o.test(r[l])?"{"+d+++"}":r[l];return String.format.apply(String,[r.join("")].concat(t)).replace("{","").replace("}","")}},f.WidgetBase=function(){};var s,n,a=function(e,t){if(e instanceof Array)for(var i=0,s=e.length;i<s;i++)(n=e[i])===t[n]&&delete t[n],g.isPlainObject(t[n])&&g.isPlainObject(n)&&a(n,t[n]);else for(var n in e)e[n]===t[n]&&delete t[n],g.isPlainObject(t[n])&&g.isPlainObject(e[n])&&a(e[n],t[n])};f.widget=function(c,u,p){if("object"!=typeof c){var m=p._rootCSS||f.getNameSpace(u);p=f.defineClass(u,function(e,t){if(this.sfType=u,this.pluginName=c,this.instance=b,f.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},g.extend(this,f.widgetBase),this.dataTypes)for(var i in t){var s=this._isValidModelValue(i,this.dataTypes,t);if(!0!==s)throw"setModel - Invalid input for property :"+i+" - "+s}var n=e.data("ejWidgets")||[];n.push(c),e.data("ejWidgets",n);for(var a,r=0;f.widget.observables&&this.observables&&r<this.observables.length;r++){var o=f.getObject(this.observables[r],t);o&&f.createObject(this.observables[r],f.widget.observables.register(o,this.observables[r],this,e),t)}if(this.element=e.jquery?e:g(e),this.model=v(!0,{},p.prototype.defaults,t),this.model.keyConfigs=v(this.keyConfigs),this.element.addClass(m+" e-js").data(c,this),this._id=e[0].id,this.model.enablePersistence){if(window.localStorage&&!f.isNullOrUndefined(f.persistStateVersion)&&window.localStorage.getItem("persistKey")!=f.persistStateVersion)for(var r in window.localStorage)-1!=r.indexOf("$ej$")&&(window.localStorage.removeItem(r),window.localStorage.setItem("persistKey",f.persistStateVersion));else if(document.cookie&&!f.isNullOrUndefined(f.persistStateVersion)&&f.cookie.get("persistKey")!=f.persistStateVersion)for(a in document.cookie.split(/; */))-1!=a.indexOf("$ej$")&&(f.cookie.set(a.split("=")[0],void 0,new Date),f.cookie.set("persistKey",f.persistStateVersion));this._persistHandler=f.proxy(this.persistState,this),g(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(t),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){var l,d,h=!1;for(l in this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus),this.model.keyConfigs)if("focus"!==l){h=!0;break}h&&this._keyPressed&&(d=e,n="keydown",this.keySettings&&(d=this.keySettings.getElement&&this.keySettings.getElement()||d,n=this.keySettings.event||n),this._on(d,n,function(e){var t,i;this.model.keyConfigs&&(t=_.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey},t&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault())}))}this._trigger("create")},p),g.fn[c]=function(e){for(var t=e,i=0;i<this.length;i++){var s=g(this[i]),n=s.data(c),a=n&&s.hasClass(m),r=null;if(0<this.length&&g.isPlainObject(t)&&(e=f.copyObject({},t)),a){if(e)if(a=[].slice.call(arguments,1),0<this.length&&a[0]&&"option"===t&&g.isPlainObject(a[0])&&(a[0]=f.copyObject({},a[0])),g.isPlainObject(e))n.setModel(e);else if(0!==e.indexOf("_")&&!f.isNullOrUndefined(r=f.getObject(e,n))||0===e.indexOf("model."))if(r&&g.isFunction(r)){a=r.apply(n,a);if(a!==d)return a}else{if(1==arguments.length)return r;n.option(e,arguments[1])}else l(u+": function/property - "+e+" does not exist")}else!0!==p.prototype._requiresID||g(this[i]).attr("id")||s.attr("id",o("ejControl_")),e&&"object"!=typeof e?l(c+": methods/properties can be accessed only after plugin creation"):(p.prototype.defaults&&!f.isNullOrUndefined(f.setCulture)&&"locale"in p.prototype.defaults&&"ejChart"!=c&&(!e||"locale"in e?f.isNullOrUndefined(e)&&((e={}).locale=f.setCulture().name):e.locale=f.setCulture().name),new p(s,e))}return-1!=c.indexOf("ejm")&&f.widget.registerInstance(s,c,u,p.prototype),this},f.widget.register(c,u,p.prototype),f.loadLocale(c)}else for(var e in p=u,c){var t=c[e];t instanceof Array&&(p._rootCSS=t[1],t=t[0]),f.widget(e,t,p),c[e]instanceof Array&&(p._rootCSS="")}},f.loadLocale=function(e){for(var t=f.locales,i=0,s=t.length;i<s;i++)g.fn["Locale_"+t[i]](e)},g.extend(f.widget,{register:function(e,t,i){f.isNullOrUndefined(s[e])||l("ej.widget : The widget named "+e+" is trying to register twice."),s[e]={name:e,className:t,proto:i},f.widget.extensions&&f.widget.extensions.registerWidget(e)},registerInstance:function(e,t,i,s){n.push({element:e,pluginName:t,className:i,proto:s})},registeredWidgets:s={},registeredInstances:n=[]}),f.widget.destroyAll=function(e){if(e&&e.length)for(var t=0;t<e.length;t++){var i=e.eq(t).data(),s=i.ejWidgets;if(s&&s.length)for(var n=0;n<s.length;n++)i[s[n]]&&i[s[n]].destroy&&i[s[n]].destroy()}},f.cookie={get:function(e){e=RegExp(e+"=([^;]+)").exec(document.cookie);return e&&1<e.length?e[1]:d},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}};var _={getActionFromCode:function(e,t,i,s,n){for(var a in i=i||!1,s=s||!1,n=n||!1,e)if("focus"!==a)for(var r=_.getKeyObject(e[a]),o=0;o<r.length;o++)if(t===r[o].code&&i==r[o].isCtrl&&s==r[o].isShift&&n==r[o].isAlt)return a;return null},getKeyObject:function(e){for(var t={isCtrl:!1,isShift:!1,isAlt:!1},i=g.extend(!0,{},t),s=e.split(","),n=[],a=0;a<s.length;a++){var r=null;if(-1!=s[a].indexOf("+"))for(var o=s[a].split("+"),l=0;l<o.length;l++)r=_.getResult(g.trim(o[l]),t);else r=_.getResult(g.trim(s[a]),g.extend(!0,{},i));n.push(r)}return n},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}};f.getScrollableParents=function(e){return g(e).parentsUntil("html").filter(function(){return"visible"!=g(this).css("overflow")}).add(g(window))},f.browserInfo=function(){var e,t={},i=[],s={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(e in s)if(s.hasOwnProperty(e)&&(i=navigator.userAgent.match(s[e]))){if(t.name="opr"==i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.version=i[2],t.culture={},t.culture.name=t.culture.language=navigator.language||navigator.userLanguage,void 0!==f.globalize){for(var n=f.preferredCulture().name,a=navigator.language||navigator.userLanguage?f.preferredCulture(navigator.language||navigator.userLanguage):f.preferredCulture("en-US"),r=0;navigator.languages&&r<navigator.languages.length&&(a=f.preferredCulture(navigator.languages[r])).language!=navigator.languages[r];r++);f.preferredCulture(n),g.extend(!0,t.culture,a)}navigator.userAgent.match(/Trident\/7\./)&&(t.name="msie");break}return t.isMSPointerEnabled="msie"==t.name&&9<t.version&&window.navigator.msPointerEnabled,t.pointerEnabled=window.navigator.pointerEnabled,t},f.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},f.event=function(e,t,i){return g.extend(i||{},{type:e,model:t,cancel:!1})},f.proxy=function(t,i,s){return t&&"function"==typeof t?"on"in t&&i?s?t.on(i,s):t.on(i):function(){var e=s?[s]:[];return e.push.apply(e,arguments),t.apply(i||this,e)}:null},f.hasStyle=function(e){var t=document.documentElement.style;if(e in t)return!0;var i=["ms","Moz","Webkit","O","Khtml"];e=e[0].toUpperCase()+e.slice(1);for(var s=0;s<i.length;s++)if(i[s]+e in t)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var v=f.copyObject=function(e,t){var i,s,n=2;"boolean"!=typeof e&&(n=1);var a=[].slice.call(arguments,n);1===n&&(t=e,e=d);for(var r=0;r<a.length;r++)for(var o in a[r])if(i=t[o],(s=a[r][o])!==d&&i!==s&&a[r]!==s&&t!==s)if(s instanceof Array)if(0===r&&e)if("dataSource"===o||"data"===o||"predicates"===o)t[o]=s.slice();else{t[o]=new Array;for(var l=0;l<s.length;l++)v(!0,t[o],s)}else t[o]=s.slice();else f.isPlainObject(s)?(t[o]=i||{},e?v(e,t[o],s):v(t[o],s)):t[o]=s;return t},b=function(){return this},t=0,o=function(e){return e+t++};f.template={},f.template.render=f.template["text/x-jsrender"]=function(e,t,i,s,n){"#"!==t.slice(0,1)&&(t=["<div>",t,"</div>"].join(""));s={prop:n,index:s};return g(t).render(i,s)};var r=!(f.isPlainObject=function(e){if(!e)return!1;if(f.DataManager!==d&&e instanceof f.DataManager)return!1;if("object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var t,i=f.support.isOwnLast;for(t in e)if(i)break;return t===d||e.hasOwnProperty(t)});f.util.valueFunction=function(s){return function(e,t){var i=f.getObject(s,this.model);if(!1===r&&(r=f.getObject("observables.getValue",f.widget)),e===d)return f.isNullOrUndefined(r)?"function"==typeof i?i.call(this):i:r(i,t);"function"==typeof i?(this["ob.values"][s]=e,i.call(this,e)):f.createObject(s,e,this.model)}},f.util.getVal=function(e){return"function"==typeof e?e():e},f.support={isOwnLast:function(){function e(){this.a=1}for(var t in e.prototype.b=1,new e)return"b"===t}(),outerHTML:document.createElement("div").outerHTML!==d};var l=f.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}};f.getRandomValue=function(e,t){if(e===d||t===d)return f.throwError("Min and Max values are required for generating a random number");var i,e="crypto"in window&&"getRandomValues"in crypto?(i=new Uint16Array(1),window.crypto.getRandomValues(i),i[0]%(t-e)+e):Math.random()*(t-e)+e;return 0|e},f.extensions={},f.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var i=$(this);$.each(e,function(e,t){t&&t.specified&&i.attr(t.name,t.value)})},$.fn.removeEleAttrs=function(s){return this.each(function(){var i=$(this),e=$(this.attributes).clone();$.each(e,function(e,t){t&&t.specified&&s.test(t.name)&&i.removeAttr(t.name)})})},$.fn.attrNotStartsWith=function(e){var t,i=[];this.each(function(){t=$(this.attributes).clone()});for(var s=0;s<t.length;s++)t[s]&&t[s].specified&&e.test(t[s].name)||i.push(t[s]);return i},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var i=$(this),e=$(this.attributes).clone();$.each(e,function(e,t){t&&t.specified&&""===t.value&&i.removeAttr(t.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var s=e.attributes,n=0;n<s.length;n++)if(0===s[n].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}(),window.ej=window.Syncfusion=window.Syncfusion||{},function(v,b,e,g){"use strict";b.DataManager=function(e,t,i){if(!(this instanceof b.DataManager))return new b.DataManager(e,t,i);e=e||[],"string"==typeof(i=i||e.adaptor)&&(i=new b[i]);var s=[],n=this;return e instanceof Array?s={json:e,offline:!0}:"object"==typeof e?v.isPlainObject(e)?(e.json||(e.json=[]),e.table&&(e.json=this._getJsonFromElement(e.table,e.headerOption)),s={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,async:e.async,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,antiForgery:e.antiForgery,jsonp:e.jsonp,dataType:e.dataType,enableAjaxCache:e.enableAjaxCache,offline:e.offline!==g?e.offline:!("remoteSaveAdaptor"==e.adaptor||e.adaptor instanceof b.remoteSaveAdaptor)&&!e.url,requiresFormat:e.requiresFormat}):(e.jquery||A(e))&&(s={json:this._getJsonFromElement(e),offline:!0,table:e}):"string"==typeof e&&(s={url:e,offline:!1,dataType:"json",json:[]}),s.requiresFormat!==g||b.support.cors||(s.requiresFormat=!!V(s.crossDomain)||s.crossDomain),s.antiForgery&&this.antiForgeryToken(),s.dataType===g&&(s.dataType="json"),this.dataSource=s,this.defaultQuery=t,s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=i||new b.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(t||b.Query()).done(function(e){n.dataSource.offline=!0,n.isDataAvailable=!0,s.json=e.result,n.adaptor=new b.JsonAdaptor})):this.adaptor=new(s.offline?b.JsonAdaptor:b.ODataAdaptor),!s.jsonp&&this.adaptor instanceof b.ODataAdaptor&&(s.jsonp="callback"),this.adaptor=i||this.adaptor,s.enableCaching&&(this.adaptor=new b.CacheAdaptor(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this},b.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(e,t,i,s){"function"==typeof e&&(s=i,i=t,t=e,e=null),(e=e||this.defaultQuery)instanceof b.Query||B("DataManager - executeQuery() : A query is required to execute");var n=v.Deferred();n.then(t,i,s);var a,r={query:e};return this.dataSource.offline||this.dataSource.url==g?b.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?k(function(){this._localQueryProcess(e,r,n)},this):this._localQueryProcess(e,r,n):(a=this.adaptor.processQuery(this,e),b.isNullOrUndefined(a.url)?k(function(){r=this._getDeferedArgs(e,a,r),n.resolveWith(this,[r])},this):this._makeRequest(a,n,r,e)),n.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=P(e._fromTable,i.result,this),i.getKnockoutModel=M(i.result),i},executeLocal:function(e){this.defaultQuery||e instanceof b.Query||B("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||B("DataManager - executeLocal() : Json data is required to execute"),e=e||this.defaultQuery;var t=this.adaptor.processQuery(this,e);if(e._subQuery){var i=e._subQuery._fromTable,s=e._subQuery._lookup,n=e._requiresCount?t.result:t;s&&s instanceof Array&&r(e._subQuery._fKey,i,n,s,e._subQuery._key);for(var a=0;a<n.length;a++)n[a][i]instanceof Array&&(n[a]=v.extend({},n[a]),n[a][i]=this.adaptor.processResponse(e._subQuery.using(b.DataManager(n[a][i].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(t,this,e)},_makeRequest:function(e,o,l,d){var h=!!d._subQuerySelector,n=z(function(e){l.error=e,o.rejectWith(this,[l])},this),c=z(function(e,t,i,s,n,a,r){h||(l.xhr=i,l.count=parseInt(t,10),l.result=e,l.request=s,l.aggregates=a,l.getTableModel=P(d._fromTable,e,this),l.getKnockoutModel=M(e),l.actual=n,l.virtualSelectRecords=r,o.resolveWith(this,[l]))},this),u=z(function(t,e){var i=v.Deferred(),s={parent:l};d._subQuery._isChild=!0;e=this.adaptor.processQuery(this,d._subQuery,t?this.adaptor.processResponse(t):e),s=this._makeRequest(e,i,s,d._subQuery);return h||i.then(function(e){t&&(r(d._subQuery._fKey,d._subQuery._fromTable,t,e,d._subQuery._key),c(t))},n),s},this),t=N(function(e,t,i,s){-1==i.getResponseHeader("Content-Type").indexOf("xml")&&b.dateParse&&(e=b.parseJSON(e));var n=this.adaptor.processResponse(e,this,d,i,s),a=0,r=null,o=e.virtualSelectRecords;d._requiresCount&&(a=n.count,r=n.aggregates,n=n.result),d._subQuery?h||u(n):c(n,a,i,s,e,r,o)},this),t=v.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!!b.isNullOrUndefined(this.dataSource.enableAjaxCache)||this.dataSource.enableAjaxCache,beforeSend:z(this._beforeSend,this),processData:!1,success:t,error:n},e);return"async"in this.dataSource&&(t.async=this.dataSource.async),t=v.ajax(t),h&&((e=d._subQuerySelector.call(this,{query:d._subQuery,parent:d}))&&e.length?(t=v.when(t,u(null,e))).then(N(function(e,t,i){var s=this.adaptor.processResponse(e[0],this,d,e[2],i[0]),n=0;d._requiresCount&&(n=s.count,s=s.result);i=this.adaptor.processResponse(t[0],this,d._subQuery,t[2],i[1]),n=0;d._subQuery._requiresCount&&(n=i.count,i=i.result),r(d._subQuery._fKey,d._subQuery._fromTable,s,i,d._subQuery._key),h=!1,c(s,n,e[2])},this),n):h=!1),t},_beforeSend:function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,s=this.dataSource.headers,n=0;s&&n<s.length;n++)for(var a in i=[],s[n])i.push(a),e.setRequestHeader(a,s[n][a])},saveChanges:function(n,a,e,t){e instanceof b.Query&&(t=e,e=null);e={url:e,key:a||this.dataSource.key},t=this.adaptor.batchRequest(this,n,e,t);if(this.dataSource.offline)return t;var r=v.Deferred();return v.ajax(v.extend({beforeSend:z(this._beforeSend,this),success:N(function(e,t,i,s){r.resolveWith(this,[this.adaptor.processResponse(e,this,null,i,s,n,a)])},this),error:function(e){r.rejectWith(this,[{error:e}])}},t)),r.promise()},insert:function(e,t,i){e=x.replacer(e,!0),t instanceof b.Query&&(i=t,t=null);i=this.adaptor.insert(this,e,t,i);if(this.dataSource.offline)return i;var n=v.Deferred();return v.ajax(v.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},i)),n.promise()},antiForgeryToken:function(){return b.isNullOrUndefined(v("input[name='_ejRequestVerifyToken']").val())?b.buildTag("input","","",{type:"hidden",name:"_ejRequestVerifyToken",value:b.getGuid()}).appendTo("body"):v("input[name='_ejRequestVerifyToken']").val(b.getGuid()),b.cookie.set("_ejRequestVerifyToken",v("input[name='_ejRequestVerifyToken']").val()),{name:"_ejRequestVerifyToken",value:v("input[name='_ejRequestVerifyToken']").val()}},remove:function(e,t,i,s){"object"==typeof t&&(t=t[e]),i instanceof b.Query&&(s=i,i=null);s=this.adaptor.remove(this,e,t,i,s);if(this.dataSource.offline)return s;var n=v.Deferred();return v.ajax(v.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},s)),n.promise()},update:function(e,t,i,s){t=x.replacer(t,!0),i instanceof b.Query&&(s=i,i=null);s=this.adaptor.update(this,e,t,i,s);if(this.dataSource.offline)return s;var n=v.Deferred();return v.ajax(v.extend({contentType:"application/json; charset=utf-8",beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},s)),n.promise()},_getJsonFromElement:function(e){"string"==typeof e&&(e=v(v(e).html()));var t=(e=e.jquery?e[0]:e).tagName.toLowerCase();return"table"!==t&&B("ej.DataManager : Unsupported htmlElement : "+t),b.parseTable(e)}};var r=function(e,t,i,s,n){var a,r={};for(s.result&&(s=s.result),s.GROUPGUID&&B("ej.DataManager: Do not have support Grouping in hierarchy"),a=0;a<s.length;a++){var o=b.getObject(e,s[a]);(r[o]||(r[o]=[])).push(s[a])}for(a=0;a<i.length;a++)i[a][t]=r[b.getObject(n||e,i[a])]},a="application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",s="multipart/mixed",o="--changeset_",l="batch_",d="Content-Type: application/http\nContent-Transfer-Encoding: binary ",h="Content-Type: application/json; charset=utf-8 ",x={parseJson:function(e){var t=typeof e;return"string"==t?e=JSON.parse(e,x.jsonReviver):e instanceof Array?x.iterateAndReviveArray(e):"object"==t&&x.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?x.iterateAndReviveJson(e[t]):"string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?e[t]=x.parseJson(e[t]):e[t]=x.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t,i;for(i in e)i.startsWith("__")||("object"==typeof(t=e[i])?t instanceof Array?x.iterateAndReviveArray(t):x.iterateAndReviveJson(t):e[i]=x.jsonReviver(i,t))},jsonReviver:function(e,t){var i=t,s=/[\-,/,\,.,:,]+/;if("string"==typeof t){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(n)return b.parseDateInUTC?x.isValidDate(n[0]):x.replacer(new Date(parseInt(n[1])));(b.dateParse?/^(?:(\d{4}\-\d\d\-\d\d)|(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?)$/:/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/).test(t)&&(i=i.split(/[^0-9]/),/^(\d{4}\-\d\d\-\d\d)$/.test(t)?t=new Date(i[b.dateFormat.split(s).indexOf("yyyy")],i[b.dateFormat.split(s).indexOf("MM")]-1,i[b.dateFormat.split(s).indexOf("dd")]):(t=b.parseDateInUTC?x.isValidDate(t):x.replacer(new Date(t)),isNaN(t)&&(t=x.replacer(new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5])))))}return t},isValidDate:function(e){var t=e;return"string"==typeof t&&0==t.indexOf("/Date(")&&(e=t.replace(/\d+/,function(e){var t=6e4*new Date(parseInt(e)).getTimezoneOffset(),t=parseInt(e)+t;return x.replacer(new Date(parseInt(t)))})),"string"!=typeof e?e:(e=(e=e.replace("/Date(",function(){return""})).replace(")/",function(){return""}),new Date(e)instanceof Date?new Date(e):e)},isJson:function(e){return"string"==typeof e[0]?e:b.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e,t){return b.isPlainObject(e)?x.jsonReplacer(e,t):e instanceof Array?x.arrayReplacer(e):e instanceof Date?x.jsonReplacer({val:e},t).val:e},jsonReplacer:function(e,t){var i,s,n;for(i in e)(n=e[i])instanceof Date&&(s=60*b.serverTimezoneOffset*60*1e3*(b.isNullOrUndefined(t)||!1===t?1:-1),e[i]=new Date(+n+s));return e},arrayReplacer:function(e){for(var t=0;t<e.length;t++)b.isPlainObject(e[t])?e[t]=x.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=x.jsonReplacer({date:e[t]}).date);return e}};b.isJSON=x.isJson,b.parseJSON=x.parseJson,b.dateParse=!0,b.dateFormat="yyyy-MM-dd",b.isGUID=x.isGuid,b.Query=function(e){return this instanceof b.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new b.Query(e)},b.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof b.DataManager?(this.dataManagar=e,this):B("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,t,i,s){return(e=e||this.dataManagar)&&e instanceof b.DataManager?e.executeQuery(this,t,i,s):B("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return(e=e||this.dataManagar)&&e instanceof b.DataManager?e.executeLocal(this):B("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new b.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,t){return"function"==typeof t||b.isPlainObject(t)?"function"==typeof t&&this._params.push({key:e,fn:t}):this._params.push({key:e,value:t}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,t,i,s,n){t=(t||b.FilterOperators.equal).toLowerCase();var a=null;return"string"==typeof e?a=new b.Predicate(e,t,i,s,n):e instanceof b.Predicate?a=e:B("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:a}),this},search:function(e,t,i,s,n){t&&"boolean"!=typeof t?"string"==typeof t&&(t=[t]):s=t=[],"boolean"==typeof i&&(s=i,i=null),(i=i||b.FilterOperators.contains).length<3&&(i=b.data.operatorSymbols[i]);var a=b.data.fnOperators[i]||b.data.fnOperators.processSymbols(i);return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:s,ignoreAccent:n,comparer:a}}),this},sortBy:function(e,t,i){var s,n,a=b.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),t=b.sortOrder.Descending),e instanceof Array){for(var r=0;r<e.length;r++)this.sortBy(e[r],t,i);return this}if("boolean"==typeof t?t=t?b.sortOrder.Descending:b.sortOrder.Ascending:"function"==typeof t&&(a="custom"),t&&"string"!=typeof t||(a=t?t.toLowerCase():b.sortOrder.Ascending,t=b.pvt.fnSort(t)),i){s=y(this.queries,"onSortBy");for(r=0;r<s.length;r++)if("string"==typeof(n=s[r].e.fieldName)){if(n===e)return this}else if(n instanceof Array)for(var o=0;o<n.length;o++)if(n[o]===e||e.toLowerCase()===n[o]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:t,direction:a}}),this},sortByDesc:function(e){return this.sortBy(e,b.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return"number"==typeof e&&"number"==typeof t||B("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&B("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&B("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||B("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,t){return e&&e instanceof b.Query||B("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof t&&(this._subQuerySelector=t),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},b.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},b.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",antiForgery:"antiForgery"},init:function(){},extend:function(e){function t(e){this.dataSource=e,this.options&&(this.options=v.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}}var i,s=((t.prototype=new this.type).type=t).prototype.base={};for(i in e)t.prototype[i]&&(s[i]=t.prototype[i]);return v.extend(!0,t.prototype,e),t},processQuery:function(e,t){},processResponse:function(e,t,i,s){return e.d||e},convertToQueryString:function(e,t,i){return v.param(e)},type:b.Adaptor},b.UrlAdaptor=(new b.Adaptor).extend({processQuery:function(e,t,i){var s,n,a=y(t.queries,"onSortBy"),r=y(t.queries,"onGroup"),o=y(t.queries,"onWhere"),l=y(t.queries,"onSearch"),d=y(t.queries,"onAggregates"),h=w(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),c=t._params,u=e.dataSource.url,p=null,m=this.options,g={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};h.onPage?(s=h.onPage,n=((n=S(s.pageIndex,t))-1)*(p=S(s.pageSize,t))):h.onRange&&(n=(s=h.onRange).start,p=s.end-s.start);for(var f=0;f<a.length;f++)s=S(a[f].e.fieldName,t),g.sorted.push(C(this,"onEachSort",{name:s,direction:a[f].e.direction},t));i&&(s=this.getFiltersFrom(i,t))&&g.filters.push(C(this,"onEachWhere",s.toJSON(),t));for(f=0;f<o.length;f++)for(var _ in g.filters.push(C(this,"onEachWhere",o[f].e.toJSON(),t)),g.filters[f])V(g[_])&&delete g[_];for(f=0;f<l.length;f++)s=l[f].e,g.searches.push(C(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(f=0;f<r.length;f++)g.grouped.push(S(r[f].e.fieldName,t));for(f=0;f<d.length;f++)s=d[f].e,g.aggregates.push({type:s.type,field:S(s.field,t)});var v={};for(_ in v[m.from]=t._fromTable,m.expand&&(v[m.expand]=t._expands),v[m.select]=h.onSelect?C(this,"onSelect",S(h.onSelect.fieldNames,t),t):"",v[m.count]=t._requiresCount?C(this,"onCount",t._requiresCount,t):"",v[m.search]=g.searches.length?C(this,"onSearch",g.searches,t):"",v[m.skip]=h.onSkip?C(this,"onSkip",S(h.onSkip.nos,t),t):"",v[m.take]=h.onTake?C(this,"onTake",S(h.onTake.nos,t),t):"",v[m.antiForgery]=e.dataSource.antiForgery?e.antiForgeryToken().value:"",v[m.where]=g.filters.length||g.searches.length?C(this,"onWhere",g.filters,t):"",v[m.sortBy]=g.sorted.length?C(this,"onSortBy",g.sorted,t):"",v[m.group]=g.grouped.length?C(this,"onGroup",g.grouped,t):"",v[m.aggregates]=g.aggregates.length?C(this,"onAggregates",g.aggregates,t):"",v.param=[],C(this,"addParams",{dm:e,query:t,params:c,reqParams:v}),v)!V(v[_])&&""!==v[_]&&0!==v[_].length&&"params"!==_||delete v[_];m.skip in v&&m.take in v||null===p||(v[m.skip]=C(this,"onSkip",n,t),v[m.take]=C(this,"onTake",p,t));p=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(v),url:u,ejPvtData:p,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(v,t,e),{type:"GET",url:(s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s).length?u.replace(/\/*$/,s):u,ejPvtData:p})},convertToQueryString:function(e,t,i){return i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")?v.param(e):"?"+v.param(e)},processResponse:function(e,t,i,s,n,a){var r=n.ejPvtData||{},o=e.groupDs;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];n=JSON.parse(n.data);if(n&&"batch"===n.action&&e.added)return a.added=e.added,a;if(e.d&&(e=e.d),r&&r.aggregates&&r.aggregates.length){var l,d=r.aggregates,h={},c={};"count"in e&&(h.count=e.count),e.result&&(h.result=e.result),e.aggregate&&(e=e.aggregate);for(var u=0;u<d.length;u++)(l=b.aggregates[d[u].type])&&(c[d[u].field+" - "+d[u].type]=l(e,d[u].field));h.aggregates=c,e=h}if(r&&r.groups&&r.groups.length){var p=r.groups,h={};"count"in e&&(h.count=e.count),e.aggregates&&(h.aggregates=e.aggregates),e.result&&(e=e.result);for(u=0;u<p.length;u++){var m=D(p[u],i.queries);b.isNullOrUndefined(o)||(o=b.group(o,p[u],null,m)),e=b.group(e,p[u],r.aggregates,m,null,o)}return h.count!=g?h.result=e:h=e,h}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){i={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i)}},beforeSend:function(e,t){},insert:function(e,t,i,s){i={value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(i)}},remove:function(e,t,i,s,n){s={key:i,keyColumn:t,table:s,action:"remove",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:s}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(s)}},update:function(e,t,i,s,n){s={value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:s}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(s)}},getFiltersFrom:function(e,t){e instanceof Array&&e.length||B("ej.SubQuery: Array of key values required");var i,s=t._fKey,n=s,a=t._key,r=[],o="object"!=typeof e[0];"object"!=typeof e[0]&&(n=null);for(var l=0;l<e.length;l++)i=o?e[l]:b.pvt.getObject(a||n,e[l]),r.push(new b.Predicate(s,"==",i));return b.Predicate.or(r)},addParams:function(e){var t=e.dm,i=e.query,s=e.params,n=e.reqParams;n.params={};for(var a,r=0;a=s[r];r++)n[a.key]&&B("ej.Query: Custom Param is conflicting other request arguments"),n[a.key]=a.value,a.fn&&(n[a.key]=a.fn.call(i,a.key,i,t)),n.params[a.key]=n[a.key]}}),b.WebMethodAdaptor=(new b.UrlAdaptor).extend({processQuery:function(e,t,i){var s=b.UrlAdaptor.prototype.processQuery(e,t,i),n=b.parseJSON(s.data),i={};return i.value=n,C(this,"addParams",{dm:e,query:t,params:t._params,reqParams:i}),{data:JSON.stringify(i),url:s.url,ejPvtData:s.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t=e.dm,i=e.query,s=e.params,n=e.reqParams;n.params={};for(var a,r=0;a=s[r];r++){n[a.key]&&B("ej.Query: Custom Param is conflicting other request arguments");var o=a.key,l=a.value;a.fn&&(l=a.fn.call(i,a.key,i,t)),n[o]=l,n.params[o]=n[o]}}}),b.CacheAdaptor=(new b.UrlAdaptor).extend({init:function(e,s,t){b.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=t,this.guidId=b.getGuid("cacheAdaptor");window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}));var n=this.guidId;b.isNullOrUndefined(s)||setInterval(function(){for(var e=b.parseJSON(window.localStorage.getItem(n)),t=[],i=0;i<e.results.length;i++)e.results[i].timeStamp=new Date-new Date(e.results[i].timeStamp),new Date-new Date(e.results[i].timeStamp)>s&&t.push(i);for(i=0;i<t.length;i++)e.results.splice(t[i],1),e.keys.splice(t[i],1);window.localStorage.removeItem(n),window.localStorage.setItem(n,JSON.stringify(e))},s)},generateKey:function(e,t){var i=y(t.queries,"onSortBy"),s=y(t.queries,"onGroup"),n=y(t.queries,"onWhere"),a=y(t.queries,"onSearch"),r=(y(t.queries,"onPage"),w(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),o=(t._params,e);r.onPage&&(o+=r.onPage.pageIndex),i.forEach(function(e){o+=e.e.direction+e.e.fieldName}),s.forEach(function(e){o+=e.e.fieldName}),a.forEach(function(e){o+=e.e.searchKey});for(var l=0;l<n.length;l++){var d=n[l];if(d.e.isComplex){var h=t.clone();h.queries=[];for(var c=0;c<d.e.predicates.length;c++)h.queries.push({fn:"onWhere",e:d.e.predicates[c],filter:t.queries.filter});o+=d.e.condition+this.generateKey(e,h)}else o+=d.e.field+d.e.operator+d.e.value}return o},processQuery:function(e,t,i){var s,t=this.generateKey(e.dataSource.url,t);window.localStorage&&(s=b.parseJSON(window.localStorage.getItem(this.guidId)));t=s?s.results[s.keys.indexOf(t)]:null;return null==t||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):t},processResponse:function(e,t,i,s,n,a){if(this._insertAction||n&&this.cacheAdaptor.options.batch&&n.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,s,n,a);var e=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),t=this.generateKey(t.dataSource.url,i),r={};window.localStorage&&(r=b.parseJSON(window.localStorage.getItem(this.guidId)));i=v.inArray(t,r.keys);for(-1!=i&&(r.results.splice(i,1),r.keys.splice(i,1)),r.results[r.keys.push(t)-1]={keys:t,result:e.result,timeStamp:new Date,count:e.count};r.results.length>this.pageSize;)r.results.splice(0,1),r.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(r)),e},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var y=function(e,t){return e.filter(function(e){return e.fn===t})||[]},w=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},n=0;n<i.length;n++)s[i[n].fn]||(s[i[n].fn]=i[n].e);return s},C=function(e,t,i,s){return e[t]&&(s=e[t](i,s),V(s)||(i=s)),i};b.ODataAdaptor=(new b.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},_typeStringQuery:function(e,t,i,s,n){-1!=i.indexOf("'")&&(i=i.replace(new RegExp(/'/g),"''"));return/[ !@@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(i)&&(i=encodeURIComponent(i)),i="'"+i+"'",t&&(s="cast("+s+", 'Edm.String')"),b.isGUID(i)&&(n="guid"),e.ignoreCase&&(n||(s="tolower("+s+")"),i=i.toLowerCase()),{val:i,guid:n,field:s}},onPredicate:function(e,t,i){var s,n,a,r="",o=e.value,l=typeof o,d=this._p(e.field);if(o instanceof Date&&(o="datetime'"+x.replacer(o).toJSON()+"'"),"string"==l&&(o=(h=this._typeStringQuery(e,i,o,d,n)).val,d=h.field,n=h.guid),s=b.data.odBiOperator[e.operator],""!=e.anyCondition&&s)return r+=o.table,r+="/"+e.anyCondition,r+="(d:d/",r+=d,r+=s,r+=o.value,r+=")";if("in"!=e.operator&&"notin"!=e.operator)return s?this.onOperation(r,s,d,o,n):(s=b.data.odUniOperator[e.operator])&&"string"==l?("substringof"===s&&(l=o,o=d,d=l),r+=s+"(",r+=d+",",n&&(r+=n),r+=o+")","notcontains"==e.operator&&(r+=" eq false"),""!=e.anyCondition&&s?(a+=o.table,a+="/"+e.anyCondition,a+="(d:d/",r+=r,a+=")"):r):"";r+="(";for(var h,c=0;c<o.length;c++)o[c]instanceof Date&&(o[c]="datetime'"+x.replacer(o[c]).toJSON()+"'"),"string"==typeof o[c]&&(h=this._typeStringQuery(e,i,o[c],d,n),o[c]=h.val,d=h.field,n=h.guid),r+=d,r+=s,r+=o[c],c!=o.length-1&&(r+="in"==e.operator?" or ":" and ");return r+=")"},onOperation:function(e,t,i,s,n){return e+=i,e+=t,n&&(e+=n),e+s},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){0===e.fields.length&&B("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.searches||[],i=0;i<e.fields.length;i++)t.push(new b.Predicate(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.searches=t},onSearch:function(e){return this.pvt.searches=b.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)t.push(this._p(e.name[i]));else t.push(this._p(e.name)+("descending"===e.direction?" desc":""));return t.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",s),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(e,t,i,s,n,a){if(!b.isNullOrUndefined(e.d)){var r=i&&i._requiresCount?e.d.results:e.d;if(!b.isNullOrUndefined(r))for(var o=0;o<r.length;o++)b.isNullOrUndefined(r[o].__metadata)||delete r[o].__metadata}var l=n&&n.ejPvtData;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];if(n&&this.options.batch&&n.url.endsWith(this.options.batch)&&"post"===n.type.toLowerCase()){var d,h,c=(c=s.getResponseHeader("Content-Type")).substring(c.indexOf("=batchresponse")+1);if((e=e.split(c)).length<2)return;e=e[1];var u=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(e);e.replace(u[0],"");for(c=u[1],o=(e=e.split(c)).length;-1<o;o--)/\bContent-ID:/i.test(e[o])&&/\bHTTP.+201/.test(e[o])&&(d=parseInt(/\bContent-ID: (\d+)/i.exec(e[o])[1]),a.added[d]&&(h=x.parseJson(/^\{.+\}/m.exec(e[o])[0]),v.extend(a.added[d],this.processResponse(h))));return a}u=null,c={},s=(s=s&&s.getResponseHeader("DataServiceVersion"))&&parseInt(s,10)||2;if(i&&i._requiresCount&&((e.__count||e["odata.count"])&&(u=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(u=e.__count||e["odata.count"])),3===s&&e.value&&(e=e.value),e.d&&(e=e.d),s<3&&e.results&&(e=e.results),l&&l.aggregates&&l.aggregates.length){for(var p,m=l.aggregates,g={},o=0;o<m.length;o++)(p=b.aggregates[m[o].type])&&(g[m[o].field+" - "+m[o].type]=p(e,m[o].field));c=g}if(l&&l.groups&&l.groups.length)for(var f=l.groups,o=0;o<f.length;o++){var _=D(f[o],i.queries);e=b.group(e,f[o],l.aggregates,_)}return V(u)?e:{result:e,count:u,aggregates:c}},convertToQueryString:function(e,t,i){var s,n=[],a=e.table||"";for(s in delete e.table,i.dataSource.requiresFormat&&(e.$format="json"),e)n.push(s+"="+e[s]);return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!a?n:n.length?a+"?"+n:a||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,t,i,s){return"string"==typeof i?{type:"DELETE",url:b.isGUID(i)?e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")":e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"('"+i+"')"}:{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")"}},update:function(e,t,i,s){t="string"!=typeof i[t]||b.isGUID(i[t])?e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i[t]+")":e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"('"+i[t]+"')";return{type:"PUT",url:t,data:JSON.stringify(i),accept:this.options.accept}},batchRequest:function(e,t,i){var s=i.guid=b.getGuid(l),n=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),e={url:i.url,key:i.key,cid:1,cSet:b.getGuid(o)},i="--"+s+"\n";return i+="Content-Type: multipart/mixed; boundary="+e.cSet.replace("--","")+"\n",this.pvt.changeSet=0,i+=this.generateInsertRequest(t.added,e),i+=this.generateUpdateRequest(t.changed,e),i+=this.generateDeleteRequest(t.deleted,e),i+=e.cSet+"--\n",{type:"POST",url:n,contentType:"multipart/mixed; charset=UTF-8;boundary="+s,data:i+="--"+s+"--"}},generateDeleteRequest:function(e,t){if(!e)return"";for(var i,s="",n=0;n<e.length;n++)s+="\n"+t.cSet+"\n",s+=d+"\n\n",s+="DELETE ",i="string"==typeof e[n][t.key]?"'"+e[n][t.key]+"'":e[n][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+a+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=h+"\n";return s+"\n"},generateInsertRequest:function(e,t){if(!e)return"";for(var i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=d+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+a+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=h+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){if(!e)return"";for(var i,s="",n=0;n<e.length;n++)s+="\n"+t.cSet+"\n",s+=d+"\n\n",s+="PUT ",i="string"==typeof e[n][t.key]?"'"+e[n][t.key]+"'":e[n][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+a+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=h+"\n\n",s+=JSON.stringify(e[n])+"\n\n";return s},_p:function(e){return e.replace(/\./g,"/")}}),b.ODataV4Adaptor=(new b.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,t,i){var s="",n=e.value instanceof Date;return b.data.odUniOperator.contains="contains",s=b.ODataAdaptor.prototype.onPredicate.call(this,e,t,i),b.data.odUniOperator.contains="substringof",n&&(s=s.replace(/datetime'(.*)'$/,"$1")),s},onOperation:function(e,t,i,s,n){return n?(e+="("+i,e+=t,e+=s.replace(/["']/g,"")+")"):(e+=i,e+=t,e+=s),e},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(e){return this.pvt.search.join(" OR ")},beforeSend:function(e,t,i){},processQuery:function(e,t){for(var i=/\/[\d*\/]*/g,s="",n=t._expands.length-1;0<n;n--)if(0<=s.indexOf(t._expands[n]))t._expands.pop();else if(i.test(t._expands[n])){for(var a=(s=t._expands.pop()).replace(i,"($expand="),r=0;r<s.split(i).length-1;r++)a+=")";t._expands.unshift(a),n++}return b.ODataAdaptor.prototype.processQuery.apply(this,[e,t])},processResponse:function(e,t,i,s,n,a){var r=n&&n.ejPvtData;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];if(n&&this.options.batch&&n.url.endsWith(this.options.batch)&&"post"===n.type.toLowerCase()){var o,l,d=(d=s.getResponseHeader("Content-Type")).substring(d.indexOf("=batchresponse")+1);if((e=e.split(d)).length<2)return;e=e[1];var h=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(e);e.replace(h[0],"");for(var d=h[1],c=(e=e.split(d)).length;-1<c;c--)/\bContent-ID:/i.test(e[c])&&/\bHTTP.+201/.test(e[c])&&(o=parseInt(/\bContent-ID: (\d+)/i.exec(e[c])[1]),a.added[o]&&(l=x.parseJson(/^\{.+\}/m.exec(e[c])[0]),v.extend(a.added[o],this.processResponse(l))));return a}h=null,d={};if(i&&i._requiresCount&&"@odata.count"in e&&(h=e["@odata.count"]),e=b.isNullOrUndefined(e.value)?e:e.value,r&&r.aggregates&&r.aggregates.length){for(var u,p=r.aggregates,m={},c=0;c<p.length;c++)(u=b.aggregates[p[c].type])&&(m[p[c].field+" - "+p[c].type]=u(e,p[c].field));d=m}if(r&&r.groups&&r.groups.length)for(var g=r.groups,c=0;c<g.length;c++){var f=D(g[c],i.queries);e=b.group(e,g[c],r.aggregates,f)}return V(h)?e:{result:e,count:h,aggregates:d}}}),b.JsonAdaptor=(new b.Adaptor).extend({processQuery:function(e,t){for(var i,s,n=e.dataSource.json.slice(0),a=n.length,r=!0,o={},l=0;l<t.queries.length;l++)i=this[(s=t.queries[l]).fn].call(this,n,s.e,t),"onAggregates"==s.fn?o[s.e.field+" - "+s.e.type]=i:n=i!==g?i:n,"onPage"!==s.fn&&"onSkip"!==s.fn&&"onTake"!==s.fn&&"onRange"!==s.fn||(r=!1),r&&(a=n.length);return t._requiresCount&&(n={result:n,count:a,aggregates:o}),n},batchRequest:function(e,t,i){for(var s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e&&e.filter(function(e){return t.validate(e)})},onAggregates:function(e,t){var i=b.aggregates[t.type];return e&&i&&0!=e.length?i(e,t.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&b.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var t=0;t<i.fieldNames.length;t++)if(i.comparer.call(e,b.pvt.getObject(i.fieldNames[t],e),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},onSortBy:function(e,t,i){if(!e)return e;var s,n=S(t.fieldName,i);if(!n)return e.sort(t.comparer);if(n instanceof Array){for(var a=(n=n.slice(0)).length-1;0<=a;a--)n[a]&&(s=t.comparer,n[a].endsWith(" desc")&&(s=b.pvt.fnSort(b.sortOrder.Descending),n[a]=n[a].replace(" desc","")),e=O(e,n[a],s,[]));return e}return O(e,n,t.comparer,i?i.queries:[])},onGroup:function(e,t,i){if(!e)return e;var s=y(i.queries,"onAggregates"),n=[];if(s.length)for(var a,r=0;r<s.length;r++)a=s[r].e,n.push({type:a.type,field:S(a.field,i)});var o=D(t.fieldName,i.queries);return b.group(e,S(t.fieldName,i),n,o)},onPage:function(e,t,i){var s=S(t.pageSize,i),i=(S(t.pageIndex,i)-1)*s,s=i+s;return e&&e.slice(i,s)},onRange:function(e,t){return e&&e.slice(S(t.start),S(t.end))},onTake:function(e,t){return e&&e.slice(0,S(t.nos))},onSkip:function(e,t){return e&&e.slice(S(t.nos))},onSelect:function(e,t){return e&&b.select(e,S(t.fieldNames))},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,t,i,s){var n,a=e.dataSource.json;for("object"==typeof i&&(i=b.getObject(t,i)),n=0;n<a.length&&b.getObject(t,a[n])!==i;n++);return n!==a.length?a.splice(n,1):null},update:function(e,t,i,s){for(var n=e.dataSource.json,a=b.getObject(t,i),r=0;r<n.length&&b.getObject(t,n[r])!==a;r++);return r<n.length?v.extend(n[r],i):null}}),b.ForeignKeyAdaptor=function(i,s){var e=(new b[s||"JsonAdaptor"]).extend({init:function(){this.foreignData=[],this.key=[],this.adaptorType=s,this.value=[],this.fValue=[],this.keyField=[];for(var e=i,t=0;t<e.length;t++)this.foreignData[t]=e[t].dataSource,this.key[t]=e[t].foreignKeyField,this.fValue[t]=b.isNullOrUndefined(e[t].field)?e[t].foreignKeyValue:e[t].field+"_"+e[t].foreignKeyValue,this.value[t]=e[t].foreignKeyValue,this.keyField[t]=e[t].field||e[t].foreignKeyField,this.initial=!0},processQuery:function(e,t){var i=e.dataSource.json;if(this.initial){for(var s=0;s<i.length;s++)for(var n=this,a=0;a<this.foreignData.length;a++)this.foreignData[a].filter(function(e){b.getObject(n.key[a],e)==b.getObject(n.keyField[a],i[s])&&(i[s][n.fValue[a]]=b.getObject(n.value[a],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,t])},setValue:function(e){for(var t=0;t<this.foreignData.length;t++){var i=this,s=e[this.fValue[t]];"string"!=typeof s||isNaN(s)||(s=b.parseFloat(s));var n=v.grep(i.foreignData[t],function(e){return e[i.value[t]]==s})[0];b.isNullOrUndefined(n)&&(n=v.grep(i.foreignData[t],function(e){return e[i.key[t]]==s})[0],b.getObject(this.value[t],n)!=g&&b.createObject(i.value[t],b.getObject(this.value[t],n),e)),b.getObject(this.value[t],n)!=g&&b.createObject(this.keyField[t],b.getObject(this.key[t],n),e)}},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}},update:function(e,t,i,s){return this.setValue(i),b.JsonAdaptor.prototype.update(e,t,i,s),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}}});return v.extend(this,new e),this},b.remoteSaveAdaptor=(new b.JsonAdaptor).extend({beforeSend:b.UrlAdaptor.prototype.beforeSend,insert:b.UrlAdaptor.prototype.insert,update:b.UrlAdaptor.prototype.update,remove:b.UrlAdaptor.prototype.remove,addParams:b.UrlAdaptor.prototype.addParams,batchRequest:function(e,t,i,s){i={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i)}},processResponse:function(e,t,i,s,n,a,r){if(b.isNullOrUndefined(a))return e.d||e;var o;for(e.d&&(e=e.d),e.added&&(a.added=b.parseJSON(e.added)),e.changed&&(a.changed=b.parseJSON(e.changed)),e.deleted&&(a.deleted=b.parseJSON(e.deleted)),o=0;o<a.added.length;o++)b.JsonAdaptor.prototype.insert(t,a.added[o]);for(o=0;o<a.changed.length;o++)b.JsonAdaptor.prototype.update(t,r,a.changed[o]);for(o=0;o<a.deleted.length;o++)b.JsonAdaptor.prototype.remove(t,r,a.deleted[o]);return e}}),b.WebApiAdaptor=(new b.ODataAdaptor).extend({insert:function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},batchRequest:function(i,e,s){var n=s.guid=b.getGuid(l),a=[];return v.each(e.added,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("POST "+i.dataSource.insertUrl+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),v.each(e.changed,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("PUT "+i.dataSource.updateUrl+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),v.each(e.deleted,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("DELETE "+i.dataSource.removeUrl+"/"+t[s.key]+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),a.push("--"+n+"--",""),{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,data:a.join("\r\n"),contentType:'multipart/mixed; boundary="'+n+'"'}},processResponse:function(e,t,i,s,n,a){var r=n&&n.ejPvtData;if(n&&"post"!=n.type.toLowerCase()){var o=null,n={},s=(s=s&&s.getResponseHeader("DataServiceVersion"))&&parseInt(s,10)||2;if(i&&i._requiresCount&&(V(e.Count)||(o=e.Count)),s<3&&e.Items&&(e=e.Items),r&&r.aggregates&&r.aggregates.length){for(var l,d=r.aggregates,h={},c=0;c<d.length;c++)(l=b.aggregates[d[c].type])&&(h[d[c].field+" - "+d[c].type]=l(e,d[c].field));n=h}if(r&&r.groups&&r.groups.length)for(var u=r.groups,c=0;c<u.length;c++){var p=D(u[c],i.queries);e=b.group(e,u[c],r.aggregates,p)}return V(o)?e:{result:e,count:o,aggregates:n}}}});var S=function(e,t){return"function"==typeof e?e.call(t||{}):e};b.TableModel=function(e,t,i,s){if(!E(this,b.TableModel))return new b.TableModel(t);E(t,Array)||B("ej.TableModel - Json Array is required");for(var n,a=[],r=z(m,this),o=0;o<t.length;o++)(n=new b.Model(t[o],this)).state="unchanged",n.on("stateChange",r),s&&n.computes(s),a.push(n);return this.name=e||"table1",this.rows=b.NotifierArray(a),this._deleted=[],this._events=v({}),this.dataManager=i,this._isDirty=!1,this},b.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){var e;this.dataManager&&E(this.dataManager,b.DataManager)||B("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()&&((e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name)).done(z(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(z(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1)},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){e=new b.Model(e);e._isDirty=this._isDirty=!0,this.rows.push(e),this._events.triggerHandler({type:"insert",model:e,table:this})},update:function(e){this.key||B("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=e,s=this.key,n=i[s],a=this.rows.array.filter(function(e){return e.get(s)===n});for(t in a=a[0],i)a.set(t,i[t]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:a,table:this})},remove:function(e){this.key||B("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=this.key,s=-1;e&&"object"==typeof e&&(e=e[i]!==g?e[i]:e.get(i));for(var n=0;n<this.rows.length();n++)if(this.rows.array[n].get(i)===e){s=n;break}-1<s&&((t=this.rows.removeAt(s)).markDelete(),this._deleted.push({model:t,position:s}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:t,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},t=this.toArray(),i=0;i<t.length;i++)e[t[i].state]&&e[t[i].state].push(t[i].json);return e.deleted=b.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(e){var t,i=c,s=v(e.html()),n=this.toArray();v.inArray(e.prop("tagName").toLowerCase(),["table","tbody"])&&(i=u),i.insertBefore(e),e.detach().empty();for(var a=0;a<n.length;a++)t=s.clone(),n[a].bindTo(t),e.append(t);e.insertAfter(i),i.remove()}};var c=e?v(document.createElement("div")):{},u=e?v(document.createElement("tr")):{};b.Model=function(e,t,i){"string"==typeof t&&(i=t,t=null),this.$id=F("m"),this.json=e,this.table=t instanceof b.TableModel?t:null,this.name=i||this.table&&this.table.name,this.dataManager=t instanceof b.DataManager?t:t.dataManagar,this.actual={},this._events=v({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},b.Model.prototype={computes:function(e){v.extend(this.computed,e)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,s=this.json,n=e;e=e.split(".");for(var a=0;a<e.length-1;a++)s=s[(e=e[0])[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=s[e],this.actual[e]!==g||e in this.actual||(this.actual[e]=t),s[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:n,current:t,previous:i,model:this})},get:function(e){return b.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(e,t){return e=e||this.dataManagar,t=t||e.dataSource.key,e||B("ej.Model - DataManager is required to commit the changes"),"added"===this.state?e.insert(this.json,this.name).done(b.proxy(function(e){v.extend(this.json,e.record)},this)):"changed"===this.state?e.update(t,this.json,this.name):"deleted"===this.state?e.remove(t,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(e,t){if(this.state!==e){if("added"===this.state){if("deleted"!==e)return;e="unchanged"}var i=e;t=t||{},this.state=e,this._events.triggerHandler(v.extend({type:"stateChange",current:e,previous:i,model:this},t))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(e){var t,i,e=v(e),s=e.find("[ej-observe], [ej-computed], [ej-prop]"),n=s.length;e.data("ejModel",this);for(var a={fields:[],props:[],computes:[]},r=0;r<n;r++)(i=(t=s.eq(r)).attr("ej-prop"))&&this._processAttrib(i,t,a),(i=t.attr("ej-observe"))&&-1!==this._props.indexOf(i)?this._processField(t,i,a):(i=t.attr("ej-computed"))&&this._processComputed(i,t,a);e.data("ejModelBinding"+this.$id,a)},unbind:function(e){var t,i,s={props:this._attrEls,computes:this._computeEls},n=!1;for(i in e&&(s=v(e).removeData("ejModel").data("ejModelBinding"+this.$id)||s,n=!0),this.computed)t=s.computes[i],i=this.computed[i],t&&i.deps&&(this.off(i.deps.join(" "),t.handle),n&&delete this._computeEls[i]);for(i in n||(this._computeEls={}),s.props)(t=s.props[i])&&(this.off(t.deps.join(" "),t.handle),delete s.props[i],n&&delete this._attrEls[i]);if(n||(this._attrEls={}),s.fields&&s.fields.length)for(var a,r,o=s.fields.length,l=0;l<o;l++)a=s.fields[l],v(a).off("change",null,this._changeHandler),r=-1!==this.formElements.indexOf(a.tagName.toLowerCase())?"input":"read",-1!==(a=this._updates[r].indexOf(a))&&this._updates[r].splice(a,1)},_processComputed:function(e,t,i){var s,n,a;e&&(n=p(e),a=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html",this.computed[e]&&this.computed[n]||(this.computed[n]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=n),(s=this.computed[e]).get||(s.get=function(){s.value.call(this.json)}),n=s.deps,s=s.value,this._updateDeps(n),this._updateElement(t,a,s),s={el:t,handle:z(this._computeHandle,this,{value:e,type:a})},this._computeEls[e]=s,i.computes[e]=s,this.on(n.join(" "),s.handle))},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(e,t,i){e[t](i.call(v.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var t=0;t<e.length;t++)!(e[t]in this.json)&&e[t]in this.computed&&b.merge(e,this.computed[e[t]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],n=0;n<i.length;n++)i[n].startsWith("#ej.#")&&(t=i[n].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t);return s},_processAttrib:function(e,t,i){var s,n,a={};e=e.replace(/^ +| +$/g,"").split(";");for(var r=0;r<e.length;r++)e[r]=e[r].split(":"),e[r].length<2||(a[s=e[r][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,"")]=e[r][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));var o=[];for(s in e=a)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),a=F("emak"),n={el:t,handle:z(this._attrHandle,this,a),value:e,deps:o},t.prop("ejmodelattrkey",a),i.props[a]=n,this._attrEls[a]=n,this.on(o.join(" "),n.handle)},_attrHandle:function(e){e=this._attrEls[e];e&&this._updateProps(e.el,e.value)},_updateProps:function(e,t){var i,s,n=this.json,a=this.computed;for(s in t)(i=t[s])in n?i=n[i]:i in a&&(i=(i=a[i])&&i.value.call(v.extend({},this.json,a))),V(i)||e.prop(s,i)},_updateValues:function(e,t){e=this._updates[e];e&&(e.read||e.input)&&(this._ensureItems(e.read,"html",t),this._ensureItems(e.input,"val",t))},_ensureItems:function(e,t,i){if(e)for(var s=e.length-1;-1<s;s--)e[s].offsetParent?v(e[s])[t](i):e.splice(s,1)},_changeHandler:function(e){e.data.self.set(e.data.prop,v(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},n=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(n),this._updates[t].read.push(e[0])):(e.val(n).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var t=/[^\w]+/g,p=function(e){return e.replace(t,"_")},m=function(e){this.setDirty(!0,e.model)};b.Predicate=function(e,t,i,s,n){return this instanceof b.Predicate?(this.ignoreAccent=!1,"string"==typeof e?(a="",-1!=t.toLowerCase().indexOf(" any")?(t=t.replace(" any",""),a="any"):-1!=t.toLowerCase().indexOf(" all")&&(t=t.replace(" all",""),a="all"),this.field=e,this.operator=t,this.value=i,this.ignoreCase=s,this.ignoreAccent=n,this.isComplex=!1,this.anyCondition=a,this._comparer=b.data.fnOperators.processOperator(""!=a?a:this.operator)):(e instanceof b.Predicate&&i instanceof b.Predicate||i instanceof Array)&&(this.isComplex=!0,this.condition=t.toLowerCase(),this.predicates=[e],i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this):new b.Predicate(e,t,i,s,n);var a},b.Predicate.and=function(){return R._combinePredicates([].slice.call(arguments,0),"and")},b.Predicate.or=function(){return R._combinePredicates([].slice.call(arguments,0),"or")},b.Predicate.fromJSON=function(e){if(E(e,Array)){for(var t=[],i=0,s=e.length;i<s;i++)t.push(R._fromJSON(e[i]));return t}return R._fromJSON(e)};var n,f,_,T,R={_combinePredicates:function(e,t){if(!e.length)return g;if(1===e.length){if(!E(e[0],Array))return e[0];e=e[0]}return new b.Predicate(e[0],t,e.slice(1))},_combine:function(e,t,i,s,n,a,r){return t instanceof b.Predicate?b.Predicate[n](e,t):"string"==typeof t?b.Predicate[n](e,new b.Predicate(t,i,s,a,r)):B("Predicate - "+n+" : invalid arguments")},_fromJSON:function(e){if(!e||E(e,b.Predicate))return e;for(var t=e.predicates||[],i=t.length,s=[],n=0;n<i;n++)s.push(R._fromJSON(t[n]));return e.isComplex?new b.Predicate(s[0],e.condition,s.slice(1)):new b.Predicate(e.field,e.operator,b.parseJSON({val:e.value}).val,e.ignoreCase,e.ignoreAccent)}};b.Predicate.prototype={and:function(e,t,i,s,n){return R._combine(this,e,t,i,"and",s,n)},or:function(e,t,i,s,n){return R._combine(this,e,t,i,"or",s,n)},validate:function(e){var t,i,s=this.predicates;if(!this.isComplex)return this._comparer.call(this,b.pvt.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var n=0;n<s.length;n++)if(i=s[n].validate(e),t){if(!i)return!1}else if(i)return!0;return t},toJSON:function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJSON())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,anyCondition:this.anyCondition}}},b.dataUtil={swap:function(e,t,i){var s;t!=i&&(s=e[t],e[t]=e[i],e[i]=s)},mergeSort:function(e,t,i){return i&&"string"!=typeof i||(i=b.pvt.fnSort(i,!0)),"function"==typeof t&&(i=t,t=null),b.pvt.mergeSort(e,t,i)},max:function(e,t,i){return"function"==typeof t&&(i=t,t=null),b.pvt.getItemFromComparer(e,t,i||b.pvt.fnDescending)},min:function(e,t,i){return"function"==typeof t&&(i=t,t=null),b.pvt.getItemFromComparer(e,t,i||b.pvt.fnAscending)},distinct:function(e,t,i){for(var s,n=[],a={},r=0;r<e.length;r++)(s=L(e,t,r))in a||(n.push(i?e[r]:s),a[s]=1);return n},sum:function(e,t){for(var i,s=0,n="number"!=typeof L(e,t,0),a=0;a<e.length;a++)i=L(e,t,a),isNaN(i)||null===i||(n&&(i=+i),s+=i);return s},avg:function(e,t){return b.sum(e,t)/e.length},select:function(e,t){for(var i=[],s=0;s<e.length;s++)i.push(b.pvt.extractFields(e[s],t));return i},group:function(t,e,i,s,n,a){if(n=n||1,t.GROUPGUID==b.pvt.consts.GROUPGUID){for(var r,o=0;o<t.length;o++)b.isNullOrUndefined(a)?(t[o].items=b.group(t[o].items,e,i,s,t.level+1),t[o].count=t[o].items.length):(r=-1,m=v.grep(a,function(e){return e.key==t[o].key}),r=a.indexOf(m[0]),t[o].items=b.group(t[o].items,e,i,s,t.level+1,a[r].items),t[o].count=a[r].count);return t.childLevels+=1,t}var l={},d=[];d.GROUPGUID=b.pvt.consts.GROUPGUID,d.level=n,d.childLevels=0,d.records=t;for(var h=0;h<t.length;h++){var c,u=L(t,e,h);b.isNullOrUndefined(s)||(u=s(u,e)),l[u]||(l[u]={key:u,count:0,items:[],aggregates:{},field:e},d.push(l[u]),b.isNullOrUndefined(a)||(c=v.grep(a,function(e){return e.key==l[u].key}),l[u].count=c[0].count)),l[u].count=b.isNullOrUndefined(a)?l[u].count+=1:l[u].count,l[u].items.push(t[h])}if(i&&i.length)for(h=0;h<d.length;h++){for(var p={},o=0;o<i.length;o++){var m,g=b.aggregates[i[o].type];b.isNullOrUndefined(a)?g&&(p[i[o].field+" - "+i[o].type]=g(d[h].items,i[o].field)):(m=v.grep(a,function(e){return e.key==d[h].key}),g&&(p[i[o].field+" - "+i[o].type]=g(m[0].items,i[o].field)))}d[h].aggregates=p}return d},parseTable:function(e,t,i){var s,n=e.rows,a=[],r=[];if(!n.length)return[];switch(i=i||0,(t||"").toLowerCase()){case b.headerOption.tHead:s=e.tHead.rows[i];break;case b.headerOption.row:default:s=e.rows[i]}for(var o=s.cells,l=0;l<o.length;l++)a.push(v.trim(o[l].innerHTML));for(l=i+1;l<n.length;l++){for(var d={},h=n[l].cells,c=0;c<h.length;c++){var u=h[c].innerHTML;"string"==typeof u&&v.isNumeric(u)?d[a[c]]=Number(u):d[a[c]]=u}r.push(d)}return r}},b.headerOption={tHead:"thead",row:"row"},b.aggregates={sum:function(e,t){return b.sum(e,t)},average:function(e,t){return b.avg(e,t)},minimum:function(e,t){return b.getObject(t,b.min(e,t))},maximum:function(e,t){return b.getObject(t,b.max(e,t))},truecount:function(e,t){t=b.Predicate(t,"equal",!0);return b.DataManager(e).executeLocal(b.Query().where(t)).length},falsecount:function(e,t){t=b.Predicate(t,"equal",!1);return b.DataManager(e).executeLocal(b.Query().where(t)).length},count:function(e,t){return e.length}},b.pvt={filterQueries:y,mergeSort:function(e,t,i){if(e.length<=1)return e;var s=parseInt(e.length/2,10),n=e.slice(0,s),s=e.slice(s),n=b.pvt.mergeSort(n,t,i),s=b.pvt.mergeSort(s,t,i);return b.pvt.merge(n,s,t,i)},getItemFromComparer:function(e,t,i){var s,n,a,r=0,o="string"==typeof L(e,t,0);if(e.length)for(;b.isNullOrUndefined(s)&&r<e.length;)s=L(e,t,r),a=e[r++];for(;r<e.length;r++)n=L(e,t,r),b.isNullOrUndefined(n)||(o&&(s=+s,n=+n),0<i(s,n)&&(s=n,a=e[r]));return a},quickSelect:function(e,t,i,s,n,a){if(i==s)return e[i];var r=b.pvt.partition(e,t,i,s,a),o=r-i+1;return o==n?e[r]:n<o?b.pvt.quickSelect(e,t,i,r-1,n,a):b.pvt.quickSelect(e,t,r+1,s,n-o,a)},extractFields:function(e,t){var i={};if(1==t.length)return b.pvt.getObject(t[0],e);for(var s=0;s<t.length;s++)i[t[s].replace(".",b.pvt.consts.complexPropertyMerge)]=b.pvt.getObject(t[s],e);return i},partition:function(e,t,i,s,n){var a=parseInt((i+s)/2,10),r=L(e,t,a);b.swap(e,a,s);for(var o=a=i;o<s;o++)n(L(e,t,o),r)&&(b.swap(e,o,a),a++);return b.swap(e,a,s),a},fnSort:function(e){return(e=e?e.toLowerCase():b.sortOrder.Ascending)==b.sortOrder.Ascending?b.pvt.fnAscending:b.pvt.fnDescending},fnGetComparer:function(i,s){return function(e,t){return s(b.pvt.getObject(i,e),b.pvt.getObject(i,t))}},fnAscending:function(e,t){return b.isNullOrUndefined(t)&&b.isNullOrUndefined(e)||null===t||t===g?-1:"string"==typeof e?e.localeCompare(t):null===e||e===g?1:e-t},fnDescending:function(e,t){return b.isNullOrUndefined(t)&&b.isNullOrUndefined(e)?-1:null===t||t===g?1:"string"==typeof e?-1*e.localeCompare(t):null===e||e===g?-1:t-e},merge:function(e,t,i,s){for(var n,a=[];0<e.length||0<t.length;)n=0<e.length&&0<t.length?s?s(L(e,i,0),L(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:0<e.length?e:t,a.push(n.shift());return a},getObject:function(e,t){if(!t)return g;if(!e)return t;if(-1===e.indexOf("."))return t[e];for(var i=t,s=e.split("."),n=0;n<s.length&&null!=i;n++)i=i[s[n]];return i},createObject:function(e,t,i){for(var s=e.split("."),i=i||window,n=i,a=0;a<s.length;a++)a+1==s.length?n[s[a]]=t===g?{}:t:null==n[s[a]]&&(n[s[a]]={}),n=n[s[a]];return i},ignoreDiacritics:function(e){return"string"!=typeof e?e:e.split("").map(function(e){return e in b.data.diacritics?b.data.diacritics[e]:e}).join("")},getFieldList:function(e,t,i){if(i===g&&(i=""),t===g||null===t)return b.pvt.getFieldList(e,[],i);for(var s in e)"object"!=typeof e[s]||e[s]instanceof Array?t.push(i+s):b.pvt.getFieldList(e[s],t,i+s+".");return t}},b.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},b.data={},b.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},b.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne ",in:" eq ",notin:" ne "},b.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",notcontains:"substringof"},b.data.diacritics={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"},b.data.fnOperators={equal:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?j(e)==j(t):e==t},notequal:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),!b.data.fnOperators.equal(e,t,i)},notin:function(e,t,i){for(var s=0;s<t.length;s++)if(0==b.data.fnOperators.notequal(e,t[s],i))return!1;return!0},lessthan:function(e,t,i){return i?j(e)<j(t):e<t},greaterthan:function(e,t,i){return i?j(e)>j(t):t<e},lessthanorequal:function(e,t,i){return i?j(e)<=j(t):e<=t},greaterthanorequal:function(e,t,i){return i?j(e)>=j(t):t<=e},contains:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?!V(e)&&!V(t)&&-1!=j(e).indexOf(j(t)):!V(e)&&!V(t)&&-1!=e.toString().indexOf(t)},notcontains:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),!b.data.fnOperators.contains(e,t,i)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?e&&t&&j(e).startsWith(j(t)):e&&t&&e.startsWith(t)},endswith:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?e&&t&&j(e).endsWith(j(t)):e&&t&&e.endsWith(t)},all:function(e,t,i){for(var s=0;s<t.length;s++)if(0==b.data.fnOperators[this.operator](e,t[s],i))return!1;return!0},any:function(e,t,i){for(var s=0;s<t.length;s++)if(1==b.data.fnOperators[this.operator](e,t[s],i))return!0;return!1},processSymbols:function(e){e=b.data.operatorSymbols[e];if(e){e=b.data.fnOperators[e];if(e)return e}return B("Query - Process Operator : Invalid operator")},processOperator:function(e){var t=b.data.fnOperators[e];return t||b.data.fnOperators.processSymbols(e)}},b.data.fnOperators.in=function(e,t,i){for(var s=0;s<t.length;s++)if(1==b.data.fnOperators.equal(e,t[s],i))return!0;return!1},b.NotifierArray=function(e){return E(this,b.NotifierArray)?(this.array=e,this._events=v({}),this._isDirty=!1,this):new b.NotifierArray(e)},b.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t=E(e,Array)?[].push.apply(this.array,e):this.array.push(e);return this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return-1<t&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(e,t){this._events.triggerHandler(v.extend({type:e},t)),this._events.triggerHandler({type:"all",name:e,args:t})},toArray:function(){return this.array}},v.extend(b,b.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},Array.prototype.filter=Array.prototype.filter||function(e){if("function"!=typeof e)throw new TypeError;for(var t=[],i=arguments[1]||this,s=0;s<this.length;s++){var n=this[s];e.call(i,n,s,this)&&t.push(n)}return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},b.support||(b.support={}),b.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),b.support.cors=v.support.cors,!v.support.cors&&window.XDomainRequest&&(n=/^https?:\/\//i,f=/^get|post$/i,_=new RegExp("^"+location.protocol,"i"),T=/\/xml/i,v.ajaxTransport("text html xml json",function(t,i,e){if(t.crossDomain&&t.async&&f.test(t.type)&&n.test(i.url)&&_.test(i.url)){var a=null,r=(i.dataType||"").toLowerCase();return{send:function(e,n){a=new XDomainRequest,/^\d+$/.test(i.timeout)&&(a.timeout=i.timeout),a.ontimeout=function(){n(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,t={code:200,message:"success"},i={text:a.responseText};try{if("json"===r)try{i.json=JSON.parse(a.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===r||"text"!==r&&T.test(a.contentType)){var s=new ActiveXObject("Microsoft.XMLDOM");s.async=!1;try{s.loadXML(a.responseText)}catch(e){s=g}if(!s||!s.documentElement||s.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+a.responseText;i.xml=s}}catch(e){throw e}finally{n(t.code,t.message,i,e)}},a.onerror=function(){n(500,"error",{text:a.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(a.onprogress=function(){}),a.open(t.type,t.url),a.send(i.data)},abort:function(){a&&a.abort()}}}})),v.support.cors=!0,b.sortOrder={Ascending:"ascending",Descending:"descending"},b.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};var k=function(e,t){t&&(e=z(e,t)),(window.setImmediate||window.setTimeout)(e,0)};b.support.enableLocalizedSort=!1;var O=function(e,t,i,s){return b.support.stableSort?b.support.enableLocalizedSort||"string"!=typeof b.pvt.getObject(t,e[0]||{})||i!==b.pvt.fnAscending&&i!==b.pvt.fnDescending||1!==s.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(b.pvt.fnGetComparer(t,i)):I(e,t,i===b.pvt.fnDescending):b.mergeSort(e,t,i)},D=function(e,t){for(var i=v.grep(t,function(e){return"onGroup"==e.fn}),s=0;s<i.length;s++)if(b.getObject("fieldName",i[s].e)==e)return b.getObject("fn",i[s].e)},I=function(e,t,i){var s=Object.prototype.toString;Object.prototype.toString=-1===t.indexOf(".")?function(){return this[t]}:function(){return b.pvt.getObject(t,this)},e=e.sort(),Object.prototype.toString=s,i&&e.reverse()},j=function(e){return e?(e.toLowerCase?e:e.toString()).toLowerCase():0===e||!1===e?e.toString():""},L=function(e,t,i){return t?b.pvt.getObject(t,e[i]):e[i]},A=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},E=function(e,t){return e instanceof t},P=function(t,i,s,n){return function(e){return"object"==typeof e&&(n=e,e=null),new b.TableModel(e||t,i,s,n)}},M=function(o){return function(e,t){(t=t||window.ko)||B("Knockout is undefined");for(var i,s,n,a=[],r=0;r<o.length;r++){for(s in i={},o[r])s.startsWith("_")||(i[s]=t.observable(o[r][s]));for(s in e)n=e[s],n=v.isPlainObject(n)?(n.owner||(n.owner=i),t.computed(n)):t.computed(n,i),i[s]=n;a.push(i)}return t.observableArray(a)}},i=0,F=function(e){return e+(i+=1)};b.getGuid=function(e){var s;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,t){var i;return s="crypto"in window&&"getRandomValues"in crypto?(i=new Uint8Array(1),window.crypto.getRandomValues(i),i[0]%16|0):16*Math.random()|0,"0123456789abcdef"[19===t?3&s|8:s]})};var N=function(t,i){return function(){var e=[].slice.call(arguments,0);return e.push(this),t.apply(i||this,e)}},z=function(t,i,s){return"bind"in t?s?t.bind(i,s):t.bind(i):function(){var e=s?[s]:[];return e.push.apply(e,arguments),t.apply(i||this,e)}};b.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)};var V=function(e){return e===g||null===e},B=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document),function(x,y){ej.globalize={},ej.cultures={},ej.cultures.default=ej.cultures["en-US"]=x.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,week:{name:"Week",nameAbbr:"Wek",nameShort:"Wk"},days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]),ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var t=/^\s+|\s+$/g,h=/^[+-]?infinity$/i,c=/^0x[a-f0-9]+$/i,u=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,A={9:"[0-9 ]",0:"[0-9 ]",a:"[A-Za-z0-9 ]",A:"[A-Za-z0-9]",N:"[0-9]","#":"[0-9]","&":"[^]+","<":"",">":"",C:"[A-Za-z ]","?":"[A-Za-z]"};function p(e,t,i){if(ej.isNullOrUndefined(e)||"string"==typeof e||!t)throw"Bad Number Format Exception";var s,n=t,a=function(e,t){var i=e||"",s=A,n=-1<(t=t.toString()).indexOf(".")||-1<e.indexOf("."),a=0,r=0,o="",l="",d=e.split(","),h="0",c=e.toLowerCase().indexOf("e"),u=i.indexOf("#");if(-1<e.indexOf("\\")&&(l=e.substr(0,e.lastIndexOf("\\")+1),u=(e=e.substr(e.lastIndexOf("\\")+1,e.length)).indexOf("#")),-1<c){for(var p="",i="",m=e.toLowerCase().split("e"),g=((-1<e.indexOf("+")?e.split("+"):e.split("-"))[1],(t=parseInt(t).toExponential()).split("e")),a=m[1].length-g[1].length,f=m[1].length-1;0<f;f--)"0"!=m[1][f]?i+=m[1][f]:1<a?(i+="#",a--):i+="0";i=(-1<e.indexOf("+")?"+":"")+i.split("").reverse().join("");for(f=0;f<g[0].length;f++)p="."!=g[0][f]?p.concat("#"):p.concat(".");p.length>m[0].length&&(p=m[0]),i=l+p+"e"+i}else if(n){if(m=e.split("."),g=t.split("."),m[1]=m[1].replace(/[,.]/g,""),(a=m[0].replace(/[,.]/g,"").length-g[0].replace(/[,.]/g,"").length)<0&&ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){d=m[0].split(","),o=m[0].split(",");for(var _=d.length-1;0<=_;_--)if(d[_])for(var v=d[_].length,f=0,b=Math.abs(a);f<b&&3!==v;f++)o[_]="0"+o[_],v++,a++;if(o=o.join(),a<0){ej.isNullOrUndefined(v)||3==v||(o=","+o);for(f=0,b=Math.abs(a);f<b;f++)3===v&&(o=","+o,v=0),o="0"+o,v++}a=0,i=l+o+"."+m[1]}else if(ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){for(var x="",v=0,y=(o=m[0].replace(/[,.]/g,"")).length-1;0<=y;y--)3===v?(x=","+x,v=0):v++,x=o[y]+x;i=l+x+"."+m[1]}}else{var w=0,C=d.splice(1,d.length);if(a=e.replace(/[,.\[\(\]\)]/g,"").length-t.replace(/[,.]/g,"").length,-1<u){for(var S=0,b=e.length;S<b;S++)"#"===e[S]&&w++;(1===w||d[1]&&2===w)&&(h="#"),1===w&&(C=d[0])}if(a<0){o=(m=i.split(",")).splice(1,m.length);for(_=d.length-1;0<=_;_--)if(C[_]){v=C[_].length;o[_]||(o[_]="");for(f=0,b=Math.abs(a)+1;f<b;f++){if(1!=w&&3===v){v=0;break}o[_]=o[_].concat(h),v++,a++}}if(o=o.join(),a<0){ej.isNullOrUndefined(v)||3==v||(o=","+o);for(f=0,b=Math.abs(a)+1;f<b;f++)1!=w&&3===v&&(o=","+o,v=0),o=h+o,v++}a=0,i=l+o}r=0}for(var T,R,k=[],O=i.split(""),D=0,y=0,I=!1,j=!1,L=e.indexOf("\\");y<i.length;y++)if("e"===(T=O[y])&&(j=!0),"0"===T&&u<0?0<a&&r<=y?(a--,r++):0<a?a--:R=s[T]:"0"==T&&(j||"0"!=T)||(R=s[T]),"0"===T&&-1<L&&(R=s[T]),y===i.lastIndexOf("\\")&&(I=!1),R&&!I)k[D]={rule:R},D+=1;else{"\\"===T&&(T="",y!==i.lastIndexOf("\\")&&(I=!0)),T=T.split("");for(_=0;_<T.length;_++)k[D]=T[_],D+=1}return{rules:s=k,format:i}}(t,e),r=a.rules;return 0<=(t=a.format).indexOf("\\")?(s=t.lastIndexOf("\\"),s=(t.slice(0,s)+t.slice(s+1,t.length).replace(/[9?CANa#&]/g,"_")).replace(/[\\]/g,""),t=t.replace(/[\\]/g,"")):s=t.replace(/[9?CANa#&]/g,"_"),function(e,t,i,s,n,a){if(ej.isNullOrUndefined(e))return;-1<t.toLowerCase().indexOf("e")&&((-1<a.indexOf("+")?a.split("+"):a.split("-"))[1],e=e.toExponential(),-1<a.indexOf("-")&&(e=e.replace("+","")));var r,o,l,d,h,c,u,p,m=r=o=e.toString(),g=i,f=l=0,a=t.match(/[\(\[\]\)]/g);m=0<=!t.indexOf("\\")?e=o.replace(/[\(\)-]/g,""):void 0;var _=s.length-1,v=r.length-1;if(ej.isNullOrUndefined(a)){for(;f<s.length&&(d=r[l],h=s[f],d!=y);)if(d===h||"_"===d||"e"===d&&d===h.toLowerCase()?(c=g.substring(0,f),u=g.substring(f),d=w(d,n),g=c+d+u.substr(1,u.length),l+=1,f+=1):s[f].rule!=y?(b=r.charCodeAt(l),C(t,b,f)?(c=g.substring(0,f),u=g.substring(f),p=S(r,l,f,t,i),g=c+p+u.substr(1,u.length),f++,l++):f++):("e"===h&&(l=r.indexOf("e")+1),f++),l>m.length||_<0)break}else for(;0<=_&&(d=r[v],h=s[_],d!=y);){var b;if(d===h||"_"===d||"e"===d&&d===h.toLowerCase()?(c=g.substring(0,_+1),u=g.substring(_+1),d=w(d,n),g=c.substr(0,c.length-1)+d+u,_--,v--):s[_].rule!=y?(b=r.charCodeAt(v),C(t,b,_)?(c=g.substring(0,_+1),u=g.substring(_+1),p=S(r,v,_,t,i),g=c.substr(0,c.length-1)+p+u,_--,v--):_--):_--,l>m.length||_<0)break}if(e)return g.indexOf("_")-g.indexOf(",")!=1&&g.indexOf("_")-g.indexOf(".")!=1||(g=g.slice(0,g.indexOf("_")-1)),""==x.trim(g.replace(/[_]/g,""))?null:g.replace(/[_]/g,"")}(e,t,s=w(s,i),r,i,n)}function w(e,t){if(0!=e.length){for(var t=ej.preferredCulture(t),i="",s=t.numberFormat[","],n=t.numberFormat.currency.symbol,a=t.numberFormat["."],r=0;r<e.length;r++)","==e[r]?i+=s:"."==e[r]?i+=a:"$"==e[r]?i+=n:i+=e[r];e=i}return e}function C(e,t,i){var s=A,n=!1,a=e.substr(i,1),r=String.fromCharCode(t);return x.each(s,function(e,t){a==e&&(n=!!r.match(new RegExp(t)))}),n}function S(e,t,i,s,n){var a=!1;return-1<s.indexOf(".")&&i===n.length-1&&5<e[t+1]&&(a=!0),a?(parseInt(e[t])+1).toString():e[t]}function E(e,t){return 0===e.indexOf(t)}function a(e,t){return e.substr(e.length-t.length)===t}function P(e){return(e+"").replace(t,"")}function m(e,t,i){for(var s=e.length;s<t;s++)e=i?"0"+e:e+"0";return e}function g(e,t,i){var s,n=t["-"],t=t["+"];switch(i){case"n -":n=" "+n,t=" "+t;case"n-":a(e,n)?s=["-",e.substr(0,e.length-n.length)]:a(e,t)&&(s=["+",e.substr(0,e.length-t.length)]);break;case"- n":n+=" ",t+=" ";case"-n":E(e,n)?s=["-",e.substr(n.length)]:E(e,t)&&(s=["+",e.substr(t.length)]);break;case"(n)":E(e,"(")&&a(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]}function s(e,t,i){if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var s,n=i.numberFormat,a=Math.abs(e),r=-1;1<t.length&&(r=parseInt(t.slice(1),10));var o,l,d=t.charAt(0).toUpperCase();switch(d){case"D":s="n",l=a,a=isNaN(l)?NaN:Math[l<0?"ceil":"floor"](l),-1!==r&&(a=m(""+a,r,!0)),e<0&&(a=-a);break;case"N":(o=n).pattern=o.pattern||["-n"];case"C":(o=o||n.currency).pattern=o.pattern||["-$n","$n"];case"P":(o=o||n.percent).pattern=o.pattern||["-n %","n %"],s=e<0?o.pattern[0]||"-n":o.pattern[1]||"n",-1===r&&(r=o.decimals),a=function(e,t,i){var s=i.groupSizes||[3],n=s[0],a=1,r=ej._round(e,t);isFinite(r)||(r=e);var o=(e=r)+"",l="",e=1<(r=o.split(/e/i)).length?parseInt(r[1],10):0;o=(r=(o=r[0]).split("."))[0],l=1<r.length?r[1]:"",0<e?(o+=(l=m(l,e,!1)).slice(0,e),l=l.substr(e)):e<0&&(l=(o=m(o,(e=-e)+1,!0)).slice(-e,o.length)+l,o=o.slice(0,-e));for(var e=i["."]||".",l=0<t?e+(l.length>t?l.slice(0,t):m(l,t)):"",d=o.length-1,h=i[","]||",",c="";0<=d;){if(0===n||d<n)return o.slice(0,d+1)+(c.length?h+c+l:l);c=o.slice(d-n+1,d+1)+(c.length?h+c:""),d-=n,a<s.length&&(n=s[a],a++)}return o.slice(0,d+1)+h+c+l}(a*("P"===d?100:1),r,o);break;default:return p(e,t,i)}return function(e,t,i){for(var s=/n|\$|-|%/g,n="";;){var a=s.lastIndex,r=s.exec(t);if(n+=t.slice(a,r?r.index:t.length),!r)break;switch(r[0]){case"n":n+=e;break;case"$":n+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(e)&&(n+=i["-"]||"-");break;case"%":n+=i.percent.symbol||"%"}}return n}(a,s,n)}function n(e,t,i){"string"==typeof i&&(t=i,i=10);var s,n,a,r,o=NaN,l=(t=ej.globalize.findCulture(t)).numberFormat,d=t.numberFormat.pattern[0];return-1<(e=e.replace(/ /g,"")).indexOf(t.numberFormat.currency.symbol)?(e=(e=e.replace(t.numberFormat.currency.symbol||"$","")).replace(t.numberFormat.currency["."]||".",t.numberFormat["."]||"."),d=P(t.numberFormat.currency.pattern[0].replace("$",""))):-1<e.indexOf(t.numberFormat.percent.symbol)&&(e=(e=e.replace(t.numberFormat.percent.symbol||"%","")).replace(t.numberFormat.percent["."]||".",t.numberFormat["."]||"."),d=P(t.numberFormat.percent.pattern[0].replace("%",""))),e=P(e),h.test(e)?o=parseFloat(e,"",i):c.test(e)?o=parseInt(e,16):(s=(n=g(e,l,d))[0],t=n[1],""===s&&"-n"!==l.pattern[0]&&(s=(n=g(e,l,"-n"))[0],t=n[1]),s=s||"+",(e=t.indexOf("e"))<0&&(e=t.indexOf("E")),n=e<0?(a=t,null):(a=t.substr(0,e),t.substr(e+1)),t=l["."]||".",a=(e=a.indexOf(t))<0?(r=a,null):(r=a.substr(0,e),a.substr(e+t.length)),e=l[","]||",",r=r.split(e).join(""),t=e.replace(/\u00A0/g," "),e!==t&&(r=r.split(t).join("")),r=s+r,null!==a&&(r+="."+a),null!==n&&(r+="e"+((d=g(n,l,d))[0]||"+")+d[1]),!i&&u.test(r)?o=parseFloat(r):i&&(o=parseInt(r,i))),o}var M={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"};function F(e,t,i){return e<t||i<e}function N(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function z(e){return e.split("Â ").join(" ").toUpperCase()}function V(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=z(e[i]);return t}function T(e,t){for(var i=0,s=!1,n=0,a=e.length;n<a;n++)var r=e.charAt(n),s="'"==r?(s?t.push("'"):i++,!1):"\\"==r?(s&&t.push("\\"),!s):(t.push(r),!1);return i}function R(e,t){t=t||"F";var i=e.patterns,e=t.length;if(1===e){if(!(i=i[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===e&&"%"===t.charAt(0)&&(t=t.charAt(1));return t}function d(e,t,i){e=P(e),t=P(t);var s=i.calendar,n=ej.globalize._getDateParseRegExp(s,t),a=new RegExp(n.regExp).exec(e);if(null===a)return null;for(var r,o,l,d,h,c,u,p,m,g,f=n.groups,_=null,v=null,b=null,x=0,y=0,w=0,C=0,S=null,T=!1,R=0,k=f.length;R<k;R++){var O=a[R+1];if(O){var D=f[R],I=D.length,j=parseInt(O,10);switch(D){case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:if(F(b=j,1,31))return null;break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:if(h=O,c=3===I,g=m=p=u=void 0,u=(D=s).months,p=D.monthsGenitive||D.months,m=D._upperMonths,g=D._upperMonthsGen,m||(D._upperMonths=m=[V(u.names),V(u.namesAbbr)],D._upperMonthsGen=g=[V(p.names),V(p.namesAbbr)]),h=z(h),(m=N(c?m[1]:m[0],h))<0&&(m=N(c?g[1]:g[0],h)),F(v=m,0,11))return null;break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:if(F(v=j-1,0,11))return null;break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:if(F(_=I<4?(o=s,l=j,d=void 0,d=new Date,l<100&&((o="string"==typeof(o=o.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(o,10):o)<(l+=(d=d.getFullYear())-d%100)&&(l-=100)),l):j,0,9999))return null;break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(12===(x=j)&&(x=0),F(x,0,11))return null;break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(F(x=j,0,23))return null;break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:if(F(y=j,0,59))return null;break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:if(F(w=j,0,59))return null;break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:if(!(T=s.PM&&(O===s.PM[0]||O===s.PM[1]||O===s.PM[2]))&&(!s.AM||O!==s.AM[0]&&O!==s.AM[1]&&O!==s.AM[2]))return null;break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:if(F(C=j*Math.pow(10,3-I),0,999))return null;break;case M.DAY_OF_WEEK_THREE_LETTER:b=function(o,i,e){if(!o)return null;for(var t,s,n,a=0,l=0,r=null,d=(i=i.split("")).length;a<d;a++)"d"===i[a]&&(t=function(e){for(var t=0;i[a]===e;)t++,a++;return 0<t&&--a,t}("d"),e._lowerDays||(e._lowerDays=function(e){var t,i={};for(t in e)i[t]=function(e){for(var t=0,i=e.length,s=[];t<i;t++)s[t]=(e[t]+"").toLowerCase();return s}(e[t]);return i}(e.days)),r=t<3?(s=2,n=n=void 0,n=new RegExp("^\\d{1,"+s+"}"),(n=o.substr(l,s).match(n))?(n=n[0],l+=n.length,parseInt(n,10)):null):function(e,t){for(var i,s,n,a=0,r=e.length;a<r;a++)if(s=(i=e[a]).length,n=o.substr(l,s),t&&(n=n.toLowerCase()),n==i)return l+=s,a+1;return null}(e._lowerDays[3==t?"namesAbbr":"names"],!0));return r}(e,t,s);break;case M.DAY_OF_WEEK_FULL_NAME:L=O,o=3===I,l=d=void 0,d=(I=s).days,(l=I._upperDays)||(I._upperDays=l=[V(d.names),V(d.namesAbbr),V(d.namesShort)]),L=z(L),o?-1===N(l[1],L)&&N(l[2],L):N(l[0],L);break;case M.TIME_ZONE_OFFSET_FULL:var L=O.split(/:/);if(2!==L.length)return null;if(F(r=parseInt(L[0],10),-12,13))return null;L=parseInt(L[1],10);if(F(L,0,59))return null;S=60*r+(E(O,"-")?-L:L);break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(F(r=j,-12,13))return null;S=60*r}}}var A=new Date,i=s.convert,n=i?i.fromGregorian(A)[0]:A.getFullYear();if(null===_&&(_=n),null===v&&(v=0),null===b&&(b=1),i){if(null===(A=i.toGregorian(_,v,b)))return null}else{if(A.setFullYear(_,v,b),A.getDate()!==b)return null;0}return T&&x<12&&(x+=12),A.setHours(x,y,w,C),null!==S&&(i=A.getMinutes()-(S+A.getTimezoneOffset()),A.setHours(A.getHours()+parseInt(i/60,10),i%60)),A}ej.globalize._getDateParseRegExp=function(e,t){var i=e._parseRegExp;if(i){var s=i[t];if(s)return s}else e._parseRegExp=i={};for(var n,a=R(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],o=[],l=0,d=0,h=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;null!==(n=h.exec(a));){var c=a.slice(l,n.index),l=h.lastIndex;if((d+=T(c,r))%2)r.push(n[0]);else{var u,p=n[0],c=p.length;switch(p){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:case M.MONTH_FULL_NAME:case M.MONTH_THREE_LETTER:u="(\\D+)";break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:u="(\\D*)";break;case M.YEAR_FULL:case M.MILLISECONDS:case M.CENTISECONDS:case M.DECISECONDS:u="(\\d{"+c+"})";break;case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:case M.MONTH_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_SINGLE_DIGIT:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.MINUTES_DOUBLE_DIGIT:case M.MINUTES_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:case M.SECONDS_SINGLE_DIGIT:u="(\\d\\d?)";break;case M.TIME_ZONE_OFFSET_FULL:u="([+-]?\\d\\d?:\\d{2})";break;case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:u="([+-]?\\d\\d?)";break;case M.DATE_SEPARATOR:u="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+p+"'."}u&&r.push(u),o.push(n[0])}}T(a.slice(l),r),r.push("$");s={regExp:r.join("").replace(/\s+/g,"\\s+"),groups:o};return i[t]=s},ej.globalize.addCulture=function(e,t){ej.cultures[e]=x.extend(!0,x.extend(!0,{},ej.cultures.default,t),ej.cultures[e]),ej.cultures[e].calendar=ej.cultures[e].calendars.standard},ej.globalize.preferredCulture=function(e){return e=void 0!==e&&typeof e==typeof this.cultureObject?e.name:e,this.cultureObject=ej.globalize.findCulture(e),this.cultureObject},ej.globalize.setCulture=function(e){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(e)),(e=void 0!==e&&typeof e==typeof this.globalCultureObject?e.name:e)&&(this.globalCultureObject=ej.globalize.findCulture(e)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject},ej.globalize.culture=function(e){ej.cultures.current=ej.globalize.findCulture(e)},ej.globalize.findCulture=function(e){var t;if(e){if(x.isPlainObject(e)&&e.numberFormat&&(t=e),"string"==typeof e){var i=ej.cultures;if(i[e])return i[e];if(-1<e.indexOf("-")){var s=e.split("-")[0];if(i[s])return i[s]}else for(var n=x.map(i,function(e){return e}),a=0;a<n.length;a++)if(n[a].name.split("-")[0]===e)return n[a];return ej.cultures.default}}else t=ej.cultures.current||ej.cultures.default;return t},ej.globalize.format=function(e,t,i){i=ej.globalize.findCulture(i);return"number"==typeof e?e=s(e,t,i):e instanceof Date&&(e=function e(t,i,s){var n=s.calendar,a=n.convert;if(!i||!i.length||"i"===i){var r=s&&s.name.length?a?e(t,n.patterns.F,s):t.toLocaleString():t.toString();return r}s="s"===i;i=R(n,i),r=[];var o,l,d,h,c=["0","00","000"],u=/([^d]|^)(d|dd)([^d]|$)/g,p=0,m=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;function g(e,t){var i,e=e+"";return 1<t&&e.length<t?(i=c[t-2]+e).substr(i.length-t,t):i=e}for(!s&&a&&(h=a.fromGregorian(t));;){var f=m.lastIndex,_=m.exec(i);if(p+=T(i.slice(f,_?_.index:i.length),r),!_)break;if(p%2)r.push(_[0]);else{var v=_[0],f=v.length;switch(v){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:_=3===f?n.days.namesAbbr:n.days.names,r.push(_[t.getDay()]);break;case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.DAY_OF_MONTH_DOUBLE_DIGIT:l=!0,r.push(g(h?h[2]:t.getDate(),f));break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:var b=h?h[1]:t.getMonth();r.push((n.monthsGenitive&&(l||d||(l=u.test(i),d=!0),l)?n.monthsGenitive:n.months)[3===f?"namesAbbr":"names"][b]);break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:r.push(g((h?h[1]:t.getMonth())+1,f));break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:b=h?h[0]:t.getFullYear(),f<4&&(b%=100),r.push(g(b,f));break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:0==(o=t.getHours()%12)&&(o=12),r.push(g(o,f));break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:r.push(g(t.getHours(),f));break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:r.push(g(t.getMinutes(),f));break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:r.push(g(t.getSeconds(),f));break;case M.MERIDIAN_INDICATOR_SINGLE:case M.MERIDIAN_INDICATOR_FULL:b=t.getHours()<12?n.AM?n.AM[0]:" ":n.PM?n.PM[0]:" ",r.push(1===f?b.charAt(0):b);break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:r.push(g(t.getMilliseconds(),3).substr(0,f));break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:o=t.getTimezoneOffset()/60,r.push((o<=0?"+":"-")+g(Math.floor(Math.abs(o)),f));break;case M.TIME_ZONE_OFFSET_FULL:o=t.getTimezoneOffset()/60,r.push((o<=0?"+":"-")+g(Math.floor(Math.abs(o)),2)+":"+g(Math.abs(t.getTimezoneOffset()%60),2));break;case M.DATE_SEPARATOR:r.push(n["/"]||"/");break;default:throw"Invalid date format pattern '"+v+"'."}}}return r.join("")}(e,t,i)),e},ej.globalize._round=function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t},ej.globalize.parseInt=function(e,t,i){return t=t||10,Math.floor(n(e,i,t))},ej.globalize.getISODate=function(e){if(e instanceof Date)return e.toISOString()},ej.globalize.parseFloat=function(e,t,i){return"string"==typeof t&&(i=t,t=10),n(e,i)},ej.globalize.parseDate=function(e,t,i){var s,n,a;if(i=ej.globalize.findCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(var r=0,o=t.length;r<o;r++){var l=t[r];if(l&&(s=d(e,l,i)))break}}else for(n in a=i.calendar.patterns)if(s=d(e,a[n],i))break;return s||null},ej.globalize.getLocalizedConstants=function(e,t){var e=e.replace("ej.","").split("."),e=function e(t,i){return i.length?e(t[i[0]],i.slice(1)):t}(ej,e);return x.extend(!0,{},e.Locale.default,e.Locale[t||this.cultureObject.name])},x.extend(ej,ej.globalize)}(jQuery),ej.EjVmlRender=function(e){var t,i,s=document;this.vmlNamespace="urn:schemas-microsoft-com:vml",this.vmStyle="#default#VML",s.namespaces.add("v","urn:schemas-microsoft-com:vml"),this.isdocmode8=8===s.documentMode,s.getElementById("vml_chart")||(t=this.isdocmode8?"v\\:fill, v\\:path, v\\:polyline, v\\:line, v\\:rect,v\\:shape,v\\:oval, v\\:stroke{ behavior:url(#default#VML); display: inline-block; } ":"v\\:*{ behavior:url(#default#VML); display: inline-block; } ",(i=s.createStyleSheet()).owningElement.id="vml_chart",i.cssText=t),this._rootId=jQuery(e).attr("id"),this.svgObj=s.createElement("div"),this.svgObj.style.position="relative",this.svgObj.setAttribute("id",this._rootId+"_vml"),this.changeOptions={id:"id",fill:"fillcolor",stroke:"strokecolor","stroke-width":"strokeweight",d:"path","font-size":"font-size","font-family":"font-family","font-style":"font-style","font-weight":"font-weight",points:"points"}},function(B){ej.EjVmlRender.prototype={drawPath:function(e,t){var i,s,n=e.d.split(" ");-1!=B.inArray("A",n)&&(i=parseFloat(n[4]),s=parseFloat(n[5]),e.d=this.drawArc(i,s,e)),0<B("#"+e.id).length?(e.d=this.changePathValue(e.d),this.applyVMLStyle(B("#"+e.id),e)):(e.d=this.changePathValue(e.d),s=document.createElement("v:shape"),s=B(s),this.applyVMLStyle(s,e),s.appendTo(t))},createLegendSvg:function(e){var t=document;return this._rootId=jQuery(e).attr("id"),this.legendsvgObj=t.createElement("div"),this.legendsvgObj.style.position="relative",this.legendsvgObj.setAttribute("id","legend_"+this._rootId+"_vml"),this.legendsvgObj},drawPolyline:function(e,t){var i;e.points.split(" ");0<B("#"+e.id).length?(e.points=this.changePathValue(e.points),this.applyVMLStyle(B("#"+e.id),e)):(e.points=this.changePathValue(e.points),i=document.createElement("v:polyline"),i=B(i),this.applyVMLStyle(i,e),i.appendTo(t))},setFillAttribute:function(e,t){var i=document.createElement("v:fill"),s=t["fill-opacity"]||t.opacity,s=ej.util.isNullOrUndefined(s)?t.opacity||1:s,n=t.fill;"none"==n||ej.util.isNullOrUndefined(n)?s="none"==n?(i.setAttribute("type","gradient"),i.setAttribute("color",t.color),i.setAttribute("color2",t.color2),i.setAttribute("colors",t.colors),i.setAttribute("angle",t.angle),t.fill_opacity):.1:n.match("gradient")?(t=n.replace("gradient",""),i.setAttribute("type","gradient"),i.setAttribute("colors",t)):B(e).attr("fillcolor",n),i.setAttribute("opacity",s),B(i).appendTo(e)},setStrokeAttribute:function(e,t){"transparent"==t.stroke&&(t.opacity=.1),t.name&&B(e).attr("name",t.name);var i=t.opacity;i&&((t=document.createElement("v:stroke")).setAttribute("opacity",i),B(t).appendTo(e))},changePathValue:function(e){if(!e.d){for(var t=e.split(" "),i=0;i<t.length;i++)null!=t[i].match(/\d+/g)&&(t[i]=Math.round(parseFloat(t[i])));return e=t.join(" ")}},drawArc:function(e,t,i){var s=i.start,n=i.end,n=Number(Math.PI.toFixed(2))==Number((n+s).toFixed(2))?n-.01:n,a=i.r||e||t,r=Math.cos(s),o=Math.sin(s),l=Math.cos(n),d=Math.sin(n),h=i.innerR,e=.08/a,t=h&&.1/h||0;return n-s==0?"":(2*Math.PI-n+s<e?l=-e:n-s<t&&(l=Math.cos(s+t)),a=["wa",0-a,0-a,0+a,0+a,0+a*r,0+a*o,0+a*l,0+a*d],i.open&&!h&&a.push("e",void 0,0,0),a.push("at",0-h,0-h,0+h,0+h,0+h*l,0+h*d,0+h*r,0+h*o,"x","e"),a=a.join(" "))},changeVMLStyle:function(i,s){var n=this,e=s.stroke;i.css("width",s.width).css("visibility",s.visibility).css("height",s.height).css("position","absolute").css("left",s.x).css("top",s.y),B.each(s,function(e,t){null==n.changeOptions[e]&&null==n.changeOptions[e]||("d"!=e&&"points"!=e||(t=n.changePathValue(s[e]).toLowerCase()),"transparent"!=t||s.fill_opacity||(s[e]=t="white","fill"!=e||s.hasOwnProperty("opacity")&&s.opacity||(s.opacity=.1)),s.fill_opacity&&(s.opacity=s.fill_opacity),"SPAN"===i[0].tagName?"fill"==e?i.css("color",t):"id"==e?i.attr(n.changeOptions[e],t):i.css(n.changeOptions[e],t):n.isdocmode8?i.get(0)[n.changeOptions[e]]=t:i.get(0).setAttribute(n.changeOptions[e],t))}),(s.hasOwnProperty("fill-opacity")||s.hasOwnProperty("opacity")||s.hasOwnProperty("fill"))&&"SPAN"!==i[0].tagName&&(n.setFillAttribute(i,s),s.hasOwnProperty("stroke")&&(s.stroke=e,s.fill_opacity&&(s.opacity=s.fill_opacity),n.setStrokeAttribute(i,s)))},applyVMLStyle:function(e,t){"SPAN"!==e[0].tagName&&(ej.util.isNullOrUndefined(t.width)&&(t.width="1000px"),ej.util.isNullOrUndefined(t.height)&&(t.height="1000px")),ej.util.isNullOrUndefined(t.x)&&(t.x="0px"),ej.util.isNullOrUndefined(t.y)&&(t.y="0px"),this.changeVMLStyle(e,t)},drawLine:function(e,t){var i,s,n;0<B("#"+e.id).length?(s=e.x1+","+e.y1,n=e.x2+","+e.y2,B(e).attr("from",s).attr("to",n),this.applyVMLStyle(B("#"+e.id),e)):(i=document.createElement("v:line"),i=B(i),s=e.x1+","+e.y1,n=e.x2+","+e.y2,i.attr("from",s).attr("to",n),this.applyVMLStyle(i,e),i.appendTo(t))},drawCircle:function(e,t){var i;0<B("#"+e.id).length?(e.x=e.cx-e.r,e.y=e.cy-e.r,e.width=e.height=2*e.r,this.applyVMLStyle(B("#"+e.id),e)):(i=document.createElement("v:oval"),i=B(i),e.x=e.cx-e.r,e.y=e.cy-e.r,e.width=e.height=2*e.r,this.applyVMLStyle(i,e),0==B("#"+e.id).length&&i.appendTo(t))},drawEllipse:function(e,t){var i;0<B("#"+e.id).length?(e.x=e.cx-e.rx,e.y=e.cy-e.ry,e.width=2*e.rx,e.height=2*e.ry,this.applyVMLStyle(B("#"+e.id),e)):(i=document.createElement("v:oval"),i=B(i),e.x=e.cx-e.rx,e.y=e.cy-e.ry,e.width=2*e.rx,e.height=2*e.ry,this.applyVMLStyle(i,e),i.appendTo(t))},drawRect:function(e,t){var i;0<B("#"+e.id).length?this.applyVMLStyle(B("#"+e.id),e):(i=document.createElement("v:rect"),i=B(i),this.applyVMLStyle(i,e),i.appendTo(t))},drawCylinder:function(e,t,i){var s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O=e.x,D=e.y,I=e.width,j=e.height,L=e.id,A=e.fill;ej.EjSvgRender.prototype.checkColorFormat(A)||(A=ej.datavisualization.Chart.prototype.colorNameToHex(e.fill));var E=e.opacity,P={svgRenderer:ej.EjSvgRender.prototype},M=ej.Ej3DRender.prototype.polygon3D.prototype.applyZLight(A,P),F=ej.Ej3DRender.prototype.polygon3D.prototype.applyXLight(A,P),N=65535;1==i.isColumn?(e.rx=n=I/2,e.ry=a=n/4,h=l=D-a,m=x=g=D+j-a,c=(r=o=O+n)+n,d=p=b=r-n,T=-Math.round(180*N),R=Math.round(180*N),_=Math.round(360*N),v=-Math.round(180*N),k="90",1==i.stacking&&(i.isLastSeries||(l=D+a)),u=l):(e.ry=a=j/2,e.rx=n=a/4,c=d=o=O+n,b=r=O+I+n,T=Math.round(90*N),R=Math.round(180*N),_=Math.round(270*N),v=-Math.round(180*N),g=l=D+a,x=u=l+a,h=m=g-a,k="0",1==i.stacking&&(i.isLastSeries||(r=O+I-n)),p=r),delete e.x,delete e.y,e.width=1e3,e.x=0,e.y=0,delete e.stacking,e.height=1e3,delete e.isColumn,e.fill=M,e.fill_opacity=E,e.stroke=M,e["stroke-width"]=0;for(var z=1;z<=4;z++){var V=z%2==0?(y=o,w=l,C=p,S=m,f=_,v):(y=r,w=g,C=c,S=u,f=T,R);z<3&&(f=N,V=23592600),z<4&&(s=["M",Math.round(b),Math.round(x)]),s.push("ae",Math.round(y),Math.round(w),Math.round(n),Math.round(a),f,V),2<z&&(s.push("l",Math.round(C),Math.round(S)),e.fill="none",e.color=A,e.color2=A,e.colors="30% "+F+",70% "+F,e.angle=k),3!=z&&(s.push("e"),s=s.join(" "),e.d=s,e.id=L+"_Region_"+(z-1).toString(),4==z&&(e.id=L+"_Region_"+(z-2).toString()),V=document.createElement("v:shape"),V=B(V),this.applyVMLStyle(V,e),V.appendTo(t)),b=d,x=h}},_getAttrVal:function(e,t,i){t="y"==(t="x"==t?"left":t)?"top":t;var s=B(e).attr(t),t=s||B(e).css(t);return null!=t?t:i},_setAttr:function(e,t){var i;t.transform&&(i=(i=t.transform).slice(i.indexOf("(")+1,i.indexOf(")")).split(","),t.x=i[0],t.y=i[1]);e=B(e);0<e.length&&this.changeVMLStyle(e,t)},createGradientElement:function(e,t){var i;if("[object Array]"==Object.prototype.toString.call(t)){i="gradient ";for(var s="",n=0,a=t.length-1;n<t.length;n++,a--)i+=s+t[n].colorStop+" "+t[a].color,s=","}else i=t;return i},setSpanAttr:function(e,t,i){var s={size:0<e["font-size"]?e["font-size"]+"px":e["font-size"],fontStyle:e["font-style"],fontFamily:e["font-family"]},t=ej.EjSvgRender.utils._measureText(t,null,s);B(i).css("white-space","nowrap"),"middle"===e["text-anchor"]?e.x=Math.round(e.x-t.width/2):"end"===e["text-anchor"]&&(e.x=Math.round(e.x-t.width)),e.y=Math.round(e.y-s.size.replace("px","")),this.applyVMLStyle(i,e)},drawText:function(e,t,i,s){var n=document,a=B("#"+e.id);if(0<a.length)this._textAttrReplace(e,t,s,a);else if(0<e.id.indexOf("YAxisTitle")&&!this.isdocmode8){e.on=!0;var r=document.createElement("v:line");r.style.behavior="url(#default#VML)",r.style.display="inline-block";s=ej.EjSvgRender.utils._measureText(t,null,null);r.setAttribute("to",(e.x-1).toString()+","+(e.y-s.width/2).toString()),r.setAttribute("from",e.x.toString()+","+e.y.toString());a=document.createElement("v:path");a.setAttribute("textpathok",!0);s=document.createElement("v:textpath");s.setAttribute("on",!0),s.setAttribute("string",t),s.style["font-style"]=e["font-style"],s.style["font-size"]=e["font-size"],s.style["font-family"]=e["font-family"],r.appendChild(a),r.appendChild(s),B(r).appendTo(i)}else{var o=n.createElement("span"),r=B(o);if("array"==jQuery.type(t)){this.setSpanAttr(e,t,r);for(var l=0;l<t.length;l++){var d=n.createElement("span");B(d).html(t[l]),B(d).appendTo(o);d=n.createElement("br");B(d).appendTo(o)}}else this.setSpanAttr(e,t,r),r.html(t);r.appendTo(i)}},_textAttrReplace:function(e,t,i,s){if("array"==jQuery.type(t)){var n=B("#"+e.id).children("span");if(this.setSpanAttr(e,t,s),0<n.length&&n.length==t.length)for(var a=0;a<n.length;a++){var r=n[a];B(r).text(t[a])}else B("#"+e.id).remove(),this.drawText(e,t,this.gTransToolEle,i)}else this.setSpanAttr(e,t,s),s.text(t)},drawImage:function(e,t){var i=document.createElement("img"),s=B(i);s.css({position:"absolute"}),B.each(e,function(e,t){"href"==e&&(e="src"),s.attr(e,t)}),s.appendTo(t)},createDefs:function(){},createGroup:function(e){var t,i=document.createElement("div");return ej.util.isNullOrUndefined(e.transform)||(t=e.transform.slice(e.transform.indexOf("(")+1,e.transform.indexOf(")")).split(","),B(i).css({position:"absolute",left:t[0]+"px",top:t[1]+"px"})),e.cursor&&B(i).css({cursor:e.cursor}),B.each(e,function(e,t){"transform"!==e&&"clip-path"!=e&&B(i).attr(e,t)}),i},createText:function(e,t){var i=document.createElement("span");return B(i).attr(e),ej.util.isNullOrUndefined(t)||(i.textContent=t),i},drawAxesBoundsClipPath:function(e,t,i){var s=B(e);s.removeAttr("clip-path");var i=this._getTransform(t.xAxis,t.yAxis,i),i={id:e.id+"_ClipRect",x:0,y:0,width:i.width,height:i.height,fill:"white","stroke-width":1,stroke:"transparent"};this.drawClipPath(i,e),s.attr("clip-path","url(#"+i.id+")")},getAttrVal:function(e,t,i){t=B(e).attr(t);return null!=t?t:i},round:function(e,t,i){return t*(i?Math.ceil(e/t):Math.floor(e/t))},hexFromRGB:function(e){var t=e.R,i=e.G,s=e.B;if(e.A)return"rgba("+t.toString()+","+i.toString()+","+s.toString()+","+e.A+")";var t=e.R,i=e.G,s=e.B,n=[t.toString(16),i.toString(16),s.toString(16)];return B.each(n,function(e,t){1===t.length&&(n[e]="0"+t)}),"#"+n.join("").toUpperCase()},hexToRGB:function(e){var t;return 1==/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/.test(e)?(t=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/.exec(e))?{R:parseInt(t[1]),G:parseInt(t[2]),B:parseInt(t[3]),A:t[4]}:null:(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?{R:parseInt(t[1],16),G:parseInt(t[2],16),B:parseInt(t[3],16)}:null},checkColorFormat:function(e){return/(rgba?\((?:\d{1,3}[,\)]){3}(?:\d+\.\d+\))?)|(^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$)/gim.test(e)},createDelegate:function(t,i){return function(e){i.apply(t,[e,this])}},drawClipPath:function(e,t){var i;-1==e.id.indexOf("ChartAreaClipRect")&&(i=Math.round(e.x)+"px",i="rect("+(Math.round(e.y)+"px")+" "+(Math.round(e.width)+Math.round(e.x)+"px")+" "+(Math.round(e.y)+Math.round(e.height)+"px")+" "+i+")",B(t).css("position","absolute").css("clip",i))},drawCircularClipPath:function(e,t){var i=Math.round(e.r),s=Math.round(e.cx),n=Math.round(e.cy);-1==e.id.indexOf("_ClipRect")&&(i="rect("+(n-i+"px")+" "+(s+i+"px")+" "+(n+i+"px")+" "+(s-i+"px")+")",B(t).css("position","absolute").css("clip",i))},append:function(e,t){B(e).appendTo(t)}}}(jQuery),ej.EjSvgRender=function(e){this.svgLink="http://www.w3.org/2000/svg",this.svgObj=document.createElementNS(this.svgLink,"svg"),this._rootId=jQuery(e).attr("id");e=this._rootId+"_svg";if(0<$(document).find("#"+e).length){for(var t=0;t++,0<$(document).find("#"+this._rootId+"_svg"+t).length;);e=this._rootId+"_svg"+t}this.svgObj.setAttribute("id",e)},function(ae){function d(e,t,i,s){s=s*Math.PI/180;return[e+i*Math.cos(s),t+i*Math.sin(s)]}ej.EjSvgRender.prototype={drawPath:function(e,t){var i;0<ae("#"+e.id).length?ae("#"+e.id).attr(e):(i=document.createElementNS(this.svgLink,"path"),ae(i).attr(e).appendTo(t))},createLegendSvg:function(e){return this.svgLink="http://www.w3.org/2000/svg",this.legendsvgObj=document.createElementNS(this.svgLink,"svg"),this._rootId=jQuery(e).attr("id"),this.legendsvgObj.setAttribute("id","legend_"+this._rootId+"_svg"),this.legendsvgObj},drawPolyline:function(e,t){var i;0<ae("#"+e.id).length?ae("#"+e.id).attr(e):(i=document.createElementNS(this.svgLink,"polyline"),ae(i).attr(e).appendTo(t))},drawLine:function(e,t){var i;0<ae("#"+e.id).length?ae("#"+e.id).attr(e):(i=document.createElementNS(this.svgLink,"line"),ae(i).attr(e),ae(i).appendTo(t))},drawPolygon:function(e,t){var i;0<ae("#"+e.id).length?ae("#"+e.id).attr(e):(i=document.createElementNS(this.svgLink,"polygon"),ae(i).attr(e),ae(i).appendTo(t))},drawCircle:function(e,t){var i;0<ae("#"+e.id).length?ae("#"+e.id).attr(e):(i=document.createElementNS(this.svgLink,"circle"),ae(i).attr(e).appendTo(t))},drawEllipse:function(e,t){var i;0<ae("#"+e.id).length?ae("#"+e.id).attr(e):(i=document.createElementNS(this.svgLink,"ellipse"),ae(i).attr(e).appendTo(t))},drawRect:function(e,t){var i;0<ae("#"+e.id).length?ae("#"+e.id).attr(e):(i=document.createElementNS(this.svgLink,"rect"),ae(i).attr(e).appendTo(t))},drawCylinder:function(e,t,i){if(0<ae("#"+e.id).length)ae("#"+e.id).attr(e);else{var s=e.x,n=e.y,a=e.id,r=e.fill,o=r;this.checkColorFormat(r)||(r=ej.datavisualization.Chart.prototype.colorNameToHex(r));var l,d,h,c,u,p,m,g,f,_,v,b,x,y,w=2,C=0,S=0,T={svgRenderer:this};for(1==i.isColumn?(y=e.width/2,x=e.height,h=l=s,u=c=!((b=y/4)<n)&&i.stacking?n+b:n-b,p=2*y,g=m=0,f=!(b<n)&&!(x<2*b)&&i.stacking?x-2*b:x,_=h,v=b<n?c+x:!(x<c)&&i.stacking?x+(n-b):x+c,C=100,i.stacking=!0,i.isLastSeries||(c=u=n+b,f=x<y/2?x:x-y/2)):(m=2*(b=e.height/2),f=p=0,_=(h=l=s+(y=b/4))+(g=x=e.width),v=c=u=n,S=100,i.stacking=!0,i.isLastSeries||(_=h+x-2*y,g=x-2*y)),delete e.x,delete e.y,delete e.width,delete e.height,delete e.isColumn;w--;)d="M"+h.toString()+","+c.toString(),d+="a"+y.toString()+","+b.toString()+" 0 1,0 "+p.toString()+","+m.toString(),d+="a"+y.toString()+","+b.toString()+" 0 1,0 "+(-1*p).toString()+","+(-1*m).toString(),e.d=d,e.id=a+"_Region_"+w,e.fill=ej.Ej3DRender.prototype.polygon3D.prototype.applyZLight(r,T),this.drawPath(e,t),h=_,c=v;d="M"+l.toString()+","+u.toString(),d+="a"+y.toString()+","+b.toString()+" 0 1,0 "+p.toString()+","+m.toString(),d+="l"+g.toString()+" "+f.toString(),d+="a"+y.toString()+","+b.toString()+" 0 1,1 "+(-1*p).toString()+","+(-1*m).toString()+" z",e.d=d,e.id=a+"_Region_2",-1==o.indexOf("url")&&(0==ae("#"+(o=a)).length&&(C={id:o,x1:"0%",y1:"0%",x2:C.toString()+"%",y2:S.toString()+"%"},(S=[])[0]={colorStop:"0%",color:r},S[1]={colorStop:"30%",color:ej.Ej3DRender.prototype.polygon3D.prototype.applyXLight(r,T)},S[2]={colorStop:"70%",color:ej.Ej3DRender.prototype.polygon3D.prototype.applyXLight(r,T)},S[3]={colorStop:"100%",color:r},this.drawGradient(C,S,t)),e.fill="url(#"+o+")"),this.drawPath(e,t)}},createGradientElement:function(e,t,i,s,n,a,r){t="[object Array]"==Object.prototype.toString.call(t)?(a={id:this.svgObj.id+"_"+e+"Gradient",x1:i+"%",y1:s+"%",x2:n+"%",y2:a+"%"},this.svgObj.id,this.drawGradient(a,t,r),"url(#"+this.svgObj.id+"_"+e+"Gradient)"):t;return t},drawGradient:function(e,t,i){var s=this.createDefs(),n=document.createElementNS(this.svgLink,"linearGradient");ae(n).attr(e);for(var a=0;a<t.length;a++){var r=document.createElementNS(this.svgLink,"stop");ae(r).attr({offset:t[a].colorStop,"stop-color":t[a].color,"stop-opacity":1}),ae(r).appendTo(n)}ae(n).appendTo(s),ae(s).appendTo(i)},drawText:function(e,t,i,s){if(0<ae("#"+e.id).length)this._textAttrReplace(e,t,s);else{var n=document.createElementNS(this.svgLink,"text"),a=ae(n);if("array"==jQuery.type(t)){var r=0;a.attr(e);for(var o=0;o<t.length;o++){var l=document.createElementNS(this.svgLink,"tspan");l.textContent=t[o],ae(l).attr({x:e.x,dy:r}),ae(l).appendTo(n),s=this.enable3D?s.font:s;l=ej.EjSvgRender.utils._measureText(t[o],null,s),r=e.isTrackball?l.height+2:l.height}}else n.textContent=t,a.attr(e);a.appendTo(i)}},_textAttrReplace:function(e,t,i){if(ae("#"+e.id).attr(e),"array"==jQuery.type(t)){var s=ae("#"+e.id).children("tspan"),n=0;if(0<s.length&&s.length==t.length)for(var a=0;a<s.length;a++){var r=s[a];ae(r).attr({x:e.x,dy:n}),r.textContent=t[a];n=ej.EjSvgRender.utils._measureText(t[a],null,i).height+2}else ae("#"+e.id).remove(),this.drawText(e,t,this.gTransToolEle,i)}else ae("#"+e.id).text(t)},drawImage:function(e,t){var i=document.createElementNS(this.svgLink,"image");i.setAttributeNS(null,"height",e.height),i.setAttributeNS(null,"width",e.width),i.setAttributeNS("http://www.w3.org/1999/xlink","href",e.href),i.setAttributeNS(null,"x",e.x),i.setAttributeNS(null,"y",e.y),i.setAttributeNS(null,"id",e.id),i.setAttributeNS(null,"visibility",e.visibility),ej.util.isNullOrUndefined(e.clippath)&&ej.util.isNullOrUndefined(e.preserveAspectRatio)||(i.setAttributeNS(null,"clip-path",e.clippath),i.setAttributeNS(null,"preserveAspectRatio",e.preserveAspectRatio)),ae(i).appendTo(t)},createDefs:function(){return document.createElementNS(this.svgLink,"defs")},createClipPath:function(e){var t=document.createElementNS(this.svgLink,"clipPath");return ae(t).attr(e),t},createForeignObject:function(e){var t=document.createElementNS(this.svgLink,"foreignObject");return ae(t).attr(e),t},createGroup:function(e){var t=document.createElementNS(this.svgLink,"g");return ae(t).attr(e),t},createPattern:function(e,t){var i,s=document.createElementNS(this.svgLink,t);for(i in e)e.hasOwnProperty(i)&&s.setAttribute(i,e[i]);return s},createText:function(e,t){var i=document.createElementNS(this.svgLink,"text");return ae(i).attr(e),ej.util.isNullOrUndefined(t)||(i.textContent=t),i},createPath:function(e){var t=document.createElementNS(this.svgLink,"path");return ae(t).attr(e),t},createCircle:function(e){var t=document.createElementNS(this.svgLink,"circle");return ae(t).attr(e),t},createLine:function(e){var t=document.createElementNS(this.svgLink,"line");return ae(t).attr(e),t},_getAttrVal:function(e,t,i){t=ae(e).attr(t);return null!=t?t:i},hexFromRGB:function(e){var t=e.R,i=e.G,s=e.B;if(e.A)return"rgba("+t.toString()+","+i.toString()+","+s.toString()+","+e.A+")";var n=[t.toString(16),i.toString(16),s.toString(16)];return ae.each(n,function(e,t){1===t.length&&(n[e]="0"+t)}),"#"+n.join("").toUpperCase()},checkColorFormat:function(e){return/(rgba?\((?:\d{1,3}[,\)]){3}(?:\d+\.\d+\))?)|(^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$)/gim.test(e)},hexToRGB:function(e){var t;return 1==/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/.test(e)?(t=/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/.exec(e))?{R:parseInt(t[1]),G:parseInt(t[2]),B:parseInt(t[3]),A:t[4]}:null:(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?{R:parseInt(t[1],16),G:parseInt(t[2],16),B:parseInt(t[3],16)}:null},createDelegate:function(t,i){return function(e){i.apply(t,[e,this])}},drawClipPath:function(e,t){var i,s;0<ae(t).find("#"+e.id).length?ae(t).find("#"+e.id).attr(e):(i=this.createDefs(),s=this.createClipPath({id:e.id}),e.id=e.id+"_Rect",this.drawRect(e,s),this.append(s,i),this.append(i,t))},drawCircularClipPath:function(e,t){var i=this.createDefs(),s=this.createClipPath({id:e.id});this.drawCircle(e,s),this.append(s,i),this.append(i,t)},append:function(e,t){ae(e).appendTo(t)},_setAttr:function(e,t){ae(e).attr(t)}},ej.EjSvgRender.commonChartEventArgs={cancel:!1,data:null},ej.EjSvgRender.utils={_decimalPlaces:function(e){e=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},_getLabelContent:function(e,t,i){switch(t._categoryValueType){case"number":var s=ej.util.isNullOrUndefined(t.labelFormat)?null:t.labelFormat.match("{value}");return ej.util.isNullOrUndefined(t.labelFormat)?t.labels[Math.floor(e)]:null!=s?t.labelFormat.replace("{value}",t.labels[Math.floor(e)]):ej.format(t.labels[Math.floor(e)],t.labelFormat,i);case"date":return ej.format(new Date(t.labels[Math.floor(e)]),ej.util.isNullOrUndefined(t.labelFormat)?"dd/MM/yyyy":t.labelFormat,i);case"string":return t.labels[Math.floor(e)];default:return""}},_getSeriesTemplateSize:function(e,t,i,s,n){var a=n.model.AreaType,r=n._id,o=ae.inArray(i,n.model._visibleSeries),l=0!=ae("#template_group_"+r).length?ae("#template_group_"+r):ae("<div></div>").attr("id","template_group_"+r);l.css("position","relative").css("z-index",1e3);n=ae("#"+i.marker.dataLabel.template).clone();ae(n).attr("id",i.marker.dataLabel.template+"_"+o+"_"+t+"_"+r);t=ae(n);t.css("position","absolute"),e.count=1;n={series:i,point:e};t.html(t.html().parseTemplate(n));a="cartesianaxes"!=a&&i.enableAnimation&&"pyramid"!=i.type.toLowerCase()&&"funnel"!=i.type.toLowerCase()?"none":"block";t.css("display",a).appendTo(ae(l)),ae(l).appendTo("#"+r),e.size={height:t.height(),width:t.width()},s?((ej.util.isNullOrUndefined(i.LeftLabelMaxHeight)||i.LeftLabelMaxHeight<e.size.height)&&(i.LeftLabelMaxHeight=e.size.height),(ej.util.isNullOrUndefined(i.LeftLabelMaxWidth)||i.LeftLabelMaxWidth<e.size.width)&&(i.LeftLabelMaxWidth=e.size.width)):((ej.util.isNullOrUndefined(i.RightLabelMaxHeight)||i.RightLabelMaxHeight<e.size.height)&&(i.RightLabelMaxHeight=e.size.height),(ej.util.isNullOrUndefined(i.RightLabelMaxWidth)||i.RightLabelMaxWidth<e.size.width)&&(i.RightLabelMaxWidth=e.size.width))},getMinPointsDelta:function(s,e,n){var a=e,r=Number.MAX_VALUE;return ae.each(a.model._visibleSeries,function(e,t){var i;"visible"==t.visibility.toLowerCase()&&s.name==t._xAxisName&&(1!=(i=ej.DataManager(t.points,ej.Query().sortBy("xValue")).executeLocal()).length||a.currentSeries&&a.currentSeries._yAxisName.toLowerCase()!=t._yAxisName.toLowerCase()?ae.each(i,function(e,t){0<e&&t.xValue&&(0!=(e=t.xValue-i[e-1].xValue)&&(r=Math.min(r,e)))}):(t=ej.util.isNullOrUndefined(n)?t.xAxis.visibleRange.min:n,0!=(t=i[0].xValue-t)&&(r=Math.min(r,t))))}),r==Number.MAX_VALUE&&(r=1),r},_getSeriesMaxLabel:function(e){var t,i={width:0,height:0},s=ae(this.svgObject).width(),n=[];if(0<e.labels.length){for(var a=0;a<e.labels.length;a++){var r=this._measureText(e.visibleLabels[a],s,e.marker.dataLabel.font);i.width<r.width&&(i.width=r.width),i.height<r.height&&(i.height=r.height)}e.LabelMaxHeight=i.height,e.LabelMaxWidth=i.width}else{n.push(e.rightsidePoints),n.push(e.leftsidePoints);for(var o=0;o<n.length;o++){for(a=0;a<n[o].length;a++)t=(t=n[o][a]).text||t.y,r=this._measureText(t,s,e.marker.dataLabel.font),i.width<r.width&&(i.width=r.width),i.height<r.height&&(i.height=r.height);0==o?(e.RightLabelMaxHeight=i.height,e.RightLabelMaxWidth=i.width):(e.LeftLabelMaxHeight=i.height,e.LeftLabelMaxWidth=i.width)}}},_getHighestLabel:function(e,t,i,s){var n,a,r,o,l=0,d=[],h=0;if(ej.isNullOrUndefined(i))for(var c=0==e.labels.length?e.visibleLabels:e.labels,u=0;u<c.length;u++){var p=0==e.labels.length?c[u].Text:c[u],h=0;-1!=p.indexOf("<br>")?d=p.split("<br>"):d.push(p);for(var m=0;m<d.length;m++)a=d[m],h<(r=this._measureText(a,ae(t.svgObject).width(),e.font).width)&&(h=r,n=a);l<h&&(l=h,o=n)}else if(i&&("string"==typeof i&&-1!=i.indexOf("<br>")||"object"==typeof i))for(h=0,d="object"==typeof i?i:i.split("<br>"),m=0;m<d.length;m++)a="object"==typeof d[m]?d[m].Text:d[m],h<(r=this._measureText(a,t,e.font).width)&&(h=r,n=a),o=n;return o},_getMaxLabelWidth:function(e,t){var i,s={width:0,height:0,maxHeight:0,maxWidth:0},n="",a=(this.chartObj=t).svgRenderer.vmlNamespace,r=e.visibleRange,o=e.labelIntersectAction?e.labelIntersectAction.toLowerCase():"",l=e.labelPlacement,d=e.opposedPosition,h=e.orientation.toLowerCase(),c=t.model.requireInvertedAxes?"vertical"==h:"horizontal"==h,u=e.roundingPlaces,p=e.labelRotation,h=e.orientation,m=0,g=e.visibleLabels,f=g.length;if(e.visible){for(var _,v=0;v<f;v++)e.visibleLabels[v].y=0,F="string"==typeof e.visibleLabels[v].Text&&-1!=e.visibleLabels[v].Text.indexOf("<br>")&&"vertical"==e.orientation?(i=e.visibleLabels[v].Text.split("<br>"),i=this._getHighestLabel(e,ae(this.svgObject).width(),i),this._measureText(i,ae(this.svgObject).width(),e.font,e.labelRotation)):this._measureText(e.visibleLabels[v].Text,ae(this.svgObject).width(),e.font,e.labelRotation),s.width<F.width&&(s.width=F.width,n=e.visibleLabels[v].Text),s.height<F.height&&(s.height=F.height);if((e.enableTrim||"trim"==o&&"vertical"!=e.orientation)&&(_=e.maximumLabelWidth,s.width=s.width>_?_:s.width),s.rows=1,s.maxWidth=s.width,s.maxHeight=s.height,!a&&(p||o)){a=0;if("rotate45"==o?a=45:"rotate90"==o&&(a=90),p=null!=p||"vertical"==h?p:a,e.rotationValue=p){n=ej.isNullOrUndefined(n)?"":n;var b=this._measureText(n,ae(this.svgObject).width(),e.font,e.labelRotation);if((e.enableTrim||"trim"==o)&&b.width>_&&""!=n){var x=n;for(A=1;A<x.toString().length;A++)if(x=x.toString().substring(0,A)+"... ",(Z=this._measureText(x,ae(t.svgObject).width(),e.font)).width>=_){n=x=x.toString().substring(0,A-1)+"... ";break}}n=!o&&!e.enableTrim||!p||"string"==typeof n&&-1!=n.indexOf("<br>")?this._getHighestLabel(e,t,null):n;b=this.rotatedLabel(e,t,p,n);e.labelIntersectAction&&"multiplerows"==e.labelIntersectAction.toLowerCase()&&(m=s.height+b.height),s.height=e.rowsCount&&1<e.rowsCount&&90!=p&&e.enableTrim?e.rowsCount*s.height:b.height,s.width=b.width}}if(e.labelIntersectAction)if(!e.rowsCount||"none"!=o&&"trim"!=o&&"hide"!=o&&0!=p||"wrap"==o&&!e.enableTrim||"wrapbyword"==o&&!e.enableTrim||"multiplerows"==o&&!e.enableTrim){if("wrap"==o||"wrapbyword"==o){var y="betweenticks"==(l=l||ej.datavisualization.Chart.LabelPlacement.BetweenTicks).toLowerCase()?(M=1+(1<e.labels.length?-.5:0),M=u?parseFloat(M.toFixed(u)):parseFloat(M.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(r.interval)?1:ej.EjSvgRender.utils._decimalPlaces(r.interval))),Math.ceil((M-r.min)/(r.max-r.min)*e.length)):Math.ceil(e.length/g.length);if("horizontal"==e.orientation){var w=0,C=0,S=0<e.labels.length&&"datetimecategory"!=e.valueType?e.labels:e.visibleLabels,T=e.width?e.width/S.length:(e.length-(t.svgWidth-e.length)-20)/S.length;e.labelsCollection=[];for(var R=0;R<S.length;R++){var k=0,O=[],D=[],I="object"==typeof S[R]?S[R].Text:S[R];"string"==typeof I&&-1!=I.indexOf("<br>")?D=I.split("<br>"):D.push(I);for(var j=0;j<D.length;j++){var L=ej.EjAxisRenderer.prototype.rowscalculation(D[j],t.model.m_AreaBounds,e,T,null);k=L.length+k;for(var A=0;A<L.length;A++)O.push(L[A])}p&&(n=this._getHighestLabel(e,t,O),C<(I=this._measureText(n,ae(t.svgObject).width(),e.font).width)&&(C=I,z=n)),w=Math.max(k,w),e.labelsCollection[R]=O}b=this.rotatedLabel(e,t,p,z)}y=y<0?Math.ceil(e.length/g.length):y;var E=Math.round(s.width/y);s.rows=p?E-1:E+1,s.rows<0&&(s.rows=0);var P=w&&!p?w:s.rows;E<w&&!p&&--P,s.height=p?b.height+P*b.height:s.height+P*s.height}else if("multiplerows"==o){var M=t._getLegendSpace(),y=t.model.border.width,b=(t.model._axes[1],ae(t.svgObject).width()-t.model.margin.left-t.model.margin.right),o=""!=(o=(P=e.title).text)&&e.visible?this._measureText(o,b,P.font).height+2*t.model.elementSpacing:0,b=t.model.elementSpacing+o+e.majorTickLines.size+e.axisLine.width,P=t._getYValues(t.model._visibleSeries[0].points),o=Math.max.apply(Math,P),P=t.model._axes[1],F=this._measureText(o,ae(this.svgObject).width(),P.font,P.labelRotation),y=M.rightLegendWidth+b+F.width+t.model.margin.right+t.model.margin.left+2*y,N=ae(t.svgObject).width()-y;if(c){for(var z,V=0,B=[],E=0,C=0,v=0;v<g.length;v++){var H=g[v],Y=[];"string"==typeof H.Text&&-1!=H.Text.indexOf("<br>")?Y=H.Text.split("<br>"):Y.push(H);var U=Y.length,W=!1,m=Math.max(m,V),V=H.y=s.height,X=(x=this._measureText(H.Text,ae(this.svgObject).width(),e.font)).height,G=Math.abs(Math.floor((H.Value-r.min)/r.delta*N));if(0<B.length)for(var $=B,q=!0,Q=0;Q<$.length&&q;Q++)for(var k=0,K=$[Q],R=0;K&&R<K.length;R++)for(j=0;j<U;j++){var Z=ej.EjSvgRender.utils._measureText(1==U?Y[j].Text:Y[j],ae(this.svgObject).width(),e.font).width,X=ej.EjSvgRender.utils._measureText(Y[j],ae(this.svgObject).width(),e.font).height,J=R==K.length?K[R-1]:K[R],ee=Math.abs(Math.floor((J.Value-r.min)/r.delta*N)),J=ej.EjSvgRender.utils._measureText(J.Text,ae(this.svgObject).width(),e.font).width;Z/=2;var te=ee+(e.isInversed?-J/2:J/2);if(G-Z<=te)V=H.y+X,H.y+=X,k++,Q+1==$.length&&(q=!1);else if(R+1==K.length){q=j!=U-1;break}}if(null==B[E=(H.y=V)/X-1]&&(B[E]=[]),1==U)B[E].push(H);else for(j=0;j<U;j++)null==B[E]&&(B[E]=[]),B[E].push({Text:Y[j],Value:H.Value}),j!=U-1&&(E+=1,V=H.y+X)}m=B.length*X,s.height=s.height>m?s.height:m,0<X&&(s.rows=d?Math.round((m+X)/X):Math.round(m/X)),s.rows=p?s.rows-1:s.rows,s.rows<1&&(s.rows=1)}if(!c){var ie=0;for(v=0;v<e.visibleLabels.length;v++){H=e.visibleLabels[v],Z=(x=this._measureText(H.Text,ae(this.svgObject).width(),e.font)).width,X=x.height,G=Math.abs(Math.floor((H.Value-e.visibleRange.min)/e.visibleRange.delta*e.length));for(var se=0;se<v;se++){K=e.visibleLabels[se];G-X/2<(te=Math.abs(Math.floor((K.Value-e.visibleRange.min)/e.visibleRange.delta*e.length))+this._measureText(K.Text,ae(this.svgObject).width(),e.font).height/2)&&e.visibleLabels[se].y==H.y&&(ie=H.y+Z,H.y=ie,W=!0)}var ne=ie}s.width=s.width+ne+(W?5:0)}}}else 0==p&&(s.rows=e.rowsCount,s.height=e.rowsCount*s.height)}return s},rotatedLabel:function(e,t,i,s,n){i={"font-size":e.font.size,transform:"rotate("+i+",0,0)","font-family":e.font.fontFamily,"font-style":e.font.fontStyle,rotateAngle:"rotate("+i+"deg)","text-anchor":"middle"},s=(t=n?this.chartObj:t).svgRenderer.createText(i,s);return{height:Math.ceil(this._measureBounds(s,t).height),width:Math.ceil(this._measureBounds(s,t).width)}},_getTransform:function(e,t,i){var s,n,a,t=i?(s=t.x,n=e.y,a=t.width,e.height):(s=e.x,n=t.y,a=e.width,t.height);return{x:s,y:n,width:a,height:t}},_calculateroundedCorner:function(e,t,i,s,n,a){var r,o,l,d,h=t.x,c=t.y,u=this.chartObj.model.enableCanvasRendering&&!a?5/4:0,p=t.width,a=t.height;return"object"!=typeof e||ej.util.isNullOrUndefined(e)?r=o=l=d=e:(r=e.topLeft,o=e.bottomLeft,l=e.topRight,d=e.bottomRight),r=ej.util.isNullOrUndefined(t.rx)?r:t.rx,o=ej.util.isNullOrUndefined(t.rx)?o:t.rx,e="M "+h+" "+(r+c)+" Q "+h+" "+c+" "+(h+r)+" "+c+" ",i&&"top"==s&&(e+="L "+(h+p/2-2.5+u)+" "+c+" L "+(h+p/2+u-n)+" "+(c-5)+" L "+(h+p/2+2.5+u)+" "+c+" "),e+="L "+(h+p-(l=ej.util.isNullOrUndefined(t.ry)?l:t.ry))+" "+c+" Q "+(h+p)+" "+c+" "+(h+p)+" "+(c+l)+" ",i&&"right"==s&&(e+="L "+(h+p)+" "+(c+a/2-2.5+u)+" L "+(h+p+5)+" "+(c+a/2+u-n)+" L "+(h+p)+" "+(c+a/2+2.5+u)+" "),e+="L "+(h+p)+" "+(c+a-(d=ej.util.isNullOrUndefined(t.ry)?d:t.ry))+" Q "+(h+p)+" "+(c+a)+" "+(h+p-d)+" "+(c+a)+" ",i&&"bottom"==s&&(e+="L "+(h+p/2-2.5+u)+" "+(c+a)+" L "+(h+p/2+u-n)+" "+(c+a+5)+" L "+(h+p/2+2.5+u)+" "+(c+a)+" "),e+="L "+(h+o)+" "+(c+a)+" Q "+h+" "+(c+a)+" "+h+" "+(c+a-o)+" ",i&&"left"==s&&(e+="L "+h+" "+(c+a/2-2.5+u)+" L "+(h-5)+" "+(c+a/2+u-n)+" L "+h+" "+(c+a/2+2.5+u)+" "),e+="L "+h+" "+(r+c)+" z"},browserInfo:function(){var e,t={},i=[],s={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie) ([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(e in s)if(s.hasOwnProperty(e)&&(i=navigator.userAgent.match(s[e]))){t.name=i[1].toLowerCase(),t.version=i[2],navigator.userAgent.match(/Trident\/7\./)&&(t.name="msie");break}return t.isMSPointerEnabled="msie"==t.name&&9<t.version&&window.navigator.msPointerEnabled,t.pointerEnabled=window.navigator.pointerEnabled,t},_measureText:function(e,t,i){if(this.chartObj&&this.chartObj.chartExtensions){var s=this.chartObj.chartExtensions.chartLabelCache.getTextSize(e,t,i);if(s)return s}var n=ae(document).find("#measureTex");ae("#measureTex").css("display","block"),0==n.length?(h=document.createElement("text"),ae(h).attr({id:"measureTex"}),document.body.appendChild(h)):h=n[0];var a=null,r=null,o=null,s=null;if("string"==typeof e&&(-1<e.indexOf("<")||-1<e.indexOf(">"))){for(var l=e.split(" "),d=0;d<l.length;d++)-1==l[d].indexOf("<br/>")&&(l[d]=l[d].replace(/[<>]/g,"&"));e=l.join(" ")}/<\/?[a-z][\s\S]*>/.test(e)?ae(h).html(e):h.textContent=e,null!=i&&null==i.size&&(a=(n=(n=i).split(" "))[0],r=n[1],o=n[2],s=n[3]),null!=i&&(h.style.fontSize=0<i.size?i.size+"px":i.size||r,h.style.fontStyle&&(h.style.fontStyle=i.fontStyle||a),h.style.fontFamily=i.fontFamily||o,-1==window.navigator.userAgent.indexOf("MSIE 8.0")&&(h.style.fontWeight=i.fontWeight||s)),h.style.backgroundColor="white",h.style.position="absolute",h.style.top=-100,h.style.left=0,h.style.visibility="hidden",h.style.whiteSpace="nowrap",t&&(h.style.maxwidth=t+"px");var h={width:h.offsetWidth,height:h.offsetHeight};return ae("#measureTex").css("display","none"),this.chartObj&&this.chartObj.chartExtensions&&this.chartObj.chartExtensions.chartLabelCache.cacheTextSize(e,t,i,h),h},_trimText:function(e,t,i){for(var s=e.toString(),n=s.length,a=1;a<n;a++)if(s=e.substring(0,a)+"...",t<=ej.EjSvgRender.utils._measureText(s,null,i).width)return s=s.substring(0,a-1)+"... ";return e},_measureBounds:function(e,t){t.model.enableCanvasRendering?ae(document.body).append(e):(t.svgRenderer.append(e,t.svgObject),t.svgRenderer.append(t.svgObject,t.element));t=e.getBoundingClientRect(),t={left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.right-t.left,height:t.bottom-t.top};return ae(e).remove(),t},_drawAxesBoundsClipPath:function(e,t,i){var s,n=ae(e),a=this._getTransform(t.xAxis,t.yAxis,i.model.requireInvertedAxes),r="polaraxes"==i.model.AreaType?ae(i.svgObject).width():a.width,o="polaraxes"==i.model.AreaType?ae(i.svgObject).height():a.height,a=(i.model.requireInvertedAxes?t.yAxis:t.xAxis).plotOffset,t=(i.model.requireInvertedAxes?t.xAxis:t.yAxis).plotOffset;"polaraxes"==i.model.AreaType?(s={id:e?e.id+"_ClipRect":"",cx:i.model.centerX,cy:i.model.centerY,r:i.model.Radius,fill:"white","stroke-width":1,stroke:"transparent"},i.svgRenderer.drawCircularClipPath(s,e)):(s={id:e?e.id+"_ClipRect":"",x:0-a,y:0-t,width:r+2*a,height:o+2*t,fill:"white","stroke-width":1,stroke:"transparent"},i.svgRenderer.drawClipPath(s,e)),s.id.indexOf("_Rect")&&(s.id=s.id.replace("_Rect","")),n.attr("clip-path","url(#"+s.id+")")},_getStringBuilder:function(){var i=[],t=0;return{append:function(e){return i[t++]=e,this},remove:function(e,t){return i.splice(e,t||1),this},insert:function(e,t){return i.splice(e,0,t),this},toString:function(e){return i.join(e||"")}}},_addRegion:function(e,t,i,s,n){var a=i.type,i=ae.inArray(i,e.model._visibleSeries);0<=i&&(a={SeriesIndex:i,Region:{PointIndex:n,Bounds:t},type:a},e.model.chartRegions.push(a))},AddRegion:function(e,t,i){i&&(t={isStripLine:i,Region:{Bounds:t}},e.model.chartRegions.push(t))},_getSvgXY:function(e,t,i,s){var n,i=s.model.requireInvertedAxes?(n=e+i.yAxis.x,t+i.xAxis.y):(n=e+i.xAxis.x,t+i.yAxis.y);return{X:n,Y:i}},_getPoint:function(e,t){var i,s=e.xValue,n="boxandwhisker"==t.type?e.YValues:e.YValues[0],a=t._isTransposed?t.xAxis.height:t.xAxis.width,r=t._isTransposed?t.yAxis.width:t.yAxis.height;return e.location={},t._hiloTypes&&(i=e.YValues[1],i="logarithmic"==t.yAxis._valueType?ej.EjSvgRender.utils._logBase(0==i?1:i,t.xAxis.logBase):i,i=this._getPointXY(i,t.yAxis.visibleRange,t.yAxis.isInversed),e.location.low=(t._isTransposed?i:1-i)*r),s="logarithmic"==t.xAxis._valueType?ej.EjSvgRender.utils._logBase(0==s?1:s,t.xAxis.logBase):s,n="logarithmic"==t.yAxis._valueType?ej.EjSvgRender.utils._logBase(0==n?1:n,t.xAxis.logBase):n,s=this._getPointXY(s,t.xAxis.visibleRange,t.xAxis.isInversed),n=this._getPointXY(n,t.yAxis.visibleRange,t.yAxis.isInversed),e.location.X=t._isTransposed?n*r:s*a,e.location.Y=t._isTransposed?(1-s)*a:(1-n)*r,e.location},_getPointXY:function(e,t,i){var s=0,s=(e-t.min)/t.delta;return s=isNaN(s)?0:s,i?1-s:s},_dateTimeLabelFormat:function(e,t){switch(e.toLowerCase()){case"years":return t._labelFormat="MMM, yyyy";case"months":return t._labelFormat="dd, MMM";case"days":return t._labelFormat="dd/MM/yyyy";case"hours":return t._labelFormat="dd, hh:mm";case"minutes":return t._labelFormat="hh:mm";case"seconds":return t._labelFormat="mm:ss";case"milliseconds":return t._labelFormat="ss:fff";default:return t._labelFormat="dd/MM/yyyy"}},_getFontString:function(e){return null==e&&(e={}),e.FontFamily||(e.FontFamily="Arial"),e.FontStyle||(e.FontStyle="Normal"),e.Size||(e.Size="12px"),e.FontStyle+" "+e.Size+" "+e.FontFamily},_valueToVector:function(e,t){return this._coefficientToVector(this._valueToPolarCoefficient(e,t))},TransformToVisible:function(e,t,i,s){t="logarithmic"==e.xAxis._valueType&&0<t?Math.log(t,e.xAxis.logBase):t,i="logarithmic"==e.xAxis._valueType&&0<i?Math.log(i,e.yAxis.logBase):i;i=s.model.Radius*this._valueToCoefficient(e.yAxis,i),t=this._valueToVector(e.xAxis,t);return{X:s.model.centerX+i*t.X,Y:s.model.centerY+i*t.Y}},Transform3DToVisible:function(e,t,i,s){if(null==e.xAxis||null==e.yAxis)return new(void 0)(0,0);if(t="logarithmic"==e.xAxis._valueType.toLowerCase()&&0<t?math.log(t,void 0):t,s.model.requireInvertedAxes){var n=s.model.m_AreaBounds.X,a=s.model.m_AreaBounds.Y;return{X:n+e.yAxis.width*ej.EjSvgRender.utils._valueToCoefficient(e.yAxis,i,s),Y:a+e.xAxis.height*(1-ej.EjSvgRender.utils._valueToCoefficient(e.xAxis,t,s))}}n=e.xAxis.x,a=e.yAxis.y;return{X:t=n+Math.round(e.xAxis.width*ej.EjSvgRender.utils._valueToCoefficient(e.xAxis,t,s)),Y:i=a+Math.round(e.yAxis.height*(1-ej.EjSvgRender.utils._valueToCoefficient(e.yAxis,i,s)))}},_valueToPolarCoefficient:function(e,t){var i=e.visibleRange.min,s="category"!=e._valueType?(n=e.visibleRange.max-e.visibleRange.interval-e.visibleRange.min,e.visibleLabels.length-1):(n=e.visibleRange.delta,e.visibleLabels.length),n=(t-i)/n;return n*=1-1/s,n=isNaN(n)?0:n,e.isInversed?n:1-n},_coefficientToVector:function(e){e=Math.PI*(1.5-2*e);return{X:Math.cos(e),Y:Math.sin(e)}},_valueToCoefficient:function(e,t,i){return t=((t=(!i||"polaraxes"!=i.model.AreaType)&&e._valueType&&"logarithmic"==e._valueType.toLowerCase()?ej.EjSvgRender.utils._logBase(0==t?1:t,e.logBase):t)-e.visibleRange.min)/e.visibleRange.delta,e.isInversed?1-t:t},_getBoundingClientRect:function(e,t,i,s){var n,e=e.getBoundingClientRect(),t=ae("#"+t.svgObject.id)[0].getBoundingClientRect(),i=s?(n=this._getTransform(i.xAxis,i.yAxis,!0).x,this._getTransform(i.xAxis,i.yAxis,!0).y):(n=this._getTransform(i.xAxis,i.yAxis,!1).x,this._getTransform(i.xAxis,i.yAxis,!1).y);return{x:e.left-(n+t.left),y:e.top-(i+t.top),width:e.right-e.left,height:e.bottom-e.top}},_minMax:function(e,t,i){return i<e?i:e<t?t:e},_inside:function(e,t){return""!==e&&(e<=t.max&&e>=t.min)},_logBase:function(e,t){return Math.log(e)/Math.log(t)},_correctRect:function(e,t,i,s){return{X:Math.min(e,i),Y:Math.min(t,s),Width:Math.abs(i-e),Height:Math.abs(s-t)}},_getValuebyPoint:function(e,t,i,s){var n=s?i.xAxis.height:i.xAxis.width,s=s?i.yAxis.width:i.yAxis.height,n=i.xAxis.isInversed?1-e/n:e/n,s=i.yAxis.isInversed?1-t/s:t/s,n=n*i.xAxis.visibleRange.delta+i.xAxis.visibleRange.min,s=s*i.yAxis.visibleRange.delta+i.yAxis.visibleRange.min;return{PointX:n="logarithmic"==i.xAxis._valueType?Math.pow(i.xAxis.logBase,n):n,PointY:s="logarithmic"==i.yAxis._valueType?Math.pow(i.yAxis.logBase,s):s}}},ej.EjSvgRender.chartTransform3D={ToRadial:Math.PI/180,transform3D:function(e){return this.vector||(this.vector=new(new ej.Ej3DRender).vector3D,this.matrixobj=new(new ej.Ej3DRender).matrix3D,this.bsptreeobj=new(new ej.Ej3DRender).BSPTreeBuilder,this.polygon=new(new ej.Ej3DRender).polygon3D),{mViewport:e,Rotation:0,Tilt:0,Depth:0,PerspectiveAngle:0,needUpdate:!0,centeredMatrix:this.matrixobj.getIdentity(),Perspective:this.matrixobj.getIdentity(),resultMatrix:this.matrixobj.getIdentity(),viewMatrix:this.matrixobj.getIdentity(),Depth:0}},transform:function(e){this.setCenter(this.vector.vector3D(e.mViewport.Width/2,e.mViewport.Height/2,e.Depth/2),e),this.setViewMatrix(this.matrixobj.transform(0,0,e.Depth),e),this.setViewMatrix(this.matrixobj.getMatrixMultiplication(e.viewMatrix,this.matrixobj.turn(-this.ToRadial*e.Rotation)),e),this.setViewMatrix(this.matrixobj.getMatrixMultiplication(e.viewMatrix,this.matrixobj.tilt(-this.ToRadial*e.Tilt)),e),this.updatePerspective(e.PerspectiveAngle,e),e.needUpdate=!0},updatePerspective:function(e,t){e=(t.mViewport.Width+t.mViewport.Height)*Math.tan(this.degreeToRadianConverter((180-Math.abs(e%181))/2))+2*t.Depth/2;t.Perspective[0][0]=e,t.Perspective[1][1]=e,t.Perspective[2][3]=1,t.Perspective[3][3]=e},degreeToRadianConverter:function(e){return e*Math.PI/180},toScreen:function(e,t,i,s){i=i||this.result;return{x:(e=s?(this.matrixobj=s).getMatrixVectorMutiple(i(t,s),e):(t.chartObj=this.matrixobj,this.matrixobj.getMatrixVectorMutiple(i(t),e))).x,y:e.y}},setViewMatrix:function(e,t){t.viewMatrix!=e&&(t.viewMatrix=e,t.needUpdate=!0)},setCenteredMatrix:function(e,t){t.viewMatrix!=e&&(t.centeredMatrix=e,t.needUpdate=!0)},result:function(e,t){var i=(i=e.chartObj||this.matrixobj)||t;if(!e.needUpdate)return e.resultMatrix;t=this.matrixobj||t;return e.resultMatrix=i.getMatrixMultiplication(t.getInvertal(e.centeredMatrix),e.Perspective),e.resultMatrix=i.getMatrixMultiplication(e.resultMatrix,e.viewMatrix),e.resultMatrix=i.getMatrixMultiplication(e.resultMatrix,e.centeredMatrix),e.needUpdate=!1,e.resultMatrix},setCenter:function(e,t){t.centeredMatrix=this.matrixobj.transform(-e.x,-e.y,-e.z),t.needUpdate=!0},toPlane:function(e,t,i){var s=this.vector.vector3D(e.x,e.y,0),e=this.vector.vector3DPlus(s,this.vector.vector3D(0,0,1)),s=this.vector.vector3DMultiply(i.centeredMatrix,s),e=this.vector.vector3DMultiply(i.centeredMatrix,e);return s=this.vector.vector3DMultiply(this.matrixobj.getInvertal(i.Perspective),s),e=this.vector.vector3DMultiply(this.matrixobj.getInvertal(i.Perspective),e),s=this.polygon.getPoint(s,this.vector.vector3DMinus(e-s)),s=this.vector.vector3DMultiply(this.matrixobj.getInvertal(i.viewMatrix),s),this.vector.vector3DMultiply(this.matrixobj.getInvertal(i.centeredMatrix),s)}},ej.EjSvgRender.chartSymbol={_drawSeriesType:function(e,t,i){var s=i.model.series[t.SeriesIndex].type.toLowerCase(),n=i.legendItem.drawType;switch(s=ej.util.isNullOrUndefined(n)?s:n){case ej.datavisualization.Chart.Type.Line:n=ej.util.isNullOrUndefined(n)?this._drawLine(e,t,i,i.gLegendItemEle):this._drawStraightLine(e,t,i,i.gLegendItemEle);return n;case ej.datavisualization.Chart.Type.StepLine:return this._drawStepLine(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.StackingArea:case ej.datavisualization.Chart.Type.StackingArea100:case ej.datavisualization.Chart.Type.Area:case ej.datavisualization.Chart.Type.RangeArea:return this._drawArea(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.StepArea:return this._drawStepArea(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Bar:case ej.datavisualization.Chart.Type.StackingBar100:case ej.datavisualization.Chart.Type.StackingBar:return this._drawBar(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Pie:return this._drawPie(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Doughnut:return this._drawDoughnut(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Hilo:return this._drawHilo(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.HiloOpenClose:return this._drawHiloOpenClose(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Candle:return this._drawCandle(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Pyramid:return this._drawPyramid(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Funnel:return this._drawFunnel(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Spline:return this._drawSpline(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.SplineArea:case ej.datavisualization.Chart.Type.StackingSplineArea:case ej.datavisualization.Chart.Type.StackingSplineArea100:return this._drawSplineArea(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.RangeColumn:return this._drawRangeColumn(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Bubble:case ej.datavisualization.Chart.Type.Scatter:return this._drawCircle(e,t,i,i.gLegendItemEle);case ej.datavisualization.Chart.Type.Column:case ej.datavisualization.Chart.Type.StackingColumn:case ej.datavisualization.Chart.Type.StackingColumn100:case ej.datavisualization.Chart.Type.Waterfall:return this._drawColumn(e,t,i,i.gLegendItemEle);default:return this._drawRectangle(e,t,i,i.gLegendItemEle)}},_drawCircle:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),i=Math.sqrt(a.height*a.height+a.width*a.width)/2,a=t.Style,t={id:t.ID,cx:e.startX,cy:e.startY,r:i,fill:a.Color,"stroke-width":a.BorderWidth,stroke:a.BorderColor,opacity:a.Opacity,visibility:a.Visibility,lgndCtx:t.context};return n.drawCircle(t,s),e.startX-i},_drawLeftArrow:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),i="M "+(e.startX-i.width/2+i.width)+" "+(e.startY+i.height/4)+" L "+(e.startX-i.width/2+i.width)+" "+(e.startY+-i.height/4)+" L "+(e.startX-i.width/2+i.width/2)+" "+(e.startY+-i.height/4)+" L "+(e.startX-i.width/2+i.width/2)+" "+(e.startY+-i.height/2)+" L "+(e.startX-i.width/2)+" "+e.startY+" L "+(e.startX-i.width/2+i.width/2)+" "+(e.startY+i.height/2)+" L "+(e.startX-i.width/2+i.width/2)+" "+(e.startY+i.height/4)+" L "+(e.startX-i.width/2+i.width)+" "+(e.startY+i.height/4)+" z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:i};n.drawPath(i,s)},_drawRightArrow:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),i="M "+(e.startX-i.width/2)+" "+(e.startY+i.height/4)+" L "+(e.startX-i.width/2)+" "+(e.startY+-i.height/4)+" L "+(e.startX-i.width/2+i.width/2)+" "+(e.startY+-i.height/4)+" L "+(e.startX-i.width/2+i.width/2)+" "+(e.startY+-i.height/2)+" L "+(e.startX-i.width/2+i.width)+" "+e.startY+" L "+(e.startX-i.width/2+i.width/2)+" "+(e.startY+i.height/2)+" L "+(e.startX-i.width/2+i.width/2)+" "+(e.startY+i.height/4)+" L "+(e.startX-i.width/2)+" "+(e.startY+i.height/4)+" z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:i};n.drawPath(i,s)},_drawUpArrow:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),i="M "+(e.startX-i.width/2+i.width/4)+" "+(e.startY-i.height/2+i.height)+" L "+(e.startX-i.width/2+i.width/4)+" "+(e.startY-i.height/2+i.height/2)+" L "+(e.startX-i.width/2)+" "+(e.startY-i.height/2+i.height/2)+" L "+e.startX+" "+(e.startY-i.height/2)+" L "+(e.startX+i.width/2)+" "+(e.startY-i.height/2+i.height/2)+" L "+(e.startX+i.width/2-i.width/4)+" "+(e.startY-i.height/2+i.height/2)+" L "+(e.startX+i.width/2-i.width/4)+" "+(e.startY-i.height/2+i.height)+" L "+(e.startX-i.width/2+i.width/4)+" "+(e.startY-i.height/2+i.height)+" z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:i};n.drawPath(i,s)},_drawDownArrow:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),i="M "+(e.startX-i.width/2+i.width/4)+" "+(e.startY-i.height/2)+" L "+(e.startX+i.width/2-i.width/4)+" "+(e.startY-i.height/2)+" L "+(e.startX+i.width/2-i.width/4)+" "+(e.startY-i.height/2+i.height/2)+" L "+(e.startX+i.width/2)+" "+(e.startY-i.height/2+i.height/2)+" L "+e.startX+" "+(e.startY-i.height/2+i.height)+" L "+(e.startX-i.width/2)+" "+(e.startY-i.height/2+i.height/2)+" L "+(e.startX-i.width/2+i.width/4)+" "+(e.startY-i.height/2+i.height/2)+" L "+(e.startX-i.width/2+i.width/4)+" "+(e.startY-i.height/2)+" z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:i};n.drawPath(i,s)},_drawCross:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),i="M "+(e.startX+-i.width/2)+" "+e.startY+" L "+(e.startX+i.width/2)+" "+e.startY+" M "+e.startX+" "+(e.startY+i.height/2)+" L "+e.startX+" "+(e.startY+-i.height/2),i={id:t.ID,opacity:t.Style.Opacity,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,visibility:t.Style.Visibility,lgndCtx:t.context,d:i};n.drawPath(i,s)},_drawHorizLine:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),e="M "+(e.startX+-i.width/2)+" "+e.startY+" L "+(e.startX+i.width/2)+" "+e.startY,e={id:t.ID,opacity:t.Style.Opacity,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,visibility:t.Style.Visibility,lgndCtx:t.context,d:e};n.drawPath(e,s)},_drawVertLine:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),i="M "+e.startX+" "+(e.startY+i.height/2)+" L "+e.startX+" "+(e.startY+-i.height/2),i={id:t.ID,opacity:t.Style.Opacity,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,visibility:t.Style.Visibility,lgndCtx:t.context,d:i};n.drawPath(i,s)},_drawTriangle:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),i="M "+(e.startX+-i.width/2)+" "+(e.startY+i.height/2)+" L "+e.startX+" "+(e.startY+-i.height/2)+" L "+(e.startX+i.width/2)+" "+(e.startY+i.height/2)+" L "+(e.startX+-i.width/2)+" "+(e.startY+i.height/2)+" z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:i};n.drawPath(i,s)},_drawInvertedTriangle:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),i="M "+(e.startX+i.width/2)+" "+(e.startY-i.height/2)+" L "+e.startX+" "+(e.startY+i.height/2)+" L "+(e.startX-i.width/2)+" "+(e.startY-i.height/2)+" L "+(e.startX+i.width/2)+" "+(e.startY-i.height/2)+" z",i=(e.startX,e.startY,{id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:i});n.drawPath(i,s)},_drawHexagon:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),e="M "+(e.startX+-i.width/2)+" "+e.startY+" L "+(e.startX+-i.width/4)+" "+(e.startY+-i.height/2)+" L "+(e.startX+i.width/4)+" "+(e.startY+-i.height/2)+" L "+(e.startX+i.width/2)+" "+e.startY+" L "+(e.startX+i.width/4)+" "+(e.startY+i.height/2)+" L "+(e.startX+-i.width/4)+" "+(e.startY+i.height/2)+" L "+(e.startX+-i.width/2)+" "+e.startY+" z",e={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:e};n.drawPath(e,s)},_drawWedge:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),e="M "+(e.startX-i.width)+" "+e.startY+" L "+(e.startX+i.width)+" "+(e.startY+-i.height/2)+" L "+(e.startX+i.width/4*3)+" "+e.startY+" L "+(e.startX+i.width)+" "+(e.startY+i.height/2)+" L "+(e.startX-i.width)+" "+e.startY+" z",e={"stroke-linecap":"miter","stroke-miterlimit":i.width/4,id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:e};n.drawPath(e,s)},_drawPentagon:function(e,t,i,s){for(var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),a=Math.sqrt(i.height*i.height+i.width*i.width)/2,r=ej.EjSvgRender.utils._getStringBuilder(),o=0;o<=5;o++){var l=72*o,d=Math.PI/180*l,l=a*Math.cos(d),d=a*Math.sin(d);0==o?r.append("M "+(e.startX+l)+" "+(e.startY+d)+" "):r.append("L "+(e.startX+l)+" "+(e.startY+d)+" ")}r.append("z");i=r.toString(),i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:i};n.drawPath(i,s)},_drawStar:function(e,t,i,s){var n=i.svgRenderer,a=t.ShapeSize,a=(i.svgObject,"M "+(e.startX+a.width/3)+" "+(e.startY+-a.height/2)+" L "+(e.startX+-a.width/2)+" "+(e.startY+a.height/6)+" L "+(e.startX+a.width/2)+" "+(e.startY+a.height/6)+" L "+(e.startX+-a.width/3)+" "+(e.startY+-a.height/2)+" L "+e.startX+" "+(e.startY+a.height/2)+" L "+(e.startX+a.width/3)+" "+(e.startY+-a.height/2)+" z"),a={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:a};n.drawPath(a,s)},_drawRectangle:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),i="M "+(e.startX+-i.width/2)+" "+(e.startY+-i.height/2)+" L "+(e.startX+i.width/2)+" "+(e.startY+-i.height/2)+" L "+(e.startX+i.width/2)+" "+(e.startY+i.height/2)+" L "+(e.startX+-i.width/2)+" "+(e.startY+i.height/2)+" L "+(e.startX+-i.width/2)+" "+(e.startY+-i.height/2)+" z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:i};n.drawPath(i,s)},_drawTrapezoid:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),e="M "+(e.startX+-i.width/2)+" "+e.startY+" L "+(e.startX+-i.width/2)+" "+(e.startY+-i.height/4)+" L "+(e.startX+-i.width/2+i.width)+" "+(e.startY+-i.height/2)+" L "+(e.startX+-i.width/2+i.width)+" "+(e.startY+i.height/2)+" L "+(e.startX+-i.width/2)+" "+(e.startY+i.height/4)+" L "+(e.startX+-i.width/2)+" "+e.startY+" z",e={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:e};n.drawPath(e,s)},_drawDiamond:function(e,t,i,s){var n=i.svgRenderer,i=(i.svgObject,t.ShapeSize),e="M "+(e.startX+-i.width/2)+" "+e.startY+" L "+e.startX+" "+(e.startY+-i.height/2)+" L "+(e.startX+i.width/2)+" "+e.startY+" L "+e.startX+" "+(e.startY+i.height/2)+" L "+(e.startX+-i.width/2)+" "+e.startY+" z",e={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,d:e};n.drawPath(e,s)},_drawEllipse:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),i=e.startX,e=e.startY,a={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,lgndCtx:t.context,cx:i,cy:e,rx:a.width,ry:a.height/2};n.drawEllipse(a,s)},_drawImage:function(e,t,i,s){var n=i.svgRenderer,a=i.svgObject,r=t.ShapeSize,o=e.startX+-r.width/2,i=e.startY+-r.width/2,e=r.width,r=r.height,t={id:a.id+"_image"+t.PointIndex,height:r,width:e,href:t.Imageurl,x:o,y:i,visibility:"visible",lgndCtx:t.context};n.drawImage(t,s)},_drawStraightLine:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),r=t.ElementSpace,i="M "+(e.startX+-a.width/2+-r/4)+" "+(e.startY+a.height/10)+" L "+(e.startX+a.width/2+r/4)+" "+(e.startY+a.height/10),i={id:t.ID,fill:t.Style.Color,"stroke-width":2*t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX+-a.width/2+-r/4},_drawLine:function(e,t,i,s){var n,a,r=i.svgRenderer,o=(i.svgObject,t.ShapeSize),l=t.ElementSpace;return!0===i.model.enableCanvasRendering?(n="M "+(e.startX+-o.width/2+-l/4)+" "+(e.startY+o.height/10)+" L "+(e.startX-Math.floor(o.width/3))+" "+(e.startY+o.height/10)+" M "+(e.startX+Math.floor(o.width/3))+" "+(e.startY+o.height/10)+" L "+(e.startX+o.width/2+l/4)+" "+(e.startY+o.height/10),a={id:t.ID,fill:t.Style.Color,"stroke-width":2*t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:n,lgndCtx:!0},i="M "+(e.startX-Math.floor(o.width/3))+" "+(e.startY+o.height/10)+" a "+Math.floor(o.width/3)+" "+Math.floor(o.width/3)+" 0 1 0 "+2*Math.floor(o.width/3)+" 0 a"+Math.floor(o.width/3)+" "+Math.floor(o.width/3)+" 0 1 0 "+-2*Math.floor(o.width/3)+" 0",i={id:t.ID,fill:"transparent","stroke-width":2*t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0},r.drawPath(a,s),r.drawPath(i,s)):(n="M "+(e.startX+-o.width/2+-l/4)+" "+(e.startY+o.height/10)+" L "+(e.startX-Math.floor(o.width/3))+" "+(e.startY+o.height/10)+" M "+(e.startX+Math.floor(o.width/3))+" "+(e.startY+o.height/10)+" L "+(e.startX+o.width/2+l/4)+" "+(e.startY+o.height/10)+" M "+(e.startX-Math.floor(o.width/3))+" "+(e.startY+o.height/10)+" a "+Math.floor(o.width/3)+" "+Math.floor(o.width/3)+" 0 1 0 "+2*Math.floor(o.width/3)+" 0 a"+Math.floor(o.width/3)+" "+Math.floor(o.width/3)+" 0 1 0 "+-2*Math.floor(o.width/3)+" 0",a={id:t.ID,fill:"transparent","stroke-width":2*t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:n,lgndCtx:!0},r.drawPath(a,s)),e.startX+-o.width/2+-l/4},_drawColumn:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),i=t.ElementSpace,i="M "+(e.startX-a.width/5*3)+" "+(e.startY-a.height/5)+" L "+(e.startX+-a.width/10*3)+" "+(e.startY-a.height/5)+" L "+(e.startX+-a.width/10*3)+" "+(e.startY+a.height/2)+" L "+(e.startX-a.height/5*3)+" "+(e.startY+a.height/2)+" Z M "+(e.startX+-a.width/10-a.width/20)+" "+(e.startY-a.height/4-i/2)+" L "+(e.startX+a.width/10+a.width/20)+" "+(e.startY-a.height/4-i/2)+" L "+(e.startX+a.width/10+a.width/20)+" "+(e.startY+a.height/2)+" L "+(e.startX+-a.width/10-a.width/20)+" "+(e.startY+a.height/2)+" Z M "+(e.startX+a.width/10*3)+" "+e.startY+" L "+(e.startX+a.width/5*3)+" "+e.startY+" L "+(e.startX+a.width/5*3)+" "+(e.startY+a.height/2)+" L "+(e.startX+a.width/10*3)+" "+(e.startY+a.height/2)+" Z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX-a.width/5*3},_drawRangeColumn:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),i=t.ElementSpace,i="M "+(e.startX+-a.width/5)+" "+(e.startY+a.height/2+i/4)+" L "+(e.startX+-a.width/5)+" "+(e.startY-a.height/2-i/4)+" L "+(e.startX+a.width/2)+" "+(e.startY+-a.height/2+-i/4)+" L "+(e.startX+a.width/2)+" "+(e.startY+a.height/2+i/4)+" Z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX+-a.width/5},_drawBar:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),r=t.ElementSpace,i="M "+(e.startX+-a.width/2+-r/4)+" "+(e.startY-a.height/5*3)+" L "+(e.startX+a.width/10*3)+" "+(e.startY-a.height/5*3)+" L "+(e.startX+a.width/10*3)+" "+(e.startY-a.height/10*3)+" L "+(e.startX-a.width/2+-r/4)+" "+(e.startY-a.height/10*3)+" Z M "+(e.startX+-a.width/2+-r/4)+" "+(e.startY-a.height/5+r/20)+" L "+(e.startX+a.width/2+r/4)+" "+(e.startY-a.height/5+r/20)+" L "+(e.startX+a.width/2+r/4)+" "+(e.startY+a.height/10+r/20)+" L "+(e.startX-a.width/2+-r/4)+" "+(e.startY+a.height/10+r/20)+" Z M "+(e.startX-a.width/2+-r/4)+" "+(e.startY+a.height/5+r/10)+" L "+(e.startX+-a.width/4)+" "+(e.startY+a.height/5+r/10)+" L "+(e.startX+-a.width/4)+" "+(e.startY+a.height/2+r/10)+" L "+(e.startX-a.width/2+-r/4)+" "+(e.startY+a.height/2+r/10)+" Z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX+-a.width/2+-r/4},_drawStepLine:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),r=t.ElementSpace,i="M "+(e.startX+-a.width/2-r/4)+" "+(e.startY+a.height/2)+" L "+(e.startX+-a.width/2+a.width/10)+" "+(e.startY+a.height/2)+" L "+(e.startX+-a.width/2+a.width/10)+" "+e.startY+" L "+(e.startX+-a.width/10)+" "+e.startY+" L "+(e.startX+-a.width/10)+" "+(e.startY+a.height/2)+" L "+(e.startX+a.width/5)+" "+(e.startY+a.height/2)+" L "+(e.startX+a.width/5)+" "+(e.startY+-a.height/2)+" L "+(e.startX+a.width/2)+" "+(e.startY+-a.height/2)+"L "+(e.startX+a.width/2)+" "+(e.startY+a.height/2)+" L"+(e.startX+a.width/2+r/4)+" "+(e.startY+a.height/2),i={id:t.ID,fill:"transparent","stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX+-a.width/2-r/4},_drawSpline:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),i="M "+(e.startX-a.width/2)+" "+(e.startY+a.height/5)+" Q "+e.startX+" "+(e.startY-a.height)+" "+e.startX+" "+(e.startY+a.height/5)+" M "+e.startX+" "+(e.startY+a.height/5)+" Q "+(e.startX+a.width/2)+" "+(e.startY+a.height/2)+" "+(e.startX+a.width/2)+" "+(e.startY-a.height/2),i={id:t.ID,fill:"transparent","stroke-width":2*t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX-a.width/2},_drawSplineArea:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),i="M "+(e.startX-a.width/2)+" "+(e.startY+a.height/5)+" Q "+e.startX+" "+(e.startY-a.height)+" "+e.startX+" "+(e.startY+a.height/5)+" Z M "+e.startX+" "+(e.startY+a.height/5)+" Q "+(e.startX+a.width/2)+" "+(e.startY+a.height/2)+" "+(e.startX+a.width/2)+" "+(e.startY-a.height/2)+"  Z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX-a.width/2},_drawArea:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),r=t.ElementSpace,i="M "+(e.startX-a.width/2-r/4)+" "+(e.startY+a.height/2)+" L "+(e.startX+-a.width/4+-r/8)+" "+(e.startY-a.height/2)+" L "+e.startX+" "+(e.startY+a.height/4)+" L "+(e.startX+a.width/4+r/8)+" "+(e.startY+-a.height/2+a.height/4)+" L "+(e.startX+a.height/2+r/4)+" "+(e.startY+a.height/2)+" Z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX-a.width/2-r/4},_drawStepArea:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),r=t.ElementSpace,i="M "+(e.startX+-a.width/2+-r/4)+" "+(e.startY+a.height/2)+" L "+(e.startX+-a.width/2+-r/4)+" "+(e.startY+-a.height/2)+" L "+(e.startX-a.width/4)+" "+(e.startY-a.height/2)+" L "+(e.startX-a.width/4)+" "+(e.startY-a.height/4)+" L "+(e.startX+a.width/4)+" "+(e.startY-a.height/4)+" L "+(e.startX+a.width/4)+" "+e.startX+" L "+(e.startX+a.width/2+r/4)+" "+e.startY+" L "+(e.startX+a.width/2+r/4)+" "+(e.startY+a.height/2)+" Z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX+-a.width/2+-r/4},_drawPyramid:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),r=t.ElementSpace,i="M "+(e.startX+-a.width/2+-r/4)+" "+(e.startY+a.height/2+r/8)+" L "+e.startX+" "+(e.startY+-a.height/2+-r/8)+" L "+(e.startX+a.width/2+r/4)+" "+(e.startY+a.height/2+r/8)+" Z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX+-a.width/2+-r/4},_drawFunnel:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),r=t.ElementSpace,i="M "+(e.startX+-a.width/2+-r/5)+" "+(e.startY+-a.height/2+-r/4)+" L "+(e.startX+-a.width/5)+" "+(e.startY+a.height/4)+" L "+(e.startX+-a.width/5)+" "+(e.startY+a.height/2+r/4)+" L "+(e.startX+a.width/5)+" "+(e.startY+a.height/2+r/4)+" L "+(e.startX+a.width/5)+" "+(e.startY+a.height/4)+" L "+(e.startX+a.width/2+r/5)+" "+(e.startY+-a.height/2+-r/4)+" Z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX+-a.width/2+-r/5},_drawCandle:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),i=t.ElementSpace,i="M "+(e.startX+-a.width/2)+" "+(e.startY+a.height/4+i/8)+" L "+(e.startX+a.width/2)+" "+(e.startY+a.height/4+i/8)+" L "+(e.startX+a.width/2)+" "+(e.startY+-a.height/2+i/8)+" L "+(e.startX+-a.width/2)+" "+(e.startY+-a.height/2+i/8)+" Z M "+e.startX+" "+(e.startY+-a.height/2+i/8)+" L "+e.startX+" "+(e.startY+-a.height/2+-i/4)+" M "+e.startX+" "+(e.startY+a.height/4+i/8)+" L "+e.startX+" "+(e.startY+a.height/4+i/2),i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX+-a.width/2},_drawHilo:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),i=t.ElementSpace,i="M "+(e.startX+a.width/2)+" "+(e.startY+a.height/2+i/4)+" L "+(e.startX+a.width/2)+" "+(e.startY+-a.height/2+-i/4),i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX+a.width/2},_drawHiloOpenClose:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),i=(d(18,12,4.0710678118654755,270),t.ElementSpace),i="M "+e.startX+" "+(e.startY-a.height/10*3)+" L "+(e.startX-a.width/2-i/4)+" "+(e.startY-a.height/10*3)+" M "+e.startX+" "+(e.startY-a.height/2-i/4)+" L "+e.startX+" "+(e.startY+a.height/2+i/4)+" M "+e.startX+" "+(e.startY+a.height/10*3)+" L "+(e.startX+a.width/2+i/4)+" "+(e.startY+a.height/10*3),i={id:t.ID,fill:"transparent","stroke-width":t.Style.BorderWidth,stroke:t.Style.Color,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX-a.width/2},_drawDoughnut:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),r=t.ElementSpace,o=Math.sqrt(a.height*a.width)/2;o+=r/5;var l=d(e.startX,e.startY,o,270),i=d(e.startX+a.width/10,e.startY,o,270),r=t.ElementSpace,i="M "+e.startX+" "+e.startY+" L "+(e.startX+o)+" "+e.startY+" A "+o+" "+o+" 0 1 1 "+l[0]+" "+l[1]+" Z M "+(e.startX+a.width/10)+" "+(e.startY-a.height/10)+" L"+(e.startX+o)+" "+(e.startY-a.height/10)+" A "+o+" "+o+" 0 0 0 "+i[0]+" "+i[1]+" Z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0},t={id:t.ID,cx:e.startX,cy:e.startY,r:o/2,lgndCtx:!0,fill:"white","stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility};return n.drawPath(i,s),n.drawCircle(t,s),e.startX-o},_drawPie:function(e,t,i,s){var n=i.svgRenderer,a=(i.svgObject,t.ShapeSize),r=t.ElementSpace,o=Math.sqrt(a.height*a.width)/2;o+=r/5;var l=d(e.startX,e.startY,o,270),i=d(e.startX+a.width/10,e.startY,o,270),r=t.ElementSpace,i="M "+e.startX+" "+e.startY+" L "+(e.startX+o)+" "+e.startY+" A "+o+" "+o+" 0 1 1 "+l[0]+" "+l[1]+" Z M "+(e.startX+a.width/10)+" "+(e.startY-a.height/10)+" L"+(e.startX+o)+" "+(e.startY-a.height/10)+" A "+o+" "+o+" 0 0 0 "+i[0]+" "+i[1]+" Z",i={id:t.ID,fill:t.Style.Color,"stroke-width":t.Style.BorderWidth,stroke:t.Style.BorderColor,opacity:t.Style.Opacity,visibility:t.Style.Visibility,d:i,lgndCtx:!0};return n.drawPath(i,s),e.startX-o}},ej.EjSvgRender.seriesPalette={defaultMetro:["#E94649","#F6B53F","#6FAAB0","#C4C24A","#FB954F","#005277","#8BC652","#69D2E7","#E27F2D","#6A4B82"],defaultHighContrast:["#F93A00","#44E2D6","#DDD10D","#0AA368","#0556CB","#AB40B2","#5F930A","#D12E41","#E0670E","#008FFF"],defaultOffice:["#005277","#8BC652","#6A4B82","#E94649","#6FAAB0","#F7B74F","#C4C24A","#EF863F","#69D2E7","#FFD13E"],defaultMaterial:["#663AB6","#EB3F79","#F8AB1D","#B82E3D","#049CB1","#F2424F","#C2C924","#3DA046","#074D67","#02A8F4"],defaultGradient:{borderColors:["#F34649","#F6D321","#6EB9B0","#CBC26A","#FBAF4F","#E2CDB1","#FFC0B7","#68E1E6","#E1A62D","#9C6EBF"],seriesColors:[[{color:"#F34649",colorStop:"0%"},{color:"#B74143",colorStop:"100%"}],[{color:"#F6D321",colorStop:"0%"},{color:"#F6AE26",colorStop:"100%"}],[{color:"#6EB9B0",colorStop:"0%"},{color:"#3F77BD",colorStop:"100%"}],[{color:"#CBC26A",colorStop:"0%"},{color:"#9AAD21",colorStop:"100%"}],[{color:"#FBAF4F",colorStop:"0%"},{color:"#F07542",colorStop:"100%"}],[{color:"#E2CDB1",colorStop:"0%"},{color:"#AAA089",colorStop:"100%"}],[{color:"#8BC652",colorStop:"0%"},{color:"#6F9E41",colorStop:"100%"}],[{color:"#68E1E6",colorStop:"0%"},{color:"#3D9CBE",colorStop:"100%"}],[{color:"#E1A62D",colorStop:"0%"},{color:"#B66824",colorStop:"100%"}],[{color:"#9C6EBF",colorStop:"0%"}],[{color:"#593F6D",colorStop:"100%"}]]},blueMetro:["#005378","#006691","#007EB5","#0D97D4","#00AEFF","#14B9FF","#54CCFF","#87DBFF","#ADE5FF","#C5EDFF"],blueGradient:{seriesColors:[[{color:"#005277",colorStop:"0%"},{color:"#00304F",colorStop:"100%"}],[{color:"#006590",colorStop:"0%"},{color:"#004068",colorStop:"100%"}],[{color:"#007DB4",colorStop:"0%"},{color:"#00558B",colorStop:"100%"}],[{color:"#0D97D4",colorStop:"0%"},{color:"#057FC7",colorStop:"100%"}],[{color:"#00ADFE",colorStop:"0%"},{color:"#008BE9",colorStop:"100%"}],[{color:"#14B8FE",colorStop:"0%"},{color:"#0798EB",colorStop:"100%"}],[{color:"#53CBFF",colorStop:"0%"},{color:"#35AFEB",colorStop:"100%"}],[{color:"#86DAFF",colorStop:"0%"},{color:"#64C0EC",colorStop:"100%"}],[{color:"#ACE5FF",colorStop:"0%"},{color:"#8DCEED",colorStop:"100%"}],[{color:"#C4ECFF",colorStop:"0%"}],[{color:"#A3D1E6",colorStop:"100%"}]],borderColors:["#005277","#006590","#007DB4","#0D97D4","#00ADFE","#14B8FE","#53CBFF","#86DAFF","#ACE5FF","#C4ECFF"]},greenMetro:["#496612","#597B15","#709A1B","#87B62A","#9AD926","#A6DC37","#BCE654","#C8E780","#D5EFA5","#E2F3BE"],greenGradient:{seriesColors:[[{color:"#5C7F16",colorStop:"0%"},{color:"#384C08",colorStop:"100%"}],[{color:"#6A9319",colorStop:"0%"},{color:"#486009",colorStop:"100%"}],[{color:"#739D1C",colorStop:"0%"},{color:"#57760B",colorStop:"100%"}],[{color:"#90B546",colorStop:"0%"},{color:"#6E9215",colorStop:"100%"}],[{color:"#9AD826",colorStop:"0%"},{color:"#75A010",colorStop:"100%"}],[{color:"#A5DB36",colorStop:"0%"},{color:"#8EB91D",colorStop:"100%"}],[{color:"#BBE554",colorStop:"0%"},{color:"#A4C849",colorStop:"100%"}],[{color:"#C8E780",colorStop:"0%"},{color:"#B4D072",colorStop:"100%"}],[{color:"#D4EEA5",colorStop:"0%"},{color:"#BFD593",colorStop:"100%"}],[{color:"#E1F2BD",colorStop:"0%"}],[{color:"#C8D7A8",colorStop:"100%"}]],borderColors:["#5C7F16","#6A9319","#739D1C","#90B546","#9AD826","#A5DB36","#BBE554","#C8E780","#D4EEA5","#E1F2BD"]},sandleMetro:["#6C450C","#82520D","#A36812","#C07F1F","#E69719","#E89A2B","#EEB564","#F3CB93","#F7DEB4","#F9E6CA"],sandleGradient:{seriesColors:[[{color:"#7F602F",colorStop:"0%"},{color:"#512D04",colorStop:"100%"}],[{color:"#986827",colorStop:"0%"},{color:"#673803",colorStop:"100%"}],[{color:"#A16C1F",colorStop:"0%"},{color:"#8A4B05",colorStop:"100%"}],[{color:"#BF812A",colorStop:"0%"},{color:"#AD630D",colorStop:"100%"}],[{color:"#E49519",colorStop:"0%"},{color:"#B86607",colorStop:"100%"}],[{color:"#E7992A",colorStop:"0%"},{color:"#D7780D",colorStop:"100%"}],[{color:"#EDB463",colorStop:"0%"},{color:"#D98F31",colorStop:"100%"}],[{color:"#F2CA92",colorStop:"0%"},{color:"#DAAC6F",colorStop:"100%"}],[{color:"#F6DDB3",colorStop:"0%"},{color:"#DABE8F",colorStop:"100%"}],[{color:"#F8E5C9",colorStop:"0%"}],[{color:"#DDBE92",colorStop:"100%"}]],borderColors:["#7F602F","#986827","#A16C1F","#BF812A","#E49519","#E7992A","#EDB463","#F2CA92","#F6DDB3","#F8E5C9"]}},ej.EjSvgRender.themes={flatlight:{highlightColor:"black",background:"transparent",legend:{font:{color:"#282828"},title:{font:{color:"#282828"}}},title:{font:{color:"#565656"},subTitle:{font:{color:"#565656"}}},primaryXAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryX:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},primaryYAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,border:{color:"#3D3D3D",borderWidth:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryY:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#565656"}}},errorBar:{fill:"#000000",cap:{fill:"#000000"}},connectorLine:{color:"#565656"}},crosshair:{line:{width:1,color:"Black"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultMetro,colors:ej.EjSvgRender.seriesPalette.defaultMetro},flatdark:{highlightColor:"white",background:"#111111",legend:{font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}}},title:{font:{color:"#C9C9C9"},subTitle:{font:{color:"#C9C9C9"}}},primaryXAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:0,ry:0,fill:"#B5B5B5",border:{color:"#B5B5B5",width:1},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryX:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:0,ry:0,fill:"#B5B5B5",border:{color:"#B5B5B5",width:1},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},primaryYAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:0,ry:0,fill:"#B5B5B5",border:{color:"#B5B5B5",width:1},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryY:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:0,ry:0,fill:"#B5B5B5",border:{color:"#B5B5B5",width:1},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#C9C9C9"}}},errorBar:{fill:"#ffffff",cap:{fill:"#ffffff"}},connectorLine:{color:"#C9C9C9"}},crosshair:{line:{width:1,color:"White"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultMetro,colors:ej.EjSvgRender.seriesPalette.defaultMetro},gradientlight:{highlightColor:"black",background:"transparent",legend:{font:{color:"#282828"},title:{font:{color:"#282828"}}},title:{font:{color:"#565656"},subTitle:{font:{color:"#565656"}}},primaryXAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,fill:"#3D3D3D",border:{color:"#3D3D3D",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryX:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,fill:"#3D3D3D",border:{color:"#3D3D3D",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},primaryYAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,fill:"#3D3D3D",border:{color:"#3D3D3D",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryY:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#282828",axisLine:{color:"#8E8E8E"},font:{color:"#282828"},title:{font:{color:"#282828"}},crosshairLabel:{rx:3,ry:3,fill:"#3D3D3D",border:{color:"#3D3D3D",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#565656"}}},errorBar:{fill:"#000000",cap:{fill:"#000000"}},connectorLine:{color:"#565656"}},crosshair:{line:{width:1,color:"Black"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.defaultGradient.seriesColors},gradientdark:{highlightColor:"white",background:"#111111",legend:{font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}}},title:{font:{color:"#C9C9C9"},subTitle:{font:{color:"#C9C9C9"}}},primaryXAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryX:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},primaryYAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryY:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#C9C9C9",axisLine:{color:"#AAAAAA"},font:{color:"#C9C9C9"},title:{font:{color:"#C9C9C9"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#C9C9C9"}}},errorBar:{fill:"#ffffff",cap:{fill:"#ffffff"}},connectorLine:{color:"#C9C9C9"}},crosshair:{line:{width:1,color:"White"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.defaultGradient.seriesColors},highcontrast01:{highlightColor:"white",background:"#111111",legend:{font:{color:"#ffffff"},title:{font:{color:"#ffffff"}}},title:{font:{color:"#ffffff"},subTitle:{font:{color:"#ffffff"}}},primaryXAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#ffffff",axisLine:{color:"#AAAAAA"},font:{color:"#ffffff"},title:{font:{color:"#ffffff"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryX:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},axisLine:{color:"#AAAAAA"},font:{color:"#ffffff"},title:{font:{color:"#ffffff"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},primaryYAxis:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},labelBorder:{color:"#AAAAAA"},multiLevelLabelsColor:"#AAAAAA",multiLevelLabelsFontColor:"#ffffff",axisLine:{color:"#AAAAAA"},font:{color:"#ffffff"},title:{font:{color:"#ffffff"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},secondaryY:{majorGridLines:{color:"#333333"},majorTickLines:{color:"#AAAAAA"},minorGridLines:{color:"#333333"},minorTickLines:{color:"#AAAAAA"},axisLine:{color:"#AAAAAA"},font:{color:"#ffffff"},title:{font:{color:"#ffffff"}},crosshairLabel:{rx:3,ry:3,fill:"#B5B5B5",border:{color:"#B5B5B5",width:2},font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#444444"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#ffffff"}}},errorBar:{fill:"#ffffff",cap:{fill:"#ffffff"}},connectorLine:{color:"#C9C9C9"}},crosshair:{line:{width:1,color:"White"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultHighContrast,colors:ej.EjSvgRender.seriesPalette.defaultHighContrast},material:{highlightColor:"black",background:"transparent",legend:{font:{color:"#333333"},title:{font:{color:"#333333"}}},title:{font:{color:"#333333"},subTitle:{font:{color:"#333333"}}},primaryXAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#333333",axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryX:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},primaryYAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#333333",axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",borderWidth:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryY:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#333333"}}},errorBar:{fill:"#000000",cap:{fill:"#000000"}},connectorLine:{color:"#565656"}},crosshair:{line:{width:1,color:"Black"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultMaterial,colors:ej.EjSvgRender.seriesPalette.defaultMaterial},office365:{highlightColor:"black",background:"transparent",legend:{font:{color:"#333333"},title:{font:{color:"#333333"}}},title:{font:{color:"#333333"},subTitle:{font:{color:"#333333"}}},primaryXAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#333333",axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryX:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},primaryYAxis:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},labelBorder:{color:"#8E8E8E"},multiLevelLabelsColor:"#8E8E8E",multiLevelLabelsFontColor:"#333333",axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",borderWidth:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},secondaryY:{majorGridLines:{color:"#DFDFDF"},majorTickLines:{color:"#8E8E8E"},minorGridLines:{color:"#DFDFDF"},minorTickLines:{color:"#8E8E8E"},axisLine:{color:"#8E8E8E"},font:{color:"#333333"},title:{font:{color:"#333333"}},crosshairLabel:{rx:0,ry:0,border:{color:"#3D3D3D",width:1},fill:"#3D3D3D",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:"#DBDBDB"}}},commonSeriesOptions:{marker:{dataLabel:{font:{color:"#333333"}}},errorBar:{fill:"#000000",cap:{fill:"#000000"}},connectorLine:{color:"#565656"}},crosshair:{line:{width:1,color:"Black"}},seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.defaultOffice,colors:ej.EjSvgRender.seriesPalette.defaultOffice}},ae.extend(ej.EjSvgRender.themes,{azure:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.blueMetro,colors:ej.EjSvgRender.seriesPalette.blueMetro},azuredark:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.blueMetro,colors:ej.EjSvgRender.seriesPalette.blueMetro},"gradient-azure":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.blueGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.blueGradient.seriesColors},"gradient-azuredark":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.blueGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.blueGradient.seriesColors},lime:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.greenMetro,colors:ej.EjSvgRender.seriesPalette.greenMetro},limedark:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.greenMetro,colors:ej.EjSvgRender.seriesPalette.greenMetro},"gradient-lime":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.greenGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.greenGradient.seriesColors},"gradient-limedark":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.greenGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.greenGradient.seriesColors},saffron:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.sandleMetro,colors:ej.EjSvgRender.seriesPalette.sandleMetro},saffrondark:{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.sandleMetro,colors:ej.EjSvgRender.seriesPalette.sandleMetro},"gradient-saffron":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.sandleGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.sandleGradient.seriesColors},"gradient-saffrondark":{seriesBorderDefaultColors:ej.EjSvgRender.seriesPalette.sandleGradient.borderColors,colors:ej.EjSvgRender.seriesPalette.sandleGradient.seriesColors}})}(jQuery),ej.axisTypes={},ej.EjAxisRenderer=function(){};var _sideBySeriesPadding=function(e,t,i,s){for(var n=ej.DataManager(e.model._visibleSeries,ej.Query().sortBy("_zOrder")).executeLocal(),a=!1,r=n.length,o=(s.orientation.toLowerCase(),0);o<r;o++){var l=n[o].type.toLowerCase();if(-1!=l.indexOf("column")||-1!=l.indexOf("bar")||-1!=l.indexOf("waterfall")||"candle"==l||-1!=l.indexOf("hilo")||-1!=l.indexOf("box")){a=!0;break}}return"polaraxes"!=e.model.AreaType&&a?(s.m_minPointsDelta=void 0,t-=e=.5*ej.EjSvgRender.utils.getMinPointsDelta(s,e,t),i=i+e>Number.MAX_VALUE?Number.MAX_VALUE:i+e,s.padding=e):s.padding=0,{startPadding:t,endPadding:i}};ej.EjStripline=function(e){this.chart=e},function(Xe){function e(e,t){function i(){}return i.prototype=new e,Xe.extend(i.prototype,t),i}ej.EjAxisRenderer.prototype={_seriesMinMax:function(e,t,i,s,n){var a,r=t.orientation.toLowerCase(),o=i.length;if(n.seriesCollection=ej.util.isNullOrUndefined(n.seriesCollection)?{}:n.seriesCollection,0<o&&e.model._hasSeriesPoints&&0<i[0].points.length||0<this.chartObj.model.indicators[0]._points.length){for(var l,d,h,c,u,p,m,g,f=null,_=null,v=null,b=null,x=0;x<o;x++){if(u=i[x].visibility.toLowerCase(),p=i[x].points.length,a=0,"visible"===u){i[x]._visiblePoints=[];for(var y=0;y<p;y++){var w=i[x].points[y];(null==w.x||null==w.x||"object"!=typeof w.y&&isNaN(w.y)||null==w.y||null==w.y)&&!w.showIntermediateSum&&!w.showTotalSum&&0!=w.isEmpty||(i[x]._visiblePoints[a]=w,i[x]._visiblePoints[a].actualIndex=y,a++)}}t.maxPointLength=p}for(var C,S,T,R,x=0;x<o;x++){m=i[x]._visiblePoints.length;var k=i[x];if(0<m&&(u=i[x].visibility.toLowerCase(),p=i[x].points.length,"visible"===u&&0<p))if("horizontal"==r&&!e.model.requireInvertedAxes||"vertical"==r&&e.model.requireInvertedAxes){h=l=i[x]._visiblePoints[0].xValue;for(y=0;y<m;y++)(V=i[x]._visiblePoints[y].xValue)<h&&(h=V),l<V&&(l=V);i[x].minX=h,i[x].maxX=l,null==_&&0<m&&(f=i[x].maxX,_=i[x].minX),_>i[x].minX&&(_=i[x].minX),f<i[x].maxX&&(f=i[x].maxX)}else{var O,D,I,j,L,A,E,P,M=-1!=k.type.toLowerCase().indexOf("spline"),F=0,N=i[x]._visiblePoints;M&&(A=k._name=k.name||"series"+x,n.seriesCollection[A]={},N=ej.ejSplineSeries.prototype._isVisiblePoints(k),D=n.seriesCollection[A].naturalSpline=ej.ejSplineSeries.prototype.naturalSpline(N,k,0),"splinerangearea"==k.type.toLowerCase()&&(I=n.seriesCollection[A].naturalSpline1=ej.ejSplineSeries.prototype.naturalSpline(N,k,1)),n.seriesCollection[A].controlPoints=[],j=ej.ejSplineSeries.prototype.getBezierControlPoints,L=N.filter(function(e,t,i){return!ej.isNullOrUndefined(e.YValues[0])&&!isNaN(e.YValues[0])})),c=d=(M?L:N)[0].YValues[0];for(y=0;y<N.length;y++){var z,V=N[y];if(i[x]._hiloTypes&&"splinerangearea"!=k.type.toLowerCase())for(var B=0;B<2;B++)d>V.YValues[B]&&(d=V.YValues[B]),c<V.YValues[B]&&(c=V.YValues[B]);else if("boxandwhisker"==k.type.toLowerCase()){E=N[y].YValues[0][0],P=N[y].YValues[0][0];for(var H=0;H<V.YValues[0].length;H++)E>V.YValues[0][H]&&(E=V.YValues[0][H]),P<V.YValues[0][H]&&(P=V.YValues[0][H]);d=d<E?d:E,c=P<c?c:P}else M?0!=y&&V.visible&&N[y-1].visible?(n.seriesCollection[A].controlPoints.push(j(N[y-1],V,D[y-1],D[y],0,k,this)),"splinerangearea"==k.type.toLowerCase()&&(z=j(N[y-1],V,I[y-1],I[y],1,k,this),n.seriesCollection[A].controlPoints[F].controlPoint1.YValues[1]=z.controlPoint1.YValues[0],n.seriesCollection[A].controlPoints[F].controlPoint2.YValues[1]=z.controlPoint2.YValues[0]),O=n.seriesCollection[A].controlPoints[F++],d=Math.min(d,V.YValues[0],O.controlPoint1.YValues[0],O.controlPoint2.YValues[0]),c=Math.max(c,V.YValues[0],O.controlPoint1.YValues[0],O.controlPoint2.YValues[0]),"splinerangearea"==k.type.toLowerCase()&&(d=Math.min(d,V.YValues[1],O.controlPoint1.YValues[1],O.controlPoint2.YValues[1]),c=Math.max(c,V.YValues[1],O.controlPoint1.YValues[1],O.controlPoint2.YValues[1]))):(0==y||-1==k.type.toLowerCase().indexOf("stacking")&&"splinerangearea"!=k.type.toLowerCase()||(n.seriesCollection[A].controlPoints.push(j(N[y-1],V,D[y-1],D[y],0,k,this)),"splinerangearea"==k.type.toLowerCase()&&(z=j(N[y-1],V,I[y-1],I[y],1,k,this),n.seriesCollection[A].controlPoints[F].controlPoint1.YValues[1]=z.controlPoint1.YValues[0],n.seriesCollection[A].controlPoints[F].controlPoint2.YValues[1]=z.controlPoint2.YValues[0]),O=n.seriesCollection[A].controlPoints[F++]),d=Math.min(d,isNaN(V.YValues[0])?d:V.YValues[0]||null),c=Math.max(c,V.YValues[0]||null),"splinerangearea"==k.type.toLowerCase()&&(d=Math.min(d,isNaN(V.YValues[1])?d:V.YValues[1]||null),c=Math.max(c,V.YValues[1]||null))):(d>V.YValues[0]&&(d=V.YValues[0]),c<V.YValues[0]&&(c=V.YValues[0]))}i[x].minY=d,i[x].maxY=c,null==b&&0<m&&(v=i[x].maxY,b=i[x].minY),b>i[x].minY&&(b=i[x].minY),v<i[x].maxY&&(v=i[x].maxY),"column"!=(g=i[x].type)&&"bar"!=g||!t.startFromZero||(b=b<0?b:0)}}"horizontal"==r&&!e.model.requireInvertedAxes||"vertical"==r&&e.model.requireInvertedAxes?(this.chartObj.model.indicatorRange&&this.chartObj.model.indicatorRange[t.name]&&((b>(S=this.chartObj.model.indicatorRange[t.name]).min||null==b)&&(b=S.min),(v<S.max||null==v)&&(v=S.max)),f==_&&(f+=1),"double"==s?(_=(C=_sideBySeriesPadding(e,_,f,t)).startPadding,C=(f=C.endPadding)-_,t.range=this._getDoubleAutoRange(t,_,f,C)):t.range=this._getLogAutoRange(t,_,f,f-_)):(this.chartObj.model.stackedValue[t.name]&&(R=!0,b>(S=this.chartObj.model.stackedValue[t.name]).min&&(b=S.min),v<S.max&&(v=S.max)),this.chartObj.model.indicatorRange&&this.chartObj.model.indicatorRange[t.name]&&((b>(S=this.chartObj.model.indicatorRange[t.name]).min||null==b)&&(b=S.min),(v<S.max||null==v)&&(v=S.max)),v==b&&(v<0?v=0:v<=1&&0<v?b=0:(b=0,v+=1)),"column"!=g&&"bar"!=g||t.startFromZero||(T=t.range&&t.range.max||v,v+=T=t.range&&t.range.interval||this.calculateNumericNiceInterval(T-b,t,null,T),b-T<0&&0<b||R?b=0:b-=T),T=v-b,R=!1,t.range="double"==s?this._getDoubleAutoRange(t,b,v,T):this._getLogAutoRange(t,b,v,T))}else t.setRange?(R=null==t.range.min||null==t.range.min?0:t.range.min,Y=(T=null==t.range.max||null==t.range.max?5:t.range.max)-R,t.range="double"==s?this._getDoubleAutoRange(t,R,T,Y):this._getLogAutoRange(t,R,T,Y)):t.range={min:0,max:5,interval:1,Delta:4};var Y=Xe.extend({},ej.EjSvgRender.commonChartEventArgs);Y.data={range:t.range,axis:t},this.chartObj._trigger("axesRangeCalculate",Y);Y=Y.data.range;t.range={min:Y.min,max:Y.max,interval:Y.interval,delta:Y.max-Y.min}},_calculateTrendLineRange:function(e,t,i){for(var s,n,a,r,o,l=i.length,d=0;d<l;d++)if(n=(s=i[d]).trendlines,"cartesianaxes"==e.model.AreaType&&(t.name==s._xAxisName||t.name==s._yAxisName)){r=n.length;for(var h=0;h<r;h++)"visible"===(a=n[h]).visibility.toLowerCase()&&(t.name==s._xAxisName?(o=a.type.toLowerCase(),(new ej.trendlineTypes[o]).calculateTrendLineSegment(s,a,t,e)):t.name==s._yAxisName&&!t.setRange&&a.points&&1<a.points.length&&(a.points.length,t.range.min=t.range.min>a.minY?a.minY:t.range.min,t.range.max=t.range.max<a.maxY?a.maxY:t.range.max))}return!1},AlignRangeStart:function(e,t,i){var s,n,a,r=new Date(e);return"days"==i.toLowerCase()?(s=Math.floor(Math.floor(e.getDate()/t)*t),r=new Date(e.getFullYear(),e.getMonth(),s,0,0,0)):"hours"==i.toLowerCase()?(s=Math.floor(Math.floor(e.getHours()/t)*t),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),s,0,0)):"milliseconds"==i.toLowerCase()?(n=Math.floor(Math.floor(e.getMilliseconds()/t)*t),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),n)):"seconds"==i.toLowerCase()?(n=Math.floor(Math.floor(e.getSeconds()/t)*t),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),n,0)):"minutes"==i.toLowerCase()?(a=Math.floor(Math.floor(e.getMinutes()/t)*t),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),a,0,0)):"months"==i.toLowerCase()?(a=Math.floor(Math.floor(e.getMonth()/t)*t),r=new Date(e.getFullYear(),a,e.getDate(),0,0,0)):"years"==i.toLowerCase()&&(t=Math.floor(Math.floor(e.getFullYear()/t)*t),r=new Date(t,e.getMonth(),e.getDate(),0,0,0)),r},_increaseDateTimeInterval:function(e,t,i){var s=new Date(e);return"days"==i.toLowerCase()?s.setDate(e.getDate()+t):"hours"==i.toLowerCase()?s.setHours(e.getHours()+t):"milliseconds"==i.toLowerCase()?s.setMilliseconds(e.getMilliseconds()+t):"seconds"==i.toLowerCase()?s.setSeconds(e.getSeconds()+t):"minutes"==i.toLowerCase()?s.setMinutes(e.getMinutes()+t):"months"==i.toLowerCase()?s.setMonth(e.getMonth()+t):"years"==i.toLowerCase()&&s.setYear(e.getFullYear()+t),s},_calculatePadding:function(e){var t="string"!=typeof e.range.min||isNaN(Date.parse(e.range.min))?e.range.min.getTime():Date.parse(e.range.min),i="string"!=typeof e.range.max||isNaN(Date.parse(e.range.max))?e.range.max.getTime():Date.parse(e.range.max),s=this._increaseDateTimeInterval(new Date(t),e.range.interval,e._intervalType).getTime()-t,n=e.rangePadding.toLowerCase();if(!this.chartObj.zoomed&&!e.setRange){t=new Date(t),i=new Date(i);var a=e._intervalType.toLowerCase();if("none"==e.rangePadding.toLowerCase())t=t.getTime(),i=i.getTime();else if("additional"==n||"round"==n)switch(a){case"years":var r=t.getFullYear(),a=i.getFullYear(),i="additional"==e.rangePadding.toLowerCase()?(t=new Date(r-e.range.interval,1,1,0,0,0).getTime(),new Date(a+e.range.interval,1,1,0,0,0).getTime()):(t=new Date(r,0,0,0,0,0).getTime(),new Date(a,11,30,23,59,59).getTime());break;case"months":var o=t.getMonth(),l=i.getMonth();i="round"==n?(t=new Date(t.getFullYear(),o,0,0,0,0).getTime(),new Date(i.getFullYear(),l,new Date(i.getFullYear(),i.getMonth(),0).getDate(),23,59,59).getTime()):(t=new Date(t.getFullYear(),o+-e.range.interval,1,0,0,0).getTime(),new Date(i.getFullYear(),l+e.range.interval,2==l?28:30,0,0,0).getTime());break;case"days":o=t.getDate(),l=i.getDate();i="round"==n?(t=new Date(t.getFullYear(),t.getMonth(),o,0,0,0).getTime(),new Date(i.getFullYear(),i.getMonth(),l,23,59,59).getTime()):(t=new Date(t.getFullYear(),t.getMonth(),o+-e.range.interval,0,0,0).getTime(),new Date(i.getFullYear(),i.getMonth(),l+e.range.interval,0,0,0).getTime());break;case"hours":var d=t.getHours()/e.range.interval*e.range.interval,h=i.getHours()+(t.getHours()-d);i="round"==n?(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),d,0,0).getTime(),new Date(i.getFullYear(),i.getMonth(),i.getDay(),h,59,59).getTime()):(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),d-e.range.interval,0,0).getTime(),new Date(i.getFullYear(),i.getMonth(),i.getDay(),h+e.range.interval,0,0).getTime());break;case"minutes":d=t.getMinutes()/e.range.interval*e.range.interval,h=i.getMinutes()+(t.getMinutes()-d);i="round"==n?(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHour(),d,0).getTime(),new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHour(),h,59).getTime()):(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours(),d-e.range.interval,0).getTime(),new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHours(),d+e.range.interval,0).getTime());break;case"seconds":var c=t.getSeconds()/e.range.interval*e.range.interval,u=i.getSeconds()+(t.getSeconds()-c);i="round"==n?(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours(),t.getMinutes(),c,0).getTime(),new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHour(),i.getMinutes(),u,0).getTime()):(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours(),t.getMinutes(),c-e.range.interval,0).getTime(),new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHours(),i.getMinutes(),u+e.range.interval,0).getTime());break;case"milliseconds":c=t.getMilliseconds()/e.range.interval*e.range.interval,u=i.getMilliseconds()+(t.getMilliseconds()-c);i="round"==n?(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours(),t.getMinutes(),t.getSeconds(),c).getTime(),new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHours(),i.getMinutes(),i.getSeconds(),u).getTime()):(t=new Date(t.getFullYear(),t.getMonth(),t.getDay(),t.getHours(),t.getMinutes(),t.getSeconds(),c-e.range.interval).getTime(),new Date(i.getFullYear(),i.getMonth(),i.getDay(),i.getHours(),i.getMinutes(),i.getSeconds(),u+e.range.interval).getTime())}}e.actualRange.interval=s,e.actualRange.min=t,e.actualRange.max=i,e._interval=e.range.interval,e.actualRange.delta=e.actualRange.max-e.actualRange.min,e.range.min=new Date(t),e.range.max=new Date(i),this._calculateVisibleRange(e)},_calculateVisibleRange:function(e,t,i){if(this.chartObj=t||this.chartObj,e.visibleRange=i?e.visibleRange:Xe.extend(!0,{},e.actualRange),(e.zoomFactor<1||0<e.zoomPosition)&&"polaraxes"!=this.chartObj.model.AreaType&&!this.chartObj.model.disableZoom){e.zoomFactor=1<e.zoomFactor?1:e.zoomFactor<0?0:e.zoomFactor,e.zoomPosition=e.zoomPosition<0?0:1<e.zoomPosition?1:e.zoomPosition;var s=e.actualRange;a=e.isInversed?(n=e.actualRange.max-e.zoomPosition*e.actualRange.delta)-e.zoomFactor*e.actualRange.delta:(n=e.actualRange.min+e.zoomPosition*e.actualRange.delta)+e.zoomFactor*e.actualRange.delta,n<s.min&&(a+=s.min-n,n=s.min),a>s.max&&(n-=a-s.max,a=s.max);t=new Date(n),s=new Date(a);n==a&&(t=new Date(Date.parse(t)-2592e6),s=new Date(Date.parse(s)+2592e6));var n=Math.min(t.getTime(),s.getTime()),a=Math.max(t.getTime(),s.getTime()),s=e.enableAutoIntervalOnZooming?this.calculateDateTimeNiceInterval(e,t,s):{interval:e._interval,intervalType:e._intervalType},t=this._increaseDateTimeInterval(t,s.interval,s.intervalType).getTime()-n;if(i)return{min:n,max:a,interval:t};e._intervalType=s.intervalType,e.visibleRange.min=n,e.visibleRange.max=a,e.visibleRange.interval=t,e.visibleRange.delta=Math.abs(e.visibleRange.max-e.visibleRange.min),e._interval=s.interval}},_calculateAxisLabels:function(e){for(var t,i,s=(e.enableAutoIntervalOnZooming?e.visibleRange:e.actualRange).min,n=this.chartObj.zoomed||e.zoomed||!e.setRange?this.AlignRangeStart(new Date(s),e._interval,e._intervalType).getTime():e.visibleRange.min;n<=e.visibleRange.max;)n>=e.visibleRange.min&&n<=e.visibleRange.max&&(t=ej.format(new Date(n),e.labelFormat||ej.EjSvgRender.utils._dateTimeLabelFormat(e._intervalType,e),this.chartObj.model.locale),(i=Xe.extend({},ej.EjSvgRender.commonChartEventArgs)).data={label:{Text:t,Value:n},axis:e},this.chartObj._trigger("axesLabelRendering",i),e.visibleLabels.push({Value:n,Text:i.data.label.Text})),n=this._increaseDateTimeInterval(new Date(n),e._interval,e._intervalType).getTime(),e.visibleLabels[e.visibleLabels.length-1]=e.visibleLabels[e.visibleLabels.length-1];e._LableMaxWidth=ej.EjSvgRender.utils._getMaxLabelWidth(e,this.chartObj),"vertical"==currentAxis.orientation&&(e._LableMaxWidth.maxWidth=55,e._LableMaxWidth.width=55)},calculateDateTimeNiceInterval:function(e,t,i){var s=Math.abs((t.getTime()-i.getTime())/864e5),t=this.calculateNumericNiceInterval(s/365,e,"years");if(1<=t)return{interval:t,intervalType:"Years"};if(1<=(t=this.calculateNumericNiceInterval(s/30,e,"months")))return{interval:t,intervalType:"Months"};if(1<=(t=this.calculateNumericNiceInterval(s,e,"days")))return{interval:t,intervalType:"Days"};i=24*s;if(1<=(t=this.calculateNumericNiceInterval(i,e,"hours")))return{interval:t,intervalType:"Hours"};i=24*s*60;if(1<=(t=this.calculateNumericNiceInterval(i,e,"minutes")))return{interval:t,intervalType:"Minutes"};i=24*s*60*60;if(1<=(t=this.calculateNumericNiceInterval(i,e,"seconds")))return{interval:t,intervalType:"Seconds"};s=24*s*60*60*1e3;return 1<=(t=this.calculateNumericNiceInterval(s,e,"milliseconds"))?{interval:t,intervalType:"Milliseconds"}:void 0},calculateNumericNiceInterval:function(e,t,i,s){var n=this.GetActualDesiredIntervalsCount(t,t.length),a=e/n;if("double"==t._valueType&&null!=t.desiredIntervals)return a;for(var r=Math.pow(10,Math.floor(ej.EjSvgRender.utils._logBase(a,10))),o=[10,5,2,1],l=s||t.range&&t.range.max,d=0;d<o.length;d++){var h=r*o[d];if(n<e/h)return"datetime"==t._valueType?ej.util.isNullOrUndefined(t.intervalType)||t.intervalType.toLowerCase()!=i?a:Math.ceil(a):!ej.util.isNullOrUndefined(t.range)&&!ej.util.isNullOrUndefined(t.range.max)&&l<a?h:a;a=h}return a},GetActualDesiredIntervalsCount:function(e,t){if(ej.util.isNullOrUndefined(e.desiredIntervals)){var i=("horizontal"==e.orientation.toLowerCase()?.533:1)*e.maximumLabels;return i=Math.max(t*(i/100),1)}return e.desiredIntervals},_calculateRange:function(e,t){if(!this.chartObj.zoomed){var i=new Date;if(0<t.length&&this.chartObj.model._hasSeriesPoints&&0<t[0].points.length||0<this.chartObj.model.indicators[0]._points.length){for(var s,n,a,r,o,l={maxX:null,minX:null},d={maxY:null,minY:null},h=0;h<t.length;h++){if(o=t[h].points.length,0<o&&"visible"===t[h].visibility.toLowerCase()&&0<t[h].points.length){r=s=new Date(t[h].points[0].xValue),a=n=t[h].points[0].YValues[0];for(var c=0;c<o;c++)null!=r&&null!=r?(r>t[h].points[c].xValue&&(r=t[h].points[c].xValue),s<t[h].points[c].xValue&&(s=t[h].points[c].xValue)):r=s=new Date(t[h].points[c+1].xValue),n>t[h].points[c].YValues[0]&&(n=t[h].points[c].YValues[0]),a<t[h].points[c].YValues[0]&&(a=t[h].points[c].YValues[0]);t[h].minX=r,t[h].maxX=s,t[h].minY=n,t[h].maxY=a,(!e.maxPointLength||e.maxPointLength<o)&&(e.maxPointLength=o)}(l.minX=(null==l.minX&&"number"!=typeof t[h].minX?t[h]:l).minX)>t[h].minX&&(l.minX=("number"!=typeof t[h].minX?t[h]:l).minX),(l.maxX=(null==l.maxX&&"number"!=typeof t[h].maxX?t[h]:l).maxX)<t[h].maxX&&(l.maxX=("number"!=typeof t[h].maxX?t[h]:l).maxX),d.minY>t[h].minY&&(d.minY=t[h].minY),d.maxY<t[h].maxY&&(d.maxY=t[h].maxY)}this.chartObj.model.indicatorRange&&this.chartObj.model.indicatorRange[e.name]&&(p=this.chartObj.model.indicatorRange[e.name],(l.minX>new Date(p.min)||null==l.minX)&&(l.minX=new Date(p.min)),(l.maxX<new Date(p.max)||null==l.maxX)&&(l.maxX=new Date(p.max))),l.minX=null==l.minX?i:l.minX,l.maxX=null==l.maxX?new Date((new Date).setMonth(i.getMonth()+5)):l.maxX,l.minX==l.maxX&&(l.minX=new Date(Date.parse(l.minX)-2592e6),l.maxX=new Date(Date.parse(l.maxX)+2592e6));var u=_sideBySeriesPadding(this.chartObj,l.minX.getTime(),l.maxX.getTime(),e);l.minX=new Date(u.startPadding),l.maxX=new Date(u.endPadding);var p=this.calculateDateTimeNiceInterval(e,l.minX,l.maxX);e._intervalType=e.intervalType||p.intervalType,"auto"==e.intervalType&&(e._intervalType=e.intervalType=p.intervalType),null!=e.setAxisInterval&&null!=e.setAxisInterval||(e.setAxisInterval=!(!e.range||!e.range.interval)),e._setInterval&&!this.chartObj._chartResize&&e.range&&e._setInterval!=e.range.interval&&(e._setInterval=null),e.setRange?(e.range.max||(e.range.max=l.maxX),e.range.min||(e.range.min=l.minX),"string"==typeof e.range.min&&-1!=e.range.min.indexOf("/Date(")&&(e.range.min=new Date(parseInt(e.range.min.substr(6)))),"string"==typeof e.range.max&&-1!=e.range.max.indexOf("/Date(")&&(e.range.max=new Date(parseInt(e.range.max.substr(6)))),new Date(e.range.min).getTime()==new Date(e.range.max).getTime()&&(e.range.max=new Date(Date.parse(e.range.max)+864e5)),p=this.calculateDateTimeNiceInterval(e,new Date(e.range.min),new Date(e.range.max)),e._intervalType=e.intervalType||p.intervalType,e.setAxisInterval||(e.range.interval=p.interval,e._setInterval=p.interval),e.actual_Range=Xe.extend(!0,{},e.range),e.setRange=!0,u=e._setInterval?p.interval:e.range.interval||e.actual_Range.interval,e.range={min:e.actual_Range.min,max:e.actual_Range.max,interval:u}):e.range={min:l.minX,max:l.maxX,interval:p.interval}}else e.setRange?(e.range.min=null===e.range.min||void 0===e.range.min?i:e.range.min,e.range.max=null===e.range.max||void 0===e.range.max?new Date((new Date).setMonth(i.getMonth()+5)):e.range.max,e.range.interval=null===e.range.interval||void 0===e.range.interval?1:e.range.interval,e._intervalType="Months"):(e.range={min:i,max:new Date((new Date).setMonth(i.getMonth()+5)),interval:1},e._intervalType=ej.util.isNullOrUndefined(e.intervalType)?"Months":e.intervalType);i=Xe.extend({},ej.EjSvgRender.commonChartEventArgs);i.data={range:e.range,axis:e},this.chartObj._trigger("axesRangeCalculate",i);i=i.data.range;e.range={min:i.min,max:i.max,interval:i.interval,delta:i.max-i.min}}},_calculateRanges:function(e,t,i){this.chartObj=e,this._saveRange(e,t),this._calculateRange(t,i),t._range=t.range,e.model._drawTrendline&&this._calculateTrendLineRange(e,t,i),this._calculatePadding(t),this._calculateAxisLabels(t)},_saveRange:function(e,t){(e.zoomed||e.resetZooming)&&(t.range=null!=t.range&&null!=t.range.min&&null!=t.range.max?t.range:t._range),t._initialRange&&(t._initialRange!=t.range&&null!=t.range?t.setRange=!0:null==t.range&&(t.setRange=!1)),t._initialRange=null==t.range?{min:null,max:null,interval:null}:{min:t.range.min,max:t.range.max,interval:t.range.interval}}};var t=e(ej.EjAxisRenderer);ej.axisTypes.datetime=t;t=e(ej.EjAxisRenderer,{_calculateRange:function(e,t,i,s){e.zoomed||this._seriesMinMax(e,t,i,"double",s)},_getDoubleAutoRange:function(e,t,i){var s;return e.setRange?(ej.util.isNullOrUndefined(e.range.max)&&(e.range.max=i),ej.util.isNullOrUndefined(e.range.min)&&(e.range.min=t),e.actual_Range=Xe.extend(!0,{},e.range),e.setRange=!0):e.range={min:t,max:i},s=e.range.max-e.range.min,t=this.calculateNumericNiceInterval(s,e),20<ej.EjSvgRender.utils._decimalPlaces(t)&&(i=t.toString(),t=parseFloat(i.substring(0,i.indexOf("."))+i.substring(i.indexOf("."),22))),(ej.util.isNullOrUndefined(e.range.interval)||e.range.interval<0)&&(e.range.interval=t),e.range.delta=s,e.range},_calculatePadding:function(e,t,i){var s=i.min,n=i.max,a=t.rangePadding.toLowerCase(),r=i.interval;t.setRange||e.zoomed||("normal"==a?(s<(e=0)?(s=0,r+(e=i.min+i.min/20)%r<=.365*r&&(e-=r),e%r<0&&(e=e-r-e%r)):0<(e=s<5/6*n?0:s-(n-s)/2)%r&&(e-=e%r),r-(i=0<n?n+(n-s)/20>Number.MAX_VALUE?Number.MAX_VALUE:n+(n-s)/20:n-(n-s)/20)%r<=.365*r&&(i=i+r>Number.MAX_VALUE?Number.MAX_VALUE:i+r),0<i%r&&(i=i+r-i%r>Number.MAX_VALUE?Number.MAX_VALUE:i+r-i%r),e<=0&&(r=this.calculateNumericNiceInterval(i-e,t),i=Math.ceil(i/r)*r>Number.MAX_VALUE?Number.MAX_VALUE:Math.ceil(i/r)*r),s=t.roundingPlaces?parseFloat(e.toFixed(t.roundingPlaces)):parseFloat(e.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(r)?1:ej.EjSvgRender.utils._decimalPlaces(r))),n=t.roundingPlaces?parseFloat(i.toFixed(t.roundingPlaces)):parseFloat(i.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(r)?1:ej.EjSvgRender.utils._decimalPlaces(r)))):"additional"!=a&&"round"!=a||(s=Math.floor(s/r)*r,n=Math.ceil(n/r)*r>Number.MAX_VALUE?Number.MAX_VALUE:Math.ceil(n/r)*r,"additional"==a&&(s-=r,n=n+r>=Number.MAX_VALUE?Number.MAX_VALUE:n+r))),t.actualRange.min=s,t.actualRange.max=n,t.actualRange.interval=r,t.range.min=s,t.range.max=n,t.range.interval=r,t.actualRange.delta=n-s>=Number.MAX_VALUE?n:n-s,this._calculateVisibleRange(t),t.rangePadding=t._rangePadding},_calculateVisibleRange:function(e,t,i){if(this.chartObj=t||this.chartObj,e.visibleRange=i?e.visibleRange:Xe.extend(!0,{},e.actualRange),(e.zoomFactor<1||0<e.zoomPosition)&&"polaraxes"!=this.chartObj.model.AreaType&&!this.chartObj.model.disableZoom){var s,n,a=e.actualRange;e.zoomFactor=1<e.zoomFactor?1:e.zoomFactor<0?0:e.zoomFactor,e.zoomPosition=e.zoomPosition<0?0:1<e.zoomPosition?1:e.zoomPosition,n=e.isInversed?(s=e.actualRange.max-e.zoomPosition*e.actualRange.delta)-e.zoomFactor*e.actualRange.delta:(s=e.actualRange.min+e.zoomPosition*e.actualRange.delta)+e.zoomFactor*e.actualRange.delta,s<a.min&&(n+=a.min-s,s=a.min),n>a.max&&(s-=n-a.max,n=a.max);t=Math.abs(n-s),a=e.enableAutoIntervalOnZooming?this.calculateNumericNiceInterval(t,e):e.actualRange.interval;if(i)return{min:Math.min(s,n),max:Math.max(s,n),delta:t,interval:a};e.visibleRange.min=Math.min(s,n),e.visibleRange.max=Math.max(s,n),e.visibleRange.delta=t,e.visibleRange.interval=a,e.zoomed=null===this.chartObj.zoomed||void 0===this.chartObj.zoomed||this.chartObj.zoomed}},_calculateAxisLabels:function(e,t){var i,s,n,a,r,o,l=t.roundingPlaces,d=this.chartObj.model.locale;t.labelFormat;for(t.visibleRange.min=parseFloat(t.visibleRange.min.toPrecision(14)),t.visibleRange.max=parseFloat(t.visibleRange.max.toPrecision(14)),i=this.chartObj&&this.chartObj.chartExtensions||e.zoomed||t.zoomed||t.padding?t.visibleRange.min-t.visibleRange.min%t.visibleRange.interval:t.visibleRange.min;i<=t.visibleRange.max;i+=t.visibleRange.interval)if(ej.EjSvgRender.utils._inside(i,t.visibleRange)){if(i==r)break;i=parseFloat((r=i).toFixed(!l&&20<l?l:20)),n=l?i:parseFloat(i.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval))),a=l?parseFloat(i.toFixed(l)):parseFloat(i.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval))),a=(s=t.labelFormat)?null!=s.match("{value}")?s.replace("{value}",a):0!=s.indexOf("e")&&0!=s.indexOf("E")||-1!=s.indexOf("ej.format")?(-1!=s.indexOf("ej.format")&&(s=s.substring(s.indexOf("(")+1,s.indexOf(")"))),ej.format(a,s,d)):(o=null==(o=s.match(/(\d+)/g))?6:20<o?20:o,a.toExponential(o)):t.isStacked100?a+"%":d?a.toLocaleString(d):a,(o=Xe.extend({},ej.EjSvgRender.commonChartEventArgs)).data={label:{Text:a,Value:i},axis:t},e._trigger("axesLabelRendering",o),t.visibleLabels.push({Value:n,Text:o.data.label.Text})}for(var h,c=0,u=t.visibleLabels,p=0;p<u.length;p++)"string"==typeof u[p].Text&&(h=u[p].Text.split("<br>").length,c=Math.max(h,c));t.rowsCount=c,t._LableMaxWidth=ej.EjSvgRender.utils._getMaxLabelWidth(t,this.chartObj),"vertical"==t.orientation&&(t._LableMaxWidth.maxWidth=this.chartObj.maxLabelWidth,t._LableMaxWidth.width=this.chartObj.maxLabelWidth)},_calculateRanges:function(e,t,i,s){this.chartObj=e,this._saveRange(e,t),this._calculateRange(e,t,i,s),t._range=t.range,e.model._drawTrendline&&this._calculateTrendLineRange(e,t,i),this._calculatePadding(e,t,t.range),0<t.maximumLabels&&this._calculateAxisLabels(e,t)}});ej.axisTypes.double=t;t=e(ej.EjAxisRenderer,{_getRoundValue:function(e,t,i){return(i?Math.ceil(e/t):Math.floor(e/t))*t},calculateLogNiceInterval:function(e,t){for(var i=this.GetActualDesiredIntervalsCount(t,t.length),s=e,n=Math.pow(10,Math.floor(ej.EjSvgRender.utils._logBase(s,10))),a=[10,5,2,1],r=0;r<a.length;r++){var o=n*a[r];if(i<e/o)return s;s=o}return s},_getLogAutoRange:function(e,t,i,s){var n=ej.EjSvgRender.utils._logBase(t,e.logBase),n=Xe.isNumeric(n)?n:t,a=ej.EjSvgRender.utils._logBase(i,e.logBase),a=Xe.isNumeric(a)?a:i,r=this._getRoundValue(n,1,!1),t=this._getRoundValue(a,1,!0);0==r&&0==t&&(r=ej.EjSvgRender.utils._logBase(i-i/2,e.logBase),t=ej.EjSvgRender.utils._logBase(i+i/2,e.logBase)),s=t-r;i=this.calculateLogNiceInterval(s,e);return e.actual_Range={min:r,max:t,interval:i,Delta:s},r=Math.pow(e.logBase,Math.floor(n)),s=(t=Math.pow(e.logBase,Math.ceil(a)))-r,e.setRange?(ej.util.isNullOrUndefined(e.range.interval)&&(e.range.interval=i),ej.util.isNullOrUndefined(e.range.max)&&(e.range.max=t),ej.util.isNullOrUndefined(e.range.min)&&(e.range.min=r),e.actual_Range=Xe.extend(!0,{},e.range),ej.util.isNullOrUndefined(e.actual_Range.max)||(e.actual_Range.max=ej.EjSvgRender.utils._logBase(e.actual_Range.max,e.logBase),e.actual_Range.max=this._getRoundValue(e.actual_Range.max,1,!0)),ej.util.isNullOrUndefined(e.range.min)||(e.actual_Range.min=ej.EjSvgRender.utils._logBase(e.actual_Range.min,e.logBase),e.actual_Range.min=this._getRoundValue(e.actual_Range.min,1,!1)),e.setRange=!0,e.range):e.range={min:r,max:t,interval:i,Delta:s}},_calculateLogRange:function(e,t,i,s){e.zoomed||this._seriesMinMax(e,t,i,"logarithmic",s)},_calculateLogPadding:function(e,t,i){var s=i.min,n=i.max,i=i.interval;t.actualRange.min=s,t.actualRange.max=n,t.actualRange.interval=i,t.actualRange.delta=n-s,this._calculateVisibleRange(t)},_calculateVisibleRange:function(e,t,i){if(this.chartObj=t||this.chartObj,e.visibleRange=i?e.visibleRange:Xe.extend(!0,{},e.actualRange),(e.zoomFactor<1||0<e.zoomPosition)&&"polaraxes"!=this.chartObj.model.AreaType&&!this.chartObj.model.disableZoom){e.zoomFactor=1<e.zoomFactor?1:e.zoomFactor<0?0:e.zoomFactor,e.zoomPosition=e.zoomPosition<0?0:1<e.zoomPosition?1:e.zoomPosition;var s,n,a=e.actualRange;n=e.isInversed?(s=e.actualRange.max-e.zoomPosition*e.actualRange.delta)-e.zoomFactor*e.actualRange.delta:(s=e.actualRange.min+e.zoomPosition*e.actualRange.delta)+e.zoomFactor*e.actualRange.delta,s<a.min&&(n+=a.min-s,s=a.min),n>a.max&&(s-=n-a.max,n=a.max);var r=Math.abs(n-s),t=e.enableAutoIntervalOnZooming?this.calculateLogNiceInterval(r,e):e.visibleRange.interval,a=ej.util.isNullOrUndefined(e.roundingPlaces)?0==ej.EjSvgRender.utils._decimalPlaces(e.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(e.visibleRange.interval):e.roundingPlaces,t=parseFloat(e.visibleRange.interval.toFixed(a));if(i)return{min:Math.min(s,n),max:Math.max(s,n),interval:t};e.visibleRange.interval=t,e.visibleRange.min=Math.min(s,n),e.visibleRange.max=Math.max(s,n),e.visibleRange.delta=r,e.zoomed=null===this.chartObj.zoomed||void 0===this.chartObj.zoomed||this.chartObj.zoomed}},_calculateAxisLabels:function(e,t){for(var i,s,n,a=t.roundingPlaces,r=e.zoomed||t.zoomed?t.visibleRange.min-t.visibleRange.min%t.visibleRange.interval:t.visibleRange.min;r<=t.visibleRange.max;r+=t.visibleRange.interval)ej.EjSvgRender.utils._inside(r,t.visibleRange)&&(s=t.labelFormat?t.labelFormat.match("{value}"):null,i=10<(n=Math.pow(t.logBase,r)).toString().split(0).length-1?10:20,n=parseFloat(n.toFixed(!a&&i<a?a:i)),s=t.labelFormat?null!=s?t.labelFormat.replace("{value}",n):ej.format(n,t.labelFormat,e.model.locale):n,(n=Xe.extend({},ej.EjSvgRender.commonChartEventArgs)).data={label:{Text:s,Value:r},axis:t},e._trigger("axesLabelRendering",n),t.visibleLabels.push({Value:r,Text:n.data.label.Text}));t._LableMaxWidth=ej.EjSvgRender.utils._getMaxLabelWidth(t,this.chartObj),"vertical"==t.orientation&&(t._LableMaxWidth.maxWidth=this.chartObj.maxLabelWidth,t._LableMaxWidth.width=this.chartObj.maxLabelWidth)},_calculateRanges:function(e,t,i,s){this.chartObj=e,this._calculateLogRange(e,t,i,s),e.model._drawTrendline&&this._calculateTrendLineRange(e,t,i),this._calculateLogPadding(e,t,t.actual_Range),this._calculateAxisLabels(e,t)}});ej.axisTypes.logarithmic=t;t=e(ej.EjAxisRenderer,{_calculateCategoryRange:function(e,t){var i=null==this.chartObj.model.legendCollapsed?!this.chartObj.zoomed:this.chartObj.model.legendCollapsed;if(!this.chartObj.model.excludeDataUpdate||i){var s,n,a={maxX:null,minX:0},r=[],o=e.isIndexed,l=this.chartObj.model.locale;if(0<t.length&&this.chartObj.model._hasSeriesPoints&&0<t[0].points.length||0<this.chartObj.model.indicators[0]._points.length){for(var d=0;d<t.length;d++){n=t[d].points.length;for(var h=0;h<n;h++)s="date"==t[d]._xAxisValueType?ej.format(new Date(t[d].points[h].x),ej.util.isNullOrUndefined(e.labelFormat)?"dd/MM/yyyy":e.labelFormat,l):t[d].points[h].x,o?r[h]=0==d?s:r[h]+", "+s:Xe.inArray(s,r)<0&&r.push(s);(!e.maxPointLength||e.maxPointLength<n)&&(e.maxPointLength=n)}for(var c=0;c<t.length;c++){t[c]._pointCollection=[];for(var u=0;u<t[c].points.length;u++)t[c]._pointCollection.push(t[c].points[u].x),s="date"==t[c]._xAxisValueType?ej.format(new Date(t[c].points[u].x),ej.util.isNullOrUndefined(e.labelFormat)?"dd/MM/yyyy":e.labelFormat,l):t[c].points[u].x,t[c].points[u].xValue=o?u:Xe.inArray(s,r);t[c].minX=0,t[c].maxX="date"==t[c]._xAxisValueType?t[c]._pointCollection.length-1:r.length-1,0==c&&(a.maxX=t[c].maxX,e.labels="date"==t[c]._xAxisValueType?t[c]._pointCollection:r,e._categoryValueType=t[c]._xAxisValueType),a.maxX<t[c].maxX&&(a.maxX=t[c].maxX,e.labels=[],e.labels=r)}this.chartObj.model.indicatorRange&&this.chartObj.model.indicatorRange[e.name]&&(f=this.chartObj.model.indicatorRange[e.name],(a.minX>f.min||null==a.minX)&&(a.minX=f.min),(a.maxX<f.max||null==a.maxX)&&(a.maxX=f.max)),_=a.maxX-a.minX,f=e.setRange&&e.range.interval?Math.ceil(e.range.interval):this._calculateActualInterval(_,e),e.range={min:a.minX,max:a.maxX,interval:f,Delta:_}}else 0<(m=e.labels.length)?(_=m-1,f=this._calculateActualInterval(_,e),e.range={min:0,max:m-1,interval:f,Delta:_}):e.range||(e.range={min:0,max:6,interval:1,Delta:6})}var p,m,g=0,f=e.labelIntersectAction,_=e.labelRotation;if(!("rotate45"==f&&"rotate90"==f||0!=_&&null!=_))for(p=0;p<e.labels.length;p++)"string"==typeof e.labels[p]&&(m=e.labels[p].split("<br>").length,g=Math.max(m,g));e.rowsCount=g},_calculateActualInterval:function(e,t){return null==t.categoryInterval?Math.max(1,Math.floor(e/this.GetActualDesiredIntervalsCount(t,t.length))):t.categoryInterval},_applyRangePadding:function(e){var t;this.chartObj.zoomed||this.chartObj._scrollBarEnabled||e.zoomed||(t=0,"polaraxes"!==this.chartObj.model.AreaType&&(t=null===e.labelPlacement||void 0===e.labelPlacement||""===e.labelPlacement||"betweenticks"==e.labelPlacement.toLowerCase()?-.5:0),this.chartObj.scrollsvgObj||(t<0?(e.range.min=e.range.min+t,e.range.max=e.range.max-t):(t=_sideBySeriesPadding(this.chartObj,e.range.min,e.range.max,e),e.range.min=t.startPadding,e.range.max=t.endPadding),e.range.delta=e.range.max-e.range.min,e.actualRange=e.range)),this._calculateVisibleRange(e)},_calculateVisibleRange:function(e,t,i){if(this.chartObj=t||this.chartObj,e.visibleRange=i?e.visibleRange:Xe.extend(!0,{},e.actualRange),(e.zoomFactor<1||0<e.zoomPosition)&&"polaraxes"!=this.chartObj.model.AreaType&&!this.chartObj.model.disableZoom){e.zoomFactor=1<e.zoomFactor?1:e.zoomFactor<0?0:e.zoomFactor,e.zoomPosition=e.zoomPosition<0?0:1<e.zoomPosition?1:e.zoomPosition;var s,n,a=e.actualRange;n=e.isInversed?(s=e.actualRange.max-e.zoomPosition*e.actualRange.delta)-e.zoomFactor*e.actualRange.delta:(s=e.actualRange.min+e.zoomPosition*e.actualRange.delta)+e.zoomFactor*e.actualRange.delta,s<a.min&&(n+=a.min-s,s=a.min),n>a.max&&(s-=n-a.max,n=a.max);var r=Math.abs(n-s),o=this._calculateActualInterval(r,e),t=Math.min(s,n),a=Math.max(s,n);if(i)return{min:t,max:a,interval:o};r=Math.abs(n-s);e.visibleRange.interval=o,e.visibleRange.min=t,e.visibleRange.max=a,e.visibleRange.delta=r,e.zoomed=null===this.chartObj.zoomed||void 0===this.chartObj.zoomed||this.chartObj.zoomed}},_calculateAxisLabels:function(e){for(var t,i=e.visibleRange.interval,s=e.visibleRange.min-e.visibleRange.min%e.range.interval;s<=e.visibleRange.max;s+=i)ej.EjSvgRender.utils._inside(s,e.visibleRange)&&(t=Math.round(s),e.visibleLabels.push({Value:t,Text:ej.EjSvgRender.utils._getLabelContent(t,e,this.chartObj.model.locale)}),(t=Xe.extend({},ej.EjSvgRender.commonChartEventArgs)).data={label:e.visibleLabels[e.visibleLabels.length-1],axis:e},this.chartObj._trigger("axesLabelRendering",t),e.visibleLabels[e.visibleLabels.length-1]=t.data.label);e._LableMaxWidth=ej.EjSvgRender.utils._getMaxLabelWidth(e,this.chartObj),"vertical"==currentAxis.orientation&&(e._LableMaxWidth.maxWidth=this.chartObj.maxLabelWidth,e._LableMaxWidth.width=this.chartObj.maxLabelWidth)},_calculateRanges:function(e,t,i){this.chartObj=e,this._saveRange(e,t),this._calculateCategoryRange(t,i),t._range=t.range,e.model._drawTrendline&&this._calculateTrendLineRange(e,t,i),this._applyRangePadding(t),this._calculateAxisLabels(t)}});ej.axisTypes.category=t;t=e(ej.EjAxisRenderer,{_calculateDateTimeCategoryRange:function(e,t){for(var i,s,n,a,r,o,l,d,h,c,u={minX:0,MaxX:null},p=[],m=[],g=[],f=[],_=[],v=0;v<t.length;v++){for(t[v]._pointCollection=[],r=[],t[v]._points=[],t[v]._xPoints=[],t[v]._yPoints=[],l=t[v].points.length,c=0;c<l;c++)o=isNaN(new Date(t[v].points[c].x).getTime())?null:new Date(t[v].points[c].x).getTime(),-1!=r.indexOf(o)&&(t[v].points[c].xValue=r.indexOf(o)),r.push(o),t[v]._xPoints.push(o),t[v]._yPoints.push(t[v].points[c].y),null!=o&&f.push(o);for(ej.isNullOrUndefined(e.intervalType)&&(n=this.calculateDateTimeNiceInterval(e,new Date(Math.min.apply(null,f)),new Date(Math.max.apply(null,f))),e.intervalType=n.intervalType.toLowerCase()),d=0;d<r.length;d++){i=new Date(r[d]),-1==t[v]._points.indexOf(i.getTime())&&t[v]._points.push(i.getTime());Xe.inArray(r[d],t[v]._xPoints);if(t[v]._pointCollection.push(new Date(t[v].points[d].x)),0==v)t[v].points[d].x==t[v].points[d].xValue&&(t[v].points[d].xValue=d);else for(var b,x=0;x<v;x++){if(0<=(b=Xe.inArray(new Date(t[v].points[d].x).getTime(),t[x]._points))){t[v].points[d].xValue=0==x?b:t[x].points[b].xValue;break}if(x==v-1){t[v].points[d].x==t[v].points[d].xValue?t[v].points[d].xValue=e.maxPointLength++:(b=t[v].points[d].xValue,t[v].points[d].xValue=t[v].points[b].xValue);break}}switch(0==v||Xe.inArray(i.getTime(),g),e.intervalType){case"auto":-1==p.indexOf(i.getTime())&&p.push(i.getTime());break;case"years":w=i.getFullYear();break;case"months":S=i.getFullYear(),T=i.getMonth(),d<=0?w=d+1:w+=S!=(C=new Date(r[d-1]).getFullYear())?12-a+T:T-a,a=T;break;case"days":var y,w,C,S=i.getMonth(),T=i.getDate();d<=0?w=d+1:(w+=S!=(C=new Date(r[d-1]).getMonth())?new Date(i.getFullYear(),C,1).getDate()-a+T:T-a,S==C&&(y=this._diffDate(i,new Date(r[d-1]),1),w=new Date(i.getFullYear(),C,0).getDate()<y?m[m.length-1]+1:w)),a=T;break;case"hours":S=i.getDate(),T=i.getHours(),d<=0?w=d+1:(w+=S!=(C=new Date(r[d-1]).getDate())?24-a+T:T-a,S==C&&(w=24<(y=this._diffDate(i,new Date(r[d-1]),24))?m[m.length-1]+1:w)),a=T;break;case"minutes":S=i.getHours(),T=i.getMinutes(),d<=0?w=d+1:(w+=S!=(C=new Date(r[d-1]).getHours())?60-a+T:T-a,S==C&&(w=60<(y=this._diffDate(i,new Date(r[d-1]),1440))?m[m.length-1]+1:w)),a=T;break;case"seconds":S=i.getMinutes(),T=i.getSeconds(),d<=0?w=d+1:(w+=S!=(C=new Date(r[d-1]).getMinutes())?60-a+T:T-a,S==C&&(w=60<(y=this._diffDate(i,new Date(r[d-1]),86400))?m[m.length-1]+1:w)),a=T;break;case"milliseconds":S=i.getSeconds(),T=i.getMilliseconds(),d<=0?w=d+1:(w+=S!=(C=new Date(r[d-1]).getSeconds())?1e3-a+T:T-a,S==C&&(w=1e3<(y=this._diffDate(i,new Date(r[d-1]),864e5))?m[m.length-1]+1:w)),a=T}"auto"!=e.intervalType&&-1==p.indexOf(i.getTime())&&p.push(i.getTime()),w=0==v?w:m[m.length-1]+w,-1==m.indexOf(w)&&m.push(w),_.push(w),g.push(new Date(r[d]).getTime())}e.maxPointLength||("auto"!=e.intervalType?e.maxPointLength=m.length:e.maxPointLength=p.length)}for(h=0;h<t.length;h++)e.setRange||(e.range={min:null,max:null,interval:null}),ej.isNullOrUndefined(e.m_minPointsDelta)||(e.m_minPointsDelta=void 0),t[h].minX=ej.isNullOrUndefined(e.range.min)||e.range.min<u.minX?0:e.range.min,t[h].maxX=ej.isNullOrUndefined(e.range.max)||e.range.max>p.length-1?p.length-1:e.range.max,u.MaxX=t[h].maxX,u.minX=t[h].minX,e.labels=p,e.dateLabels=_,e._categoryValueType="date";if(u.minX==u.MaxX&&"onticks"==e.labelPlacement.toLowerCase()&&(u.MaxX+=1),0<t.length)s=u.MaxX-u.minX,n=null==e.range.interval||null==e.range.interval||e.range.interval<1?1:Math.ceil(e.range.interval),e.range={min:u.minX,max:u.MaxX,interval:n,Delta:s};else if(!e.setInterval){e.range={min:0,max:6,interval:1,Delta:6},e.dateLabels=[];for(x=0;x<=e.range.max;x++)e.labels.push(""),e.dateLabels.push("")}},_diffDate:function(e,t,i){t=Math.abs(e.getTime()-t.getTime())/864e5;return Math.round(t*i)},_calculateAxisLabels:function(e){for(var t,i,s,n=e.visibleRange.interval,a=[],r=this.chartObj.model.series.length,o=e.visibleRange.min-e.visibleRange.min%e.range.interval;o<=e.visibleRange.max;o+=n)ej.EjSvgRender.utils._inside(o,e.visibleRange)&&(s=Math.round(o),t=e.dateLabels,ej.util.isNullOrUndefined(t)||(t[t.length-1]-t[s]>=n&&e.visibleRange.max<o+n&&(e.visibleRange.max+=o+n-e.visibleRange.max),i=Xe.inArray(t[s],a)),(i<0||"auto"==e.intervalType||0==r)&&s<e.labels.length&&("auto"!=e.intervalType&&(t=t[s],a.push(t)),e.visibleLabels.push({Value:s,Text:e.labelFormat||""==e.labels[Math.floor(s)]?ej.EjSvgRender.utils._getLabelContent(s,e,this.chartObj.model.locale):ej.format(new Date(e.labels[Math.floor(s)]),ej.EjSvgRender.utils._dateTimeLabelFormat(e.intervalType,e),this.chartObj.model.locale)}),(s=Xe.extend({},ej.EjSvgRender.commonChartEventArgs)).data={label:e.visibleLabels[e.visibleLabels.length-1],axis:e},this.chartObj._trigger("axesLabelRendering",s),e.visibleLabels[e.visibleLabels.length-1]=s.data.label));e._LableMaxWidth=ej.EjSvgRender.utils._getMaxLabelWidth(e,this.chartObj),"vertical"==currentAxis.orientation&&(e._LableMaxWidth.maxWidth=this.chartObj.maxLabelWidth,e._LableMaxWidth.width=this.chartObj.maxLabelWidth)},_calculateActualInterval:function(e,t){return null==t.categoryInterval?Math.max(1,Math.floor(e/this.GetActualDesiredIntervalsCount(t,t.length))):t.categoryInterval},_applyRangePadding:function(e){var t;this.chartObj.zoomed||this.chartObj._scrollBarEnabled||(t=0,"polaraxes"!==this.chartObj.model.AreaType&&(t=null===e.labelPlacement||void 0===e.labelPlacement||"betweenticks"==e.labelPlacement.toLowerCase()?-.5:0),t<0?(e.range.min=e.range.min+t,e.range.max=e.range.max-t):(t=_sideBySeriesPadding(this.chartObj,e.range.min,e.range.max,e),e.range.min=t.startPadding,e.range.max=t.endPadding),e.range.delta=e.range.max-e.range.min,e.actualRange=e.range),this._calculateVisibleRange(e)},_calculateVisibleRange:function(e,t,i){if(this.chartObj=t||this.chartObj,e.visibleRange=i?e.visibleRange:Xe.extend(!0,{},e.actualRange),(e.zoomFactor<1||0<e.zoomPosition)&&"polaraxes"!=this.chartObj.model.AreaType&&!this.chartObj.model.disableZoom){e.zoomFactor=1<e.zoomFactor?1:e.zoomFactor<0?0:e.zoomFactor,e.zoomPosition=e.zoomPosition<0?0:1<e.zoomPosition?1:e.zoomPosition;var s,n,a=e.actualRange;n=e.isInversed?(s=e.actualRange.max-e.zoomPosition*e.actualRange.delta)-e.zoomFactor*e.actualRange.delta:(s=e.actualRange.min+e.zoomPosition*e.actualRange.delta)+e.zoomFactor*e.actualRange.delta,s<a.min&&(n+=a.min-s,s=a.min),n>a.max&&(s-=n-a.max,n=a.max);var r=Math.abs(n-s),o=this._calculateActualInterval(r,e),t=Math.min(s,n),a=Math.max(s,n);if(i)return{min:t,max:a,interval:o};r=Math.abs(n-s);e.visibleRange.interval=o,e.visibleRange.min=t,e.visibleRange.max=a,e.visibleRange.delta=r,e.zoomed=null===this.chartObj.zoomed||void 0===this.chartObj.zoomed||this.chartObj.zoomed}},_calculateRanges:function(e,t,i){this.chartObj=e,this._saveRange(e,t),this._calculateDateTimeCategoryRange(t,i),e.model._drawTrendline&&this._calculateTrendLineRange(e,t,i),t._range=t.range,this._applyRangePadding(t),this._calculateAxisLabels(t)}});ej.axisTypes.datetimecategory=t,ej.EjAxisRenderer.prototype={_drawGridLines:function(e,t,i){"cartesianaxes"==this.model.AreaType?"horizontal"==t.orientation.toLowerCase()?this._drawXAxisGridLine(e,t,i):this._drawYAxisGridLine(e,t,i):"horizontal"==t.orientation.toLowerCase()&&0==e?(this._drawPolarGridLine(t),this._drawPolarLabels(t)):1==e&&this._drawPolarCircle(t)},_drawAxes:function(e,t){"cartesianaxes"==this.model.AreaType&&(t.visible&&"horizontal"==t.orientation.toLowerCase()&&(this._drawXAxisLabels(e,t),this._drawXTitle(e,t)),t.visible&&"vertical"==t.orientation.toLowerCase()&&(this._drawYAxisLabels(e,t),this._drawYTitle(e,t)))},_getSharpPath:function(e){return e%2==0?0:.5},_drawAxisLine:function(e){var t=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisLine"}),i=ej.EjSvgRender.utils._getStringBuilder(),s="M "+this.model.centerX+" "+this.model.centerY+" L "+this.model.centerX+" "+(this.model.centerY-this.model.Radius);if(e.visible&&e.axisLine.visible&&(o={id:this.svgObject.id+"_YAxisLines",fill:"none","stroke-width":e.axisLine.width,stroke:e.axisLine.color,opacity:e.axisLine.opacity,"stroke-dasharray":e.axisLine.dashArray,d:s},this.svgRenderer.drawPath(o,t),Xe(t).appendTo(this.gPolarAxisEle)),e.visible&&e.majorTickLines.visible){t=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisMajorTicks"});for(var n=0;n<e.visibleLabels.length;n++){var a=e.visibleLabels[n],r=this.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(e,a.Value,this),a={};a.X1=this.model.centerX,a.Y1=this.model.centerY-r,a.X2=a.X1-e.majorTickLines.size,a.Y2=a.Y1,i.append("M "+a.X1+" "+a.Y1+" L "+a.X2+" "+a.Y2+" ")}var s=i.toString(),o={id:this.svgObject.id+"_YAxisMajorTicks",fill:"none","stroke-width":e.majorTickLines.width,stroke:e.majorTickLines.color,d:s};this.svgRenderer.drawPath(o,t),Xe(t).appendTo(this.gPolarAxisEle)}if(e.visible){for(var t=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisLabels"}),l=e.font,d=e.visibleLabels.length,n=0;n<d;n++){var r=(this.model.Radius||this.model._radius)*ej.EjSvgRender.utils._valueToCoefficient(e,e.visibleLabels[n].Value,this),h=e.visibleLabels[n].Text,c=ej.EjSvgRender.utils._measureText(h,null,e.font),u=this.model.centerX-e.majorTickLines.size-this.model.elementSpacing/3,p=this.model.centerY-r+c.height/5,o={id:this.svgObject.id+"_"+e.name+"_YLabel_"+n,x:u,y:p,fill:l.color,"font-size":l.size,"font-family":l.fontFamily,"font-style":l.fontStyle,"font-weight":l.fontWeight,opacity:l.opacity,"text-anchor":"end"};this.svgRenderer.drawText(o,h,t),c={x:o.x-c.width,y:o.y,width:c.width,height:c.height},e.visibleLabels[n].region={bounds:c,labelText:h}}Xe(t).appendTo(this.gPolarAxisEle)}},_drawPolarLabels:function(e){if(!e.visible)return 0;for(var t,i=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisLabels"}),s=this.model.Radius+e.majorTickLines.size,n=e.font,a=e.visibleLabels.length,r=0;r<a;r++){var o,l,d,h,c=ej.EjSvgRender.utils._valueToPolarCoefficient(e,e.visibleLabels[r].Value),u=ej.EjSvgRender.utils._valueToVector(e,e.visibleLabels[r].Value);isNaN(u.X)||isNaN(u.Y)||(o=e.visibleLabels[r].Text,l=this.model.centerX+s*u.X,h=this.model.centerY+s*u.Y,d=l<this.model.centerX?"end":l>this.model.centerX?"start":"middle",u=ej.EjSvgRender.utils._measureText(o,this.model.m_AreaBounds.Height,e.font),.25==c?(l-=this.model.elementSpacing/2,h+=u.height/4):.5==c?h+=u.height:.75==c?(l+=this.model.elementSpacing/2,h+=u.height/4):1==c||0==c?h-=u.height/2:.25<c&&c<.5?(l-=this.model.elementSpacing/2,h+=u.height/2):.5<c&&c<=.75?(l+=this.model.elementSpacing/2,h+=u.height/2):0<c&&c<.25?l-=this.model.elementSpacing/2:l+=this.model.elementSpacing/2,0==r&&(t=l),r==a-1&&"category"!=e._valueType&&(c=ej.EjSvgRender.utils._measureText(o,null,n).width,t<(c+=l)&&(o="")),h={id:this.svgObject.id+"_"+e.name+"_XLabel_"+r,x:l,y:h,fill:n.color,"font-size":n.size,"font-family":n.fontFamily,"font-style":n.fontStyle,"font-weight":n.fontWeight,opacity:n.opacity,"text-anchor":d},this.svgRenderer.drawText(h,o,i),u={x:"middle"==d?h.x-u.width/2:"end"==d?h.x-u.width:h.x,y:h.y,width:u.width,height:u.height},e.visibleLabels[r].region={bounds:u,labelText:o})}Xe(i).appendTo(this.gXaxisEle)},_drawPolarCircle:function(e){if(e.majorGridLines.visible){var t=ej.EjSvgRender.utils._getStringBuilder(),i=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisGrid"});if(this.model.isPolar)for(var s=0;s<e.visibleLabels.length;s++){var n=e.visibleLabels[s],a=this.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(e,n.Value,this),r={id:this.svgObject.id+"_YAxisGridLines_"+s,cx:this.model.centerX,cy:this.model.centerY,r:a,fill:"transparent","stroke-width":e.majorGridLines.width,stroke:e.majorGridLines.color,opacity:this.vmlRendering?.3:e.majorGridLines.opacity};this.svgRenderer.drawCircle(r,i)}else{for(var o,s=0;s<e.visibleLabels.length;s++)for(var n=e.visibleLabels[s],a=this.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(e,n.Value,this),l=0;l<this.model._axes[0].visibleLabels.length;l++){var d,h,c=this.model._axes[0],u=ej.EjSvgRender.utils._valueToVector(c,c.visibleLabels[l].Value);isNaN(u.X)||isNaN(u.Y)||(h=l+1<c.visibleLabels.length?ej.EjSvgRender.utils._valueToVector(c,c.visibleLabels[l+1].Value):ej.EjSvgRender.utils._valueToVector(c,c.visibleLabels[0].Value),d=this.model.centerX+a*u.X,c=this.model.centerY+a*u.Y,u=this.model.centerX+a*h.X,h=this.model.centerY+a*h.Y,t.append("M "+d+" "+c+" L "+u+" "+h+" "))}e.majorGridLines.visible&&(o=t.toString(),r={id:this.svgObject.id+"_YAxisGridLines",fill:"none","stroke-width":e.majorGridLines.width,stroke:e.majorGridLines.color,opacity:e.majorGridLines.opacity,"stroke-dasharray":e.majorGridLines.dashArray,d:o},this.svgRenderer.drawPath(r,i))}}Xe(i).appendTo(this.gYaxisEle)},_drawPolarGridLine:function(e){var t,i,s,n=this.model,a=n.legend,r=ej.EjSvgRender.utils._measureText(a.title.text,null,a.title.font).height,o=a.position.toLowerCase(),l=0,d=0,h=ej.EjSvgRender.utils._getStringBuilder(),c=ej.EjSvgRender.utils._getStringBuilder(),u=a.border.width,p=e.visibleLabels.length,m=n.border.width,g=n.title,f=n.title.subTitle,_=!(!g.enableTrim||"wrap"!=g.textOverflow&&"wrapandtrim"!=g.textOverflow),f=!(""==f.text||!f.visible||!f.enableTrim||"wrap"!=f.textOverflow&&"wrapandtrim"!=f.textOverflow);a.visible&&"custom"!=o&&("right"==o||"left"==o?l=("right"==o?n.margin.right:n.margin.left)+n.LegendActualBounds.Width+2*(u+m):d=("top"==o?n.margin.top:n.margin.bottom)+n.LegendActualBounds.Height+r+2*(u+m)),u=(n.title.text&&n.title.visible?n._titleLocation.Y+(_?n._titleLocation.size.height:0)+(f?n._subTitleLocation.size.height:0):0)+d,m=n.svgWidth-l,d=n.svgHeight-u,n.centerX=.5*m+("left"===o?l:0),n.centerY=.5*d+("top"===o?u:g.text&&g.visible?n._titleLocation.Y+(_?n._titleLocation.size.height:0)+(f?n._subTitleLocation.size.height:0):0);f=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisGrid"});n.finalSize={width:m,height:d},n.Radius=Math.min(n.finalSize.width,n.finalSize.height)/2-2*n.elementSpacing-e.majorTickLines.size-e._LableMaxWidth.maxHeight;var v;if(e.majorGridLines.visible)for(var b=0;b<p;b++)t=ej.EjSvgRender.utils._valueToVector(e,e.visibleLabels[b].Value),(i={}).X1=n.centerX,i.Y1=n.centerY,i.X2=n.centerX+n.Radius*t.X,i.Y2=n.centerY+n.Radius*t.Y,h.append("M "+i.X1+" "+i.Y1+" L "+i.X2+" "+i.Y2+" ");if(e.visible&&e.majorTickLines.visible)for(var x=n.Radius,b=0;b<p;b++){t=ej.EjSvgRender.utils._valueToVector(e,e.visibleLabels[b].Value),(i={}).X1=n.centerX+x*t.X,i.Y1=n.centerY+x*t.Y,i.X2=i.X1+e.majorTickLines.size*t.X,i.Y2=i.Y1+e.majorTickLines.size*t.Y;var y="M "+i.X1+" "+i.Y1+" L "+i.X2+" "+i.Y2+" ";-1==y.indexOf("NaN")&&c.append(y)}e.majorGridLines.visible&&(s=h.toString(),v={id:this.svgObject.id+"_XAxisGridLines",fill:"none","stroke-width":e.majorGridLines.width,stroke:e.majorGridLines.color,opacity:e.majorGridLines.opacity,"stroke-dasharray":e.majorGridLines.dashArray,d:s},-1==s.indexOf("NaN")&&(this.svgRenderer.drawPath(v,f),Xe(f).appendTo(this.gXaxisEle))),e.visible&&e.majorTickLines.visible&&(s=c.toString(),v={id:this.svgObject.id+"_XAxisMajorTicks",fill:"none","stroke-width":e.majorTickLines.width,stroke:e.majorTickLines.color,d:s},this.svgRenderer.drawPath(v,f),Xe(f).appendTo(this.gXaxisEle))},_drawXAxisTickLine:function(e,t,i,s){var n,a,r=ej.EjSvgRender.utils._getStringBuilder(),o=ej.EjSvgRender.utils._getStringBuilder(),l=Math.floor(t.x),d=(Math.floor(t.x+t.width),t._opposed),h=[],c=t._isScroll&&!(null!=t.scrollbarSettings.pointsLength&&t.scrollbarSettings.pointsLength<t.maxPointLength),u=t.labelBorder,p=s.axes[t.name]._validCross;0!=e&&!p&&("inside"==t.labelPosition&&"inside"==t.tickLinesPosition||"inside"==t.labelPosition&&"inside"!=t.tickLinesPosition)&&t.y!=this.model.m_AreaBounds.Height+this.model.m_AreaBounds.Y&&t.y!=this.model.m_AreaBounds.Y?(n=d?Math.floor(t.y-t._LableMaxWidth.height):Math.floor(t.y+t._LableMaxWidth.height),d?Math.floor(t.y-t._LableMaxWidth.height):Math.floor(t.y+t._LableMaxWidth.height)):0==e||p||"inside"==t.labelPosition||"inside"!=t.tickLinesPosition||t.y==this.model.m_AreaBounds.Height+this.model.m_AreaBounds.Y||t.y==this.model.m_AreaBounds.Y?n=t._y?t.showNextToAxisLine?t.y:t._y:Math.floor(t.y+t.majorTickLines.size-5):(n=d?Math.floor(t.y-t.majorTickLines.size):Math.floor(t.y+t.majorTickLines.size),d?Math.floor(t.y-t.majorTickLines.size):Math.floor(t.y+t.majorTickLines.size)),i||(a=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisTicklines_"+e})),t.labelPlacement=t.labelPlacement||ej.datavisualization.Chart.LabelPlacement.BetweenTicks;var m=0<t.labels.length&&"betweenticks"==t.labelPlacement.toLowerCase()?-.5:0,g=t.visibleLabels.length;t._valueType.toLowerCase()==ej.datavisualization.Chart.ValueType.Category&&m<0&&(g=0<g?t.visibleLabels.length+1:g);for(var f,_=0;_<g;_++){v=t.visibleLabels[_]?t.visibleLabels[_].Value:t.visibleLabels[_-1].Value+t.range.interval;var v=0<t.labels.length&&m<0?v+m:v,v=t.roundingPlaces?v:parseFloat(v.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)));if(ej.EjSvgRender.utils._inside(v,t.visibleRange)&&(!t.hidePartialLabels||0!=_&&_!=g-1)){if(t.minorGridLines.visible||t.minorTickLines.visible){var b=this._getSharpPath(t.minorTickLines.width);this._getSharpPath(t.minorGridLines.width);if("logarithmic"==t._valueType){R=v;for(var x,y,w,C=t.visibleRange.max,S=t.visibleRange.min,T=Math.pow(t.logBase,R-t.visibleRange.interval),T=T+(Math.pow(t.logBase,R)-T)/(t.minorTicksPerInterval+1),R=ej.EjSvgRender.utils._logBase(T,t.logBase),k=0;k<t.minorTicksPerInterval;k++)R<C&&S<R&&(w=Math.ceil((R-S)/(C-S)*t.width),t.minorTickLines&&t.minorTickLines.visible&&(x=Math.floor(w+l),y="inside"!=t.tickLinesPosition&&"inside"!=t.labelPosition||"inside"!=t.tickLinesPosition&&"inside"==t.labelPosition?d?Math.floor(n-t.minorTickLines.size):Math.floor(t.minorTickLines.size+n):d?Math.floor(n+t.minorTickLines.size):n-Math.floor(t.minorTickLines.size),r.append("M "+(x+b)+" "+(y+b)+" L "+(x+b)+" "+(n+b)+" ")))}else for(var O,k=0,R=v;k<t.minorTicksPerInterval;k++)(R+=t.visibleRange.interval/(t.minorTicksPerInterval+1))<t.visibleRange.max&&R>t.visibleRange.min&&(w=Math.ceil((R-t.visibleRange.min)/(t.visibleRange.max-t.visibleRange.min)*t.width),t.minorTickLines&&t.minorTickLines.visible&&(y="inside"!=t.tickLinesPosition&&"inside"!=t.labelPosition||"inside"!=t.tickLinesPosition&&"inside"==t.labelPosition?d?Math.floor(n-t.minorTickLines.size):Math.floor(t.minorTickLines.size+n):d?Math.floor(n+t.minorTickLines.size):Math.floor(n-t.minorTickLines.size),O=Math.floor(w+l),r.append("M "+(O+b)+" "+(y+b)+" L "+(O+b)+" "+(n+b)+" ")))}(t.majorTickLines.visible||t.majorGridLines.visible||0<u.width)&&(T=this._getSharpPath(t.majorTickLines.width),this._getSharpPath(t.majorGridLines.width),v=h[_]=this.pointX=Math.ceil(ej.EjSvgRender.utils._getPointXY(v,t.visibleRange,t.isInversed)*t.width),t.majorTickLines.visible&&(P=t.majorTickLines.size+t.axisLine.width/2,D="inside"==t.tickLinesPosition&&"inside"==t.labelPosition||"inside"==t.tickLinesPosition&&"inside"!=t.labelPosition?d?n+P:n-P:(d?n-P:P+n)-(c?d?this.model.scrollerSize:-this.model.scrollerSize:0),o.append("M "+(Math.floor(v+l)+T)+" "+(Math.floor(D)+T)+" L "+(Math.floor(v+l)+T)+" "+(Math.floor(n+(d?-t.axisLine.width/2:t.axisLine.width/2))+T)+" ")))}}if(0<u.width){var D,I,j,L,A=ej.EjSvgRender.utils._getStringBuilder(),E=c?this.model.scrollerSize:0,P=t.axisLine.width,s=t.labelPosition.toLowerCase(),M=(this.model.m_AreaBounds.X,this.model.m_AreaBounds.Width,u.width),p=t._LableMaxWidth.height+t.axisLine.width/2+2,g=t.visibleLabels.length;for(n=t.y,t.tickLinesPosition==s&&(p+=t.majorTickLines.size),I="inside"==s?(D=n+P,d?n+p:n-p):(D=d?n-P:P+n+(t.zoomFactor<1&&this.model.zooming.enableScrollbar&&0==e?this.model.scrollerSize:0),d?n-p-E:n+p+E),_=0;_<g;_++)L=(h[h.length-1]-h[h.length-2])/2,!ej.util.isNullOrUndefined(h[_])&&1<=h.length&&!isNaN(L)&&(L="category"==t._valueType&&"betweenticks"==t.labelPlacement.toLowerCase()?(j=h[_]+l,h[_]+2*L+l):(j=h[_]-L+l,h[_]+L+l),L=Math.floor(L),I=Math.floor(I),j=Math.floor(j),D=Math.floor(D),j<t.x?A.append("M "+Math.floor(l)+" "+I+" L "+L+" "+I+" "):L>t.width+t.x?(A.append("M "+j+" "+D+" L "+j+" "+I+" L "+Math.floor(t.width+l)+" "+I+" "),L-M<=t.width+t.x&&A.append("M "+Math.floor(t.width+l)+" "+I+" L "+(t.x+t.width)+" "+D)):(0==_&&A.append("M "+t.x+" "+I+" L "+j+" "+I+" "),A.append("M "+j+" "+D+" L "+j+" "+I+" L "+L+" "+I+" "),_==g-1&&A.append("M "+L+" "+D+" L "+L+" "+I+" M "+L+" "+I+" L "+(t.x+t.width)+" "+I)));E={id:this.svgObject.id+"_XAxisLabelBorder_"+e,fill:"transparent","stroke-width":u.width,stroke:u.color,d:A.toString()};this.svgRenderer.drawPath(E,i),Xe(i).appendTo(this.gXaxisEle)}t.minorTickLines.visible&&t.visible&&0<t.minorTicksPerInterval&&(f=r.toString(),f={id:this.svgObject.id+"_XAxisMinorTicks_"+e,fill:"none","stroke-width":t.minorTickLines.width,stroke:t.minorTickLines.color,d:f},i?this.svgRenderer.drawPath(f,i):this.svgRenderer.drawPath(f,a)),t.majorTickLines.visible&&t.visible&&(f=o.toString(),f={id:this.svgObject.id+"_XAxisMajorTicks_"+e,fill:"none","stroke-width":t.majorTickLines.width,stroke:t.majorTickLines.color,d:f},i?this.svgRenderer.drawPath(f,i):this.svgRenderer.drawPath(f,a)),"inside"==t.tickLinesPosition&&Xe(a).appendTo(this.gXaxisEle)},_drawXAxisGridLine:function(e,t,i){var s,n,a=ej.EjSvgRender.utils._getStringBuilder(),r=ej.EjSvgRender.utils._getStringBuilder(),o=[],l=this.model.elementSpacing+5,d=t._opposed,h=Math.floor(t.x),c=Math.floor(t.x+t.width),u=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisGrid_"+e}),p=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisAlternateGridBand_"+e}),m=i.axes[t.name]._validCross;0==e||m||"inside"!=t.labelPosition||"inside"!=t.tickLinesPosition||t.y==this.model.m_AreaBounds.Height+this.model.m_AreaBounds.Y||t.y==this.model.m_AreaBounds.Y?"inside"==t.labelPosition&&"inside"!=t.tickLinesPosition&&t.y!=this.model.m_AreaBounds.Height+this.model.m_AreaBounds.Y&&t.y!=this.model.m_AreaBounds.Y?s=n=d?Math.floor(t.y-t._LableMaxWidth.height)+l:t.showNextToAxisLine?Math.floor(t.y+t._LableMaxWidth.height)-l:Math.floor(t.y+t._LableMaxWidth.height):n=0==e||m||"inside"==t.labelPosition||"inside"!=t.tickLinesPosition||t.y==this.model.m_AreaBounds.Height+this.model.m_AreaBounds.Y||t.y==this.model.m_AreaBounds.Y?(s=Math.floor(t.y),Math.floor(t.y)):(s=d?Math.floor(t.y-t.majorTickLines.size):Math.floor(t.y+t.majorTickLines.size),d?Math.floor(t.y-t.majorTickLines.size):Math.floor(t.y+t.majorTickLines.size)):(s=d?Math.floor(t.y-t._LableMaxWidth.height):Math.floor(t.y+t._LableMaxWidth.height),n=d?Math.floor(t.y-t._LableMaxWidth.height):Math.floor(t.y+t._LableMaxWidth.height)),t.visible&&t.axisLine.visible?(l=0<t.axisLine.offset?t.axisLine.offset:0,m=this._getSharpPath(t.axisLine.width),m={id:this.svgObject.id+"_XAxisLine_"+e,x1:h-t.plotOffset+m+l,y1:s+m,x2:c+t.plotOffset-l+m,y2:n+m,"stroke-dasharray":t.axisLine.dashArray,"stroke-width":t.axisLine.width,stroke:t.axisLine.color,opacity:t.axisLine.opacity||1},i.axes[t.name]._lineOption=[m,this.gXaxisEle]):i.axes[t.name]._lineOption=[null,this.gXaxisEle],t.labelPlacement=t.labelPlacement||ej.datavisualization.Chart.LabelPlacement.BetweenTicks;var g=0<t.labels.length&&"betweenticks"==t.labelPlacement.toLowerCase()?-.5:0,f=t.visibleLabels.length;t._valueType.toLowerCase()==ej.datavisualization.Chart.ValueType.Category&&g<0&&(f=0<f?t.visibleLabels.length+1:f);for(var _,v=0;v<f;v++){b=t.visibleLabels[v]?t.visibleLabels[v].Value:t.visibleLabels[v-1].Value+t.range.interval;var b=0<t.labels.length&&g<0?b+g:b,b=t.roundingPlaces?b:parseFloat(b.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)));if(ej.EjSvgRender.utils._inside(b,t.visibleRange)&&(!t.hidePartialLabels||0!=v&&v!=f-1)){if(t.minorGridLines.visible||t.minorTickLines.visible){this._getSharpPath(t.minorTickLines.width);var x=this._getSharpPath(t.minorGridLines.width);if("logarithmic"==t._valueType){O=b;for(var y,w,C=t.visibleRange.max,S=t.visibleRange.min,T=Math.pow(t.logBase,O-t.visibleRange.interval),R=(Math.pow(t.logBase,O)-T)/(t.minorTicksPerInterval+1),k=T+R,O=ej.EjSvgRender.utils._logBase(k,t.logBase),D=0;D<t.minorTicksPerInterval;D++)O<C&&S<O&&(w=Math.ceil((O-S)/(C-S)*t.width),t.minorGridLines&&t.minorGridLines.visible&&(y=Math.floor(w+h),a.append("M "+(y+x)+" "+(s+x)+" L "+(y+x)+" "+(Math.floor(d?this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height:this.model.m_AreaBounds.Y)+x)+" "))),k+=R,O=ej.EjSvgRender.utils._logBase(k,t.logBase)}else for(var D=0,O=b;D<t.minorTicksPerInterval;D++)(O+=t.visibleRange.interval/(t.minorTicksPerInterval+1))<t.visibleRange.max&&O>t.visibleRange.min&&(w=Math.ceil((O-t.visibleRange.min)/(t.visibleRange.max-t.visibleRange.min)*t.width),t.minorGridLines&&t.minorGridLines.visible&&a.append("M "+(Math.floor(w+h)+x)+" "+(s+x)+" L "+(Math.floor(w+h)+x)+" "+(Math.floor(d?this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height:this.model.m_AreaBounds.Y)+x)+" "))}if(t.majorTickLines.visible||t.majorGridLines.visible){this._getSharpPath(t.majorTickLines.width);T=this._getSharpPath(t.majorGridLines.width),b=this.pointX=Math.ceil(ej.EjSvgRender.utils._getPointXY(b,t.visibleRange,t.isInversed)*t.width),b=Math.floor(b+h);if(t.zoomed&&(o[0]=t.x),0!=v||b!=Math.floor(this.model.m_AreaBounds.X)){if(v==f-1&&"transparent"!=this.model.chartArea.border.color&&0<this.model.chartArea.border.width){if(b==Math.floor(this.model.m_AreaBounds.X+this.model.m_AreaBounds.Width))continue;t.zoomed&&(o[f]=b+T)}t.majorGridLines.visible&&r.append("M "+(b+T)+" "+(Math.floor(this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height)+T)+" L "+(b+T)+" "+(Math.floor(this.model.m_AreaBounds.Y)+T)+" "),"category"!=t._valueType.toLowerCase()&&v==f-1||o.push(b+T)}else o.push(b+T)}}}if("transparent"!=t.alternateGridBand.odd.fill||"transparent"!=t.alternateGridBand.even.fill){var I,j=this.model.m_AreaBounds.Height;0===o.length&&(I={id:this.svgObject.id+"_XAxis"+e+"_Alternateeven0",x:t.x,y:Math.floor(this.model.m_AreaBounds.Y),width:t.width,height:j,fill:t.alternateGridBand.even.fill,opacity:t.alternateGridBand.even.opacity,"clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)",stroke:"transparent"},this.svgRenderer.drawRect(I,p));for(v=1;v<o.length;v+=2){A=(A=o[v+1]-o[v])||"onticks"==t.labelPlacement.toLowerCase()?A:t.width+t.x-o[v],v==o.length-1&&t.zoomed&&(A=this.model.m_AreaBounds.X+this.model.m_AreaBounds.Width-o[o.length-1]-t.plotOffset);var L={id:this.svgObject.id+"_XAxis"+e+"_Alternateodd"+[v],x:o[v],y:Math.floor(this.model.m_AreaBounds.Y),width:A,height:j,fill:t.alternateGridBand.odd.fill,opacity:t.alternateGridBand.odd.opacity,stroke:"transparent","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"};0<A&&this.svgRenderer.drawRect(L,p)}for(var A,v=0;v<o.length;v+=2)A=(A=o[v+1]-o[v])||"onticks"==t.labelPlacement.toLowerCase()?A:t.width+t.x-o[v],0==v&&t.zoomed&&(A=o[1]-t.x),v==o.length-1&&t.zoomed&&(A=this.model.m_AreaBounds.X+this.model.m_AreaBounds.Width-o[o.length-1]-t.plotOffset),I={id:this.svgObject.id+"_XAxis"+e+"_Alternateeven"+[v],x:o[v],y:Math.floor(this.model.m_AreaBounds.Y),width:A,height:j,fill:t.alternateGridBand.even.fill,opacity:t.alternateGridBand.even.opacity,"clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)",stroke:"transparent"},0<A&&this.svgRenderer.drawRect(I,p);Xe(p).appendTo(u)}t.minorGridLines.visible&&0<t.minorTicksPerInterval&&(_=a.toString(),_={id:this.svgObject.id+"_XAxisMinorGridLines_"+e,fill:"none","stroke-width":t.minorGridLines.width,stroke:t.minorGridLines.color,"stroke-dasharray":t.minorGridLines.dashArray,d:_},this.svgRenderer.drawPath(_,u)),_=r.toString(),!t.majorGridLines.visible||""!=(_={id:this.svgObject.id+"_XAxisMajorGridLines_"+e,fill:"none","stroke-width":t.majorGridLines.width,stroke:t.majorGridLines.color,opacity:t.majorGridLines.opacity,"stroke-dasharray":t.majorGridLines.dashArray,d:_}).d&&this.svgRenderer.drawPath(_,u),Xe(u).appendTo(this.svgObject)},_drawYAxisTickLine:function(e,t,i,s){var n,a="",r="",o=0,l=t._isScroll&&!(null!=t.scrollbarSettings.pointsLength&&t.scrollbarSettings.pointsLength<t.maxPointLength),d=t._opposed,h=[],c=t.labelBorder;1!=e&&("inside"==t.labelPosition&&"inside"==t.tickLinesPosition||"inside"==t.labelPosition&&"inside"!=t.tickLinesPosition)&&t.x!=this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X&&t.x!=this.model.m_AreaBounds.X?(n=d||s?t.showNextToAxisLine?t.x:Math.floor(t.x+t._LableMaxWidth.width+this.model.elementSpacing):Math.floor(t.x-t._LableMaxWidth.width-this.model.elementSpacing),d||s?t.showNextToAxisLine?t.x:Math.floor(t.x+t._LableMaxWidth.width+this.model.elementSpacing):Math.floor(t.x-t._LableMaxWidth.width-this.model.elementSpacing)):1==e||s||"inside"==t.labelPosition||"inside"!=t.tickLinesPosition||t.x==this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X||t.x==this.model.m_AreaBounds.X?n=t.showNextToAxisLine?t.showNextToAxisLine||"inside"!=t.tickLinesPosition?t.x:t.x+t.majorTickLines.size:t._x:(n=Math.floor(t.x+t.majorTickLines.size),Math.floor(t.x+t.majorTickLines.size));var u=Math.floor(t.y+t.height),p=(Math.floor(t.y),ej.EjSvgRender.utils._getStringBuilder()),m=ej.EjSvgRender.utils._getStringBuilder();this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisTicklines_"+e});t.labelPlacement=t.labelPlacement||ej.datavisualization.Chart.LabelPlacement.BetweenTicks;var g=0<t.labels.length&&"betweenticks"==t.labelPlacement.toLowerCase()?-.5:0,f=t.visibleLabels.length;t._valueType.toLowerCase()==ej.datavisualization.Chart.ValueType.Category&&g<0&&(f=0<f?t.visibleLabels.length+1:f);for(var _=0;_<f;_++){v=t.visibleLabels[_]?t.visibleLabels[_].Value:t.visibleLabels[_-1].Value+t.range.interval;var v=0<t.labels.length&&g<0?v+g:v,v=t.roundingPlaces?v:parseFloat(v.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)));if(ej.EjSvgRender.utils._inside(v,t.visibleRange)&&(!t.hidePartialLabels||0!=_&&_!=t.visibleLabels.length-1)){if(t.minorGridLines.visible||t.minorTickLines.visible){var b=this._getSharpPath(t.minorTickLines.width);this._getSharpPath(t.minorGridLines.width);if("logarithmic"==t._valueType){R=v;for(var x,y=t.visibleRange.max,w=t.visibleRange.min,C=Math.pow(t.logBase,R-t.visibleRange.interval),S=(Math.pow(t.logBase,R)-C)/(t.minorTicksPerInterval+1),T=C+S,R=ej.EjSvgRender.utils._logBase(T,t.logBase),k=0;k<t.minorTicksPerInterval;k++)R<y&&w<R&&(x=Math.ceil((R-w)/(y-w)*t.height),t.minorTickLines&&t.minorTickLines.visible&&t.minorTickLines.visible&&(O="inside"!=t.tickLinesPosition&&"inside"!=t.labelPosition||"inside"!=t.tickLinesPosition&&"inside"==t.labelPosition?d?t.minorTickLines.size:-t.minorTickLines.size:d?-t.minorTickLines.size:t.minorTickLines.size,p.append("M "+(Math.floor(O+n)+b)+" "+(Math.floor(-1*x+u)+b)+" L "+(n+b)+" "+(Math.floor(-1*x+u)+b)+" "))),T+=S,R=ej.EjSvgRender.utils._logBase(T,t.logBase)}else for(var O,k=0,R=v;k<t.minorTicksPerInterval;k++)(R+=t.visibleRange.interval/(t.minorTicksPerInterval+1))<t.visibleRange.max&&R>t.visibleRange.min&&(x=(R-t.visibleRange.min)/t.visibleRange.delta*t.height,t.minorTickLines.visible&&(O="inside"!=t.tickLinesPosition&&"inside"!=t.labelPosition||"inside"!=t.tickLinesPosition&&"inside"==t.labelPosition?d?t.minorTickLines.size:-t.minorTickLines.size:d?-t.minorTickLines.size:t.minorTickLines.size,p.append("M "+(Math.floor(O+n)+b)+" "+(Math.floor(-1*x+u)+b)+" L "+(n+b)+" "+(Math.floor(-1*x+u)+b)+" ")))}(t.majorTickLines.visible||t.majorGridLines.visible||0<c.width)&&(C=this._getSharpPath(t.minorTickLines.width),this._getSharpPath(t.majorGridLines.width),o=h[_]=ej.EjSvgRender.utils._getPointXY(v,t.visibleRange,t.isInversed)*t.height,t.majorTickLines.visible&&("inside"!=t.tickLinesPosition&&"inside"!=t.labelPosition||"inside"!=t.tickLinesPosition&&"inside"==t.labelPosition?A=(d?t.majorTickLines.size+t.axisLine.width/2:-(t.majorTickLines.size+t.axisLine.width/2))+(l?d?this.model.scrollerSize:d-this.model.scrollerSize:0):("inside"==t.tickLinesPosition&&"inside"!=t.labelPosition||"inside"==t.tickLinesPosition&&"inside"==t.labelPosition)&&(A=d?-(t.majorTickLines.size+t.axisLine.width/2):t.majorTickLines.size+t.axisLine.width/2),m.append("M "+(Math.floor(A+n)+C)+" "+(Math.floor(-1*o+u)+C)+" L "+(Math.floor(n+t.axisLine.width/2)+C)+" "+(Math.floor(-1*o+u)+C)+" ")))}}if(0<c.width){var D,I,j,L=ej.EjSvgRender.utils._getStringBuilder(),A=t.axisLine.width/2,E=l?this.model.scrollerSize:0,s=t._LableMaxWidth.maxWidth+10;n=t.x,t.tickLinesPosition==t.labelPosition&&(s+=t.majorTickLines.size),I=Math.floor(n-s),I="outside"==t.labelPosition?d?Math.floor(n+s)+E:Math.floor(n-s)-E:d?Math.floor(n-s):Math.floor(n+s);for(_=0;_<f;_++)j=(h[h.length-1]-h[h.length-2])/2,!ej.util.isNullOrUndefined(h[_])&&1<h.length&&!isNaN(j)&&(j="category"==t._valueType&&"betweenticks"==t.labelPlacement.toLowerCase()?(D=Math.floor(-1*h[_]+u),Math.floor(-1*h[_]-2*j+u)):(D=Math.floor(-1*h[_]+j+u),Math.floor(-1*h[_]-j+u)),u<D?L.append("M "+I+" "+u+" L "+I+" "+j+" "):j<this.model.m_AreaBounds.Y?L.append("M "+Math.floor(A+n)+" "+D+" L "+I+" "+D+" L "+I+" "+this.model.m_AreaBounds.Y+" "):(L.append("M "+Math.floor(A+n)+" "+D+" L "+I+" "+D+" L "+I+" "+j+" "),_==f-1&&L.append("M "+Math.floor(A+n)+" "+j+" L "+I+" "+j+" ")));s={id:this.svgObject.id+"_YAxisLabelBorder_"+e,fill:"none","stroke-width":c.width,stroke:c.color,d:L.toString()};this.svgRenderer.drawPath(s,i),Xe(i).appendTo(this.gYaxisEle)}t.minorTickLines.visible&&t.visible&&0<t.minorTicksPerInterval&&(r=p.toString(),r={id:this.svgObject.id+"_YAxisMinorTicks_"+e,fill:"none","stroke-width":t.minorTickLines.width,stroke:t.minorTickLines.color,d:r},this.svgRenderer.drawPath(r,i)),t.majorTickLines.visible&&t.visible&&(a=m.toString(),a={id:this.svgObject.id+"_YAxisMajorTicks_"+e,fill:"none","stroke-width":t.majorTickLines.width,stroke:t.majorTickLines.color,d:a},this.svgRenderer.drawPath(a,i))},_drawYAxisGridLine:function(e,t,i){var s,n,a,r="",o="",l=Math.floor(t.y+t.height),d=Math.floor(t.y),h=t._opposed,c=[],u=i.axes[t.name]._validCross,p=t.name.replace(/[^a-zA-Z0-9]/g,"");a=1!=e&&!u&&("inside"==t.labelPosition&&"inside"==t.tickLinesPosition||"inside"==t.labelPosition&&"inside"!=t.tickLinesPosition)&&t.x!=this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X&&t.x!=this.model.m_AreaBounds.X?(n=h?Math.floor(t.x+t._LableMaxWidth.width+this.model.elementSpacing):Math.floor(t.x-t._LableMaxWidth.width-this.model.elementSpacing),h?Math.floor(t.x+t._LableMaxWidth.width+this.model.elementSpacing):Math.floor(t.x-t._LableMaxWidth.width-this.model.elementSpacing)):1==e||u||"inside"==t.labelPosition||"inside"!=t.tickLinesPosition||t.x==this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X||t.x==this.model.m_AreaBounds.X?(n=Math.floor(t.x),Math.floor(t.x)):(n=h?Math.floor(t.x+t.majorTickLines.size):Math.floor(t.x-t.majorTickLines.size),h?Math.floor(t.x+t.majorTickLines.size):Math.floor(t.x-t.majorTickLines.size));var m=ej.EjSvgRender.utils._getStringBuilder(),g=ej.EjSvgRender.utils._getStringBuilder(),f=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisGrid_"+e}),_=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisAlternateGridBand_"+e});t.visible&&t.axisLine.visible?(u=0<t.axisLine.offset?t.axisLine.offset:0,h=this._getSharpPath(t.axisLine.width),h={id:this.svgObject.id+p+"_YAxisLine_"+e,x1:n+h,y1:d-t.plotOffset+u+h,x2:a+h,y2:l+t.plotOffset-u+h,"stroke-width":t.axisLine.width,"stroke-dasharray":t.axisLine.dashArray,stroke:t.axisLine.color,opacity:t.axisLine.opacity||1},i.axes[t.name]._lineOption=[h,this.gYaxisEle]):i.axes[t.name]._lineOption=[null,this.gYaxisEle],t.axisBottomLine&&t.axisBottomLine.visible&&(p={id:this.svgObject.id+p+"_YAxisBottomLine_"+e,x1:this.model.m_AreaBounds.X,y1:l,x2:this.model.m_AreaBounds.X+this.model.m_AreaBounds.Width,y2:l,"stroke-width":t.axisBottomLine.width,stroke:t.axisBottomLine.color},this.svgRenderer.drawLine(p,f)),t.labelPlacement=t.labelPlacement||ej.datavisualization.Chart.LabelPlacement.BetweenTicks;for(var v=0<t.labels.length&&"betweenticks"==t.labelPlacement.toLowerCase()?-.5:0,b=t.visibleLabels.length,x=0;x<b;x++){L=t.visibleLabels[x].Value;var y=0<t.labels.length&&v<0?L+v:L,y=t.roundingPlaces?y:parseFloat(y.toFixed(0==ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)?1:ej.EjSvgRender.utils._decimalPlaces(t.visibleRange.interval)));if(ej.EjSvgRender.utils._inside(y,t.visibleRange)&&(!t.hidePartialLabels||0!=x&&x!=t.visibleLabels.length-1)){if(t.minorGridLines.visible||t.minorTickLines.visible){this._getSharpPath(t.minorTickLines.width);var w,C=this._getSharpPath(t.minorGridLines.width);if("logarithmic"==t._valueType){D=y;for(var S=t.visibleRange.max,T=t.visibleRange.min,R=Math.pow(t.logBase,D-t.visibleRange.interval),k=(Math.pow(t.logBase,D)-R)/(t.minorTicksPerInterval+1),O=R+k,D=ej.EjSvgRender.utils._logBase(O,t.logBase),I=0;I<t.minorTicksPerInterval;I++)D<S&&T<D&&(w=Math.ceil((D-T)/(S-T)*t.height),t.minorGridLines.visible&&m.append("M "+(Math.floor(this.model.m_AreaBounds.X)+C)+" "+(Math.floor(-1*w+l)+C)+" L "+(Math.floor(this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X)+C)+" "+(Math.floor(-1*w+l)+C)+" ")),O+=k,D=ej.EjSvgRender.utils._logBase(O,t.logBase)}else for(var I=0,D=y;I<t.minorTicksPerInterval;I++)(D+=t.visibleRange.interval/(t.minorTicksPerInterval+1))<t.visibleRange.max&&D>t.visibleRange.min&&(w=(D-t.visibleRange.min)/t.visibleRange.delta*t.height,t.minorGridLines.visible&&m.append("M "+(Math.floor(this.model.m_AreaBounds.X)+C)+" "+(Math.floor(-1*w+l)+C)+" L "+(Math.floor(this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X)+C)+" "+(Math.floor(-1*w+l)+C)+" "))}if(t.majorTickLines.visible||t.majorGridLines.visible){this._getSharpPath(t.minorTickLines.width);var j=this._getSharpPath(t.majorGridLines.width);if(t.majorGridLines.visible){s=ej.EjSvgRender.utils._getPointXY(y,t.visibleRange,t.isInversed)*t.height;var L=Math.floor(this.model.m_AreaBounds.X)+j,R=Math.floor(-1*s+l),y=Math.floor(this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X)+j;if(0==x){if(R==Math.floor(this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height))continue;t.zoomed&&(c[0]=R+j)}x==t.visibleLabels.length-1&&"transparent"!=this.model.chartArea.border.color&&0<this.model.chartArea.border.width&&R==Math.floor(this.model.m_AreaBounds.Y)?c.push(R+j):(g.append("M "+L+" "+(R+j)+" L "+y+" "+(R+j)+" "),0!=x&&c.push(R+j))}}}}if("transparent"!=t.alternateGridBand.odd.fill||"transparent"!=t.alternateGridBand.even.fill){var A=this.model.m_AreaBounds.Width;t.zoomed&&(c[c.length]=t.y);for(x=1;x<c.length;x+=2){var E=c[0]-c[1];x==c.length-1&&t.zoomed&&(E=c[c.length-2]-t.y);var P={id:this.svgObject.id+"_YAxisAlternateodd"+[x],x:Math.floor(this.model.m_AreaBounds.X),y:c[x],width:A,height:E,fill:t.alternateGridBand.odd.fill,opacity:t.alternateGridBand.odd.opacity,stroke:"transparent","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"};this.svgRenderer.drawRect(P,_)}for(x=0;x<c.length;x+=2){E=c[0]-c[1];x==c.length-1&&t.zoomed&&(E=c[c.length-2]-t.y),0==x&&t.zoomed&&(E=t.y+t.height-c[0]-t.plotOffset);var M={id:this.svgObject.id+"_YAxisAlternateeven"+[x],x:Math.floor(this.model.m_AreaBounds.X),y:c[x],width:A,height:E,fill:t.alternateGridBand.even.fill,opacity:t.alternateGridBand.even.opacity,stroke:"transparent","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"};this.svgRenderer.drawRect(M,_)}Xe(_).appendTo(f)}t.minorGridLines.visible&&0<t.minorTicksPerInterval&&(o=m.toString(),o={id:this.svgObject.id+"_YAxisMinorGridLines_"+e,fill:"none","stroke-width":t.minorGridLines.width,stroke:t.minorGridLines.color,"stroke-dasharray":t.minorGridLines.dashArray,d:o},this.svgRenderer.drawPath(o,f)),r=g.toString(),!t.majorGridLines.visible||""!=(r={id:this.svgObject.id+"_YAxisMajorGridLines_"+e,fill:"none","stroke-width":t.majorGridLines.width,opacity:t.majorGridLines.opacity,"stroke-dasharray":t.majorGridLines.dashArray,stroke:t.majorGridLines.color,d:r}).d&&this.svgRenderer.drawPath(r,f),Xe(f).appendTo(this.svgObject)},textOverflowMultiLevelLabels:function(e,t,i,s,n,a,r,o,l,d){var h,c,u,p,m,g=o.y,f=0;if("wrap"!=n&&"wrapandtrim"!=n)return i="trim"==n?ej.EjSvgRender.utils._trimText(s,t,a):s,d.model.enable3D||(g=o.y+r.height),"vertical"==e.orientation.toLowerCase()&&(g=o.y-r.height/4),r=ej.EjSvgRender.utils._measureText(i,null,a),h={X:o.x-r.width/2,Y:g,Width:r.width,Height:r.height},d.model.axisMultiLevelLabelRegions.push({trimText:i,labelText:s,Bounds:h}),i;p=(u=(c=d._wrap(e,t,i,n,a,r)).text).length;for(var _=0;_<p;_++)o.y+=r.height,d.model.enable3D||(o.id+="_"+_,d.svgRenderer.drawText(o,u[_],l)),"wrapandtrim"==n&&-1<u[_].indexOf("...")&&(d.model.enable3D&&0==f&&(o.y-=r.height),m=c.unTrimmedText,r=ej.EjSvgRender.utils._measureText(u[_],null,a),h={X:o.x-r.width/2,Y:o.y,Width:r.width,Height:r.height},d.model.axisMultiLevelLabelRegions.push({trimText:u[_],labelText:m[f],Bounds:h}),f++);return u},_triggerMultiLevelLabelsRendering:function(e,t,i,s,n,a,r){var o=Xe.extend({},ej.EjSvgRender.commonChartEventArgs);return o.data={text:e,location:{x:t,y:i},textOverflow:s,font:n,border:a},r._trigger("multiLevelLabelRendering",o),o.data},_drawXAxisMultiLevelLabels:function(e,t){var i,s,n,a,r,o,l,d,h,c=this.svgObject.id,u=t.visibleRange,p=this.svgRenderer.createGroup({id:c+"_XAxisMultiLevelLabels_"+e,"clip-path":"url(#"+this.svgObject.id+"_XAxis_Clippath_"+e+")"}),m=this.model.m_AreaBounds,g=t.opposedPosition,f=t.labelPosition.toLowerCase(),_=t.labelBorder,v=t._isScroll?this.model.scrollerSize:0,b=t.majorTickLines.size+t._LableMaxWidth.height+_.width,x=t.x,y=t.y+b+v,w=t.width+this.model.chartArea.border.width,C=t._multiLevelLabelHeight+10-2;g?y="outside"==f?t.y-b-t._multiLevelLabelHeight-5-v:t.y+b-5:"inside"==f&&(y=t.y-b-t._multiLevelLabelHeight);_={id:this.svgObject.id+"_XAxis_Clippath_"+e,x:x,y:y,width:w,height:C,fill:"white","stroke-width":1,stroke:"Gray"};for(this.svgRenderer.drawClipPath(_,p),i=0;i<t.multiLevelLabels.length;i++)if("string"==typeof(E=t.multiLevelLabels[i]).start&&-1!=E.start.indexOf("/Date(")&&(E.start=parseInt(E.start.substr(6))),"string"==typeof E.end&&-1!=E.end.indexOf("/Date(")&&(E.end=parseInt(E.end.substr(6))),E.visible&&(E.start>=u.min&&E.start<=u.max||E.end>=u.min&&E.end<=u.max||E.start<u.min&&E.end>u.max)){D=E.font,L=(I=E.border).width,r=E._level,O=E.textOverflow.toLowerCase(),j=I.type.toLowerCase(),h=E.textAlignment.toLowerCase(),n=Math.ceil(ej.EjSvgRender.utils._getPointXY(E.start,u,t.isInversed)*t.width),a=Math.ceil(ej.EjSvgRender.utils._getPointXY(E.end,u,t.isInversed)*t.width),t.isInversed&&(n=(a=(n-=a)+a)-n),T=E.text,s=ej.EjSvgRender.utils._measureText(T,null,D),l=ej.util.isNullOrUndefined(E.maximumTextWidth)?a-n-L-10:E.maximumTextWidth-10,R=n+t.x+5,k=b+t.y,k=g?"outside"==f?t.y-b-t.multiLevelLabelHeight[r]-10-t.prevHeight[r]-v:t.y+b-5+t.prevHeight[r]:"inside"==f?t.y-b-t.multiLevelLabelHeight[r]-t.prevHeight[r]:b+t.y+t.prevHeight[r]+v,this.model.enableCanvasRendering&&(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.svgRenderer.ctx.rect(x,y,w,C),this.svgRenderer.ctx.clip()),"center"==h?(R+=l/2,o="middle"):"far"==h?(R=R+l-L/2,o="end"):(o="start",R+=L/2);var S=this._triggerMultiLevelLabelsRendering(T,R,k,O,D,E.border,this),T=S.text,R=S.location.x,k=S.location.y,O=S.textOverflow.toLowerCase(),D=S.font,I=S.border,j=S.border.type.toLowerCase(),L=S.border.width,A={id:c+"_XAxisMultiLevelLabels_Text_"+e+"_"+i,x:R,y:"curlybrace"==j?k+10:k,fill:D.color||t.multiLevelLabelsFontColor,"font-size":D.size,"font-family":D.fontFamily,"font-style":D.fontStyle,"font-weight":D.fontWeight,opacity:D.opacity,"text-anchor":o},S=T;"none"!=O&&(S=this.textOverflowMultiLevelLabels(t,l,S,T,O,D,s,A,p,this)),"wrap"!=O&&"wrapandtrim"!=O&&(A.y+=s.height,s.height<t.multiLevelLabelHeight[r]&&(A.y=A.y+t.multiLevelLabelHeight[r]/2-s.height/2),this.svgRenderer.drawText(A,S,p)),k=g?"inside"==f?b+t.y+t.prevHeight[r]-5:t.y-b-t.multiLevelLabelHeight[r]-10+2-t.prevHeight[r]-v:"inside"==f?t.y-b-t.multiLevelLabelHeight[r]-3-t.prevHeight[r]:b+t.y+t.prevHeight[r]+v;var E={bounds:{x:R=n+t.x,y:k+=L,height:S=t.multiLevelLabelHeight[r]+5,width:l=10+l+L},axisIndex:e,multiLevelLabel:E};this.model.multiLevelLabelRegions.push(E);var P,E="";s.width;if("rectangle"==j)d={id:c+"_XAxisMultiLevelLabels_Rect_"+e+"_"+i,x:R,y:k,width:l,height:S,fill:"transparent",stroke:I.color||t.multiLevelLabelsColor,"stroke-width":L},this.svgRenderer.drawRect(d,p);else{switch(j){case"withouttopandbottomborder":E="M "+R+" "+k+" L "+R+" "+(k+S)+" M "+(R+l)+" "+k+" L "+(R+l)+" "+(k+S);break;case"withouttopborder":E="M "+R+" "+(k+(j=!g&&"outside"==f||g&&"inside"==f?S:0))+" L "+(R+l)+" "+(k+j)+" M "+R+" "+k+" L "+R+" "+(k+S)+" M "+(R+l)+" "+k+" L "+(R+l)+" "+(k+S);break;case"brace":A="near"==h?(P=A.x,A.x+s.width+2):"center"==h?(P=A.x-s.width/2-2<=m.X+n?m.X+n+10:A.x-s.width/2-2,A.x+s.width/2+2>m.X+a?m.X+a-10:A.x+s.width/2+2):(P=A.x-s.width-2,A.x),E=!g&&"outside"==f||g&&"inside"==f?"M "+R+" "+k+" L "+R+" "+(k+S/2)+" M "+R+" "+(k+S/2)+" L "+(P-2)+" "+(k+S/2)+" M "+A+" "+(k+S/2)+" L "+(R+l)+" "+(k+S/2)+" M "+(R+l)+" "+(k+S/2)+" L "+(R+l)+" "+k:"M "+R+" "+(k+S)+" L "+R+" "+(k+S/2)+" M "+R+" "+(k+S/2)+" L "+P+" "+(k+S/2)+" M "+A+" "+(k+S/2)+" L "+(R+l)+" "+(k+S/2)+" M "+(R+l)+" "+(k+S)+" L "+(R+l)+" "+(k+S/2);break;case"curlybrace":k=t.y+b+t.prevHeight[r],E=l<30?"M "+(R+l/2-5)+" "+(k+10)+" L "+(R+l/2)+" "+(k+15)+" L "+(R+l/2+5)+" "+(k+10):g||"center"==h?"M "+R+" "+k+" C "+R+" "+k+" "+(R+5)+" "+(k+10)+" "+(R+10)+" "+(k+10)+" L "+(R+l/2-5)+" "+(k+10)+" L "+(R+l/2)+" "+(k+15)+" L "+(R+l/2+5)+" "+(k+10)+" L "+(R+l-10)+" "+(k+10)+" C "+(R+l-10)+" "+(k+10)+" "+(R+l)+" "+(k+5)+" "+(R+l)+" "+k:"near"==h?"M "+R+" "+k+" C "+R+" "+k+" "+(R+5)+" "+(k+10)+" "+(R+10)+" "+(k+10)+" L "+(R+15)+" "+(k+15)+" L "+(R+15+5)+" "+(k+10)+" L "+(R+l-10)+" "+(k+10)+" C "+(R+l-10)+" "+(k+10)+" "+(R+l)+" "+(k+5)+" "+(R+l)+" "+k:"M "+R+" "+k+" C "+R+" "+k+" "+(R+5)+" "+(k+10)+" "+(R+10)+" "+(k+10)+" L "+(R+l-20)+" "+(k+10)+" L "+(R+l-15)+" "+(k+15)+" L "+(R+l-10)+" "+(k+10)+" L "+(R+l-10)+" "+(k+10)+" C "+(R+l-10)+" "+(k+10)+" "+(R+l)+" "+(k+5)+" "+(R+l)+" "+k}E&&(d={id:c+"_XAxisMultiLevelLabels_Rect_"+e+"_"+i,d:E,stroke:I.color||t.multiLevelLabelsColor,"stroke-width":I.width,fill:"none"},this.svgRenderer.drawPath(d,p))}this.model.enableCanvasRendering&&this.svgRenderer.ctx.restore(),Xe(p).appendTo(this.gXaxisEle)}},_drawYAxisMultiLevelLabels:function(e,t){var i,s,n,a,r,o,l,d,h,c=this.svgObject.id,u=t.visibleRange,p=this.svgRenderer.createGroup({id:c+"_YAxisMultiLevelLabels_"+e,"clip-path":"url(#"+this.svgObject.id+"_YAxis_Clippath_"+e+")"}),m=(this.model.m_AreaBounds,t.opposedPosition),g=t.labelPosition.toLowerCase(),f=t.labelBorder,_=t._multiLevelLabelHeight,v=t.majorTickLines.size+t._LableMaxWidth.width+f.width+10,b=t._isScroll?this.model.scrollerSize:0,x=t.y,y=_+5,w=t.height+5,C=m?"outside"==g?t.x+v-5+b:t.x-_-v+5:"outside"==g?t.x-_-v-b:t.x+v-5,f={id:this.svgObject.id+"_YAxis_Clippath_"+e,x:C,y:t.y,width:y,height:w,fill:"white","stroke-width":1,stroke:"Gray"};for(this.svgRenderer.drawClipPath(f,p),i=0;i<t.multiLevelLabels.length;i++)if((A=Xe.extend(!0,{},this.model.multiLevelLabelsDefault,t.multiLevelLabels[i])).visible&&(A.start>=u.min&&A.start<=u.max||A.end>=u.min&&A.end<=u.max||A.start<u.min&&A.end>u.max)){D=A.font,S=A.border,s=A._level,L=A.maximumTextWidth,O=A.textOverflow.toLowerCase(),S.type.toLowerCase(),l=A.textAlignment.toLowerCase(),h=Math.ceil(ej.EjSvgRender.utils._getPointXY(A.start,u,t.isInversed)*t.height),d=Math.ceil(ej.EjSvgRender.utils._getPointXY(A.end,u,t.isInversed)*t.height),t.isInversed&&(h=(d=(h-=d)+d)-h),T=A.text,a=ej.EjSvgRender.utils._measureText(T,null,D),j=d-h-S.width,n=ej.util.isNullOrUndefined(L)?t.multiLevelLabelHeight[s]+5:L-5,R=t.x-v-t.prevHeight[s]-t.multiLevelLabelHeight[s]/2+S.width-2.5,k=t.height+t.y-h-j/2,R=m?"outside"==g?t.x+v+t.multiLevelLabelHeight[s]/2+t.prevHeight[s]+S.width+b:t.x-v-t.multiLevelLabelHeight[s]/2-t.prevHeight[s]+S.width+2.5:"inside"==g?t.x+v+t.multiLevelLabelHeight[s]/2+t.prevHeight[s]-2.5:R+0-b,this.model.enableCanvasRendering&&(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.svgRenderer.ctx.rect(C,x,y,w),this.svgRenderer.ctx.clip()),"far"==l?k=k+j/2-a.height/2:"near"==l?k=k-j/2+a.height:k+=a.height/4;var S,T=(L=this._triggerMultiLevelLabelsRendering(T,R,k,O,D,A.border,this)).text,R=L.location.x,k=L.location.y,O=L.textOverflow,D=L.font,I=(S=L.border).type.toLowerCase(),j=(S.width,{id:c+"_YAxisMultiLevelLabels_Text_"+e+"_"+i,x:"curlybrace"==I?m?R+0+10:R+0-10:R+0,y:k,fill:D.color||t.multiLevelLabelsFontColor,"font-size":D.size,"font-family":D.fontFamily,"font-style":D.fontStyle,"font-weight":D.fontWeight,opacity:D.opacity,"text-anchor":"middle"}),L=T;"none"!=O&&(L=this.textOverflowMultiLevelLabels(t,n,L,T,O,D,a,j,p,this)),"wrap"!=O&&"wrapandtrim"!=O&&this.svgRenderer.drawText(j,L,p),R=R-2.5-t.multiLevelLabelHeight[s]/2,k=t.y+t.height-d+S.width,L=d-h,d="",h=t.multiLevelLabelHeight[s]+5,S.width;var A={bounds:{x:R,y:k,height:L,width:h},axisIndex:e,multiLevelLabel:A};if(this.model.multiLevelLabelRegions.push(A),"rectangle"==I)o={id:c+"_YAxisMultiLevelLabels_Rect_"+e+"_"+i,x:R,y:k,width:h,height:L,fill:"transparent",stroke:S.color||t.multiLevelLabelsColor,"stroke-width":S.width},this.svgRenderer.drawRect(o,p);else{switch(I){case"withouttopandbottomborder":d="M "+R+" "+(k+L)+" L "+(R+h)+" "+(k+L)+" M "+R+" "+k+" L "+(R+h)+" "+k;break;case"withouttopborder":d="M "+R+" "+(k+L)+" L "+(R+h)+" "+(k+L)+" M "+R+" "+k+" L "+(R+h)+" "+k+" M "+(R+(r=!m&&"outside"==g||m&&"inside"==g?0:h))+" "+(k+L)+" L "+(R+r)+" "+k;break;case"brace":r=j.y-a.height/2-4,a=j.y+a.height/4+2,d=!m&&"outside"==g||m&&"inside"==g?"M "+(R+h)+" "+k+" L "+(R+h/2)+" "+k+" M "+(R+h/2)+" "+k+" L "+(R+h/2)+" "+r+" M "+(R+h/2)+" "+a+" L "+(R+h/2)+" "+(k+L)+" M "+(R+h/2)+" "+(k+L)+" L "+(R+h)+" "+(k+L):"M "+R+" "+k+" L "+(R+h/2)+" "+k+" M "+(R+h/2)+" "+k+" L "+(R+h/2)+" "+r+" M "+(R+h/2)+" "+a+" L "+(R+h/2)+" "+(k+L)+" M "+(R+h/2)+" "+(k+L)+" L "+R+" "+(k+L);break;case"curlybrace":R=t.x-v-t.prevHeight[s],h=L-10,d=L<30?m?" M "+((R=t.x+v+t.prevHeight[s])+10)+" "+(k+(h=L-10)/2)+"  L "+(R+15)+" "+(k+h/2+5)+" L "+(R+10)+" "+(k+h/2+10):"M "+(R-10)+" "+(k+L/2-5)+" L "+(R-15)+" "+(k+L/2)+" L "+(R-10)+" "+(k+L/2+5):m?"M "+(R=t.x+v+t.prevHeight[s])+" "+k+" C "+R+" "+k+" "+(R+10)+" "+k+" "+(R+10)+" "+(k+10)+" L "+(R+10)+" "+(k+(h=L-10)/2)+"  L "+(R+15)+" "+(k+h/2+5)+" L "+(R+10)+" "+(k+h/2+10)+" L "+(R+10)+" "+(k+h)+" C"+(R+10)+" "+(k+h)+" "+(R+5)+" "+(k+h+10)+" "+R+" "+(k+h+10):"center"==l?"M "+R+" "+k+" C "+R+" "+k+" "+(R-10)+" "+k+" "+(R-10)+" "+(k+10)+" L "+(R-10)+" "+(k+h/2)+" L "+(R-15)+" "+(k+h/2+5)+" L "+(R-10)+" "+(k+h/2+10)+" L "+(R-10)+" "+(k+h)+" C "+(R-10)+" "+(k+h)+" "+(R-5)+" "+(k+h+10)+" "+R+" "+(k+h+10):"far"==l?"M "+R+" "+k+" C "+R+" "+k+" "+(R-10)+" "+k+" "+(R-10)+" "+(k+10)+" L "+(R-10)+" "+(k+h-10)+"  L "+(R-15)+" "+(k+h-10+5)+" L "+(R-10)+" "+(k+h)+" L "+(R-10)+" "+(k+h)+" C"+(R-10)+" "+(k+h)+" "+(R-10)+" "+(k+h+10)+" "+R+" "+(k+h+10):"M "+R+" "+k+" C "+R+" "+k+" "+(R-10)+" "+k+" "+(R-10)+" "+(k+10)+" L "+(R-15)+" "+(k+10+5)+" L "+(R-10)+" "+(k+10+10)+" L "+(R-10)+" "+(k+h)+" C"+(R-10)+" "+(k+h)+" "+(R-5)+" "+(k+h+10)+" "+R+" "+(k+h+10)}d&&(o={id:c+"_YAxisMultiLevelLabels_Rect_"+e+"_"+i,d:d,stroke:S.color||t.multiLevelLabelsColor,"stroke-width":S.width,fill:"none"},this.svgRenderer.drawPath(o,p))}this.model.enableCanvasRendering&&this.svgRenderer.ctx.restore(),Xe(p).appendTo(this.gYaxisEle)}},_getLabelCollection:function(e,t,i,s,n){var a,r,o=[],l=[];"string"==typeof e&&-1!=e.indexOf("<br>")?o=e.split("<br>"):o.push(e),s=s<=0?i.width/i.labels.length:s,a=o.length;for(var d=0;d<a;d++){r=this.rowscalculation(o[d].toString(),t,i,s,n);for(var h=0;h<r.length;h++)l.push(r[h])}return l},_drawXAxisLabels:function(e,t){var i,s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v,b,x=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisLabels_"+e,cursor:"default"}),y=(this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisLabels_"+e,cursor:"default"}),this.model.m_AreaBounds),w=this.model.enableCanvasRendering,C=t.name.replace(/[^a-zA-Z0-9]/g,""),S=t._opposed,T=t._valueType,R=t.alignment.toLowerCase(),k=t.labelIntersectAction,O=t.labelPlacement.toLowerCase(),D=!1,I=0,j="inside"==t.tickLinesPosition,L=t._LableMaxWidth,A=L.height,E=0==L.rows?1:L.rows,P=this.svgRenderer.vmlNamespace,M=t.axisLine.width,F=t.font,N=t.rotationValue,z=y.Width,V=y.X,B=t.labelIntersectAction.toLowerCase(),H=Xe(this.svgObject).width(),Y=t.maximumLabelWidth,U=t.visibleRange,W=z,X=t.majorTickLines.size,G=t.visibleLabels,T=t.valueType&&t.valueType.toLowerCase(),$=t.width,q=t.isInversed,Q=t.majorTickLines.width,K=!1,Z=this.model.scrollerSize,J=t.rotateOn.toLowerCase(),ee="inside"==t.labelPosition,te=0,ie=[],se=[],ne=[],ae=t._isScroll&&!(null!=t.scrollbarSettings.pointsLength&&t.scrollbarSettings.pointsLength<t.maxPointLength);this.edgeLabel=!1,0!=e&&(ee&&j||ee&&!j)&&t.y!=y.Height+y.Y&&t.y!=y.Y?t.y=S?Math.floor(t.y-A):Math.floor(t.y+A):0!=e&&ee&&j&&t.y!=y.Height+y.Y&&t.y!=y.Y?t.y=S?Math.floor(t.y-X):Math.floor(t.y+X):(t._y=Math.floor(t.y),t.y=t.showNextToAxisLine?Math.floor(t.y):S?Math.floor(y.Y):Math.floor(y.Height+y.Y));for(var re=0;re<G.length;re++)if(g=(m=G[re]).displayText=ej.util.isNullOrUndefined(m.displayText)?m.Text:m.displayText,ej.EjSvgRender.utils._inside(m.Value,U)){a=$/G.length,ej.isNullOrUndefined(T)||re<G.length-1&&"datetimecategory"==T&&"wrap"==B&&"betweenticks"==O&&(d=G[re+1],m.Value-=.5,h=d.Value-.5);var oe=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(m.Value,U,q)*$));if(ej.isNullOrUndefined(T)||(re<G.length-1&&"datetimecategory"==T&&"wrap"==B&&"betweenticks"==O?(l=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(h,U,q)*$)),r=0==re?t.x+oe+(Q-.5):t.x+oe+(Q+.5),a=(o=t.x+l+(Q+.5))-r):"datetimecategory"==T&&"wrap"==B&&"betweenticks"==O?(a=$+t.x-o,r=o):"datetimecategory"==T&&"wrap"==B&&"onticks"==O&&(a=$/t.labels.length)),t._gap=r,this.edgeLabel=!1,Ce="string"==typeof g&&-1!=g.indexOf("<br>")?ej.EjSvgRender.utils._getHighestLabel(t,H,g):g,ue=(we=ej.EjSvgRender.utils._measureText(Ce,W,t.font)).width,we.height,I=0,D=!1,"trim"==B||t.enableTrim){if("onticks"==O)if(re!=G.length-1){var le=m,de=G[re+1];ne=[],se=[],"string"==typeof(d=G[re+1]).Text&&-1!=d.Text.indexOf("<br>")||"string"==typeof m.Text&&-1!=m.Text.indexOf("<br>")?(ne=m.Text.split("<br>"),se=d.Text.split("<br>")):(se.push(d.Text),m.displayText?ne.push(m.displayText):ne.push(m.Text));for(var he=0;he<se.length;he++){We=(Oe=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(d.Value,U,q)*$)))-(De=ej.EjSvgRender.utils._measureText(se[he],z,F).width)/2,c=!(I=0);for(var ce=0;ce<ne.length&&c;ce++)for(var ue=ej.EjSvgRender.utils._measureText(ne[ce],W,t.font).width;We<oe+ue/2&&I<2;){I++,K=ue<De?(u=se[he],!1):(u=ne[ce],!0),s=u;var pe={};pe.displayText=u;for(var me=1;me<s.length;me++)if(s=pe.displayText.substring(0,me)+"... ",p=ej.EjSvgRender.utils._measureText(s,z,F).width,K){if((We=Oe-De/2)<oe+p/2){me-1!=0&&(s=s.toString().substring(0,me-1)+"... "),ue=p,g=pe.displayText=le.displayText=s,ne[ce]=s;break}}else if((We=Oe-p/2)<oe+ue/2){me-1!=0&&(s=s.toString().substring(0,me-1)+"... "),De=p,pe.displayText=de.displayText=s,se[he]=s,c=!1;break}}}}else re==G.length-1&&(ne=se);else if("betweenticks"==O){var ge=t.enableTrim?Y:a,ne=[];"string"==typeof g&&-1!=g.indexOf("<br>")?ne=g.split("<br>"):ne.push(g);for(var fe=ne.length,he=0;he<fe;he++)if(m.displayText=ne[he],ge<(ue=(we=ej.EjSvgRender.utils._measureText(ne[he],W,t.font)).width)&&""!=ne[he]){for(me=1;me<ne[he].toString().length;me++)if(ne[he]=m.displayText.toString().substring(0,me)+"... ",ge<=(ue=ej.EjSvgRender.utils._measureText(ne[he],z,F).width)){if(ne[he]=ne[he].toString().substring(0,me-1)+"... ",m.displayText=ne[he],!(re==G.length-1&&oe+t.x+ue/2>H&&ge==a))break;ge-=ue/2,me=1}m.displayText=ne[he]}}"double"==t._valueType&&"string"!=typeof m.displayText||(Ce=0<ne.length?ej.EjSvgRender.utils._getHighestLabel(t,H,ne,null):Ce,we=ej.EjSvgRender.utils._measureText(Ce,z,F))}else we="string"==typeof g&&-1!=g.indexOf("<br>")?ej.EjSvgRender.utils._measureText(Ce,z,F):ej.EjSvgRender.utils._measureText(m.displayText,z,F);if(Te=we.width/2,n=we.height,ue=we.width,l=t.majorGridLines.width>Q?t.majorGridLines.width:Q,!ej.util.isNullOrUndefined(m.Text)){l="near"==R?oe+t.x+l+("category"==T&&"onticks"!=O?-($/t.actualRange.delta)/2+3:-we.width-3):"far"==R?oe+t.x+("category"==T&&"onticks"!=O?+($/t.actualRange.delta)/2-we.width:+l+3):oe+t.x-Te,ee&&j||ee&&!j&&"multiplerows"==B?i=S?t.y+X+n/2+M/2+A/(2*E)-5:t.y-X-M/2-A/(2*E)+5:ee&&!j?i=S?t.y+n/2+M/2+A/(2*E)-5:t.y-M/2-A/(2*E)+5:!ee&&!j||!ee&&j&&"multiplerows"==B?(i=S?t.y-X+n/2-M/2-A/(2*E)-5:t.y+X+M/2+A/(2*E)+5,i+=ae?S?-Z:Z:0):!ee&&j&&(i=S?t.y+n/2-M/2-A/(2*E)-5:t.y+M/2+A/(2*E)+5,i+=ae?S?-Z:Z:0),ee&&!j?90!=N&&"rotate90"!=B||(i=S?i:i-X):!ee&&j?90!=t.labelRotation&&"rotate90"!=B||(i-=X):ee&&j&&(90!=t.labelRotation&&"rotate90"!=B||(i=S?i:i-X));var _e,ve={id:this.svgObject.id+"_"+C+"_XLabel_"+re,x:l,y:i,fill:F.color,"font-size":F.size,"font-family":F.fontFamily,"font-style":F.fontStyle,"font-weight":F.fontWeight,opacity:F.opacity};if(t.edgeLabelPlacement)switch(f=t.edgeLabelPlacement.toLowerCase(),_e=G.length-1,f){case"none":break;case"shift":0==re?ve.x<t.x&&(_=t.x-ve.x,ve.x=l=ve.x+_,this.diff=_,this.edgeLabel=!0):re==_e&&ve.x+we.width>t.x+t.width&&(_=ve.x+we.width-(t.x+t.width),ve.x=l=ve.x-_,this.diff=_,this.edgeLabel=!0);break;case"hide":(0==re&&ve.x<t.x||re==_e&&ve.x+ue>z+V)&&(g="")}if("wrap"!=B&&"wrapbyword"!=B||(xe=this._getLabelCollection(g,W,t,a,ve),_e=ej.EjSvgRender.utils._getHighestLabel(t,Xe(this.svgObject).width(),xe,null),ue=ej.EjSvgRender.utils._measureText(_e,z,F).width),0==N||P||(m.displayText="string"==typeof m.displayText&&-1!=m.displayText.indexOf("<br>")?ej.EjSvgRender.utils._getHighestLabel(t,H,m.displayText):m.displayText,this.labelRotation(t,l+Te,i,ve,m,N)),t.labelIntersectAction||t.enableTrim){if(this.diff=ej.util.isNullOrUndefined(this.diff)?0:this.diff,"none"==B&&!t.enableTrim){"string"==typeof g&&-1!=g.indexOf("<br>")?(be=g.split("<br>"),ve.y=ee?S?ve.y:ve.y-n*(be.length-1):S?ve.y-n*(be.length-1):ve.y,0!=N&&(ve.x=ve.x+ue/2,ve["text-anchor"]=J),this.svgRenderer.drawText(ve,be,w?Ce:x)):("start"!=J&&"end"!=J||0==N||-360==N||360==N||(ve.x=ve.x+ue/2,ve["text-anchor"]=J),this.svgRenderer.drawText(ve,g,w?Ce:x)),G[re].region=this.calculateRegion(g,F,ve,m),this.model.xAxisLabelRegions.push(G[re].region),ee?Xe(x).appendTo(this.gXaxisTickEle):Xe(x).appendTo(this.gXaxisEle);continue}if(!("wrap"!=B&&"wrapbyword"!=B||t.enableTrim)){var be=[],xe=[];"string"==typeof g&&-1!=g.indexOf("<br>")?be=g.split("<br>"):be.push(g),b="",a=a<=0?$/G.length:a;for(var ye=0;ye<be.length;ye++){v=this.rowscalculation(be[ye].toString(),W,t,a,ve);for(me=0;me<v.length;me++)xe.push(v[me]),b+=v[me]}ve.x=ve.x+Te,-1==b.indexOf("...")&&(b=g);var we,Ce=ej.EjSvgRender.utils._getHighestLabel(t,H,xe,null),ue=(we=ej.EjSvgRender.utils._measureText(Ce,z,F)).width;ve.x=ve.x-ue/2,ve.y=ee?S?ve.y:ve.y-n*(xe.length-1):S?ve.y-n*(xe.length-1):ve.y,0!=N&&-360!=N&&360!=N&&(ve["text-anchor"]=J,ve.x=ve.x+ue/2),this.svgRenderer.drawText(ve,xe,w?Ce:x),Te=ej.EjSvgRender.utils._measureText(xe[0],null,F);var Se=xe.length,Te=Te.height*xe.length,Se={x:ve.x,y:ve.y,width:ue,height:Te-Te/Se};G[re].region={bounds:Se,labelText:m.Text,displayText:b},G[re].displayText=b,this.model.xAxisLabelRegions.push(G[re].region);continue}if("hide"==B)for(var Re=G.length-1,ke=0;ke<re;ke++){He=G[ke],Be=0,Ye=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(He.Value,U,t.isInversed)*t.width)),Ue=ej.EjSvgRender.utils._measureText(He.displayText,W,t.font).width,We=Ye+(t.isInversed?-Ue/2:Ue/2),We=0==ke?We+this.diff:We;var Oe,De,Ie,je=0==Ue?Ue:ue;(re!=Re||re==Re&&ue<=Ue)&&(je/=2),"shift"==f&&re==Re&&(Ie=G[re],Oe=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(Ie.Value,U,t.isInversed)*t.width)),De=ej.EjSvgRender.utils._measureText(Ie.displayText,W,t.font).width,Ie=Oe+(t.isInversed?De/2:-De/2),(t.isInversed?We<=Ie-this.diff:We>=Ie-this.diff)&&(g=m.displayText="")),"hide"==B&&(t.isInversed?We<oe+je:oe-je<We)&&(m.displayText=g="")}else if("multiplerows"==B&&!t.enableTrim){var Le=[],Ae=m;"string"==typeof Ae.Text&&-1!=Ae.Text.indexOf("<br>")?Le=Ae.Text.split("<br>"):Le.push(Ae.Text);var Ee=Le.length;if(""==g&&"hide"==t.edgeLabelPlacement)for(var Pe=0;Pe<Ee;Pe++)Le[Pe]="";Se=ej.EjSvgRender.utils._getHighestLabel(t,H,Le),ue=ej.EjSvgRender.utils._measureText(Se,z,F).width,Re=t.visibleLabels.length-1;if(ue/=2,0<ie.length)for(var Me=ie,Fe=0;Fe<Me.length&&!D;Fe++)for(var Ne=Me[Fe],ze=0;Ne&&ze<Ne.length;ze++)for(var Ve=0;Ve<Ee;Ve++){var Be=0,ue=ej.EjSvgRender.utils._measureText(Le[Ve],z,F).width,He=Ne[ze],Ye=Math.abs(Math.floor(ej.EjSvgRender.utils._getPointXY(He.Value,U,t.isInversed)*t.width)),Ue=ej.EjSvgRender.utils._measureText(He.Text,W,t.font).width;re!=Re&&(ue/=2);var We=Ye+(t.isInversed?-Ue/2:Ue/2);if(!this.edgeLabel&&1!=Me.length||(We+=this.diff),t.isInversed?We<oe+ue:oe-ue<We){if(S){Be=ee?ve.y+n:ve.y-n,ve.y=Be,(I+=1)<te&&(I+=te,te=0),Fe+1==Me.length&&(D=!0);break}Be=ee?ve.y-n:ve.y+n,ve.y=Be,(I+=1)<te&&(I+=te,te=0),Fe+1==Me.length&&(D=!0);break}if(ze+1==Ne.length){D=Ve==Ee-1||(te++,!1);break}}if(null==Be)if(null==ie[0]&&(ie[0]=[]),1==Ee)ie[0].push(Ae);else for(Ve=0;Ve<Ee;Ve++)null==ie[Ve]&&(ie[Ve]=[]),ie[Ve].push({Text:Le[Ve],Value:Ae.Value});else if(null==ie[I]&&(ie[I]=[]),1==Ee)ie[I].push(Ae);else for(Ve=0;Ve<Ee;Ve++)null==ie[I]&&(ie[I]=[]),ie[I].push({Text:Le[Ve],Value:Ae.Value}),Ve!=Ee-1&&(I+=1);ve.y=ee?S?ve.y:ve.y-n*(Le.length-1):S?ve.y-n*(Le.length-1):ve.y,0!=N&&-360!=N&&360!=N&&(Se=ej.EjSvgRender.utils._getHighestLabel(t,H,Le),ue=ej.EjSvgRender.utils._measureText(Se,z,F).width,ve["text-anchor"]=J,ve.x=ve.x+ue/2),this.svgRenderer.drawText(ve,Le,x)}}this.edgeLabel||this.zoomed||t.zoomed||N||"rotate90"==k||"rotate45"==k||!(oe+t.x+ue/2>Xe(this.svgObject).width())||(Xe(ve).attr("x",Xe(this.svgObject).width()-2),Xe(ve).attr("text-anchor","end")),t.visibleLabels[re].y=ve.y,this.model.enableCanvasRendering&&ee&&("rotate45"==t.labelIntersectAction||"rotate90"==t.labelIntersectAction)&&(ve.y=ve.y-ue),"trim"!=B&&!t.enableTrim||"double"==t._valueType&&"string"!=typeof m.displayText?"multiplerows"!=B&&("string"==typeof g&&-1!=g.indexOf("<br>")?(be=g.split("<br>"),ve.y=ee?S?ve.y:ve.y-n*(be.length-1):S?ve.y-n*(be.length-1):ve.y,0==N&&"rotate45"!=k&&"rotate90"!=k||(ve.x=ve.x+ue/2,ve["text-anchor"]=J),this.svgRenderer.drawText(ve,be,w?Ce:x)):("start"==J&&0!=N&&-360!=N&&360!=N&&(ve.x=ve.x+ue/2,ve["text-anchor"]=J),this.svgRenderer.drawText(ve,g,w?Ce:x))):(ve.y=ee?S?ve.y:ve.y-n*(ne.length-1):S?ve.y-n*(ne.length-1):ve.y,m.displayText=0<ne.length?ne.join(""):g,-1==m.displayText.indexOf("...")&&(m.displayText=g),0!=N&&"middle"!=J&&(ve.x=ve.x+ue/2,ve["text-anchor"]=J),this.svgRenderer.drawText(ve,0<ne.length?ne:g,w?Ce:x)),re==G.length-1||"trim"!=B&&!t.enableTrim||(ve.x=ve.x-ue/2),t.visibleLabels[re].region=this.calculateRegion(g,F,ve,m,ne||be,Ce,B),this.model.xAxisLabelRegions.push(t.visibleLabels[re].region)}}Xe(x).appendTo(this.gXaxisEle)},calculateRegion:function(e,t,i,s,n,a,r){var o;"trim"==r&&0<n.length?-1==(o=n.join("")).indexOf("...")&&(o=s.Text):o=a||e;n=n&&0<n.length?n.length:1,t=1<n&&a?ej.EjSvgRender.utils._measureText(a,null,t):ej.EjSvgRender.utils._measureText(o,null,t),n=t.height*n;return{bounds:{x:i.x,y:i.y,width:t.width,height:n},trimText:o,labelText:s.Text}},rowscalculation:function(e,t,i,s,n){var a,r=ej.EjSvgRender.utils._measureText,o=i.font,l=r(e,t,o).width,d=e.toString(),h=d.length,c=[],u=0,p=i.labelIntersectAction,m=d.split(" "),g=m.length;if(this.edgeLabel&&(s=0==u?s-this.diff:s),s<l&&n&&(this.edgeLabel&&(n.x=0==u?n.x-this.diff:n.x+this.diff)),"wrap"==p){if(s<l)for(var f,_=1;_<=d.length;_++)s<(l=r(e=d.substring(0,_),t,o).width)&&(e=d.substring(0,_-1),c[u]=e,a=(d=d.slice(_-1,h)).split(" "),d=-1<m.indexOf(a[0])?d:"-"+d,f=r(e,t,o).width,u++,_=0);n&&(n.x="datetimeCategory"==i.valueType&&"betweenticks"==i.labelPlacement.toLowerCase()?i._gap:n.x),c[u]=e}else for(var v,b,x,y=0,u=0;u<g;u++)if(r(v=m[u],t,o).width<s&&s<l){for(;u<g;){if(!((b=r(v,t,o).width)+(x=m[u+1]?r(m[u+1],t,o).width:0)<=s&&0<x)){y=Math.max(y,b);break}v=v.concat(" "+m[u+1]),u++}c.push(v)}else{if(!(s<l)){c.push(e);break}f=r(v=ej.EjSvgRender.utils._trimText(v,s,o),t,o).width,y=Math.max(y,f),c.push(v)}return c},labelRotation:function(e,t,i,s,n,a,r){var o=e._opposed,l=e.rotateOn.toLowerCase(),d=e.labelIntersectAction.toLowerCase(),h=0,c=n.displayText||n.Text,u=360<a?a-360:a<-360?a+360:a,n="rotate("+u+","+t+","+i+")";Xe(s).attr("transform",n),Xe(s).attr("labelRotation",u),Xe(s).attr("labelPosition",e.labelPosition),"wrap"!=d&&"wrapbyword"!=d||(p=e.width/e.labels.length,m=this._getLabelCollection(c,this.model.m_AreaBounds.width,e,p,s),c=ej.EjSvgRender.utils._getHighestLabel(e,Xe(this.svgObject).width(),m,null));var d=this.svgRenderer.createText(s,c),p=Math.round(ej.EjSvgRender.utils._measureBounds(d,this).height),m=ej.EjSvgRender.utils._measureText(c,null,e.font).height,h=Math.ceil(ej.EjSvgRender.utils._measureBounds(d,this).height-ej.EjSvgRender.utils._measureText(c,null,e.font).height);h=e._LableMaxWidth.height-h-ej.EjSvgRender.utils._measureText(c,null,e.font).height,h="inside"!=e.labelPosition?o?h/2:-h/2:o?-h/2:h/2,"end"==l&&(h+=u<0&&-180<u||180<u?-p/2:(p-m)/2),"start"==l&&(h+=u<0&&-180<u||180<u?p/2:-(p-m)/2),n="rotate("+u+","+t+","+(i+(this.model.enableCanvasRendering&&e.opposedPosition?-h:h))+")",this.edgeLabel&&90==a&&(i=0==r?s.y+this.diff:s.y-this.diff),Xe(s).attr({transform:n,y:i+(this.model.enableCanvasRendering&&e.opposedPosition?-h:h)})},_drawYAxisLabels:function(e,t){var i,s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v=t.name.replace(/[^a-zA-Z0-9]/g,""),b=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisLabels_"+e,cursor:"default"}),x=t._opposed,y="inside"==t.labelPosition,w="inside"==t.tickLinesPosition,C=this.model.m_AreaBounds,S=(this.model.requireInvertedAxes,this.model.enableCanvasRendering),T=t._isScroll&&!(null!=t.scrollbarSettings.pointsLength&&t.scrollbarSettings.pointsLength<t.maxPointLength),R=t.font,k=t.visibleRange,O=t.axisLine.width,D=t._LableMaxWidth,I=(D.height,D.rows,(C=this.model.m_AreaBounds).Width),j=t.maximumLabelWidth,L=this.model.scrollerSize,A=t.labelIntersectAction.toLowerCase(),E=t.visibleLabels,P=k,M=t.isInversed,F=t.height,N=t.labelRotation,z=t.alignment.toLowerCase();1!=e&&(y&&w||y&&!w&&t.x!=C.Width+C.X&&t.x!=C.X)?t.x=x?y&&w?Math.floor(t.x):Math.floor(t.x+D.width+this.model.elementSpacing):t.showNextToAxisLine?Math.floor(t.x):Math.floor(t.x-D.width-this.model.elementSpacing):1==e||t.x==C.Width+C.X&&t.x!=C.X||y||!w?(t._x=Math.floor(t.x),t.x=t.showNextToAxisLine?Math.floor(t.x):x?Math.floor(C.X+C.Width):Math.floor(C.X)):(t._x=Math.floor(t.x),t.x=x?Math.floor(t.x+t.majorTickLines.size):t.showNextToAxisLine?Math.floor(t.x-t.majorTickLines.size):Math.floor(C.X));for(var V=0;V<E.length;V++)if(p=E[V],ej.EjSvgRender.utils._inside(p.Value,P)){h=Math.abs(ej.EjSvgRender.utils._getPointXY(p.Value,P,M)*F),a=ej.EjSvgRender.utils._measureText(p.Text,C.Height,R).height,W=p.displayText=p.Text,U=ej.EjSvgRender.utils._measureText(W,I,R).width,y&&w?(o=x?t.x-t.majorTickLines.size-O/2-5:t.x+O/2+5+t.majorTickLines.size,l=x?"end":"start"):y&&!w?(o=x?t.x-O/2-5:t.x+O/2+5,l=x?"end":"start"):(l=(o=w&&!y?x?O/2+t.x+5:t.x-O/2-5:x?t.majorTickLines.size+O/2+t.x+5:t.x-O/2-5-t.majorTickLines.size,x?"start":"end"),o-=T?x?-L:L:0),_=(t.majorGridLines.width>t.majorTickLines.width?t.majorGridLines:t.majorTickLines).width,_="far"==z?-h+(t.y+F)-_-3:"near"==z?-h+(t.y+F)+a/2+_+3:-h+(t.y+F)+a/4,u={id:this.svgObject.id+"_"+v+"_YLabel_"+V,x:o,y:_,fill:R.color,"font-size":R.size,"font-family":R.fontFamily,"font-style":R.fontStyle,"font-weight":R.fontWeight,opacity:R.opacity,"text-anchor":ej.util.isNullOrUndefined(N)||0==N?l:"middle"};var B,H=[];if("string"==typeof(W=p.displayText||p.Text)&&-1!=W.indexOf("<br>")?(H=W.split("<br>"),B=W=ej.EjSvgRender.utils._getHighestLabel(t,C.Height,H),U=ej.EjSvgRender.utils._measureText(W,I,R).width):H.push(W),t.edgeLabelPlacement)switch(c=t.edgeLabelPlacement.toLowerCase(),r=E.length-1,c){case"none":break;case"shift":0==V?u.y>t.y+F&&(d=u.y-(t.y+F),u.y=_=u.y-d,this.diff=d,this.edgeLabel=!0):V==r&&u.y-a/2<t.y&&(d=t.y-(u.y-a/2),u.y=_=u.y+d,this.diff=d,this.edgeLabel=!0);break;case"hide":(0==V&&u.y>t.y+F||V==r&&u.y-a/2<C.Y)&&(W=p.Text="",1==H.length&&(H[0]=W))}if(ej.util.isNullOrUndefined(N)||0==N||this.svgRenderer.vmlNamespace||(o=y?x?o-U/2:o+U/2:x?o+U/2:o-U/2,W=p.displayText||p.Text,W=B||W,c="rotate("+(h=360<N?N-360:N<-360?N+360:N)+","+o+","+_+")",Xe(u).attr("transform",c),Xe(u).attr("labelRotation",h),r=this.svgRenderer.createText(u,W),r=Math.ceil(ej.EjSvgRender.utils._measureBounds(r,this).width-ej.EjSvgRender.utils._measureText(W,null,R).width),c="rotate("+h+","+(o+(r=y?x?-r/2:r/2:x?r/2:-r/2))+","+_+")",Xe(u).attr({transform:c,x:o+r})),t.labelIntersectAction||t.enableTrim){if("none"==A&&!t.enableTrim){this.svgRenderer.drawText(u,0<H.length?H:p.Text,S&&B?B:b),i=ej.EjSvgRender.utils._measureText(W,null,R),s={bounds:n={x:t.opposedPosition?u.x:u.x-i.width,y:u.y,width:i.width,height:i.height},trimText:W,labelText:p.Text},t.visibleLabels[V].region={bounds:n,trimText:W,labelText:p.Text},this.model.yAxisLabelRegions.push(s);continue}if(t.enableTrim)for(var Y=0;Y<H.length;Y++){var U,W=H[Y];if(j<(U=ej.EjSvgRender.utils._measureText(W,null,R).width)&&""!=W){for(var X=1;X<W.toString().length;X++)if(W=p.displayText.toString().substring(0,X-1)+"...",j<=(U=ej.EjSvgRender.utils._measureText(W,I,R).width)){W=W.toString().substring(0,X-1)+"...";break}p.displayText=H[Y]=W}}for(var G=0;G<V;G++)m=E[G],f=Math.abs(ej.EjSvgRender.utils._getPointXY(m.Value,k,M)*F),g=ej.EjSvgRender.utils._measureText(m.Text,C.Height,R).height,f=-1*f+(t.y+F)+g/4,f+=M?g/2:-g/2,this.edgeLabel&&(f=0==G?f-g/4:f),"hide"==A&&""!=m.Text.toString()&&(M?f>u.y-a/4:f<u.y+a/4)?W=p.Text="":"multiplerows"==A&&(M?f>u.y-a/4:f<u.y+a/4)&&m.x==u.x&&(u.x=m.x+x?y?-D.maxWidth-5:D.maxWidth+5:y?D.maxWidth+5:-D.maxWidth-5)}E[V].x=u.x,this.svgRenderer.drawText(u,0<H.length?H:W,b),i=ej.EjSvgRender.utils._measureText(W,null,R),s={bounds:n={x:x?u.x:u.x-i.width,y:u.y,width:i.width,height:i.height},trimText:W,labelText:p.Text},E[V].region={bounds:n,trimText:W,labelText:p.Text},this.model.yAxisLabelRegions.push(s)}Xe(b).appendTo(this.gYaxisEle)},trimText:function(e,t,i){return t--,(e=e.substring(0,t-i.length))+i},_drawXTitle:function(e,t){if(""!=t.title.text&&t.title.text&&t.title.visible){var i,s=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxis_Title_"+e,cursor:"default"}),n=(this.model.elementSpacing,t._LableMaxWidth.height,ej.EjSvgRender.utils._measureText(t.title.text,t.width,t.title.font)),a=n.height/2,r=t._opposed,o=t.title.text,l=t._LableMaxWidth,d="middle",h=this.model.elementSpacing,c=t.title.enableTrim,u=t._isScroll||this.model.zooming.enableScrollbar&&t.scrollbarSettings.visible&&(t.zoomFactor<1||0<t.zoomPosition),p=t.title.maximumTitleWidth,m=t.title.position.toLowerCase(),g=t.title.alignment.toLowerCase(),f=t.title.isReversed,_=t.tickLinesPosition.toLowerCase(),v=t.labelPosition.toLowerCase(),b=this.model.m_AreaBounds,x=t.title.offset,y=this.model.scrollerSize;if(c&&(ej.util.isNullOrUndefined(p)||0<p||isNaN(p)))for(var w=p||t.width-2*h;n.width>w;)if(o=this.trimText(o,o.length,"..."),n=ej.EjSvgRender.utils._measureText(o,t.width,t.title.font),"..."==o){o="";break}var C=Xe.extend({},ej.EjSvgRender.commonChartEventArgs),S=h+l.height+a+t._multiLevelLabelHeight+t.majorTickLines.size+t.axisLine.width;"inside"!=_||"inside"!=v||0!=e&&t.y!=b.Height+b.Y&&t.y!=b.Y?0!=e&&t.y!=b.Width+b.X&&t.y!=b.X||"inside"==_||"inside"!=v?0!=e&&t.y!=b.Width+b.X&&t.y!=b.X||"inside"!=_||"inside"==v?"inside"!=_&&"inside"!=v||1!=e?S="inside"==m?h:h+l.height+a+t.majorTickLines.size+t.axisLine.width+t._multiLevelLabelHeight:"inside"==_||"inside"!=v||t.showNextToAxisLine||(S="inside"==m?h+l.height+a+t._multiLevelLabelHeight+t.axisLine.width:h+a+t.majorTickLines.size+t.axisLine.width+h+h):S="inside"==m?h+a+t.majorTickLines.size+t.axisLine.width:h+l.height+a+t._multiLevelLabelHeight+t.axisLine.width:S="inside"==m?h+l.height+a+t._multiLevelLabelHeight+t.axisLine.width:h+t.majorTickLines.size+t.axisLine.width:S="inside"==m?h+l.height+a+t._multiLevelLabelHeight+t.majorTickLines.size+t.axisLine.width:h+a+t.axisLine.width,"far"==g?(i=f?t.x+x:t.x+t.width+x,d=f?"start":"end"):"near"==g?(i=f?t.x+t.width+x:t.x+x,d=f?"end":"start"):i=t.x+t.width/2+x,C.data={title:t.title.text,location:{x:i,y:S},axes:t},this._trigger("axesTitleRendering",C),_="inside"==m?(r?"inside"==_&&"outside"==v?t.y+C.data.location.y-(u?y:0)-t.majorTickLines.size:t.y+C.data.location.y-(u?y:0):"outside"==_&&"inside"==v?(u?y:0)+(t.y-C.data.location.y)+t.majorTickLines.size:(u?y:0)+(t.y-C.data.location.y))+n.height/3.5:(r?"inside"==_&&"outside"==v?t.y-C.data.location.y-(u?y:0)-t.majorTickLines.size:t.y-C.data.location.y-(u?y:0):"outside"==_&&"inside"==v?(u?y:0)+(C.data.location.y+t.y)-t.majorTickLines.size:(u?y:0)+(C.data.location.y+t.y))+n.height/3.5;v={id:this.svgObject.id+"_XAxisTitle_"+e,x:C.data.location.x,y:_,fill:t.title.font.color,"font-size":t.title.font.size,"font-family":t.title.font.fontFamily,"font-style":t.title.font.fontStyle,"font-weight":t.title.font.fontWeight,opacity:t.title.font.opacity,"text-anchor":d};this.model.enableCanvasRendering&&(u=jQuery.uaMatch(navigator.userAgent),y=!!navigator.userAgent.match(/Trident\/7\./),"msie"==(u=u.browser.toLowerCase())||y||(v.y=r?v.y+a/2+1:v.y+a/2+("mozilla"==u?1:-2))),0<Xe(this.svgObject).find("#"+this.svgObject.id+"_XAxisTitle_"+e).length?Xe(this.svgObject).find("#"+this.svgObject.id+"_XAxisTitle_"+e).attr(v):c?c&&(ej.util.isNullOrUndefined(p)||0<p||isNaN(p))&&(p={Bounds:{X:"middle"==d?v.x-n.width/2:"end"==d?v.x-n.width:v.x,Y:v.y,Width:n.width,Height:n.height},trimText:o,labelText:t.title.text},this.model.xAxisTitleRegion.push(p),this.svgRenderer.drawText(v,o,s)):this.svgRenderer.drawText(v,C.data.title,s),this.model.enableCanvasRendering||(d="start"==d?0:"end"==d?n.width:n.width/2,h={id:this.svgObject.id+"_XAxisTitleBorder_"+e,x:C.data.location.x-d-h,y:_-n.height+n.height/4,width:n.width+2*h,height:n.height,fill:"transparent",class:"e-xaxistitleborder"},this.svgRenderer.drawRect(h,s)),Xe(s).appendTo(this.gXaxisEle)}},_drawYTitle:function(e,t){if(""!=t.title.text&&t.title.text&&t.title.visible){var i=t._opposed,s=this.model.elementSpacing,n="middle",a=this.model.series.isTransposed,r=t.majorTickLines.size,o=t.title.position.toLowerCase(),l=t._LableMaxWidth,d=this.model.m_AreaBounds,h=t.axisLine,c=t.tickLinesPosition.toLowerCase(),u=t.labelPosition.toLowerCase(),p=t.title.text,m=t.title.enableTrim,g=(this.model.requireInvertedAxes,t._isScroll),f=t.title.maximumTitleWidth,_=t.title.offset,v=t.title.alignment.toLowerCase(),b=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisTitleGroup_"+e,cursor:"default"}),x=ej.EjSvgRender.utils._measureText(t.title.text,t.height,t.title.font);"inside"!=c||"inside"!=u||1!=e&&t.x!=d.Width+d.X&&t.x!=d.X?1!=e&&t.x!=d.Width+d.X&&t.x!=d.X||"inside"==c||"inside"!=u?1!=e&&t.x!=d.Width+d.X&&t.x!=d.X||"inside"!=c||"inside"==u?("inside"!=t.tickLinesPosition&&"inside"!=t.labelPosition||1!=e)&&(C="inside"==o?i?t.x-(s+h.width+r):t.x+(s+(t.showNextToAxisLine?0:l.width)+h.width+r):i?t.x+(3*s+t._multiLevelLabelHeight+l.width+r+h.width):t.x-(3*s+l.width+t._multiLevelLabelHeight+r+h.width)):C="inside"==o?i?t.x-(3*s+r+h.width):t.x+(3*s+r+h.width)+(t.showNextToAxisLine?"inside"==u?-t._multiLevelLabelHeight:t._multiLevelLabelHeight:-s):i?t.x+(3*s+t._multiLevelLabelHeight+l.width+h.width):t.x-(3*s+l.width+h.width+t._multiLevelLabelHeight):C="inside"==o?i?t.x-(3*s+l.width+t._multiLevelLabelHeight+h.width):t.x+(3*s+l.width+t._multiLevelLabelHeight+h.width):i?t.x+(3*s+r+h.width):t.x-(3*s+r+h.width):C="inside"==o?i?t.x-(3*s+l.width+t._multiLevelLabelHeight+r+h.width):t.x+(3*s+l.width+t._multiLevelLabelHeight+r+h.width):i?t.x+(3*s+h.width-5):t.x-(3*s+h.width);var y=ej.EjSvgRender.utils._measureText(p,t.height,t.title.font);if(m&&(ej.util.isNullOrUndefined(f)||0<f||isNaN(f)))for(var w=f||t.height-2*s;y.width>w;)if(p=this.trimText(p,p.length,"..."),y=ej.EjSvgRender.utils._measureText(p,t.height,t.title.font),"..."==p){p="";break}C=t.opposedPosition?C:C-(g?this.model.scrollerSize:0),8===document.documentMode&&(C=i?C+y.width/2-s:C-y.width/2+s);h=Xe.extend({},ej.EjSvgRender.commonChartEventArgs);h.data={title:t.title.text,location:{x:x.width/2,y:0},axes:t},this._trigger("axesTitleRendering",h),g=h.data.location.y+(t.y+t.height)+t.height/2*-1,"near"==v?(g=t.y+t.height-_,n=i||a?"end":"start"):"far"==v?(g=t.y-_,n=i||a?"start":"end"):"center"==v&&(g=t.y+t.height/2-_);var C,_=i?90:-90,_={id:this.svgObject.id+"_YAxisTitle_"+e,x:C,y:g,fill:t.title.font.color,labelRotation:_,transform:"rotate("+_+","+C+","+g+")","font-size":t.title.font.size,"font-family":t.title.font.fontFamily,"font-style":t.title.font.fontStyle,"font-weight":t.title.font.fontWeight,opacity:t.title.font.opacity,"text-anchor":n,"dominant-baseline":"middle"};this.model.enableCanvasRendering&&(C=jQuery.uaMatch(navigator.userAgent),g=!!navigator.userAgent.match(/Trident\/7\./),"msie"==(C=C.browser.toLowerCase())||g||(_.x=i?_.x-x.height/4+1:_.x+x.height/4+("mozilla"==C?1:-2))),0<Xe(this.svgObject).find("#"+this.svgObject.id+"_YAxisTitle_"+e).length?Xe(this.svgObject).find("#"+this.svgObject.id+"_YAxisTitle_"+e).attr(_):m?m&&(ej.util.isNullOrUndefined(f)||0<f||isNaN(f))&&(f={Bounds:this.svgRenderer.vmlNamespace?{X:_.x-y.width/2,Y:_.y+y.height/2,Width:y.width,Height:y.height}:{X:_.x-y.height/2,Y:_.y+y.width/2,Width:y.height/2,Height:y.width},trimText:p,labelText:t.title.text},this.model.yAxisTitleRegion.push(f),this.svgRenderer.drawText(_,p,b)):this.svgRenderer.drawText(_,h.data.title,b),this.model.enableCanvasRendering||(n="start"==n?y.width:"end"==n?0:y.width/2,s={id:this.svgObject.id+"_YAxisTitleBorder_"+e,x:_.x-y.height+y.height/2,y:_.y-n-s,width:y.height,height:y.width+2*s,fill:"transparent",class:"e-yaxistitleborder"},this.svgRenderer.drawRect(s,b)),Xe(b).appendTo(this.gYaxisEle)}}},ej.EjStripline.prototype={_drawStripline:function(e,t,i,s){var n,a,r=(ej.util.isNullOrUndefined(e.valueType)?e._valueType:e.valueType).toLowerCase();"string"==typeof t.start&&"string"==typeof t.end&&(t.start=-1!=t.start.indexOf("/Date(")?new Date(parseInt(t.start.substr(6))):t.start,t.end=-1!=t.end.indexOf("/Date(")?new Date(parseInt(t.end.substr(6))):t.end),a="datetimecategory"==r?(n=null!=t.start&&"number"!=typeof t.start?e.labels.indexOf(t.start.getTime()):t.start,null!=t.end&&"number"!=typeof t.end?e.labels.indexOf(t.end.getTime()):t.end):(n=t.start<e.visibleRange.min?e.visibleRange.min:t.start,t.end>e.visibleRange.max?e.visibleRange.max:t.end);var o,l=0,d=t.isRepeat,h=t.repeatEvery,c=t.repeatUntil,u=t.width;if(t.visible){this.model._stripeline=!0;var p=t.startFromAxis,m="over"==t.zIndex?this.gStriplineOver:this.gStriplineBehind,m=ej.util.isNullOrUndefined(m)?"":m,g=!0,f=0;if("horizontal"==e.orientation.toLowerCase()){l=-90;if(ej.util.isNullOrUndefined(n)&&(ej.util.isNullOrUndefined(a)||ej.util.isNullOrUndefined(u)))g=!1;else if(n=p?ej.util.isNullOrUndefined(t.offset)?e.visibleRange.min:e.visibleRange.min+t.offset:"date"==jQuery.type(n)?n.getTime():n,ej.util.isNullOrUndefined(a)||"date"!=jQuery.type(a)||(a=a.getTime()),d&&!ej.util.isNullOrUndefined(h)&&u)for(var _=ej.util.isNullOrUndefined(c)?a||e.visibleRange.max:"datetime"==e._valueType?c.getTime():c;n<_;)a="datetime"===e._valueType?this._getDatetimeValue(a,n,u,e,u?null:a,t,r):n+u,o=this._getHorizontalValue(n,a,e,u,t),g&&this._drawAxisStriplines(o.x,o.y,o.height,o.width,o.textX,o.textY,l,i,f,s,m,t,e),f++,n="datetime"===e._valueType?this._getDatetimeValue(a,n,h,e,null,t,r):n+h;else o=this._getHorizontalValue(n,a,e,u,t),g&&this._drawAxisStriplines(o.x,o.y,o.height,o.width,o.textX,o.textY,l,i,f,s,m,t,e)}else if(ej.util.isNullOrUndefined(n)&&(ej.util.isNullOrUndefined(a)||ej.util.isNullOrUndefined(u)))g=!1;else if(n=p?ej.util.isNullOrUndefined(t.offset)?e.visibleRange.min:e.visibleRange.min+t.offset:"date"==jQuery.type(n)?n.getTime():n,ej.util.isNullOrUndefined(a)||"date"!=jQuery.type(a)||(a=a.getTime()),d&&!ej.util.isNullOrUndefined(h)&&u)for(_=ej.util.isNullOrUndefined(c)?a||e.visibleRange.max:c;n<_;)a=n+u,o=this._getVerticalValue(n,a,e,u,t),g&&this._drawAxisStriplines(o.x,o.y,o.height,o.width,o.textX,o.textY,l,i,f,s,m,t,e),f++,n+=h;else o=this._getVerticalValue(n,a,e,u,t),g&&this._drawAxisStriplines(o.x,o.y,o.height,o.width,o.textX,o.textY,l,i,f,s,m,t,e)}},_getHorizontalValue:function(e,t,i,s,n,a){a=(a?(e-i.visibleRange.min)/i.visibleRange.delta:ej.EjSvgRender.utils._getPointXY(e,i.visibleRange,i.isInversed))*i.width+i.x,t=ej.EjSvgRender.utils._getPointXY(t,i.visibleRange,i.isInversed)*i.width+i.x,e=ej.EjSvgRender.utils._getPointXY(e,i.visibleRange,i.isInversed)*i.width+i.x;e+=ej.util.isNullOrUndefined(s)?0:s;e=(i.isInversed?t<e:e<t)?Math.abs(a-t):Math.abs(a-e);return this._calculateHorizontalStripline(e,a,i,n)},_getVerticalValue:function(e,t,i,s,n,a){a=i.y+i.height-(a?(e-i.visibleRange.min)/i.visibleRange.delta:ej.EjSvgRender.utils._getPointXY(e,i.visibleRange,i.isInversed))*i.height,t=i.y+i.height-ej.EjSvgRender.utils._getPointXY(ej.util.isNullOrUndefined(t)?0:t,i.visibleRange,i.isInversed)*i.height,s=i.y+i.height-ej.EjSvgRender.utils._getPointXY(e+(ej.util.isNullOrUndefined(s)?0:s),i.visibleRange,i.isInversed)*i.height,s=(i.isInversed?s<t:t<s)?Math.abs(a-t):Math.abs(a-s);return this._calculateVerticalStripline(s,a,i,n)},_calculateHorizontalStripline:function(e,t,i,s){var n=e,a=this.chart.model.m_AreaBounds.Height,i=i.isInversed?t-e:t,e=this.chart.model.m_AreaBounds.Y,t=ej.EjSvgRender.utils._measureText(s.text,null,s.font).height;return"middletop"==s.textAlignment?(textX=i+t,textY=Math.abs(e+a/2)):"middlecenter"==s.textAlignment?(textX=Math.floor(i+n/2)+t/3,textY=Math.abs(e+a/2)):"middlebottom"==s.textAlignment&&(textX=i+n-t,textY=Math.abs(e+a/2)),{x:i,y:e,height:a,width:n,textX:textX,textY:textY}},_calculateVerticalStripline:function(e,t,i,s){var n,a,r=e,o=this.chart.model.m_AreaBounds.X,l=this.chart.model.m_AreaBounds.Width,i=t+(i.isInversed?0:-e),e=ej.EjSvgRender.utils._measureText(s.text,l,s.font).height;return"middletop"==s.textAlignment?(n=o+l/2,a=i+e):"middlecenter"==s.textAlignment?(n=o+l/2,a=Math.abs(i+r/2)+e/3):"middlebottom"==s.textAlignment&&(n=o+l/2,a=i+r-e),{x:o,y:i,height:r,width:l,textX:n,textY:a}},_getDatetimeValue:function(e,t,i,s,n,a,r){var o=a.sizeType.toLowerCase(),n=null===n;if("datetime"!==r)return"pixel"===a.sizeType?t:n?t+i:e;a=new Date(t);switch("auto"===o&&(o=s._intervalType.toLowerCase()),o){case"years":return n?new Date(a.setFullYear(a.getFullYear()+i)):e;case"months":return n?new Date(a.setMonth(a.getMonth()+i)):e;case"days":return n?new Date(a.setDate(a.getDate()+i)):e;case"hours":return n?new Date(a.setHours(a.getHours()+i)):e;case"minutes":return n?new Date(a.setMinutes(a.getMinutes()+i)):e;case"seconds":return n?new Date(a.setSeconds(a.getSeconds()+i)):e;default:return t}},_drawAxisStriplines:function(e,t,i,s,n,a,r,o,l,d,h,c,u){var p;ej.util.isNullOrUndefined(c.imageUrl)?(p={id:h.id+"_striplineRect_"+o+"_"+d+"_"+l,x:e,y:t,width:s,height:i,fill:c.color,opacity:c.opacity,"stroke-width":c.borderWidth,stroke:0==c.borderWidth?"transparent":c.borderColor},n={id:h.id+"_striplineRectText_"+o+"_"+d+"_"+l,x:n,y:a,fill:c.font.color,transform:"rotate("+r+","+n+","+a+")",labelRotation:r,"font-size":c.font.size,"font-family":c.font.fontFamily,"font-style":c.font.fontStyle,"font-weight":c.font.fontWeight,opacity:c.font.opacity,"text-anchor":"middle"},a={X:e,Y:t,Width:s,Height:i},r="over"==c.zIndex,ej.EjSvgRender.utils.AddRegion(this.chart,a,r),this.chart.model.enableCanvasRendering?(r=this.chart.svgObject.getContext("2d"),u="horizontal"==u.orientation.toLowerCase()?{X:u.x,Y:t,Width:u.width,Height:this.chart.model.m_AreaBounds.Height}:{X:e,Y:u.y,Width:this.chart.model.m_AreaBounds.Width,Height:u.height},r.save(),r.beginPath(),r.rect(u.X,u.Y,u.Width,u.Height),r.clip(),this.svgRenderer.drawRect(p,h),this.svgRenderer.drawText(n,c.text,h),r.closePath(),r.restore()):(this.svgRenderer.drawRect(p,h),this.svgRenderer.drawText(n,c.text,h))):(t={height:i,width:s,href:c.imageUrl,x:e,y:t,id:h.id+"_backImage",visibility:"visible",preserveAspectRatio:"none"},this.svgRenderer.drawImage(t,h))}}}(jQuery),ej.EjLegendRender=function(e){this.chartObj=e},function(ee){ej.EjLegendRender.prototype={sumofArray:function(e){for(var t=0,i=e.length,s=0;s<i;s++)t+=e[s];return t},legendRectSpace:function(e,t){var i=e.Width-10,s=e.Height-10,e=!1;return Math.ceil(t.Width)>=i&&Math.ceil(t.Height)>=s&&(e=!0),e},drawLegendTitle:function(){var e=this.chartObj,t=e.model,i=t.legend,s=i.isReversed,n=t.LegendBounds,a=t.elementSpacing,r=i.title,o=ej.EjSvgRender.utils._measureText,l=r.font,d=n.Width,t=o(r.text,null,l),i=t.width,n=t.height,o=r.textAlignment.toLowerCase(),t=0,n=a+n/2;switch(o){case"far":t=s?t:d-i-t;break;case"center":t=d/2-i/2}t<0&&(t=0,d=i),d<i+t&&(d=i+t);l={id:e.svgObject.id+"_LegendTitleText",x:s&&"near"==o?d-i-t:t,y:n,fill:l.color,"font-size":l.size,"font-style":l.fontStyle,"font-family":l.fontFamily,"font-weight":l.fontWeight,"text-anchor":"start",direction:"ltr",lgndCtx:!0};e.svgRenderer.drawText(l,r.text,this.chartObj.gLegendEle)},drawLegendItem:function(e,t,i){var s,n,a,r,o,l,d,h,c=this.chartObj,u=c.model,p=u.legend,m=p.isReversed,g=p.textOverflow.toLowerCase(),f=p.textWidth,_=u.LegendBounds,v=u.elementSpacing,b=p.border.width,x=ej.EjSvgRender.utils._measureText,y=ej.EjSvgRender,w=c.svgRenderer,C=e.Font,S=u.symbolShape,T=u.enableCanvasRendering,R=p.itemStyle,k=e.PointIndex,O=e.SeriesIndex,D=u.series[O],I=c.svgObject,j=e.LegendStyle,L=(jQuery.uaMatch(navigator.userAgent),navigator.userAgent.match(/Trident\/7\./),D.type.toLowerCase()),A=D.drawType,E=x(e.Text,_.Width,C).height;if("object"==typeof e.Text&&m){for(var P,M,F,N=0,z=0;z<e.Text.length;z++)P=e.Text[z],N<(M=ej.EjSvgRender.utils._measureText(P,_.Width,C).width)&&(N=M,F=P);h=x(F,null,C).width}else h=x(e.Text,null,C).width;for(a in x={startX:m?h+t+v:t+R.width/2,startY:i+(E>R.height?E:R.height)/2},S)if(e.Shape.toLowerCase()==a.toLowerCase()){r="seriestype"==a.toLowerCase()?"SeriesType":a;break}if("SeriesType"==r&&("radar"!=L&&"polar"!=L||(r="rangecolumn"==(o="scatter"==A.toLowerCase()?D.marker.shape:o=A).toLowerCase()?"RangeColumn":o.capitalizeFirstString()),"scatter"==L&&(r=(o=D.marker.shape).capitalizeFirstString()),e.drawType&&(r="SeriesType"),!c.vmlRendering||"pie"!=L&&"doughnut"!=L&&"pieofpie"!=L||(r="Circle")),"None"==r&&(r="pie"==L||"doughnut"==L||"pieofpie"==L?"Circle":"Rectangle"),s=ej.util.isNullOrUndefined(k)?O:k,c.gLegendItemEle=w.createGroup({id:I.id+"_Legend"+s,cursor:"pointer"}),e.CommonEventArgs.data.gLegendItemEle=c.gLegendItemEle,(k=ee.extend(!0,{},e.CommonEventArgs.data)).model=c.model,I=k.style,!e.CommonEventArgs.cancel){k=y.chartSymbol["_draw"+r](x,I,k,c.gLegendItemEle),j=j.Color&&"gray"!==j.Color.toString().toLowerCase()&&T||j.Color&&"gray"!==j.Color.toLowerCase()?C.color:"gray",d=(n=e).Text.length,"seriestype"!=p.shape&&"seriesType"!=p.shape||(t=m?t-v/2:t+v/2);var V={id:this.chartObj.svgObject.id+"_LegendItemText"+s,x:m?t:R.width+t+v/2,y:x.startY,fill:j,"font-size":C.size,"font-style":C.fontStyle,"font-family":C.fontFamily,"font-weight":C.fontWeight,"text-anchor":"start",direction:"ltr"};if(T&&(V.lgndCtx=!0),V.y=x.startY+E/4,"wrap"==g||"wrapandtrim"==g){V.y=V.y-E;for(var B=0;B<d;B++)V.y=V.y+E,w.drawText(V,n.Text[B],c.gLegendItemEle),"wrapandtrim"==g&&(l={bounds:{x:V.x+_.X,y:V.y+_.Y,height:E*d,width:f},trimText:n.Text,labelText:n.displayText},u.legendTextRegion.push(l))}else"trim"==g&&(l={bounds:{x:V.x+_.X,y:V.y+_.Y,height:E+v,width:f},trimText:n.Text,labelText:n.displayText},u.legendTextRegion.push(l)),w.drawText(V,n.Text,c.gLegendItemEle);w.append(c.gLegendItemEle,c.gLegendEle);i={LegendBound:{X:_.X+b,Y:_.Y+b},ItemBound:{X:t=k?m?x.startX-h-v:k:t,Y:i,_Width:e.Bounds._Width,Width:e.Bounds.Width,Height:e.Bounds.Height}};x.startX=m?Math.abs(x.startX-h-v/2):x.startX;i={LegendItem:e,Location:x,SymbolShape:r,Style:e.CommonEventArgs.data.style,Bounds:i};u.legendRegion.push(i)}},drawLegend:function(e){var t,i,s,n,a,r=this.chartObj,o=r.model,l=o.legend,d=l.isReversed,h=o.LegendViewerBounds,c=o.LegendBounds,u=o.LegendActualBounds,p=o.AreaType,m=l.position.toLowerCase(),g=l.alignment.toLowerCase(),f=o.elementSpacing,_=o.svgWidth,v=o.svgHeight,b=(W=o.title).font.size,x=W.subTitle,y=W.subTitle.font.size,w=l.title,C=l.border.width,S=ej.EjSvgRender.utils._measureText,T=o.margin,R=o.border.width,k=o.legendCollection,O=k.length,D=_-2*R,I=v-2*R,j=0<l.itemPadding?l.itemPadding:0,L=10,A=10,E=""!=x.text&&x.visible&&W.visible?S(x.text,D-T.left-T.right,x.font).height+f:0,P=o._titleLocation?o._titleLocation.Y:0+E,M=S(w.text,null,w.font),F=M.height,N=M.width,z=o._rowDefinitions,V=0,B=o._columnDefinitions,H=this.sumofArray(z.farSizes),Y=this.sumofArray(z.nearSizes),_=(this.sumofArray(B.farSizes),this.sumofArray(B.nearSizes)),v=!1,U=o.m_AreaBounds,T=l.enableScrollbar,E=ee(r.legendContainer),S=0<ee("#ScrollerParent_vertical_"+r._id).length?18:0,M=0<ee("#ScrollerParent_horizontal_"+r._id).length?18:0,z=ee(r.legendSvgContainer),B=10,W=o.title,x=o.title.subTitle,b=W.visible?1.2*parseInt(b):0,y=x.visible?1.2*parseInt(y):0,b=o.titleWrapTextCollection&&1<o.titleWrapTextCollection.length?o._titleLocation._height*o.titleWrapTextCollection.length-1:b,y=o.subTitleWrapTextCollection&&1<o.subTitleWrapTextCollection.length?o._subTitleLocation.size.height:y;if(o.legend.border&&!x.text&&(y=0,B=5),"right"==m||"left"==m?L=10:A=!T||200<I?10:100<I?5:0,h.Height+=F,c.Height+=F,l.visible){if("custom"!=m){if("cartesianaxes"==p)switch(m){case"bottom":c.Y=U.Y+U.Height+_-f/2+M;break;case"top":c.Y=0==P?R+f:b+10+y+B+f;break;case"right":c.X=U.X+U.Width+H+2*f;break;case"left":c.X=U.X-Y-u.Width-f/2-2*C-S}else switch(m){case"bottom":c.Y=I-(u.Height+C)-2*f;break;case"top":c.Y=0==P?R+f:b+10+y+B+f;break;case"right":c.X=D-u.Width-2*f;break;case"left":c.X=R+2*f}if(!o.enable3D&&"cartesianaxes"==p&&null!=e._crossAxisOverlap)for(var X=0,G=o._axes.length;X<G;X++){var $=o._axes[X],q=e.axes[$.name]._bounds,Q="horizontal"===$.orientation.toLowerCase();"top"==m&&Q&&$._opposed&&$.y-q<c.Y+c.Height?c.Y-=c.Y+c.Height-$.y+q:"bottom"==m&&Q&&!$._opposed&&$.y+q>c.Y?c.Y+=$.y+q-c.Y:"left"==m&&!Q&&$._opposed&&$.x-q<c.X+c.Width?c.X+=$.x+q-c.X:"right"==m&&!Q&&!$._opposed&&$.x+q>c.X&&(c.X-=c.X+c.Width-$.x+q)}if("left"==m||"right"==m)if(T)switch(g){case"center":c.Y=U.Height/2-u.Height/2+U.Y-C;break;case"near":c.Y=U.Y;break;case"far":c.Y=U.Y+U.Height-u.Height-2*C}else switch(g){case"center":c.Y=I/2-(u.Height+2*C)/2+f/2;break;case"near":c.Y=R+2*f;break;case"far":c.Y=I-(u.Height+C)-2*f}else switch(g){case"center":c.X=D/2-(u.Width+2*C)/2+f/2;break;case"near":c.X=d?D-(u.Width+C)-2*f:R+2*f;break;case"far":c.X=d?R+2*f:D-(u.Width+C)-2*f}}else c.Y=l.location.y<I?l.location.y:0,c.X=l.location.x<D?l.location.x:0;if(T)if("right"==m||"left"==m){if(c.Y<U.Y||u.Height+2*C>=U.Height)for(var K=2*C,Z=0;Z<O;Z++)if((K+=k[Z].Bounds.Height+j)>U.Height){u.Height=U.Height-2*C,c.Y=U.Y;break}}else if(2*C+u.Width>=D)for(var J=2*C,Z=0;Z<O;Z++)if(D<(J+=k[Z].Bounds.Width+j)){u.Width=D-2*C-u.vScrollSize-2*R,c.X=D/2-(u.Width+2*C)/2+f/2;break}r.legendSvgContainer.setAttribute("height",c.Height),r.legendSvgContainer.setAttribute("width",Math.max(N,c.Width)),s=t=L,n=i=A,""!=w.text&&w.text&&(this.drawLegendTitle(),n=i=A+F);for(Z=0;Z<O;Z++)!(l.rowCount<l.columnCount||l.rowCount==l.columnCount)||"top"!=m&&"bottom"!=m&&"custom"!=m?(n+k[Z].Bounds.Height+j+F+R>c.Height+i&&(n=i,s+=V+j),this.drawLegendItem(k[Z],s,n),n+=k[Z].Bounds.Height+j,V=Math.max(V,k[Z].Bounds.Width)):(s+k[Z].Bounds.Width>c.Width+t&&(s=L,n+=k[Z].Bounds.Height+j),this.drawLegendItem(k[Z],s,n),s+=k[Z].Bounds.Width+j);N=r.legendContainer[0].offsetLeft,w=ee(r.element).offset(),w=r.vmlRendering?N<=0?c.X:N-w.left:ee(r.svgObject).offset().left-w.left,w=r.vmlRendering?w:c.X+(w<=0?0:w);E.attr("style",""),E.show(),l._ejScroller||(d?E.css({direction:"rtl"}):E.css({direction:"ltr"})),E.css({position:"absolute",background:l.background,left:w,top:c.Y,width:u.Width,height:u.Height,"border-width":l.border.width,"border-color":l.border.color,"border-style":"solid"}),E.addClass("e-legendborder"),z.css({height:c.Height,width:c.Width}),c.Height=c.Height-(20-2*A);var A=this.legendRectSpace(c,u);T&&(l._ejScroller?!A&&(c.Width>Math.ceil(u.Width)||c.Height>Math.ceil(u.Height))?(ee("#"+E[0].id).ejScroller({scrollTop:r.scrolltop,scrollLeft:r.scrollleft,height:u.Height,width:u.Width}),v=!0,c.Height>Math.ceil(u.Height)&&0==u.vScrollSize&&(a=E[0].offsetWidth+5*C-E[0].clientWidth,E.css({width:u.Width+a}))):(ee("#"+E[0].id).ejScroller("instance").destroy(),l._ejScroller=!1):!A&&c.Width>Math.ceil(u.Width)&&c.Height>Math.ceil(u.Height)?(E.css({overflow:"scroll"}),v=!0):(!A&&c.Height>Math.ceil(u.Height)&&0<=u.vScrollSize&&(E[0].style.overflowY="scroll",E[0].style.overflowX="hidden",0==u.vScrollSize&&(a=E[0].offsetWidth-2*C-E[0].clientWidth,E.css({width:u.Width+a})),v=!0),!A&&c.Width>Math.ceil(u.Width)&&0<=u.hScrollSize&&(E[0].style.overflowX="scroll",E[0].style.overflowY="hidden",0==u.hScrollSize&&(A=E[0].offsetHeight-2*C-E[0].clientHeight,E.css({height:u.Height+A})),v=!0))),r.svgRenderer.append(r.gLegendEle,r.legendSvgContainer),v||E.css({width:u.Width-u.vScrollSize,height:u.Height-u.hScrollSize}),l._ejScroller||(null!=r.scrolltop&&E.scrollTop(r.scrolltop),null!=r.scrollleft&&E.scrollLeft(r.scrollleft))}else E.hide()}}}(jQuery),ej.seriesTypes={},ej.EjSeriesRender=function(){},ej.indicatorTypes={},ej.EjIndicatorRender=function(){},ej.trendlineTypes={},ej.EjTrendLineRenderer=function(){},function(xe){function e(e,t){function i(){}return i.prototype=new e,xe.extend(i.prototype,t),i}ej.EjTrendLineRenderer.prototype={draw:function(e,t,i){this.chartObj=i;var s=xe.inArray(e,t.trendlines);e._isTransposed=i.model.requireInvertedAxes,e.xAxis=t.xAxis,e.yAxis=t.yAxis;i=e.type.toLowerCase();return 1<e.points.length&&("linear"==i||"movingaverage"==i?this.calculateLineDirection(e,t,s):this.calculateSplineDirection(e,t,s)),!1},calculateSplineDirection:function(e,t,i){for(var s,n=ej.EjSvgRender.utils._getStringBuilder(),a=!0,r=e.points,o=ej.EjSeriesRender.prototype.naturalSpline(r,t),l=null,d=-1,h=r.length,c=0;c<h;c++){var u,p,m,g,f=c,_=r[c];null!=l&&(g=m=null,m=(p=ej.EjSeriesRender.prototype.getBezierControlPoints(l,_,o[d],o[f],0,t,this)).controlPoint1,g=p.controlPoint2,u=ej.EjSvgRender.utils._getPoint(l,e),p=ej.EjSvgRender.utils._getPoint(_,e),m=ej.EjSvgRender.utils._getPoint(m,e),g=ej.EjSvgRender.utils._getPoint(g,e),this.chartObj,a?(n.append("M "+u.X+" "+u.Y+" C "+m.X+" "+m.Y+" "+g.X+" "+g.Y+" "+p.X+" "+p.Y+" "),a=!1):n.append("C "+m.X+" "+m.Y+" "+g.X+" "+g.Y+" "+p.X+" "+p.Y+" ")),l=_,d=f}return s=n.toString(),this._drawLinePath(e,t,s,i),!1},calculateLineDirection:function(e,t,i){for(var s,n,a=ej.EjSvgRender.utils._getStringBuilder(),r=!1,o=e.points.length,l=0;l<o;l++)n=e.points[l],n=ej.EjSvgRender.utils._getPoint(n,e),r?a.append("L "+n.X+" "+n.Y+" "):(a.append("M "+n.X+" "+n.Y+" "),a.append("L "+n.X+" "+n.Y+" "),r=!0);return s=a.toString(),this._drawLinePath(e,t,s,i),!1},_drawLinePath:function(e,t,i,s){var n=[];return n[0]=e.xAxis.x,n[1]=e.yAxis.y,""!=i&&(i={id:this.chartObj.svgObject.id+"_"+e.seriesIndex+"_"+s+"_"+e.name.replace(/[^a-zA-Z ]/g,""),fill:"none","stroke-dasharray":e.dashArray,"stroke-width":e.width,stroke:e.fill,opacity:e.opacity,d:i},e.id=i.id,this.chartObj.svgRenderer.drawPath(i,t.gTrendGroupEle,n)),this.chartObj.svgRenderer.append(t.gTrendGroupEle,this.chartObj.gTrendlinesGroupEle[e.seriesIndex]),!1},calculateTrendLineSegment:function(e,t,i,s){var n=s.model,a=xe.extend([],e.points),s=t.type.toLowerCase();switch(t.xAxis=e.xAxis||n.primaryXAxis,t.yAxis=e.yAxis||n.primaryYAxis,t.backwardForecast=t.backwardForecast<0?0:t.backwardForecast,t.forwardForecast=t.forwardForecast<0?0:t.forwardForecast,a=a.sort(function(e,t){return e.xValue>t.xValue?1:t.xValue>e.xValue?-1:0}),s){case"linear":this.updateTrendSource(a,t),this.calculateLinearTrendline(e,t,i);break;case"exponential":this.updateExponentialTrendSource(a,t),this.calculateExponentialTrendline(e,t,i);break;case"logarithmic":this.updateLogarithmicTrendSource(a,t),this.calculateLogarithmicTrendline(e,t,i);break;case"power":this.updatePowerTrendSource(a,t),this.calculatePowerTrendline(e,t,i);break;case"polynomial":s=e.points.length;t.polynomialOrder=s<=t.polynomialOrder?s:t.polynomialOrder,t.polynomialOrder=t.polynomialOrder<2?2:t.polynomialOrder,t.polynomialOrder=6<t.polynomialOrder?6:t.polynomialOrder,1<s&&(this.updateTrendSource(a,t),this.calculatePolynomialTrendline(e,t,i));break;case"movingaverage":this.updateMovingAverageTrendSource(a,t),this.calculateMovingAverageTrendline(e,t,i)}return 1<e.points.length&&t.points&&this.calculateTrendLineRange(t,i),!1},updateTrendSource:function(e,t){var i,s,n=e.length;t.xPoints=[],t.xValues=[],t.yValues=[];for(var a=0;a<n;a++)(i=e[a]).isEmpty||ej.isNullOrUndefined(i.y)||(t.xPoints.push(i.xValue),s="number"==typeof i.xValue?i.xValue:Date.parse(i.xValue),t.xValues.push(s),t.yValues.push(i.y));return this.calculateSumXAndYValue(t),!1},calculateLinearTrendline:function(e,t,i){var s,n,a=t.xValues.length;return t.points=[],1<a&&(n="datetime"==i._valueType.toLowerCase()?(s=this._increaseDateTimeInterval(t.xPoints[0],-t.backwardForecast,i._intervalType),this._increaseDateTimeInterval(t.xPoints[a-1],t.forwardForecast,i._intervalType)):(s=t.xPoints[0]-t.backwardForecast,t.xPoints[a-1]+t.forwardForecast),i=t.slope*s+t._intercept,a=t.slope*n+t._intercept,t.points.push({x:s,xValue:s,y:i,YValues:[],visible:!0}),t.points.push({x:n,xValue:n,y:a,YValues:[],visible:!0}),t.points[0].YValues[0]=t.points[0].y,t.points[1].YValues[0]=t.points[1].y),!1},calculateTrendLineRange:function(e,t){var i,s=e.points.length;e.minY=e.points[0].y,e.maxY=e.points[s-1].y,t.setRange||(0<e.backwardForecast&&"category"!=t._valueType&&1<s&&(t.range.min=t.range.min>e.points[0].x?e.points[0].x:t.range.min,t.visibleRange.min=t.range.min),0<e.forwardForecast&&1<s&&(t.range.max=t.range.max<e.points[s-1].x?e.points[s-1].x:t.range.max,t.visibleRange.max=t.range.max));for(var n=0;n<s;n++)i=e.points[n].y,e.minY=Math.min(e.minY,i),e.maxY=Math.max(e.maxY,i);return!1},calculateSumXAndYValue:function(e){e.points;for(var t,i,s=e.xPoints.length,n=e.type.toLowerCase(),a=0,r=0,o=0,l=0,d=0,h=e.xValues,c=e.yValues,u=0;u<s;u++)a+=h[u],r+=c[u],d+=h[u]*c[u],l+=h[u]*c[u],o+=h[u]*h[u],c[u],c[u];if(ej.util.isNullOrUndefined(e.intercept)||"linear"!=n&&"exponential"!=n&&"polynomial"!=n)t=(s*l-a*r)/(s*o-a*a),i="exponential"==n||"power"==n?Math.exp((r-t*a)/s):(r-t*a)/s,e._intercept=i;else{switch(n){case"polynomial":t=(d-Math.log(e.intercept)*a)/o*3;break;case"linear":t=(d-e.intercept*a)/o;break;case"exponential":t=(d-Math.log(e.intercept)*a)/o}e._intercept=e.intercept}return e.slope=t,!1},_increaseDateTimeInterval:function(e,t,i){var s=new Date(e);return e="object"==typeof e?e:s,"days"==i.toLowerCase()?s.setDate(e.getDate()+t):"hours"==i.toLowerCase()?s.setHours(e.getHours()+t):"milliseconds"==i.toLowerCase()?s.setMilliseconds(e.getMilliseconds()+t):"seconds"==i.toLowerCase()?s.setSeconds(e.getSeconds()+t):"minutes"==i.toLowerCase()?s.setMinutes(e.getMinutes()+t):"months"==i.toLowerCase()?s.setMonth(e.getMonth()+t):"years"==i.toLowerCase()&&s.setYear(e.getFullYear()+t),s}},ej.ejLinear=e(ej.EjTrendLineRenderer),ej.trendlineTypes.linear=ej.ejLinear,ej.Exponential=e(ej.EjTrendLineRenderer,{updateExponentialTrendSource:function(e,t){var i,s,n=e.length;t.xPoints=[],t.xValues=[],t.yValues=[];for(var a=0;a<n;a++)(i=e[a]).isEmpty||ej.isNullOrUndefined(i.y)||(t.xPoints.push(i.xValue),s="number"==typeof i.xValue?i.xValue:Date.parse(i.xValue),t.xValues.push(s),t.yValues.push(Math.log(i.y)));return this.calculateSumXAndYValue(t),!1},calculateExponentialTrendline:function(e,t,i){var s,n,a,r,o,l,d=t.xValues.length,h=Math.round(d/2);return t.points=[],1<d&&("datetime"==i._valueType.toLowerCase()?(r=(s=this._increaseDateTimeInterval(t.xPoints[0],-t.backwardForecast,i._intervalType)).getTime(),n=t.xPoints[h-1],o=new Date(n).getTime(),l=(a=this._increaseDateTimeInterval(t.xPoints[d-1],t.forwardForecast,i._intervalType)).getTime()):(s=r=t.xPoints[0]-t.backwardForecast,n=o=t.xPoints[h-1],a=l=t.xPoints[d-1]+t.forwardForecast),i=t._intercept*Math.exp(t.slope*s),h=t._intercept*Math.exp(t.slope*n),d=t._intercept*Math.exp(t.slope*a),t.points.push({x:s,xValue:r,y:i,YValues:[],visible:!0}),t.points.push({x:n,xValue:o,y:h,YValues:[],visible:!0}),t.points.push({x:a,xValue:l,y:d,YValues:[],visible:!0}),t.points[0].YValues[0]=t.points[0].y,t.points[1].YValues[0]=t.points[1].y,t.points[2].YValues[0]=t.points[2].y),!1}}),ej.trendlineTypes.exponential=ej.Exponential,ej.Logarithmic=e(ej.EjTrendLineRenderer,{updateLogarithmicTrendSource:function(e,t){var i=e.length;t.xPoints=[],t.xValues=[],t.yValues=[];for(var s,n,a=0;a<i;a++)(n=e[a]).isEmpty||ej.isNullOrUndefined(n.y)||(t.xPoints.push(n.xValue),s="number"==typeof n.xValue?n.xValue:Date.parse(n.xValue),s=isFinite(Math.log(s))?Math.log(s):s,t.xValues.push(s),t.yValues.push(n.y));return this.calculateSumXAndYValue(t),!1},calculateLogarithmicTrendline:function(e,t,i){var s,n,a,r,o,l,d=t.xValues.length,h=Math.round(d/2);return t.points=[],1<d&&("datetime"==i._valueType.toLowerCase()?(r=(s=this._increaseDateTimeInterval(t.xPoints[0],-t.backwardForecast,i._intervalType)).getTime(),n=t.xPoints[h-1],o=new Date(n).getTime(),l=(a=this._increaseDateTimeInterval(t.xPoints[d-1],t.forwardForecast,i._intervalType)).getTime()):(s=r=t.xPoints[0]-t.backwardForecast,n=o=t.xPoints[h-1],a=l=t.xPoints[d-1]+t.forwardForecast),i=t._intercept+t.slope*(isFinite(Math.log(s))?Math.log(s):s),h=t._intercept+t.slope*(isFinite(Math.log(n))?Math.log(n):n),d=t._intercept+t.slope*(isFinite(Math.log(a))?Math.log(a):a),t.points.push({x:s,xValue:r,y:i,YValues:[],visible:!0}),t.points.push({x:n,xValue:o,y:h,YValues:[],visible:!0}),t.points.push({x:a,xValue:l,y:d,YValues:[],visible:!0}),t.points[0].YValues[0]=t.points[0].y,t.points[1].YValues[0]=t.points[1].y,t.points[2].YValues[0]=t.points[2].y),!1}}),ej.trendlineTypes.logarithmic=ej.Logarithmic,ej.Power=e(ej.EjTrendLineRenderer,{updatePowerTrendSource:function(e,t){var i,s,n=e.length;t.xPoints=[],t.xValues=[],t.yValues=[];for(var a=0;a<n;a++)(i=e[a]).isEmpty||(t.xPoints.push(i.xValue),s="number"==typeof i.xValue?i.xValue:Date.parse(i.xValue),t.xValues.push(Math.log(s)),t.yValues.push(Math.log(i.y)));return this.calculateSumXAndYValue(t),!1},calculatePowerTrendline:function(e,t,i){var s,n,a,r,o,l,d,h=t.xValues.length,c=Math.round(h/2);return t.points=[],1<h&&("datetime"==i._valueType.toLowerCase()?(s=(r=this._increaseDateTimeInterval(t.xPoints[0],-t.backwardForecast,i._intervalType)).getTime(),o=t.xPoints[c-1],n=new Date(o).getTime(),a=(l=this._increaseDateTimeInterval(t.xPoints[h-1],t.forwardForecast,i._intervalType)).getTime()):(r=s=-1<(d=t.xPoints[0]-t.backwardForecast)?d:0,o=n=t.xPoints[c-1],l=a=t.xPoints[h-1]+t.forwardForecast),d=t._intercept*Math.pow(r,t.slope),c=t._intercept*Math.pow(o,t.slope),h=t._intercept*Math.pow(l,t.slope),t.points.push({x:r,xValue:s,y:d,YValues:[],visible:!0}),t.points.push({x:o,xValue:n,y:c,YValues:[],visible:!0}),t.points.push({x:l,xValue:a,y:h,YValues:[],visible:!0}),t.points[0].YValues[0]=t.points[0].y,t.points[1].YValues[0]=t.points[1].y,t.points[2].YValues[0]=t.points[2].y),!1}}),ej.trendlineTypes.power=ej.Power,ej.Polynomial=e(ej.EjTrendLineRenderer,{calculatePolynomialTrendline:function(e,t,i){var s=t.polynomialOrder;t.polynomialSlopes=new Array(s+1);for(var n=t.xValues.length,a=0;a<n;a++)for(var r=t.xValues[a],o=t.yValues[a],l=0;l<=s;++l)t.polynomialSlopes[l]||(t.polynomialSlopes[l]=0),t.polynomialSlopes[l]+=Math.pow(r,l)*o;for(var d=new Array(1+2*s),h=new Array(s+1),c=0;c<s+1;c++)h[c]=new Array(3);for(a=0;a<n;++a)for(var r=1,u=t.xValues[a],l=0;l<d.length;++l)d[l]||(d[l]=0),d[l]+=r,r*=u,0;for(a=0;a<=s;++a)for(l=0;l<=s;++l)h[a][l]=d[a+l];return this.gaussJordanEliminiation(h,t.polynomialSlopes)||(t.polynomialSlopes=null),this.createPolynomialSegments(e,i,t),!1},createPolynomialSegments:function(e,t,i){var s=i.polynomialSlopes;if(null!=s){var n,a=i.xValues.length,r=(Math.round(a/2),1),o=s.length,l=t._valueType.toLowerCase();i.points=[];for(var d,h,c=1;c<=o;c++)h=(1==c?"datetime"==l?n=(d=this._increaseDateTimeInterval(i.xPoints[0],-i.backwardForecast,t._intervalType)).getTime():d=n=i.xPoints[0]-i.backwardForecast:c==s.length?"datetime"==l?n=(d=this._increaseDateTimeInterval(i.xPoints[a-1],i.forwardForecast,t._intervalType)).getTime():d=n=i.xPoints[a-1]+i.forwardForecast:(r+=(a+i.forwardForecast)/s.length,"category"==l?d=n=i.xPoints[0]+(r-1):(d=n=i.xPoints[parseInt(r)-1],"datetime"==l&&r<a&&(n=new Date(d).getTime()))),this.getPolynomialYValue(s,n)),(1==c||c==s.length||"category"==l||r<a)&&(i.points.push({x:d,xValue:n,y:h,YValues:[],visible:!0}),i.points[i.points.length-1].YValues[0]=i.points[i.points.length-1].y)}return!1},getPolynomialYValue:function(e,t){for(var i=0,s=0;s<e.length;s++)i+=e[s]*Math.pow(t,s);return i},gaussJordanEliminiation:function(e,t){for(var i=e.length,s=new Array(i),n=new Array(i),a=new Array(i),r=0;r<i;++r)a[r]=0;for(var o=0;o<i;++o){for(var l=0,d=0,h=0,c=0;c<i;++c)if(1!=a[c])for(var u=0;u<i;++u)0==a[u]&&Math.abs(e[c][u])>=l&&(l=Math.abs(e[c][u]),d=c,h=u);if(++a[h],d!=h){for(c=0;c<i;++c){var p=e[c];e[d][c]=e[h][c],e[h][c]=p}var m=t[d];t[d]=t[h],t[h]=m}if(n[o]=d,0==e[s[o]=h][h])return!1;var g=1/e[h][h];e[h][h]=1;for(c=0;c<i;++c)e[h][c]*=g;t[h]*=g;for(c=0;c<i;++c)if(c!=h){for(p=e[c][h],u=e[c][h]=0;u<i;++u)e[c][u]-=e[h][u]*p;t[c]-=t[h]*p}}for(o=i-1;0<=o;--o)if(n[o]!=s[o])for(d=0;d<i;++d){var f=e[n[o]];e[d][n[o]]=e[d][s[o]],e[d][s[o]]=f}return!0}}),ej.trendlineTypes.polynomial=ej.Polynomial,ej.MovingAverage=e(ej.EjTrendLineRenderer,{updateMovingAverageTrendSource:function(e,t){var i,s,n=e.length;for(t.xPoints=[],t.xValues=[],t.yValues=[],i=0;i<n;i++)t.xPoints.push(e[i].xValue),t.xValues.push(i+1),s=e[i].isEmpty?null:e[i].y,t.yValues.push(s);return!1},calculateMovingAverageTrendline:function(e,t,i){var s,n,a,r,o,l,d=t.xPoints.length,h=(h=t.period>=d?d-1:t.period)<2?2:h;for(t.points=[],s=0;s<d-1;s++){for(a=r=o=0,n=s;r<h;n++)r++,ej.util.isNullOrUndefined(t.yValues[n])&&o++,a+=t.yValues[n];a=h-o<=0?null:a/(h-o),ej.util.isNullOrUndefined(a)||isNaN(a)||(l=t.xPoints[h-1+s],t.points.push({x:l,xValue:l,y:a,YValues:[],visible:!0}),l=t.points.length,t.points[l-1].YValues[0]=t.points[l-1].y)}}}),ej.trendlineTypes.movingaverage=ej.MovingAverage,ej.EjIndicatorRender.prototype={draw:function(e,t){this.chartObj=t;t=null;"cartesianaxes"==this.chartObj.model.AreaType&&(t="translate("+e.xAxis.x+","+e.yAxis.y+")");var i=xe.inArray(e,this.chartObj.model.indicators),t={id:this.chartObj.svgObject.id+"_indicatorGroup_"+i,transform:t};if(this.gIndicatorGroupEle=this.chartObj.svgRenderer.createGroup(t),0<e._points.length)for(var s=0;s<e.segment.length;s++){var n=e.segment[s],a={fill:n.fill,width:n.width,opacity:e.opacity};n.isIndicator=!0,n.xAxis=e.xAxis,n.yAxis=e.yAxis,"line"==n.type?this.calculateDirection(n,a,i):this.drawColumn(n,a,e)}},_drawLinePath:function(e,t,i,s){""!=i&&(i={name:"line",id:this.chartObj.svgObject.id+"_"+s+"_"+e.name,fill:"none","stroke-dasharray":e.dashArray,"stroke-width":t.width,stroke:t.fill,"stroke-linecap":e.lineCap,"stroke-linejoin":e.lineJoin,opacity:t.opacity,d:i},this.chartObj.svgRenderer.drawPath(i,this.gIndicatorGroupEle)),this.chartObj.svgRenderer.append(this.gIndicatorGroupEle,this.chartObj.gIndicatorEle)},calculateDirection:function(e,t,i){var s=0,n=0;this.chartObj.model.enableCanvasRendering&&(s=e.xAxis.x,n=e.yAxis.y),e.points=ej.DataManager(e.points,ej.Query().sortBy("xValue")).executeLocal();for(var a,r,o=ej.EjSeriesRender.prototype._isVisiblePoints(e),l=ej.EjSvgRender.utils._getStringBuilder(),d=!1,h=0;h<o.length;h++)(r=o[h]).visible?(r=ej.EjSvgRender.utils._getPoint(r,e),d?l.append("L "+(r.X+s)+" "+(r.Y+n)+" "):(l.append("M "+(r.X+s)+" "+(r.Y+n)+" "),d=!0)):d=!1;a=l.toString(),this._drawLinePath(e,t,a,i)},drawColumn:function(e,t,i){var s=e,n=xe.inArray(i,this.chartObj.model.indicators);s.index=n;for(var a=Math.max(e.yAxis.visibleRange.min,0),r={Start:-.35,End:.35},o=ej.EjSeriesRender.prototype._isVisiblePoints(s),l=this.chartObj,d=0;d<o.length;d++){var h,c,u=d,p=o[d],m=p.YValues[0],g=a;p.visible&&(c=(h=ej.EjSeriesRender.prototype.calculateSides(p,r)).x1,h=h.x2,c=ej.EjSeriesRender.prototype.getRectangle(c,m,h,g,s,l),h=Math.min(0,c.Width),g=Math.min(0,c.Height),c.Width<1e-4&&(c.Width=1e-4),(0==h||0==g)&&0<c.Width&&(m={id:this.chartObj.svgObject.id+"_"+n+"_"+s.name,x:c.X+this.chartObj.canvasX,y:c.Y+this.chartObj.canvasY,width:c.Width,height:c.Height,fill:o[d].fill||t.fill,"stroke-width":s.border.width,plot:m<0?"negative":"positive",opacity:s.histogram.opacity,stroke:o[d].fill||s.border.color},this.chartObj.svgRenderer.drawRect(m,this.gIndicatorGroupEle),c={X:(m=ej.EjSvgRender.utils._getSvgXY(c.X,c.Y,s,this.chartObj)).X,Y:m.Y,Width:c.Width,Height:c.Height},this._addRegion(this.chartObj,c,s,p,u)))}this.chartObj.svgRenderer.append(this.gIndicatorGroupEle,this.chartObj.gIndicatorEle)},_addRegion:function(e,t,i,s,n){var a=i.type;0<=i.index&&(a={SeriesIndex:i.index,Region:{PointIndex:n,Bounds:t},type:a,isIndicator:!0},e.model.chartRegions.push(a))},calculateSegment:function(e,t){if(this.chartObj=t,e.segment=[],e.xRange={},e.yRange={},e.period=parseInt(e.period),e.period<e._points.length&&0<e.period){var i=xe.extend(!0,{},e);i.name="upperseries",i.fill=e.upperLine.fill,i.width=e.upperLine.width,i.type="line";for(var s=0;s<e._points.length;s++)e._points[s].YValues.length=1,e._points[s].YValues[0]=e._points[s].y=70;i.points=xe.extend(!0,[],e._points);var n=t._getXValues(i.points),a=t._getYValues(i.points);e.xRange.min=Math.min.apply(Math,n),e.xRange.max=Math.max.apply(Math,n),e.yRange.min=Math.min.apply(Math,a),e.yRange.max=Math.max.apply(Math,a),e.segment.push(i);i=xe.extend(!0,{},e);i.name="lowerSeries",i.width=e.lowerLine.width,i.fill=e.lowerLine.fill,i.type="line";for(var r=0;r<e._points.length;r++)e._points[r].YValues[0]=e._points[r].y=30;i.points=xe.extend(!0,[],e._points),a=t._getYValues(i.points),e.yRange.min=Math.min(Math.min.apply(Math,a),e.yRange.min),e.yRange.max=Math.max(Math.max.apply(Math,a),e.yRange.max),e.segment.push(i);var o=xe.extend(!0,{},e);o.name="signalSeries",o.width=e.width,o.fill=e.fill,o.type="line";for(var l=0,d=0,h=0,c=0,u=e.period,d=e._points[0].close,p=1;p<=u;++p)d<(l=e._points[p].close)?h+=l-d:l<d&&(c+=d-l),d=l,e._points[p-1].YValues[0]=e._points[p-1].y=null;h/=u,c/=u,e._points[u].YValues[0]=e._points[u].y=100-100/(1+h/c);for(var m=u+1;m<e._points.length;m++)d<(l=e._points[m].close)?(h=(h*(u-1)+(l-d))/u,c=c*(u-1)/u):l<d&&(c=(c*(u-1)+(d-l))/u,h=h*(u-1)/u),d=l,e._points[m].YValues[0]=e._points[m].y=100-100/(1+h/c);o.points=xe.extend(!0,[],e._points);for(var g=[],p=u,m=0;p<o.points.length;p++,m++)g[m]=o.points[p].y;e.yRange.min=Math.min(Math.min.apply(Math,g),e.yRange.min),e.yRange.max=Math.max(Math.max.apply(Math,g),e.yRange.max),e.segment.push(o),this.calculateIndicatorRange(t,e)}},calculateIndicatorRange:function(e,t){null==e.model.indicatorRange[t.xAxisName]?(e.model.indicatorRange[t.xAxisName]={},e.model.indicatorRange[t.xAxisName]={min:t.xRange.min,max:t.xRange.max}):(e.model.indicatorRange[t.xAxisName].min>t.xRange.min&&(e.model.indicatorRange[t.xAxisName].min=t.xRange.min),e.model.indicatorRange[t.xAxisName].max<t.xRange.max&&(e.model.indicatorRange[t.xAxisName].max=t.xRange.max)),void 0===e.model.indicatorRange[t.yAxisName]?(e.model.indicatorRange[t.yAxisName]={},e.model.indicatorRange[t.yAxisName]={min:t.yRange.min,max:t.yRange.max}):(e.model.indicatorRange[t.yAxisName].min>t.yRange.min&&(e.model.indicatorRange[t.yAxisName].min=t.yRange.min),e.model.indicatorRange[t.yAxisName].max<t.yRange.max&&(e.model.indicatorRange[t.yAxisName].max=t.yRange.max))}},ej.ejRSI=e(ej.EjIndicatorRender),ej.indicatorTypes.rsi=ej.ejRSI,ej.ejMACD=e(ej.EjIndicatorRender,{calculateSegment:function(e,t){this.chartObj=t,e.segment=[],e.xRange={},e.yRange={};var i,s,n,a=e._points.length,r=e.longPeriod,o=e.shortPeriod,l=e.trigger,d=r-o,h=[],c=[],u=r+l;if(u<=e._points.length&&0<=u-2&&o<=r&&0<o){for(i=this.calculateEMA(e._points,o,!0),s=this.calculateEMA(e._points,r,!0),f=0;f<s.length;f++)h.push(i[f+d]-s[f]);var p=xe.extend(!0,{},e);p.name="macdSeries",p.fill=e.macdLine.fill,p.width=e.macdLine.width,p.type="line",p.xAxis=e.xAxis,p.yAxis=e.yAxis;for(var m=r-1,g=0,f=0;g<a;g++)g<m?e._points[g].YValues[0]=e._points[g].y=null:(e._points[g].YValues[0]=e._points[g].y=h[f],f+=1);p.points=xe.extend(!0,[],e._points),n=this.calculateEMA(h,l,!1);u=xe.extend(!0,{},e);u.name="signalSeries",u.fill=e.fill,u.width=e.width,u.type="line",u.xAxis=e.xAxis,u.yAxis=e.yAxis;for(m=r+l-2,g=0,f=0;g<a;g++)g<m?e._points[g].YValues[0]=e._points[g].y=null:(e._points[g].YValues[0]=e._points[g].y=n[f],f+=1);u.points=xe.extend(!0,[],e._points);o=xe.extend(!0,{},e);o.border={},o.name="histogramSeries",o.fill=e.histogram.fill,o.opacity=e.histogram.opacity,o.fill=e.histogram.fill,o.border=e.histogram.border,o.type="column",o.xAxis=e.xAxis,o.yAxis=e.yAxis;for(var _=0,v=m;v<a;_++,v++)c.push(h[_+(l-1)]-n[_]);for(_=0,v=m;v<a;_++,v++)e._points[v].YValues[0]=e._points[v].y=c[_];o.points=xe.extend(!0,[],e._points);r=t._getXValues(p.points);switch(e.xRange.min=Math.min.apply(Math,r),e.xRange.max=Math.max.apply(Math,r),e.macdType){case"line":e.yRange.min=Math.min.apply(Math,h),e.yRange.max=Math.max.apply(Math,h),e.segment.push(p);var b=Math.min.apply(Math,n),x=Math.max.apply(Math,n);e.yRange.min=e.yRange.min<b?e.yRange.min:b,e.yRange.max=e.yRange.max>x?e.yRange.max:x,e.segment.push(u);break;case"histogram":var y=Math.min.apply(Math,c),w=Math.max.apply(Math,c);e.yRange.min=e.yRange.min<y?e.yRange.min:y,e.yRange.max=e.yRange.max>w?e.yRange.max:w,e.segment.push(o);break;case"both":y=Math.min.apply(Math,c),w=Math.max.apply(Math,c);e.yRange.min=e.yRange.min<y?e.yRange.min:y,e.yRange.max=e.yRange.max>w?e.yRange.max:w,e.segment.push(o),e.yRange.min=Math.min.apply(Math,h),e.yRange.max=Math.max.apply(Math,h),e.segment.push(p);b=Math.min.apply(Math,n),x=Math.max.apply(Math,n);e.yRange.min=e.yRange.min<b?e.yRange.min:b,e.yRange.max=e.yRange.max>x?e.yRange.max:x,e.segment.push(u)}this.calculateIndicatorRange(t,e)}},calculateEMA:function(e,t,i){var s=0,n=0,a=e.length,r=[],o=[],l=2/(t+1);if(i){for(var d=0;d<t;d++)r.push(e[d].close),s+=r[d];n=s/t,o.push(n);for(var h=n,c=t;c<a;c++)h=(e[c].close-h)*l+h,o.push(h)}else{for(d=0;d<t;d++)r.push(e[d]),s+=r[d];n=s/t,o.push(n);for(h=n,c=t;c<a;c++)h=(e[c]-h)*l+h,o.push(h)}return o}}),ej.indicatorTypes.macd=ej.ejMACD,ej.ejSMA=e(ej.EjIndicatorRender,{calculateSegment:function(e,t){this.chartObj=t,e.segment=[],e.xRange={},e.yRange={};var i=xe.extend(!0,{},e);i.name="trendSeries",i.width=e.width,i.fill=e.fill,i.type="line";var s,n=[],a=[],r=[],o=e._points.length,l=e.period;if(!(l<=0||o<l)){for(var d=0;d<o;d++)n.push(e._points[d].close);for(var h=n.length;l<=h;){for(var c=s=0;c<l;c++)s+=n[c];s/=l,a.push(s),n.splice(0,1),h=n.length}for(var u=0;u<o;u++)e._points[u].YValues[0]=e._points[u].y=u<l-1?null:a[u-(l-1)];i.points=xe.extend(!0,[],e._points);for(var p=t._getXValues(i.points),d=l-1,c=0;d<i.points.length;d++,c++)r[c]=i.points[d].y;e.xRange.min=Math.min.apply(Math,p),e.xRange.max=Math.max.apply(Math,p),e.yRange.min=Math.min.apply(Math,r),e.yRange.max=Math.max.apply(Math,r),e.segment.push(i),this.calculateIndicatorRange(t,e)}}}),ej.indicatorTypes.sma=ej.ejSMA,ej.ejEMA=e(ej.EjIndicatorRender,{calculateSegment:function(e,t){this.chartObj=t,e.segment=[],e.xRange={},e.yRange={};var i=xe.extend(!0,{},e);i.name="trendSeries",i.type="line",i.xAxis=e.xAxis,i.yAxis=e.yAxis;var s,n=[],a=[],r=e._points.length,o=e.period,l=0;if(!(r<o||o<=0)){for(var d=2/(o+1),h=0;h<o;h++)n.push(e._points[h].close),l+=n[h];for(a.push(l/o),p=o;p<r;p++)a.push((e._points[p].close-a[p-o])*d+a[p-o]);for(var c=0;c<r;c++)c<o-1?e._points[c].YValues[0]=e._points[c].y=null:o-1<=c&&(e._points[c].YValues[0]=e._points[c].y=a[c-(o-1)]);i.points=xe.extend(!0,[],e._points),s=t._getXValues(i.points);for(var u=[],h=o,p=0;h<i.points.length;h++,p++)u[p]=i.points[h].y;e.xRange.min=Math.min.apply(Math,s),e.xRange.max=Math.max.apply(Math,s),e.yRange.min=Math.min.apply(Math,u),e.yRange.max=Math.max.apply(Math,u),e.segment.push(i),this.calculateIndicatorRange(t,e)}}}),ej.indicatorTypes.ema=ej.ejEMA,ej.ejSTOCHASTIC=e(ej.EjIndicatorRender,{calculateSegment:function(p,e){this.chartObj=e,p.segment=[],p.xRange={},p.yRange={};var t=p.kPeriod,i=p.dPeriod,s=p.period;if(!(s<1||i<1||t<1||s>p._points.length||i>p._points.length||t>p._points.length)){var n=xe.extend(!0,{},p);n.name="upperseries",n.type="line",n.fill=p.upperLine.fill,n.width=p.upperLine.width;for(var a=0;a<p._points.length;a++)p._points[a].YValues.length=1,p._points[a].YValues[0]=p._points[a].y=80;n.points=xe.extend(!0,[],p._points);var r=e._getXValues(n.points),o=e._getYValues(n.points);p.xRange.min=Math.min.apply(Math,r),p.xRange.max=Math.max.apply(Math,r),p.yRange.min=Math.min.apply(Math,o),p.yRange.max=Math.max.apply(Math,o),p.segment.push(n);n=xe.extend(!0,{},p);n.name="lowerSeries",n.width=p.lowerLine.width,n.fill=p.lowerLine.fill,n.type="line";for(var l=0;l<p._points.length;l++)p._points[l].YValues[0]=p._points[l].y=20;n.points=xe.extend(!0,[],p._points),r=e._getXValues(n.points),o=e._getYValues(n.points),p.xRange.min=Math.min(Math.min.apply(Math,r),p.xRange.min),p.xRange.max=Math.max(Math.max.apply(Math,r),p.xRange.max),p.yRange.min=Math.min(Math.min.apply(Math,o),p.yRange.min),p.yRange.max=Math.max(Math.max.apply(Math,o),p.yRange.max),p.segment.push(n);n=xe.extend(!0,{},p);n.name="periodSeries",n.width=p.periodLine.width,n.fill=p.periodLine.fill,n.type="line";for(var d,h,c,u=[],m=[],g=[],f=[],_=0;_<p._points.length;_++)m[_]=p._points[_].low,u[_]=p._points[_].high,g[_]=p._points[_].close;d=s,h=t,c=p._points,p._points.length>d&&function(e,t,i){for(var s,n,a=e+t,r=[],o=[],l=0,d=0,h=0;h<e-1;++h)o.push(0),r.push(0);for(h=e-1;h<p._points.length;++h){n=Number.MAX_VALUE,s=Number.MIN_VALUE;for(var c=0;c<e;++c)n=Math.min(n,m[h-c]),s=Math.max(s,u[h-c]);o.push(s),r.push(n)}for(h=0;h<a-1;++h)i[h].YValues.length=1,i[h].YValues[0]=i[h].y=null;for(h=e-1;h<p._points.length;++h)d=l=0,l+=g[h]-r[h],d+=o[h]-r[h],i[h].YValues.length=1,i[h].YValues[0]=i[h].y=l/d*100}(d,h,c),f=p._points,v(s,t,p._points),f=p._points,n.points=xe.extend(!0,[],p._points),r=e._getXValues(n.points),o=e._getYValues(n.points),p.xRange.min=Math.min(Math.min.apply(Math,r),p.xRange.min),p.xRange.max=Math.max(Math.max.apply(Math,r),p.xRange.max),p.yRange.min=Math.min(Math.min.apply(Math,o),p.yRange.min),p.yRange.max=Math.max(Math.max.apply(Math,o),p.yRange.max),p.segment.push(n);n=xe.extend(!0,{},p);n.name="trendSeries",n.width=p.width,n.fill=p.fill,n.type="line",v(s+t-1,i,p._points),n.points=xe.extend(!0,[],p._points),p.segment.push(n),this.calculateIndicatorRange(e,p)}function v(e,t,i){p._points.length>=e+t&&function(e,t,i){for(var s,n=e+(t-1),a=[],r=[],o=0;o<p._points.length;o++){var l=f[o].y;a.push(l)}var d=a.length;for(;n<=d;){s=0;for(var h=e-1;h<e+t-1;h++)s+=a[h];s/=t,r.push(s.toFixed(2)),a.splice(0,1),d=a.length}for(var c=n-1,u=0;u<p._points.length;u++)i[u].YValues[0]=i[u].y=u<c?null:Number(r[u-c])}(e,t,i)}}}),ej.indicatorTypes.stochastic=ej.ejSTOCHASTIC,ej.ejbollingerBand=e(ej.EjIndicatorRender,{calculateSegment:function(e,t){this.chartObj=t,e.segment=[],e.xRange={},e.yRange={};var i=0,s=0,n=e._points.length,a=e.standardDeviations,r=e.period,o=Math.round(r),l=[],d=[],h=[];if(o<n&&0<o){for(var c=0;c<o;c++)i+=e._points[c].close;for(var u=i/r,c=0;c<n;++c)if(o-1<=c&&c<n){0<=c-r?(u=(i+=e._points[c].close-e._points[c-o].close)/r,l[c]=u,d[c]=Math.pow(e._points[c].close-u,2),s+=d[c]-d[c-o]):(l[c]=u,d[c]=Math.pow(e._points[c].close-u,2),s+=d[c]);var p=Math.sqrt(s/r),m=l[c]-a*p,g=l[c]+a*p;if(c+1==o)for(var f=0;f<o-1;f++)h[f]={X:e._points[f].X,mb:l[c],lb:m,ub:g,visible:!0};h[c]={X:e._points[c].X,mb:l[c],lb:m,ub:g,visible:!0}}else c<r-1&&(l[c]=u,d[c]=Math.pow(e._points[c].close-u,2),s+=d[c]);var _=xe.extend(!0,{},e);_.name="upperseries",_.fill=e.upperLine.fill,_.width=e.upperLine.width,_.type="line";for(var v=0;v<e._points.length;v++)o-1<=v?(e._points[v].YValues.length=1,e._points[v].YValues[0]=e._points[v].y=h[v].ub):e._points[v].YValues[0]=e._points[v].y=null;_.points=xe.extend(!0,[],e._points);for(var b=t._getXValues(_.points),x=[],c=o;c<_.points.length;c++)x.push(_.points[c].y);var y=x;e.xRange.min=Math.min.apply(Math,b),e.xRange.max=Math.max.apply(Math,b),e.yRange.min=Math.min.apply(Math,y),e.yRange.max=Math.max.apply(Math,y),e.segment.push(_);var w=xe.extend(!0,{},e);w.name="lowerSeries",w.width=e.lowerLine.width,w.fill=e.lowerLine.fill,w.type="line";for(var C=0;C<e._points.length;C++)o-1<=C?(e._points[C].YValues.length=1,e._points[C].YValues[0]=e._points[C].y=h[C].lb):e._points[C].YValues[0]=e._points[C].y=null;w.points=xe.extend(!0,[],e._points),b=t._getXValues(w.points);for(var S=[],c=o;c<w.points.length;c++)S.push(w.points[c].y);y=S;e.xRange.min=Math.min(Math.min.apply(Math,b),e.xRange.min),e.xRange.max=Math.max(Math.max.apply(Math,b),e.xRange.max),e.yRange.min=Math.min(Math.min.apply(Math,y),e.yRange.min),e.yRange.max=Math.max(Math.max.apply(Math,y),e.yRange.max),e.segment.push(w);var T=xe.extend(!0,{},e);T.name="trendSeries",T.width=e.width,T.fill=e.fill,T.type="line";for(var R=0;R<e._points.length;R++)o-1<=R?(e._points[R].YValues.length=1,e._points[R].YValues[0]=e._points[R].y=h[R].mb):e._points[R].YValues[0]=e._points[R].y=null;T.points=xe.extend(!0,[],e._points),b=t._getXValues(T.points);for(var k=[],c=o;c<T.points.length;c++)k.push(T.points[c].y);y=k;e.xRange.min=Math.min(Math.min.apply(Math,b),e.xRange.min),e.xRange.max=Math.max(Math.max.apply(Math,b),e.xRange.max),e.yRange.min=Math.min(Math.min.apply(Math,y),e.yRange.min),e.yRange.max=Math.max(Math.max.apply(Math,y),e.yRange.max),e.segment.push(T),this.calculateIndicatorRange(t,e)}}}),ej.indicatorTypes.bollingerband=ej.ejbollingerBand,ej.ejATR=e(ej.EjIndicatorRender,{calculateSegment:function(e,t){this.chartObj=t,e.segment=[],e.xRange={};var i,s,n,a,r=[],o=i=s=0,l=0,d=(e.yRange={},e.period);if(!(d<=0||d>e._points.length)){for(var h=0;h<d;h++)o=e._points[h].high-e._points[h].low,0<h&&(i=Math.abs(e._points[h].high-e._points[h-1].close),s=Math.abs(e._points[h].low-e._points[h-1].close)),a=(l+=n=Math.max(o,i,s))/d,r[h]={X:e._points[h].X,YValues:a};for(h=d;h<e._points.length;++h)o=e._points[h].high-e._points[h].low,i=Math.abs(e._points[h].high-e._points[h-1].close),s=Math.abs(e._points[h].low-e._points[h-1].close),n=Math.max(o,i,s),a=(r[h-1].YValues*(d-1)+n)/d,r[h]={X:e._points[h].X,YValues:a};var c=xe.extend(!0,{},e);c.name="trendSeries",c.width=e.width,c.fill=e.fill,c.type="line";for(var u=0;u<e._points.length;u++)d-1<=u?(e._points[u].YValues.length=1,e._points[u].YValues[0]=e._points[u].y=r[u].YValues):e._points[u].YValues[0]=e._points[u].y=null;c.points=xe.extend(!0,[],e._points);for(var p=t._getXValues(c.points),m=[],h=d;h<c.points.length;h++)m.push(c.points[h].y);e.xRange.min=Math.min.apply(Math,p),e.xRange.max=Math.max.apply(Math,p),e.yRange.min=Math.min.apply(Math,m),e.yRange.max=Math.max.apply(Math,m),e.segment.push(c),this.calculateIndicatorRange(t,e)}}}),ej.indicatorTypes.atr=ej.ejATR,ej.ejaccumulationDistribution=e(ej.EjIndicatorRender,{calculateSegment:function(e,t){this.chartObj=t,e.segment=[],e.xRange={},e.yRange={};for(var i=[],s=0,n=0;n<e._points.length;n++){var a=e._points[n].close,a=(a-e._points[n].low-(e._points[n].high-a))/(e._points[n].high-e._points[n].low);s+=(isNaN(a)?0:a)*e._points[n].volume,i[n]=s}var r=xe.extend(!0,{},e);r.name="trendseries",r.fill=e.fill,r.width=e.width,r.type="line";for(var o=0;o<e._points.length;o++)e._points[o].YValues[0]=e._points[o].y=i[o];r.points=xe.extend(!0,[],e._points);var l=t._getXValues(r.points),d=t._getYValues(r.points);e.xRange.min=Math.min.apply(Math,l),e.xRange.max=Math.max.apply(Math,l),e.yRange.min=Math.min.apply(Math,d),e.yRange.max=Math.max.apply(Math,d),e.segment.push(r),this.calculateIndicatorRange(t,e)}}),ej.indicatorTypes.accumulationdistribution=ej.ejaccumulationDistribution,ej.ejTMA=e(ej.EjIndicatorRender,{calculateSegment:function(e,t){this.chartObj=t,e.segment=[],e.xRange={},e.yRange={};var i=xe.extend(!0,{},e);i.name="trendSeries",i.width=e.width,i.fill=e.fill,i.type="line";var s,n=[],a=[],r=[],o=[],l=[],d=0,h=e._points.length,c=e.period;if(!(c<1)&&c<h){for(var u=0;u<h;u++)n.push(e._points[u].close);for(var p=n.length;c<=p;){for(var m=d=0;m<c;m++)d+=n[m];d/=c,a.push(parseFloat(d.toFixed(2))),n.splice(0,1),p=n.length}for(var g=0;g<h;g++)if(g<c-1){for(m=d=0;m<g+1;m++)d+=e._points[m].close;d/=g+1,o[g]=parseFloat(d.toFixed(2))}else o[g]=a[g-(c-1)];for(var f=o.length;c<=f;){for(m=s=0;m<c;m++)s+=o[m];s/=c,r.push(s),o.splice(0,1),f=o.length}for(g=0;g<h;g++)e._points[g].YValues[0]=e._points[g].y=g<c-1?null:r[g-(c-1)];i.points=xe.extend(!0,[],e._points);for(var _=t._getXValues(i.points),u=c-1,m=0;u<i.points.length;u++,m++)l[m]=i.points[u].y;e.xRange.min=Math.min.apply(Math,_),e.xRange.max=Math.max.apply(Math,_),e.yRange.min=Math.min.apply(Math,l),e.yRange.max=Math.max.apply(Math,l),e.segment.push(i),this.calculateIndicatorRange(t,e)}}}),ej.indicatorTypes.tma=ej.ejTMA,ej.ejMomentum=e(ej.EjIndicatorRender,{calculateSegment:function(e,t){this.chartObj=t,e.segment=[],e.xRange={},e.yRange={};var i=xe.extend(!0,{},e);i.name="upperseries",i.fill=e.upperLine.fill,i.width=e.upperLine.width,i.type="line";var s=e.period,n=e._points.length;if(0<s&&s<n-1){for(var a=0;a<n;a++)e._points[a].YValues.length=1,e._points[a].YValues[0]=e._points[a].y=100;i.points=xe.extend(!0,[],e._points);var r=t._getXValues(i.points),s=t._getYValues(i.points);e.xRange.min=Math.min.apply(Math,r),e.xRange.max=Math.max.apply(Math,r),e.yRange.min=Math.min.apply(Math,s),e.yRange.max=Math.max.apply(Math,s),e.segment.push(i);var o=xe.extend(!0,{},e);o.name="trendSeries",o.width=e.width,o.fill=e.fill,o.type="line";for(var l=e.period,d=0;d<e._points.length;++d){var h=e._points;d<l||(e._points[d].YValues[0]=e._points[d].y=h[d].close/h[d-l].close*100)}for(a=0;a<l&&a<e._points.length;a++)e._points[a].YValues[0]=e._points[a].y=null;o.points=xe.extend(!0,[],e._points),r=t._getXValues(o.points);for(var c=[],d=l,u=0;d<o.points.length;d++,u++)c[u]=o.points[d].y;e.xRange.min=Math.min(Math.min.apply(Math,r),e.xRange.min),e.xRange.max=Math.max(Math.max.apply(Math,r),e.xRange.max),e.yRange.min=Math.min(Math.min.apply(Math,c),e.yRange.min),e.yRange.max=Math.max(Math.max.apply(Math,c),e.yRange.max),e.segment.push(o),this.calculateIndicatorRange(t,e)}}}),ej.indicatorTypes.momentum=ej.ejMomentum,ej.EjSeriesRender.prototype={getOrigin:function(e,t,i){if(i.axes[t.xAxis.name]._validCross){i=e.chartObj._getCrossAxis(e.chartObj.model._axes,!0,t.xAxis.crossesInAxis);if(e.chartObj.model.requireInvertedAxes?t.xAxis.name:t.yAxis.name===i.name)return t.xAxis._crossValue}return"splinerangearea"==t.type.toLowerCase()?Math.max(t.points[0].YValues[1],0):Math.max(t.yAxis.visibleRange.min,0)},setLineSeriesStyle:function(e){var t=xe.inArray(e,this.chartObj.model._visibleSeries),i=this.chartObj.model.seriesColors[t],i=e.isTransposed?this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(e)+t,i,100,0,0,0,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(e)+t,i,0,0,0,100,this.chartObj.gSeriesEle);return{SeriesInterior:i,SeriesBorder:this.chartObj.model.seriesBorderColors[t]}},getSeriesName:function(e){e=e.name?e.name.replace(/\s/g,""):"series";return e},drawAreaPath:function(e,t,i,s){var n=this.chartObj.model.requireInvertedAxes,a=xe.inArray(e,this.chartObj.model._visibleSeries),r=null,o=this.chartObj.model.AreaType,l=e.border;"cartesianaxes"==o&&(r="translate("+(n=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,n)).x+","+n.y+")");r={id:this.chartObj.svgObject.id+"_SeriesGroup_"+a,transform:r};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(r),""!=i&&(i={id:this.chartObj.svgObject.id+"_Series"+a,fill:t.SeriesInterior,"fill-opacity":e.opacity,"stroke-width":l.width,stroke:l.color,"stroke-dasharray":l.dashArray,"stroke-linecap":e.lineCap,"stroke-linejoin":e.lineJoin,d:i},this.chartObj.dragPoint?(i.id=this.chartObj.svgObject.id+"_PreviewSeries"+a,i["fill-opacity"]=.6,this.chartObj.model.enableCanvasRendering?this.chartObj.svgRenderer.drawPath(i,this.chartObj.canvasElement,s):this.chartObj.svgRenderer.drawPath(i,this.chartObj.gPreviewSeriesGroupEle,s)):this.chartObj.svgRenderer.drawPath(i,this.gSeriesGroupEle,s))},setAreaSeriesStyle:function(e){var t=xe.inArray(e,this.chartObj.model._visibleSeries),i=this.chartObj.model.seriesColors[t],i=e.isTransposed?this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(e)+t,i,100,0,0,0,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(e)+t,i,0,0,0,100,this.chartObj.gSeriesEle);return{SeriesInterior:i}},naturalSpline:function(e,t,i){var s=e.length,n=[],a=[],r=[],o=[],l=[],d=ej.util.isNullOrUndefined(t.cardinalSplineTension)?.5:t.cardinalSplineTension<0?0:1<t.cardinalSplineTension?1:t.cardinalSplineTension,h="splinerangearea"==t.type.toLowerCase()?i:0;if("monotonic"==t.splineType){for(var c=0;c<s-1;c++)n[c]=e[c+1].xValue-e[c].xValue,a[c]=e[c+1].YValues[h]-e[c].YValues[h],r[c]=a[c]/n[c];var u,p=r.length;o[0]=r[0],o[s-1]=r[p-1];for(var m=0;m<n.length;m++)m+1<p&&(r[m]*r[m+1]<=0?o[m+1]=0:(u=n[m]+n[m+1],o[m+1]=3*u/((u+n[m+1])/r[m]+(u+n[m])/r[m+1])))}else if("cardinal"==t.splineType)for(c=0;c<s;c++)o[c]=0==c?2<s?d*(e[c+2].xValue-e[c].xValue):0:c==s-1?2<s?d*(e[s-1].xValue-e[s-3].xValue):0:d*(e[c+1].xValue-e[c-1].xValue);else{"clamped"==t.splineType?(i=(e[1].xValue-e[0].xValue)/(e[1].YValues[h]-e[0].YValues[h]),t=(e[s-1].xValue-e[s-2].xValue)/(e[s-1].YValues[h]-e[s-2].YValues[h]),o[0]=3*(e[1].YValues[h]-e[0].YValues[h])/(e[1].xValue-e[0].xValue)-3*i,l[0]=.5,o[e.length-1]=3*t-3*(e[e.length-1].YValues[h]-e[e.length-2].YValues[h])/(e[e.length-1].xValue-e[e.length-2].xValue),o[0]="Infinity"==Math.abs(o[0])?0:o[0],o[e.length-1]="Infinity"==Math.abs(o[e.length-1])?0:o[e.length-1]):(o[0]=l[0]=0,o[e.length-1]=0);for(c=1;c<s-1;c++){var g=e[c].xValue-e[c-1].xValue,f=e[c+1].xValue-e[c-1].xValue,_=e[c+1].xValue-e[c].xValue,v=e[c+1].YValues[h]-e[c].YValues[h]||null,b=e[c].YValues[h]-e[c-1].YValues[h]||null;0==g||0==f||0==_?(o[c]=0,l[c]=0):(f=1/(g*o[c-1]+2*f),o[c]=-f*_,l[c]=f*(6*(v/_-b/g)-g*l[c-1]))}for(var x=s-2;0<=x;x--)o[x]=o[x]*o[x+1]+l[x]}return o},getDaysInMonth:function(e,t){return new Date(t,e+1,0).getDate()},getBezierControlPoints:function(e,t,i,s,n,a,r){var o,l,d,h,c=new Date(e.xValue),u=r.chartObj.model.hAxes.length,p=xe.inArray(a,r.chartObj.model._visibleSeries),u=p!=u&&p<u?p:0;return s="cardinal"==a.splineType?(d=ej.util.isNullOrUndefined(r.chartObj.model.hAxes[u].intervalType)||"years"==r.chartObj.model.hAxes[u].intervalType.toLowerCase()||"auto"==r.chartObj.model.hAxes[u].intervalType.toLowerCase()?(l=i/(864e5*(p=(o=new Date(c.getFullYear()))%4!=0||o%100!=0&&o%400==0?365:366)),s/(864e5*p)):"months"==r.chartObj.model.hAxes[u].intervalType.toLowerCase()?(o=(d=new Date(c)).getFullYear(),d=d.getMonth(),l=i/(864e5*(d=ej.EjSeriesRender.prototype.getDaysInMonth(d,o))),s/(864e5*d)):(l=i,s),l={xValue:e.xValue+i/3,YValues:[e.YValues[n]+l/3]},{xValue:t.xValue-s/3,YValues:[t.YValues[n]-d/3]}):"monotonic"==a.splineType?(h=(t.xValue-e.xValue)/3,l={xValue:e.xValue+h,YValues:[e.YValues[n]+i*h]},{xValue:t.xValue-h,YValues:[t.YValues[n]-s*h]}):(d=t.xValue-e.xValue,d*=d,a=2*parseFloat(e.xValue)+parseFloat(t.xValue),h=parseFloat(e.xValue)+2*parseFloat(t.xValue),l={xValue:a*(1/3),YValues:[1/3*(2*e.YValues[n]+t.YValues[n]-1/3*d*(i+.5*s))]},{xValue:h*(1/3),YValues:[1/3*(e.YValues[n]+2*t.YValues[n]-1/3*d*(.5*i+s))]}),{controlPoint1:l,controlPoint2:s}},improveChartPerformance:function(e){if(this.chartObj&&this.chartObj.chartExtensions)return o=this.chartObj.chartExtensions.chartDataOptimizer.trimSeriesForChartBounds(e,this.chartObj);for(var t,i,s,n,a,r=[],o=e.pointCollection&&e.dragPoint?e.pointCollection:e.points,l=this.chartObj.model.m_AreaBounds,d=0,h=e.xAxis.visibleRange.delta/l.Width,c=e.yAxis.visibleRange.delta/l.Height,u=o[0]&&o[0].xValue>h?0:h,p=o[0]&&o[0].y>c?0:c,m=o.length,g=0,f=0,_=!0,v=0,b=0<m&&o[0].xValue,x=0;x<m;x++)t=(s=o[x]).xValue,i=s.YValues[0],s.fill&&(e.pointFill=!0),_&&t!=b&&(_=b<t,b=t),(s.isEmpty||null==t||null==i||t!=t||i!=i||isNaN(t)||isNaN(i))&&(s.isEmpty=!0),null==t&&(s.xValue=e.xAxis.visibleRange.min),null==i&&(s.YValues[0]=e.yAxis.visibleRange.min),s.marker&&s.marker.visible&&g++,s.marker&&s.marker.dataLabel&&s.marker.dataLabel.visible&&f++,s.isEmpty&&d++,a=i-p,(h<=(n=t-u)||h<=-n||c<=a||c<=-a)&&(s.visible=!s.isEmpty||(s.visible||!1),r[v++]=s,t==t&&(u=t),i==i&&(p=i));return _&&(e._sorted=_),e._pointMarker=g,e._dataLabels=f,0==d&&e.marker&&!e.marker.dataLabel.visible?r:this._calculateEmptyPoints(e,r)},_isVisiblePoints:function(e){for(var t,i,s=e.pointCollection&&e.dragPoint?e.pointCollection:e.points,n=ej.util.isNullOrUndefined,a=s.length,r=0;r<a;r++)i=!n(s[r].isEmpty)&&s[r].isEmpty,s[r].visible=!!n(s[r].visible)||s[r].visible,n(s[r].xValue)?(s[r].isEmpty=!0,s[r].visible=!1,s[r].xValue=e.xAxis?e.xAxis.visibleRange.min:null):s[r].isEmpty=i,"object"!=typeof s[r].YValues[0]&&isNaN(s[r].YValues[0])||null==s[r].YValues[0]||"undefined"==s[r].YValues[0]||!e.isIndicator&&e._hiloTypes&&(isNaN(s[r].YValues[1])||null==s[r].YValues[1]||null==s[r].YValues[1])?(s[r].isEmpty=!0,s[r].visible=!1):(s[r].isEmpty=s[r].isEmpty,s[r].visible=s[r].isEmpty?!s[r].isEmpty:s[r].visible),n(s[r].x)||"date"==jQuery.type(s[r].xValue)&&(s[r].xValue=s[r].xValue.getTime());return t=e.emptyPointSettings?this._calculateEmptyPoints(e,s):s,"waterfall"==e.type.toLowerCase()&&this.chartObj.calculateWaterfallSeriesPoints(t),e._visiblePoints=t},_calculateEmptyPoints:function(e,t,i){var s,n=e.emptyPointSettings,a=n.style,r=a.color,o=ej.util.isNullOrUndefined,l=a.border.color,d=a.border.width,h=n.displayMode.toLowerCase(),n=n.visible,c=t.length,u=[],p=xe.extend(!0,{},t,p),m=e.type.toLowerCase();if(p.length=t.length,h="boxandwhisker"==m?"gap":h,n)if("gap"!=h)for(var g,f=0;f<c;f++)if(p[f].actualIndex=!o(i)&&i.model._isPieOfPie?p[f].actualIndex:f,!(s=p[f]).isEmpty||o(s.x)&&"string"!=e._xAxisValueType)o(p[f].x)&&"string"!=e._xAxisValueType||u.push(s);else{switch(""!=r&&(s.fill=r),""!=l&&(s.border=s.border||{},s.border.color=l,s.border.width=d),h){case"average":e._hiloTypes?("splinerangearea"==m&&this._setsraPoint(p[f]),xe.each(s.YValues,function(e,t){t=((p[f-1]?p[f-1].YValues[e]:0)+(!p[f+1]||p[f+1].isEmpty?0:p[f+1].YValues[e]))/2,s.YValues[e]=t,ej.EjSeriesRender.prototype._sethlocPoint(e,s,t)})):(g=((p[f-1]?p[f-1].y:0)+(!p[f+1]||p[f+1].isEmpty?0:p[f+1].y))/2,s.YValues[0]=g,s.y=g);break;case"zero":e._hiloTypes?("splinerangearea"==m&&this._setsraPoint(p[f]),xe.each(s.YValues,function(e,t){s.y=0,s.YValues[e]=0,ej.EjSeriesRender.prototype._sethlocPoint(e,s,0)})):(g=-1!=m.indexOf("stackingspline")?p[f].YValues[0]:0,s.YValues[0]=g,s.y=g)}s.isEmpty=!1,s.visible=!0,u.push(s)}else for(f=0;f<c;f++)p[f].actualIndex=!o(i)&&i.model._isPieOfPie?p[f].actualIndex:f,"splinerangearea"==m&&this._setsraPoint(p[f]),u[f]=p[f];else for(f=0;f<c;f++)p[f].actualIndex=f,p[f].visible&&u.push(p[f]);return u},_setsraPoint:function(e){var t=ej.util.isNullOrUndefined;t(e.YValues[0])&&(e.YValues[0]=0),t(e.YValues[1])&&(e.YValues[1]=0)},_sethlocPoint:function(e,t,i){switch(e){case 0:t.high=i;break;case 1:t.low=i;break;case 2:t.open=i;break;case 3:t.close=i}},_calculatePolarAxesSegment:function(e){var t,i,s,n,a,r,o,l,d,h,c,u,p=e._visiblePoints,m=ej.EjSvgRender.utils._getStringBuilder(),g=xe.inArray(e,this.chartObj.model._visibleSeries),f=this.chartObj.model.centerX,_=this.chartObj.model.centerY,v=this._getSeriesPosition(e),b=e.drawType.toLowerCase(),x=(ej.EjSvgRender.utils._getStringBuilder(),this.setLineSeriesStyle(e),this.chartObj),y=xe.extend(!0,{},e.marker.size,y);if(y.width<=10&&(y.width=y.height=1.5*this.chartObj.model.elementSpacing),"column"==e.drawType.toLowerCase()||"rangecolumn"==e.drawType.toLowerCase()){var w=0,C={id:this.chartObj.svgObject.id+"_SeriesGroup_"+g};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(C);var S=e.xAxis.visibleRange.interval;e.xAxis.labelPlacement=e.xAxis.labelPlacement||"betweenticks";var T,R=0;("category"!=e.xAxis._valueType||"category"==e.xAxis._valueType&&"onticks"==e.xAxis.labelPlacement)&&(R=S/2);for(var k=e.xAxis.isInversed?0:1,O=S/=v.all,D=e._visiblePoints,I=D.length,j=0;j<I;j++){var L=D[j].xValue-e.xAxis.visibleRange.min+(S*v.pos-R);L/=this.chartObj.model.sumofYValues,T=D[j];O=e.xAxis.visibleRange.interval/v.all;T.startAngle=2*Math.PI*L,T.endAngle=2*Math.PI*(L+O/this.chartObj.model.sumofYValues)}D[D.length-1].startAngle||(D[D.length-1].startAngle=D[0].startAngle,D[D.length-1].endAngle=D[0].endAngle)}for(var A,E,P=!1,M=0;M<p.length;M++){if("scatter"==b)A=ej.EjSvgRender.utils.TransformToVisible(e,p[M].xValue,p[M].y,this.chartObj),this.drawSymbol(g,e,M,A.X,A.Y);else if("line"==e.drawType.toLowerCase())A=ej.EjSvgRender.utils.TransformToVisible(e,p[M].xValue,p[M].y,this.chartObj),M<p.length-1&&p[M+1].visible?(E=ej.EjSvgRender.utils.TransformToVisible(e,p[M+1].xValue,p[M+1].y,this.chartObj),m.append("M "+A.X+" "+A.Y+" L "+E.X+" "+E.Y+" ")):M==p.length-1&&e.isClosed&&(E=ej.EjSvgRender.utils.TransformToVisible(e,p[0].xValue,p[0].y,this.chartObj),m.append("M "+A.X+" "+A.Y+" L "+E.X+" "+E.Y+" "));else if("column"==e.drawType.toLowerCase()){var S=e.xAxis.visibleRange.interval,k=e.xAxis.isInversed?0:1,S=S/v.all,F=this.chartObj.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(e.yAxis,p[M].y),N=-.5*Math.PI,z=p[M].startAngle+N,V=p[M].endAngle+N-1e-6;q=e.isStacking?(W=f+(F=(Q=e.stackedValue.StartValues[M])==(K=e.stackedValue.EndValues[M])?0:this.chartObj.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(e.yAxis,K))*Math.cos(z),X=_+F*Math.sin(z),G=f+F*Math.cos(V),$=_+F*Math.sin(V),Z=f+(w=this.chartObj.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(e.yAxis,0==Q&&0!=e.yAxis.visibleRange.min?e.yAxis.visibleRange.min:Q))*Math.cos(z),J=_+w*Math.sin(z),ee=f+w*Math.cos(V),te=_+w*Math.sin(V),this.chartObj.model.isPolar?"M "+W+" "+X+" A "+F+" "+F+" 0 0 "+k+" "+G+" "+$+" L "+ee+" "+te+" A "+w+" "+w+" 1 0 0 "+Z+" "+J+" z":"M "+W+" "+X+" L "+G+" "+$+" L "+ee+" "+te+" L "+Z+" "+J+" z"):(W=f+F*Math.cos(z),X=_+F*Math.sin(z),G=f+F*Math.cos(V),$=_+F*Math.sin(V),this.chartObj.model.isPolar?"M "+W+" "+X+" A "+F+" "+F+" 0 0 "+k+" "+G+" "+$+" L "+f+" "+_+" z":"M "+W+" "+X+" L "+G+" "+$+" L "+f+" "+_+" z");var B,H=this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(e)+"_"+g+M,this.chartObj.model.seriesColors[g],0,0,0,100,this.chartObj.gSeriesEle),Y=e.border,U={id:this.chartObj.svgObject.id+"_Series"+g+"_Point"+M,fill:H,stroke:Y.color,"stroke-dasharray":Y.dashArray,"stroke-width":Y.width,opacity:e.opacity,pointIndex:M,d:q,start:p[M].startAngle-1.57,end:p[M].endAngle-1.57,radius:F,innerR:w};this.chartObj.model.isPolar&&(U.x=f,U.y=_,B={PointIndex:M,StartAngle:p[M].startAngle,EndAngle:p[M].endAngle,CenterX:f,CenterY:_,Radius:F,DRadius:w}),"radar"==e.type&&(B={PointIndex:M,Line1:{x:f,y:_},Line2:{x:W,y:X},Line3:{x:G,y:$}},ie=!!w,U.hasStackingInnerRadius=ie),T=e._visiblePoints[M],(!ej.util.isNullOrUndefined(e.marker)&&e.marker.visible||!ej.util.isNullOrUndefined(e.marker)&&e.marker.dataLabel.visible)&&(T.symbolLocation={X:(W+G)/2,Y:(X+$)/2}),this.chartObj.svgRenderer.drawPath(U,this.gSeriesGroupEle)}else if("spline"==b)D=this.chartObj.dragPoint?e.pointCollection:this._isVisiblePoints(e),A=ej.EjSvgRender.utils.TransformToVisible(e,p[M].xValue,p[M].y,this.chartObj),M<p.length-1&&p[M+1].visible&&(E=ej.EjSvgRender.utils.TransformToVisible(e,p[M+1].xValue,p[M+1].y,this.chartObj),c=this.naturalSpline(p,e),o=D[a=r=M],l=D[M+1],t=(d=this.getBezierControlPoints(o,l,c[r],c[a],0,e,this)).controlPoint1,i=d.controlPoint2,s=ej.EjSvgRender.utils.TransformToVisible(e,t.xValue,t.YValues,x),n=ej.EjSvgRender.utils.TransformToVisible(e,i.xValue,i.YValues,x),m.append("M "+A.X+" "+A.Y+" C "+s.X+" "+s.Y+" "+n.X+" "+n.Y+" "+E.X+" "+E.Y+" "),e.isClosed&&M==p.length-1&&null!=A&&(h=ej.EjSvgRender.utils.TransformToVisible(e,p[0].xValue,p[0].y,x),o=D[D.length-1],l=D[0],0,t=(d=this.getBezierControlPoints(o,l,c[0],c[0],0,e,this)).controlPoint1,i=d.controlPoint2,s=ej.EjSvgRender.utils.TransformToVisible(e,t.xValue,t.YValues,x),n=ej.EjSvgRender.utils.TransformToVisible(e,i.xValue,i.YValues,x),m.append("M "+E.X+" "+E.Y+" C "+(s.X+x.canvasX)+" "+(s.Y+x.canvasY)+" "+(n.X+x.canvasX)+" "+(n.Y+x.canvasY)+" "+h.X+" "+h.Y+" ")));else if("rangecolumn"==e.drawType.toLowerCase()){var W,X,G,$,q,Q,K,S=e.xAxis.visibleRange.interval,k=e.xAxis.isInversed?0:1,S=S/v.all,N=-.5*Math.PI,z=p[M].startAngle+N,V=p[M].endAngle+N-1e-6;W=f+(F=(Q=p[M].YValues[1])==(K=p[M].YValues[0])?0:this.chartObj.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(e.yAxis,K))*Math.cos(z),X=_+F*Math.sin(z),G=f+F*Math.cos(V),$=_+F*Math.sin(V);var Z=f+(w=this.chartObj.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(e.yAxis,0==Q&&0!=e.yAxis.visibleRange.min?e.yAxis.visibleRange.min:Q))*Math.cos(z),J=_+w*Math.sin(z),ee=f+w*Math.cos(V),te=_+w*Math.sin(V);q=this.chartObj.model.isPolar?"M "+W+" "+X+" A "+F+" "+F+" 0 0 "+k+" "+G+" "+$+" L "+ee+" "+te+" A "+w+" "+w+" 1 0 0 "+Z+" "+J+" z":"M "+W+" "+X+" L "+G+" "+$+" L "+ee+" "+te+" L "+Z+" "+J+" z";var ie,H=this.chartObj.svgRenderer.createGradientElement(this.getSeriesName(e)+"_"+g+M,this.chartObj.model.seriesColors[g],0,0,0,100,this.chartObj.gSeriesEle),Y=e.border,U={id:this.chartObj.svgObject.id+"_Series"+g+"_Point"+M,fill:H,stroke:Y.color,"stroke-dasharray":Y.dashArray,"stroke-width":Y.width,opacity:e.opacity,pointIndex:M,d:q,start:p[M].startAngle-1.57,end:p[M].endAngle-1.57,radius:F,innerR:w};this.chartObj.model.isPolar&&(U.x=f,U.y=_,B={PointIndex:M,StartAngle:p[M].startAngle,EndAngle:p[M].endAngle,CenterX:f,CenterY:_,Radius:F,DRadius:w}),"radar"==e.type&&(B={PointIndex:M,Line1:{x:ee,y:te},Line2:{x:W,y:X},Line3:{x:G,y:$},Line4:{x:Z,y:J}},ie=!!w,U.hasStackingInnerRadius=ie),T=e._visiblePoints[M],(!ej.util.isNullOrUndefined(e.marker)&&e.marker.visible||!ej.util.isNullOrUndefined(e.marker)||e.marker.dataLabel.visible)&&(T.symbolLocation={X:(W+G)/2,Y:(X+$)/2},this.chartObj.svgRenderer.drawPath(U,this.gSeriesGroupEle))}else if(e.isStacking){if(Q=e.stackedValue.StartValues[M],K=e.stackedValue.EndValues[M],0==M){A=ej.EjSvgRender.utils.TransformToVisible(e,p[M].xValue,K,this.chartObj);for(var se=p.length-1;0<=se;se--)Q=e.stackedValue.StartValues[se],p[se].y=Math.max(e.yAxis.actualRange.min,Q),A=ej.EjSvgRender.utils.TransformToVisible(e,p[se].xValue,p[se].y,this.chartObj),u=se==p.length-1?"M":"L",m.append(u+" "+A.X+" "+A.Y+" ")}M<=p.length-1&&(p[M].y=K,A=ej.EjSvgRender.utils.TransformToVisible(e,p[M].xValue,p[M].y,this.chartObj),m.append("L "+A.X+" "+A.Y+" "),M==p.length-1&&(e.isClosed?(E=ej.EjSvgRender.utils.TransformToVisible(e,p[0].xValue,e.stackedValue.EndValues[0],this.chartObj),h=ej.EjSvgRender.utils.TransformToVisible(e,p[0].xValue,e.stackedValue.StartValues[0],this.chartObj),c=ej.EjSvgRender.utils.TransformToVisible(e,p[M].xValue,e.stackedValue.StartValues[M],this.chartObj),m.append("L "+E.X+" "+E.Y+"  L "+h.X+" "+h.Y+"  L "+c.X+" "+c.Y+"  L "+h.X+" "+h.Y+" z ")):m.append("L "+f+" "+_+" ")))}else A=ej.EjSvgRender.utils.TransformToVisible(e,p[M].xValue,p[M].y,this.chartObj),0==M||P?m.append("M "+A.X+" "+A.Y+" "):M==p.length-1?e.isClosed?(E=ej.EjSvgRender.utils.TransformToVisible(e,p[0].xValue,p[0].y,this.chartObj),m.append("L "+A.X+" "+A.Y+" z")):m.append("L "+A.X+" "+A.Y+" L "+f+" "+_):p[M+1].visible?m.append("L "+A.X+" "+A.Y+" "):m.append("L "+A.X+" "+A.Y+" L "+f+" "+_+" z"),P=!p[M+1]||!p[M+1].visible;e.regionAdded||"column"==e.drawType.toLowerCase()||"rangecolumn"==e.drawType.toLowerCase()||(B={X:A.X-y.width/2,Y:A.Y-y.height/2,Width:y.width,Height:y.height},ej.EjSvgRender.utils._addRegion(this.chartObj,B,e,p[M],M)),(!e.regionAdded&&"column"==e.drawType.toLowerCase()&&this.chartObj.model.enableCanvasRendering||"rangecolumn"==e.drawType.toLowerCase()&&this.chartObj.model.enableCanvasRendering)&&ej.EjSvgRender.utils._addRegion(this.chartObj,B,e,null,null)}return(e.regionAdded||"column"!=e.drawType.toLowerCase()||this.chartObj.model.enableCanvasRendering)&&("rangecolumn"!=e.drawType.toLowerCase()||this.chartObj.model.enableCanvasRendering)||ej.EjSvgRender.utils._addRegion(this.chartObj,B,e,null,null),m.toString()},_calculateVisiblePoints:function(e,t){for(var i,s,n,a,r=[],o=[],l=ej.util.isNullOrUndefined,d=!l(t)&&t.model._isPieOfPie?e.pieCollections[e.collectionIndex]:e.points,h=d.length,c=0;c<h;c++)l((a=d[c])._visibility)&&(a._visibility="visible"),a.actualIndex=!l(t)&&t.model._isPieOfPie?a.actualIndex:c,a.visible=!a.isEmpty&&a.visible,l(a.visible)&&(a.visible=!0),a.y<0&&(a.YValues[0]=Math.abs(a.YValues[0])),l(a.x)&&"string"!=e._xAxisValueType&&(a.visible=!1,a.isEmpty=!0),l(a.y)&&(a.visible=!1,a.isEmpty=!0);if((s=xe.extend(!0,{},d,s)).length=h,e.emptyPointSettings.visible){i=(n=this._calculateEmptyPoints(e,s,t)).length;for(var u=0;u<i;u++)n[u].visible?(n[u].visible="hidden"!=n[u]._visibility,o.push(n[u]),n[u].visible&&r.push(n[u])):(n[u].y=((n[u-1]?n[u-1].y:0)+(n[u+1]?n[u+1].y:0))/2,isNaN(n[u].y)&&(n[u].y=((n[u-2]?n[u-2].y:0)+(n[u+2]?n[u+2].y:0))/2),n[u].YValues[0]=n[u].y,l(n[u].x)&&"string"!=e._xAxisValueType||(n[u].gapMode=!0,r.push(n[u])))}else for(u=0;u<h;u++)o.push(s[u]),s[u].visible&&(s[u].visible="hidden"!=s[u]._visibility,s[u].visible&&r.push(s[u]));if("hidden"==e.visibility)for(c=0;c<o.length;c++)o[c].visible=!1;return{visiblePoints:e._visiblePoints=r,legendPoints:e.visiblePoints=o}},getMinMaxValue:function(e,t,i){var s,n=Math.min(e.x,t.x),a=Math.min(e.y,t.y),r=Math.max(e.x,t.x),t=Math.max(e.y,t.y);switch(i){case 0:case 360:s=t;break;case 90:s=n;break;case 180:s=a;break;case 270:s=r}return s},pieDoughnutCenter:function(e){var t=e.startAngle,i=e.endAngle;this.chartObj.model.centerCount++;var s=xe.inArray(e,this.chartObj.model._visibleSeries),n=[-630,-540,-450,-360,-270,-180,-90,0,90,180,270,360,450,540,630],a=[],r=this.chartObj.model.circleCenterX[s],o=this.chartObj.model.circleCenterY[s];if(e.startAngle<e.endAngle)for(v=0;v<n.length;v++)t<n[v]&&n[v]<i&&(a[a.length]=n[v]%360<0?n[v]%360+360:n[v]%360);else for(v=0;v<n.length;v++)n[v]<t&&i<n[v]&&(a[a.length]=n[v]%360<0?n[v]%360+360:n[v]%360);if(1==this.chartObj.model.centerCount){var l=this.chartObj.model.circularRadius[s],d=2*Math.PI*(t-90)/360,h=2*Math.PI*(i-90)/360,c={x:this.chartObj.model.circleCenterX[s],y:this.chartObj.model.circleCenterY[s]},u={x:this.chartObj.model.circleCenterX[s]+l*Math.cos(d),y:this.chartObj.model.circleCenterY[s]+l*Math.sin(d)},d={x:this.chartObj.model.circleCenterX[s]+l*Math.cos(h),y:this.chartObj.model.circleCenterY[s]+l*Math.sin(h)};switch(a.length){case 0:var h=(Math.abs(c.x-u.x)>Math.abs(c.x-d.x)?u:d).x,p=(Math.abs(c.y-u.y)>Math.abs(c.y-d.y)?u:d).y,p={x:(c.x+h)/2,y:(c.y+p)/2};this.chartObj.model.circleCenterX[s]=this.chartObj.model.circleCenterX[s]+(this.chartObj.model.circleCenterX[s]-p.x),this.chartObj.model.circleCenterY[s]=this.chartObj.model.circleCenterY[s]+(this.chartObj.model.circleCenterY[s]-p.y);break;case 1:var m=2*Math.PI*(a[0]-90)/360,g={x:this.chartObj.model.circleCenterX[s]+l*Math.cos(m),y:this.chartObj.model.circleCenterY[s]+l*Math.sin(m)};switch(a[0]){case 0:case 360:f={x:u.x,y:g.y},_={x:d.x,y:c.y};break;case 90:f={x:c.x,y:d.y},_={x:g.x,y:u.y};break;case 180:f={x:d.x,y:c.y},_={x:u.x,y:g.y};break;case 270:f={x:g.x,y:u.y},_={x:c.x,y:d.y}}p={x:(f.x+_.x)/2,y:(f.y+_.y)/2};this.chartObj.model.circleCenterX[s]=this.chartObj.model.circleCenterX[s]+(this.chartObj.model.circleCenterX[s]-p.x>=l?0:this.chartObj.model.circleCenterX[s]-p.x),this.chartObj.model.circleCenterY[s]=this.chartObj.model.circleCenterY[s]+(this.chartObj.model.circleCenterY[s]-p.y>=l?0:this.chartObj.model.circleCenterY[s]-p.y);break;case 2:var c=2*Math.PI*(a[0]-90)/360,m=2*Math.PI*(a[1]-90)/360,g={x:this.chartObj.model.circleCenterX[s]+l*Math.cos(m),y:this.chartObj.model.circleCenterY[s]+l*Math.sin(m)},c={x:this.chartObj.model.circleCenterX[s]+l*Math.cos(c),y:this.chartObj.model.circleCenterY[s]+l*Math.sin(c)},f=90==a[0]&&180==a[1]||270==a[0]&&0==a[1]?{x:c.x,y:g.y}:{x:g.x,y:c.y},_=90==a[0]||270==a[0]?{x:this.getMinMaxValue(u,d,a[0]),y:this.getMinMaxValue(u,d,a[1])}:{x:this.getMinMaxValue(u,d,a[1]),y:this.getMinMaxValue(u,d,a[0])},p={x:Math.abs(f.x-_.x)/2>=l?0:(f.x+_.x)/2,y:Math.abs(f.y-_.y)/2>=l?0:(f.y+_.y)/2};this.chartObj.model.circleCenterX[s]=this.chartObj.model.circleCenterX[s]+(0==p.x||this.chartObj.model.circleCenterX[s]-p.x>=l?0:this.chartObj.model.circleCenterX[s]-p.x),this.chartObj.model.circleCenterY[s]=this.chartObj.model.circleCenterY[s]+(0==p.y||this.chartObj.model.circleCenterY[s]-p.y>=l?0:this.chartObj.model.circleCenterY[s]-p.y)}}for(var v=0;v<e.points.length;v++)s<this.chartObj.model._visibleSeries.length&&1<this.chartObj.model.centerCount&&this.chartObj.model._visibleSeries[s+1].startAngle==t&&this.chartObj.model._visibleSeries[s+1].endAngle==i&&(this.chartObj.model.circleCenterX[s]=this.chartObj.model.circleCenterX[s+1],this.chartObj.model.circleCenterY[s]=this.chartObj.model.circleCenterY[s+1]),this.chartObj.model.startX[v]=this.chartObj.model.startX[v]-(r-this.chartObj.model.circleCenterX[s]),this.chartObj.model.startY[v]=this.chartObj.model.startY[v]-(o-this.chartObj.model.circleCenterY[s])},_drawEmptyPieOfPie:function(e){var t=-.5*Math.PI,i=Math.PI/180*360+-.5*Math.PI-1e-6,s=e.model.circleCenterX[1],n=e.model.circleCenterY[1],a=e.model.circularRadius[1],t="M "+(s+a*Math.cos(t))+" "+(n+a*Math.sin(t))+" A "+a+" "+a+" 0 1 1 "+(s+a*Math.cos(i))+" "+(n+a*Math.sin(i))+" z",i=e.model.theme.toLowerCase();return{id:e.svgObject.id+"_Series0_EmptyCircle",fill:"none","stroke-width":1.5,stroke:0<=i.indexOf("dark")||0<=i.indexOf("contrast")?" #FFFFFF":"#000000","stroke-dasharray":"",d:t,opacity:1,radius:a,start:-1.57,end:Math.PI/180*360-1.57,cx:s,cy:n}},calculatingSliceAngle:function(e,t){var i=this.chartObj||t,s=i.model,n=s.legend,a=xe.inArray(e,s._visibleSeries),r=n.position.toLowerCase(),o=s.LegendActualBounds,l=e._visiblePoints,d=l.length,h=0,c=0,u=n.border.width,p=s.border.width,m=s.margin,g=s.elementSpacing,f=0,_=s.title.subTitle.text?s.title.subTitle:"";s.arcData=[],e.rightsidePoints=[],e.leftsidePoints=[],e.labels=[],s.sumofYValues=0,s.midPoint=0;for(var v=e.type.toLowerCase(),b=e.gapWidth,x=0;x<l.length;x++)s.sumofYValues+=l[x].YValues[0];t=360!=(t=null!=e.endAngle&&"pieofpie"!=v?e.endAngle-e.startAngle:360)&&-360!=t?t%360:t,e.startAngle&&"pieofpie"!=v?(e.startAngle=e.startAngle%360,e.endAngle=e.startAngle+t,f=e.startAngle?s.sumofYValues/360*e.startAngle:0,f/=s.sumofYValues,s.itemCurrentXPos=f):e.endAngle=t,n.visible&&"custom"!=r&&("right"==r||"left"==r?h+=o.Width+2*u+g:c+=o.Height+2*u+g);u=s.title.text&&s.title.visible?s._titleLocation.size.height+s.elementSpacing+(""!=_&&_.text&&_.visible&&_.enableTrim&&("wrap"==_.textOverflow||"wrapandtrim"==_.textOverflow)?s._subTitleLocation.size.height:0):0,g=.1*Math.min(xe(i.svgObject).width(),xe(i.svgObject).height()),_=xe(i.svgObject).width()-(h+m.left+m.right+2*p)-("pieofpie"==v?b:0),p=xe(i.svgObject).height()-(c+u+m.top+m.bottom+2*p),a=i.model._isPieOfPie?e.collectionIndex:a;"pieofpie"==v&&(_<g&&(y=g-_,_=g),b=y?b-y:xe(i.svgObject).width()>=b?b:0);var y="pieofpie"==v?0==a?.25:.75:.5;s.circleCenterX[a]=_*y+(1==a&&"pieofpie"==v?b:0)+m.left+(n.visible&&"left"===r?h:0),s.circleCenterY[a]=.5*p+m.top+u+(n.visible&&"top"===r?c:0),ej.util.isNullOrUndefined(i.model.pieGapWidth)||0==i.model.pieGapWidth||(s.circleCenterX[a]=0==a?s.circleCenterX[a]+i.model.pieGapWidth/2:s.circleCenterX[a]-i.model.pieGapWidth/2),e.startAngle="pieofpie"==v?0:e.startAngle;for(var w,C,S,T,R,k=(t=e.endAngle-e.startAngle)/180,O=t/4*(Math.PI/180),D=0;D<d;D++)((R=e._visiblePoints[D]).visible||R.gapMode)&&(w="pieofpie"==v?R.actualIndex:D,0==D&&0==a&&"pieofpie"==v?(S=2*Math.PI*f,C=k*Math.PI*(R.YValues[0]/s.sumofYValues)+S,T=((C=isNaN(C)?S:C)+S)/2,R.start=R.startAngle=O-T,R.end=R.endAngle=O+T,R.midAngle=O):(R.startAngle=0==D?2*Math.PI*f:"pieofpie"==v?e.pieCollections[a][D-1].endAngle:C,C=R.endAngle=k*Math.PI*(R.YValues[0]/s.sumofYValues)+R.startAngle,C=R.endAngle=isNaN(C)?R.startAngle:C,R.start=R.startAngle,R.end=R.endAngle,R.midAngle=(R.endAngle+R.startAngle)/2),R.pointIndex=w,S=-.5*Math.PI,R.radian=R.midAngle%(2*Math.PI),"outsideextended"==e.labelPosition.toLowerCase()&&"pieofpie"!=v&&(R.radian<Math.PI?e.rightsidePoints:e.leftsidePoints).push(R),f+=R.YValues[0]/s.sumofYValues,T=R.midAngle+S,R.actualIndex!=e.explodeIndex&&!e.explodeAll||i.vmlRendering?(s.startX[w]=s.circleCenterX[a],s.startY[w]=s.circleCenterY[a]):(s.startX[w]=s.circleCenterX[a]+Math.cos(T)*e.explodeOffset,s.startY[w]=s.circleCenterY[a]+Math.sin(T)*e.explodeOffset));if("outsideextended"==e.labelPosition.toLowerCase()&&(e.rightsidePoints=ej.DataManager(e.rightsidePoints,ej.Query().sortBy("radian")).executeLocal(),e.leftsidePoints=ej.DataManager(e.leftsidePoints,ej.Query().sortBy("radian")).executeLocal()),e.marker.dataLabel.template)if("outsideextended"==e.labelPosition.toLowerCase()){for(var I=0;I<e.rightsidePoints.length;I++)ej.EjSvgRender.utils._getSeriesTemplateSize(e.rightsidePoints[I],e.rightsidePoints[I].actualIndex,e,!1,i);for(var j=0;j<e.leftsidePoints.length;j++)ej.EjSvgRender.utils._getSeriesTemplateSize(e.leftsidePoints[j],e.leftsidePoints[j].actualIndex,e,!0,i)}else for(var x=0;x<e._visiblePoints.length;x++)ej.EjSvgRender.utils._getSeriesTemplateSize(e._visiblePoints[x],e._visiblePoints[x].actualIndex,e,!0,i);else ej.EjSvgRender.utils._getSeriesMaxLabel(e);return e.finalSize={width:_,height:p},e.finalSize},_drawHiloPath:function(e,t,i,s,n,a){var r,o=xe.inArray(e,this.chartObj.model._visibleSeries),i={name:e.type,id:this.chartObj.svgObject.id+"_Series"+o+"_Point"+n,fill:"none","stroke-dasharray":e.dashArray,"stroke-width":t.borderWidth,stroke:i,"stroke-linecap":e.lineCap,"stroke-linejoin":e.lineJoin,opacity:e.opacity,d:s};this.chartObj.svgRenderer.drawPath(i,this.gSeriesGroupEle);var s=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,this.chartObj.model.requireInvertedAxes),i=Math.min(a.point2.X,a.point1.X)+s.x-t.borderWidth,s=Math.min(a.point2.Y,a.point1.Y)+s.y,t=a.point1.Y!=a.point2.Y?(r=t.borderWidth+t.borderWidth/2,Math.abs(a.point1.Y-a.point2.Y)):(r=Math.abs(a.point2.X-a.point1.X),t.borderWidth+t.borderWidth/2),t={X:i,Y:s,Width:r,Height:t};ej.EjSvgRender.utils._addRegion(this.chartObj,t,e,null,n)},isIntersec:function(e,t){return!(t.Bottom<e.Top||t.Right<e.Left||t.Top>e.Bottom||t.Left>e.Right)},IntersectWith:function(e,t,i,s,n,a){var r;if((ej.util.isNullOrUndefined(e.model.rightsidebounds[n])||ej.util.isNullOrUndefined(e.model.leftsidebounds[n]))&&(e.model.leftsidebounds[n]=[],e.model.rightsidebounds[n]=[],e.model.leftsidebounds[n].points=[],e.model.rightsidebounds[n].points=[]),"outsideExtended"==s){for(var o=n;o<e.model.bounds.length;o++)if("outsideextended"==e.model._visibleSeries[o].labelPosition.toLowerCase()){if(!ej.util.isNullOrUndefined(e.model.bounds[o].points.left)&&0<e.model.bounds[o].points.left.length)for(var l=(d=e.model.bounds[o].points.left.length)-1;0<=l&&!ej.util.isNullOrUndefined(e.model.bounds[o].points.left[l]);l--)e.model.leftsidebounds[o].points[l]=e.model.bounds[o].points.left[l];if(!ej.util.isNullOrUndefined(e.model.bounds[o].points.right)&&0<e.model.bounds[o].points.right.length)for(var d=e.model.bounds[o].points.right.length,h=0;h<d&&!ej.util.isNullOrUndefined(e.model.bounds[o].points.right[h]);h++)e.model.rightsidebounds[o].points[h]=e.model.bounds[o].points.right[h]}}else if(0<e.model.bounds[n].points.length||0<=n)for(o=n;o<e.model.bounds.length&&!ej.util.isNullOrUndefined(e.model.bounds[o]);o++)if("outsideextended"!=e.model._visibleSeries[o].labelPosition.toLowerCase())for(d=e.model.bounds[o].points.length,l=0;l<d&&!ej.util.isNullOrUndefined(e.model.bounds[o].points[l]);l++)e.model.bounds[o].points[l].X<e.model.circleCenterX[n]?-1==xe.inArray(e.model.bounds[o].points[l],e.model.leftsidebounds[o].points)&&(e.model.leftsidebounds[o].points[l]=e.model.bounds[o].points[l]):-1==xe.inArray(e.model.bounds[o].points[l],e.model.rightsidebounds[o].points)&&(e.model.rightsidebounds[o].points[l]=e.model.bounds[o].points[l]);for(o=n;o<e.model.bounds.length&&!ej.util.isNullOrUndefined(e.model.bounds[o]);o++)if(0<e.model.leftsidebounds[o].points.length&&0<(r=e.model.leftsidebounds[o].points).length)for(l=r.length-1;0<=l;l--){var c=r[l];if(!ej.util.isNullOrUndefined(c)||c==i)if(c.SeriesIndex==i.SeriesIndex&&c.PointIndex==i.PointIndex){if("outside"!=t.smartLabelPosition)break}else{if(this.isIntersec(c,i))return!0;i.X<e.model.circleCenterX[n]&&c.X<e.model.circleCenterX[n]&&"none"!=e.model.series[n].marker.dataLabel.shape&&(u=Math.abs(c.Y-i.Y),a&&u<=a.height&&c.Bottom>i.Top&&c.Left<i.X&&(i.overlap=!0))}}for(o=n;o<e.model.bounds.length&&!ej.util.isNullOrUndefined(e.model.bounds[o]);o++)if(0<(r=e.model.rightsidebounds[o].points).length)for(l=r.length-1;0<=l;l--){var u,c=r[l];if(!ej.util.isNullOrUndefined(c)||c==i)if(c.SeriesIndex==i.SeriesIndex&&c.PointIndex==i.PointIndex){if("outside"!=t.smartLabelPosition)break}else{if(this.isIntersec(c,i))return!0;i.X>e.model.circleCenterX[n]&&c.X>e.model.circleCenterX[n]&&"none"!=e.model.series[n].marker.dataLabel.shape&&(u=Math.abs(c.Y-i.Y),a&&u<=a.height&&c.Bottom>i.Top&&c.X+(c.Right-c.Left)>i.X&&(i.overlap=!0))}}return!1},_calculateArcData:function(e,t,i,s,n,a){var r,o,n=e.model._isPieOfPie?a:n,l=(s._visiblePoints,i.actualIndex),d=e,h=-.5*Math.PI,c="doughnut"==s.type.toLowerCase()&&1==s._visiblePoints.length&&360==Math.abs(s.endAngle-s.startAngle)&&s.startAngle%90!=0?(r=parseFloat((i.startAngle+h).toFixed(3)),parseFloat((i.endAngle+h).toFixed(3))-1e-6):(r=i.startAngle+h,i.endAngle+h-1e-6),u=s.endAngle-s.startAngle,p=(Math.PI,0),m=(r+c)/2;ej.util.isNullOrUndefined(i.currentMidAngle)&&(i.currentMidAngle=(r+c)/2);var g,f,_=0<u?1:0,p=_?c-r<Math.PI?0:1:c-r>-1*Math.PI?0:1,v=d.model.circularRadius[n],b=d.model.innerRadius[n],a=l!=s.explodeIndex&&!s.explodeAll||d.vmlRendering?(o=d.model.circleCenterX[n],d.model.circleCenterY[n]):(o=d.model.circleCenterX[n]+Math.cos(m)*s.explodeOffset,d.model.circleCenterY[n]+Math.sin(m)*s.explodeOffset),e=o+v*Math.cos(r),h=a+v*Math.sin(r),u=o+v*Math.cos(c),l=a+v*Math.sin(c);return{Direction:"doughnut"==s.type.toLowerCase()?(d=o+b*Math.cos(r),n=a+b*Math.sin(r),m=o+b*Math.cos(c),s=a+b*Math.sin(c),c=_?0:1,r<0&&6==Math.round(i.endAngle-i.startAngle)&&(m-=.01,u-=.01),"M "+e+" "+h+" A "+v+" "+v+" 0 "+p+" "+_+" "+u+" "+l+" L "+m+" "+s+" A "+b+" "+b+" 1 "+p+" "+c+" "+d+" "+n+" z"):(i.endAngle-i.startAngle).toFixed(4)==(2*Math.PI).toFixed(4)?(g=o,f=a,"M "+e+" "+h+" A "+v+" "+v+" 0 "+p+" "+_+" "+u+" "+l):"M "+e+" "+h+" A "+v+" "+v+" 0 "+p+" "+_+" "+u+" "+l+" L "+o+" "+a+" z",centerX:g,centerY:f}},getXCordinate:function(e,t,i){return e+t*Math.cos(i)},getYCordinate:function(e,t,i){return e+t*Math.sin(i)},getDoubleRange:function(e,t){var i,t=t<e?(i=t,e):(i=e,t);return{Start:i,End:t,Delta:t-i,Median:(i+t)/2,IsEmpty:isNaN(i)||isNaN(t)}},isDependentSeries:function(e){var t=e.type.toLowerCase(),i=this.chartObj.model.requireInvertedAxes;return!i||i&&e.isTransposed?-1!=t.indexOf("bar")&&!e._isTransposed||-1!=t.indexOf("column")||-1!=t.indexOf("waterfall")||-1!=t.indexOf("hilo")||-1!=t.indexOf("candle")||-1!=t.indexOf("boxandwhisker"):-1!=t.indexOf("bar")},getPointXYOrgin:function(e,t,i,s){var n,s=s.model.requireInvertedAxes;return i.isTransposed&&s||i._isTransposed?(n=(1-ej.EjSvgRender.utils._valueToCoefficient(i.xAxis,e))*i.xAxis.height,{X:ej.EjSvgRender.utils._valueToCoefficient(i.yAxis,t)*i.yAxis.width,Y:n}):{X:n=ej.EjSvgRender.utils._valueToCoefficient(i.xAxis,e)*i.xAxis.width,Y:(1-ej.EjSvgRender.utils._valueToCoefficient(i.yAxis,t))*i.yAxis.height}},getRectangle:function(e,t,i,s,n,a){t=this.getPointXYOrgin(e,t,n,a),a=this.getPointXYOrgin(i,s,n,a);return ej.EjSvgRender.utils._correctRect(t.X,t.Y,a.X,a.Y)},calculateMean:function(e,t,i){var s,n,a,r,o,l=0,d=0,h=[],c=0;1<e.length&&e.sort(function(e,t){return e-t});for(var u=0;u<e.length;u++)l+=e[u];d=l/e.length,d=parseInt(d.toFixed(2)),h[c]=d,c++,"normal"==t.boxPlotMode.toLowerCase()?(o=e.length%2==0?e.slice(0,e.length/2):e.slice(0,Math.floor(e.length/2)),a=Math.floor(o.length/2),n=o.length%2==0?(o[a-1]+o[a])/2:o[a],n=e.length<=3?e[0]:n,h[c]=n,c++,s=e.length%2==0?e.slice(e.length/2,e.length):e.slice(Math.ceil(e.length/2),e.length),r=Math.floor(s.length/2),a=s.length%2==0?(s[r-1]+s[r])/2:s[r],a=e.length<=3?e[e.length-1]:a,h[c]=a,c++):"exclusive"!=t.boxPlotMode.toLowerCase()&&"inclusive"!=t.boxPlotMode.toLowerCase()||(o=(1-(r=(r="exclusive"==t.boxPlotMode.toLowerCase()?(e.length+1)/4:(e.length-1)/4)-(p=Math.floor(r))))*e[p="exclusive"==t.boxPlotMode.toLowerCase()?p-1:p]+r*e[p+1],n=o=e.length<=3?e[0]:o,h[c]=n,c++,s=(1-(o=(o="exclusive"==t.boxPlotMode.toLowerCase()?3*(e.length+1)/4:3*(e.length-1)/4)-(p=Math.floor(o))))*e[p="exclusive"==t.boxPlotMode.toLowerCase()?p-1:p]+o*e[p+1],a=s=e.length<=3?e[e.length-1]:s,h[c]=a,c++),p=Math.floor(e.length/2),s=e.length%2==0?(e[p-1]+e[p])/2:e[p],h[c]=s,c++;for(var p=a-n,m=a+1.5*p,g=n-1.5*p,f=e[e.length-1],_=e[0],v=[],b=0,x=0,y=0;y<e.length;y++)m<e[y]&&(b++,v[x]=e[y],x++,f=e[y-b]),g>e[y]&&(v[x]=e[y],x++,_=e[y+1]);h[c]=_,h[++c]=f,c++;c={Minimum:_,LowerQuartile:n,midvalue:s,UpperQuartile:a,Maximum:f,boxAverage:d,outliers:v};return t._visiblePoints[i].boxPlotValues=c,t._visiblePoints[i].boxPlotValues.quartileValues=h,{Minimum:_,LowerQuartile:n,midvalue:s,UpperQuartile:a,Maximum:f,boxAverage:d,outliers:v}},calculateBoxAndWhiskerPath:function(e,t,i,s,n,a,r){n._visiblePoints[r].boxPlotLocation=[],n._visiblePoints[r].dataLabelLocation=[];for(var o,l,d,h,c,u=0,p=this,m=n._isTransposed,g=n.outlierSettings.shape.toLowerCase(),f=(this.chartObj.model.requireInvertedAxes,0);f<n._visiblePoints[r].boxPlotValues.quartileValues.length;f++)l={xValue:a.xValue,YValues:n._visiblePoints[r].boxPlotValues.quartileValues[f]},d=ej.EjSvgRender.utils._getPoint(l,n),n._visiblePoints[r].boxPlotLocation[u]=d,n._visiblePoints[r].boxPlotLocation[u].xValue=l.xValue,n._visiblePoints[r].boxPlotLocation[u].YValues=l.YValues,n._visiblePoints[r].dataLabelLocation[u]=m?{X:d.X,Y:t.Y+t.Height/2+5}:{X:t.X+t.Width/2,Y:d.Y},u++;for(var _,v=0;v<s.outliers.length&&"none"!=g;v++)h={xValue:a.xValue,YValues:s.outliers[v]},c=ej.EjSvgRender.utils._getPoint(h,n),n._visiblePoints[r].boxPlotLocation[u]=c,n._visiblePoints[r].boxPlotLocation[u].xValue=h.xValue,n._visiblePoints[r].boxPlotLocation[u].YValues=h.YValues,n._visiblePoints[r].boxPlotLocation[u].outlier=!0,m?c.Y=t.Y+t.Height/2:c.X=t.X+t.Width/2,n._visiblePoints[r].dataLabelLocation[u]=m?{X:c.X-n.outlierSettings.size.height,Y:t.Y+t.Height/2+n.outlierSettings.size.width,outlier:!0}:{X:t.X+t.Width/2,Y:c.Y,outlier:!0},u++;return o=n._visiblePoints[r].boxPlotLocation,{upperWhisker:n._isTransposed?(_="M "+(p.chartObj.canvasX+o[4].X)+" "+(p.chartObj.canvasY+t.Y)+" L "+(o[4].X+p.chartObj.canvasX)+" "+(t.Height+t.Y+p.chartObj.canvasY)+" M "+(p.chartObj.canvasX+o[4].X)+" "+(p.chartObj.canvasY+t.Y+t.Height/2)+" L "+(p.chartObj.canvasX+o[1].X)+" "+(p.chartObj.canvasY+t.Y+t.Height/2)+"  z","M "+(p.chartObj.canvasX+o[5].X)+" "+(p.chartObj.canvasY+t.Y)+" L "+(p.chartObj.canvasX+o[5].X)+" "+(t.Height+t.Y+p.chartObj.canvasY)+" M "+(p.chartObj.canvasX+o[5].X)+" "+(p.chartObj.canvasY+t.Y+t.Height/2)+" L "+(p.chartObj.canvasX+o[2].X)+" "+(p.chartObj.canvasY+t.Y+t.Height/2)+"  z"):(_="M "+(p.chartObj.canvasX+t.X)+" "+(p.chartObj.canvasY+o[4].Y)+" L "+(p.chartObj.canvasX+t.X+t.Width)+" "+(p.chartObj.canvasY+o[4].Y)+" M "+(p.chartObj.canvasX+t.X+t.Width/2)+" "+(p.chartObj.canvasY+o[4].Y)+" L "+(p.chartObj.canvasX+t.X+t.Width/2)+" "+(p.chartObj.canvasY+o[1].Y)+"  z","M "+(p.chartObj.canvasX+t.X)+" "+(p.chartObj.canvasY+o[5].Y)+" L "+(p.chartObj.canvasX+t.X+t.Width)+" "+(p.chartObj.canvasY+o[5].Y)+" M "+(p.chartObj.canvasX+t.X+t.Width/2)+" "+(p.chartObj.canvasY+o[5].Y)+" L "+(p.chartObj.canvasX+t.X+t.Width/2)+" "+(p.chartObj.canvasY+o[2].Y)+"  z"),lowerWhisker:_,mean:n._isTransposed?"M "+(p.chartObj.canvasX+o[0].X-5)+" "+(p.chartObj.canvasY+t.Y+t.Height/2-5)+" L "+(p.chartObj.canvasX+o[0].X+5)+" "+(p.chartObj.canvasY+t.Y+t.Height/2+5)+" M "+(p.chartObj.canvasX+o[0].X+5)+" "+(p.chartObj.canvasY+t.Y+t.Height/2-5)+" L "+(p.chartObj.canvasX+o[0].X-5)+" "+(p.chartObj.canvasY+t.Y+t.Height/2+5)+" z":"M "+(p.chartObj.canvasX+t.X+t.Width/2-5)+" "+(p.chartObj.canvasY+o[0].Y-5)+" L "+(p.chartObj.canvasX+t.X+t.Width/2+5)+" "+(p.chartObj.canvasY+o[0].Y+5)+" M "+(p.chartObj.canvasX+t.X+t.Width/2-5)+" "+(p.chartObj.canvasY+o[0].Y+5)+" L "+(p.chartObj.canvasX+t.X+t.Width/2+5)+" "+(p.chartObj.canvasY+o[0].Y-5)+" z"}},calculateSides:function(e,t){return{x1:e.xValue+t.Start,x2:e.xValue+t.End}},_getSeriesPosition:function(e){if(ej.util.isNullOrUndefined(e.position)||this.chartObj.model.legendCollapsed){for(var t,i,s=0,n=[],a=0;a<this.chartObj.model._visibleSeries.length;a++)("visible"===(r=this.chartObj.model._visibleSeries[a]).visibility.toLowerCase()&&"column"==r.drawType.toLowerCase()||"rangecolumn"==r.drawType.toLowerCase())&&n.push(r);for(var r,o=0;o<n.length;o++)(r=n[o])._xAxisName==this.chartObj.model._axes[0].name&&r._yAxisName==this.chartObj.model._axes[1].name&&(r.isStacking?(t||(i=s,s++,t=!0),r.position=i):(r.position=s,s++));for(var l=0;l<n.length;l++)n[l].all=s}return{all:e.all,pos:e.position}},getSideBySidePositions:function(e,r){var o,l,d,t,h=this,c=[],u=h.chartObj.model,p=l=d=0,m=u._visibleSeries.length;return!ej.util.isNullOrUndefined(e.position)&&!u.legendCollapsed&&r.spacingCalculated||(t=u.requireInvertedAxes?u.vAxes:u.hAxes,u.requireInvertedAxes?u.hAxes:u.vAxes,xe.each(t,function(e,t){var i=[];for(o=[],l=0;l<m;l++){var s=u._visibleSeries[l];"visible"===s.visibility.toLowerCase()&&h.isDependentSeries(s)&&t.name==s._xAxisName&&i.push(s)}var n=i.length;for(l=0;l<n;l++){e=u.requireInvertedAxes?i[l].yAxis.columnIndex:i[l].yAxis.rowIndex;o[e]||(o[e]=[],i[l].yAxis.position=null),o[e].push(i[l])}for(p=0;p<o.length;p++)if(!ej.util.isNullOrUndefined(o[p]))for(o[p].all=0,l=0;l<o[p].length;l++)-1!=(s=o[p][l]).type.toLowerCase().indexOf("stacking")?s.stackingGroup?ej.util.isNullOrUndefined(c[s.stackingGroup])?(o[p].all++,s.position=o[p].all,c[s.stackingGroup]=o[p].all):s.position=c[s.stackingGroup]:ej.util.isNullOrUndefined(s.yAxis.position)||u.legendCollapsed?(o[p].all++,s.position=o[p].all,s.yAxis.position=o[p].all,u.legendCollapsed=!1):s.position=s.yAxis.position:(o[p].all++,s.position=o[p].all);var a=0<n&&i[0].columnWidth;for(d=0;d<n;d++){e=u.requireInvertedAxes?i[d].yAxis.columnIndex:i[d].yAxis.rowIndex;i[d].all=o[e].all,r.needSpace=r.needSpace||a!=i[d].columnWidth}}),r.needSpace&&this.chartObj.model._sideBySideSeriesPlacement&&this._getColumnSpacing(o,r),r.spacingCalculated=!0),{all:e.all,pos:e.position}},getSideBySideInfo:function(e,t){ej.util.isNullOrUndefined(e.xAxis.m_minPointsDelta)&&((this.chartObj.currentSeries=e).xAxis.m_minPointsDelta=ej.EjSvgRender.utils.getMinPointsDelta(e.xAxis,this.chartObj));var i=e.columnSpacing,s=e.columnWidth,n=this.getSideBySidePositions(e,t),a=n.pos,r=n.all,o=t.needSpace&&this.chartObj.model._sideBySideSeriesPlacement,n=e.xAxis.m_minPointsDelta*(o?1:s),a=o?t[e.name||e._name].loc:(a-1)/r-.5,r=this.getDoubleRange(a,a+(o?s:1)/r);return this.chartObj.model._sideBySideSeriesPlacement?(r.IsEmpty||(i=i*(r=this.getDoubleRange(r.Start*n,r.End*n)).Delta,r=this.getDoubleRange(r.Start+i/2,r.End-i/2)),r):this.getDoubleRange(-n/2,n/2)},_getColumnSpacing:function(e,t){for(var i,s,n=0,a=0,r=e.length;n<r;n++){for(var o,l=0,d={},h=e[n].length;a<h;a++)-1==(i=e[n][a]).type.toLowerCase().indexOf("stacking")?l+=i.columnWidth/i.all:d[s=i.stackingGroup]={width:Math.max(i.columnWidth,d[s]?d[s].width:0),all:i.all};for(o in d)l+=d[o].width/d[o].all;var c=(1-l)/2-.5,a=0;for(h=e[n].length;a<h;a++)-1==(i=e[n][a]).type.toLowerCase().indexOf("stacking")?(t[i.name||(i._name="series"+n+a)]={loc:c},c+=i.columnWidth/i.all):null==d[s=i.stackingGroup].loc?(t[i.name||(i._name="series"+n+a)]={loc:c+(d[s].width-i.columnWidth)/2/i.all},d[s].loc=t[i.name||i._name].loc+i.columnWidth/2/i.all,c+=d[s].width/i.all):t[i.name||i._name]={loc:d[s].loc-i.columnWidth/2/i.all}}},_getPoint:function(e,t,i,s,n,a,r){var o=e.xValue,e=e.YValues[0],o=(o-s.min)/s.delta,e=(e-a.min)/a.delta;return{X:(n?1-o:o)*t,Y:(1-(r?1-e:e))*i}},_getLogPoint:function(e,t,i,s,n,a,r,o){var l=e.xValue,e=e.YValues[0],l="logarithmic"==o.xAxis._valueType.toLowerCase()?(ej.EjSvgRender.utils._logBase(0==l?1:l,o.xAxis.logBase)-s.min)/s.delta:(l-s.min)/s.delta,e="logarithmic"==o.yAxis._valueType.toLowerCase()?(ej.EjSvgRender.utils._logBase(0==e?1:e,o.yAxis.logBase)-a.min)/a.delta:(e-a.min)/a.delta;return{X:(n?1-l:l)*t,Y:(1-(r?1-e:e))*i}},_getTransposedPoint:function(e,t,i,s,n,a,r){var o=e.xValue,e=e.YValues[0],o=(o-s.min)/s.delta,e=(e-a.min)/a.delta;return{X:(r?1-e:e)*i,Y:(1-(n?1-o:o))*t}},_getTransposedLogPoint:function(e,t,i,s,n,a,r,o){var l=e.xValue,e=e.YValues[0],l="logarithmic"==o.xAxis._valueType.toLowerCase()?(ej.EjSvgRender.utils._logBase(0==l?1:l,o.xAxis.logBase)-s.min)/s.delta:(l-s.min)/s.delta,e="logarithmic"==o.yAxis._valueType.toLowerCase()?(ej.EjSvgRender.utils._logBase(0==e?1:e,o.yAxis.logBase)-a.min)/a.delta:(e-a.min)/a.delta;return{X:(r?1-e:e)*i,Y:(1-(n?1-l:l))*t}},draw:function(e,t,i){var s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v=ej.EjSvgRender.utils._getStringBuilder(),b=e.canvasX,x=e.canvasY,y=e.model.requireInvertedAxes,w=0,C=e.model.enableCanvasRendering,S=e,T="logarithmic"==t.xAxis._valueType.toLowerCase()||"logarithmic"==t.yAxis._valueType.toLowerCase(),R=t._isTransposed,k=R?t.xAxis.height:t.xAxis.width,O=R?t.yAxis.width:t.yAxis.height,D=t.xAxis.visibleRange,I=t.yAxis.visibleRange,j=t.xAxis.isInversed,L=t.yAxis.isInversed,A=this["_get"+(R?"Transposed":"")+(T?"Log":"")+"Point"];if(this.chartObj=e,T=this.setLineSeriesStyle(t),t._animationType="path",t.sorting&&(t.points=ej.DataManager(t.points,ej.Query().sortBy("xValue")).executeLocal()),t._visiblePoints=void 0,n={min:0,max:(s=this.improveChartPerformance(t)).length},t.pointFill)for(h=xe.inArray(t,this.chartObj.model._visibleSeries),p=s.length-1,_=ej.EjSvgRender.utils._getTransform(t.xAxis,t.yAxis,y),b=S.canvasX,x=S.canvasY,S={id:this.chartObj.svgObject.id+"_SeriesGroup_"+h,transform:"translate("+_.x+","+_.y+")"},this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(S),M=0;M<p;M++)f=s[M],c=s[M+1],m=m||this.chartObj.setStyle(this,t,h,M,void 0,s),c.visible&&f.visible&&(l=ej.EjSvgRender.utils._getPoint(f,t),d=ej.EjSvgRender.utils._getPoint(c,t),v.append("M "+(l.X+b)+" "+(l.Y+x)+" L "+(d.X+b)+" "+(d.Y+x)+" ")),(g=this.chartObj.setStyle(this,t,h,M+1,void 0,s)).interior==m.interior&&M!=p-1&&c.visible||(f={name:t.type,id:this.chartObj.svgObject.id+"_Series"+h+"_Point"+w++,"stroke-dasharray":m.dashArray,fill:"none","stroke-width":m.width,"stroke-linecap":t.lineCap,"stroke-linejoin":t.lineJoin,stroke:m.interior,opacity:m.opacity,d:v.toString()},this.chartObj.svgRenderer.drawPath(f,this.gSeriesGroupEle),v=ej.EjSvgRender.utils._getStringBuilder(),m=g);else{C&&((u=e.svgRenderer.ctx).save(),u.beginPath(),"cartesianaxes"==e.model.AreaType&&(_="translate("+(_=ej.EjSvgRender.utils._getTransform(t.xAxis,t.yAxis,y)).x+","+_.y+")"),g={"stroke-dasharray":t.dashArray,"stroke-width":t.width,stroke:T.SeriesInterior,"stroke-linecap":t.lineCap,"stroke-linejoin":t.lineJoin,opacity:t.opacity},e.svgRenderer._setLinePathStyle(g,_)),a=null,o=-1;for(var E,P="M ",M=n.min;M<n.max;M++)!1!==(r=s[M]).visible?(null!=a&&s.length>o+1&&(c=s[o+1],l=A(a,k,O,D,j,I,L,t),d=A(c,k,O,D,j,I,L,t),C?(this.chartObj.chartExtensions?(points=this.chartObj.chartExtensions.chartRenderOptimizer.getPointsInCanvasBounds(l,d,this.chartObj.canvasWidth,this.chartObj.canvasHeight),l=points.point1,d=points.point2):E&&(u.lineTo(d.X+b,d.Y+x),E=null),u.moveTo(l.X+b,l.Y+x),u.lineTo(d.X+b,d.Y+x),E=d):(v.append(P+(l.X+b)+" "+(l.Y+x)+" L "+(d.X+b)+" "+(d.Y+x)+" "),P="L ")),a=r,o=M):a=null;C?(u.stroke(),u.restore()):this._drawLinePath(t,T,v.toString())}this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle),0<t._dataLabels||t.marker&&1==t.marker.dataLabel.visible&&t.enableSmartLabels?t._visiblePoints=this._isVisiblePoints(t):t._visiblePoints=s},doCircularAnimation:function(a,r,e,o,t){var l,d,h,c,u,i,p=r.type.toLowerCase();"pie"!=p&&"doughnut"!=p&&"pieofpie"!=p||(l=this,c=r.points[0]?r.points[0].startAngle:0,u=a.model._isPieOfPie?r.collectionIndex:0,i=r.emptyPointSettings.visible?r.visiblePoints:r._visiblePoints,t=ej.util.isNullOrUndefined(t)?1200:t,xe.each(i,function(i,s){d=s.startAngle,h=s.endAngle,a.model._radius=a.model._isPieOfPie?a.model.circularRadius[u]:a.model.circularRadius[o],s.startAngle=0,s.endAngle=s.startAngle,a.model.Radius=0;var n=xe(a.gSeriesEle).find("#"+a.svgObject.id+"_SeriesGroup_"+o)[u].childNodes[i];"pie"==p||"pieofpie"==p?xe(n).each(function(){this.StartAngle=c,this.EndAngle=c}).animate({StartAngle:d,EndAngle:h,pieRadius:a.model._radius},{duration:t,queue:!1,step:function(e,t){"StartAngle"===t.prop.toString()?(s.startAngle=e,s.endAngle=s.startAngle):"pieRadius"==t.prop.toString()&&a.model?a.model.Radius=e:s.endAngle=e,a.model&&(e=l._calculateArcData(a,i,s,r,o,u),a.svgRenderer._setAttr(xe(n),{d:e.Direction}),a.model.Radius=a.model._radius)},complete:function(){l.circularAnimationComplete(i,a,r)}}):xe(n).each(function(){this.StartAngle=c,this.EndAngle=c}).animate({StartAngle:d,EndAngle:h},{duration:t,queue:!1,step:function(e,t){"StartAngle"===t.prop.toString()?(s.startAngle=e,s.endAngle=s.startAngle):s.endAngle=e,a.model&&(e=l._calculateArcData(a,i,s,r,o),a.svgRenderer._setAttr(xe(n),{d:e.Direction}),a.model.Radius=a.model._radius)},complete:function(){l.circularAnimationComplete(i,a,r)}})}))},circularAnimationComplete:function(e,t,i){if(!ej.util.isNullOrUndefined(t.model)){var s,n,a=xe.inArray(i,t.model._visibleSeries);if(t.gSeriesTextEle[a]&&t.svgRenderer._setAttr(xe(t.gSeriesEle).find("#"+t.gSeriesTextEle[a].id),{visibility:"visible"}),t.gSymbolGroupEle[a]&&t.svgRenderer._setAttr(xe(t.gSeriesEle).find("#"+t.gSymbolGroupEle[a].id),{visibility:"visible"}),t.gDataLabelEle[a]&&t.svgRenderer._setAttr(xe(t.gSeriesEle).find("#"+t.gDataLabelEle[a].id),{visibility:"visible"}),i.marker.dataLabel.template)for(n=xe(t.element[0].childNodes[0].childNodes),s=0;s<n.length;s++)xe(n[s]).css("display","block");t.gConnectorEle[a]&&t.svgRenderer._setAttr(xe(t.gSeriesEle).find("#"+t.gConnectorEle[a].id),{visibility:"visible"}),t.gConnectorLinesGroup&&t.svgRenderer._setAttr(xe(t.gSeriesEle).find("#"+t.gConnectorLinesGroup.id),{visibility:"visible"}),t.model.AnimationComplete=!0,i.AnimationComplete=!0,(a=xe.extend({},ej.EjSvgRender.commonChartEventArgs)).data={series:i},t._trigger("animationComplete",a)}},_doLineSymbol:function(e,t,i,s,n,a,r){var o,l,d,h,c;"defs"!=e.tagName&&(t=parseInt(i*t),o=null==this.chartObj?a:this.chartObj,n=ej.EjSvgRender.utils._getBoundingClientRect(e,o,s,n),l=n.x+n.width/2,d=n.y+n.height/2,h=xe(e),c=o.svgRenderer._getAttrVal(h,"transform"),c=ej.util.isNullOrUndefined(c)?" ":c,o.svgRenderer._setAttr(h,{transform:"scale(0)"}),h.delay(t).animate({scales:1},{duration:r,step:function(e){o.svgRenderer._setAttr(h,{transform:"translate("+l+" "+d+") scale("+e+") translate("+-l+" "+-d+")"+c})}}))},animateSymbol:function(e,t,i,s,n,a){var r,o,l,d,h;"defs"!=e.tagName&&(r=null==this.chartObj?n:this.chartObj,s=ej.EjSvgRender.utils._getBoundingClientRect(e,r,i,s),o=s.x+s.width/2,l=s.y+s.height/2,d=xe(e),h=r.svgRenderer._getAttrVal(d,"transform"),h=ej.util.isNullOrUndefined(h)?" ":h,d.delay(t).each(function(){this.scale=.5}).animate({scales:1},{duration:a,step:function(e){r.svgRenderer._setAttr(d,{transform:"translate("+o+" "+l+") scale("+e+") translate("+-o+" "+-l+")"+h})}}))},animateCylinder:function(t,e,i,s,n){var a;e.isTransposed&&i?(i=s[0].width.animVal.value,-1<t.model.series[0].type.indexOf("bar")?(t.svgRenderer._setAttr(xe(s),{x:i}),xe(s).animate({x:0},n,function(){})):(a=s[0].height.animVal.value,t.svgRenderer._setAttr(xe(s),{y:0}),xe(s).animate({y:parseFloat(t.svgRenderer._getAttrVal(s,"y")),height:parseFloat(t.svgRenderer._getAttrVal(s,"height"))},{duration:n,step:function(e){t.svgRenderer._setAttr(xe(s),{y:a-e}),t.svgRenderer._setAttr(xe(s),{height:e})}}))):-1<t.model.series[0].type.indexOf("bar")?xe(s).animate({width:parseFloat(t.svgRenderer._getAttrVal(s,"width"))},{duration:n,step:function(e){t.svgRenderer._setAttr(xe(s),{width:e})}}):(a=s[0].height.animVal.value,t.svgRenderer._setAttr(xe(s),{y:a}),xe(s).animate({y:0},n,function(){}))},animateRect:function(e,t,i,s,n){var a,r,o,l,d,h,c=t.animationType.toLowerCase(),u=ej.EjSvgRender.utils._getBoundingClientRect("smooth"==c?e[0]:e,s,t,i),p=xe(e),m=t.isTransposed&&i||i?(d="smooth"==c?parseFloat(s.svgRenderer._getAttrVal(e,"width")):0,h=!0,r="negative"===s.svgRenderer._getAttrVal(p,"plot")?(a=u.x+u.width,u.y+u.height):(a=u.x,u.y),o=") scale(",",1) translate("):(d="smooth"==c?parseFloat(s.svgRenderer._getAttrVal(e,"height")):0,h=!1,r="negative"===s.svgRenderer._getAttrVal(p,"plot")?(a=u.x,u.y):(a=u.x+u.width,u.y+u.height),o=") scale(1,",") translate("),g=Math.abs(ej.EjSvgRender.utils._getPointXY(t.yAxis.visibleRange.min<0?0:t.yAxis.visibleRange.min,t.yAxis.visibleRange,t.yAxis.isInversed)*(h?t.yAxis.width:t.yAxis.height));p.animate({scales:"smooth"==c?d:1},{duration:n,complete:function(){"waterfall"==t.type.toLowerCase()&&xe("#"+s.svgObject.id+"_SeriesGroup_waterfallLine_"+t.index).attr("visibility","visible")},step:function(e){l=e,"smooth"==c?(e&&(h?s.svgRenderer._setAttr(p,{width:d<=g+e?d:e}):s.svgRenderer._setAttr(p,{height:e})),h?s.svgRenderer._setAttr(p,{x:d<=g+e?d-e:g}):s.svgRenderer._setAttr(p,{y:0<=d-g-e?d-g-e:0})):s.svgRenderer._setAttr(p,{transform:"translate("+a+" "+r+o+l+m+-a+" "+-r+")"})}})},animateStackingRect:function(e,t,i,s,n){var a,r,o,l=xe(e),e=ej.EjSvgRender.utils._getBoundingClientRect(e,s,t,i),d=t.isTransposed&&i||i?(i=ej.EjSvgRender.utils._valueToCoefficient(t.yAxis,0)*t.yAxis.width,a=i,r=e.y,o=") scale(",",1) translate("):(t=(1-ej.EjSvgRender.utils._valueToCoefficient(t.yAxis,0))*t.yAxis.height,a=e.x,r=t,o=") scale(1,",") translate(");l.animate({scales:1},{duration:n,step:function(e){s.svgRenderer._setAttr(l,{transform:"translate("+a+" "+r+o+e+d+-a+" "+-r+")"})}})},_doLineAnimation:function(t,i,e){var s,e=ej.util.isNullOrUndefined(e)?2e3:e,n=t.model.primaryXAxis.isInversed,a=parseFloat(t.svgRenderer._getAttrVal(i,"width"));t.model.requireInvertedAxes?(s=parseFloat(t.svgRenderer._getAttrVal(i,"height")),xe(i).animate({clipRectHeight:parseFloat(t.svgRenderer._getAttrVal(i,"height"))},{duration:e,step:function(e){t.svgRenderer._setAttr(xe(i),{y:s-e}),t.svgRenderer._setAttr(xe(i),{height:e})}})):xe(i).animate({clipRectWidth:parseFloat(t.svgRenderer._getAttrVal(i,"width"))},{duration:e,step:function(e){n&&t.svgRenderer._setAttr(xe(i),{x:a-e}),t.svgRenderer._setAttr(xe(i),{width:e})}})},_drawLinePath:function(e,t,i){var s=this.chartObj.model.requireInvertedAxes,n=xe.inArray(e,this.chartObj.model._visibleSeries),a=null;"cartesianaxes"==this.chartObj.model.AreaType&&(a="translate("+(r=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,s)).x+","+r.y+")");var r={id:this.chartObj.svgObject.id+"_SeriesGroup_"+n,transform:a};this.chartObj.gSeriesGroupEle=this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(r),""!=i&&-1==i.indexOf("NaN")&&(i={id:this.chartObj.svgObject.id+"_Series"+n,fill:"none","stroke-dasharray":e.dashArray,"stroke-width":e.width,stroke:t.SeriesInterior,"stroke-linecap":e.lineCap,"stroke-linejoin":e.lineJoin,opacity:e.opacity,d:i},this.chartObj.dragPoint?(i.id=this.chartObj.svgObject.id+"_PreviewSeries"+n,i.opacity=.6,this.chartObj.model.enableCanvasRendering?this.chartObj.svgRenderer.drawPath(i,this.chartObj.canvasElement,a):this.chartObj.svgRenderer.drawPath(i,this.chartObj.gPreviewSeriesGroupEle)):this.chartObj.svgRenderer.drawPath(i,this.gSeriesGroupEle))},_applySaturation:function(e,t){return ej.EjSvgRender.prototype.checkColorFormat(t)||(t=e.colorNameToHex(t)),t=ej.EjSvgRender.prototype.hexToRGB(t),128<=Math.round((299*parseInt(t.R)+587*parseInt(t.G)+114*parseInt(t.B))/1e3)?"black":"white"},drawDataLabel:function(e,t,i,s,n,a,r,o){i.marker=i.marker||{};var l,d,h,c,u,p=e.yAxis.labelFormat,m=(e.yAxis.valueType,e._visiblePoints[t].boxPlotValues),g="waterfall"==e.type.toLowerCase()&&(i.showIntermediateSum||i.showTotalSum)?i.waterfallSum:i.y,f=i.text||(p?-1<p.indexOf("{value}")?p.replace("{value}",g):0==p.indexOf("e")||0==p.indexOf("E")?(M=null==(M=p.match(/(\d+)/g))?6:20<M?20:M,g.toExponential(M)):ej.format(g,p,this.chartObj.model.locale):g),_=this.chartObj,v=_.model,b=xe.inArray(e,v._visibleSeries),x=xe.extend(!0,{},e.marker,i.marker),y=x.dataLabel,w=v.m_AreaBounds,C=y.font,S=y.textPosition.toLowerCase(),T=y.textAnchor.toLowerCase(),R=e.type.toLowerCase(),k=v.enableCanvasRendering,O=ej.seriesTypes[R].prototype.isRegion,D={size:ej.util.isNullOrUndefined(C.size)?"11px":C.size,fontStyle:ej.util.isNullOrUndefined(C.fontStyle)?"Normal":C.fontStyle,fontFamily:ej.util.isNullOrUndefined(C.fontFamily)?"Segoe UI":C.fontFamily},I=ej.EjSvgRender.utils._measureText(f,null,D);degree=y.angle,padding=10,angle=360<degree?degree-360:degree<-360?degree+360:degree,"middle"!=S||-90!=angle&&90!=angle||(F=_.model.chartRegions[a].Region.Bounds,I.width>F.Height&&(S="bottom"));var j=this.textPosition(e,b,i,I,R,s,n,a,t,r,S),L=xe.extend({},ej.EjSvgRender.commonChartEventArgs),A=y.enableContrastColor,E=v.chartArea.background.toLowerCase(),P=v.background.toLowerCase();L.data={text:f,location:{x:j.x+_.canvasX,y:j.y+_.canvasY},seriesIndex:b,pointIndex:t},!e.isStacking||"area"!=e.drawType||"polar"!=e.type&&"radar"!=e.type||(L.data.text=e.stackedValue.EndValues[t]-e.stackedValue.StartValues[t]),_._trigger("displayTextRendering",L);var M=null==x.dataLabel.offset.y?x.dataLabel.offset:x.dataLabel.offset.y,p=x.dataLabel.offset.x,I=ej.EjSvgRender.utils._measureText(L.data.text,null,D);if(L.data.location.y="bottom"==S?L.data.location.y+M:L.data.location.y-M,p&&(L.data.location.x=L.data.location.x+p),90!=angle&&-90!=angle||("bottom"==S?(T=-90==angle?"start":"end",L.data.location.y=L.data.location.y+padding/2):"top"==S&&("middle"==T||"start"==T?(T=-90==angle?"start":"end",L.data.location.y=L.data.location.y+padding):(T="end",L.data.location.y=L.data.location.y+2*padding))),!L.cancel){var g={id:_.svgObject.id+"_SeriesText"+t+b,x:L.data.location.x,y:L.data.location.y,fill:C.color,"font-size":C.size,"font-family":C.fontFamily,"font-style":C.fontStyle,"font-weight":C.fontWeight,opacity:C.opacity,"text-anchor":T},F=y.margin,s=I.width+F.left+F.right,n=I.height+F.top+F.bottom,f={X:L.data.location.x,Y:L.data.location.y};if(ej.util.isNullOrUndefined(y.template)?(h=y.shape||"None",xe.each(v.symbolShape,function(e){h.toLowerCase()==e.toLowerCase()&&(u=e)}),j=L.data.location.x-F.left/2+F.right/2,x=L.data.location.y-F.top/2-n/F.top+F.bottom/2,v.enableCanvasRendering&&degree%360!=0&&(g.y-=I.height/4,g.baseline="middle"),y.showEdgeLabels&&(D=k?g.x-_.canvasX:g.x,M=k?g.y-_.canvasY:g.y,90!=angle&&-90!=angle||(I.width=[I.height,I.height=I.width][0]),p=I.width,y=I.height,k=e._visiblePoints[e._visiblePoints.length-1]==i&&D+p/2>=_.model.m_AreaBounds.Width,(D-p/2<0||D<-p/2)&&k?(l=D-p/2,g.x=j=Math.abs(l)+(k?-10:D+10)):(D+p/2>w.textWidth||D+p/2>w.textWidth+p/2)&&(l=D-p/2,g.x=j=w.textWidth-p/2-10),M+y/2>w.textHeight||M+y/2>w.textHeight+y/2?(x=M-(l=M+y/2-w.textHeight)-10,g.y=x+5):(M-y/2<0||M<-y/2)&&(l=M-y/2,x+=Math.abs(l)+10,g.y=x+5)),e._enableSmartLabels&&(i.dataLabel={textX:g.x,textY:g.y,x:j,y:x,width:s,height:n},i.margin={top:F.top,bottom:F.bottom}),d="array"==jQuery.type(v.seriesColors[b])?v.seriesColors[b][0].color:v.seriesColors[b],d=i.fill?"array"==jQuery.type(i.fill)?i.fill[0].color:i.fill:d,A&&(c=O&&"top"!=S?d:"transparent"===E&&"transparent"===P?"white":"transparent"!=E?E:P,g.fill=this._applySaturation(_,c)),i.y!=i.low||void 0===i.y&&void 0===i.low?"boxandwhisker"==R.toLowerCase()&&m.midvalue!=i.y?(C={id:_.svgObject.id+"_SeriesText"+t+b,x:ej.util.isNullOrUndefined(o)?L.data.location.x:j,y:ej.util.isNullOrUndefined(o)?L.data.location.y:x,fill:C.color,"font-size":C.size,"font-family":C.fontFamily,"font-style":C.fontStyle,"font-weight":C.fontWeight,opacity:C.opacity,"text-anchor":T},T=i.textOptionsBoxValues.length,i.textOptionsBoxValues[T]=C,0!=angle&&(i.textOptionsBoxValues[T].angle=angle),i.textOptionsBoxValues[T].drawText=L.data.text,i.textOptionsBoxValues[T].index=t,i.textOptionsBoxValues[T].xPos=ej.util.isNullOrUndefined(o)?j:j-F.left/2+F.right/2,i.textOptionsBoxValues[T].yPos=ej.util.isNullOrUndefined(o)?x:x-F.top/2-n/F.top+F.bottom/2,i.textOptionsBoxValues[T].seriesIndex=b,i.textOptionsBoxValues[T].width="None"==u?I.width:s,i.textOptionsBoxValues[T].height="None"==u?I.height:n,i.textOptionsBoxValues[T].symbolName=u):(i.textOptions=g,0!=angle&&(i.textOptions.angle=angle),i.drawText=L.data.text,i.index=t,i.xPos=j,i.yPos=x,i.seriesIndex=b,i.width="None"==u?I.width:s,i.height="None"==u?I.height:n,90!=angle&&-90!=angle||(i.width=[i.height,i.height=i.width][0]),i.symbolName=u):(i.xPosLow=j,i.yPosLow=x,i.widthLow="None"==u?I.width:s,i.heightLow="None"==u?I.height:n,i.textOptionsLow=g,i.textOptionsLow.angle=angle,i.drawTextLow=L.data.text)):(f.X-=_.canvasX,f.Y-=_.canvasY,this.drawLabelTemplate(e,i,t,f,_)),(-1<R.indexOf("column")||-1<R.indexOf("bar"))&&A){var a=_.model.chartRegions[a],N=r.stackingGroup;if("top"==S&&-1<R.indexOf("stacking")){if(ej.util.isNullOrUndefined(e.stackingGroup)||""==e.stackingGroup)c=b<v._visibleSeries.length-1?(d="array"==jQuery.type(v.seriesColors[b+1])?v.seriesColors[b+1][0].color:v.seriesColors[b+1],d=i.fill?"array"==jQuery.type(i.fill)?i.fill[0].color:i.fill:d):"transparent"===E&&"transparent"===P?"white":"transparent"!=E?E:P;else for(var z in N){if(z==e.stackingGroup&&b<N[z].length-1){d="array"==jQuery.type(v.seriesColors[b+1])?v.seriesColors[b+1][0].color:v.seriesColors[b+1],c=d=i.fill?"array"==jQuery.type(i.fill)?i.fill[0].color:i.fill:d;break}c="transparent"===E&&"transparent"===P?"white":"transparent"!=E?E:P;break}g.fill=this._applySaturation(_,c)}else A=ej.ejChart.isCollide(a,i,0,A,_),"bottom"!=S&&"middle"!=S||A.state||(c="transparent"===E&&"transparent"===P?"white":"transparent"!=E?E:P,g.fill=this._applySaturation(_,c))}}},updateSmartLabelPosition:function(e,t,i,s,n,a,r,o,l,d){var h,c,u,p=[],m=l,g=m.model,f=g.legend,_=g.LegendActualBounds,v=f.position.toLowerCase(),b=new ej.seriesTypes[e.type.toLowerCase()],x="",y="",w=s.connector.connectorX,C=s.connector.connectorY,S=s.midPoint.midX,T=s.midPoint.midY,R=(s.doughnutMidPoint.dMidX,s.doughnutMidPoint.dMidY,a.startX),k=a.startY,O=xe.extend(!0,{},e.marker,t.marker),l=O.dataLabel.template?0:4,D=n,I=e.startAngle>e.endAngle?-.01:.01,a=O.dataLabel.connectorLine.type.toLowerCase(),O=e.type.toLowerCase(),j=g._isPieOfPie?g.circularRadius[e.collectionIndex]:g.circularRadius[d],O="pieofpie"==O?"inside":e.labelPosition.toLowerCase();if(ej.util.isNullOrUndefined(g.bounds[d])&&(g.bounds[d]=[],g.bounds[d].points=[],"outsideextended"==O&&(g.bounds[d].points.left=[],g.bounds[d].points.right=[])),"inside"==O&&ej.util.isNullOrUndefined(t.smartLabelPosition)){h=(S+(h=(S+R)/2))/2,c=(T+(c=(T+k)/2))/2,z=t.isIntersected&&g.bounds[d].points[t.index]?g.bounds[d].points[t.index]:R<S?{X:h,Y:c,Left:h,Top:c,Right:h+o.width,Bottom:c+o.height,SeriesIndex:d,PointIndex:i}:{X:h,Y:c,Left:h-o.width,Top:c,Right:h,Bottom:c+o.height,SeriesIndex:d,PointIndex:i};do{var L,A=!1}while(this.IntersectWith(m,t,z,"inside",d)&&(u=z.Left,L=180*n/Math.PI,270<=180*D/Math.PI-L||(D+=I,t.isIntersected=!0,z.Angle=D,R<S?(z.X=z.Left=b.getXCordinate(R,j+r,D),z.Right=z.X+o.width):(z.X=z.Right=b.getXCordinate(R,j+r,D),z.Left=z.Right-o.width),z.Y=z.Top=b.getYCordinate(k,j+r,D),z.Bottom=z.Y+o.height,A=!0)),A);R<S&&z.X<R&&(z.Right=u,z.Left=u-o.width),g.bounds[d].points[i]=z,t.isIntersected&&g.bounds[d].points[i].Angle&&(h=b.getXCordinate(R,j+r,g.bounds[d].points[i].Angle),c=b.getYCordinate(k,j+r,g.bounds[d].points[i].Angle),E=b.getXCordinate(R,j+r/3,n),P=b.getYCordinate(k,j+r/3,n),p.push({X:S,Y:T}),p.push({X:E,Y:P}),p.push({X:h,Y:c}),t.isIntersected&&"bezier"==a&&!m.vmlRendering&&(y=b.drawBezierSegment(p,e,i,m,d)),x="M "+S+" "+T+" L "+E+" "+P+" M "+E+" "+P+" L "+h+" "+c)}else if("outside"==O||"outside"==t.smartLabelPosition){for(z=R<=S?{X:w,Y:C,Left:w,Top:C,Right:w+o.width,Bottom:C+o.height,SeriesIndex:d,PointIndex:i}:{X:w,Y:C,Left:w-o.width,Top:C,Right:w,Bottom:C+o.height,SeriesIndex:d,PointIndex:i};A=!1,this.IntersectWith(m,t,z,"outside",d,o)&&(u=z.Left,D+=I,t.isIntersected=!0,R<S?(z.X=z.Left=b.getXCordinate(R,j+r,D),z.Right=z.X+o.width):(z.X=z.Right=b.getXCordinate(R,j+r,D),z.Left=z.Right-o.width),z.Y=z.Top=b.getYCordinate(k,j+r,D),z.Bottom=z.Y+o.height,A=!0),A;);R<S&&z.X<R&&(z.Right=u,z.Left=u-o.width),g.bounds[d].points[i]=z;var E=b.getXCordinate(R,j+r/3,n),P=b.getYCordinate(k,j+r/3,n);p.push({X:S,Y:T}),p.push({X:E,Y:P}),p.push({X:z.X,Y:z.Y}),h=z.X,c=z.Y,0<r&&(h=S<R?(N=z.X-g.elementSpacing)-l:(N=z.X+g.elementSpacing)+l,p.push({X:N,Y:z.Y})),"bezier"!=a||m.vmlRendering?x="M "+S+" "+T+" L "+E+" "+P+" M "+E+" "+P+" L "+z.X+" "+z.Y+" M "+z.X+" "+z.Y+" L "+N+" "+z.Y:y=b.drawBezierSegment(p,e,i,m,d)}else{w=S,C=T;S+=Math.cos(n)*(-j/10),T+=Math.sin(n)*(-j/10);E=j/4;p.push({X:S,Y:T}),S+=Math.cos(n)*E,T+=Math.sin(n)*E,p.push({X:S,Y:T});var M,F,P=f.visible&&"left"==v?g.margin.left+_.Width:0,N=g.circleCenterX[d];M=S<R?(S=(0<N-j-2*E-e.LeftLabelMaxWidth?N-j-2*E+P:e.LeftLabelMaxWidth>w?w:e.LeftLabelMaxWidth+P)-o.width/2,M=p[1].X-e.LeftLabelMaxWidth,F=0<N-j-2*E-e.LeftLabelMaxWidth?E:e.LeftLabelMaxWidth>w?0:E/2*3<M?E:M/2,+o.width/2):(_=f.visible&&"right"==v?g.margin.right+_.Width:0,S=(N+j+2*E+e.RightLabelMaxWidth<xe(m.svgObject).width()-_?N+j+2*E-P:N+j+e.RightLabelMaxWidth>xe(m.svgObject).width()?w:xe(m.svgObject).width()-e.RightLabelMaxWidth-_)+o.width/2,M=xe(m.svgObject).width()-e.RightLabelMaxWidth-p[1].X,F=N+j+2*E+e.RightLabelMaxWidth<xe(m.svgObject).width()?E:N+j+e.RightLabelMaxWidth>xe(m.svgObject).width()?0:E/2*3<M?E:M/2,-o.width/2);w=Math.sqrt(Math.pow(w-S,2)+Math.pow(C-T,2))/10,C=S<R;S=C?S+w:S-w;var s=C?g.bounds[d].points.left:g.bounds[d].points.right,z={X:S,Y:T,Left:S,Top:T,Right:S+o.width,Bottom:T+o.height,index:i,SeriesIndex:d,PointIndex:i},w=e.endAngle>e.startAngle;if(this.IntersectWith(m,t,z,"outsideExtended",d)&&(p.push(S<R?{X:S+F+M,Y:T}:{X:S-F+M,Y:T}),T=!w&&null!=e.startAngle&&C?s[s.length-1].Y-o.height-2:s[s.length-1].Y+o.height+2,z.Y=T,z.Top=T,z.Bottom=T+o.height),p.push({X:S+M,Y:T}),N<p[0].X&&p[1].X>p[2].X&&(p[2].X=p[1].X),N>p[0].X&&p[1].X<p[2].X&&(p[2].X=p[1].X),C?(g.bounds[d].points.left||(g.bounds[d].points.left=[]),g.bounds[d].points.left.push(z),p[p.length-1].X>p[p.length-2].X&&(p[p.length-2].X=p[p.length-1].X)):(g.bounds[d].points.right||(g.bounds[d].points.right=[]),g.bounds[d].points.right.push(z),p[p.length-1].X<p[p.length-2].X&&(p[p.length-2].X=p[p.length-1].X)),x=ej.EjSvgRender.utils._getStringBuilder(),"bezier"!=a||m.vmlRendering){for(var V=0;V<p.length;V++)V==p.length-1?x.append(" "):x.append("M "+p[V].X+" "+p[V].Y+" L "+p[V+1].X+" "+p[V+1].Y+" ");x=x.toString()}else y=b.drawBezierSegment(p,e,i,m,d);h=p[p.length-1].X+(S<R?-l:l),c=p[p.length-1].Y}return{positionX:h,positionY:c,connectorDirection:x,isInterSected:t.isIntersected,bezierPath:y}},updateLabelPosition:function(e,t,i,s,n,a,r,o,l,d){var h,c=[],u=l,p=new ej.seriesTypes[e.type.toLowerCase()],m="",g=s.connector.connectorX,f=s.connector.connectorY,_=s.midPoint.midX,v=s.midPoint.midY,b=s.doughnutMidPoint.dMidX,x=s.doughnutMidPoint.dMidY,y=a.startX,w=a.startY,C=xe.extend(!0,{},e.marker,t.marker),S=C.dataLabel.template?0:4,l=e.type.toLowerCase(),s=u.model.circularRadius[d],a="pieofpie"==l?"inside":e.labelPosition.toLowerCase();if(c.push({X:_,Y:v}),c.push({X:g,Y:f}),t=g,l=f,"outside"==a)0<r&&(t=g<y?(h=g-u.model.elementSpacing)-S:(h=g+u.model.elementSpacing)+S,c.push({X:h,Y:f})),"bezier"!=C.dataLabel.connectorLine.type.toLowerCase()||u.vmlRendering?m="M "+_+" "+v+" L "+g+" "+f+" M "+g+" "+f+" L "+h+" "+f:p.drawBezierSegment(c,e,i,u,d);else if("outsideextended"==a){h=_,_+=Math.cos(n)*(-s/10),v+=Math.sin(n)*(-s/10);a=s/4;(c=[]).push({X:_,Y:v}),g=_+Math.cos(n)*a,f=v+Math.sin(n)*a,c.push({X:g,Y:f});n=!u.model.legend.visible||"left"!=u.model.legend.position.toLowerCase()&&"right"!=u.model.legend.position.toLowerCase()?0:u.model.elementSpacing,g=_<y?0<u.model.centerX-s-2*a-e.LeftLabelMaxWidth?u.model.centerX-s-2*a+n:e.LeftLabelMaxWidth>h?h:e.LeftLabelMaxWidth:u.model.centerX+s+2*a+e.RightLabelMaxWidth<xe(u.svgObject).width()?u.model.centerX+s+2*a-n:u.model.centerX+s+e.RightLabelMaxWidth>xe(u.svgObject).width()?h:xe(u.svgObject).width()-e.RightLabelMaxWidth;if(c.push({X:g,Y:f}),m=ej.EjSvgRender.utils._getStringBuilder(),"bezier"!=C.dataLabel.connectorLine.type.toLowerCase()||u.vmlRendering){for(var T=0;T<c.length;T++)T==c.length-1?m.append(" "):m.append("M "+c[T].X+" "+c[T].Y+" L "+c[T+1].X+" "+c[T+1].Y+" ");m=m.toString()}else p.drawBezierSegment(c,e,i,u,d);t=c[c.length-1].X+(_<y?-S:S),l=c[c.length-1].Y}else l="doughnut"==e.type.toLowerCase()?(t=(_+b)/2,(v+x)/2):(t=(_+(t=(_+y)/2))/2,(v+(l=(v+w)/2))/2);return{positionX:t,positionY:l,connectorDirection:m,points:c[c.length-1]}},updateSmartLabel:function(e,t,i,s){var n,a,r=!0,o="",l=t.labelPosition.toLowerCase(),d=xe.extend(!0,{},t.marker,s.marker).dataLabel,h=e.model.m_AreaBounds,c=(e.model.svgHeight,t.type.toLowerCase());return s._labelPlacement="","inside"==l||"outsideextended"==l?this.calculateInsideConnectorLines(i,s,t,e):this.compareDataLabels(s,i,e.model.outsideDataRegionPoints,t,e),n=e.model.enableCanvasRendering&&!d.template?e.pyrX:0,a=e.model.enableCanvasRendering&&!d.template?e.pyrY:0,"pyramid"==c?(e.model.actualHeight<s.yPos-a||s.xPos-n>h.Width&&"insideoverlap"==s._labelPlacement||"right"==e.model.legend.position&&d.template&&s.xPos+s.width>h.Width+e.model.LegendActualBounds.Width)&&(r=!1,s.drawTextacc=""):(s.yPos-a<0||s.xPos-n>h.Width&&"insideoverlap"==s._labelPlacement||"right"==e.model.legend.position&&d.template&&s.xPos+s.width>h.Width+e.model.LegendActualBounds.Width)&&(r=!1,s.drawTextacc=""),"outside"!=l&&"insideoverlap"!=s._labelPlacement||!r||(o=this.drawConnectorLines(i,s,t,e)),d.template&&(d=xe("#"+s.id),r?(r="insidenooverlap"==s._labelPlacement?s.textOptionsacc.x+e.pyrX-s.width/2:s.textOptionsacc.x+e.pyrX,e="insidenooverlap"==s._labelPlacement?s.textOptionsacc.y+e.pyrY:s.textOptionsacc.y+e.pyrY-e.model.elementSpacing,d.css("left",r).css("top",e),d.css("height",s.height).css("overflow","hidden")):d.css("display","none")),{xPos:s.xPos,yPos:s.yPos,textOptionsacc:s.textOptionsacc,connectorDirection:o.connectorDirection,bezierPath:o.bezierdir,drawTextacc:s.drawTextacc}},compareDataLabels:function(e,t,i,s,n){for(var a,r,o=xe.extend(!0,{},s.marker,e.marker),l=o.dataLabel,d=n.model.elementSpacing,h=o.dataLabel.margin,c=s._visiblePoints.length,u=s.labelPosition.toLowerCase(),p=n.model.enableCanvasRendering?n.pyrX:0,m=n.model.enableCanvasRendering?n.pyrY:0,g=0,f=i.length;g<f;g++)if(a=i[g],(a=this.isCollide(a,e,s)).state)if("inside"==u||"outsideextended"==u){e.textOptionsacc.y=e.yPos=e.textOptionsacc.y+a.height,r=l.template?{x:e.xPos,y:e.yPos}:{x:e.xPos-p,y:e.yPos-m};for(var _=0,v=c;_<v;_++)n.isPointInPolygon(n.model.chartRegions[0].Region[_].Polygon,r)&&(e.textOptionsacc.x=e.xPos=e.textOptionsacc.x+e.width,r=l.template?{x:e.xPos,y:e.yPos}:{x:e.xPos-p,y:e.yPos-m})}else e._labelPlacement="outside",e.textOptionsacc.y=e.yPos="pyramid"==s.type.toLowerCase()?e.yPos+a.height+d/2:e.yPos+a.height-d/2,e.textOptionsacc.y=e.textOptionsacc.y+e.height/4-d/2+h.top/2-h.bottom/2;o="rotate("+(360<(o=l.angle)?o-360:o<-360?o+360:o)+","+e.textOptionsacc.x+","+e.textOptionsacc.y+")",xe(e.textOptionsacc).attr("transform",o),xe(e.textOptionsacc).attr({transform:o}),"inside"!=u&&"outsideextended"!=u||(e.yPos=e.yPos+d/4,e.textOptionsacc.y=e.textOptionsacc.y+e.height/4+h.top/2-h.bottom/2),i[i.length]=e},calculateInsideConnectorLines:function(e,t,i,s){var n=t.Polygon,a=xe.extend(!0,{},i.marker,t.marker).dataLabel,r=a.font,o=s.model.enableCanvasRendering?s.pyrX:0,l=s.model.enableCanvasRendering?s.pyrY:0,r=ej.EjSvgRender.utils._measureText(t.drawTextacc,null,r),l=a.template?{x:t.xPos,y:t.yPos}:{x:t.xPos+r.width/2-o,y:t.yPos-t.height/2-l};s.isPointInPolygon(n,l)?t._labelPlacement="insidenooverlap":(t._labelPlacement="insideoverlap",t.textOptionsacc["text-anchor"]="start",l=t.startX+70<s.model.m_AreaBounds.Width?70:s.model.m_AreaBounds.Width-t.startX,t.textOptionsacc.x=t.xPos=t.startX+l,t.textOptionsacc.y=t.yPos=t.yLocation,s.model.enableCanvasRendering&&!a.template&&(t.textOptionsacc.x+=s.pyrX,t.textOptionsacc.y+=s.pyrY,t.xPos+=s.pyrX,t.yPos+=s.pyrY),this.compareDataLabels(t,e,s.model.outsideDataRegionPoints,i,s))},drawConnectorLines:function(e,t,i,s){var n="",a=new ej.seriesTypes[i.type.toLowerCase()],r=i._visiblePoints[e].startX,o=i._visiblePoints[e].startY,l="",d=xe.inArray(i,s.model._visibleSeries),h=xe.extend(!0,{},i.marker,t.marker).dataLabel,c=t.textOptionsacc.y-s.model.elementSpacing/2,u=s.model.enableCanvasRendering?s.pyrX:0,p=s.model.enableCanvasRendering?s.pyrY:0,m=[{X:r+u,Y:o+p},{X:t.textOptionsacc.x,Y:c}];return"bezier"!=h.connectorLine.type.toLowerCase()||s.vmlRendering?(l="M "+r+" "+o+" L "+t.textOptionsacc.x+" "+c,s.model.enableCanvasRendering&&!h.template&&(l="M "+r+" "+o+" L "+(t.textOptionsacc.x-u)+" "+(c-p))):n=a.drawBezierSegment(m,i,e,s,d),{connectorDirection:l,bezierdir:n}},isCollide:function(e,t,i){var s=0,n=0,a=i.type.toLowerCase(),i=!(e.yPos+e.height<t.yPos||e.yPos>t.yPos+t.height||e.xPos+e.width/2<t.xPos-t.width/2||e.xPos-e.width>t.xPos+t.width);return i&&"pyramid"==a?(n=e.yPos+e.height-t.yPos,s=e.xPos+e.width-t.xPos):i&&"funnel"==a&&(n=e.yPos-(t.yPos+t.height),s=e.xPos+e.width-t.xPos),{state:i,height:n,width:s}},trimText:function(e,t,i){t=--t-i.length;return e.substr(0,t)+i},trimfunction:function(e,t,i,s,n,a){for(;t<i;)if(e=e.toString(),e=this.trimText(e,e.length,s),i=ej.EjSvgRender.utils._measureText(e,n,a).width,e==s){e="";break}return e},calculatePosition:function(e,t,i,s,n){return{rightEndX:t.x+i/2-s,rightEndY:t.y-n,leftEndX:t.x-i/2-s,leftEndY:t.y-n}},textOption:function(e,t,i,s,n,a,r,o,l,d,h){var c;return(e=t.model._isPieOfPie?xe.extend(!0,{},e.marker,h.marker):xe.extend(!0,{},e.marker,e._visiblePoints[a].marker)).dataLabel.template||(xe("#"+t.svgObject.id+"series"+d+"_PointText"+a).remove(),c={id:t.svgObject.id+"series"+d+"_PointText"+a,x:o+s,y:l+i.height/4+n,fill:e.dataLabel.font.color,"font-size":e.dataLabel.font.size,"font-family":e.dataLabel.font.fontFamily,"font-style":e.dataLabel.font.fontStyle,"font-weight":e.dataLabel.font.fontWeight,opacity:e.dataLabel.font.opacity,"text-anchor":r,cursor:"default",degree:e.dataLabel.angle},l="rotate("+(360<(e=e.dataLabel.angle)?e-360:e<-360?e+360:e)+","+o+","+l+")",xe(c).attr("transform",l),t.model.enableCanvasRendering&&xe(c).attr("labelRotation",e),xe(c).attr({transform:l})),c},labelTrim:function(e,t,i,s,n,a,r,o,l,d){var h,c,u,p,m=-.5*Math.PI,g=(Math.PI,this.calculatePosition(e,t,i,n,a)),f=e.model.series[l].startAngle,_=e.model.series[l].endAngle,i=((e.model.chartRegions.length<e.model._visibleSeries.length?e.model.chartRegions[0]:e.model.chartRegions[l]).Region,_-f),l=e.model._isPieOfPie?d:l;if(p=i<0?(_/=360)?2*Math.PI*(_<0?1+_:_):0:f?2*Math.PI*(e.model.itemCurrentXPos<0?1+e.model.itemCurrentXPos:e.model.itemCurrentXPos):0,(f=(Math.atan2(g.rightEndY,g.rightEndX)-m-p)%(2*Math.PI))<0&&(f=2*Math.PI+f),(_=(Math.atan2(g.leftEndY,g.leftEndX)-m-p)%(2*Math.PI))<0&&(_=2*Math.PI+_),v=parseFloat(r.start.toFixed(14)),b=parseFloat(r.end.toFixed(14)),b=0<i?(ej.util.isNullOrUndefined(e.firstStartAngle[0])&&e.firstStartAngle.push(v),v=!(e.firstStartAngle[0]<0)||e.model._isPieOfPie?v:2*Math.PI+v,!(e.firstStartAngle[0]<0)||e.model._isPieOfPie?b:2*Math.PI+b):(v=!(v<0)||e.model._isPieOfPie?v:2*Math.PI+v,!(b<0)||e.model._isPieOfPie?b:2*Math.PI+b),b-=p,(v-=p)>2*Math.PI&&b>2*Math.PI?(f+=2*Math.PI,_+=2*Math.PI):v<2*Math.PI&&b>2*Math.PI&&(f<Math.PI/2&&(f+=2*Math.PI),_<Math.PI/2&&(_+=2*Math.PI)),f<0&&(0<_||null==_)&&(v=v<0?2*Math.PI+v:v,b=b<=0?2*Math.PI+b:b),h=e.model.circleCenterX[l]<t.x?Math.sqrt(Math.pow(Math.abs(g.rightEndX),2)+Math.pow(Math.abs(g.rightEndY),2)):Math.sqrt(Math.pow(Math.abs(g.leftEndX),2)+Math.pow(Math.abs(g.leftEndY),2)),i<0&&(b=[v,v=b][0]),v<=_&&_<=b&&v<=f&&f<=b&&h<=e.model.circularRadius[l]&&0<h)c=!0;else for(c=!1;!c;){if("..."==(s=this.trimText(s,s.length,"..."))){s="";break}x=ej.EjSvgRender.utils._measureText(s,null,o),u=this.calculatePosition(e,t,x.width,n,a);var v,b,x=(Math.atan2(u.rightEndY,u.rightEndX)-m-p)%(2*Math.PI);x<0&&(x=2*Math.PI+x),(_=(Math.atan2(u.leftEndY,u.leftEndX)-m-p)%(2*Math.PI))<0&&(_=2*Math.PI+_),h=e.model.circleCenterX[l]<t.x?Math.sqrt(Math.pow(Math.abs(u.rightEndX),2)+Math.pow(Math.abs(u.rightEndY),2)):Math.sqrt(Math.pow(Math.abs(u.leftEndX),2)+Math.pow(Math.abs(u.leftEndY),2)),v>2*Math.PI&&b>2*Math.PI&&e.model._isPieOfPie?(v=v-2*Math.PI,b-=2*Math.PI):0!=v&&v<2*Math.PI&&b>=2*Math.PI&&e.model._isPieOfPie&&(v=v-2*Math.PI),v<=_&&_<=b&&v<=x&&x<=b&&h<=e.model.circularRadius[l]&&0<h&&(c=!0)}return s},drawDataLabelAcc:function(e,t,i,s,n,a){var r=s.marker;if(s.visible&&(r&&r.dataLabel&&r.dataLabel.visible||(!r||!r.dataLabel)&&t.marker.dataLabel.visible)){var o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C=e,S=t.type.toLowerCase(),T=new ej.seriesTypes[S],R=ej.util.isNullOrUndefined,k="pieofpie"==S?"inside":t.labelPosition.toLowerCase(),O=C.model,D=O.title,I=ej.EjSvgRender.utils._measureText,j=O.elementSpacing,L=t.marker,A=L.dataLabel,E=A.margin,P=A.font,M=A.connectorLine,F=M.type.toLowerCase(),N=O.legend,z=N.position.toLowerCase(),V=O.LegendActualBounds,B=R(s.text)?s.y:s.text,H=A.enableWrap,Y=B,U=O._isPieOfPie?a:n,W=0,X=0,G=O.background.toLowerCase(),$=A.enableContrastColor;"pyramid"!=S&&"funnel"!=S||"outsideextended"!=k||(k="inside"),(o=xe.extend({},ej.EjSvgRender.commonChartEventArgs)).data={text:B,series:t,pointIndex:i},C._trigger("displayTextRendering",o),ue={size:P.size,fontStyle:P.fontStyle,fontFamily:P.fontFamily},h=(l=I(o.data.text,null,ue)).width+E.left+E.right,c=l.height+E.top+E.bottom,"pyramid"!=S&&"funnel"!=S||(se=O.title.text?I(O.title.text,xe(this.svgObject).width()-O.margin.left-O.margin.right,O.title.font):0,g=C.model.title.subTitle.text?ej.EjSvgRender.utils._measureText(C.model.title.subTitle.text,xe(this.svgObject).width()-C.model.margin.left-C.model.margin.right,C.model.title.subTitle.font):0,de=""===C.model.title.subTitle.text?0:g.height,Z=j+O.margin.left+("left"===z)?V.Width:0,J=("top"===z?V.Height:0)+(O.title.text&&O.title.visible?O._titleLocation.Y+se.height+de:O.margin.top+j),h+=10,ie={X:s.xLocation+C.pyrX,Y:s.yLocation+C.pyrY},W=s.xLocation,X=s.yLocation,b=s.marker||L,b=xe.extend(!0,{},L,b),ve=s.connectorLine,d={positionX:W,positionY:X}),"pyramid"!=S&&"funnel"!=S&&(K=-.5*Math.PI,m=s.midAngle+K,se=O.title.text?I(O.title.text,xe(this.svgObject).width()-O.margin.left-O.margin.right,O.title.font):0,g=C.model.title.subTitle.text?ej.EjSvgRender.utils._measureText(C.model.title.subTitle.text,xe(this.svgObject).width()-C.model.margin.left-C.model.margin.right,C.model.title.subTitle.font):0,de=""===C.model.title.subTitle.text?0:g.height,ce=O.circularRadius[U],v=(R(M.height)?I(o.data.text,null,P):M).height,pe=(C.model._isPieOfPie?s:t._visiblePoints[i]).actualIndex!=t.explodeIndex&&!t.explodeAll||C.vmlRendering?(f=O.circleCenterX[U],O.circleCenterY[U]):(f=O.circleCenterX[U]+Math.cos(m)*t.explodeOffset,O.circleCenterY[U]+Math.sin(m)*t.explodeOffset),r=T.getXCordinate(f,ce,m),r=0!=s.y?r:parseFloat(r.toFixed(12)),B=T.getYCordinate(pe,ce,m),ne=T.getXCordinate(f,O.innerRadius[n],m),_=T.getYCordinate(pe,O.innerRadius[n],m),Q=this.getXCordinate(f,ce+v,m),Q=0!=s.y?Q:parseFloat(Q.toFixed(12)),K=this.getYCordinate(pe,ce+v,m),A.template?y=s.size:(b=s.marker||L,x=(b=xe.extend(!0,{},L,b)).dataLabel.shape,y=I(o.data.text,xe(C.svgObject).width(),P),"none"!=x.toLowerCase()&&(y.height=y.height+E.top+E.bottom,y.width=y.width+E.left+E.right)),ne={midPoint:{midX:r,midY:B},doughnutMidPoint:{dMidX:ne,dMidY:_},connector:{connectorX:Q,connectorY:K}},_={startX:f,startY:pe},ve=t._enableSmartLabels?(be=T.updateSmartLabelPosition(t,s,i,ne,m,_,v,y,e,n),C.model.bounds[n].points[i]&&(w=C.model.bounds[n].points[i].overlap),d={positionX:W=be.positionX,positionY:X=be.positionY,isInterSected:be.isInterSected},C.model._isPieOfPie||w?"":be.connectorDirection):(W=(be=T.updateLabelPosition(t,s,i,ne,m,_,v,y,e,n)).positionX,X=be.positionY,be.connectorDirection));var q,Q="inside"!=k&&"insidenooverlap"!=k||("pyramid"==S||"funnel"==S)&&"outside"==k?W<O.circleCenterX[U]?"end":"start":"middle",K="inside"==k||"insidenooverlap"==k?0:W<O.circleCenterX[U]?-l.width:l.width,Z=0,J=0;"pie"!=S&&"doughnut"!=S&&"pieofpie"!=S||"inside"!=k||(Q=""!=ve?W<O.circleCenterX[U]?"end":"start":"middle"),"pyramid"!=S&&"funnel"!=S||"outside"!=k||(Q="start");var ee,te,ie,se,ne,ae,re,oe,le,de=""===C.model.title.subTitle.text?0:g.height;if(this.chartObj&&O.enableCanvasRendering&&("pyramid"==S||"funnel"==S)&&(Z=("left"===z?V.Width:0)+j+O.margin.left,J=("top"===z?V.Height:0)+(D.text?O._titleLocation.Y+se.height+de:O.margin.top+j)),i=C.model._isPieOfPie?s.actualIndex:i,q=this.textOption(t,C,l,Z,J,i,Q,W,X,n,s),D="array"==jQuery.type(O.pointColors[s.actualIndex])?O.pointColors[s.actualIndex][0].color:O.pointColors[s.actualIndex],D=s.fill?"array"==jQuery.type(s.fill)?s.fill[0].color:s.fill:D,A.template){ie=R(ie)?{X:W,Y:X}:ie;var he=s.actualIndex;T.drawLabelTemplate(t,s,he,ie,e),"bezier"==F&&""!=be.bezierPath&&e.svgRenderer.drawPolyline(be.bezierPath,e.gConnectorEle[n])}else if(xe.each(O.symbolShape,function(e){b=s.marker||L,b=xe.extend(!0,{},L,b),(x=b.dataLabel.shape).toLowerCase()==e.toLowerCase()&&(u=e)}),W=Z+W-E.left/2+E.right/2+K/2,X=J+X-E.top/2+E.bottom/2,"pyramid"!=S&&"funnel"!=S||(s.xPos=d.positionX+Z,s.yPos=d.positionY+J,s.width="None"==u?l.width:h,s.height="None"==u?l.height:c,s.symbolName=A.template?"none":u,s.textOptionsacc=q,s.drawTextacc=o.data.text),O.enableCanvasRendering&&q.degree%360!=0&&(q.y-=l.height/4,q.baseline="middle"),$&&!t._enableSmartLabels&&(p="inside"!=k?"transparent"===G?"white":G:D,q.fill=this._applySaturation(C,p)),t._enableSmartLabels?(se=O.m_AreaBounds.Width+O.m_AreaBounds.X+O.margin.left,de=k,j=O.enableCanvasRendering,he=I(me="string"==typeof o.data.text?o.data.text:o.data.text.toString(),me.length,P).width,ie=0,N.visible?"left"!=z&&"right"!=z||(ee=V):ee={Width:0},"pie"==S||"doughnut"==S||"pieofpie"==S?("outside"!=de&&"outsideextended"!=de&&""==ve||(te=O.circleCenterX[U]<q.x?se-q.x:"left"==z?q.x-O.margin.left-2*O.elementSpacing-ee.Width:q.x-O.margin.left,me=this.trimfunction(me,te,he,"...",se,P),!N.visible||"top"!=z&&"bottom"!=z||(me=this._overlapLegend(q,me,e,n))),"inside"==de&&""==ve&&(""!=(me=this.labelTrim(C,q,he,me,f,pe,s,P,n,a))||C.model._isPieOfPie||(s.smartLabelPosition="outside",d={positionX:(be=T.updateSmartLabelPosition(t,s,i,ne,m,_,v,y,e,n)).positionX,positionY:be.positionY,isInterSected:be.isInterSected},me=o.data.text,ve=be.connectorDirection,Q=O.circleCenterX[U]<be.positionX?"start":"end",q=this.textOption(t,C,l,Z,J,i,Q,be.positionX,be.positionY,n,s),te=O.circleCenterX[U]<be.positionX?"right"==z?se-q.x-ee:se-q.x:"left"==z?q.x-ee:q.x,me=this.trimfunction(me,te,he,"...",se,P),delete s.smartLabelPosition))):"pyramid"!=S&&"funnel"!=S||(W=(be=T.updateSmartLabel(e,t,i,s)).xPos,X=be.yPos,ve=be.connectorDirection,q=be.textOptionsacc,me=s.drawTextacc,""==ve&&"bezier"!=F||""==me||(me=me.toString(),(te=j?se-q.x:se-q.x-C.pyrX)<he&&(me=this.trimfunction(me,te,he,"...",se,P)))),se=I(me,null,P),"pie"==S||"doughnut"==S||"pieofpie"==S?K="inside"!=k&&"insidenooverlap"!=k||d.isInterSected||""!=ve?W<O.circleCenterX[U]?-se.width:se.width:0:"pyramid"!=S&&"funnel"!=S||(K="insidenooverlap"==s._labelPlacement?0:se.width),X="pie"==S||"doughnut"==S||"pieofpie"==S?(W=Z+d.positionX-E.left/2+E.right/2+K/2,J+d.positionY-E.top/2+E.bottom/2):(W=W-E.left/2+E.right/2+K/2,X-E.top/2+E.bottom/2),K=xe("#"+C.svgObject.id+"_dataLabel_series"+n+"_point_"+i),E=xe("#"+C.svgObject.id+"_connectorLine_series"+n+"_point_"+i),""!==me?(K.show(),E.show(),$&&(p="inside"!=de||""!=be.connectorDirection&&!ej.util.isNullOrUndefined(be.connectorDirection)||""!=be.bezierPath&&!ej.util.isNullOrUndefined(be.bezierPath)?"transparent"===G?"white":G:D,q.fill=this._applySaturation(C,p)),H||w||T.dataLabelSymbol(n,t,i,W,X,h,c,u,C),"bezier"!=F||""==be.bezierPath||ej.util.isNullOrUndefined(be.bezierPath)||e.svgRenderer.drawPolyline(be.bezierPath,e.gConnectorEle[n])):(K.hide(),E.hide(),ve=""),H||w||C.svgRenderer.drawText(q,me,C.gSeriesTextEle[n]),E=I(me,me.length,P),I(o.data.text,null,P),"pie"!=S&&"doughnut"!=S&&"pieofpie"!=S||(le="inside"==de&&""==be.connectorDirection?(ae=q.x-se.width/2,oe=q.x+se.width/2,re=q.y-se.height/2,q.y+se.height/2):(oe=O.circleCenterX[U]<q.x?(ae=q.x,q.x+se.width):(ae=q.x-se.width,q.x),re=q.y-se.height/2,q.y+se.height/3),ne={centerX:O.circleCenterX[U],minX:ae,minY:re,maxX:oe,maxY:le,width:E.width,height:E.height,labelPosition:de}),"funnel"!=S&&"pyramid"!=S||(ie="left"==z?ie:0,""==ve&&"bezier"!=F||(ae=q.x-ie,oe=q.x+se.width-ie,re=q.y-se.height,le=q.y),ne=j?{minX:ae+ie,maxX:oe+ie,minY:re+0,maxY:le+0,width:E.width,height:E.height,labelPosition:de}:{minX:ae+C.pyrX+ie,maxX:oe+C.pyrX+ie,minY:re+C.pyrY+0,maxY:le+C.pyrY+0,width:E.width,height:E.height,labelPosition:de}),P={bounds:ne,trimmedText:me,text:o.data.text,type:S,font:P},C.accDataLabelRegion.type=S,C.accDataLabelRegion.connectorDirection=ve,ej.util.isNullOrUndefined(C.accDataLabelRegion[U])&&(C.accDataLabelRegion[U]=[]),C.accDataLabelRegion[U].length<t._visiblePoints.length&&C.accDataLabelRegion[U].push(P),R(s.index)||!t.explode||j||C.accDataLabelRegion[U].splice(s.index,1,P),1==a&&C.accDataLabelRegion[U].length==t._visiblePoints.length&&(C.accDataLabelRegion[n]=xe.merge(xe.merge([],C.accDataLabelRegion[0]),C.accDataLabelRegion[1]))):H||w||(T.dataLabelSymbol(n,t,s.index,W,X,h,c,u,C),C.svgRenderer.drawText(q,o.data.text,C.gSeriesTextEle[n])),H){var ce,ue=I(Y,null,ue),pe=this.updateWrappedText(q,Y,ue,s,S,f,pe,ce,O.innerRadius[n],k,A,"bezier"==F?t._enableSmartLabels?R(be.bezierPath)?"":be.bezierPath.points:be.points:ve),me=pe.text;if(q.x=parseFloat(pe.x),q.y=parseFloat(pe.y),""==me||w||(ce="start"==q["text-anchor"]?parseFloat(q.x+pe.width/2):R(ve)||""==ve?parseFloat(q.x):parseFloat(q.x-pe.width/2),T.dataLabelSymbol(n,t,i,ce,q.y+pe.height/2-ue.height/2-5,pe.width,pe.height,u,C)),R(ve)||""==ve||("funnel"!=S&&"pyramid"!=S||(Z=O.enableCanvasRendering?this.chartObj.pyrX:0,J=O.enableCanvasRendering?this.chartObj.pyrY:0),(R=ve.split(" "))[(k="outsideextended"!=k||"pie"!=S&&"doughnut"!=S?R.length:R.length-2)-1]=q.y-J+(pe.height/2-ue.height),R[k-2]=q.x-Z,ve=R.toString().replace(/,/g," ")),ve=0==pe.exceed?"":ve,!O.enableCanvasRendering&&!this.chartObj.vmlRendering||"object"!=typeof me||w)w||C.svgRenderer.drawText(q,me,C.gSeriesTextEle[n]);else for(var ge=0,fe=q.y,_e=q.x;ge<me.length;ge++)q.y=parseFloat(fe)+ge*l.height,q.x=_e,C.svgRenderer.drawText(q,me[ge],C.gSeriesTextEle[n])}("pyramid"==S||"funnel"==S)&&A.template&&t._enableSmartLabels&&(W=(be=T.updateSmartLabel(e,t,i,s)).xPos,X=be.yPos,ve=be.connectorDirection);var ve,be=[];be[0]=Z,be[1]=J,"bezier"==F&&!C.vmlRendering&&"pyramid"!=S&&"funnel"!=S||""==ve||ve&&(ve={id:C.svgObject.id+"_connectorLine_series"+n+"_point_"+i,stroke:M.color||D,"stroke-width":M.width,d:ve},C.svgRenderer.drawPath(ve,C.gConnectorEle[n],be))}},_overlapLegend:function(e,t,i,s){var n=xe(i.svgObject).height(),a=xe(i.svgObject).width(),r=i.model.LegendActualBounds,o=i.model.elementSpacing,l=i.model.series[s].marker.dataLabel.margin,d=i.model.series[s].marker.dataLabel.shape,h="none"!=d?l.top:0,c="none"!=d?l.bottom:0,s=ej.EjSvgRender.utils._measureText(e).height,d=e.y+s+c,s=e.y-h,c=i.model.legend.position.toLowerCase(),e=i.model.title.subTitle,l=i.model.margin,h=i.model.border.width,e=""==e.text?0:ej.EjSvgRender.utils._measureText(e.text,a-l.left-l.right,e.font).height+o,e=i.model._titleLocation?i.model._titleLocation.Y:0+e,t=t,t="bottom"==c?n-i.model.LegendActualBounds.Height-o<d?"":t:s<(0==e?h+o:e+o)+r.Height?"":t;return n<d&&(t=""),t},updateWrappedText:function(e,t,i,s,n,a,r,o,l,d,h,c){var u,p,m,g,f,_,v,b,x,y,w,C,S,T,R=this.chartObj,k=s,O={},D=i.width,I=i.height,j=e.x,L=e.y,A=j,E=!0,s=R.model.m_AreaBounds.X,i=L;if(ej.util.isNullOrUndefined(c)||""==c||(T="object"==typeof c?(g=c.X,c.Y):-1<(x=c.split(" "))[(y="outsideextended"==d||"bezier"==h.connectorLine.type.toLowerCase()?x.length-2:x.length)-1].indexOf(",")?(g=(b=x[y].split(","))[0],b[1]):(g=x[y-2],x[y-1])),"pie"==n||"doughnut"==n?"inside"==d?(l=ej.util.isNullOrUndefined(l)?0:l,C=-.5*Math.PI,f=k.startAngle+C,_=k.endAngle+C,S=k.midAngle+C,v=180/Math.PI*S%360,Math.PI,Math.PI,j="doughnut"==n?.75:.5,A=this.getXCordinate(a,o*j,S),i=this.getYCordinate(r,o*j,S),L=this.getXCordinate(a,o,f),b=this.getYCordinate(r,o,f),x=this.getXCordinate(a,o,_),w=this.getYCordinate(r,o,_),y=this.getXCordinate(a,o,S),C=this.getYCordinate(r,o,S),j=this.getXCordinate(a,l,S),S=this.getYCordinate(r,l,S),(w=this.getSegementMinMax([L,x,"doughnut"==n?j:a,y],[b,w,"doughnut"==n?S:r,C])).width=w.height>o?w.height:w.width,S=.75*w.width):"outside"!=d&&"outsideextended"!=d||"pie"!=n&&"doughnut"!=n||""==c||(R.model.m_AreaBounds,C=R.svgWidth-s,S=g<=a?g-s:C-g,A=g,i=T):(T=R.svgWidth,"outside"==d?S=T-g:(S=k.width,R.isPointInPolygon(k.Polygon,{x:A+D,y:i})||(S="funnel"==n?k.Polygon[3].x-k.Polygon[4].x:k.Polygon[1].x-k.Polygon[0].x,(E=k.Polygon[3].y-k.Polygon[0].y-10<=(D=Math.round(D/S)*I)||S<=50)?S=T-A-s:(e["text-anchor"]="middle",A=("funnel"==n?k.Polygon[4]:k.Polygon[0]).x+S/2+(R.model.enableCanvasRendering?R.pyrX:0),i=(k.Polygon[0].y+k.Polygon[3].y)/2-D/2+(R.model.enableCanvasRendering?R.pyrY:0),k._labelPlacement="insidenooverlap")))),"inside"!=d&&""==c&&ej.util.isNullOrUndefined(c))p="";else{c=null!=h.maximumLabelWidth?h.maximumLabelWidth:parseFloat(S),p=t,p=R._rowsCalculation({text:p.toString(),font:h.font},c,void 0).textCollection,m=xe.extend([],p);for(var P=0;P<m.length-1;P++)m[P+1]=m[P].concat("<br/>",m[P+1]);m=m[m.length-1]}h=ej.EjSvgRender.utils._measureText(m,S,h.font);return h.height+=I/2,"pie"!=n&&"doughnut"!=n||"inside"!=d||(i=i-h.height/2+I/2,p=h.height>w.height?"":p,""==(p=h.width>w.width?"":p)&&(h.width=0,h.height=0)),O="undefined"==this.currentBoundary?"undefined":this.currentBoundary,this.currentBoundary={X:A-h.width/2,Y:parseFloat(i),Height:h.height,Width:h.width},O&&"insidenooverlap"!=k._labelPlacement?(r=this.checkOverlapping(R,this.currentBoundary,O,n,p,u,v,d,{startAngle:f,endAngle:_,radius:o,centerX:a,centerY:r}))[1]&&""!=r[2]?(A=(O=r[0]).X+O.Width/2,i=O.Y,p=r[2],h.height=r[0].Height,h.width=r[0].Width):p=r[2]:u=this.currentBoundary,E=""!=p&&E,this.currentBoundary=""==p?O:this.currentBoundary,{text:p,x:A,y:i,exceed:E,height:h.height,width:h.width}},checkOverlapping:function(e,t,i,s,n,a,r,o,l){var d,h=!1,c=this.getOverlapArea(t,i),h=c.overlap,u=c.xOverlap,p=c.yOverlap;h&&("pie"==s||"doughnut"==s?"inside"==o.toLowerCase()?"X"==(p<=u?"Y":"X")?(d=0<r&&r<180?-1:1,t.X+=d*(u+10)):(d=90<r&&r<270?-1:1,t.Y+=d*(p+10)):t.Y-=p+10:t.Y="funnel"==s?i.Y-t.Height-10:i.Y+i.Height+10),"pie"!=s&&"doughnut"!=s&&"pieofpie"!=s||"inside"!=o.toLowerCase()?"funnel"==s?t.Y+t.Height>=i.Y&&(n=""):"pyramid"==s&&t.Y+t.Height<=i.Y+i.Height&&(n=""):(n=1==(c=this.getOverlapArea(t,a)).overlap?"":n,h=1==c.overlap||h,n=this.checkSegmentExceeding(t,l)?n:"");e.model.m_AreaBounds;return[{X:t.X,Y:t.Y,Height:t.Height,Width:t.Width},h,n]},getOverlapArea:function(e,t){var i=Math.max(0,Math.min(e.X+e.Width,t.X+t.Width)-Math.max(e.X,t.X)),t=Math.max(0,Math.min(e.Y+e.Height,t.Y+t.Height)-Math.max(e.Y,t.Y));return{overlap:0<i*t,xOverlap:i,yOverlap:t}},getSegementMinMax:function(e,t){var i,s;return e.sort(function(e,t){return e-t}),t.sort(function(e,t){return e-t}),{minX:i=e[0],maxX:s=e[3],minY:e=t[0],maxY:t=t[3],width:s-i,height:t-e}},checkSegmentExceeding:function(e,t){var i=!1,s=e.X+e.Width/2,n=e.Y+e.Height/2,e=s-t.centerX,s=n-t.centerY,n=Math.atan2(s,e);return Math.abs(Math.sqrt(e*e+s*s))<=t.radius&&(s=2*Math.PI,n=n<0?s+n:n,t.startAngle=t.startAngle<0?s+t.startAngle:t.startAngle,t.endAngle=t.endAngle<0?s+t.endAngle:t.endAngle,(n<=t.endAngle&&n>=t.startAngle||n<=s&&n>=t.startAngle&&t.endAngle<t.startAngle||0<n&&n<=t.endAngle&&t.startAngle>t.endAngle)&&(i=!0)),i},drawBezierSegment:function(e,t,i,s,n){for(var a=ej.EjSvgRender.utils._getStringBuilder(),r=new ej.seriesTypes[t.type.toLowerCase()],o=0;o<=16;o++){var l=o/16,l=r.GetBezierPoint(l,e,0,e.length,t);a.append(l.X+","+l.Y+" ")}i={id:s.svgObject.id+"_bezierLine_series"+n+"_point"+i,stroke:t.marker.dataLabel.connectorLine.color||s.model.pointColors[i],"stroke-width":t.marker.dataLabel.connectorLine.width,fill:"none",points:a.toString()};if(t._enableSmartLabels)return i;s.svgRenderer.drawPolyline(i,s.gConnectorEle)},GetBezierPoint:function(e,t,i,s,n){var a=new ej.seriesTypes[n.type.toLowerCase()];if(1==s)return t[i];var r=a.GetBezierPoint(e,t,i,s-1,n),i=a.GetBezierPoint(e,t,i+1,s-1,n),s=r.X||r.x,n=r.Y||r.y,s=(1-e)*s+e*(i.X||i.x),i=(1-e)*n+e*(i.Y||i.y);return r.x?{x:s,y:i}:{X:s,Y:i}},drawLabelTemplate:function(e,t,i,s,n){n&&(this.chartObj=n);var a,r=this.chartObj.model.m_AreaBounds.X,o=this.chartObj.model.m_AreaBounds.Y,l=this.chartObj.model.m_AreaBounds.Width,d=this.chartObj.model.m_AreaBounds.Height,h=xe.inArray(e,this.chartObj.model._visibleSeries),c=this.chartObj.model.AreaType,u=this.chartObj.model.series[h],p=0,m=0,g=this.chartObj._id,f=xe.extend(!0,{},e.marker,t.marker),n={interior:f.dataLabel.fill,opacity:f.dataLabel.opacity,borderColor:f.dataLabel.border.color,borderWidth:f.dataLabel.border.width};this.chartObj.model.chartRegions[i]&&this.chartObj.model.chartRegions[i].type;if("none"!=c||this.chartObj.model.enable3D){var _=0!=xe("#template_group_"+g).length?xe("#template_group_"+g):xe("<div></div>").attr("id","template_group_"+g);if(_.css("position","relative").css("z-index",1e3),0==xe("#"+f.dataLabel.template).length)return;var v=xe("#"+f.dataLabel.template).clone();xe(v).attr("id",f.dataLabel.template+"_"+h+"_"+i+"_"+g);var b=xe(v);b.css("position","absolute");var x=t.x;t.dataLabeltemplate=!0,t.id=f.dataLabel.template+"_"+h+"_"+i+"_"+g,-1<e.xAxis._valueType.indexOf("datetime")&&(t.x=ej.format(new Date(t.xValue),ej.util.isNullOrUndefined(e.xAxis.labelFormat)?"datetime"==e.xAxis._valueType?ej.EjSvgRender.utils._dateTimeLabelFormat(e.xAxis._intervalType,e.xAxis):ej.EjSvgRender.utils._dateTimeLabelFormat(e.xAxis.intervalType,e.xAxis):e.xAxis.labelFormat,this.chartObj.model.locale)),"category"==e.xAxis._valueType.toLowerCase()&&(t.x=ej.EjSvgRender.utils._getLabelContent(i,e.xAxis,this.chartObj.model.locale)),t.count=1;var y={series:e,point:t};b.html(b.html().parseTemplate(y)),t.x=x;var v="cartesianaxes"!=c&&e.enableAnimation&&"pyramid"!=e.type.toLowerCase()&&"funnel"!=e.type.toLowerCase()?"none":"block";b.css("display",v).appendTo(xe(_)),xe(_).appendTo("#chartContainer_"+g);y=this.chartObj.model.m_AreaBounds;"cartesianaxes"!=c||this.chartObj.model.enable3D||(p=y.X+(this.chartObj.model.requireInvertedAxes?u.yAxis:u.xAxis).plotOffset,m=u.yAxis.y),x=b.width()/2,v=b.height(),_=ej.util.isNullOrUndefined(n)&&n.interior?n.interior:"none"==c?this.chartObj.model.pointColors[i]:this.chartObj.model.seriesColors[h]}else _=ej.util.isNullOrUndefined(n)&&n.interior?n.interior:this.chartObj.model.pointColors[i],x=this.chartObj.model.circleCenterX[h]>s.X?t.size.width:0,b=xe("#template_group_"+g).find("#"+f.dataLabel.template+"_"+h+"_"+i+"_"+g),t.id=f.dataLabel.template+"_"+h+"_"+i+"_"+g,v=this.chartObj.model.enable3D?0:t.size.height/2;"hilo"!=u.type&&"hiloopenclose"!=u.type&&"candle"!=u.type||(_=u._visiblePoints[i]._hiloFill),_="array"==jQuery.type(_)?_[0].color:_,i=(g=-1!=u.type.indexOf("bar")?(a=s.X+p-x,s.Y+(this.chartObj.model.enable3D?0:y.Y)-v+u.xAxis.plotOffset):(a=s.X+p-x,m+s.Y-v),s.X+p+x);s=b[0].style.backgroundColor;b.css("left",a).css("top",g).css("background-color",""!=s?s:_).css("display","block").css("cursor","default"),"cartesianaxes"!=this.chartObj.model.AreaType?(t.xPos=a-this.chartObj.pyrX,t.yPos=g-this.chartObj.pyrY,t.textOptionsacc={x:a-this.chartObj.pyrX,y:g-this.chartObj.pyrY}):t.y==t.low?(t.xPosLow=a,t.yPosLow=g,t.textOptionsLow={x:a,y:g},t.dataLabelLow={textX:a,textY:g,x:a,y:g}):(t.xPos=a,t.yPos=g,t.seriesIndex=h,t.textOptions={x:a,y:g},t.dataLabel={textX:a,textY:g,x:a,y:g},t.margin={top:0,bottom:0,left:0,right:0}),t.height=b.outerHeight(),t.width=b.outerWidth();t=h=_=s=0;"cartesianaxes"==c&&(a>p+y.Width||g+v>y.Y+y.Height||a<p||g<m||a>p+y.Width||g>m+y.Height||i>y.Width+y.X)&&(a<r&&(_=r-a),d+o<g+v&&(t=v-(g+v-(d+o))),g<o&&(h=o-g),l+r<a+(x=b.outerWidth())&&(s=x-(a+x-(l+r))),s=0==s?x:s,t=0==t?v:t,u.marker.dataLabel.showEdgeLabels||(document.getElementById(b[0].id).style.clip="rect("+h+"px,"+s+"px,"+t+"px,"+_+"px)"))},animateLabelTemplate:function(e){for(var t=xe.inArray(e,this.chartObj.model._visibleSeries),i=e._visiblePoints.length,s=0;s<i;s++){var n=e.marker.dataLabel.template+"_"+t+"_"+s+"_"+this.chartObj._id;(n=xe("#"+n)).css("display","none"),n.delay(1e3).fadeIn(300)}},textPosition:function(e,t,i,s,n,a,r,o,l,d,h){var c=xe.extend(!0,{},e.marker,i.marker).dataLabel,u=c.isReversed,p=c.horizontalTextAlignment.toLowerCase(),m=c.verticalTextAlignment.toLowerCase(),g=(e._visiblePoints.length,o),f=c.margin,_=e.yAxis.isInversed,v=this.chartObj._getXCrossValue(e,e.xAxis,d),o=-1!=n.indexOf("bar")||-1!=n.indexOf("column")&&"rangecolumn"!=n?this.chartObj.model.requireInvertedAxes?"bar":"column":n;if("column"==o||"stackingcolumn"==o||"stackingcolumn100"==o){var b=this.chartObj.model.chartRegions[g].Region.Bounds,x=d.axes[e.xAxis.name]._validCross||!1;C=b.Height,w=b.Width,x?(y=Math.abs((_?e.yAxis.visibleRange.min:e.yAxis.visibleRange.max)-v)/e.yAxis.visibleRange.delta*e.yAxis.height,"bottom"==h?r=r<=y?r+C-f.bottom:r-C+s.height-f.bottom:"middle"==h?r<y?r+=C/2+s.height/4:r-=C/2:r<y&&_||r<y&&!_?r-=10+2*s.height/2:r+=10+2*s.height/2):"bottom"==h?r=i.y>=v&&!e.yAxis.isInversed||i.y<v&&e.yAxis.isInversed?r+C-f.bottom:s.height+f.bottom:"middle"==h?i.y>v&&!e.yAxis.isInversed||i.y<v&&e.yAxis.isInversed?r+=C/2+s.height/4:r-=C/2:i.y>v&&e.yAxis.isInversed||i.y<v&&!e.yAxis.isInversed?r+=10:r-=10,p&&"far"==p?a=u?a-w/2:a+w/2:p&&"near"==p&&(a=u?a+w/2:a-w/2),m&&"near"==m?r+="bottom"==h?10:7:m&&"far"==m&&(r-=10)}else if(-1!=o.indexOf("bar")){var y,w=(b=this.chartObj.model.chartRegions[g].Region.Bounds).Width,x=d.axes[e.xAxis.name]._validCross||!1,C=b.Height;r+=s.height/4,x?(x=e.xAxis._crossValue||0,y=Math.abs(_?e.yAxis.visibleRange.max:e.yAxis.visibleRange.min-x)/e.yAxis.visibleRange.delta*e.yAxis.width,"bottom"==h?a=a<y&&!_||y<=a&&_?a+w-s.width:a-w+f.left:"middle"==h?a=a<y&&!_||y<=a&&_?a+w/2-s.width/2:a-w/2-s.width/2:a<y&&!_||y<=a&&_?a-=10+2*s.width/2:a+=10+2*s.width/2):"bottom"==h?0<=i.y&&!e.yAxis.isInversed||i.y<0&&e.yAxis.isInversed?a=-1==o.indexOf("stacking")&&0<t?a-w+s.width/2:f.left+s.width/4:a+=w-s.height-f.right:"middle"==h?0<i.y&&!e.yAxis.isInversed||i.y<0&&e.yAxis.isInversed?a-=w/2+s.width/2:a+=w/2:0<=i.y&&!e.yAxis.isInversed||i.y<0&&e.yAxis.isInversed?a+=s.width/4+10:a-=s.width/4+10,p&&"far"==p?a+="bottom"==h?s.width-s.width/4:s.width/4+10:p&&"near"==p?a-="bottom"==h?s.width/4:10-s.width/4-3:a+=s.width/4,m&&"near"==m?r+=C/2:m&&"far"==m&&(r-=C/2)}else if("rangecolumn"==o){var b=this.chartObj.model.chartRegions[g].Region.Bounds,S=0,T=0;i.high!=i.y&&(S=b.Height,T=b.Width),this.chartObj.model.requireInvertedAxes?"top"==h?a=a-T+(10+2*s.width/2):"bottom"==h?a=a-T-(2*s.width+10):"middle"==h&&(a-=T):"top"==h?r+=S-10:"bottom"==h?r=r+S+(2*s.height+10):"middle"==h&&(r+=S),p&&"far"==p.toLowerCase()?a+=b.Width/2:p&&"near"==p.toLowerCase()&&(a-=b.Width/2),m&&"near"==m.toLowerCase()?r+=7:m&&"far"==m.toLowerCase()&&(r-=10)}else if("boxandwhisker"==o){b=this.chartObj.model.chartRegions[g].Region.Bounds,S=0,T=0;this.chartObj.model.requireInvertedAxes?"top"==h?a=a-T+(10+2*s.width/2):"bottom"==h?a=a-T-(2*s.width+10):"middle"==h&&(a-=T):"top"==h?r+=S-3:"bottom"==h?r+=S+10+s.width/2:"middle"==h&&(r+=S+10),p&&"far"==p.toLowerCase()?a+=2*s.width:p&&"near"==p.toLowerCase()&&(a-=2*s.width),m&&"near"==m.toLowerCase()?r="top"==h?r+10:r-10:m&&"far"==m.toLowerCase()&&(r="top"==h?r-10:r+10)}else if("waterfall"==n){C=(b=this.chartObj.model.chartRegions[g].Region.Bounds).Height,w=b.Width,b=i.waterfallSum<0||!i.showIntermediateSum&&!i.showTotalSum&&i.y<0;switch(h){case"bottom":e.isTransposed?a=e.yAxis.isInversed?a+w-(10+2*s.height/2)-(b?w:0):a-w+(10+2*s.height/2)+(b?w:0):r=e.yAxis.isInversed?r-s.height+f.bottom+(b?C:0):r+C-f.bottom-(b?C:0);break;case"middle":e.isTransposed?a=e.yAxis.isInversed?a+w/2-(b?w:0):a-(w/2+s.width/4)+(b?w:0):r=e.yAxis.isInversed?r-C/2+(b?C:0):r+(C/2+s.height/4)-(b?C:0);break;default:e.isTransposed?a=e.yAxis.isInversed?a-(10+2*s.height/2)-(b?w:0):a+(10+2*s.height/2)+(b?w:0):r=e.yAxis.isInversed?r+(10+2*s.height/2)+(b?C:0):r-(10+2*s.height/2)-(b?C:0)}p&&"far"==p?a+=w/2:p&&"near"==p&&(a-=w/2),m&&"near"==m?r+="bottom"==h?s.height/3:s.height+10:m&&"far"==m&&(r-="bottom"==h?s.height/3:10+s.height/2)}else if("polar"==n||"radar"==n)r+=s.height/4,"bottom"==h?r+=s.height:"top"==h&&(r-=s.height),p&&"far"==p?a+=s.width:p&&"near"==p&&(a-=s.width),m&&"near"==m?r+=s.height/2:m&&"far"==m&&(r-=s.height/2);else{if(("rangearea"==o||"splinerangearea"==o)&&i.high!=i.y)if(1==this.chartObj.model.series.length){var R=this.chartObj.model.chartRegions[t][l].region.length;r=this.chartObj.model.chartRegions[t][l].region[R-1].Y,a=this.chartObj.model.chartRegions[t][l].region[R-1].X}else{for(var k=0,O=0;O<t;O++){var D=this.chartObj.model.series[O].type;k+="rangearea"!=D&&"splinerangearea"!=D?this.chartObj.model.series[O].points.length:1,"hidden"==this.chartObj.model.series[O].visibility&&(k=0)}R=this.chartObj.model.chartRegions[k][l].region.length;r=this.chartObj.model.chartRegions[k][l].region[R-1].Y,a=this.chartObj.model.chartRegions[k][l].region[R-1].X}this.chartObj.model.requireInvertedAxes?"top"==h?a+=10:"bottom"==h&&(a-=10+2*s.width/2):"bottom"==h?c.showEdgeLabels?r+=2*s.height-10:r+=2*s.height+10:"top"==h&&(r-=10),p&&"far"==p?a+=s.width+10:p&&"near"==p&&(a-=s.width+10),m&&"near"==m?r+=7:m&&"far"==m?r-=10:"bubble"!=n&&"scatter"!=n||"middle"!=h||(r+=s.height/4)}return{x:a,y:r}},changeCrossHairSymbol:function(e,t,i,s,n){var a,r,o=n.drawType;return ej.util.isNullOrUndefined(t)||(a={},e=xe.extend(!0,{},n.marker,e),a=xe.extend(!0,{},this.chartObj.model.crosshair.marker,a),r=n.points[i],t=n.type.toLowerCase(),ej.util.isNullOrUndefined(a.shape)&&(a.shape=e.shape,"bubble"==t&&(a.border.color=(r.border&&r.border.color?r:n).border.color,a.border.width=(r.border&&r.border.width?r:n).border.width)),this.chartObj.model.crosshair.visible&&!ej.util.isNullOrUndefined(a.fill)||"bubble"==n.type.toLowerCase()||"scatter"==n.type.toLowerCase()||"scatter"==o||("cross"==a.shape.toLowerCase()||"horizline"==a.shape.toLowerCase()||"vertline"==a.shape.toLowerCase()?a.fill="array"==jQuery.type(this.chartObj.model.seriesColors[s])?this.chartObj.model.seriesColors[s][0].color:this.chartObj.model.seriesColors[s]:a.fill=e.border.color),"bubble"!=n.type.toLowerCase()||this.chartObj.model.enableCanvasRendering?(a.size.width<=e.size.width&&(a.size.width=e.size.width+2),a.size.height<=e.size.height&&(a.size.height=e.size.height+2),!ej.util.isNullOrUndefined(a.border.color)&&this.chartObj.model.crosshair.visible||(ej.util.isNullOrUndefined(e.fill)?"scatter"==t?(a.border.color=(r.border&&r.border.color?r:n).border.color,a.border.width=(r.border&&r.border.width?r:n).border.width):a.border.color=r.fill||("array"==jQuery.type(this.chartObj.model.seriesColors[s])?this.chartObj.model.seriesColors[s][0].color:this.chartObj.model.seriesColors[s]):a.border.color="array"==jQuery.type(e.fill)?e.fill._gradientStop[0].color:e.fill)):(i=xe(this.chartObj.gSeriesEle).find("#"+this.chartObj.svgObject.id+"_Series"+s+"_Point"+i)[0].getBoundingClientRect(),a.size.width=(i.right-i.left)/2+15,a.size.height=(i.bottom-i.top)/2+15)),n._trackMarker=a},dataLabelSymbol:function(e,t,i,s,n,a,r,o,l,d){var h,c,u=l;"None"!=o&&(h=u.model._isPieOfPie?ej.ejChart._getPieOfPiePoint(i,t):t._visiblePoints[i],n={startX:s,startY:n},l.model.enable3D||(c=d||u.gDataLabelEle[e]),c=u.model.enableCanvasRendering?null:c,i={style:{interior:(t=xe.extend(!0,{},t.marker,h.marker)).dataLabel.fill,opacity:t.dataLabel.opacity,borderColor:t.dataLabel.border.color,borderWidth:t.dataLabel.border.width},gradientName:"symbol",symbolEle:c,width:a,height:r,point:h,location:n,seriesIndex:e,pointIndex:i,element:t,symbolName:o,id:u.svgObject.id+"_dataLabel_series"+e+"_"+i},this.drawSymbolStyle(i,u))},drawSymbolStyle:function(e,t){var i,s,n,a=t,r=e.style,o=e.gradientName,l=e.symbolEle,d=e.width,h=(e.dashArray,e.height),c=e.point,u=e.location,p=e.seriesIndex,m=e.visibility,g=e.pointIndex,f=e.element,_=e.symbolName,v=e.trackSymbol,b=a.model.enableCanvasRendering,x="polaraxes"==a.model.AreaType,y=a.model.series[p];null!=r&&(""!=r.borderColor&&(i=r.borderColor||"transparent"),n=r.opacity,s=r.borderWidth<0?0:r.borderWidth);var w,C=null;C=r.interior?ej.util.isNullOrUndefined(r.interior._gradientStop)?r.interior:r.interior._gradientStop:c.fill?"array"==jQuery.type(c.fill)?c.fill[0].color:c.fill:(w=a.model.pointColors,"none"!=a.model.AreaType?"waterfall"==y.type.toLowerCase()&&y.positiveFill&&(0<c.y||0<c.waterfallSum)?y.positiveFill:a.model.seriesColors[p]:"array"==jQuery.type(w[g])?w[g][0].color:w[g]),a.symbolColorName=a.svgRenderer.createGradientElement(o+p,C,0,0,0,xe(a.svgObject).height(),l);var S,T,R,g={dashArray:e.dashArray,ShapeSize:{width:d,height:h},Style:{BorderColor:i,BorderWidth:s,Opacity:n,Visibility:m,Color:a.symbolColorName},PointIndex:g,SeriesIndex:p,Imageurl:f.imageUrl,Image:f.image,ID:e.id},f=xe.extend({},ej.EjSvgRender.commonChartEventArgs);f.data={location:u,style:g},a._trigger("symbolRendering",f),f.cancel||(b?(u.startY=a.model.requireInvertedAxes?u.startY:u.startY+(y.yAxis.y?y.yAxis.y-a.canvasY:0),u.startX=a.model.requireInvertedAxes?u.startX:u.startX+(y.xAxis.x?y.xAxis.x-a.canvasX:0),f.data.location.startY=u.startY,ej.util.isNullOrUndefined(v)?"cartesianaxes"==a.model.AreaType?(l=a.svgRenderer.ctx,a.svgRenderer.ctx.save(),a.svgRenderer.ctx.beginPath(),a.model.requireInvertedAxes?a.svgRenderer.ctx.rect(y.yAxis.x,y.xAxis.y,y.yAxis.width,y.xAxis.height):a.svgRenderer.ctx.rect(y.xAxis.x,y.yAxis.y,y.xAxis.width,y.yAxis.height),a.svgRenderer.ctx.clip(),ej.EjSvgRender.chartSymbol["_draw"+_](f.data.location,f.data.style,a,l),a.svgRenderer.ctx.restore()):(b&&x&&(a.svgRenderer.ctx.save(),a.svgRenderer.ctx.beginPath(),a.svgRenderer.ctx.arc(a.model.centerX,a.model.centerY,a.model.Radius,0,2*Math.PI,!1),a.svgRenderer.ctx.clip()),ej.EjSvgRender.chartSymbol["_draw"+_](f.data.location,f.data.style,a,l),b&&x&&a.svgRenderer.ctx.restore()):(S=f.data.style.PointIndex,T=f.data.style.SeriesIndex,a.model.series[T].highlightSettings.enable||0==xe("#"+a._id+"_selection_"+T+"_"+S+"_canvas").length&&a.svgRenderer.trackSymbol(f.data.style,f.data.location,_,v,a))):(S=f.data.style.PointIndex,T=f.data.style.SeriesIndex,R=y.type,y.highlightSettings.enable&&v&&!a.model.crosshair.visible?(r=xe.extend(!0,f.data.style),y=y.highlightSettings,r.Style.Color="none"==y.pattern.toLowerCase()||""==y.pattern?""!=y.color?y.color:r.Style.Color:"url(#"+y.pattern.toLowerCase()+"_Highlight_2D_"+T+")",r.Style.Opacity=y.opacity,r.Style.BorderColor=y.border.color,r.Style.BorderWidth=y.border.width,xe("bubble"==R?"#"+this.chartObj.svgObject.id+"_Series"+T+"_Point"+S:"#"+this.chartObj.svgObject.id+"_Series"+T+"_Point"+S+"_symbol").attr("class")!="SelectionStyleseries"+T&&ej.EjSvgRender.chartSymbol["_draw"+_](f.data.location,r,a,a.model.enable3D?t.chart3D:l)):xe("scatter"==R?"#"+a.svgObject.id+"_Series"+T+"_Point"+S+"_symbol":"#"+a.svgObject.id+"_Series"+T+"_Point"+S).attr("class")!="SelectionStyleseries"+T&&ej.EjSvgRender.chartSymbol["_draw"+_](f.data.location,f.data.style,a,a.model.enable3D?t.chart3D:l))),!t.chart3D&&"pieofpie"!=R&&"none"==a.model.AreaType&&xe(l).children().not("defs").length>a.model._visibleSeries[p]._visiblePoints.length&&xe(l.childNodes[e.pointIndex]).replaceWith(xe(l.childNodes[xe(l.childNodes).length-1]))},drawSymbol:function(e,t,i,s,n,a,r,o){t.drawType;ej.util.isNullOrUndefined(this.chartObj)&&(this.chartObj=a);var l,d,h,c,u=t._visiblePoints[i],p=t.type.toLowerCase(),m="boxandwhisker"==p?o:i,a="bubble"==p||"scatter"==p?t.border.dashArray:"",g="None",o=this.changeCrossHairSymbol(u.marker||t.marker,r,i,e,t);l="boxandwhisker"==p.toLowerCase()?o||xe.extend(!0,{},t.outlierSettings,u.outlierSettings,t.border,u.border):o||xe.extend(!0,{},t.marker,u.marker),xe.each(this.chartObj.model.symbolShape,function(e){l.shape.toLowerCase()==e.toLowerCase()&&(g=e)}),"None"!=g&&(n="cartesianaxes"==this.chartObj.model.AreaType?{startX:s+this.chartObj.canvasX,startY:n+this.chartObj.canvasY}:{startX:s,startY:n},c="scatter"==p||"scatter"==t.drawType?(c=(u.border&&u.border.color?u:t).border.color,d=(u.border&&u.border.width?u:t).border.width,{interior:l.fill,opacity:l.opacity,borderColor:c,borderWidth:d}):"boxandwhisker"==p?(c=u.border&&u.border.color?"transparent"==u.border.color?this.chartObj._saturationColor(t.fill,-.6):u.border.color:"transparent"==t.border.color?this.chartObj._saturationColor(t.fill,-.6):t.border.color,d=(u.border&&u.border.width?u:t).border.width,{interior:t.fill,opacity:t.opacity,borderColor:c,borderWidth:d}):{interior:l.fill,opacity:l.opacity,borderColor:l.border.color,borderWidth:l.border.width},d=r?this.chartObj.gTrackerEle:this.chartObj.gSymbolGroupEle[e],m=r?this.chartObj.svgObject.id+"_trackSymbol_"+e+"_"+m:this.chartObj.svgObject.id+"_Series"+e+"_Point"+m+"_symbol",a={style:c,gradientName:r?"TrackSymbol":"symbol",symbolEle:d,width:c=l.size.width,height:d=l.size.height,point:u,location:n,seriesIndex:e,pointIndex:i,element:l,visibility:u.visible?"visible":"hidden",symbolName:g,trackSymbol:r,id:m,dashArray:a},this.chartObj.model.enableCanvasRendering||(h=this.chartObj.gSymbolGroupEle[e].childNodes[i]),ej.util.isNullOrUndefined(h)||"image"!=g.toLowerCase()?this.drawSymbolStyle(a,this.chartObj,r):(h.setAttribute("width",c),h.setAttribute("height",d)),"scatter"==t.type.toLowerCase()&&(r=t.xAxis.x,h=t.yAxis.y,this.chartObj.model.enableCanvasRendering&&(h=r=0),c={X:r+n.startX-d/2,Y:h+n.startY-c/2,Height:d,Width:c},ej.EjSvgRender.utils._addRegion(this.chartObj,c,t,null,i)))},chartAreaType:"cartesianAxes",requireInvertedAxes:!1,stackingSeries:!1,hiloTypes:!1},ej.ejLineSeries=e(ej.EjSeriesRender),ej.seriesTypes.line=ej.ejLineSeries,ej.ejStepLineSeries=e(ej.EjSeriesRender,{draw:function(e,t){var i=this.chartObj=e;t._animationType="path";var s=ej.EjSvgRender.utils._getStringBuilder(),n=t,e=this.setLineSeriesStyle(n);n.sorting&&(n.points=ej.DataManager(n.points,ej.Query().sortBy("xValue")).executeLocal());for(var a,r,o,l,d=t._visiblePoints=100<n.points.length||!n.enableSmartLabels?this.improveChartPerformance(n):this._isVisiblePoints(n),h=null,c="M",u=-1,p=0;p<d.length;p++)(a=d[p]).visible?(null!=h&&(d.length>u+1&&(l={xValue:d[u+1].xValue,YValues:[h.YValues[0]]},r=ej.EjSvgRender.utils._getPoint(h,n),o=ej.EjSvgRender.utils._getPoint(l,n),l=ej.EjSvgRender.utils._getPoint(d[u+1],n),i=this.chartObj,s.append(c+" "+(r.X+i.canvasX)+" "+(r.Y+i.canvasY)+" L "+(o.X+i.canvasX)+" "+(o.Y+i.canvasY)+" L "+(l.X+i.canvasX)+" "+(l.Y+i.canvasY)+" ")),c="L"),h=a,u=p):(h=null,c="M");t=s.toString(),this._drawLinePath(n,e,t),this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)}}),ej.ejStepAreaSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,t._animationType="path";var s=this.chartObj.model.requireInvertedAxes,n=ej.EjSvgRender.utils._getStringBuilder(),a=t,e=this.setAreaSeriesStyle(a);a.sorting&&(a.points=ej.DataManager(a.points,ej.Query().sortBy("xValue")).executeLocal());var r=t._visiblePoints=100<a.points.length||!a.enableSmartLabels?this.improveChartPerformance(a):this._calculateVisiblePoints(a).visiblePoints,o=0,l=null;"category"==a.xAxis._valueType.toLowerCase()&&"onticks"!=a.xAxis.labelPlacement.toLowerCase()&&(o=.5);for(var d,h,c,u,p,m=ej.EjSeriesRender.prototype.getOrigin(this,a,i),g=null,f=!0,_=this.chartObj,v=0;v<=r.length;v++)v<r.length?r[v].visible?(u={xValue:r[v].xValue-o,YValues:[r[v].y]},p=ej.EjSvgRender.utils._getPoint(u,a),g||(g={xValue:r[v].xValue-o,YValues:[m]},d=ej.EjSvgRender.utils._getPoint(g,a),n.append("M "+(d.X+_.canvasX)+" "+(d.Y+_.canvasY)+" ")),null!=l&&(h={xValue:u.xValue,YValues:[l.YValues[0]]},h=ej.EjSvgRender.utils._getPoint(h,a),f&&(n.append("L "+(c.X+_.canvasX)+" "+(c.Y+_.canvasY)+" "),f=!1),n.append("L "+(h.X+_.canvasX)+" "+(h.Y+_.canvasY)+" L "+(p.X+_.canvasX)+" "+(p.Y+_.canvasY)+" "),(0==o&&v==r.length-1||v<r.length-1&&!r[v+1].visible)&&(0<o?(u={xValue:r[v].xValue+o,YValues:[r[v].y]},p=ej.EjSvgRender.utils._getPoint(u,a),s?n.append("L "+(p.X+_.canvasX)+" "+(p.Y+_.canvasY)+" L "+(p.Y+_.canvasX)+" "+(d.X+_.canvasY)+" "):n.append("L "+(p.X+_.canvasX)+" "+(p.Y+_.canvasY)+" L "+(p.X+_.canvasX)+" "+(d.Y+_.canvasY)+" ")):s?n.append("L "+(d.X+_.canvasY)+" "+(p.Y+_.canvasX)+" "):n.append("L "+(p.X+_.canvasX)+" "+(d.Y+_.canvasY)+" "),f=!(l=g=null))),g&&(c=p,l=u)):f=!(l=g=null):r[v-1].visible&&0<o&&(u={xValue:r[v-1].xValue+o,YValues:[r[v-1].y]},p=ej.EjSvgRender.utils._getPoint(u,a),s?n.append("L "+(p.X+_.canvasX)+" "+(p.Y+_.canvasY)+" L "+(p.Y+_.canvasX)+" "+(d.X+_.canvasY)+" "):n.append("L "+(p.X+_.canvasX)+" "+(p.Y+_.canvasY)+" L "+(p.X+_.canvasX)+" "+(d.Y+_.canvasY)+" "));i=n.toString(),this.drawAreaPath(a,e,i),this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)}}),ej.seriesTypes.steparea=ej.ejStepAreaSeries,ej.seriesTypes.stepline=ej.ejStepLineSeries,ej.ejColumnSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e;var s=this.chartObj.model.requireInvertedAxes;t._animationType="rect","cylinder"==t.columnFacet&&(t._animationType="cylinder");var n=t,a=n.cornerRadius,r=xe.inArray(n,this.chartObj.model._visibleSeries),o=ej.EjSeriesRender.prototype.getOrigin(this,n,i),l=this.getSideBySideInfo(n,i);n.dragSettings.enable&&(n.sidebysideInfo=l);var d=this._isVisiblePoints(n),i=ej.EjSvgRender.utils._getTransform(n.xAxis,n.yAxis,s),i={id:this.chartObj.svgObject.id+"_SeriesGroup_"+r,transform:"translate("+i.x+","+i.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(i);for(var h=this,c=0;c<d.length;c++){var u,p,m,g,f=c,_=d[c],v=(d[c].marker,_.YValues[0]),b=o;_.visible&&(p=(u=h.calculateSides(_,l)).x1,m=u.x2,u=this.chartObj.setStyle(h,n,r,f),p=h.getRectangle(p,v,m,b,n,e),m=Math.min(0,p.Width),b=Math.min(0,p.Height),(0==m||0==b)&&0<p.Width&&(t={id:h.chartObj.svgObject.id+"_Series"+r+"_Point"+f,x:p.X+h.chartObj.canvasX,y:p.Y+h.chartObj.canvasY,width:p.Width,height:p.Height,fill:u.interior,plot:v<0?"negative":"positive","stroke-width":u.borderWidth,opacity:u.opacity,stroke:u.borderColor,"stroke-dasharray":u.dashArray},"cylinder"==n.columnFacet?h.chartObj.svgRenderer.drawCylinder(t,h.gSeriesGroupEle,{isColumn:!0,stacking:!1,isLastSeries:!0}):"object"!=typeof a&&0<a||0<a.topLeft||0<a.bottomLeft||0<a.topRight||0<a.bottomRight?(g=ej.EjSvgRender.utils._calculateroundedCorner(a,t),t.d=g,n._animationType="path",h.chartObj.svgRenderer.drawPath(t,h.gSeriesGroupEle)):"rectangle"==n.columnFacet&&h.chartObj.svgRenderer.drawRect(t,h.gSeriesGroupEle),g={X:(g=ej.EjSvgRender.utils._getSvgXY(p.X,p.Y,n,h.chartObj)).X,Y:g.Y,Width:p.Width,Height:p.Height},ej.EjSvgRender.utils._addRegion(h.chartObj,g,n,_,f)),t.plot=v<0?"negative":"positive",_.symbolLocation=s?{X:v<(n.xAxis._crossValue||0)&&!n.yAxis.isInversed||n.yAxis.isInversed&&v>(n.xAxis._crossValue||0)?p.X:p.X+p.Width,Y:p.Y+p.Height/2}:{X:p.X+p.Width/2,Y:v<(n.xAxis._crossValue||0)&&!n.yAxis.isInversed||n.yAxis.isInversed&&v>(n.xAxis._crossValue||0)?p.Y+p.Height:p.Y})}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},isRegion:!0}),ej.seriesTypes.column=ej.ejColumnSeries,ej.ejStackingColumnSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,t._animationType="rect","cylinder"==t.columnFacet&&(t._animationType="cylinder");var s=this.chartObj.model.requireInvertedAxes,n=t,a=n.cornerRadius,r=xe.inArray(n,this.chartObj.model._visibleSeries),o=this.getSideBySideInfo(n,i),l=this._isVisiblePoints(n),i=ej.EjSvgRender.utils._getTransform(n.xAxis,n.yAxis,s),i={id:this.chartObj.svgObject.id+"_SeriesGroup_"+r,transform:"translate("+i.x+","+i.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(i);for(var d=this,h=0;h<l.length;h++){var c,u,p,m,g,f=h,_=n._visiblePoints[h],v=n.stackedValue.StartValues[h],b=n.stackedValue.EndValues[h];_.visible&&(u=(c=d.calculateSides(_,o)).x1,p=c.x2,m=this.chartObj.setStyle(d,n,r,f),c=d.getRectangle(u,b,p,v,n,e),u=Math.min(0,c.Width),p=Math.min(0,c.Height),v="stackingcolumn100"==n.type,(0==u||0==p)&&0<c.Width&&(t={id:d.chartObj.svgObject.id+"_Series"+r+"_Point"+f,x:c.X+d.chartObj.canvasX,y:c.Y+d.chartObj.canvasY,width:c.Width,height:c.Height,fill:m.interior,"stroke-width":m.borderWidth,plot:b<0?"negative":"positive",opacity:m.opacity,stroke:m.borderColor,"stroke-dasharray":m.dashArray},m={isColumn:!0,stacking:v,isLastSeries:n.stackedValue.stackedSeries},"cylinder"==n.columnFacet?d.chartObj.svgRenderer.drawCylinder(t,d.gSeriesGroupEle,m):"object"!=typeof a&&0<a||0<a.topLeft||0<a.bottomLeft||0<a.topRight||0<a.bottomRight?(g=ej.EjSvgRender.utils._calculateroundedCorner(a,t),t.d=g,n._animationType="path",d.chartObj.svgRenderer.drawPath(t,d.gSeriesGroupEle)):"rectangle"==n.columnFacet&&d.chartObj.svgRenderer.drawRect(t,d.gSeriesGroupEle),m={X:(v=ej.EjSvgRender.utils._getSvgXY(c.X,c.Y,n,d.chartObj)).X,Y:v.Y,Width:c.Width,Height:c.Height},g=c.Width/2,v=Math.round(c.Height),(g=Math.round(g/4))==v&&(m.Height=c.Height+2*g),ej.EjSvgRender.utils._addRegion(d.chartObj,m,n,_,f)),_.symbolLocation=s?{X:b<(n.xAxis._crossValue||0)&&!n.yAxis.isInversed||n.yAxis.isInversed&&b>(n.xAxis._crossValue||0)?c.X:c.X+c.Width,Y:c.Y+c.Height/2}:{X:c.X+c.Width/2,Y:b<(n.xAxis._crossValue||0)&&!n.yAxis.isInversed||n.yAxis.isInversed&&b>(n.xAxis._crossValue||0)?c.Y+c.Height:c.Y})}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},stackingSeries:!0,isRegion:!0}),ej.seriesTypes.stackingcolumn=ej.ejStackingColumnSeries,ej.seriesTypes.stackingcolumn100=ej.ejStackingColumnSeries,ej.seriesTypes.rangecolumn=ej.ejRangeColumnSeries,ej.ejRangeColumnSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,t._animationType="rect";var s=this.chartObj.model.requireInvertedAxes,n=t,a=n.cornerRadius,r=xe.inArray(n,this.chartObj.model._visibleSeries),o=this.getSideBySideInfo(n,i),l=this._isVisiblePoints(n),d=ej.EjSvgRender.utils._getTransform(n.xAxis,n.yAxis,s),i={id:this.chartObj.svgObject.id+"_SeriesGroup_"+r,transform:"translate("+d.x+","+d.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(i);for(var h=this,c=0;c<l.length;c++){var u,p,m,g,f=c,_=l[c],v=_.YValues[0],b=_.YValues[1];_.visible&&(p=(u=h.calculateSides(_,o)).x1,m=u.x2,u=this.chartObj.setStyle(h,n,r,f),p=h.getRectangle(p,v,m,b,n,e),h.chartObj.model.m_AreaBounds.Width,m=Math.min(0,p.Width),b=Math.min(0,p.Height),0!=m&&0!=b||(t={id:h.chartObj.svgObject.id+"_Series"+r+"_Point"+f,x:p.X+h.chartObj.canvasX,y:p.Y+h.chartObj.canvasY,width:p.Width,height:p.Height,fill:u.interior,"stroke-width":u.borderWidth,opacity:u.opacity,stroke:u.borderColor,"stroke-dasharray":u.dashArray},"object"!=typeof a&&0<a||0<a.topLeft||0<a.bottomLeft||0<a.topRight||0<a.bottomRight?(g=ej.EjSvgRender.utils._calculateroundedCorner(a,t),t.d=g,n._animationType="path",h.chartObj.svgRenderer.drawPath(t,h.gSeriesGroupEle)):h.chartObj.svgRenderer.drawRect(t,h.gSeriesGroupEle,d.y),h.chartObj.svgRenderer.drawRect(t,h.gSeriesGroupEle,d.y),g={X:(g=ej.EjSvgRender.utils._getSvgXY(p.X,p.Y,n,h.chartObj)).X,Y:g.Y,Width:p.Width,Height:p.Height},ej.EjSvgRender.utils._addRegion(h.chartObj,g,n,_,f)),"waterfall"==n.type.toLowerCase()&&(v=_.waterfallSum||_.y),_.symbolLocation=s?{X:v<0&&!n.yAxis.isInversed||n.yAxis.isInversed&&0<v?p.X:p.X+p.Width,Y:p.Y+p.Height/2}:{X:p.X+p.Width/2,Y:v<0&&!n.yAxis.isInversed||n.yAxis.isInversed&&0<v?p.Y+p.Height:p.Y})}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},hiloTypes:!0,isRegion:!0}),ej.seriesTypes.rangecolumn=ej.ejRangeColumnSeries,ej.ejBoxandwhiskerSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e;var s=this.chartObj.model.requireInvertedAxes;t._animationType="rect";var n=t,a=xe.inArray(n,this.chartObj.model._visibleSeries),r=(ej.EjSeriesRender.prototype.getOrigin(this,n,i),this.getSideBySideInfo(n,i)),o=this._isVisiblePoints(n),s=ej.EjSvgRender.utils._getTransform(n.xAxis,n.yAxis,s),l=0,s={id:this.chartObj.svgObject.id+"_SeriesGroup_"+a,transform:"translate("+s.x+","+s.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(s);for(var d=this,h=0;h<o.length;h++){var c,u,p,m,g=h,f=o[h],_=(o[h].marker,f.YValues[0]),v=d.calculateMean(_,n,g),b=v.UpperQuartile,x=v.LowerQuartile;if(f.visible){p=(u=d.calculateSides(f,r)).x1,y=u.x2,_=this.chartObj.setStyle(d,n,a,g),c=d.getRectangle(p,b,y,x,n,e),u=Math.min(0,c.Width),p=Math.min(0,c.Height),a=xe.inArray(n,this.chartObj.model._visibleSeries),this.chartObj.setStyle(this,n,a,h),ej.EjSvgRender.utils._getStringBuilder(),y={xValue:f.xValue,YValues:v.midvalue},x=ej.EjSvgRender.utils._getPoint(y,n);var y="transparent"==_.borderColor?this.chartObj._saturationColor(_.interior,-.6):_.borderColor;if((0==u||0==p)&&0<c.Width){t={id:d.chartObj.svgObject.id+"_Series"+a+"_Point"+g,x:c.X+d.chartObj.canvasX,y:c.Y+d.chartObj.canvasY,width:c.Width,height:c.Height,fill:_.interior,"stroke-width":_.borderWidth,plot:b<0?"negative":"positive",opacity:_.opacity,stroke:y,"stroke-dasharray":_.dashArray},y={id:this.chartObj.svgObject.id+"_Series"+a+"_Point"+g+"_median",x1:n._isTransposed?x.X+d.chartObj.canvasX:c.X+d.chartObj.canvasX,y1:n._isTransposed?c.Y+d.chartObj.canvasY:x.Y+d.chartObj.canvasY,x2:n._isTransposed?x.X+d.chartObj.canvasX:c.X+c.Width+d.chartObj.canvasX,y2:n._isTransposed?c.Y+c.Height+d.chartObj.canvasY:x.Y+d.chartObj.canvasY,"stroke-width":_.borderWidth,stroke:y},d.chartObj.svgRenderer.drawRect(t,d.gSeriesGroupEle),d.chartObj.svgRenderer.drawLine(y,d.gSeriesGroupEle),y=d.calculateBoxAndWhiskerPath(t,c,y,v,n,f,g),t.d=y.lowerWhisker,t.id=t.id+"_whisker",d.chartObj.svgRenderer.drawPath(t,d.gSeriesGroupEle),t.d=y.upperWhisker,d.chartObj.svgRenderer.drawPath(t,d.gSeriesGroupEle),1==n.showMedian&&(t.d=y.mean,d.chartObj.svgRenderer.drawPath(t,d.gSeriesGroupEle));for(var w=0;w<v.outliers.length;w++)m={xValue:f.xValue,YValues:v.outliers[w]},(m=ej.EjSvgRender.utils._getPoint(m,n)).X=n._isTransposed?m.X:c.X+c.Width/2,m.Y=n._isTransposed?c.Y+c.Height/2:m.Y,this.drawSymbol(a,n,g,m.X,m.Y,null,null,l),l++,m={X:(m=ej.EjSvgRender.utils._getSvgXY(m.X,m.Y,n,d.chartObj)).X-n.outlierSettings.size.width/2,Y:m.Y-n.outlierSettings.size.height/2,Width:n.outlierSettings.size.width,Height:n.outlierSettings.size.height},ej.EjSvgRender.utils._addRegion(d.chartObj,m,n,f,g);y={X:(y=ej.EjSvgRender.utils._getSvgXY(c.X,c.Y,n,d.chartObj)).X,Y:y.Y,Width:c.Width,Height:c.Height},ej.EjSvgRender.utils._addRegion(d.chartObj,y,n,f,g)}}}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},isRegion:!0}),ej.seriesTypes.boxandwhisker=ej.ejBoxandwhiskerSeries,ej.ejWaterfallSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){ej.ejRangeColumnSeries.prototype.draw.call(this,e,t,i),t._animationType="rect";var s=this.chartObj.model.chartRegions,n=[],a=(this.chartObj.model.m_AreaBounds,xe.inArray(t,this.chartObj.model._visibleSeries));t.index=a;for(var r=0,o=0;r<s.length;r++)a==s[r].SeriesIndex&&(n[o]=s[r],o+=1);var l,d,h,c,u,p,m,i={id:this.chartObj.svgObject.id+"_SeriesGroup_waterfallLine_"+a};this.connectorLineGroup=this.chartObj.svgRenderer.createGroup(i);for(var g=0;g<n.length-1;g++)m=ej.EjSvgRender.utils._getStringBuilder(),l=n[g].Region.Bounds,d=n[g+1].Region.Bounds,t.isTransposed?(u=Math.ceil(l.X),Math.ceil(l.Width),p=Math.ceil(d.X),Math.ceil(d.Width),u=(h=Math.ceil(l.X+l.Width))!=(c=Math.ceil(d.X+d.Width))&&(u==p||u==c)?l.X:l.X+l.Width,m.append("M "+u+" "+(l.Y+l.Height)+" L "+u+" "+d.Y)):(c=Math.ceil(l.Y),Math.ceil(l.Height),u=Math.ceil(d.Y),Math.ceil(d.Height),h=Math.ceil(l.Y+l.Height),u=c==u?l.Y:h==u?d.Y:d.Y+d.Height,m.append("M "+l.X+" "+u+" L "+(d.X+d.Width)+" "+u)),""!=(m=m.toString())&&0<=l.Height&&(m={id:this.chartObj.svgObject.id+"_waterFall_"+a+"_connectorLine_"+g,fill:"none","stroke-dasharray":t.connectorLine.dashArray,"stroke-width":t.connectorLine.width,stroke:t.connectorLine.color,opacity:t.connectorLine.opacity,d:m},this.chartObj.svgRenderer.drawPath(m,this.connectorLineGroup));this.chartObj.svgRenderer.append(this.connectorLineGroup,this.chartObj.gSeriesEle),t.enableAnimation&&!t._animatedSeries&&this.chartObj.svgRenderer._setAttr(this.connectorLineGroup,{visibility:"hidden"})},hiloTypes:!1,isRegion:!0}),ej.seriesTypes.waterfall=ej.ejWaterfallSeries,ej.ejStackingBarSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,t._animationType="rect","cylinder"==t.columnFacet&&(t._animationType="cylinder");var s=this.chartObj.model.requireInvertedAxes,n=t,a=n.cornerRadius,r=xe.inArray(n,this.chartObj.model._visibleSeries),o=this.getSideBySideInfo(n,i),l=this._isVisiblePoints(n),i=ej.EjSvgRender.utils._getTransform(n.xAxis,n.yAxis,s),i={id:this.chartObj.svgObject.id+"_SeriesGroup_"+r,transform:"translate("+i.x+","+i.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(i);for(var d=this,h=0;h<l.length;h++){var c,u,p,m,g,f=h,_=l[h],v=n.stackedValue.EndValues[h],b=n.stackedValue.StartValues[h];_.visible&&(p=(u=d.calculateSides(_,o)).x1,m=u.x2,c=this.chartObj.setStyle(d,n,r,f),u=d.getRectangle(p,v,m,b,n,e),p=Math.min(0,u.Width),m=Math.min(0,u.Height),b="stackingbar100"==n.type,0!=p&&0!=m||(b={isColumn:!(t={id:d.chartObj.svgObject.id+"_Series"+r+"_Point"+f,x:u.X+d.chartObj.canvasX,y:u.Y+d.chartObj.canvasY,width:u.Width,height:u.Height,fill:c.interior,"stroke-width":c.borderWidth,opacity:c.opacity,stroke:c.borderColor,"stroke-dasharray":c.dashArray}),stacking:b,isLastSeries:n.stackedValue.stackedSeries},"cylinder"==n.columnFacet?d.chartObj.svgRenderer.drawCylinder(t,d.gSeriesGroupEle,b):"object"!=typeof a&&0<a||0<a.topLeft||0<a.bottomLeft||0<a.topRight||0<a.bottomRight?(g=ej.EjSvgRender.utils._calculateroundedCorner(a,t),t.d=g,n._animationType="path",d.chartObj.svgRenderer.drawPath(t,d.gSeriesGroupEle)):"rectangle"==n.columnFacet&&d.chartObj.svgRenderer.drawRect(t,d.gSeriesGroupEle),g={X:(g=ej.EjSvgRender.utils._getSvgXY(u.X,u.Y,n,d.chartObj)).X,Y:g.Y,Width:u.Width,Height:u.Height},ej.EjSvgRender.utils._addRegion(d.chartObj,g,n,_,f)),_.symbolLocation=s?{X:v<(n.yAxis._crossValue||0)&&!n.yAxis.isInversed||n.yAxis.isInversed&&v>(n.yAxis._crossValue||0)?u.X:u.X+u.Width,Y:u.Y+u.Height/2}:{X:u.X+u.Width/2,Y:v<(n.yAxis._crossValue||0)&&!n.yAxis.isInversed||n.yAxis.isInversed&&v>(n.yAxis._crossValue||0)?u.Y+u.Height:u.Y})}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},stackingSeries:!0,requireInvertedAxes:!0,isRegion:!0}),ej.seriesTypes.stackingbar=ej.ejStackingBarSeries,ej.seriesTypes.stackingbar100=ej.ejStackingBarSeries,ej.ejBarSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,t._animationType="rect","cylinder"==t.columnFacet&&(t._animationType="cylinder");var s=this.chartObj.model.requireInvertedAxes,n=t,a=n.cornerRadius,r=xe.inArray(n,this.chartObj.model._visibleSeries),o=ej.EjSeriesRender.prototype.getOrigin(this,n,i),l=(xe.extend(!0,{},this.chartObj.model.seriesStyle,n.style),this.getSideBySideInfo(n,i));n.dragSettings.enable&&(n.sidebysideInfo=l);var d=this._isVisiblePoints(n),i=ej.EjSvgRender.utils._getTransform(n.xAxis,n.yAxis,s),i={id:this.chartObj.svgObject.id+"_SeriesGroup_"+r,transform:"translate("+i.x+","+i.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(i);for(var h=this,c=0;c<d.length;c++){var u,p,m,g,f=c,_=d[c],v=_.YValues[0],b=o;_.visible&&(p=(u=h.calculateSides(_,l)).x1,m=u.x2,u=this.chartObj.setStyle(h,n,r,f),p=h.getRectangle(p,v,m,b,n,e),m=Math.min(0,p.Width),b=Math.min(0,p.Height),0!=m&&0!=b||(t={id:h.chartObj.svgObject.id+"_Series"+r+"_Point"+f,x:p.X+h.chartObj.canvasX,y:p.Y+h.chartObj.canvasY,width:p.Width,height:p.Height,fill:u.interior,"stroke-width":u.borderWidth,plot:v<0?"negative":"positive",opacity:u.opacity,stroke:u.borderColor,"stroke-dasharray":u.dashArray},"cylinder"==n.columnFacet?h.chartObj.svgRenderer.drawCylinder(t,h.gSeriesGroupEle,{isColumn:!1,stacking:!1,isLastSeries:!0}):"object"!=typeof a&&0<a||0<a.topLeft||0<a.bottomLeft||0<a.topRight||0<a.bottomRight?(g=ej.EjSvgRender.utils._calculateroundedCorner(a,t),t.d=g,n._animationType="path",h.chartObj.svgRenderer.drawPath(t,h.gSeriesGroupEle)):"rectangle"==n.columnFacet&&h.chartObj.svgRenderer.drawRect(t,h.gSeriesGroupEle),g={X:(g=ej.EjSvgRender.utils._getSvgXY(p.X,p.Y,n,h.chartObj)).X,Y:g.Y,Width:p.Width,Height:p.Height},ej.EjSvgRender.utils._addRegion(h.chartObj,g,n,_,f)),_.symbolLocation=s?{X:v<(n.xAxis._crossValue||0)&&!n.yAxis.isInversed||n.yAxis.isInversed&&v>(n.xAxis._crossValue||0)?p.X:p.X+p.Width,Y:p.Y+p.Height/2}:{X:p.X+p.Width/2,Y:v<(n.xAxis._crossValue||0)&&!n.yAxis.isInversed||n.yAxis.isInversed&&v>(n.xAxis._crossValue||0)?p.Y+p.Height:p.Y})}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},requireInvertedAxes:!0,isRegion:!0}),ej.seriesTypes.bar=ej.ejBarSeries,ej.ejStackingAreaSeries=e(ej.EjSeriesRender,{draw:function(e,t){var i,s;this.chartObj=e,t._animationType="path";var n=ej.EjSvgRender.utils._getStringBuilder(),a=t,e=this.setAreaSeriesStyle(a),r=this._isVisiblePoints(a),o=Math.max(t.yAxis.visibleRange.min,a.stackedValue.StartValues[0]),l=this.chartObj.canvasX,d=this.chartObj.canvasY,h={xValue:r[0].xValue,YValues:[o]},c=ej.EjSvgRender.utils._getPoint(h,a),u=0,p=a.stackedValue.EndValues.length;n.append("M "+(c.X+l)+" "+(c.Y+d)+" ");for(var m=0;m<=p;m++)if(m!=p&&r[m].visible)i={xValue:r[m].xValue,YValues:[a.stackedValue.EndValues[m]]},r[m].visible&&(s=r[m].location=ej.EjSvgRender.utils._getPoint(i,a),n.append("L "+(s.X+l)+" "+(s.Y+d)+" "),r[m].YValues[0]=i.YValues[0]);else{a.stackedValue.StartValues[m+1];for(var g=m-1;u<=g;g--)i={xValue:r[g].xValue,YValues:[a.stackedValue.StartValues[g]]},s=ej.EjSvgRender.utils._getPoint(i,a),n.append("L "+(s.X+l)+" "+(s.Y+d)+" ");r[m+1]&&r[m+1].visible&&(h={xValue:r[m+1].xValue,YValues:[a.stackedValue.StartValues[m+1]]},c=ej.EjSvgRender.utils._getPoint(h,a),n.append("M "+(c.X+l)+" "+(c.Y+d)+" ")),u=m+1}t=n.toString(),this.drawAreaPath(a,e,t),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},stackingSeries:!0}),ej.seriesTypes.stackingarea=ej.ejStackingAreaSeries,ej.seriesTypes.stackingarea100=ej.ejStackingAreaSeries,ej.ejAreaSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,t._animationType="path";var s=ej.EjSvgRender.utils._getStringBuilder(),n=t,e=this.setAreaSeriesStyle(n),t=this.chartObj;n.sorting&&(n.points=ej.DataManager(n.points,ej.Query().sortBy("xValue")).executeLocal());var a,r=this.chartObj.dragPoint?n.pointCollection:this._isVisiblePoints(n),o=ej.EjSeriesRender.prototype.getOrigin(this,n,i),i=[];if(i[0]=t.canvasX,i[1]=t.canvasY,0<r.length){for(var l,d,h,c=0;c<r.length;c++)r[c].visible&&(r.length>c+1?(a||(a={xValue:r[c].xValue,YValues:[o]},h=ej.EjSvgRender.utils._getPoint(a,n),s.append("M "+h.X+" "+h.Y+" ")),h=ej.EjSvgRender.utils._getPoint(r[c],n),s.append("L "+h.X+" "+h.Y+" "),r[c+1].visible||(d={xValue:r[c].xValue,YValues:[o]},l=ej.EjSvgRender.utils._getPoint(d,n),d=ej.EjSvgRender.utils._getPoint(a,n),s.append("L "+l.X+" "+l.Y+" L "+d.X+" "+d.Y+" "),a=null)):r[c-1]&&r[c-1].visible&&(h=ej.EjSvgRender.utils._getPoint(r[c],n),s.append("L "+h.X+" "+h.Y+" ")));t={xValue:r[r.length-1].xValue,YValues:[o]},t=ej.EjSvgRender.utils._getPoint(t,n);1<r.length&&s.append("L "+t.X+" "+t.Y+" "),t=s.toString(),this.drawAreaPath(n,e,t,i)}this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)}}),ej.seriesTypes.area=ej.ejAreaSeries,ej.ejRangeAreaSeries=e(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e,t._animationType="path";var i=ej.EjSvgRender.utils._getStringBuilder(),s=t,n=this.setAreaSeriesStyle(s),a=xe.inArray(s,this.chartObj.model._visibleSeries);s.points=ej.DataManager(s.points,ej.Query().sortBy("xValue")).executeLocal();var r=this._isVisiblePoints(s),e=[];e[0]=this.chartObj.canvasX,e[1]=this.chartObj.canvasY;for(var o,l,d=[],h=0;h<r.length;h++)if(d[h]={Region:{PointIndex:h},SeriesIndex:a,region:[]},r[h].visible){l||(o=r[h].low,l={xValue:r[h].xValue,YValues:[o]},c=ej.EjSvgRender.utils._getPoint(l,s),i.append("M "+c.X+" "+c.Y+" "));var c=ej.EjSvgRender.utils._getPoint(r[h],s);if(i.append("L "+c.X+" "+c.Y+" "),d[h].region.push({X:c.X,Y:c.Y}),0!=h&&d[h-1].region.push({X:c.X,Y:c.Y}),h+1<r.length&&!r[h+1].visible&&h+1!=r.length-1){for(var u=h;0<=u&&r[u].visible;u--){o=r[u].low;var p={xValue:r[u].xValue,YValues:[o]},m=ej.EjSvgRender.utils._getPoint(p,s);i.append("L "+m.X+" "+m.Y+" "),d[u].region.push({X:m.X,Y:m.Y}),0!=u&&d[u-1].region.push({X:m.X,Y:m.Y})}l=null}}for(h=r.length-1;0<=h;h--)if(r[h].visible){o=r[h].low;p={xValue:r[h].xValue,YValues:[o]},m=ej.EjSvgRender.utils._getPoint(p,s);i.append("L "+m.X+" "+m.Y+" "),d[h].region.push({X:m.X,Y:m.Y}),0!=h&&d[h-1].region.push({X:m.X,Y:m.Y})}else{if(r.length>h&&r[h].visible){m=ej.EjSvgRender.utils._getPoint(r[h],s);i.append("L "+m.X+" "+m.Y+" ");break}if(h!=r.length-1){for(var g=0,f=h-1;0<=f;f--)if(r[f].visible)g++;else if(!r[f].visible)break;h-=g}}t=i.toString(),this.chartObj.model.chartRegions.push(d),this.drawAreaPath(s,n,t,e),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},hiloTypes:!0}),ej.seriesTypes.rangearea=ej.ejRangeAreaSeries,ej.ejSplineRangeAreaSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,(new ej.seriesTypes.splinearea).draw(e,t,i)},chartAreaType:"cartesianAxes",hiloTypes:!0}),ej.seriesTypes.splinerangearea=ej.ejSplineRangeAreaSeries,ej.ejSplineSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){i.seriesCollection||(i.seriesCollection={},t._name=ej.util.isNullOrUndefined(t.name)?"":t.name.replace(/ /g,"")),i.seriesCollection[t._name]||(i.seriesCollection[t._name]={}),this.chartObj=e,t._animationType="path";for(var s=t,e="",n=ej.EjSvgRender.utils._getStringBuilder(),t=this.setLineSeriesStyle(s),a=this.chartObj.dragPoint?s.pointCollection:this._isVisiblePoints(s),r=i.seriesCollection[s._name].naturalSpline||this.naturalSpline(a,s),o=null,l=null,d=-1,h=0,c=i.seriesCollection[s._name].controlPoints||[],u=0;u<a.length;u++){var p,m,g,f,_,v=u;(l=a[u]).visible?(null!=o&&(_=f=null,f=(g=c[h++]||this.getBezierControlPoints(o,l,r[d],r[v],0,s,this)).controlPoint1,_=g.controlPoint2,p=ej.EjSvgRender.utils._getPoint(o,s),m=ej.EjSvgRender.utils._getPoint(l,s),g=ej.EjSvgRender.utils._getPoint(f,s),f=ej.EjSvgRender.utils._getPoint(_,s),_=this.chartObj,n.append("M "+(p.X+_.canvasX)+" "+(p.Y+_.canvasY)+" C "+(g.X+_.canvasX)+" "+(g.Y+_.canvasY)+" "+(f.X+_.canvasX)+" "+(f.Y+_.canvasY)+" "+(m.X+_.canvasX)+" "+(m.Y+_.canvasY)+" ")),o=l,d=v):o=null}e=n.toString(),this._drawLinePath(s,t,e),this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)}}),ej.seriesTypes.spline=ej.ejSplineSeries,ej.ejSplineAreaSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){i.seriesCollection||(i.seriesCollection={},t._name=ej.util.isNullOrUndefined(t.name)?"":t.name.replace(/ /g,"")),i.seriesCollection[t._name]||(i.seriesCollection[t._name]={}),this.chartObj=e,t._animationType="path";var s=this.chartObj.model.requireInvertedAxes,n=t,a="",r=ej.EjSvgRender.utils._getStringBuilder(),o=this.setAreaSeriesStyle(n);n.sorting&&(n.points=ej.DataManager(n.points,ej.Query().sortBy("xValue")).executeLocal());var l=this.chartObj.dragPoint?n.pointCollection:this._isVisiblePoints(n),d=i.seriesCollection[n._name].naturalSpline||this.naturalSpline(l,n,0),h=(i.seriesCollection[n._name].naturalSpline1||this.naturalSpline(l,n,1),null),c=null,u=-1,p=[],m=ej.EjSeriesRender.prototype.getOrigin(this,n,i),g=null,f=!0,_=this.chartObj,e=[],v=0,b=i.seriesCollection[n._name].controlPoints||[];e[0]=_.canvasX,e[1]=_.canvasY;var x=_.model._seriesIndex,y=null,w=[],C=n.type.toLowerCase(),S=n.emptyPointSettings;_.model._previousSeries=ej.util.isNullOrUndefined(_.model._previousSeries)?null:_.model._previousSeries,n._prevpointIndex=null;for(var T=0;T<l.length;T++){p[T]={Region:{PointIndex:T},SeriesIndex:x,region:[]};var R=T;if((c=l[T]).YValues[0]=-1!=C.indexOf("stackingsplinearea")?n.stackedValue.EndValues[T]:c.YValues[0],c.visible){if(!g){if(0==x||-1==C.indexOf("stackingsplinearea"))g={xValue:l[T].xValue,YValues:[m]};else{for(var k=xe.inArray(t,_.model._visibleSeries);0<k;k--){var O=_.model.series[k-1];if("hidden"!=O.visibility){y=O.points;break}}g={xValue:l[T].xValue,YValues:[y[T].YValues[0]]}}var D=ej.EjSvgRender.utils._getPoint(g,n)}if("splinerangearea"==C&&(L=ej.EjSvgRender.utils._getPoint(l[T],n),p[T].region.push({X:L.X,Y:L.Y}),0!=T&&p[T-1].region.push({X:L.X,Y:L.Y})),null!=h){var I=(A=-1!=C.indexOf("stackingsplinearea")||"splinerangearea"==C?b[R-1]||this.getBezierControlPoints(h,c,d[u],d[R],0,n,this):b[v++]||this.getBezierControlPoints(h,c,d[u],d[R],0,n,this)).controlPoint1,j=A.controlPoint2,L=ej.EjSvgRender.utils._getPoint(h,n),A=ej.EjSvgRender.utils._getPoint(c,n),I=ej.EjSvgRender.utils._getPoint(I,n),j=ej.EjSvgRender.utils._getPoint(j,n);if(f&&(s?r.append("M "+D.X+" "+L.Y+" L "+L.X+" "+L.Y+" "):r.append("M "+L.X+" "+D.Y+" L "+L.X+" "+L.Y+" "),f=!1),r.append("C "+I.X+" "+I.Y+" "+j.X+" "+j.Y+" "+A.X+" "+A.Y+" "),"splinerangearea"==C&&(w[R]=s?"C "+j.low+" "+j.Y+" "+I.low+" "+I.Y+" "+L.low+" "+L.Y+" ":"C "+j.X+" "+j.low+" "+I.X+" "+I.low+" "+L.X+" "+L.low+" "),-1!=C.indexOf("stackingsplinearea")&&(w[R]="C "+j.X+" "+j.Y+" "+I.X+" "+I.Y+" "+L.X+" "+L.Y+" "),(R==l.length-1||R<l.length-1&&!l[T+1].visible)&&((0!=x&&-1!=C.indexOf("stackingsplinearea")||"splinerangearea"==C)&&(g={xValue:l[T].xValue,YValues:"splinerangearea"==C?l[T].YValues:[y[T].YValues[0]]},D=ej.EjSvgRender.utils._getPoint(g,n)),s?r.append("L "+("splinerangearea"==C?A.low:D.X)+" "+A.Y+" "):r.append("L "+A.X+" "+("splinerangearea"==C?D.low:D.Y)+" "),f=!(g=null),"gap"==S.displayMode.toLowerCase()&&R!=l.length-1&&0!=x&&-1!=C.indexOf("stacking"))){for(var E=ej.util.isNullOrUndefined(n._prevpointIndex)?1:n._prevpointIndex,P=R;E<=P&&(l[P-1].visible&&!ej.util.isNullOrUndefined(_.model._previousSeries));P--)r.append(_.model._previousSeries[P]),_.model._previousSeries[P]="";n._prevpointIndex=R+3}}else-1==C.indexOf("stackingsplinearea")&&-1==C.indexOf("splinerangearea")||0<R&&"gap"==S.displayMode&&this.drawbackCurve(b,n,w,R,c);h=c,u=R}else h=null,(-1!=C.indexOf("stackingsplinearea")||-1!=C.indexOf("splinerangearea"))&&0<R&&"gap"==S.displayMode&&this.drawbackCurve(b,n,w,R,c)}if("splinerangearea"==_.model.series[x].type.toLowerCase())for(T=l.length-1;0<=T;T--){m=l[T].low;var M={xValue:l[T].xValue,YValues:[m]},M=ej.EjSvgRender.utils._getPoint(M,n);p[T].region.push({X:M.X,Y:M.Y}),0!=T&&p[T-1].region.push({X:M.X,Y:M.Y})}a=r.toString(),-1!=C.indexOf("stackingsplinearea")&&0<x&&(_.model._previousSeries=this._getReversePath(_,x,_.model._previousSeries)),"splinerangearea"==C?a=a+this._getReversePath(_,x,w)+"Z":(a=ej.util.isNullOrUndefined(_.model._previousSeries)?a:a+_.model._previousSeries+"Z",_.model._previousSeries=w),"splinerangearea"==C&&this.chartObj.model.chartRegions.push(p),this.drawAreaPath(n,o,a,e),this.chartObj.dragPoint?this.chartObj.svgRenderer.append(this.chartObj.gPreviewSeriesGroupEle,this.chartObj.gSeriesEle):this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle),this.chartObj.gSeriesGroupEle=this.gSeriesGroupEle},stackingSeries:!0,_getReversePath:function(e,t,i){var s=e.model.series[t].emptyPointSettings,n="",a=e.model.series[t].points;if(!ej.util.isNullOrUndefined(i)){for(var r=0;r<a.length;r++){var o=r;a[o].visible||a[o].isEmpty&&"gap"!=s.displayMode||(0==o?i[o+1]&&(i[o+1]=""):o==a.length-1?i[o]&&(i[o]=""):(i[o]&&(i[o]=""),i[o+1]&&(i[o+1]="")))}for(var l=i.length-1;0<l;l--)n+=i[l]}return n},drawbackCurve:function(e,t,i,s,n){var a=e[s-1],r=a.controlPoint1,e=a.controlPoint2,a=ej.EjSvgRender.utils._getPoint(t.points[s-1],t),r=(ej.EjSvgRender.utils._getPoint(n,t),ej.EjSvgRender.utils._getPoint(r,t)),t=ej.EjSvgRender.utils._getPoint(e,t);i[s]="C "+t.X+" "+t.Y+" "+r.X+" "+r.Y+" "+a.X+" "+a.Y+" "}}),ej.seriesTypes.splinearea=ej.ejSplineAreaSeries,ej.seriesTypes.stackingsplinearea=ej.ejSplineAreaSeries,ej.seriesTypes.stackingsplinearea100=ej.ejSplineAreaSeries,ej.ejScatterSeries=e(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e;e=t;t._animationType="scatter";var i=xe.inArray(t,this.chartObj.model._visibleSeries),s=100<e.points.length||!e.enableSmartLabels?this.improveChartPerformance(e):this._isVisiblePoints(e),n=s.length;t._visiblePoints=s;for(var a=0;a<n;a++){o=s[a];var r=a,o=ej.EjSvgRender.utils._getPoint(o,t);this.drawSymbol(i,t,r,o.X,o.Y)}}}),ej.seriesTypes.scatter=ej.ejScatterSeries,ej.ejBubbleSeries=e(ej.EjSeriesRender,{createBubbleGroup:function(e){var t=xe.inArray(e,this.chartObj.model.series),i=this.chartObj.model.m_AreaBounds.X,s=this.chartObj.model.m_AreaBounds.Y,n=e._isTransposed,i=n?i:e.xAxis.x,e=n?s:e.yAxis.y,e={id:this.chartObj.svgObject.id+"_SeriesGroup_"+t,transform:"translate("+i+","+e+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(e)},draw:function(e,t){this.chartObj=e,t._animationType="bubble";var i=t,s=i.cornerRadius;i.points=ej.DataManager(i.points,ej.Query().sortBy("xValue")).executeLocal();var n,a,r,o,l=xe.inArray(i,this.chartObj.model._visibleSeries),d=this._isVisiblePoints(i),h=t.bubbleOptions,c=h.radiusMode.toLowerCase(),u=e.model.m_AreaBounds,p=e.model._visibleSeries,m=0,u=Math.max(u.Height,u.Width);if("minmax"==c)o=u/100,n=h.minRadius*o,r=(o=h.maxRadius*o)-n,m=Math.max.apply(0,xe.map(d,function(e){return e.YValues[1]}));else{n=o=1,r=u/5/2*o;for(var g=0;g<p.length;g++)if("bubble"==p[g].type.toLowerCase()&&"visible"==p[g].visibility&&"auto"==p[g].bubbleOptions.radiusMode.toLowerCase()){a=p[g]._visiblePoints;for(var f=0;f<a.length;f++)m=m<a[f].YValues[1]?a[f].YValues[1]:m}}this.createBubbleGroup(i);for(var _=0;_<d.length;_++){var v,b,x,y=d[_],w=_;y.visible&&(m=m||1,x="minmax"==i.bubbleOptions.radiusMode.toLowerCase()?n+r*Math.abs(y.YValues[1]/m):r*Math.abs(y.YValues[1]/m),b=ej.EjSvgRender.utils._getPoint(y,i),v=this.chartObj.setStyle(this,i,l,w),t={id:this.chartObj.svgObject.id+"_Series"+l+"_Point"+w,cx:b.X+this.chartObj.canvasX,cy:b.Y+this.chartObj.canvasY,r:x,fill:v.interior,cornerRadius:s,"stroke-width":v.borderWidth,"stroke-dasharray":v.dashArray,opacity:v.opacity,stroke:v.borderColor},"object"!=typeof s&&0<s||0<s.topLeft||0<s.bottomLeft||0<s.topRight||0<s.bottomRight?(v=ej.EjSvgRender.utils.calculateroundedCorner(t),t.d=v,this.chartObj.svgRenderer.drawPath(t,this.gSeriesGroupEle)):y.radius=x,this.chartObj.svgRenderer.drawCircle(t,this.gSeriesGroupEle),y=b.X,b=b.Y,x={X:y-x+(i.isTransposed?this.chartObj.model.m_AreaBounds.X:i.xAxis.x),Y:b-x+(i.isTransposed?this.chartObj.model.m_AreaBounds.Y:i.yAxis.y),Width:2*x,Height:2*x},ej.EjSvgRender.utils._addRegion(this.chartObj,x,i,null,_))}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)}}),ej.seriesTypes.bubble=ej.ejBubbleSeries,ej.ejhiloSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,t._animationType="hilo";var e=this.chartObj.model.requireInvertedAxes,s=t;s.points=ej.DataManager(s.points,ej.Query().sortBy("xValue")).executeLocal();var n,a=this._isVisiblePoints(s),r=this.getSideBySideInfo(s,i),o=xe.inArray(s,this.chartObj.model._visibleSeries),e=ej.EjSvgRender.utils._getTransform(s.xAxis,s.yAxis,e),e={id:this.chartObj.svgObject.id+"_SeriesGroup_"+o,transform:"translate("+e.x+","+e.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(e);for(var l=0;l<a.length;l++){var d,h,c,u,p=l;(n=a[l]).visible&&(u="",ej.util.isNullOrUndefined(n.YValues[0])||ej.util.isNullOrUndefined(n.YValues[1])||(d=this.chartObj.setStyle(this,s,o,p),h=this.chartObj.setHiloStyle(s,p,o),c={},p={},p=n.YValues[0]<n.YValues[1]?(c={xValue:n.xValue+r.Median,YValues:[n.YValues[0]]},{xValue:n.xValue+r.Median,YValues:[n.YValues[1]]}):(c={xValue:n.xValue+r.Median,YValues:[n.YValues[1]]},{xValue:n.xValue+r.Median,YValues:[n.YValues[0]]}),c=ej.EjSvgRender.utils._getPoint(c,s),p=ej.EjSvgRender.utils._getPoint(p,s),u="M "+(c.X+this.chartObj.canvasX)+" "+(c.Y+this.chartObj.canvasY)+" L "+(p.X+this.chartObj.canvasX)+" "+(p.Y+this.chartObj.canvasY)+" ",p={point1:c,point2:p},this._drawHiloPath(s,d,h,u,l,p)))}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},hiloTypes:!0}),ej.seriesTypes.hilo=ej.ejhiloSeries,ej.ejhiloopencloseSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e;e=this.chartObj.model.requireInvertedAxes;t._animationType="hilo";var s=t;s.points=ej.DataManager(s.points,ej.Query().sortBy("xValue")).executeLocal();var n,a=this._isVisiblePoints(s),r=this.getSideBySideInfo(s,i),o=null,l=this.chartObj.model.palette,d=xe.inArray(s,this.chartObj.model._visibleSeries),e=ej.EjSvgRender.utils._getTransform(s.xAxis,s.yAxis,e),e={id:this.chartObj.svgObject.id+"_SeriesGroup_"+d,transform:"translate("+e.x+","+e.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(e);for(var h=0;h<a.length;h++){var c,u,p,m,g,f,_,v,b,x,y=h;(o=a[h]).visible&&(g="",m=!!ej.util.isNullOrUndefined(s.drawMode)||("both"==s.drawMode.toLowerCase()||"open"==s.drawMode.toLowerCase()),_=!!ej.util.isNullOrUndefined(s.drawMode)||("both"==s.drawMode.toLowerCase()||"close"==s.drawMode.toLowerCase()),b={},x={},f={},v={},f=(x=o.YValues[0]<o.YValues[1]?(b={xValue:o.xValue+r.Median,YValues:[o.YValues[0]]},{xValue:o.xValue+r.Median,YValues:[o.YValues[1]]}):(b={xValue:o.xValue+r.Median,YValues:[o.YValues[1]]},{xValue:o.xValue+r.Median,YValues:[o.YValues[0]]}),{xValue:o.xValue,YValues:[o.YValues[2]]}),v={xValue:o.xValue,YValues:[o.YValues[3]]},s.fill=s.isFill?s.fill:null,o.YValues[2]<o.YValues[3]?s.bearFillColor=n=ej.util.isNullOrUndefined(s.bearFillColor)?s.fill||(l&&0<l.length?l[d]:"#339933"):s.bearFillColor:s.bullFillColor=n=ej.util.isNullOrUndefined(s.bullFillColor)?s.fill||(l&&0<l.length?l[d]:"#E51400"):s.bullFillColor,c=this.chartObj.setStyle(this,s,d,y,n),u=this.chartObj.setHiloStyle(s,y,d,n),o.fill?n="array"==jQuery.type(o.interior)?o.fill[0]:o.fill:o._hiloFill=n,p=this.chartObj.canvasX,y=this.chartObj.canvasY,m&&(m={xValue:f.xValue+r.Median,YValues:f.YValues},m=ej.EjSvgRender.utils._getPoint(m,s),f={xValue:f.xValue+r.Start,YValues:f.YValues},f=ej.EjSvgRender.utils._getPoint(f,s),g="M "+(m.X+p)+" "+(m.Y+y)+" L "+(f.X+p)+" "+(f.Y+y)+" ",f={point1:m,point2:f},this._drawHiloPath(s,c,u,g,h,f),g=""),_&&(_={xValue:v.xValue+r.Median,YValues:v.YValues},_=ej.EjSvgRender.utils._getPoint(_,s),v={xValue:v.xValue+r.End,YValues:v.YValues},v=ej.EjSvgRender.utils._getPoint(v,s),g="M "+(_.X+p)+" "+(_.Y+y)+" L "+(v.X+p)+" "+(v.Y+y)+" ",v={point1:_,point2:v},this._drawHiloPath(s,c,u,g,h,v),g=""),b=ej.EjSvgRender.utils._getPoint(b,s),x=ej.EjSvgRender.utils._getPoint(x,s),g="M "+(b.X+p)+" "+(b.Y+y)+" L "+(x.X+p)+" "+(x.Y+y)+" ",x={point1:b,point2:x},this._drawHiloPath(s,c,u,g,h,x))}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},hiloTypes:!0}),ej.seriesTypes.hiloopenclose=ej.ejhiloopencloseSeries,ej.ejCandleSeries=e(ej.EjSeriesRender,{draw:function(e,t,i){this.chartObj=e,t._animationType="hilo";var e=this.chartObj.model.requireInvertedAxes,s=t;s.points=ej.DataManager(s.points,ej.Query().sortBy("xValue")).executeLocal();var n=this._isVisiblePoints(s),a=this.getSideBySideInfo(s,i),r=null,o=this.chartObj.model.palette,l=xe.inArray(s,this.chartObj.model._visibleSeries),e=ej.EjSvgRender.utils._getTransform(s.xAxis,s.yAxis,e),e={id:this.chartObj.svgObject.id+"_SeriesGroup_"+l,transform:"translate("+e.x+","+e.y+")"};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(e);for(var d,h=0;h<n.length;h++){var c,u,p,m,g,f,_,v,b,x,y=h;(r=n[h]).visible&&(x="",f={},_={},c={},u={},c=(_=r.YValues[0]<r.YValues[1]?(f={xValue:r.xValue+a.Median,YValues:[r.YValues[0]]},{xValue:r.xValue+a.Median,YValues:[r.YValues[1]]}):(f={xValue:r.xValue+a.Median,YValues:[r.YValues[1]]},{xValue:r.xValue+a.Median,YValues:[r.YValues[0]]}),{xValue:r.xValue,YValues:[r.YValues[2]]}),u={xValue:r.xValue,YValues:[r.YValues[3]]},r.YValues[2]<r.YValues[3]?(c={xValue:r.xValue,YValues:[r.YValues[2]]},u={xValue:r.xValue,YValues:[r.YValues[3]]},s.bearFillColor=d=ej.util.isNullOrUndefined(s.bearFillColor)?o&&0<o.length?o[l]:"#339933":s.bearFillColor):(c={xValue:r.xValue,YValues:[r.YValues[3]]},u={xValue:r.xValue,YValues:[r.YValues[2]]},s.bullFillColor=d=ej.util.isNullOrUndefined(s.bullFillColor)?o&&0<o.length?o[l]:"#E51400":s.bullFillColor),b=this.chartObj.setStyle(this,s,l,y,d),p=this.chartObj.setHiloStyle(s,y,l,d),r.style&&r.style.interior?d="array"==jQuery.type(r.style.interior)?r.style.interior[0]:r.style.interior:r._hiloFill=p,m=ej.EjSvgRender.utils._getPoint(f,s),v=ej.EjSvgRender.utils._getPoint({xValue:c.xValue+a.Median,YValues:[c.YValues[0]]},s),g=ej.EjSvgRender.utils._getPoint({xValue:u.xValue+a.Median,YValues:[u.YValues[0]]},s),y=ej.EjSvgRender.utils._getPoint(_,s),f=this.chartObj.canvasX,_=this.chartObj.canvasY,x="M "+(m.X+f)+" "+(m.Y+_)+" L "+(v.X+f)+" "+(v.Y+_)+" M "+(g.X+f)+" "+(g.Y+_)+" L "+(y.X+f)+" "+(y.Y+_)+" ",v={point1:m,point2:v},this._drawHiloPath(s,b,p,x,h,v),x={xValue:u.xValue+a.Start,YValues:u.YValues},v=ej.EjSvgRender.utils._getPoint(x,s),x={xValue:c.xValue+a.End,YValues:c.YValues},x=ej.EjSvgRender.utils._getPoint(x,s),x=ej.EjSvgRender.utils._correctRect(v.X,v.Y,x.X,x.Y),c.YValues[0]==u.YValues[0]&&(x.Y=v.Y-.5,x.Height=1),b={id:this.chartObj.svgObject.id+"_Series"+l+"_Point"+h,x:x.X+this.chartObj.canvasX,y:x.Y+this.chartObj.canvasY,width:x.Width,height:x.Height,fill:b.interior,"stroke-width":b.borderWidth,"stroke-dasharray":b.dashArray,stroke:b.borderColor},this.chartObj.svgRenderer.drawRect(b,this.gSeriesGroupEle),x={X:(b=ej.EjSvgRender.utils._getSvgXY(x.X,x.Y,s,this.chartObj)).X,Y:b.Y,Width:x.Width,Height:x.Height},ej.EjSvgRender.utils._addRegion(this.chartObj,x,s,r,h))}this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},hiloTypes:!0}),ej.seriesTypes.candle=ej.ejCandleSeries,ej.ejPieOfPieSeries=e(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e,(new ej.seriesTypes.pie).draw(e,t)},chartAreaType:"None"}),ej.seriesTypes.pieofpie=ej.ejPieOfPieSeries,ej.ejPieSeries=e(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e;var i=t,s=[],n=t.type.toLowerCase(),a=t.collectionIndex,r=0==a?i.pieCoefficient:i.pieOfPieCoefficient,o=this.chartObj.model.enableCanvasRendering,l=this._calculateVisiblePoints(t,this.chartObj).visiblePoints,e=this.calculatingSliceAngle(i),d=xe.inArray(i,this.chartObj.model._visibleSeries),h=(this.chartObj.model._visibleSeries.length,this.chartObj.model._visibleSeries[d]);if(h._pieCoefficient=h.pieCoefficient,1<this.chartObj.model.circularRadius.length){for(var c=d;ej.util.isNullOrUndefined(h.zOrder)?c<this.chartObj.model.circularRadius.length:0<=c;ej.util.isNullOrUndefined(h.zOrder)?c++:c--)if(!ej.util.isNullOrUndefined(this.chartObj.model.circularRadius[c])){this.chartObj.model.circularRadius[d]=this.chartObj.model.circularRadius[c]*h._pieCoefficient;break}}else"pieofpie"==n&&""!=h.splitMode?this.chartObj.model.circularRadius[a]=.25*r*Math.min(e.width,e.height):this.chartObj.model.circularRadius[d]=.5*h._pieCoefficient*Math.min(e.width,e.height);r=Math.min(e.width,e.height);if(r<0)return r;Math.abs(i.endAngle-i.startAngle)<270&&this.pieDoughnutCenter(i);e={id:this.chartObj.svgObject.id+"_SeriesGroup_"+d};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(e);r=i.enableAnimation&&!i._animatedSeries?"hidden":"visible",e={id:this.chartObj.svgObject.id+"_TextGroup_"+d,visibility:r};this.chartObj.gSeriesTextEle||(this.chartObj.gSeriesTextEle=[]),this.chartObj.gSeriesTextEle[d]=1==a?this.chartObj.gSeriesTextEle[0]:this.chartObj.svgRenderer.createGroup(e);e={id:this.chartObj.svgObject.id+"_symbolGroup_"+d,visibility:r};this.chartObj.gSymbolGroupEle||(this.chartObj.gSymbolGroupEle=[]),this.chartObj.gSymbolGroupEle[d]=this.chartObj.svgRenderer.createGroup(e);e={id:this.chartObj.svgObject.id+"_connectorGroup_"+d,visibility:r};this.chartObj.gConnectorEle||(this.chartObj.gConnectorEle=[]),this.chartObj.gConnectorEle[d]=this.chartObj.svgRenderer.createGroup(e);r={id:this.chartObj.svgObject.id+"_DataLabel_"+d,visibility:r};this.chartObj.gDataLabelEle||(this.chartObj.gDataLabelEle=[]),this.chartObj.gDataLabelEle[d]=1==a?this.chartObj.gDataLabelEle[0]:this.chartObj.svgRenderer.createGroup(r);for(var u=0;u<l.length;u++){var p=this.chartObj.model._isPieOfPie?l[u].actualIndex:u;if(!isNaN(i._visiblePoints[u].startAngle)){var m=i._visiblePoints[u];if(m.visible){var g=this._calculateArcData(this.chartObj,p,m,i,d,a),f=g.Direction.split(" "),_=this.chartObj.setStyle(this,i,d,u),v=!(i.startAngle<i.endAngle);if(!this.chartObj.model._isPieOfPie)for(var b=0;b<i.visiblePoints.length;b++)if(m==i.visiblePoints[b]){p=b;break}t={id:this.chartObj.svgObject.id+"_Series"+d+"_Point"+p,fill:_.interior,"stroke-width":_.borderWidth,stroke:_.borderColor,"stroke-dasharray":_.dashArray,"stroke-linecap":i.lineCap,"stroke-linejoin":i.lineJoin,d:g.Direction,opacity:_.opacity,"data-pointIndex":p};f={id:this.chartObj.svgObject.id+"_Series"+d+"_Point"+p,fill:_.interior,"stroke-width":_.borderWidth,stroke:_.borderColor,"stroke-dasharray":_.dashArray,"stroke-linecap":i.lineCap,"stroke-linejoin":i.lineJoin,d:g.Direction,opacity:_.opacity,radius:"pieofpie"==n?this.chartObj.model.circularRadius[a]:this.chartObj.model.circularRadius[d],start:m.startAngle-1.57,end:m.endAngle-1.57,"data-pointIndex":p,counterClockWise:v,innerR:0,cx:g.centerX,cy:g.centerY,x:f[12],y:f[13]};o?this.chartObj.svgRenderer.drawPath(f,this.gSeriesGroupEle):this.chartObj.svgRenderer.drawPath(t,this.gSeriesGroupEle),x={PointIndex:p,Index:u,StartAngle:m.startAngle,EndAngle:m.endAngle,StartX:this.chartObj.model.startX[p],StartY:this.chartObj.model.startY[p],PieSeriesIndex:a,SeriesIndex:xe.inArray(i,this.chartObj.model._visibleSeries)},s.push(x)}}}d=this.chartObj.model._isPieOfPie?a:d;this.chartObj.model._isPieOfPie&&1==a&&0<h.pieCollections[0].length&&0==h.pieCollections[1].length&&(r=this._drawEmptyPieOfPie(this.chartObj),this.chartObj.svgRenderer.drawPath(r,this.gSeriesGroupEle));var x={Series:i,SeriesData:{Radius:this.chartObj.model.circularRadius[d],CenterX:this.chartObj.model.circleCenterX[d],CenterY:this.chartObj.model.circleCenterY[d]},Region:s,SeriesIndex:xe.inArray(i,this.chartObj.model._visibleSeries)};this.chartObj.model.chartRegions.push(x),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},chartAreaType:"None"}),ej.seriesTypes.pie=ej.ejPieSeries,ej.ejDoughnutSeries=e(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e;var i=t,s=[],n=this._calculateVisiblePoints(t).visiblePoints,e=this.calculatingSliceAngle(i),a=this.chartObj.model.enableCanvasRendering,r=n.length,o=xe.inArray(i,this.chartObj.model._visibleSeries),l=(this.chartObj.model._visibleSeries.length,this.chartObj.model._visibleSeries.length,this.chartObj.model._visibleSeries[o]);if(l._doughnutSize=l.doughnutSize,l._doughnutCoefficient=l.doughnutCoefficient,1<this.chartObj.model.circularRadius.length){for(var d=o;ej.util.isNullOrUndefined(l.zOrder)?d<this.chartObj.model.circularRadius.length:0<=d;ej.util.isNullOrUndefined(l.zOrder)?d++:d--)if(!ej.util.isNullOrUndefined(this.chartObj.model.circularRadius[d])){this.chartObj.model.circularRadius[o]=this.chartObj.model.circularRadius[d]*l._doughnutSize;break}}else this.chartObj.model.circularRadius[o]=.5*l._doughnutSize*Math.min(e.width,e.height);n=Math.min(e.width,e.height);if(n<0)return n;Math.abs(i.endAngle-i.startAngle)<270&&this.pieDoughnutCenter(i),this.chartObj.model.innerRadius[o]=l._doughnutCoefficient*this.chartObj.model.circularRadius[o];ej.util.isNullOrUndefined(this.chartObj.model.roundingPlaces)||this.chartObj.model.roundingPlaces;o=xe.inArray(i,this.chartObj.model._visibleSeries),e={id:this.chartObj.svgObject.id+"_SeriesGroup_"+o};this.gSeriesGroupEle=this.chartObj.svgRenderer.createGroup(e);n=i.enableAnimation&&!i._animatedSeries?"hidden":"visible",e={id:this.chartObj.svgObject.id+"_TextGroup_"+o,visibility:n};this.chartObj.gSeriesTextEle||(this.chartObj.gSeriesTextEle=[]),this.chartObj.gSeriesTextEle[o]=this.chartObj.svgRenderer.createGroup(e);e={id:this.chartObj.svgObject.id+"_symbolGroup_"+o,visibility:n};this.chartObj.gSymbolGroupEle||(this.chartObj.gSymbolGroupEle=[]),this.chartObj.gSymbolGroupEle[o]=this.chartObj.svgRenderer.createGroup(e);e={id:this.chartObj.svgObject.id+"_connectorGroup_"+o,visibility:n};this.chartObj.gConnectorEle||(this.chartObj.gConnectorEle=[]),this.chartObj.gConnectorEle[o]=this.chartObj.svgRenderer.createGroup(e);n={id:this.chartObj.svgObject.id+"_DataLabel_"+o,visibility:n};if(this.chartObj.gDataLabelEle||(this.chartObj.gDataLabelEle=[]),this.chartObj.gDataLabelEle[o]=this.chartObj.svgRenderer.createGroup(n),0<i._doughnutSize&&0<=l._doughnutCoefficient&&i._doughnutSize<=1&&l._doughnutCoefficient<=1)for(var h=0;h<r;h++){var c=i._visiblePoints[h],u=h;if(c.visible){var p=0,m=0,g=this._calculateArcData(this.chartObj,u,c,i,o);c.actualIndex!=i.explodeIndex&&!i.explodeAll||this.chartObj.vmlRendering||(f=-.5*Math.PI,_=(c.startAngle+f+(c.endAngle+f-1e-6))/2,p=this.chartObj.model.circleCenterX[o]+Math.cos(_)*i.explodeOffset,m=this.chartObj.model.circleCenterY[o]+Math.sin(_)*i.explodeOffset);for(var f=this.chartObj.setStyle(this,i,o,u),_=!(i.startAngle<i.endAngle),v=0;v<i.visiblePoints.length;v++)if(c==i.visiblePoints[v]){u=v;break}t={id:this.chartObj.svgObject.id+"_Series"+o+"_Point"+u,fill:f.interior,"stroke-width":f.borderWidth,stroke:f.borderColor,"stroke-dasharray":f.dashArray,"stroke-linecap":i.lineCap,opacity:f.opacity,"stroke-linejoin":i.lineJoin,d:g.Direction,"data-pointIndex":u};m={id:this.chartObj.svgObject.id+"_Series"+o+"_Point"+u,fill:f.interior,"stroke-width":f.borderWidth,stroke:f.borderColor,"stroke-dasharray":f.dashArray,"stroke-linecap":i.lineCap,opacity:f.opacity,"stroke-linejoin":i.lineJoin,d:g.Direction,start:c.startAngle-1.57,end:c.endAngle-1.57,"data-pointIndex":u,radius:this.chartObj.model.circularRadius[o],innerR:this.chartObj.model.innerRadius[o],counterClockWise:_,x:0!=p?p:this.chartObj.model.circleCenterX[o],y:0!=m?m:this.chartObj.model.circleCenterY[o]};a?this.chartObj.svgRenderer.drawPath(m,this.gSeriesGroupEle):this.chartObj.svgRenderer.drawPath(t,this.gSeriesGroupEle),b={PointIndex:u,Index:h,StartAngle:c.startAngle,EndAngle:c.endAngle,StartX:this.chartObj.model.startX[u],StartY:this.chartObj.model.startY[u],SeriesIndex:xe.inArray(i,this.chartObj.model._visibleSeries)},s.push(b)}}var b={Series:i,SeriesData:{Radius:this.chartObj.model.circularRadius[o],DRadius:this.chartObj.model.innerRadius[o],CenterX:this.chartObj.model.circleCenterX[o],CenterY:this.chartObj.model.circleCenterY[o]},Region:s,SeriesIndex:xe.inArray(i,this.chartObj.model._visibleSeries)};this.chartObj.model.chartRegions.push(b),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},chartAreaType:"None"}),ej.seriesTypes.doughnut=ej.ejDoughnutSeries,ej.ejPyramidSeries=e(ej.EjSeriesRender,{draw:function(e,t){var i=(this.chartObj=e).model,s=this,n=i.LegendActualBounds,a=t,r=this._calculateVisiblePoints(a).visiblePoints,o=r.length,l=[],d=[],h=i.legend,c=a.marker.dataLabel,u=h.position.toLowerCase(),p=h.border.width,m=0,g=i.title,f=i.title.subTitle,_=i.border.width,v=!(""==g.text||!g.visible||!g.enableTrim),b=!(""==f.text||!f.visible||!f.enableTrim),x=i.title.text&&i.title.visible?ej.EjSvgRender.utils._measureText(i.title.text,xe(this.svgObject).width()-i.margin.left-i.margin.right,i.title.font):0,h=i.title.subTitle.text&&i.title.subTitle.visible?ej.EjSvgRender.utils._measureText(i.title.subTitle.text,xe(this.svgObject).width()-i.margin.left-i.margin.right,i.title.subTitle.font):0,x=""!=e.model.title.text&&e.model.title.visible?v&&"wrap"==g.textOverflow||v&&"wrapandtrim"==g.textOverflow?x.height*e.model.titleWrapTextCollection.length:x.height:0,f=""!=e.model.title.subTitle.text&&e.model.title.subTitle.visible?b&&"wrap"==f.textOverflow||b&&"wrapandtrim"==f.textOverflow?h.height*e.model.subTitleWrapTextCollection.length:h.height:0,h=i.margin.left+i.elementSpacing+2*_+i.elementSpacing+i.margin.right+("right"===u||"left"===u?n.Width+2*p:0),_=(i.title.text&&i.title.visible?i._titleLocation.Y+x+f:i.elementSpacing)+2*_+i.margin.top+i.elementSpacing+i.elementSpacing+("top"===u||"bottom"===u?n.Height+2*p+i.elementSpacing:0);if(c.visible&&"none"!=c.shape&&"outside"==a.labelPosition&&(h+=c.margin.left+c.margin.right),i.chartRegions=[],i.sumofYValues=0,"outside"===a.labelPosition.toLowerCase()){for(var y=0;y<o;y++){var w=ej.EjSvgRender.utils._measureText(ej.util.isNullOrUndefined(r[y].text)?r[y].y:r[y].text,null,a.marker.dataLabel.font).width;m<w&&(m=w)}i.textSize=m}a._enableSmartLabels?(i.actualWidth=.8*(xe(e.svgObject).width()-h),i.resWidth=(xe(e.svgObject).width()-h-i.actualWidth)/2):(i.actualWidth=xe(e.svgObject).width()-h-m,i.resWidth=0);var C=xe.inArray(a,i._visibleSeries);i.actualHeight=xe(e.svgObject).height()-_;_=""==e.model.title.subTitle.text?0:f,f=e.pyrX=("left"===u?n.Width+2*p:0)+i.elementSpacing+i.margin.left,x=e.pyrY=("top"===u?n.Height+2*p:0)+(g.text&&g.visible?i._titleLocation.Y+x+_:i.margin.top+i.elementSpacing);d[0]=f,d[1]=x;for(var S=0;S<o;S++)i.sumofYValues+=r[S].YValues[0];_={id:e.svgObject.id+"_DataLabel_"+C,transform:"translate("+f+","+x+")"};e.gDataLabelEle=[],e.gDataLabelEle[C]=e.svgRenderer.createGroup(_);ej.util.isNullOrUndefined(i.roundingPlaces)||i.roundingPlaces;_={id:e.svgObject.id+"_SeriesGroup_"+C,transform:"translate("+f+","+x+")"};this.gSeriesGroupEle=e.svgRenderer.createGroup(_);_={id:e.svgObject.id+"_textGroup_"+C,transform:"translate("+f+","+x+")"};e.gSeriesTextEle=[],e.gSeriesTextEle[C]=e.svgRenderer.createGroup(_);_={id:e.svgObject.id+"_symbolGroup_"+C,transform:"translate("+f+","+x+")"};e.gSymbolGroupEle=[],e.gSymbolGroupEle[C]=e.svgRenderer.createGroup(_);x={id:e.svgObject.id+"_connectorGroup_"+C,transform:"translate("+f+","+x+")"};for(e.gConnectorEle=[],e.gConnectorEle[C]=e.svgRenderer.createGroup(x),"linear"==a.pyramidMode.toLowerCase()?this.calculateLinearSegments(a):this.calculateSurfaceSegments(a),S=0;S<o;S++){var T,R,k,O=S;(k=a._visiblePoints[S]).visible&&(T=this._getPyramidData(a,O),R=e.setStyle(this,a,0,O),t={id:e.svgObject.id+"_Series"+C+"_Point"+O,fill:R.interior,"stroke-width":R.borderWidth,stroke:R.borderColor,"stroke-dasharray":R.dashArray,"stroke-linecap":a.lineCap,"stroke-linejoin":a.lineJoin,opacity:R.opacity,pointIndex:O,d:T.Direction},e.svgRenderer.drawPath(t,this.gSeriesGroupEle,d),a.marker.dataLabel.template&&ej.EjSvgRender.utils._getSeriesTemplateSize(k,O,a,!0,e),k.xLocation=T.PositionX,k.yLocation=T.PositionY,k.connectorLine=T.Connector,k.startX=T.startX,k.startY=T.startY,k.Polygon=T.Polygon,D={PointIndex:O,Line1:T.Line1,Line2:T.Line2,Line3:T.Line3,Line4:T.Line4,Polygon:T.Polygon},l.push(D))}var D={Series:a,Region:l,SeriesIndex:xe.inArray(a,i._visibleSeries)};i.chartRegions.push(D),this.gSeriesGroupEle&&(xe(this.gSeriesGroupEle.childNodes[O]).bind("mousemove",function(e){e.target=s.gSeriesGroupEle.childNodes[O],s.chartObj.chartInteractiveBehavior(e)}),e.svgRenderer.append(this.gSeriesGroupEle,e.gSeriesEle))},_getPyramidData:function(e,t){var i,s,n,a,r,o=this.chartObj.model,l=e._visiblePoints[t].marker,d=e._visiblePoints[t].actualIndex,h=e.explodeIndex==d||e.explodeAll?e.explodeOffset:0,c=o.resWidth,u=o.pyramidData[t].CurrY,p=o.pyramidData[t].CurrY+o.pyramidData[t].Height,m=.5*(1-o.pyramidData[t].CurrY),d=.5*(1-p),t=(e.points[t],{x:c+h+m*o.actualWidth,y:u*o.actualHeight}),m={x:c+h+(1-m)*o.actualWidth,y:u*o.actualHeight},u={x:c+h+(1-d)*o.actualWidth,y:p*o.actualHeight},d={x:c+h+d*o.actualWidth,y:p*o.actualHeight},p="M "+t.x+" "+t.y+" L "+m.x+" "+m.y+" L "+u.x+" "+u.y+" L "+d.x+" "+d.y+" z",o=[{x:t.x,y:t.y},{x:m.x,y:m.y},{x:u.x,y:u.y},{x:d.x,y:d.y}];return(l&&l.dataLabel&&l.dataLabel.visible||(!l||!l.dataLabel)&&e.marker.dataLabel.visible)&&(i=(m.x+u.x)/2,s=(m.y+u.y)/2,r="outside"===e.labelPosition.toLowerCase()?(a=(m.x+u.x)/2,r=(m.y+u.y)/2,l=("left"==this.chartObj.model.legend.position.toLowerCase()||"right"==this.chartObj.model.legend.position.toLowerCase()?this.chartObj.model.LegendActualBounds.Width:0)+this.chartObj.model.elementSpacing+this.chartObj.model.margin.left,n=ej.util.isNullOrUndefined(e.marker.dataLabel.connectorLine.height)?e._enableSmartLabels?xe(this.chartObj.svgObject).width()-(l+a+c+2*this.chartObj.model.elementSpacing):xe(this.chartObj.svgObject).width()-(l+a+this.chartObj.model.textSize+this.chartObj.model.elementSpacing):e.marker.dataLabel.connectorLine.height,n="M "+a+" "+r+" L "+(l=this.getXCordinate(a,n,0))+" "+(e=this.getYCordinate(r,n,0)),a=l,e):(a=(t.x+m.x)/2,(u.y+t.y)/2)),{Direction:p,PositionX:a,PositionY:r,Connector:n,Line1:t,Line2:m,Line3:u,Line4:d,startX:i,startY:s,Polygon:o}},calculateLinearSegments:function(e){var t=0,i=this.chartObj.model;i.pyramidData=[];for(var s,n=0<=e.gapRatio?e.gapRatio<=1?e.gapRatio:1:0,a=1/(i.sumofYValues*(1+n/(1-n))),r=e._visiblePoints.length,o=0;o<r;o++)(e._visiblePoints[o].visible||e._visiblePoints[o].gapMode)&&(s=a*e._visiblePoints[o].YValues[0],i.pyramidData[o]={CurrY:t,Height:s},t+=n/(r-1)+s)},calculateSurfaceSegments:function(e){var t=e._visiblePoints.length,i=this.chartObj.model;i.pyramidData=[];for(var s=0,n=[],a=[],r=(0<=e.gapRatio?e.gapRatio<=1?e.gapRatio:1:0)/(t-1),o=this.getSurfaceHeight(0,i.sumofYValues),l=0;l<t;l++)(e._visiblePoints[l].visible||e._visiblePoints[l].gapMode)&&(n[l]=s,a[l]=this.getSurfaceHeight(s,Math.abs(e._visiblePoints[l].YValues[0])),s+=a[l]+r*o);for(var d,h=1/(s-r*o),l=0;l<t;l++)(e._visiblePoints[l].visible||e._visiblePoints[l].gapMode)&&(d=h*n[l],i.pyramidData[l]={CurrY:d,Height:h*a[l]})},getSurfaceHeight:function(e,t){t=this.solveQuadraticEquation(1,2*e,-t);return t||0},solveQuadraticEquation:function(e,t,i){if(0!=e){var s=t*t-4*e*i;if(0<=s){var n=Math.sqrt(s),a=(-t-n)/(2*e),n=(-t+n)/(2*e);return Math.max(a,n)}}else if(0!=t)return n=a=-i/t,Math.max(a,n);return!1},chartAreaType:"None"}),ej.seriesTypes.pyramid=ej.ejPyramidSeries,ej.ejFunnelSeries=e(ej.EjSeriesRender,{draw:function(e,t){var i=(this.chartObj=e).model,s=i.legend,n=s.position.toLowerCase(),a=i.LegendActualBounds,r=this,o=t,l=this._calculateVisiblePoints(o).visiblePoints,d=l.length,h=[],c=o.marker,u=s.border.width,p=[],m=0,g=""==e.model.title.text?"":i.title,f=""==e.model.title.subTitle.text?"":i.title.subTitle,_=i.border.width,v=!(""==g.text||!g.visible||!g.enableTrim),b=!(""==f.text||!f.visible||!f.enableTrim),x=i.title.text&&i.title.visible?ej.EjSvgRender.utils._measureText(i.title.text,xe(this.svgObject).width()-i.margin.left-i.margin.right,i.title.font):0,s=i.title.subTitle.text&&i.title.subTitle.visible?ej.EjSvgRender.utils._measureText(i.title.subTitle.text,xe(this.svgObject).width()-i.margin.left-i.margin.right,i.title.subTitle.font):0,x=""!=e.model.title.text&&e.model.title.visible?v&&"wrap"==g.textOverflow||v&&"wrapandtrim"==g.textOverflow?x.height*e.model.titleWrapTextCollection.length:x.height:0,f=""!=e.model.title.subTitle.text&&e.model.title.subTitle.visible?b&&"wrap"==f.textOverflow||b&&"wrapandtrim"==f.textOverflow?s.height*e.model.subTitleWrapTextCollection.length:s.height:0,s=i.margin.left+i.elementSpacing+i.elementSpacing+i.margin.right+2*_+("right"===n||"left"===n?a.Width+2*u:0),_=(i.title.text&&i.title.visible?i._titleLocation.Y+x+f:i.elementSpacing)+i.margin.top+2*_+i.elementSpacing+i.elementSpacing+("top"===n||"bottom"===n?a.Height+2*u+i.elementSpacing:0);if(c.visible&&"none"!=c.shape&&"outside"==o.labelPosition&&(s+=c.margin.left+c.margin.right),i.chartRegions=[],i.sumofYValues=0,"outside"===o.labelPosition.toLowerCase()){for(var y=0;y<d;y++){var w=ej.EjSvgRender.utils._measureText(ej.util.isNullOrUndefined(l[y].text)?l[y].y:l[y].text,null,o.marker.dataLabel.font).width;m<w&&(m=w)}i.textSize=m}o._enableSmartLabels?(i.actualWidth=.8*(xe(e.svgObject).width()-s),i.resWidth=(xe(e.svgObject).width()-s-i.actualWidth)/2):(i.actualWidth=xe(e.svgObject).width()-s-m,i.resWidth=0);f=""==e.model.title.subTitle.text?0:f;i.actualHeight=xe(e.svgObject).height()-_;_=e.pyrX=("left"===n?a.Width+2*u:0)+i.elementSpacing+i.margin.left,x=e.pyrY=("top"===n?a.Height+2*u:0)+(i.title.text&&i.title.visible?i._titleLocation.Y+x+f:i.margin.top+i.elementSpacing);p[0]=_,p[1]=x;for(var C=0;C<d;C++)i.sumofYValues+=l[C].YValues[0];ej.util.isNullOrUndefined(i.roundingPlaces)||i.roundingPlaces;var S=xe.inArray(o,i._visibleSeries),f={id:e.svgObject.id+"_SeriesGroup_"+S,transform:"translate("+_+","+x+")"};this.gSeriesGroupEle=e.svgRenderer.createGroup(f);f={id:e.svgObject.id+"_DataLabel_"+S,transform:"translate("+_+","+x+")"};e.gDataLabelEle=[],e.gDataLabelEle[S]=e.svgRenderer.createGroup(f);f={id:e.svgObject.id+"_textGroup_"+S,transform:"translate("+_+","+x+")"};e.gSeriesTextEle=[],e.gSeriesTextEle[S]=e.svgRenderer.createGroup(f);f={id:e.svgObject.id+"_symbolGroup_"+S,transform:"translate("+_+","+x+")"};e.gSymbolGroupEle=[],e.gSymbolGroupEle[S]=e.svgRenderer.createGroup(f);x={id:e.svgObject.id+"_connectorGroup_"+S,transform:"translate("+_+","+x+")"};e.gConnectorEle=[],e.gConnectorEle[S]=e.svgRenderer.createGroup(x);var T=0,R=i;R.funnelData=[];for(var k,x=0<=o.gapRatio?o.gapRatio<=1?o.gapRatio:1:0,O=1/(R.sumofYValues*(1+x/(1-x))),D=x/d,y=d-1;0<=y;y--)(o._visiblePoints[y].visible||o._visiblePoints[y].gapMode)&&(k=O*o._visiblePoints[y].YValues[0],R.funnelData[y]={CurrY:T,Height:k},T+=k+D);for(C=0;C<d;C++){var I,j,L,A=C;(L=o._visiblePoints[C]).visible&&(I=this._getFunnelData(o,A,e),j=e.setStyle(this,o,0,A),t={id:e.svgObject.id+"_Series"+S+"_Point"+A,fill:j.interior,"stroke-width":j.borderWidth,stroke:j.borderColor,"stroke-dasharray":j.dashArray,"stroke-linecap":o.lineCap,"stroke-linejoin":o.lineJoin,opacity:j.opacity,pointIndex:A,d:I.Direction},e.svgRenderer.drawPath(t,this.gSeriesGroupEle,p),o.marker.dataLabel.template&&ej.EjSvgRender.utils._getSeriesTemplateSize(L,A,o,!0,e),L.xLocation=I.PositionX,L.yLocation=I.PositionY,L.connectorLine=I.Connector,L.startX=I.startX,L.startY=I.startY,L.Polygon=I.Polygon,E={PointIndex:A,Line1:I.Line1,Line2:I.Line2,Line3:I.Line3,Line4:I.Line4,Line5:I.Line5,Line6:I.Line6,Polygon:I.Polygon},h.push(E))}var E={Series:o,Region:h,SeriesIndex:xe.inArray(o,i._visibleSeries)};i.chartRegions.push(E),this.gSeriesGroupEle&&xe(this.gSeriesGroupEle.childNodes[A]).bind("mousemove",function(e){e.target=r.gSeriesGroupEle.childNodes[A],r.chartObj.chartInteractiveBehavior(e)}),e.svgRenderer.append(this.gSeriesGroupEle,e.gSeriesEle)},_getFunnelData:function(e,t,i){var s,n,a,r,o,l,d,h,c=this.chartObj.model,u=e._visiblePoints[t],p=u.marker,m=e.marker,g=e.funnelWidth,f=e.funnelHeight,_=c.actualHeight,v=c.actualWidth,b=c.elementSpacing,x=c.legend.position.toLowerCase(),y=u.actualIndex,w=c.resWidth,C=e.explodeIndex==y||e.explodeAll?e.explodeOffset:0,S=-1!=f.indexOf("%")?_*(parseInt(f)/100):parseInt(f),T=-1!=g.indexOf("%")?v*(parseInt(g)/100):parseInt(g),R=c.funnelData[t].CurrY*_,k=R+c.funnelData[t].Height*_,u=T+(_-S-R)/(_-S)*(v-T),y=v/2-u/2,f=y+u,t=(g=v/2-(u=_-S<k||_==S?T:T+(_-S-k)/(_-S)*(v-T))/2)+u;return _-S<=R?(y=g=n=v/2-T/2,f=t=a=v/2+T/2):_-S<k&&(a=t=(n=g=v/2-u/2)+u,r=_-S),_={x:w+C+t,y:k},S={x:w+C+g,y:k},t={x:w+C+t,y:k},k={x:w+C+g,y:k},r&&(t={x:w+C+a,y:r},k={x:w+C+n,y:r}),f="M "+(y={x:w+C+y,y:R}).x+" "+y.y+" L "+(C={x:w+C+f,y:R}).x+" "+C.y+" L "+t.x+" "+t.y+" L "+_.x+" "+_.y+" L "+S.x+" "+S.y+" L "+k.x+" "+k.y+" z",R=[{x:y.x,y:y.y},{x:C.x,y:C.y},{x:t.x,y:t.y},{x:_.x,y:_.y},{x:S.x,y:S.y},{x:k.x,y:k.y}],(p&&p.dataLabel&&p.dataLabel.visible||(!p||!p.dataLabel)&&m.dataLabel.visible)&&(d=(C.x+t.x)/2,h=(C.y+t.y)/2,l="outside"===e.labelPosition.toLowerCase()?(o=(C.x+t.x)/2,l=(C.y+t.y)/2,s=("left"==x||"right"==x?c.LegendActualBounds.Width:0)+b+c.margin.left,s=ej.util.isNullOrUndefined(m.dataLabel.connectorLine.height)?e._enableSmartLabels?xe(this.chartObj.svgObject).width()-(s+o+w+2*b):xe(this.chartObj.svgObject).width()-(o+c.textSize+b):m.dataLabel.connectorLine.height,s="M "+o+" "+l+" L "+(b=this.getXCordinate(o,s,0))+" "+(m=this.getYCordinate(l,s,0)),o=b,m):(o=(y.x+C.x)/2,(y.y+_.y)/2)),{Direction:f,PositionX:o,PositionY:l,Connector:s,Line1:y,Line2:C,Line3:t,Line4:_,Line5:S,Line6:k,startX:d,startY:h,Polygon:R}},chartAreaType:"None"}),ej.seriesTypes.funnel=ej.ejFunnelSeries,ej.ejPolarSeries=e(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e;var i=t,e=(this._isVisiblePoints(i),this.setLineSeriesStyle(i));if("column"==i.drawType.toLowerCase()||"rangecolumn"==i.drawType.toLowerCase()){var s=i.xAxis.visibleRange;s.interval=1;var n="category"==i.xAxis._valueType?s.max:s.max-1;this.chartObj.model.sumofYValues=0;s.interval;for(var a=s.min;this.chartObj.model.sumofYValues+=s.interval,a+=s.interval,a<=n;);}t=this._calculatePolarAxesSegment(i);"area"==i.drawType.toLowerCase()?this.drawAreaPath(i,e,t):"line"!=i.drawType.toLowerCase()&&"spline"!=i.drawType.toLowerCase()||this._drawLinePath(i,e,t),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},chartAreaType:"PolarAxes"}),ej.seriesTypes.polar=ej.ejPolarSeries,ej.ejRadarSeries=e(ej.EjSeriesRender,{draw:function(e,t){this.chartObj=e;var i=t,e=(this._isVisiblePoints(i),this.setLineSeriesStyle(i));if("column"==i.drawType.toLowerCase()||"rangecolumn"==i.drawType.toLowerCase()){var s=i.xAxis.visibleRange;s.interval=1;var n="category"==i.xAxis._valueType?s.max:s.max-1;this.chartObj.model.sumofYValues=0;s.interval;for(var a=s.min;this.chartObj.model.sumofYValues+=s.interval,a+=s.interval,a<=n;);}t=this._calculatePolarAxesSegment(i);"area"==i.drawType.toLowerCase()?this.drawAreaPath(i,e,t):"line"!=i.drawType.toLowerCase()&&"spline"!=i.drawType.toLowerCase()||this._drawLinePath(i,e,t),this.chartObj.svgRenderer.append(this.gSeriesGroupEle,this.chartObj.gSeriesEle)},doAnimation:function(i,e){var s=e.chartObj,n=i.drawType.toLowerCase();i.regionAdded=!0,s.model._radius=s.model.Radius||s.model._radius,s.model.Radius=0;var a=e,t=xe.inArray(i,s.model._visibleSeries),r=xe(s.gSeriesEle).find("#"+a.gSeriesGroupEle.id)[0].childNodes[0];xe(r).animate({Radius:s.model._radius},{duration:1200,queue:!1,step:function(e,t){ej.util.isNullOrUndefined(s.model)?xe(r).stop(!0,!0):(s.model.Radius=e,e=a._calculatePolarAxesSegment(i),"column"!=i.drawType.toLowerCase()&&"rangecolumn"!=i.drawType.toLowerCase()&&"scatter"!=n&&s.svgRenderer._setAttr(xe(r),{d:e}),s.model.Radius=s.model._radius)},complete:function(){var e;ej.util.isNullOrUndefined(s.model)||(i.regionAdded=!1,s.svgRenderer._setAttr(xe(s.gSeriesEle).find("#"+s.svgObject.id+"_TextGroup_"+t),{visibility:"visible"}),s.svgRenderer._setAttr(xe(s.gSeriesEle).find("#"+s.svgObject.id+"_symbolGroup_"+t),{visibility:"visible"}),s.svgRenderer._setAttr(xe(s.gSeriesEle).find("#"+s.svgObject.id+"_DataLabel_"+t),{visibility:"visible"}),s.model.AnimationComplete=!0,(e=xe.extend({},ej.EjSvgRender.commonChartEventArgs)).data={series:i},s._trigger("animationComplete",e))}})},chartAreaType:"PolarAxes"}),ej.seriesTypes.radar=ej.ejRadarSeries}(jQuery),ej.ejChart={},function($){Object.keys||(Object.keys=function(){"use strict";var n=Object.prototype.hasOwnProperty,a=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=r.length;return function(e){if("function"==typeof e||"object"==typeof e&&null!==e){var t,i,s=[];for(t in e)n.call(e,t)&&s.push(t);if(a)for(i=0;i<o;i++)n.call(e,r[i])&&s.push(r[i]);return s}}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),void 0===Array.prototype.map&&(Array.prototype.map=function(e){for(var t=[],i=0,s=this.length;i<s;i++)t.push(e(this[i]));return t}),String.prototype.parseTemplate=function(){var str=this,substr,count=0,arabic=/[\u0600-\u06FF]/;for($.each(arguments[0],function(a,e){0<e.count?$.each(e,function(e,t){e=new RegExp("#"+a+"."+e+"#","gm");if(count++,arabic.test(str)&&2==count){for(var i=str.split(" "),s=0;s<i.length;s++){var n=i[s];arabic.test(n)&&(n+="&lrm;",i[s]=n)}str=i.join(" ")}str=str.replace(e.source,t)}):str=str.replace(new RegExp("\\#"+a+"\\#","gm"),e)});0<=str.indexOf("ej.");)substr=str.substring(str.indexOf("ej."),str.indexOf(")")+1),str=str.replace(substr,eval(substr));return str},String.prototype.capitalizeFirstString=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var Gradient=function(e){this._gradientStop=[];for(var t=0;t<e.length;t++)this._gradientStop.push(e[t])};ej.ejChart={_renderSfChart:function(){var e=!!window.SVGSVGElement,t=this.model.enableCanvasRendering;return this.isChartElemId=!1,this.element[0].id||this._createChartId(),$("#chartContainer_"+this._id).remove(),e?(this.renderer=new ej.EjSvgRender(this.element),t?(this.svgRenderer=new ej.EjCanvasRender(this.element),this.legendSvgContainer=this.svgRenderer.createLegendCanvas(this.element)):(this.svgRenderer=new ej.EjSvgRender(this.element),this.legendSvgContainer=this.svgRenderer.createLegendSvg(this.element)),this._appendChartElements(),t||this.legendContainer.find("svg").attr("class","e-designerhide"),this._createChart(),$(this.svgObject).appendTo(this.element)):(t=!1,this.svgRenderer=new ej.EjVmlRender(this.element),this.legendSvgContainer=this.svgRenderer.createLegendSvg(this.element),this.renderer=new ej.EjVmlRender(this.element),this._appendChartElements(),this._createChart(),$(this.svgObject).appendTo(this.chartContainer)),!0},_appendChartElements:function(){this.legendContainer=$("<div></div>").attr("id","legend_"+this._id).css("height","0px"),this.scrollerContainer=$("<div></div>").attr("id","legend_Scroller"+this._id).css("height","0px"),this.templateContainer=$("<div></div>").attr("id",this._id+"_container_svg_TrackToolTip").css("height","0px"),this.chartContainer=$("<div></div>").css("position","relative").attr("id","chartContainer_"+this._id),this.axisScroll=$("<div></div>").attr("id","axisScrollbar_"+this._id).css("height","0px"),this.svgRenderer.append(this.legendSvgContainer,this.scrollerContainer),$(this.scrollerContainer).appendTo(this.legendContainer),$(this.axisScroll).appendTo(this.chartContainer),$(this.legendContainer).appendTo(this.chartContainer),$(this.templateContainer).appendTo(this.chartContainer),$(this.chartContainer).appendTo(this.element)},setSvgSize:function(e){var t=e,i=$(t.element).height(),s=450,n=ej.isTouchDevice()?250:600,a=$(t.element).width();$(t.chartContainer).height();t.model.size.width?n="string"==typeof(e=t.model.size.width)&&-1!=e.indexOf("%")?a/100*parseInt(e):parseInt(e):0<a&&(n=a),$(t.svgObject).width(n),t.model.size.height?s="string"==typeof(a=t.model.size.height)&&-1!=a.indexOf("%")?this.vmlRendering?s:i/100*parseInt(a):parseInt(a):0<i?s=i:$(t.svgObject).css("display","block"),$(t.svgObject).height(s),$("#"+t._id).css("overflow","hidden"),t.svgObject.setAttribute("width",n),t.svgObject.setAttribute("height",s)},compareExtend:function(e,t,i){if("object"==typeof i&&null!==i)for(var s,n=Object.keys(i),a=n.length,r=0;r<a;r++)s=n[r],t.hasOwnProperty(s)&&null!=t[s]?(Array.isArray(t[s])||"object"==typeof t[s]&&null!==t[s])&&this.compareExtend({},t[s],i[s]):t[s]=i[s];return t},setModelProperties:function(e){if(e||this.setSvgSize(this),this.svgWidth=$(this.svgObject).width(),this.svgHeight=$(this.svgObject).height(),this.chartCross={visible:(e?this.chartCross:this.model.crosshair).visible,mArea:this.model.crosshair.type},this.serAnimation=[],this.model.series&&!e){var t,i,s,n,a,r,o=!1;this.model._drawTrendline=!1;for(var l=0;l<this.model.series.length;l++){r=null,ej.util.isNullOrUndefined(this.model.series[l].dataSource)&&ej.util.isNullOrUndefined(this.model.commonSeriesOptions.dataSource)||(r=(ej.util.isNullOrUndefined(this.model.series[l].dataSource)?this.model.commonSeriesOptions:this.model.series[l]).dataSource),this.model.series[l]=ej.copyObject({},this.model.commonSeriesOptions,this.model.series[l]),this.model.series[l].dataSource=r,n=this.model.series[l],this.serAnimation.push((null===n.enableAnimation||void 0===n.enableAnimation?this.model.commonSeriesOptions:n).enableAnimation),i=(t=n.trendlines).length;for(var d=0;d<i;d++)if(t[d]=ej.copyObject({},this.model.trendlineDefaults,t[d]),t[d]._visibility=t[d].visibility,"visible"==t[d].visibility.toLowerCase()){if(this.model._drawTrendline=!0,a=t[d].type.toLowerCase(),!ej.util.isNullOrUndefined(n.points))for(var h=0;h<n.points.length;h++)if(s=n.points[h],ej.util.isNullOrUndefined(s.y)||0==s.y){o=!0;break}t[d].isNull=!(!o||"power"!=a&&"exponential"!=a)}}}if(this.model.indicators)for(var c=0;c<this.model.indicators.length;c++)this.model.indicators[c]=ej.copyObject({},this.model.indicatorDefaults,this.model.indicators[c])},_createChart:function(){this.svgObject=this.svgRenderer.svgObj;var e=$.extend({},ej.EjSvgRender.commonChartEventArgs);this._trigger("load",e),this.setTheme(ej.EjSvgRender.themes,this.model.theme);e=this.model;if(e.series[0]&&e.series[0]._isdesigntime){e.series[0]={},e.series[0].points=[];for(var t=[],i=1;i<=10;i++)t.push({x:i,y:Math.floor(-30*Math.random())+40});e.series[0].points=t}this.vmlRendering=!!this.svgRenderer.vmlNamespace,!$(this.element).is(":visible")&&"hidden"==$(this.element).css("visibility")&&"none"==$(this.element).css("display")||(this.bindEvents(),this.bindTo())},setTheme:function(e,t){t=t.toLowerCase();(0<=t.indexOf("azure")||0<=t.indexOf("lime")||0<=t.indexOf("saffron"))&&-1==t.indexOf("gradient")&&-1==t.indexOf("dark")?e[t]=$.extend(!0,{},e.flatlight,e[t]):0<=(0<=t.indexOf("azuredark")||0<=t.indexOf("limedark")||t.indexOf("saffrondark"))&&-1==t.indexOf("gradient")?e[t]=$.extend(!0,{},e.flatdark,e[t]):(0<=t.indexOf("azure")||0<=t.indexOf("lime")||0<=t.indexOf("saffron"))&&0<=t.indexOf("gradient")&&-1==t.indexOf("dark")?e[t]=$.extend(!0,{},e.gradientlight,e[t]):(0<=t.indexOf("azuredark")||0<=t.indexOf("limedark")||0<=t.indexOf("saffrondark"))&&0<=t.indexOf("gradient")?e[t]=$.extend(!0,{},e.gradientdark,e[t]):0<=t.indexOf("high")?e[t]=$.extend(!0,{},e.highcontrast01,e[t]):0<=t.indexOf("material")||0<=t.indexOf("office")?e[t]=$.extend(!0,{},e.material,e[t]):e[t]||(t="flatlight"),this.model._themeChanged?this.model=ej.copyObject({},this.model,e[t]):this.model=this.compareExtend({},this.model,e[t]),this.model.background=(ej.util.isNullOrUndefined(this.model.background)?e[t]:this.model).background},_drawBackInterior:function(){var e;this.model.backInterior&&this.model.backInterior._gradientStop&&(e={id:this.svgObject.id+"_backGradient",x1:"0%",y1:"0%",x2:"0%",y2:$(this.svgObject).height()+"%"},this.svgRenderer.drawGradient(e,this.model.backInterior._gradientStop))},_drawBackImage:function(){var e={height:$(this.svgObject).height(),width:$(this.svgObject).width(),href:this.model.backGroundImageUrl,x:0,y:0,id:this.svgObject.id+"_backImage",visibility:"visible",preserveAspectRatio:"none"};this.svgRenderer.drawImage(e,this.svgObject)},_getDataType:function(e){var t=typeof e;return"number"==t||"string"==t?t:"date"==jQuery.type(e)?"date":null==e&&null},addedXYValues:function(e){e=e||!1;var t,i,s,n,a,r,o,l,d,h,c=this.model,u=c.series,p=u[0].type.toLowerCase(),m=ej.util.isNullOrUndefined,g=c.primaryXAxis.valueType,f=!1,_=c.AreaType=ej.seriesTypes[p].prototype.chartAreaType;if("cartesianAxes"!=_&&"None"!=_&&(_=c.AreaType="polaraxes",c.isPolar="polar"==p),_=c.AreaType=c.AreaType.toLowerCase(),!e){for(s=0;s<u.length;s++)if("visible"==u[s].visibility){if(a=!(l=!0),u[s].dataSource&&0!=u[s].dataSource.length){(o=u[s])._xAxisValueType=null,t=o.points.length,null!=(r=o.points[0].x)&&(o._xAxisValueType=this._getDataType(r));for(var v=o.points.length,b=o.points,x=0;x<v;x++)"string"==typeof b[x].x&&-1!=b[x].x.indexOf("<br>")&&(b[x].x=b[x].x.replace(/(<br>)+/g,"<br>"))}else{b=u[s].points,u[s].points=null,u[s]=$.extend(!0,{},c.commonSeriesOptions,u[s]),u[s].points=b,o=u[s],"datetime"==g&&(f=!0),t=b.length;for(var y=0;y<t;y++)b[y].YValues=[],d=1==/^-?[0-9]*\.?[0-9]+$/.test(b[y].x),h="category"!=g&&"datetime"!=g&&("string"==typeof b[y].x||b[y].x instanceof String)&&parseFloat(b[y].x),!isNaN(h?b[y].x:parseFloat(b[y].x))&&h&&d&&"category"!=g&&"none"!=_&&(b[y].x=f?new Date(b[y].x):parseFloat(b[y].x)),"string"==typeof b[y].x&&-1!=b[y].x.indexOf("<br>")&&(b[y].x=b[y].x.replace(/(<br>)+/g,"<br>")),b[y].xValue=b[y].x,a||m(r=b[y].x)||(o._xAxisValueType=this._getDataType(r),a=!0),o._hiloTypes||"rangecolumn"==o.drawType.toLowerCase()?(m(b[y].high)||(b[y].YValues[0]=b[y].high,b[y].y=b[y].high),m(b[y].low)||(b[y].YValues[1]=b[y].low),m(b[y].open)||(b[y].YValues[2]=b[y].open),m(b[y].close)||(b[y].YValues[3]=b[y].close)):(b[y].YValues[0]=o.points[y].y,(l=l&&!m(b[y].size))&&(b[y].YValues[1]=b[y].size))}if("waterfall"==o.type.toLowerCase())this.calculateWaterfallSeriesPoints(o.points);else if(o._previousType&&"waterfall"==o._previousType.toLowerCase())for(i=o.points,n=0;n<i.length;n++)i[n].waterfallSum=void 0,i[n].textOptions=null}this._setInternalValues()}},calculateWaterfallSeriesPoints:function(e){for(var t=0,i=0,s=0,n=0;n<e.length;n++)e[n].isEmpty?(e[n].YValues[1]=0,e[n].YValues[0]=0):(i+=e[n].showIntermediateSum||e[n].showTotalSum?0:e[n].y,e[n].showIntermediateSum?(e[n].YValues[1]=t,e[n].YValues[0]=i,e[n].waterfallSum=i-t,t=i):e[n].showTotalSum?(e[n].YValues[1]=0,e[n].YValues[0]=i,e[n].waterfallSum=i):(e[n].YValues[1]=s,e[n].YValues[0]=s+e[n].y,s=i))},_setInternalValues:function(){for(var e=0;e<this.model.series.length;e++){var t=this.model.series[e];if("cartesianaxes"==this.model.AreaType&&"cartesianAxes"==ej.seriesTypes[t.type.toLowerCase()].prototype.chartAreaType)t._zOrder=t.zOrder||0,this.model._visibleSeries.push(t);else if("none"==this.model.AreaType&&"None"==ej.seriesTypes[t.type.toLowerCase()].prototype.chartAreaType){t._zOrder=t.zOrder||0;var i=this.model.series[e].type.toLowerCase();if("funnel"==i||"pyramid"==i){this.model._visibleSeries.push(t);break}this.model._visibleSeries.push(t)}else"polaraxes"==this.model.AreaType&&"PolarAxes"==ej.seriesTypes[t.type.toLowerCase()].prototype.chartAreaType&&(t._zOrder=t.zOrder||0,this.model._visibleSeries.push(t));if((t._yAxisName||t._xAxisName)&&this.model._axes)for(var s=0;s<this.model._axes.length;s++)t._yAxisName&&t._yAxisName==this.model._axes[s].name&&(this.model._axes[s].orientation=this.model._axes[s].orientation||(this.model.requireInvertedAxes?"horizontal":"vertical")),t._xAxisName&&t._xAxisName==this.model._axes[s].name&&(this.model._axes[s].orientation=this.model._axes[s].orientation||(this.model.requireInvertedAxes?"vertical":"horizontal"))}},setHiloStyle:function(e,t,i,s){t=e.points[t],s=t.fill||e.fill||s,i=s||this.model.seriesColors[i];return"array"==jQuery.type(i)?i[0].color:i},setStyle:function(e,t,i,s,n,a){var r,o,l,d,h=(a||t._visiblePoints)[s],c=h.border,a=t.border;return t._hiloTypes&&(r=t.isFill?t.fill:null),"cartesianaxes"==e.chartObj.model.AreaType?(h.fill?l=h.fill:"waterfall"==t.type.toLowerCase()?((h.showIntermediateSum||h.showTotalSum)&&0<h.waterfallSum||0<h.y&&!h.showIntermediateSum&&!h.showTotalSum)&&(l=t.positiveFill||n):l=r||n,o=l||this.model.seriesColors[i],o=e.chartObj.model.requireInvertedAxes?this.svgRenderer.createGradientElement(e.getSeriesName(t)+"_"+i+s,o,0,0,100,0,e.gSeriesGroupEle):this.svgRenderer.createGradientElement(e.getSeriesName(t)+"_"+i+s,o,0,0,0,100,e.gSeriesGroupEle)):(d=this.model.pointColors,l=h.fill||("array"==jQuery.type(d[s])?d[s][0].color:d[s]),d=this.svgRenderer.createGradientElement(e.getSeriesName(t)+s,l,0,0,0,$(e.svgObject).height()||parseFloat(this.model.size.height),e.chartObj.gSeriesEle)),s=(c&&c.color?c:a).color,l=(c&&!ej.util.isNullOrUndefined(c.width)?c:a).width,e=h.opacity||t.opacity,{interior:o||d,borderColor:s,borderWidth:l,width:h.width||t.width,opacity:e,dashArray:(c&&c.dashArray?c:a).dashArray}},colorNameToHex:function(e){var t=e,e={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"[object Array]"!=Object.prototype.toString.call(t)&&void 0!==e[t.toLowerCase()]?e[t.toLowerCase()]:t},_getLocalizedLabels:function(){return ej.getLocalizedConstants(this.sfType,this.model.locale)},_setCulture:function(e){this.culture=ej.preferredCulture(e)},draw:function(e){this.removeMultiRect();var t={axes:{}};this._drawBackInterior(),this.model.chartRegions=[],this.model.outsideDataRegionPoints=[],this.model.regionCount=null,this.model.circularRadius=[],this.model.circleCenterX=[],this.model.circleCenterY=[],this.model.innerRadius=[],this.model.bounds=[],this.accDataLabelRegion=[],this.model.rightsidebounds=[],this.model.leftsidebounds=[],this.model.excludeDataUpdate=e,this.model.yAxisLabelRegions=[],this.model.xAxisLabelRegions=[],this.model.axisMultiLevelLabelRegions=[],this.model.multiLevelLabelRegions=[],this.model.minhightwidth=!1,this.model._isPieOfPie=!1,e||(this.model._visibleSeries=[]),this.model.stackedValue={},this.model._locale=this.model.locale||"en-US",this._setCulture(this.model._locale),this._localizedLabels=this._getLocalizedLabels();var i,s=this.model.series.length;ej.util.isNullOrUndefined(this.model.sideBySideSeriesPlacement)?this.model._sideBySideSeriesPlacement=!this.model.enable3D:this.model._sideBySideSeriesPlacement=this.model.sideBySideSeriesPlacement;for(var n=0;n<s;n++)i=(h=this.model.series[n]).type.toLowerCase(),h._isTransposed=-1==i.indexOf("bar")?h.isTransposed:!h.isTransposed;0<s&&this.addedXYValues(e),this.model.AreaType=this.model.AreaType||"cartesianaxes",this._isEjScroller();var a=$.extend({},ej.EjSvgRender.commonChartEventArgs);a.data={},this._trigger("preRender",a),this.gLegendEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_Legend"}),this.gTitleEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_ChartTitle",cursor:"default"}),this.gSubTitleEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_ChartsubTitle",cursor:"default"}),this._createAxisLabelAndRange();for(n=0;n<this.model._axes.length;n++)t.axes[this.model._axes[n].name]={};this._initializeSeriesColors(),this._calculateLegendBounds(),this.legendRender=new ej.EjLegendRender(this);var r=$.extend({},ej.EjSvgRender.commonChartEventArgs);r.data={legendBounds:this.model.LegendBounds},this._trigger("legendBoundsCalculate",r);for(var o=0;o<this.model.indicators.length;o++){var l=this.model.indicators[o];if(l._points=[],l.xAxisName=l.xAxisName||this.model._axes[0].name,l.yAxisName=l.yAxisName||this.model._axes[1].name,l.isIndicator=!0,l.dataSource&&0<l.dataSource.length)l._hiloTypes=!0,this._processJsonData(l.dataSource,l),l._points=l.points;else if(0<l.points.length)for(n=0;n<l.points.length;n++)l._points=l.points,l._points[n].xValue=l.points[n].x,l._points[n].YValues=[],l._points[n].YValues[0]=l.points[n].close;else if(""!=l.seriesName)for(var d=0;d<this.model._visibleSeries.length;d++){var h=this.model._visibleSeries[d];l.seriesName==h.name&&(l._points=$.extend(!0,[],h.points))}}for(g=0;g<this.model._axes.length;g++)if(this.model._axes[g].valueType&&"category"==this.model._axes[g].valueType.toLowerCase())for(n=0;n<this.model.indicators.length;n++)if(l=this.model.indicators[n],this.model._axes[g].name==l.xAxisName)for(o=0;o<l._points.length;o++)l._points[o].xValue=o;for(this.model.indicatorRange=[],d=0;d<this.model.indicators.length;d++)0<(l=this.model.indicators[d])._points.length&&(x=l.type.toLowerCase(),(u=new ej.indicatorTypes[x]).calculateSegment(l,this));for(var c=0;c<this.model._visibleSeries.length;c++){var u=this.model._visibleSeries[c];for(n=0;n<u.points.length&&("string"==typeof u.points[n].xValue&&-1!=u.points[n].xValue.indexOf("/Date("));n++)u.points[n].xValue=new Date(parseInt(u.points[n].xValue.substr(6)))}this.model.hAxes=[],this.model.vAxes=[];var p=!1,m=!1;this._arrangeAxis(),this.model.crosshairLabelVisibility=!1;for(var g=0;g<this.model._axes.length;g++){var f=this.model._axes[g];this.model.crosshairLabelVisibility=f.crosshairLabel.visible||this.model.crosshairLabelVisibility;var _=[],s=this.model.series.length,v=this.model._axes[g].orientation.toLowerCase(),b=this.model._axes[g].rangePadding.toLowerCase();if(ej.util.isNullOrUndefined(this.model._axes[g]._rangePadding)&&(this.model._axes[g]._rangePadding=this.model._axes[g].rangePadding),"auto"==b){"vertical"==v&&(f.rangePadding=this.model.requireInvertedAxes?"none":"normal"),"horizontal"==v&&(f.rangePadding=this.model.requireInvertedAxes?"normal":"none");for(o=0;o<s;o++){var x=this.model.series[o].type.toLowerCase();if(-1!=x.indexOf("100")&&f.name==this.model.series[o]._yAxisName){f.rangePadding="round";break}}}for(var y=0;y<f.stripLine.length;y++)f.stripLine[y]=$.extend(!0,{},this.model.stripLineDefault,f.stripLine[y]),"over"==f.stripLine[y].zIndex.toLowerCase()?p=!0:m=!0;var w=f.orientation.toLowerCase();this.model._visibleSeries.length;for(o=0;o<this.model._visibleSeries.length;++o){0;h=this.model._visibleSeries[o];this.model._hasSeriesPoints=0<h.points.length||this.model._hasSeriesPoints,h.xAxisName||(h._xAxisName=this.model._axes[0].name),h.yAxisName||(h._yAxisName=this.model._axes[1].name),h._xAxisName=h._xAxisName||h.xAxisName||this.model._axes[0].name,h._yAxisName=h._yAxisName||h.yAxisName||this.model._axes[1].name;var C=h._xAxisName.toLowerCase(),S=h._yAxisName.toLowerCase(),T=f.name.toLowerCase();if((C||S)&&(C==T||S==T)){if(("horizontal"==w||-1!=h.type.toLowerCase().indexOf("bar")&&"vertical"==w)&&f.valueType&&"datetime"==f.valueType.toLowerCase())for(c=0;c<h.points.length;c++)"string"!=typeof h.points[c].xValue||isNaN(Date.parse(h.points[c].xValue))||(h.points[c].xValue=new Date(Date.parse(h.points[c].xValue)));else"string"!=h._xAxisValueType||f.valueType||(f._valueType="horizontal"==w&&!this.model.requireInvertedAxes||"vertical"==w&&this.model.requireInvertedAxes?"category":"double"),"date"!=h._xAxisValueType||f.valueType||(f._valueType="horizontal"==w&&!this.model.requireInvertedAxes||"vertical"==w&&this.model.requireInvertedAxes?"datetime":"double");"visible"==this.model._visibleSeries[o].visibility.toLowerCase()&&_.push(h)}}if(w==(this.model.requireInvertedAxes?"horizontal":"vertical")){var R=!1,k=!1,s=_.length;f.isStacked100=0<_.length;for(n=0;n<s;n++)-1!=(x=_[n].type.toLowerCase()).indexOf("stacking")||"polaraxes"==this.model.AreaType&&("column"==_[n].drawType.toLowerCase()||"area"==_[n].drawType.toLowerCase())&&_[n].isStacking?-1==x.indexOf("100")||R?-1!=x.indexOf("100")||k||(this._calculateStackingValues(_,f,t),k=!0,f.isStacked100=!1):(this._calculateStackingCumulativeValues(_,f,t),R=!0):f.isStacked100=!1}!(v=f.scrollbarSettings).visible||null==v.pointsLength&&null==v.range.min&&null==v.range.max||(this.model.isLazyZooming=!0),f._valueType=f._valueType||f.valueType||"double";for(var v=new ej.axisTypes[f._valueType.toLowerCase()],O=0;O<_.length;O++)for(var D=0;D<_[O].trendlines.length;D++)if("visible"==_[O].trendlines[D].visibility){this.model._drawTrendline=!0;break}v._calculateRanges(this,f,_,t,e)}this._chartResize=!1;var I,j,a=$.extend({},ej.EjSvgRender.commonChartEventArgs);if(a.data={axes:this.model._axes},this._trigger("axesLabelsInitialize",a),this.model.isLazyZooming||this._updateScroll(),this.svgHeight==this.model.svgHeight&&this.svgWidth==this.model.svgWidth||(I=ej.util.isNullOrUndefined(this.prevHeight)?this.svgHeight:this.prevHeight,j=ej.util.isNullOrUndefined(this.prevWidth)?this.svgWidth:this.prevWidth,(Q=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={currentHeight:I,currentWidth:j,newHeight:this.model.svgHeight,newWidth:this.model.svgWidth},this._trigger("beforeResize",Q),Q.cancel?(this.model.enableCanvasRendering&&(this.svgRenderer.svgObj.width=Q.data.currentWidth,this.svgRenderer.svgObj.height=Q.data.currentHeight),this.model.svgWidth=Q.data.currentWidth,this.model.svgHeight=Q.data.currentHeight,$(this.svgObject).width(Q.data.currentWidth),$(this.svgObject).height(Q.data.currentHeight)):(this.model.enableCanvasRendering&&(this.svgRenderer.svgObj.width=Q.data.newWidth,this.svgRenderer.svgObj.height=Q.data.newHeight),this.model.svgWidth=Q.data.newWidth,this.model.svgHeight=Q.data.newHeight,$(this.svgObject).width(Q.data.newWidth),$(this.svgObject).height(Q.data.newHeight))),this._calculateAreaBounds(t),this.model.enable3D&&(M=new ej.Ej3DRender,this.vector=new M.vector3D,this.matrixobj=new M.matrix3D,this.bsptreeobj=new M.BSPTreeBuilder,this.polygon=new M.polygon3D,this.graphics=new M.Graphics3D,this.chart3D=this.svgRenderer.createGroup({id:this.svgObject.id+"_Chart3D"}),ej.Ej3DRender.Polygons=[]),"none"!=this.model.AreaType){this._calculateAxisSize(t);for(var n=0,L=this.model._axes.length;n<L;n++)this._validateCrossing(this.model._axes[n])&&this._axisCrossing(this.model._axes[n],!1,t);if(t._crossAxisOverlap){for(n=0,L=this.model._axes.length;n<L;n++)t.axes[this.model._axes[n].name]._validCross&&this._axisCrossing(this.model._axes[n],!0,t);t._crossAxisOverlap=!1}var A=$.extend({},ej.EjSvgRender.commonChartEventArgs);A.data={areaBounds:this.model.m_AreaBounds},this._trigger("chartAreaBoundsCalculate",A),this._drawChartAreaRect(),""!=this.model.title.text&&this.model.title.text&&this.model.title.visible&&this._drawTitle(),this.gXaxisEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxis"}),this.gYaxisEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxis"}),this.gPolarAxisEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_AxisLine"}),this.model.enable3D?($.extend(ej.Ej3DAxisRenderer.prototype,this),this.chartaxis=new ej.Ej3DAxisRenderer(this)):($.extend(ej.EjAxisRenderer.prototype,this),this.chartaxis=new ej.EjAxisRenderer(this));var E=this.chartaxis;if(this.model.xAxisTitleRegion=[],this.model.yAxisTitleRegion=[],this.model.enable3D){for(var P=0;P<this.model._axes.length;P++)E._drawAxes(P,this.model._axes[P],t);ej.Ej3DChart.prototype.update3DWall(this,t)}else for(P=0;P<this.model._axes.length;P++)E._drawGridLines(P,this.model._axes[P],t);this.model.requireInvertedAxes?(this.svgRenderer.append(this.gYaxisEle,this.svgObject),this.svgRenderer.append(this.gXaxisEle,this.svgObject)):(this.svgRenderer.append(this.gXaxisEle,this.svgObject),this.svgRenderer.append(this.gYaxisEle,this.svgObject));var r="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.X,a="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.Y,M="polaraxes"==this.model.AreaType?$(this.svgObject).width():this.model.m_AreaBounds.Width,A="polaraxes"==this.model.AreaType?$(this.svgObject).height():this.model.m_AreaBounds.Height,A={id:this.svgObject.id+"_ChartAreaClipRect",x:r,y:a,width:M,height:A,fill:"white","stroke-width":1,stroke:"Gray"};this.svgRenderer.drawClipPath(A,this.svgObject),this._setZoomProperties()}else this._drawChartAreaRect(),A={id:this.svgObject.id+"_ChartAreaClipRect",x:0,y:0,width:$(this.svgObject).width(),height:$(this.svgObject).height(),fill:"white","stroke-width":1,stroke:"Gray"},this.svgRenderer.drawClipPath(A,this.svgObject),""!=this.model.title.text&&this.model.title.text&&this.model.title.visible&&this._drawTitle();m&&"cartesianaxes"==this.model.AreaType&&!this.model.enable3D&&(this.gStriplineBehind=this.svgRenderer.createGroup({id:this.svgObject.id+"_StriplineBehind","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"}),this._renderStripline("behind")),this.model.initSeriesRender&&(this.seriesRender(t,e),this.indicatorRender());var F=this.model.annotations.length;$("#annotation_group_"+this._id).empty();for(var N=0;N<F;N++){var z=this.model.annotations[N];z.visible&&this.annotationRender(z,N)}"polaraxes"==this.model.AreaType&&this.model._axes[1].visible&&!this.model.enable3D&&this.chartaxis._drawAxisLine(this.model._axes[1]),"cartesianaxes"===this.model.AreaType&&(this.model.requireInvertedAxes?(this.svgRenderer.append(this.gYaxisEle,this.svgObject),this.svgRenderer.append(this.gXaxisEle,this.svgObject)):(this.svgRenderer.append(this.gXaxisEle,this.svgObject),this.svgRenderer.append(this.gYaxisEle,this.svgObject)),this.gXaxisTickEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_XAxisTick"}),this.gYaxisTickEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_YAxisTick"})),$.extend(ej.EjAxisRenderer.prototype,this),this.chartaxis=new ej.EjAxisRenderer(this);E=this.chartaxis;if(p&&"cartesianaxes"==this.model.AreaType&&!this.model.enable3D&&(this.gStriplineOver=this.svgRenderer.createGroup({id:this.svgObject.id+"_StriplineOver","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"}),this._renderStripline("over")),!this.model.enable3D)for(var V="cartesianaxes"==this.model.AreaType.toLowerCase(),B=this.model._axes,H=this.model.enableCanvasRendering,P=0,L=B.length;P<L;P++){var f=B[P],Y=t.axes[f.name]._lineOption,U=t.axes[f.name]._validCross;V&&(E._drawAxes(P,f),Y[0]&&this.svgRenderer.drawLine(Y[0],Y[1]),"horizontal"===f.orientation.toLowerCase()?(E._drawXAxisTickLine(P,f,H?null:Y[1],t),E._drawXAxisMultiLevelLabels(P,f)):(E._drawYAxisTickLine(P,f,H?null:Y[1],U),E._drawYAxisMultiLevelLabels(P,f)),f._crossValue=null)}this.resetZooming||!this.model._chartAreaZoom&&!this.panning||this._enableZoomingButtons(),this.resetZooming=!1,this.svgHeight==this.model.svgHeight&&this.svgWidth==this.model.svgWidth||(this.prevHeight=this.model.svgHeight,this.prevWidth=this.model.svgWidth,(Q=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={height:this.prevHeight,width:this.prevWidth,prevHeight:I,prevWidth:j,originalHeight:this.svgHeight,originalWidth:this.svgWidth},this._trigger("afterResize",Q));_=this.model._visibleSeries;0==$.grep(_,function(e){return"true"==e.selectionSettings.enable.toString()}).length?(this.model.selectionEnable=!1,this._removeSelection()):this.model.selectionEnable=!0;var W=this.remove_duplicates(this.model.selectedDataPointIndexes);if(this.model.selectionEnable){this._removeSelection(),this.model._isStateChaged=!0;for(var X,G,q=W.length,n=0;n<q;n++)X=W[n],(h=this.model._visibleSeries[X.seriesIndex])&&("series"!=(G=h.selectionSettings.mode)&&h.points[X.pointIndex]||"series"==G)&&this.segmentSelection(X.event,X.legendData,X.seriesIndex,X.pointIndex,X.data)}this.chartUpdating=!1,$(document).find("#measureTex").remove();var Q=$.extend({},ej.EjSvgRender.commonChartEventArgs);Q.data={model:this.model},this._trigger("loaded",Q);for(n=0;n<this.model._axes.length;n++)"logarithmic"!=(f=$.extend(!0,{},this.model._axes[n]))._valueType.toLowerCase()&&(this.model._axes[n].range=f._initialRange)},remove_duplicates:function(e){for(var t,i=[],s=[],n=e.length,a=this.model._visibleSeries,r=0;r<n;r++)"series"==(t=(t=a[e[r].seriesIndex])?t.selectionSettings.mode:"")?(-1<i.indexOf(e[r].seriesIndex)||s.push(e[r]),i.push(e[r].seriesIndex)):"cluster"==t?(-1<i.indexOf(e[r].pointIndex)||s.push(e[r]),i.push(e[r].pointIndex)):(e[r]in i||s.push(e[r]),i.push(e[r]));return s},_setZoomProperties:function(){for(var e,t,i,s,n=0;n<this.model._axes.length;n++)s=(e=this.model._axes[n]).orientation.toLowerCase(),t=e.zoomFactor.toFixed(3),i=e.zoomPosition.toFixed(3),"horizontal"!=s||t==this._xZoomFactor()&&i==this._xZoomPosition()||(this._xZoomFactor(e.zoomFactor.toFixed(3)),this._xZoomPosition(e.zoomPosition.toFixed(3))),"vertical"!=s||t==this._yZoomFactor()&&i==this._yZoomPosition()||(this._yZoomFactor(e.zoomFactor.toFixed(3)),this._yZoomPosition(e.zoomPosition.toFixed(3)))},annotationRender:function(e,t){var i=this._id,s=!1,n=this.model.series[0],a=n.type.toLowerCase(),r=this.model.m_AreaBounds.X,o=this.model.m_AreaBounds.Y,l=this.model.m_AreaBounds.Width,d=this.model.m_AreaBounds.Height,h=this.model.margin.left,c=this.model.margin.top,u=$.inArray(n,this.model._visibleSeries),p=this.model.circularRadius[u],m=this.model.circleCenterX[u],g=this.model.circleCenterY[u],f=$(document);e=$.extend(!0,{},this.model.annotationsDefault,e),(H=0!=$("#annotation_group_"+i).length?$("#annotation_group_"+i):$("<div></div>").attr("id","annotation_group_"+i)).css({position:"absolute",left:"0px",top:"0px"});var _=e.content,v=$("#"+_);"SCRIPT"==v.get(0).tagName&&(v=$($("#"+_)[0].innerHTML));var b=v.clone(),u="annotation_"+i+"_"+_+"_"+t;$(b).attr("id",u);var x=$(b);x.css({position:"absolute","z-index":2e3});var v=e.region.toLowerCase(),_=e.coordinateUnit.toLowerCase(),y="string"==typeof e.x||"object"==typeof e.x?Date.parse(e.x):e.x,t=e.y,u=e.horizontalAlignment.toLowerCase(),b=e.verticalAlignment.toLowerCase();if("pixels"==_)"series"==v?y+r<l+r+h&&t+o<d+o+c&&(V=y+r,B=t+o):"chart"==v&&$(this.svgObject).width()>y&&$(this.svgObject).height()>t&&(V=y,B=t),x.css({left:V,top:B}),s=!0;else if("points"==_){var w={x:y,y:t};if("polaraxes"==this.model.AreaType){I=this.model._axes[0],j=this.model._axes[1];y>=I.visibleRange.min&&y<=I.visibleRange.max&&t>=j.visibleRange.min&&t<=j.visibleRange.max&&(N=this.TransformToVisibleAnnotation(I,j,y,t,this),x.css({left:N.X,top:N.Y}),s=!0)}else if("pyramid"==a||"funnel"==a)for(var C,S=0;S<n._visiblePoints.length;S++)(n._visiblePoints[S].xValue<=y&&y<n._visiblePoints.length||Date.parse(n._visiblePoints[S].xValue)<=y&&y<n._visiblePoints.length)&&(C=n._visiblePoints[y],x.css({left:C.xLocation+this.pyrX,top:C.yLocation+this.pyrY-C.height/2}),s=!0);else if("pie"==a||"doughnut"==a||"pieofpie"==a)for(var T,R,k,O,D,S=0;S<n._visiblePoints.length;S++)(n._visiblePoints[S].xValue<=y&&y<n._visiblePoints.length||Date.parse(n._visiblePoints[S].xValue)<=y&&y<n._visiblePoints.length)&&(C=n._visiblePoints[y],O=y,R=new ej.seriesTypes[a],k=C?C.currentMidAngle:0,D=O!=n.explodeIndex&&!n.explodeAll||this.vmlRendering?(T=m,g):(T=m+Math.cos(k)*n.explodeOffset,g+Math.sin(k)*n.explodeOffset),O=((O=R.getXCordinate(T,p,k))+(O=(O+T)/2))/2,D=((k=R.getYCordinate(D,p,k))+(D=(k+D)/2))/2,x.css({left:O,top:D}),s=!0);else{for(var I,j,L=e.xAxisName,A=e.yAxisName,E=this.model._axes.length,P=0;P<E;P++)this.model._axes[P].name==L&&(I=this.model._axes[P]),this.model._axes[P].name==A&&(j=this.model._axes[P]);I=I||this.model._axes[0],j=j||this.model._axes[1];c="string"==typeof I.range.min||"object"==typeof I.range.min?Date.parse(I.range.min):I.range.min,t="string"==typeof I.range.max||"object"==typeof I.range.max?Date.parse(I.range.max):I.range.max;c<=y&&y<=t&&(this.model.requireInvertedAxes?(w.x=w.y+(w.y=w.x,0),N=this._getAnnotationPoint(w,j,I),x.css({left:N.X+r,top:N.Y+I.y})):(N=this._getAnnotationPoint(w,I,j),x.css({left:N.X+r,top:N.Y+j.y})),s=!0)}}else{x.css("display","block").appendTo($(H)),$(H).appendTo("#chartContainer_"+i);var M=x.outerWidth(),F=x.outerHeight();if("chart"==v){switch(u){case"middle":V=$(this.svgObject).width()/2-M/2;break;case"left":V=0;break;case"right":V=$(this.svgObject).width()-M}switch(b){case"middle":B=$(this.svgObject).height()/2-F/2;break;case"top":B=0;break;case"bottom":B=$(this.svgObject).height()-F}}else if("pie"==a||"doughnut"==a||"pieofpie"==a){switch(V=m,B=g,u){case"middle":V=m-M/2;break;case"left":V=m-p;break;case"right":V=m+p-M}switch(b){case"middle":B=g-F/2;break;case"top":B=g-p;break;case"bottom":B=g+p}}else{switch(u){case"middle":V=r+l/2-M/2;break;case"left":V=r;break;case"right":V=r+l-M}switch(b){case"middle":B=o+d/2-F/2;break;case"top":B=o;break;case"bottom":B=o+d-F}}"pyramid"!=a&&"funnel"!=a||(V-=h),x.css({left:V,top:B})}if(V=parseFloat(x.css("left")),B=parseFloat(x.css("top")),"none"!=_&&s){switch(x.css("display","block").appendTo($(H)),$(H).appendTo("#chartContainer_"+i),M=x.outerWidth(),F=x.outerHeight(),u){case"middle":V-=M/2;break;case"left":V-=M}switch(b){case"middle":B-=F/2;break;case"top":B-=F}}w=e.margin;V=V+w.left-w.right,B=B+w.top-w.bottom;var N=$.extend({},ej.EjSvgRender.commonChartEventArgs);N.data={content:x.html(),location:{x:V,y:B},opacity:e.opacity,angle:e.angle},this._trigger("annotationRendering",N),x.html(N.data.content),x.css({left:N.data.location.x,top:N.data.location.y,opacity:N.data.opacity});h=N.data.angle;h&&x.css({"-ms-transform":"rotate("+h+"deg)","-webkit-transform":"rotate("+h+"deg)","-moz-transform":"rotate("+h+"deg)","-o-transform":"rotate("+h+"deg)","-transform":"rotate("+h+"deg)"});var z,V,B,H=x.attr("id"),w=b=u=i=0,e=$("#"+this._id).width(),N=$("#"+this._id).height();!s||0!=h||"series"!=v&&"points"!=_?s&&0==h&&"chart"==v?(e<V+M&&(i=M-(V+M-e)),V<0&&(u=0==(u=M+V)?M:u),N<B+F&&(b=F-(B+F-N)),B<0&&(w=0==(w=F+B)?F:w),i=0==i?M:i,b=0==b?F:b,document.getElementById(H).style.clip="rect("+w.toString()+"px,"+i.toString()+"px,"+b.toString()+"px,"+u+"px)"):!s||90!=h||"series"!=v&&"points"!=_?s&&90==h&&"chart"==v&&(V=(z=document.getElementById(H).getBoundingClientRect()).left-$(this.svgObject).offset().left,N<(B=z.top-$(this.svgObject).offset().top)+M&&(i=M-(B+M-N)),V<0&&(b=0==(b=F-(0-V))?F:b),B<0&&(u=0==(u=0-B)?M:u),e<V+F&&(w=V+F-e),i=0==i?M:i,b=0==b?F:b,document.getElementById(H).style.clip="rect("+w.toString()+"px,"+i.toString()+"px,"+b.toString()+"px,"+u+"px)"):(V=(z=document.getElementById(H).getBoundingClientRect()).left-$(this.svgObject).offset().left+f.scrollLeft(),d+o<(B=z.top-$(this.svgObject).offset().top+f.scrollTop())+M&&(i=M-(B+M-(d+o))),V<r&&(b=F-(r-V)),B<o&&(u=o-B),l+r<V+F&&(w=V+F-(l+r)),i=0==i?M:i,b=0==b?F:b,document.getElementById(H).style.clip="rect("+w.toString()+"px,"+i.toString()+"px,"+b.toString()+"px,"+u+"px)"):(l+r<V+M&&(i=M-(V+M-(l+r))),V<r&&(u=r-V),d+o<B+F&&(b=F-(B+F-(d+o))),B<o&&(w=o-B),i=0==i?M:i,b=0==b?F:b,document.getElementById(H).style.clip="rect("+w.toString()+"px,"+i.toString()+"px,"+b.toString()+"px,"+u+"px)")},TransformToVisibleAnnotation:function(e,t,i,s,n){i="logarithmic"==e._valueType&&0<i?Math.log(i,e.logBase):i,s="logarithmic"==e._valueType&&0<s?Math.log(s,t.logBase):s;s=n.model.Radius*ej.EjSvgRender.utils._valueToCoefficient(t,s,this),i=ej.EjSvgRender.utils._valueToVector(e,i);return{X:n.model.centerX+s*i.X,Y:n.model.centerY+s*i.Y}},_getAnnotationPoint:function(e,t,i){this.model.requireInvertedAxes;var s=e.x,n=e.y,s="logarithmic"==t._valueType?ej.EjSvgRender.utils._logBase(0==s?1:s,t.logBase):s,n="logarithmic"==i._valueType?ej.EjSvgRender.utils._logBase(0==n?1:n,t.logBase):n,s=ej.EjSvgRender.utils._getPointXY(s,t.visibleRange,t.isInversed)*t.width,n=(1-ej.EjSvgRender.utils._getPointXY(n,i.visibleRange,i.isInversed))*i.height;return e.location={X:s,Y:n},e.location},indicatorRender:function(){0<$(this.svgObject).find("#"+this.svgObject.id+"_IndicatorCollection").length&&$(this.svgObject).find("#"+this.svgObject.id+"_IndicatorCollection").remove();var e={id:this.svgObject.id+"_IndicatorCollection","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"};this.gIndicatorEle=this.svgRenderer.createGroup(e);for(var t=0;t<this.model.indicators.length&&this.model.indicators[t].visible&&0<this.model.indicators[t]._points.length;t++){for(var i=this.model.indicators[t],s=i.animationDuration,n=0;n<this.model._axes.length;n++){var a=this.model._axes[n];a.name&&"horizontal"==a.orientation.toLowerCase()&&a.name.toLowerCase()==i.xAxisName.toLowerCase()?i.xAxis=a:a.name&&"vertical"==a.orientation.toLowerCase()&&a.name.toLowerCase()==i.yAxisName.toLowerCase()&&(i.yAxis=a)}var r=i.type.toLowerCase(),r=new ej.indicatorTypes[r];this.model.enableCanvasRendering?(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.svgRenderer.ctx.rect(this.model.m_AreaBounds.X,i.yAxis.y,i.xAxis.width,i.yAxis.height),this.svgRenderer.ctx.clip(),r.draw(i,this),this.svgRenderer.ctx.restore()):r.draw(i,this);r=r.gIndicatorGroupEle;r&&ej.EjSvgRender.utils._drawAxesBoundsClipPath(r,i,this),this.vmlRendering||this.model.enableCanvasRendering||!i.enableAnimation||i._animatedSeries&&i.type==i._previousType||(this.svgRenderer.append(this.gIndicatorEle,this.svgObject),r=$(this.gIndicatorEle).find("#"+this.svgObject.id+"_indicatorGroup_"+t+"_ClipRect").children(),ej.EjSeriesRender.prototype._doLineAnimation(this,r,s),this.model.AnimationComplete=!0,i._animatedSeries=!0,i._previousType=i.type),this.svgRenderer.append(this.gIndicatorEle,this.svgObject)}},doAnimation:function(e){var t,i,s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v=this,b=v.model,x=b.requireInvertedAxes,y=e.type.toLowerCase(),w=$.inArray(e,b._visibleSeries),b=this.svgObject.id+"_SeriesGroup_"+w,C=$(v.gSymbolGroupEle)[w].childNodes,S=C.length,T=$(v.gDataLabelEle)[w].childNodes,R=T.length,k=$(v.gConnectorEle)[w].childNodes,O=k.length,D=null==$(v.gErrorBarGroupEle)[w]?void 0:$(v.gErrorBarGroupEle)[w].childNodes,I=ej.util.isNullOrUndefined(D)?0:D.length,j=e._animationType,L=ej.EjSeriesRender.prototype;switch(v.gSeriesGroupEle=$("#"+b)[0],w=v.model.series[w].animationDuration,ej.util.isNullOrUndefined(w)?(m=2e3,g=200,f=500,_=1e3):g=(m=f=_=parseFloat(w))/10,j){case"rect":if(d=(l=$(this.gSeriesEle).find("#"+b).children("rect")).length,h=$(v.gSeriesEle).find("#"+b+"_ClipRect").children(),"boxandwhisker"==y){s=$(this.gSeriesEle).find("#"+b).children("line"),i=m/(n=$(this.gSeriesEle).find("#"+b).children("path")).length;for(var A=0;A<s.length;A++)L._doLineSymbol(s[A],i,A,e,x,v,g),L._doLineSymbol(l[A],i,A,e,x,v,g);for(var E=0;E<n.length;E++)L._doLineSymbol(n[E],i,E,e,x,v,g)}else if(-1<!y.indexOf("stacking")&&"smooth"==e.animationType.toLowerCase())L.animateRect(h,e,x,v,_);else for(P=0;P<d;P++)-1<y.indexOf("stacking")?L.animateStackingRect(l[P],e,x,v,_):L.animateRect(l[P],e,x,v,_);a=r=t=m/4;break;case"path":h=$(v.gSeriesEle).find("#"+b+"_ClipRect").children(),L._doLineAnimation(v,h,m),a=m/S,r=m/R,t=m/I;break;case"scatter":for(P=0;P<S;P++)u=Math.floor(20*Math.random()+0),p=parseInt(50*u),L.animateSymbol(C[P],p,e,x,v,f);break;case"bubble":for(l=$(this.gSeriesGroupEle).children().not("defs"),P=p=0;P<l.length;P++)L.animateSymbol(l[P],p,e,x,v,f);for(P=0;P<S;P++)L.animateSymbol(C[P],p,e,x,v,f);for(P=0;P<R;P++)L.animateSymbol(T[P],p,e,x,v,f);for(P=0;P<O;P++)L.animateSymbol(k[P],p,e,x,v,f);break;case"hilo":c=m/(d=(l=$(this.gSeriesGroupEle).children().not("defs")).length);for(var P=0;P<d;P++)L._doLineSymbol(l[P],c,P,e,x,v,g);r=m/R;break;case"cylinder":h=$(v.gSeriesEle).find("#"+b+"_ClipRect").children(),L.animateCylinder(v,e,x,h,m),a=r=t=m/4}if("bubble"!=j){for(E=0;E<S;E++)o="rect"==j||"stackingRect"==j?2:E,L._doLineSymbol(C[E],a,o,e,x,v,g);for(E=0;E<R;E++)o="rect"==j||"stackingRect"==j?2:E,L._doLineSymbol(T[E],r,o,e,x,v,g);for(c=m/O,E=0;E<O;E++)o="rect"==j||"stackingRect"==j?2:E,L._doLineSymbol(k[E],c,o,e,x,v,g)}if("visible"==e.errorBar.visibility)for(E=0;E<I;E++)o="rect"==j||"stackingRect"==j?2:E,L._doLineSymbol(D[E],t,o,e,x,v,g)},_animationElements:function(e,t,i){var s,n=this,a=n.model.series[i].animationDuration,a=ej.util.isNullOrUndefined(a)?2e3:parseFloat(a);if(e._previousType=ej.util.isNullOrUndefined(e._previousType)?e.type:e._previousType,!e.enableAnimation||this.vmlRendering||this.model.enableCanvasRendering||e._animatedSeries&&e.type==e._previousType||(ej.EjSeriesRender.prototype.doCircularAnimation(this,e,t,i,a),e._previousType=e.type,e._animatedSeries=!n.isSplitted),n.isSplitted=!1,this.drawAccDisplayText(t,e,i),e.enableAnimation&&0<e._visiblePoints.length&&e.AnimationComplete&&!this.vmlRendering&&!this.model.enableCanvasRendering){if(n.svgRenderer._setAttr($(n.gSeriesEle).find("#"+n.gSeriesTextEle[i].id),{visibility:"visible"}),n.gSymbolGroupEle&&n.svgRenderer._setAttr($(n.gSeriesEle).find("#"+n.gSymbolGroupEle[i].id),{visibility:"visible"}),e.marker.dataLabel.template){s=$(n.element[0].childNodes[0].childNodes);for(var r=0;r<s.length;r++)$(s[r]).css("display","block")}n.gConnectorEle&&n.svgRenderer._setAttr($(n.gSeriesEle).find("#"+n.gConnectorEle[i].id),{visibility:"visible"}),n.gDataLabelEle&&n.svgRenderer._setAttr($(n.gSeriesEle).find("#"+n.gDataLabelEle[i].id),{visibility:"visible"})}},_appendConnectorElements:function(e){var t=ej.DataManager(this.model._visibleSeries,ej.Query().sortBy("_zOrder")).executeLocal()[e];t.type.toLowerCase();"visible"!=t.visibility||this.model.enable3D||!t.connectorLine||!t.connectorLines&&"none"!=this.model.AreaType||(this.svgRenderer.append(this.gConnectorEle[e],this.gSeriesEle),t.connectorLines=!1)},_appendDataLabelElement:function(e){var t=this.model._visibleSeries[e],i=ej.util.isNullOrUndefined(t.zOrder)?i:t.zOrder;"visible"!=t.visibility||this.model.enable3D||(this.svgRenderer.append(this.gSymbolGroupEle[e],this.gSeriesEle),this.model.enable3D||this.model.enableCanvasRendering||(0<this.gDataLabelEle[e].childNodes.length&&this.svgRenderer.append(this.gDataLabelEle[e],this.gSeriesEle),0<this.gSeriesTextEle[e].childNodes.length&&this.svgRenderer.append(this.gSeriesTextEle[e],this.gSeriesEle))),this.vmlRendering||"visible"!=t.visibility||this.model.enableCanvasRendering||this.model.enable3D||(this.svgRenderer.append(this.gSeriesEle,this.svgObject),this.svgRenderer.append(this.svgObject,this.element))},_accSeriesDraw:function(e,t,i){var s=ej.DataManager(this.model._visibleSeries,ej.Query().sortBy("_zOrder")).executeLocal(),n=$.inArray(s[e],this.model._visibleSeries);this.model._visibleSeries[n]=s[e]=$.extend(!0,t,s[e]);e=$.extend({},ej.EjSvgRender.commonChartEventArgs);e.data={series:t},this._trigger("seriesRendering",e);i=new ej.seriesTypes[i.toLowerCase()];i.draw(this,t)||(this.model.minhightwidth=!0,this._animationElements(t,i,n))},_splitSeries:function(e){var t=[];t[0]=$.extend(!0,[],e._visiblePoints),t[1]=[];for(var i=e,s=parseInt(i.splitValue),n=i.splitMode.toLowerCase(),a=t[0].length,r=0,o=0,l=[],d=0,h=0;d!=a;)h+=t[0][d].y,d++;if("position"==n){for(d=a-1;0<=d&&o!=s;d--)r+=t[0][d].y,t[1][o]=t[0][d],o++,t[0].splice(d,1);t[1].reverse()}else if("value"==n||"percentage"==n)for(var c=0;c<t[0].length;c++)("value"==n?t[0][c].y:Math.round(t[0][c].y/h*100))<s&&(r+=t[0][c].y,t[1][o]=t[0][c],o++,t[0].splice(c,1),c=-1);else if("indexes"==n){var u=JSON.parse("["+i.splitValue+"]");(u=u.filter(function(e,t,i){return i.indexOf(e)==t})).sort();for(c=0;c<t[0].length;c++)for(var p=0;p<u.length;p++)c==u[p]&&(r+=t[0][c].y,t[1][o]=t[0][c],o++);for(d=0;d<u.length;d++){var m=u[d]-d;t[0].splice(m,1)}}0<t[1].length&&(l[0]=r,e=i._xAxisValueType,t[0].unshift({_visibility:"visible",visible:!0,text:"Others",x:"string"==e?"Others":r,xValue:"string"==e?i.points.length:r,y:r,YValues:l,fill:this.model.colors[(i.points.length+1)%this.model.colors.length],isFill:!1,actualIndex:i.points.length})),this.isSplitted=!0,i.pieCollections=t},_calculateGapWidth:function(e){var t,i=0,s=0,n=.1*Math.min($(this.svgObject).width(),$(this.svgObject).width());ej.EjSeriesRender.prototype._calculateVisiblePoints(e).visiblePoints,this._splitSeries(e),this.chartObj=this;for(var a=0;a<2;a++){l=0==a?e.pieCoefficient:e.pieOfPieCoefficient,e._visiblePoints=e.pieCollections[a],e.collectionIndex=a,t=e.gapWidth;var r=ej.EjSeriesRender.prototype.calculatingSliceAngle(e,this.chartObj),o=r.width<n?.25*l*n:.25*l*Math.min(r.width,r.height),l=this.model.circleCenterX[a];0==a?i=l+o:s=l-o}var d=s-i-t;return this.model.pieGapWidth=0<d?d:0,0<e.pieCollections[0].length&&0<e.pieCollections[1].length&&0<e.connectorLine.width&&this.drawPieofPieConnectors(r,e),e},seriesRender:function(e,t){if(this.model.allPoints=[],this.model.markerRegion=[],this.model.startX=[],this.model.startY=[],this.model.centerCount=0,this.gTrendlinesGroupEle=null,this.model._seriesIndex=null,this.model._previousSeries=null,!e){e={_crossAxisOverlap:!1,axes:{}};for(var i=0;i<this.model._axes.length;i++)e.axes[this.model._axes[i].name]={}}0<$(this.svgObject).find("#"+this.svgObject.id+"_SeriesCollection").length&&$(this.svgObject).find("#"+this.svgObject.id+"_SeriesCollection").remove();var s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L,A,E,P,M,F,N,z,V,B,H=this,Y=this.svgObject,U={id:Y.id+"_SeriesCollection","clip-path":"url(#"+Y.id+"_ChartAreaClipRect)"},W=this.model.enable3D,X=this.model.AreaType,G=this.model.enableCanvasRendering,q=this.model._axes.length,Q=ej.DataManager(this.model._visibleSeries,ej.Query().sortBy("_zOrder")).executeLocal(),K=Q.length,Z=G,J=this.svgRenderer,ee=this.model.m_AreaBounds,te=ee.X,ie=this.zoomed;for(this.gSeriesEle=J.createGroup(U),i=0;i<K;i++)if("visible"==Q[i].visibility)for(ej.util.isNullOrUndefined(this.model.series[i].enableSmartLabels)?this.model.series[i]._enableSmartLabels="none"==X:this.model.series[i]._enableSmartLabels=this.model.series[i].enableSmartLabels,ej.util.isNullOrUndefined(Q[i].xAxis)||(Q[i].xAxis=null,Q[i].yAxis=null),s=0;s<q;s++)r=i,a=(n=this.model._axes[s]).orientation.toLowerCase(),n.name&&"horizontal"==a&&n.name.toLowerCase()==Q[i]._xAxisName.toLowerCase()?Q[i].xAxis=n:n.name&&"vertical"==a&&n.name.toLowerCase()==Q[i]._yAxisName.toLowerCase()&&(Q[i].yAxis=n),this.model.requireInvertedAxes&&(n.name&&"vertical"==a&&n.name.toLowerCase()==Q[i]._xAxisName.toLowerCase()?Q[i].xAxis=n:n.name&&"horizontal"==a&&n.name.toLowerCase()==Q[i]._yAxisName.toLowerCase()&&(Q[i].yAxis=n));if(0<K)if(M=(h=Q[0]).type.toLowerCase(),N=h.visibility.toLowerCase(),"pieofpie"!=M||"visible"!=N||W)for(var se=K;0<se&&"none"==X;se--)l=(o=Q[r=se-1]).visibility.toLowerCase(),d=o.type.toLowerCase(),"visible"!==l||W||"pie"!=d&&"doughnut"!=d?"none"!=X||"visible"!==l||G||ej.Ej3DChart.prototype.renderSeries(this,o,t):this._accSeriesDraw(r,o,d);else{this.model._isPieOfPie=!0,h=this._calculateGapWidth(h);for(var ne=0;ne<2;ne++)h.collectionIndex=ne,h._visiblePoints=h.pieCollections[ne],this._accSeriesDraw(0,h,M);h._visiblePoints=$.merge(h.pieCollections[0],h.pieCollections[1]),this.model.pieGapWidth=null,h.collectionIndex=0}for(var ae=0;ae<K;ae++)if(l=(o=Q[r=ae]).visibility.toLowerCase(),d=o.type.toLowerCase(),"none"!=X||"visible"!==l||W||0!==r||"pyramid"!=d&&"funnel"!=d){if("visible"!==l||W||"none"==X?W||"none"==X?"cartesianaxes"!=X||"visible"!==l||G||ej.Ej3DChart.prototype.renderSeries(this,o,e,t):J.append(Y,this.element):(this.model._seriesIndex=ej.util.isNullOrUndefined(this.model._seriesIndex)?0:this.model._seriesIndex+1,this.renderSeries(o,e,t),"cartesianaxes"==X&&"boxandwhisker"!=this.model.series[ae].type&&this._renderTrendline(H,o)),!ej.util.isNullOrUndefined(o.xAxis)&&"datetime"==o.xAxis._valueType)for(i=0;i<o.points.length;i++)o.points[i].xValue instanceof Date==0&&(o.points[i].xValue=new Date(o.points[i].xValue))}else this._accSeriesDraw(r,o,d);if("none"!=X){for(i=0;i<K;i++)if(u=(h=this.model.series[i])._visiblePoints,h._enableSmartLabels&&"cartesianaxes"==this.model.AreaType)for("column"==(p=h.type.toLowerCase())||"stackingcolumn"==p||"bar"==p||"stackingbar"==p||"waterfall"==p||"stackingbar100"==p||"stackingcolumn100"==p||"rangecolumn"==p?this.cartesianColumnSmartLabels(h,u,i):"boxandwhisker"!=p&&this.cartesianSmartLabels(h,u,i),s=0;s<u.length;s++)(c=u[s]).hide=!ej.util.isNullOrUndefined(c.hide)&&c.hide,m=Z?c.xPos-this.canvasX:c.xPos,g=Z?c.yPos-this.canvasY:c.yPos,z=h.xAxis.visibleRange,V=h.yAxis.visibleRange,B=-1!=d.indexOf("100")?parseFloat(c.percentage):c.y,(m-c.width/2<0||m+c.width/2>ee.Width||g+c.height/2>ee.Height||g-c.height/2<0||ie&&(c.xValue<=z.min||c.xValue>=z.max)||B<=V.min||B>=V.max)&&(c.hide=!(h.marker.dataLabel.showEdgeLabels&&!c.hide));for(i=0;i<K;i++)if(F=!(h=Q[i])._dataLabels||(h.marker.dataLabel.visible||0<h._dataLabels),"visible"==h.visibility&&F)for(b=h._visiblePoints.length,_=0;_<b;_++)v=(c=h._visiblePoints[_]).marker&&c.marker.dataLabel&&c.marker.dataLabel.visible,(h.marker.dataLabel.visible||v)&&(!c.connectorFlag&&!c.newConnectorFlag||c.hide||""==c.drawText||"visible"!=h.visibility||ej.util.isNullOrUndefined(c.textOptions)||(h.connectorLine=!0,G?(J.ctx.save(),H.model.requireInvertedAxes?J.ctx.rect(te+h.yAxis.plotOffset,h.xAxis.y,h.yAxis.width,h.xAxis.height):J.ctx.rect(te,h.yAxis.y,h.xAxis.width,h.yAxis.height),J.ctx.clip(),this.drawConnectorLines(i,_,c),J.ctx.restore()):h._enableSmartLabels&&this.drawConnectorLines(i,_,c)),c.newConnectorFlag=!1);for(i=0;i<K;i++)if(d=(h=Q[i]).type.toLowerCase(),F=!h._dataLabels||(h.marker.dataLabel.visible||0<h._dataLabels),"visible"==h.visibility&&F&&!this.model.enable3D)for(b=h._visiblePoints.length,_=0;_<b;_++)if(f=(c=h._visiblePoints[_]).marker&&c.marker.dataLabel&&c.marker.dataLabel.visible,(h.marker.dataLabel.visible||f)&&!c.hide&&!c.dataLabeltemplate&&"visible"==h.visibility&&!ej.util.isNullOrUndefined(c.textOptions)&&!c.hide){if(ej.util.isNullOrUndefined(c.textOptions.angle)||(c.textOptions.transform="rotate("+c.textOptions.angle+","+c.xPos+","+c.yPos+")"),G){if(c.textOptions.labelRotation=c.textOptions.angle,J.ctx.save(),H.model.requireInvertedAxes?H.svgRenderer.ctx.rect(te+h.yAxis.plotOffset,h.xAxis.y,h.yAxis.width,h.xAxis.height):J.ctx.rect(te,h.yAxis.y,h.xAxis.width,h.yAxis.height),H.svgRenderer.ctx.save(),H.svgRenderer.ctx.clip(),"boxandwhisker"==d.toLowerCase()){1==h.showMedian&&""!=c.textOptionsBoxValues&&(ej.util.isNullOrUndefined(c.textOptionsBoxValues[0].angle)||(c.textOptionsBoxValues[0].labelRotation=c.textOptionsBoxValues[0].angle,c.textOptionsBoxValues[0].transform="rotate("+c.textOptionsBoxValues[0].angle+","+c.textOptionsBoxValues[0].xPos+","+c.textOptionsBoxValues[0].yPos+")"),ej.EjSeriesRender.prototype.dataLabelSymbol(i,h,_,c.textOptionsBoxValues[0].xPos,c.textOptionsBoxValues[0].yPos,c.textOptionsBoxValues[0].width,c.textOptionsBoxValues[0].height,c.textOptionsBoxValues[0].symbolName,this),delete c.textOptionsBoxValues[0].angle,this.svgRenderer.drawText(c.textOptionsBoxValues[0],c.textOptionsBoxValues[0].drawText,this.gSeriesTextEle[i]));for(var re=1;re<c.textOptionsBoxValues.length;re++)ej.util.isNullOrUndefined(c.textOptionsBoxValues[re].angle)||(c.textOptionsBoxValues[re].labelRotation=c.textOptionsBoxValues[re].angle,c.textOptionsBoxValues[re].transform="rotate("+c.textOptionsBoxValues[re].angle+","+c.textOptionsBoxValues[re].xPos+","+c.textOptionsBoxValues[re].yPos+")"),ej.EjSeriesRender.prototype.dataLabelSymbol(i,h,_,c.textOptionsBoxValues[re].xPos,c.textOptionsBoxValues[re].yPos,c.textOptionsBoxValues[re].width,c.textOptionsBoxValues[re].height,c.textOptionsBoxValues[re].symbolName,this),delete c.textOptionsBoxValues[re].angle,this.svgRenderer.drawText(c.textOptionsBoxValues[re],c.textOptionsBoxValues[re].drawText,this.gSeriesTextEle[i])}else ej.EjSeriesRender.prototype.dataLabelSymbol(i,h,_,c.xPos,c.yPos,c.width,c.height,c.symbolName,this),delete c.textOptions.angle,this.svgRenderer.drawText(c.textOptions,c.drawText,this.gSeriesTextEle);H.svgRenderer.ctx.restore()}else ej.EjSeriesRender.prototype.dataLabelSymbol(i,h,_,c.xPos,c.yPos,c.width,c.height,c.symbolName,this,this.gDataLabelEle[i]),delete c.textOptions.angle,J.drawText(c.textOptions,c.drawText,this.gSeriesTextEle[i]);if("rangecolumn"==d||"rangearea"==d||"splinerangearea"==d)c.textOptionsLow.transform="rotate("+c.textOptionsLow.angle+","+c.xPosLow+","+c.yPosLow+")",G?(c.textOptionsLow.labelRotation=c.textOptionsLow.angle,J.ctx.save(),H.model.requireInvertedAxes?J.ctx.rect(te+h.yAxis.plotOffset,h.xAxis.y,h.yAxis.width,h.xAxis.height):J.ctx.rect(te,h.yAxis.y,h.xAxis.width,h.yAxis.height),J.ctx.clip(),ej.EjSeriesRender.prototype.dataLabelSymbol(i,h,_,c.xPosLow,c.yPosLow,c.widthLow,c.heightLow,c.symbolName,this),delete c.textOptionsLow.angle,J.drawText(c.textOptionsLow,c.drawTextLow,this.gSeriesTextEle),J.ctx.restore()):(ej.EjSeriesRender.prototype.dataLabelSymbol(i,h,_,c.xPosLow,c.yPosLow,c.widthLow,c.heightLow,c.symbolName,this,this.gDataLabelEle[i]),delete c.textOptionsLow.angle,J.drawText(c.textOptionsLow,c.drawTextLow,this.gSeriesTextEle[i]));else if("boxandwhisker"==d.toLowerCase()){1==h.showMedian&&""!=c.textOptionsBoxValues&&(ej.util.isNullOrUndefined(c.textOptionsBoxValues[0].angle)||(c.textOptionsBoxValues[0].transform="rotate("+c.textOptionsBoxValues[0].angle+","+c.textOptionsBoxValues[0].xPos+","+c.textOptionsBoxValues[0].yPos+")"),ej.EjSeriesRender.prototype.dataLabelSymbol(i,h,_,c.textOptionsBoxValues[0].xPos,c.textOptionsBoxValues[0].yPos,c.textOptionsBoxValues[0].width,c.textOptionsBoxValues[0].height,c.textOptionsBoxValues[0].symbolName,this),delete c.textOptionsBoxValues[0].angle,this.svgRenderer.drawText(c.textOptionsBoxValues[0],c.textOptionsBoxValues[0].drawText,this.gSeriesTextEle[i]));for(re=1;re<c.textOptionsBoxValues.length;re++)ej.util.isNullOrUndefined(c.textOptionsBoxValues[re].angle)||(c.textOptionsBoxValues[re].transform="rotate("+c.textOptionsBoxValues[re].angle+","+c.textOptionsBoxValues[re].xPos+","+c.textOptionsBoxValues[re].yPos+")"),ej.EjSeriesRender.prototype.dataLabelSymbol(i,h,_,c.textOptionsBoxValues[re].xPos,c.textOptionsBoxValues[re].yPos,c.textOptionsBoxValues[re].width,c.textOptionsBoxValues[re].height,c.textOptionsBoxValues[re].symbolName,this),delete c.textOptionsBoxValues[re].angle,this.svgRenderer.drawText(c.textOptionsBoxValues[re],c.textOptionsBoxValues[re].drawText,this.gSeriesTextEle[i])}}if("none"!=X){for(i=0;i<K;i++)this._appendConnectorElements(i);for(y=this.model._visibleSeries.length,i=0;i<y;i++)this._appendDataLabelElement(i)}}else{for(x=K-1;0<=x;x--)"pie"!=(d=(h=this.model._visibleSeries[x]).type.toLowerCase())&&"doughnut"!=d||!this.model.minhightwidth||this._appendConnectorElements(x);if(0<(y=this.model._visibleSeries.length)&&"pieofpie"==d)this._appendDataLabelElement(0);else for(x=K-1;0<=x;x--)"pie"!=(d=(h=this.model._visibleSeries[x]).type.toLowerCase())&&"doughnut"!=d||!this.model.minhightwidth||this._appendDataLabelElement(x)}for(y=this.model._visibleSeries.length,w=0;w<y;w++)T=(D=this.model._visibleSeries[w]).drawType,d=D.type.toLowerCase(),D._previousType=ej.util.isNullOrUndefined(D._previousType)?D.type:D._previousType,this.vmlRendering||"visible"!=D.visibility||G||W||"none"==X||(this.renderer.append(this.gSeriesEle,this.svgObject),this.renderer.append(this.svgObject,this.element),(C=new ej.seriesTypes[D.type.toLowerCase()]).chartObj=H,C.gSeriesGroupEle=$("scatter"==T?"#"+this.svgObject.id+"_symbolGroup_"+w:"#"+this.svgObject.id+"_SeriesGroup_"+w)[0],!D.enableAnimation||D._animatedSeries&&D._previousType==D.type||"none"==this.model.AreaType||(D._animatedSeries=!0,D._previousType=D.type,S=$("#template_group_"+this._id),T=D.marker.dataLabel,0!=S.children().length&&T.visible&&T.template&&C.animateLabelTemplate(D),"polar"==d||"radar"==d?ej.ejRadarSeries.prototype.doAnimation(D,C):this.doAnimation(D)));if(y=(Q=this.model._visibleSeries).length,!G&&!W)for(ne=0;ne<y;ne++)"visible"==Q[ne].visibility.toLowerCase()&&this.gTrendlinesGroupEle&&this.gTrendlinesGroupEle[ne]&&0!=this.gTrendlinesGroupEle[ne].childElementCount&&this.renderer.append(this.gTrendlinesGroupEle[ne],Y);for(i=0;i<y;i++)for(R=(h=this.model._visibleSeries[i]).trendlines,I=h.trendlines.length,j=h.animationDuration,s=0;s<I;s++)(k=R[s]).visibility&&(O=k.type.toLowerCase(),D=new ej.trendlineTypes[O],!("visible"===k.visibility.toLowerCase()&&k.points&&1<k.points.length&&h.enableAnimation)||this.vmlRendering||h._animatedTrendline&&k._previousType==k.type||(k._previousType=k.type,k=$(this.svgObject).find("#"+this.svgObject.id+"_TrendGroup_"+i+"_"+s+"_ClipRect").children(),ej.EjSeriesRender.prototype._doLineAnimation(this,k,j),h._animatedTrendline=I-1==i));for(y=this.model._visibleSeries.length,E=Y.id,i=0;i<y;i++)L=$("#"+E+"_SeriesGroup_"+i),P=$("#"+E+"_SeriesGroup_waterfallLine_"+i),A=$("#"+E+"_symbolGroup_"+i),0<L.length&&0<A.length&&A.insertAfter(L),0<L.length&&0<P.length&&P.insertAfter(L);this.model.AnimationComplete=!0,(N=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={series:D},this._trigger("animationComplete",N),G&&(J.append(Y,this.element),this.panning&&$("#"+this._id+"_canvas").css({cursor:"pointer"})),W&&!G&&(J.append(this.chart3D,Y),N={Width:$(Y).width(),Height:$(Y).height()},this.graphics.prepareView(this.model.perspectiveAngle,this.model.depth,this.model.rotation,this.model.tilt,N,this),this.graphics.view(Y,this),J.append(Y,this.element)),J.vmlNamespace&&J.append(this.gSeriesEle,Y),"polaraxes"==X&&J.append(this.gPolarAxisEle,Y),0<$(Y).find("#"+Y.id+"_StriplineOver").length&&$(Y).find("#"+Y.id+"_StriplineOver").detach().appendTo(Y),this._renderScrollbar(),this.legendRender.drawLegend(e),H.model.initSeriesRender=!0},_calculateZoomValue:function(e,t,i,s){this.model;var n=i.scrollbarSettings.range,a="datetime"==i._valueType.toLowerCase()?(r=Date.parse(ej.util.isNullOrUndefined(n.min)?e:new Date(n.min)),Date.parse(ej.util.isNullOrUndefined(n.max)?t:new Date(n.max))):(r=parseFloat(ej.util.isNullOrUndefined(n.min)?e:n.min),parseFloat(ej.util.isNullOrUndefined(n.max)?t:n.max)),r=Math.min(r,e),i=(a=Math.max(a,t))-r,i=(n=s.isRTL?(a-t)/i:(e-r)/i,(t-e)/i);s.scrollRange={min:r,max:a,delta:a-r},s._previousStart=e,s._previousEnd=t,s.zoomPosition=n,s.zoomFactor=i},_renderScrollbar:function(){var e,t,i,s,n=this.model,a=n.scrollerSize,r=$("#"+this._id).offset(),o=$(this.svgObject).offset().left-r.left,l=n._axes,d=l.length,h=n.zooming.enableScrollbar,c=n.AreaType;n.scrollObj=n.scrollObj||[];for(var u=0;u<d;u++){var p,m,g=(p=l[u])._valueType,f=(m=p.scrollbarSettings).range,_=p.isInversed,v="cartesianaxes"==c&&!n.enable3D,b=p._opposed,x=m.pointsLength,y=p.orientation.toLowerCase(),w=p.zoomFactor,C=$("#scrollbar_"+this.axisScroll[0].id+u).length,S=p.zoomPosition;v&&(p._isScroll&&n.isLazyZooming||(w<1||0<S)&&h)?(t=p.x+("vertical"==y?-a+(b?a:0):0)+(o<=0?0:o),i=(e=p.y+("horizontal"==y?p.height+(b?-a:0):0))-("horizontal"==y?0:p.plotOffset),s=p.plotOffset+("horizontal"==y?p.width:p.height),v=n.scrollObj,y=null!=f.min||null!=f.max?!!v[u]&&(v[u].actualRange.min!=f.min||v[u].actualRange.max!=f.max):!!v[u]&&v[u].actualRange!=m.pointsLength,this.scrollDraw=v[u]?v[u].x!=t||v[u].y!=e||v[u].width!=s:this.scrollDraw,b={orientation:p.orientation,index:u,width:s,x:t,y:i,opposed:b,isRTL:_,parent:this.axisScroll,enableResize:m.canResize},n.isLazyZooming?(0==C||this.scrollDraw||y)&&($("#scrollbar_"+this.axisScroll[0].id+u).remove(),null!=f.min||null!=f.max?(f=v[u]&&v[u].scrollRange?v[u].scrollRange:p.visibleRange,!this.scrollDraw||y?(v[u]={isVirtual:!0,valueType:g,scrollRange:f},v[u].actualRange=$.extend(v[u].actualRange,m.range),$.extend(v[u],b),"datetime"==g?(v[u].startDateTime=new Date(p.visibleRange.min),v[u].endDateTime=new Date(p.visibleRange.max)):(v[u].startValue=p.visibleRange.min,v[u].endValue=p.visibleRange.max),this._calculateZoomValue(p.visibleRange.min,p.visibleRange.max,p,this.model.scrollObj[u])):(v[u].width=s,v[u].x=t,v[u].y=i)):x>=p.maxPointLength&&(w=p.maxPointLength/x,S=_?1-p.zoomPosition:p.zoomPosition,!this.scrollDraw||y?(v[u]={isVirtual:!0,zoomPosition:S,zoomFactor:w,scrollRange:{min:0,max:x-1,delta:x-1},valueType:"double"},v[u].actualRange=m.pointsLength,$.extend(v[u],b),v[u].startValue=0,v[u].endValue=p.maxPointLength):(v[u].width=s,v[u].x=t,v[u].y=i)),this.model.scrollObj[u]&&(this.scrollbarContainer=new ej.EjSvgScrollbarRender(this.axisScroll,this.model.scrollObj[u]),this.scrollbarContainer._initializeScrollbarVariables(this.model.scrollObj[u]),this.scrollbarContainer._renderScrollbar.call(this,this.model.scrollObj[u]))):m.visible&&(v=n.scrollObj,0!=C&&!this.scrollDraw||($("#scrollbar_"+this.axisScroll[0].id+u).remove(),v[u]={zoomPosition:S,zoomFactor:w,valueType:g,scrollRange:p.actualRange,isZooming:!0},$.extend(v[u],b),"datetime"==v[u].valueType?(v[u].startDateTime=new Date(v[u].scrollRange.min),v[u].endDateTime=new Date(v[u].scrollRange.max)):(v[u].startValue=v[u].scrollRange.min,v[u].endValue=v[u].scrollRange.max),this.scrollbarContainer=new ej.EjSvgScrollbarRender(this.axisScroll,this.model.scrollObj[u]),this.scrollbarContainer._initializeScrollbarVariables(this.model.scrollObj[u]),this.scrollbarContainer._renderScrollbar.call(this,this.model.scrollObj[u])))):0<C&&$("#scrollbar_"+this.axisScroll[0].id+u).remove()}this.scrollDraw=!1},_renderTrendline:function(e,t){var i,s,n,a,r,o,l,d,h,c=$.inArray(t,e.model.series),u="translate("+(e.model.requireInvertedAxes?t.yAxis:t.xAxis).x+","+(e.model.requireInvertedAxes?t.xAxis:t.yAxis).y+")",p={id:e.svgObject.id+"_TrendlinesGroup_"+c,"clip-path":"url(#"+e.svgObject.id+"_TrendlinesGroup_"+c+"_ClipRect)"},m=t.trendlines,g="",f=m.length;for(e.gTrendlinesGroupEle||(e.gTrendlinesGroupEle=[]),e.gTrendlinesGroupEle[c]=e.svgRenderer.createGroup(p),r=0;r<f;r++)if((a=m[r]).seriesIndex=c,a.isTrendLine=!0,a.trendlineIndex=r,"visible"===a.visibility.toLowerCase()&&!a.isNull&&a.points){switch(d={id:e.svgObject.id+"_TrendGroup_"+c+"_"+r,transform:u,"clip-path":"url(#"+e.svgObject.id+"_TrendGroup_"+c+"_"+r+"_ClipRect)"},t.gTrendGroupEle=null,t.gTrendGroupEle=e.svgRenderer.createGroup(d),l=a.type.toLowerCase(),n=new ej.trendlineTypes[l],h=a.slope,d=a._intercept,l){case"linear":g="y = "+h.toFixed(4)+"x + "+d.toFixed(4);break;case"exponential":g="y = "+d.toFixed(3)+"e^"+h.toFixed(4)+"x";break;case"logarithmic":g="y = "+h.toFixed(3)+"ln(x) + "+d.toFixed(4);break;case"power":g="y = "+d.toFixed(3)+"x^"+h.toFixed(4);break;case"polynomial":for(g="y = ",i=(s=a.polynomialSlopes).length-1;0<=i;i--)g+=0<(o=s[i])?"+"+o:"-"+Math.abs(o),0!=i&&(g+="x^"+i+" ")}a.equation=g,l=$.extend({},ej.EjSvgRender.commonChartEventArgs),d=a.points[0],h=a.points[a.points.length-1],l.data={series:t,trendline:a,forwardForecastPoints:h,backwardForecastPoints:d},this._trigger("trendlineRendering",l),e.model.enableCanvasRendering?(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.svgRenderer.ctx.rect(e.model.m_AreaBounds.X,t.yAxis.y,t.xAxis.width,t.yAxis.height),this.svgRenderer.ctx.clip(),this.svgRenderer.ctx.beginPath(),n.draw(a,t,e),this.svgRenderer.ctx.restore()):(n.draw(a,t,e),(a=t.gTrendGroupEle)&&ej.EjSvgRender.utils._drawAxesBoundsClipPath(a,t,this))}},_renderStripline:function(e){$.extend(ej.EjStripline.prototype,this),this.chartstripline=new ej.EjStripline(this);var t=this.chartstripline;this.model._stripeline=!1;for(var i=0;i<this.model._axes.length;i++)for(var s=this.model._axes[i],n=0;n<s.stripLine.length;n++)s.stripLine[n].zIndex.toLowerCase()==e&&t._drawStripline(s,s.stripLine[n],i,n);"over"==e&&this.model._stripeline?this.svgRenderer.append(this.gStriplineOver,this.svgObject):this.model._stripeline&&this.svgRenderer.append(this.gStriplineBehind,this.svgObject)},renderSeries:function(s,e,t){for(var n=s.drawType,a=$.inArray(s,this.model._visibleSeries),i=0;i<s.points.length&&("string"==typeof s.points[i].x&&-1!=s.points[i].x.indexOf("/Date("));i++)s.points[i].x=new Date(parseInt(s.points[i].x.substr(6)));s.xAxis=null===s.xAxis||void 0===s.xAxis?this.model._axes[0]:s.xAxis,s.yAxis=null===s.yAxis||void 0===s.yAxis?this.model._axes[1]:s.yAxis;var r=s.type.toLowerCase(),o=s.drawType.toLowerCase(),l=null;u="cartesianaxes"==this.model.AreaType?(l="translate("+(c=ej.EjSvgRender.utils._getTransform(s.xAxis,s.yAxis,this.model.requireInvertedAxes)).x+","+c.y+")","visible"):s.enableAnimation&&!s._animatedSeries?"hidden":"visible";var d={id:this.svgObject.id+"_TextGroup_"+a,transform:l,visibility:u},h={id:this.svgObject.id+"_DataLabel_"+a,transform:l,visibility:u},c="scatter"!=r?{id:this.svgObject.id+"_symbolGroup_"+a,transform:l,visibility:u}:{id:this.svgObject.id+"_SeriesGroup_"+a,transform:l},u={id:this.svgObject.id+"_ConnectorGroup_"+a,transform:l,visibility:u};this.gSymbolGroupEle||(this.gSymbolGroupEle=[]),this.gSymbolGroupEle[a]=this.svgRenderer.createGroup(c),this.gSeriesTextEle||(this.gSeriesTextEle=[]),this.gSeriesTextEle[a]=this.svgRenderer.createGroup(d),this.gConnectorEle||(this.gConnectorEle=[]),this.gConnectorEle[a]=this.svgRenderer.createGroup(u),this.gDataLabelEle||(this.gDataLabelEle=[]),this.gDataLabelEle[a]=this.svgRenderer.createGroup(h);h=$.extend({},ej.EjSvgRender.commonChartEventArgs);h.data={series:s},this._trigger("seriesRendering",h);var p=new ej.seriesTypes[r];this.model.enableCanvasRendering&&"none"!=this.model.AreaType?(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.model.requireInvertedAxes?(l=ej.EjSvgRender.utils._getTransform(s.xAxis,s.yAxis,this.model.requireInvertedAxes),this.canvasX=l.x,this.canvasY=l.y,this.svgRenderer.ctx.rect(s.yAxis.x,s.xAxis.y,s.yAxis.width,s.xAxis.height)):(this.canvasX=s.xAxis.x,this.canvasY=s.yAxis.y,this.svgRenderer.ctx.rect(s.xAxis.x,s.yAxis.y,s.xAxis.width,s.yAxis.height)),this.svgRenderer.ctx.clip(),p.draw(this,s,e,t),this.svgRenderer.ctx.restore()):this.model.enableCanvasRendering&&"polaraxes"==this.model.AreaType?(this.svgRenderer.ctx.save(),this.svgRenderer.ctx.beginPath(),this.svgRenderer.ctx.arc(this.model.centerX,this.model.centerY,this.model.Radius,0,2*Math.PI,!1),this.svgRenderer.ctx.clip(),this.canvasX=this.canvasY=0,p.draw(this,s,t),this.svgRenderer.ctx.restore()):(this.canvasX=this.canvasY=0,"cartesianaxes"==this.model.AreaType?p.draw(this,s,e):"polaraxes"==this.model.AreaType&&s._xAxisName==this.model._axes[0].name&&s._yAxisName==this.model._axes[1].name&&p.draw(this,s,t));l=this.model.series[a].errorBar,t=this.model.AreaType;"visible"==l.visibility&&"cartesianaxes"==t&&"boxandwhisker"!=this.model.series[a].type&&this.renderErrorBar(l,s),"splinerangearea"==r&&(p.gSeriesGroupEle=this.gSeriesGroupEle);var m,g,f,_,v,l=p.gSeriesGroupEle;l&&ej.EjSvgRender.utils._drawAxesBoundsClipPath(l,s,this),"candle"!=r&&"hilo"!=r&&"hiloopenclose"!=r&&"boxandwhisker"!=r&&(f=(m=this).model.AreaType.toLowerCase(),_=ej.seriesTypes[r].prototype.isRegion,v=!s._pointMarker||(s.marker.visible||s._pointMarker),"scatter"!=r&&v&&$.each(s._visiblePoints,function(e,t){var i;!1!==t.visible&&""!==t.x&&(t.marker&&t.marker.visible||s.marker.visible)&&(g="polaraxes"==f&&"column"==o||_?t.symbolLocation:"polaraxes"!=f?ej.EjSvgRender.utils._getPoint(t,s):ej.EjSvgRender.utils.TransformToVisible(s,t.xValue,t.y,m),"polaraxes"==f&&(i=s.yAxis.labelFormat||"",i=t.text||t.y+i.substring(i.indexOf("}")+1),ej.EjSvgRender.utils._measureText(i,null,s.marker.dataLabel.font)),("polaraxes"!=f||s._xAxisName!=m.model._axes[0].name||s._yAxisName!=m.model._axes[1].name||"polar"!=r.toLowerCase()&&"radar"!=r.toLowerCase()||"scatter"==n)&&"cartesianaxes"!=f||p.drawSymbol(a,s,e,g.X,g.Y))}),"scatter"!=r?(s.marker.visible&&"scatter"!=n&&(l=this.gSymbolGroupEle[a],ej.EjSvgRender.utils._drawAxesBoundsClipPath(l,s,this)),s.marker.dataLabel.visible&&(l=this.gSeriesTextEle[a],ej.EjSvgRender.utils._drawAxesBoundsClipPath(l,s,this),l=this.gDataLabelEle[a],ej.EjSvgRender.utils._drawAxesBoundsClipPath(l,s,this)),!ej.util.isNullOrUndefined(this.gConnectorEle)&&0<this.gConnectorEle.length&&(l=this.gConnectorEle[a],ej.EjSvgRender.utils._drawAxesBoundsClipPath(l,s,this))):(l=this.gSymbolGroupEle[a],ej.EjSvgRender.utils._drawAxesBoundsClipPath(l,s,this),this.svgRenderer.append(l,this.gSeriesEle),!s.tooltip.visible&&"scatter"!=r||(this.vmlRendering?(this.cloneSeriesEle=$(this.gSeriesEle).clone(),this.cloneobj=$(this.element).clone(),this.svgclone=$(this.svgObject).clone(),$(document.body).append(this.cloneobj),this.svgRenderer.append(this.cloneSeriesEle,this.svgclone),this.svgRenderer.append(this.svgclone,this.cloneobj)):(this.svgRenderer.append(this.gSeriesEle,this.svgObject),this.svgRenderer.append(this.svgObject,this.element)),this.vmlRendering&&($(this.cloneobj).remove(),$(this.svgclone).remove())))),v=!s._dataLabels||(s.marker.dataLabel.visible||0<s._dataLabels),(s.marker.dataLabel.visible||v)&&this.drawDisplayText(p,s,e)},renderErrorBar:function(e,t){var i,s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L,A,E,P,M,F,N,z,V,B,H,Y,U,W,X,G,q,Q,K,Z,J,ee,te,ie,se,ne=this,ae=ne.model,re=t,oe=re._visiblePoints,le=oe.length,de=ne.canvasX,he=ne.canvasY,ce=$.inArray(re,ae._visibleSeries),t=ej.EjSvgRender.utils._getTransform(re.xAxis,re.yAxis,ae.requireInvertedAxes),ue=ae.requireInvertedAxes,ae=ne.svgObject.id,pe=ne.model.m_AreaBounds,ae={id:ae+"_ErrorBarGroup_"+ce,transform:"translate("+t.x+","+t.y+")","clip-path":"url(#"+ae+"_ChartAreaClipRect)"};for(ej.util.isNullOrUndefined(ne.gErrorBarGroupEle)&&(ne.gErrorBarGroupEle=[]),f=ne.gErrorBarGroupEle[ce]=ne.svgRenderer.createGroup(ae),(ae=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={errorBar:e},this._trigger("errorBarRendering",ae),i=(ae=ae.data.errorBar).type,s=ae.mode,n=ae.direction,a=ae.fill,r=ae.cap,o=ae.cap.fill,l=ae.cap.width,ae.cap.length,h=ae.verticalErrorValue,c=ae.horizontalErrorValue,u=ae.verticalPositiveErrorValue,p=ae.verticalNegativeErrorValue,m=ae.horizontalPositiveErrorValue,g=ae.horizontalNegativeErrorValue,d=0;d<le;d++)if(!0!==oe[d].isEmpty&&1==oe[d].visible){switch(G={id:ne.svgObject.id+"_ErrorBarGroup_"+ce+"_Point"+d},te=ne.svgRenderer.createGroup(G),_=(J=oe[ge=d]).YValues[0],v=J.xValue,b=oe[d].YValues[0],Z=oe[d].xValue,x=i.indexOf("column")||-1<i.indexOf("bar")?J.symbolLocation:J.location,ej.util.isNullOrUndefined(x)&&(x=ej.EjSvgRender.utils._getPoint(J,re)),O=x.X,me=x.Y,i){case"fixedValue":G=J,"vertical"!=s&&"both"!=s||(G.YValues[0]=_+h,y=ej.EjSvgRender.utils._getPoint(G,re),G.YValues[0]=_-h,w=ej.EjSvgRender.utils._getPoint(G,re),ue?y.Y=w.Y=x.Y:y.X=w.X=x.X),"horizontal"!=s&&"both"!=s||(G.YValues[0]=_,G.xValue=v,G.xValue=v+c,C=ej.EjSvgRender.utils._getPoint(G,re),G.xValue=v-c,S=ej.EjSvgRender.utils._getPoint(G,re)),G.YValues[0]=_,G.xValue=v;break;case"percentage":q=J,K=h/100*_,Q=c/100*v,"vertical"!=s&&"both"!=s||(q.YValues[0]=_+K,y=ej.EjSvgRender.utils._getPoint(q,re),q.YValues[0]=_-K,w=ej.EjSvgRender.utils._getPoint(q,re),ue?y.Y=w.Y=x.Y:y.X=w.X=x.X),"horizontal"!=s&&"both"!=s||(q.YValues[0]=_,q.xValue=v,q.xValue=v+Q,C=ej.EjSvgRender.utils._getPoint(q,re),q.xValue=v-Q,S=ej.EjSvgRender.utils._getPoint(q,re)),q.YValues[0]=_,q.xValue=v;break;case"standardDeviation":K=J,Q=(T=ne.meanCalculation(s,oe)).verMean,q=T.horMean,R=T.verStandSquareRoot,k=T.horStandSquareRoot,"vertical"!=s&&"both"!=s||(D=h*R,K.YValues[0]=Q,j=ej.EjSvgRender.utils._getPoint(K,re),_=K.YValues[0],K.YValues[0]=_+D,y=ej.EjSvgRender.utils._getPoint(K,re),K.YValues[0]=_-D,w=ej.EjSvgRender.utils._getPoint(K,re),ue?j.Y=y.Y=w.Y=x.Y:j.X=y.X=w.X=x.X,j.X=j.X+de,j.Y=j.Y+he),"horizontal"!=s&&"both"!=s||(I=c*k,K.xValue=q,L=ej.EjSvgRender.utils._getPoint(K,re),ue?L.X=x.X:L.Y=x.Y,K.YValues[0]=b,v=K.xValue,K.xValue=v+I,C=ej.EjSvgRender.utils._getPoint(K,re),K.xValue=v-I,S=ej.EjSvgRender.utils._getPoint(K,re),L.X=L.X+de,L.Y=L.Y+he),K.YValues[0]=b,K.xValue=Z;break;case"standardError":Z=J,R=(T=ne.meanCalculation(s,oe)).verStandSquareRoot,k=T.horStandSquareRoot,"vertical"!=s&&"both"!=s||(A=(D=h*R)/Math.sqrt(le),Z.YValues[0]=_+A,y=ej.EjSvgRender.utils._getPoint(Z,re),Z.YValues[0]=_-A,w=ej.EjSvgRender.utils._getPoint(Z,re),ue?y.Y=w.Y=x.Y:y.X=w.X=x.X),"horizontal"!=s&&"both"!=s||(A=(I=c*k)/Math.sqrt(le),Z.YValues[0]=_,Z.xValue=v,Z.xValue=v+A,C=ej.EjSvgRender.utils._getPoint(Z,re),Z.xValue=v-A,S=ej.EjSvgRender.utils._getPoint(Z,re)),Z.YValues[0]=_,Z.xValue=v,d=ge;break;case"custom":J=J,"vertical"!=s&&"both"!=s||(J.YValues[0]=_+u,y=ej.EjSvgRender.utils._getPoint(J,re),J.YValues[0]=_-p,w=ej.EjSvgRender.utils._getPoint(J,re),ue?y.Y=w.Y=x.Y:y.X=w.X=x.X),"horizontal"!=s&&"both"!=s||(J.YValues[0]=_,J.xValue=v,J.xValue=v+m,C=ej.EjSvgRender.utils._getPoint(J,re),J.xValue=v-g,S=ej.EjSvgRender.utils._getPoint(J,re)),J.YValues[0]=_,J.xValue=v}1==r.visible&&("vertical"!=s&&"both"!=s||(E={verHighvalue:y,verLowvalue:w}),"horizontal"!=s&&"both"!=s||(P={horHighvalue:C,horLowvalue:S}),M=(ee=ne.renderCap(r,s,E,P,ue)).verHighCapX1,F=ee.verHighCapX2,N=ee.verLowCapX1,z=ee.verLowCapX2,V=ee.horHighCapY1,B=ee.horHighCapY2,H=ee.horLowCapY1,ee=ee.horLowCapY2),O+=de,me+=he,"vertical"!=s&&"both"!=s||(y.X=y.X+de,y.Y=y.Y+he,w.X=w.X+de,w.Y=w.Y+he),"horizontal"!=s&&"both"!=s||(C.X=C.X+de,C.Y=C.Y+he,S.X=S.X+de,S.Y=S.Y+he),"both"==n?("vertical"!=s&&"both"!=s||("standardDeviation"!=i?Y="M "+O+" "+me+" L "+y.X+" "+y.Y+" M "+O+" "+me+" L "+w.X+" "+w.Y+" ":"standardDeviation"==i&&(Y="M "+j.X+" "+j.Y+" L "+y.X+" "+y.Y+" M "+j.X+" "+j.Y+" L "+w.X+" "+w.Y+" "),ie=Y,se=U=ue?r.visible?"M "+y.X+" "+y.Y+" L "+y.X+" "+M+" M "+y.X+" "+y.Y+" L "+y.X+" "+F+" M "+w.X+" "+w.Y+" L "+w.X+" "+N+" M "+w.X+" "+w.Y+" L "+w.X+" "+z+" ":"":r.visible?"M "+y.X+" "+y.Y+" L "+M+" "+y.Y+" M "+y.X+" "+y.Y+" L "+F+" "+y.Y+" M "+w.X+" "+w.Y+" L "+N+" "+w.Y+" M "+w.X+" "+w.Y+" L "+z+" "+w.Y+" ":""),"horizontal"!=s&&"both"!=s||("standardDeviation"!=i?W="M "+O+" "+me+" L "+C.X+" "+C.Y+" M "+O+" "+me+" L "+S.X+" "+S.Y+" ":"standardDeviation"==i&&(W="M "+L.X+" "+L.Y+" L "+C.X+" "+C.Y+" M "+L.X+" "+L.Y+" L "+S.X+" "+S.Y+" "),ie=W,se=X=ue?r.visible?"M "+C.X+" "+C.Y+" L "+V+" "+C.Y+" M "+C.X+" "+C.Y+" L "+B+" "+C.Y+" M "+S.X+" "+S.Y+" L "+H+" "+S.Y+" M "+S.X+" "+S.Y+" L "+ee+" "+S.Y+" ":"":r.visible?"M "+C.X+" "+C.Y+" L "+C.X+" "+V+" M "+C.X+" "+C.Y+" L "+C.X+" "+B+" M "+S.X+" "+S.Y+" L "+S.X+" "+H+" M "+S.X+" "+S.Y+" L "+S.X+" "+ee+" ":"")):"plus"==n?("vertical"!=s&&"both"!=s||("standardDeviation"!=i?Y="M "+O+" "+me+" L "+y.X+" "+y.Y+" ":"standardDeviation"==i&&(Y="M "+j.X+" "+j.Y+" L "+y.X+" "+y.Y+" "),ie=Y,se=U=ue?r.visible?"M "+y.X+" "+y.Y+" L "+y.X+" "+M+" M "+y.X+" "+y.Y+" L "+y.X+" "+F+" ":"":r.visible?"M "+y.X+" "+y.Y+" L "+M+" "+y.Y+" M "+y.X+" "+y.Y+" L "+F+" "+y.Y+" ":""),"horizontal"!=s&&"both"!=s||("standardDeviation"!=i?W="M "+O+" "+me+" L "+C.X+" "+C.Y+" ":"standardDeviation"==i&&(W="M "+L.X+" "+L.Y+" L "+C.X+" "+C.Y+" "),ie=W,se=X=ue?r.visible?"M "+C.X+" "+C.Y+" L "+V+" "+C.Y+" M "+C.X+" "+C.Y+" L "+B+" "+C.Y+" ":"":r.visible?"M "+C.X+" "+C.Y+" L "+C.X+" "+V+" M "+C.X+" "+C.Y+" L "+C.X+" "+B+" ":"")):("vertical"!=s&&"both"!=s||("standardDeviation"!=i?Y="M "+O+" "+me+" L "+w.X+" "+w.Y+" ":"standardDeviation"==i&&(Y="M "+j.X+" "+j.Y+" L "+w.X+" "+w.Y+" "),ie=Y,se=U=ue?r.visible?"M "+w.X+" "+w.Y+" L "+w.X+" "+N+" M "+w.X+" "+w.Y+" L "+w.X+" "+z+" ":"":r.visible?"M "+w.X+" "+w.Y+" L "+N+" "+w.Y+" M "+w.X+" "+w.Y+" L "+z+" "+w.Y+" ":""),"horizontal"!=s&&"both"!=s||("standardDeviation"!=i?W="M "+O+" "+me+" L "+S.X+" "+S.Y+" ":"standardDeviation"==i&&(W="M "+L.X+" "+L.Y+" L "+S.X+" "+S.Y+" "),ie=W,se=X=ue?r.visible?"M "+S.X+" "+S.Y+" L "+H+" "+S.Y+" M "+S.X+" "+S.Y+" L "+ee+" "+S.Y+" ":"":r.visible?"M "+S.X+" "+S.Y+" L "+S.X+" "+H+" M "+S.X+" "+S.Y+" L "+S.X+" "+ee+" ":"")),"both"==s&&(ie=W+=Y,se=X+=U);var me={id:ne.svgObject.id+"_ErrorBar_"+ce+"_Point"+ge,d:ie,stroke:a,"stroke-width":e.width,opacity:e.opacity},ge={id:ne.svgObject.id+"_ErrorBarCap_"+ce+"_Point"+ge,d:se,stroke:o,"stroke-width":l};ne.model.enableCanvasRendering?(this.svgRenderer.ctx.rect(pe.X,pe.Y,pe.Width,pe.Height),this.svgRenderer.ctx.clip(),ne.svgRenderer.drawPath(me,null),ne.svgRenderer.drawPath(ge,null)):(ne.svgRenderer.drawPath(me,te),ne.svgRenderer.drawPath(ge,te),ne.svgRenderer.append(te,f))}ne.svgRenderer.append(f,ne.gSeriesEle),ej.EjSvgRender.utils._drawAxesBoundsClipPath(f,re,ne)},meanCalculation:function(e,t){for(var i,s,n,a,r,o,l=0,d=0,h=t.length,c=0;c<h;c++)"vertical"==e?l=l+t[c].y:d="horizontal"==e?d+t[c].xValue:(l=l+t[c].y,d+t[c].xValue);for(i=l/h,s=d/h,o=h-1,c=0;c<h;c++)"vertical"==e?(n=t[c].y-i,l=l+Math.pow(n,2)):d="horizontal"==e?(n=t[c].xValue-s,d+Math.pow(n,2)):(a=t[c].y-i,l=l+Math.pow(a,2),a=t[c].xValue-s,d+Math.pow(a,2));return r=l/o,o=d/o,{verStandSquareRoot:Math.sqrt(r),horStandSquareRoot:Math.sqrt(o),verMean:i,horMean:s}},renderCap:function(e,t,i,s,n){var a,r,o,l,d,h,c,u,p,m,g,f,_=this.canvasX,v=this.canvasY,e=e.length/2;return"vertical"!=t&&"both"!=t||(a=i.verHighvalue,r=i.verLowvalue),"horizontal"!=t&&"both"!=t||(o=s.horHighvalue,l=s.horLowvalue),"vertical"!=t&&"both"!=t||(u=n?(d=a.Y+v+e,h=a.Y+v-e,c=r.Y+v+e,r.Y+v-e):(d=a.X+_-e,h=a.X+_+e,c=r.X+_-e,r.X+_+e)),"horizontal"!=t&&"both"!=t||(f=n?(p=o.X+_+e,m=o.X+_-e,g=l.X+_+e,l.X+_-e):(p=o.Y+v-e,m=o.Y+v+e,g=l.Y+v-e,l.Y+v+e)),{verHighCapX1:d,verHighCapX2:h,verLowCapX1:c,verLowCapX2:u,horHighCapY1:p,horHighCapY2:m,horLowCapY1:g,horLowCapY2:f}},drawDisplayText:function(a,r,o){var l,d,h=this,e=r.type.toLowerCase(),c=h.model.AreaType.toLowerCase(),u=ej.seriesTypes[e].prototype.isRegion,p=r.drawType.toLowerCase(),m=!1,g=$.inArray(r,h.model._visibleSeries);ej.util.isNullOrUndefined(h.model.regionCount)&&(h.model.regionCount=-1);for(var t,f=h.model.enableCanvasRendering,_="polaraxes"==h.model.AreaType.toLowerCase(),i=0,s={},n=h.model.series.length;i<n;i++)s[t=h.model.series[i].stackingGroup]={length:s[t]?s[t].length+1:1,seriesIndex:i};o.stackingGroup=s,$.each(r._visiblePoints,function(e,t){var i=h.model.series[g].type.toLowerCase();if(r._visiblePoints[e].textOptionsBoxValues=[],d=t.marker,l="polaraxes"==c&&"column"==p||u||"rangecolumn"==p?"boxandwhisker"==i.toLowerCase()?t.dataLabelLocation:t.symbolLocation:"polaraxes"!=c?ej.EjSvgRender.utils._getPoint(t,r):ej.EjSvgRender.utils.TransformToVisible(r,t.xValue,t.y,h),!1!==t.visible&&(d&&d.dataLabel&&d.dataLabel.visible||(!d||!d.dataLabel)&&r.marker.dataLabel.visible)){u&&h.model.regionCount++;for(i=h.model.series[g].type.toLowerCase(),n=0;n<h.model._axes.length;n++)if(h.model._axes[n].zoomFactor<1||0<h.model._axes[n].zoomPosition){m=!0;break}if(!(h.zoomed||r.xAxis._isScroll||m)||"column"!=i&&"stackingcolumn"!=i&&"stackingcolumn100"!=i)if(f&&"cartesianaxes"==h.model.AreaType){if(h.svgRenderer.ctx.save(),h.svgRenderer.ctx.beginPath(),h.model.requireInvertedAxes?h.svgRenderer.ctx.rect(r.yAxis.x,r.xAxis.y,r.yAxis.width,r.xAxis.height):h.svgRenderer.ctx.rect(r.xAxis.x,r.yAxis.y,r.xAxis.width,r.yAxis.height),h.svgRenderer.ctx.clip(),h.model.chartRegions[h.model.regionCount]||-1==i.indexOf("column")&&-1==i.indexOf("bar")&&-1==i.indexOf("waterfall")){if("boxandwhisker"==i.toLowerCase())for(var s=0;s<l.length;s++)t.y=t.boxPlotLocation[s].YValues,a.drawDataLabel(r,e,t,l[s].X,l[s].Y,h.model.regionCount,o,l[s].outlier);else a.drawDataLabel(r,e,t,l.X,l.Y,h.model.regionCount,o);"rangecolumn"!=i&&"rangearea"!=i&&"splinerangearea"!=i||(t.y=t.low,a.drawDataLabel(r,e,t,l.X,l.Y,h.model.regionCount,o),t.y=t.high)}h.svgRenderer.ctx.restore()}else{if(f&&_&&(h.svgRenderer.ctx.save(),h.svgRenderer.ctx.beginPath(),h.svgRenderer.ctx.arc(h.model.centerX,h.model.centerY,h.model.Radius,0,2*Math.PI,!1),h.svgRenderer.ctx.clip(),l.X-=h.canvasX,l.Y-=h.canvasY),"column"==i||"stackingcolumn"==i||"stackingcolumn100"==i)h.model.chartRegions[h.model.regionCount]&&a.drawDataLabel(r,e,t,l.X,l.Y,h.model.regionCount,o);else if("boxandwhisker"==i.toLowerCase())for(s=0;s<l.length;s++)t.y=t.boxPlotLocation[s].YValues,a.drawDataLabel(r,e,t,l[s].X,l[s].Y,h.model.regionCount,o,l[s].outlier);else a.drawDataLabel(r,e,t,l.X,l.Y,h.model.regionCount,o);"rangecolumn"!=i&&"rangearea"!=i&&"splinerangearea"!=i||(t.y=t.low,a.drawDataLabel(r,e,t,l.X,l.Y,h.model.regionCount,o),t.y=t.high),f&&_&&h.svgRenderer.ctx.restore()}else for(var n=0;n<h.model.chartRegions.length;n++)g==h.model.chartRegions[n].SeriesIndex&&e==h.model.chartRegions[n].Region.PointIndex&&(f&&"cartesianaxes"==h.model.AreaType?(h.svgRenderer.ctx.save(),h.svgRenderer.ctx.beginPath(),h.model.requireInvertedAxes?h.svgRenderer.ctx.rect(r.yAxis.x,r.xAxis.y,r.yAxis.width,r.xAxis.height):h.svgRenderer.ctx.rect(r.xAxis.x,r.yAxis.y,r.xAxis.width,r.yAxis.height),h.svgRenderer.ctx.clip(),a.drawDataLabel(r,e,t,l.X,l.Y,n,o),h.svgRenderer.ctx.restore()):a.drawDataLabel(r,e,t,l.X,l.Y,n,o))}})},cartesianSmartLabels:function(e,t,i){var s,n,a,r,o,l,d,h,c,u,p,m,g=t.length;for(this.connectorFlag=!1,this.processCount=1,this.posObj={top:[],rightTop:[],left:[],leftTop:[],right:[],rightBottom:[],leftBottom:[],bottom:[]},r=0;r<this.model.series.length;r++)if(s=this.model.series[r].marker.size.width,n=this.model.series[r].marker.size.height,m=this.model.series[r].type.toLowerCase(),m=ej.seriesTypes[m].prototype.isRegion,"hidden"!=this.model.series[r].visibility&&this.model.series[r].marker.visible&&!m)for(o=0;o<this.model.series[r]._visiblePoints.length;o++)l=(f=this.model.series[r]._visiblePoints[o]).location,this.model.markerRegion[this.model.markerRegion.length]={seriesIndex:r,xPos:l.X+this.canvasX,yPos:l.Y+this.canvasY,width:s,height:n};for(var f,_,v,b,x,y,w=this.model.m_AreaBounds,C=0;C<g;C++)(f=t[C]).hide=!1,x=f.xPos,y=f.yPos,v=f.width,b=f.height,x-v/2<0&&-v/2<x&&(_=x-v/2,f.textOptions.x=f.xPos=x+Math.abs(_)+10,f.newConnectorFlag=!0),x+v/2>w.Width&&x+v/2<=w.Width+v/2&&(_=x-v/2,f.textOptions.x=f.xPos=w.Width-v/2-10,f.newConnectorFlag=!0),y+v/2>w.Height&&y+b/2<=w.Height+b/2&&(_=y+b/2-w.Height,f.yPos=y-_-10,f.textOptions.y=f.yPos+5,f.newConnectorFlag=!0),y-b/2<0&&-b/2<y&&(_=y-b/2,f.yPos=f.yPos+Math.abs(_)+10,f.textOptions.y=f.yPos+5,f.newConnectorFlag=!0);for(a=0;a<g;a++)ej.util.isNullOrUndefined(t[a].yPos)||(this.model.allPoints[this.model.allPoints.length]=t[a],this.connectorFlag=!1,this.compareDataLabels(a,t,0,this.processCount),(f=t[a]).connectorFlag=this.connectorFlag,t[a].dataLabeltemplate&&(c=$("#"+t[a].id),u=t[a].xPos,p=this.model.enableCanvasRendering?t[a].yPos+this.model.m_AreaBounds.Y:t[a].yPos,c.css("left",u).css("top",p),"cartesianaxes"==this.model.AreaType&&(d=(w=this.model.m_AreaBounds).X+(this.model.requireInvertedAxes?e.yAxis:e.xAxis).plotOffset,h=e.yAxis.y,v=t[a].width,b=t[a].height,(u>d+w.Width||u+v<d||p+b<h||p+b>w.Y+w.Height||this.zoomed&&(u<d||p<h||u>d+w.Width||p>h+w.Height))&&c.remove())),this.storeDataLabelPositions(f))},storeDataLabelPositions:function(e){var t=e.position,i=this.posObj;switch(t){case"top":i.top[this.processCount-1]=e,this.processCount=1;break;case"rightTop":i.rightTop[this.processCount-1]=e,this.processCount=1;break;case"right":i.right[this.processCount-1]=e,this.processCount=1;break;case"rightBottom":i.rightBottom[this.processCount-1]=e,this.processCount=1;break;case"bottom":i.bottom[this.processCount-1]=e,this.processCount=1;break;case"left":i.left[this.processCount-1]=e,this.processCount=1;break;case"leftBottom":i.leftBottom[this.processCount-1]=e,this.processCount=1;break;case"leftTop":i.leftTop[this.processCount-1]=e}},cartesianColumnSmartLabels:function(e,t,i){var s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y=t.length;for(this.connectorFlag=!1,this.processCount=1,this.model.outsideLabels=[],r=0;r<y;r++)ej.util.isNullOrUndefined(t[r].yPos)||isNaN(t[r].yPos)||(this.model.allPoints[this.model.allPoints.length]=t[r],e._enableSmartLabels&&(this.connectorFlag=!1,this.compareColumnDataLabels(e,r,t,0,this.processCount)),e._visiblePoints[r],t[r].dataLabeltemplate&&((o=$("#"+t[r].id)).css("left",t[r].xPos).css("top",t[r].yPos),s=t[r].xPos,n=t[r].yPos,t.height=o.outerHeight(),l=this.model.m_AreaBounds.X,d=this.model.m_AreaBounds.Y,h=this.model.m_AreaBounds.Width,c=this.model.m_AreaBounds.Height,t.width=o.outerWidth(),_=o.width()/2,a=o.height(),g=u=p=f=0,v=(m=this.model.m_AreaBounds).X+(this.model.requireInvertedAxes?e.yAxis:e.xAxis).plotOffset,b=e.yAxis.y,x=s-_,e.marker.dataLabel.showEdgeLabels&&(s>v+m.Width||n+a>m.Y+m.Height||s<v||n<b||s>v+m.Width||n>b+m.Height||x>m.Width+m.X)&&(s<l&&(p=l-s),c+d<n+a&&(g=a-(n+a-(c+d))),n<d&&(u=d-n),h+l<s+(_=o.outerWidth())&&(f=_-(s+_-(h+l))),f=0==f?_:f,g=0==g?a:g,document.getElementById(o[0].id).style.clip="rect("+u+"px,"+f+"px,"+g+"px,"+p+"px)")))},compareColumnDataLabels:function(e,t,i,s,n){var a,r,o,l,d,h,c=this.model.allPoints.length-1,u=this.model.m_AreaBounds,p=e.marker.dataLabel.enableContrastColor,m=[],g=e.type.toLowerCase(),f=new ej.seriesTypes[e.type.toLowerCase()];this.firstPoints=[];for(var _=0;_<c;_++)if(d=this.model.allPoints[_],h=this.model.allPoints[this.model.allPoints.length-1],this.currentCollideLabel=d,o=(r=e.marker.dataLabel).textPosition.toLowerCase(),rotation=r.angle,(a=(chartObj=this).isCollide(d,h,null,null,chartObj,rotation)).state){if("column"==g||"stackingcolumn"==g||"rangecolumn"==g||"waterfall"==g){if(r.showEdgeLabels?h.textOptions.y=h.yPos=h.yPos+a.height+5:h.textOptions.y=h.yPos="top"==o||"middle"==o?h.yPos+a.height+5:h.yPos-a.height-5,h.textOptions.y=h.textOptions.y+5+h.margin.top/2-h.margin.bottom/2,h.textOptions.y>u.Height){h.hide=!0;break}}else h.textOptions.x=h.xPos="top"==o||"middle"==o?d.xPos-d.width/2-h.width/2-5:d.xPos+d.width/2+h.width/2+5;for(this.compareColumnDataLabels(e,t,i,s,this.processCount),d=this.checkOutsideLabels(this.model,h,u),b=0;b<this.model.allPoints.length;b++)0==b?this.firstPoints.push(this.model.allPoints[0]):this.firstPoints[this.firstPoints.length-1].x!=this.model.allPoints[b].x&&this.firstPoints.push(this.model.allPoints[b]);if(d||this.zoomed){for(l=0;l<=this.model.allPoints.length-1;l++)this._positionOutsideLabels(h,this.model.allPoints,l,g);this.model.outsideLabels.push(h)}if(p&&-1<g.indexOf("stacking")){for(var v=this.model.chartRegions,b=0;b<this.model.chartRegions.length;b++)v[b].Region.PointIndex==t&&(a=this.isCollide(v[b],h,0,p,this)),a.state&&m.push(v[b]);if(5<m.length)break;1<=m.length&&(d="array"==jQuery.type(this.model.seriesColors[m[0].SeriesIndex])?this.model.seriesColors[m[0].SeriesIndex][0].color:this.model.seriesColors[m[0].SeriesIndex],h.textOptions.fill=f._applySaturation(this,d))}}},_positionOutsideLabels:function(e,t,i,s){var n=t[i];if(0==i){var a=this.isCollide(n,e);if(!s||"column"!=s&&"stackingcolumn"!=s&&"rangecolumn"!=s&&"waterfall"!=s)e.textOptions.x=e.xPos=0<this.model.outsideLabels.length?this.model.outsideLabels[this.model.outsideLabels.length-1].xPos:t[0].xPos+n.width/2+e.width/2+5;else{if(0<this.model.outsideLabels.length&&e.x==this.model.outsideLabels[this.model.outsideLabels.length-1].x)e.textOptions.y=e.yPos=this.model.outsideLabels[this.model.outsideLabels.length-1].yPos-a.height;else for(i=0;i<this.firstPoints.length;i++)e.x==this.firstPoints[i].x&&a.state?e.textOptions.y=e.yPos=this.firstPoints[i].yPos-a.height:1<t.length&&i<t.length-1&&(e.textOptions.y=e.yPos=t[i+1].yPos);e.textOptions.y=e.textOptions.y+5+e.margin.top/2-e.margin.bottom/2}}(a=this.isCollide(n,e)).state&&("column"==s||"stackingcolumn"==s||"rangecolumn"==s||"waterfall"==s?(e.textOptions.y=e.yPos=e.yPos-a.height-5,e.textOptions.y=e.textOptions.y+5+e.margin.top/2-e.margin.bottom/2):e.textOptions.x=e.xPos=e.xPos+n.width/2+e.width/2+5)},compareDataLabels:function(e,t,i,s){var n,a,r,o,l=this.model.allPoints.length,d=this.model.m_AreaBounds,h=this.posObj;for(this.breakLoop=!1,n=0;n<l;n++)if(this.model.series[this.model.allPoints[n].seriesIndex].type.toLowerCase(),a=this.model.allPoints[n],r=this.model.allPoints[l-1],this.currentCollideLabel=a,(o=this.isCollide(a,r,n)).state||o.marker)switch(this.connectorFlag=!0,i){case 0:if(1<this.processCount&&this.resetValues(r),o.marker?(this.prevLabel=o.markerRegion,this.processCount=1):!ej.util.isNullOrUndefined(this.prevLabel)&&this.isCollide(this.prevLabel,r).state||(this.prevLabel=a,this.processCount=1),this.resetValues(r),1<s&&h.right[this.processCount-2]?(a=h.right[this.processCount-2],r.textOptions.x=r.xPos=a.xPos+(a.width/2+r.width/2+10)):r.textOptions.x=r.xPos=this.prevLabel.xPos+(this.prevLabel.width/2+r.width/2+10),i+=1,r.position="right",this.breakLoop)break;if(!this.checkOutsideLabels(this.model,r,d)){this.compareDataLabels(e,t,i,this.processCount);break}case 1:if(this.resetValues(r),r.textOptions.x=r.xPos=this.prevLabel.xPos+this.prevLabel.width/2+r.width/2+10,1<s&&h.rightBottom[this.processCount-2]?(a=h.rightBottom[this.processCount-2],r.textOptions.y=r.yPos=a.yPos+this.canvasY+a.height+10):r.textOptions.y=r.yPos=r.location.Y+this.canvasY+r.height+5,r.textOptions.y=r.textOptions.y+5+r.margin.top/2-r.margin.bottom/2,r.position="rightBottom",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,r,d)){this.compareDataLabels(e,t,i,this.processCount);break}case 2:if(this.resetValues(r),r.textOptions.y=r.yPos=r.location.Y+this.canvasY+r.height+5,1<s&&h.bottom[this.processCount-2]?(a=h.bottom[this.processCount-2],r.textOptions.y=r.yPos=a.yPos+r.height+10):r.textOptions.y=r.yPos=r.location.Y+this.canvasY+r.height+5,r.textOptions.y=r.textOptions.y+5+r.margin.top/2-r.margin.bottom/2,r.position="bottom",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,r,d)){this.compareDataLabels(e,t,i,this.processCount);break}case 3:if(this.resetValues(r),r.textOptions.x=r.xPos=this.prevLabel.xPos-this.prevLabel.width/2-r.width/2-10,1<s&&h.leftBottom[this.processCount-2]?(a=h.leftBottom[this.processCount-2],r.textOptions.y=r.yPos=a.yPos+this.canvasY+a.height+10):r.textOptions.y=r.yPos=r.location.Y+this.canvasY+r.height+5,r.textOptions.y=r.textOptions.y+5+r.margin.top/2-r.margin.bottom/2,r.position="leftBottom",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,r,d)){this.compareDataLabels(e,t,i,this.processCount);break}case 4:if(this.resetValues(r),1<s&&h.left[this.processCount-2]?(a=h.left[this.processCount-2],r.textOptions.x=r.xPos=a.xPos-a.width/2-r.width/2-10):r.textOptions.x=r.xPos=this.prevLabel.xPos-this.prevLabel.width/2-r.width/2-10,r.position="left",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,r,d)){this.compareDataLabels(e,t,i,this.processCount);break}case 5:if(this.resetValues(r),r.textOptions.x=r.xPos=this.prevLabel.xPos-this.prevLabel.width/2-r.width/2-10,1<s&&h.leftTop[this.processCount-2]?(a=h.leftTop[this.processCount-2],r.textOptions.y=r.yPos=a.yPos-(r.height+10)):r.textOptions.y=r.yPos=this.prevLabel.yPos-r.height-10,r.textOptions.y=r.textOptions.y+5+r.margin.top/2-r.margin.bottom/2,r.position="leftTop",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,r,d)){this.compareDataLabels(e,t,i,this.processCount);break}case 6:if(this.resetValues(r),1<s&&h.top[s-2]?(a=h.top[s-2],r.textOptions.y=r.yPos=a.yPos-(r.height+10)):r.textOptions.y=r.yPos=this.prevLabel.yPos-this.processCount*(r.height+10),r.textOptions.y=r.textOptions.y+5+r.margin.top/2-r.margin.bottom/2,i+=1,r.position="top",this.breakLoop)break;if(!this.checkOutsideLabels(this.model,r,d)){this.compareDataLabels(e,t,i,this.processCount);break}case 7:if(this.resetValues(r),r.textOptions.x=r.xPos=this.prevLabel.xPos+this.prevLabel.width/2+r.width/2+10,1<s&&h.rightTop[this.processCount-2]?(a=h.rightTop[this.processCount-2],r.textOptions.y=r.yPos=a.yPos-r.height-10):r.textOptions.y=r.yPos=this.prevLabel.yPos-r.height-10,r.textOptions.y=r.textOptions.y+5+r.margin.top/2-r.margin.bottom/2,r.position="rightTop",i+=1,this.breakLoop)break;if(!this.checkOutsideLabels(this.model,r,d)){this.compareDataLabels(e,t,i,this.processCount);break}case 8:if(i=0,this.processCount+=1,e==this.processCount)i=9;else if(!this.checkOutsideLabels(this.model,r,d)){this.compareDataLabels(e,t,i,this.processCount);break}case 9:(e==this.processCount||this.processCount>l)&&(--this.processCount,i=i<0||8==i?0:i-1,this.breakLoop=!0)}},checkOutsideLabels:function(e,t,i){var s,n=e.enableCanvasRendering,a=t.dataLabeltemplate;if(e.series[t.seriesIndex].marker.dataLabel.showEdgeLabels&&(s=n?t.xPos-this.canvasX:t.xPos,e=n?t.yPos-this.canvasY:t.yPos,n=a?i.Height+i.Y:i.Height,i=a?i.Width+i.X:i.width,s-t.width/2<0||s+t.width/2>i||e+t.height/2>n||e-t.height/2<0))return!0},drawPieofPieConnectors:function(e,t){var i=t.enableAnimation&&!t._animatedSeries?"hidden":"visible";this.model.enableCanvasRendering||(this.gConnectorLinesGroup?this.gConnectorLinesGroup.childNodes.length:this.gConnectorLinesGroup=this.svgRenderer.createGroup({id:this.svgObject.id+"_connectorLineGroup",visibility:i}),$(this.gConnectorLinesGroup.childNodes).remove());for(var s=[],n=[],a=[],r=[],o=-.5*Math.PI,l=0;l<2;l++){var d,h,c,u,p=t.pieCollections[l],m=0==l?t.pieCoefficient:t.pieOfPieCoefficient;s[l]=.25*m*Math.min(e.width,e.height),n[l]=this.model.circleCenterX[l],n[l]=0==l?n[l]+this.model.pieGapWidth/2:n[l]-this.model.pieGapWidth/2,a[l]=this.model.circleCenterY[l],u=0<p[0].start&&p[0].end<Math.PI&&0==l?(c=p[0].start+o,u=p[0].end+o-1e-6,d=n[l]+s[l]*Math.cos(c),h=a[l]+s[l]*Math.sin(c),c=n[l]+s[l]*Math.cos(u),a[l]+s[l]*Math.sin(u)):(c=d=n[l]+s[l]*Math.cos(o),(h=a[l]+s[l]*Math.sin(o))+2*s[l]),r.push({X1:d,Y1:h,X2:c,Y2:u})}for(var g=t.connectorLine,f=0;f<2;f++){var _={id:this.svgObject.id+"_connectorLine"+f,x1:0==f?r[f].X1:r[f-1].X2,y1:0==f?r[f].Y1:r[f-1].Y2,x2:0==f?r[f+1].X1:r[f].X2,y2:0==f?r[f+1].Y1:r[f].Y2,stroke:g.color,"stroke-width":g.width,opacity:g.opacity,"stroke-dasharray":g.dashArray};this.svgRenderer.drawLine(_,this.gConnectorLinesGroup)}this.svgRenderer.append(this.gConnectorLinesGroup,this.gSeriesEle)},drawConnectorLines:function(e,t,i){var s=!0,n=i.xPos,a=i.yPos,r=this.model.m_AreaBounds,o=this.model.series[e].marker.dataLabel,l=i.location||i.symbolLocation,d=l.Y>i.textOptions.y?i.textOptions.y:i.textOptions.y-i.height/2;i.dataLabeltemplate?(d=i.yPos-this.model.m_AreaBounds.Y+i.height,i.textOptions.x=i.textOptions.x-this.model.m_AreaBounds.X+i.width/4+this.canvasX):(n>r.Width||n+i.width<0||a-i.height>r.Height||a+i.height<0)&&!o.showEdgeLabels&&(s=!1),s&&(l="M "+(l.X+this.canvasX)+" "+(l.Y+this.canvasY)+" L "+i.textOptions.x+" "+d,i=this.model.series[e].marker.dataLabel.connectorLine,d=ej.util.isNullOrUndefined(i.color)?this.model.series[e].fill:i.color,l={id:this.svgObject.id+"_dataLabelConnectorLine_series"+e+"_"+t,stroke:d,"stroke-width":i.width,d:l},this.model.series[e].connectorLines=!0,this.svgRenderer.drawPath(l,this.gConnectorEle[e]))},resetValues:function(e){e.textOptions.y=e.dataLabel.textY,e.yPos=e.dataLabel.y,e.textOptions.x=e.dataLabel.textX,e.xPos=e.dataLabel.x},isCollide:function(e,t,i,s,n,a){var r,o=0,l=0,d=!1,h=!1;if(s)m=e.Region.Bounds,v=n.model.m_AreaBounds,v={X:m.X-v.X,Y:m.Y-v.Y,Width:m.Width,Height:m.Height},m="None"!=t.symbolName?(c=t.xPos,r=t.xPos+t.width,_=t.yPos-t.height/2,t.yPos+t.height/2):(c=t.textOptions.x-t.width/2,r=t.textOptions.x+t.width/2,_=t.textOptions.y-(90==t.textOptions.angle||-90==t.textOptions.angle?t.height/2:t.height),t.textOptions.y+(90==t.textOptions.angle||-90==t.textOptions.angle?t.height/2:0)),d=v.X<r&&c<v.X+v.Width&&v.Y<m&&_<v.Y+v.Height;else{var c=e.seriesIndex?this.model.series[e.seriesIndex].marker.dataLabel.border.width:0;c+=t.seriesIndex?this.model.series[t.seriesIndex].marker.dataLabel.border.width:0;var u=this.model.series,p=u[e.seriesIndex],m=u[t.seriesIndex],g=e.xPos,f=e.yPos,_=t.xPos,v=t.yPos;e.xPos+=p.xAxis.x,e.yPos+=p.yAxis.y,t.xPos+=m.xAxis.x,t.yPos+=m.yAxis.y;var b=e.height,x=e.width,y=t.height,w=t.width;if(a&&(90!=(a=360<a?a-360:a<-360?a+360:a)&&-90!=a||(b=e.width,x=e.height,y=t.width,w=t.height)),e!=t&&((d=!(e.yPos+b<t.yPos||e.yPos>t.yPos+y||e.xPos+x/2+c<=t.xPos-w/2||e.xPos-x/2>=t.xPos+w/2))&&(l=e.yPos+b-t.yPos,o=e.xPos+x-t.xPos),e.xPos=g,e.yPos=f),!d)for(var C=0;C<this.model.markerRegion.length&&(p=u[(e=this.model.markerRegion[C]).seriesIndex],g=e.xPos,f=e.yPos,e.xPos+=p.xAxis.x,t.yPos+=p.yAxis.y,!(h=!(e.yPos+b<t.yPos-y/2||e.yPos>t.yPos+y||e.xPos+x<t.xPos||e.xPos>t.xPos+w)));C++);e.xPos=g,e.yPos=f,t.xPos=_,t.yPos=v}return{state:d,marker:h,markerRegion:e,width:o,height:l}},drawAccDisplayText:function(e,t,i){var s=t._visiblePoints.length;this.firstStartAngle=[];var n=t.type.toLowerCase();if("pyramid"!=n&&"funnel"!=n&&"pieofpie"!=n&&(0<t.leftsidePoints.length||0<t.rightsidePoints.length)){for(var a=t.rightsidePoints.length,r=t.leftsidePoints.length,o=0;o<a;o++)t.rightsidePoints[o].index=o,e.drawDataLabelAcc(this,t,t.rightsidePoints[o].pointIndex,t.rightsidePoints[o],i);for(var l=r-1;0<=l;l--)t.leftsidePoints[l].index=l,e.drawDataLabelAcc(this,t,t.leftsidePoints[l].pointIndex,t.leftsidePoints[l],i)}else for(o=0;o<s;o++){t._visiblePoints[o].index=o;var d="pieofpie"==n?t._visiblePoints[o].actualIndex:o;t._visiblePoints[o].start!=t._visiblePoints[o].startAngle&&(t._visiblePoints[o].startAngle=t._visiblePoints[o].start),isNaN(t._visiblePoints[o].startAngle)&&"pie"==t.type.toLowerCase()&&"pieofpie"==t.type.toLowerCase||e.drawDataLabelAcc(this,t,d,t._visiblePoints[o],i,t.collectionIndex)}"pyramid"!=t.type.toLowerCase()&&"funnel"!=t.type.toLowerCase()||(this.svgRenderer.append(this.gConnectorEle,this.gSeriesEle),this.svgRenderer.append(this.gSymbolGroupEle,this.gSeriesEle),this.svgRenderer.append(this.gDataLabelEle,this.gSeriesEle),this.svgRenderer.append(this.gSeriesTextEle,this.gSeriesEle),this.svgRenderer.append(this.gSeriesEle,this.svgObject),this.vmlRendering||this.svgRenderer.append(this.svgObject,this.element))},_processOData:function(s){var n=this,a=s.type.toLowerCase(),e=s.dataSource.executeQuery(s.query);e.done(function(e){n._processJsonData(e.result,s),s.visibility="visible",$(n.svgObject).empty(),$(n.legendSvgContainer).empty(),n.model.enableCanvasRendering&&(n.svgRenderer.ctx.clearRect(0,0,n.svgObject.width,n.svgObject.height),$("#canvas_trackSymbol").remove());for(var t=!0,i="pie"!=a||"doughnut"!=a?0:n.model.series.length-1;"pie"!=a||"doughnut"!=a?i<n.model.series.length:0<=i;"pie"!=a||"doughnut"!=a?i++:i--)if(n.model.series[i].dataSource&&"hidden"==n.model.series[i].visibility){t=!1;break}t&&n.draw()}),e.fail(function(e){s.visibility="visible",$(n.svgObject).empty(),$(n.legendSvgContainer).empty();for(var t=!0,i=0;i<n.model.series.length;i++)if(n.model.series[i].dataSource&&"hidden"==n.model.series[i].visibility){t=!1;break}t&&n.draw()})},_findDatatype:function(e,t){if(null==e.xAxisName)n=null!=t.model.primaryXAxis.valueType&&"datetime"==t.model.primaryXAxis.valueType.toLowerCase();else for(var i=0;i<t.model._axes.length;i++)var s=t.model._axes[i],n=s.name==e.xAxisName&&null!=s.valueType&&"datetime"==s.valueType.toLowerCase();return n},_processJsonData:function(e,t){var i,s,n=t.xName,a=t.yName,r=t.pointColorMappingName,o=t.marker&&t.marker.dataLabel&&t.marker.dataLabel.textMappingName,l=t.type.toLowerCase(),d=!(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg")||void 0!==e[e.length-1])?e.length-1:e.length,h=(a.length,"bubble"==l),c=!!e[0][n].indexOf||(t._hiloTypes?e[0][t.high]&&e[0][t.high].indexOf:!!(0!=e[0][a]&&(e[0][a]||e[0][t.size])||0).indexOf),u=c&&e[0][n].indexOf&&-1!=e[0][n].indexOf("/Date("),p=0,m=this.model._hiddenPointIndex;if(t.points=new Array(d),c)"boxandwhisker"!=l&&this._processStringData(e,t,n,a,u,d);else for(;p<d;)i=e[p][n],t._hiloTypes||(s="string"==typeof e[p][a]?parseFloat(e[p][a]):e[p][a]),t.points[p++]={x:i,xValue:i,y:s,YValues:[s]};return"boxandwhisker"==l&&this._processBoxandWhiskerData(e,t,n,a,u),(h||0<r.length||0<o.length||0<m.length)&&this._processBubbleSize(e,t,c,r,o,m,h,d),t._hiloTypes&&this._processHiLoValues(e,t,c,l,d),0},_processBoxandWhiskerData:function(e,t,i,s,n){for(var a,r,o=0,l=e.length,d=e[0][i].indexOf&&-1!=e[0][i].indexOf("/Date(");o<l;)a=e[o][i],n&&(a=new Date(d?parseInt(a.substr(6)):a)),r=e[o][s],t.points[o++]={x:a,xValue:a,y:r,YValues:[r]}},_processStringData:function(e,t,i,s,n,a){for(var r,o,l=0,d=e[0][i].indexOf&&-1!=e[0][i].indexOf("/Date(");l<a;)r=e[l][i],!n||r instanceof Date||(r=new Date(d?parseInt(r.substr(6)):r)),o=parseFloat(e[l][s]),t.points[l++]={x:r,xValue:r,y:o,YValues:[o]}},_processBubbleSize:function(e,t,i,s,n,a,r,o){for(var l,d=0;d<o;d++)(l=t.points[d]).YValues[0]=i?parseFloat(e[d][t.yName]):e[d][t.yName],r&&(l.size=l.YValues[1]=i?parseFloat(e[d][t.size]):e[d][t.size]),0<s.length&&(l.fill=e[d][s]),0<n.length&&(l.text=e[d][n]),0<a.length&&d==a[d]&&(l.visibility="hidden")},_processHiLoValues:function(e,t,i,s,n){for(var a,r,o=0;o<n;o++)a=t.points[o],r=e[o],a.y=a.high=a.YValues[0]=i?this.tryParseFloat(r[t.high]):r[t.high],a.low=a.YValues[1]=i?this.tryParseFloat(r[t.low]):r[t.low],"hilo"!=s&&"rangecolumn"!=s&&"waterfall"!=s&&(a.open=a.YValues[2]=i?this.tryParseFloat(r[t.open]):r[t.open],a.close=a.YValues[3]=i?this.tryParseFloat(r[t.close]):r[t.close],t.volume&&(a.volume=a.YValues[4]=i?this.tryParseFloat(r[t.volume]):r[t.volume]))},tryParseFloat:function(e){return e&&0<e.length?parseFloat(e):e},bindTo:function(e){var t=this.model,i=t.series;$("#"+this.svgObject.id+"_CrosshairVertical").remove(),$("#"+this.svgObject.id+"_CrosshairHorizontal").remove(),$.finish?($(".ejTooltip"+this._id).finish(),$(".tooltipDiv"+this._id).finish()):($(".ejTooltip"+this._id).stop(!0,!0),$(".tooltipDiv"+this._id).stop(!0,!0)),$(document).find('[id*="_TrackToolTip"]').remove(),$("#template_group_"+this._id).remove(),this.isChartElemId&&this.createElementsId(),t.primaryXAxis._valueType=null,t.primaryXAxis.position=null,t.primaryYAxis._valueType=null,t.primaryYAxis.position=null,t.requireInvertedAxes=!1,t._hiddenPointIndex=[];for(var s,n=i.length,a=t.axes.length,r=0;r<a;r++)(s=t.axes[r])._valueType=null,s.position=null;if(t._axes){a=t._axes.length;for(var o=0;o<a;o++)(s=t._axes[o])._valueType=null,s.position=null,s.zoomFactor=s._pointsLength&&s._pointsLength!=s.scrollbarSettings.pointsLength?1:s.zoomFactor}for(r=0;r<n;r++){var l=i[r],d=["y","high","low","open","close"];if(!ej.isNullOrUndefined(l.points))for(o=0;o<l.points.length;o++)d.map(function(e,t){var i=l.points[o][e];ej.isNullOrUndefined(i)||(l.points[o][e]="string"==typeof i?parseFloat(i):i)});l.position=null,l.fill&&this.model.seriesColors&&l.fill!=this.model.seriesColors[r]&&(i[r].isFill=!0)}if(t.AreaType&&"none"==t.AreaType)for(var h,l=i[0],r=0;l.points&&r<l.points.length;r++)"hidden"==(h=l.points[r])._visibility&&"none"==t.AreaType&&1==i.length&&(this.model._hiddenPointIndex[r]=r),h.isFill=h.fill&&t.pointColors&&h.fill!=t.pointColors[r]||h.isFill,h.fill=h.isFill?h.fill:null;if(t.enable3D&&(ej.Ej3DRender.transform=null),i){if(this.setModelProperties(e),!e)for(r=0;r<i.length;r++)null!=(l=i[r]).visibility&&null!=l.visibility||(l.visibility="visible"),l.type&&(l._hiloTypes=("polar"==l.type.toLowerCase()||"radar"==l.type.toLowerCase()?ej.seriesTypes[l.drawType.toLowerCase()]:ej.seriesTypes[l.type.toLowerCase()]).prototype.hiloTypes),l.points||(l.points=[]),l.dataSource&&(l.dataSource instanceof ej.DataManager?(l.visibility="hidden",!ej.isNullOrUndefined(l.query)&&l.query instanceof ej.Query||(l.query=ej.Query()),this._processOData(l)):0<l.dataSource.length&&("string"!=typeof l.dataSource&&!l.dataSource.toLowerCase||(l.dataSource=JSON.parse(l.dataSource.replace(/'''/g,'"'))),this._processJsonData(l.dataSource,l)));0<$(this.svgObject).width()&&this.draw(e)}},_createChartId:function(){for(var e=!1,t=0,i=$(this.element)[0].className.split(" ")[0];$("#"+i+"_"+t).length||($(this).attr("_id",i+"_"+t),$(this.element).attr("id",i+"_"+t),e=!0),t++,!e;);this.isChartElemId=!0},createElementsId:function(){this.legendContainer.attr("id","legend_"+this._id),this.scrollerContainer.attr("id","legend_Scroller"+this._id),this.chartContainer.attr("id","chartContainer_"+this._id),this.axisScroll.attr("id","axisScrollbar_"+this._id),$(this.svgObject).attr("id",this._id+(this.model.enableCanvasRendering?"_canvas":"_svg"))},calculateHeight:function(e){var t=$(e.svgObject),i=e.model.size.height,i=$(e.element).height()/100*parseInt(i);return t.height(i),i},calculateWidth:function(e){var t=$(e.svgObject),i=e.model.size.width,i=$(e.element).width()/100*parseInt(i);return t.width(i),i},selectedStyle:function(e){for(var t=$("#"+e._id).find('[class*="Selection"]'),i=[],s=0;s<t.length;s++)i[s]=[],i[s].id=t[s].id,i[s].className=$("#"+i[s].id).attr("class");return 0<$("[id $= Def ]").length&&(i.pattern=$("[id $= Def ]")),i},chartResize:function(){var e,i=this,s=$(i.svgObject),n=this.selectedStyle(i);this.removeMultiRect(),this._chartResize=!0,this.model.enableCanvasRendering&&($("[id*="+this._id+"_Selection_]").remove(),$("#canvas_trackSymbol").remove(),i.svgObject.getContext("2d").clearRect(0,0,this.svgRenderer.svgObj.width,this.svgRenderer.svgObj.height),"string"==typeof i.model.size.width&&-1!=i.model.size.width.indexOf("%")?(e=i.calculateWidth(i),this.svgRenderer.svgObj.width=e):this.svgRenderer.svgObj.width=$("#"+this._id).width(),"string"==typeof i.model.size.height&&-1!=i.model.size.height.indexOf("%")?(e=i.calculateHeight(i),this.svgRenderer.svgObj.height=e):this.svgRenderer.svgObj.height=ej.util.isNullOrUndefined(this.model.size.height)?"450":parseInt($(i.element).height())),this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){if(!ej.util.isNullOrUndefined(i.model)&&("string"==typeof i.model.size.width&&-1!=i.model.size.width.indexOf("%")?i.calculateWidth(i):s.width($(i.element).width()),"string"==typeof i.model.size.height&&-1!=i.model.size.height.indexOf("%")?i.calculateHeight(i):s.height(i.model.size.height),0<$(i.svgObject).width())){$(i.svgObject).empty(),$(i.legendSvgContainer).empty(),$("#template_group_"+i._id).remove(),$("#annotation_group_"+i._id).remove(),i.disableAnimation();for(var e=0;e<i.model.series.length;e++)i.model.series[e].regionAdded=!1;i.draw();for(var t=0;t<n.length;t++)$("#"+n[t].id).attr("class",n[t].className);n.pattern&&i.svgRenderer.append(n.pattern,i.svgObject),i.zoomed&&!i.vmlRendering&&i._enableZoomingButtons(),i.enableAnimation()}},500)},isDevice:function(){return/mobile|tablet|android|kindle/i.test(navigator.userAgent.toLowerCase())},isWindows:function(){if(!(ej.getBooleanVal($("head"),"data-ej-android")||ej.getBooleanVal($("head"),"data-ej-ios")||ej.getBooleanVal($("head"),"data-ej-ios7")||ej.getBooleanVal($("head"),"data-ej-flat")))return this._windows()},_windows:function(){return/trident|windows phone/i.test(navigator.userAgent.toLowerCase())||!0===ej.getBooleanVal($("head"),"data-ej-windows",!1)},bindResizeEvents:function(){if(this.model._resizeEventRegistered)return 0;ej.isTouchDevice()&&this._isOrientationSupported()?this._on($(window),"orientationchange",this.chartResize):this._on($(window),"resize",this.chartResize),this.model._resizeEventRegistered=!0},removeResizeEvents:function(){this.model._resizeEventRegistered&&(ej.isTouchDevice()&&this._isOrientationSupported()?this._off($(window),"orientationchange",this.chartResize):this._off($(window),"resize",this.chartResize),this.model._resizeEventRegistered=!1)},_isOrientationSupported:function(){return"orientation"in window&&"onorientationchange"in window},_calculatePinchZoomPosition:function(e){var t,i,s,n,a,r=this.model.m_AreaBounds,o=this.model._axes,l=e.originalEvent.touches&&0<e.originalEvent.touches.length?e.originalEvent.touches[0]:e.originalEvent,d=l.pageX,h=l.pageY,c=this.previousPanTouch,u=0,p=o.length;if(d>r.X&&d<r.X+r.Width&&h>r.Y&&h<r.Y+r.Height){if(c=c||(this.previousPanTouch={pageX:d,pageY:h}),ej.isTouchDevice()||this.model.zooming.enableDeferredZoom)return this.oPreviousCoords={x:this.previousPanTouch.pageX,y:this.previousPanTouch.pageY},this.chartMouseMove(e);for(;u<p;u++)a=(n="horizontal"==(i=o[u]).orientation.toLowerCase())?(c.pageX-d)/i.width*i.zoomFactor:(c.pageY-h)/i.height*i.zoomFactor,t=i.zoomPosition,i.zoomPosition=this._ensureValueInMinMax(n?t+a:t-a,0,1-i.zoomFactor),s=s||t!=i.zoomPosition;this.previousPanTouch={pageX:d,pageY:h},s&&!this.chartUpdating&&(this.redraw(!0,s,e.target),this._enableZoomingButtons())}},_calculateTouchDistance:function(e,t){for(var i=[],s=0,n=t.length;s<n;s++)null==e[s]&&(e[s]=t[s]),i[s]={},0<s&&(i[s].scaleX=e[0].pageX!=e[1].pageX&&(t[0].pageX-t[1].pageX)/(e[0].pageX-e[1].pageX),i[s].scaleY=e[0].pageY!=e[1].pageY&&(t[0].pageY-t[1].pageY)/(e[0].pageY-e[1].pageY),i[s].center={x:(e[0].pageX+t[0].pageX)/2,y:(e[1].pageY+t[1].pageY)/2});return i},_ensureValueInMinMax:function(e,t,i){return e<t?t:i<e?i:e},_calculatePinchZoomFactor:function(e,t,i){var s,n,a,r,o,l,d,h=this.model,c=h._axes,u=!0,p=h.m_AreaBounds,m=0,g=c.length;if(t="x"==t?"horizontal":"y"==t?"vertical":null,null!=this.previousScale){for(;m<g;m++)if(!t||c[m].orientation===t){if(!(n="horizontal"==(r=c[m]).orientation?e[1].scaleX:e[1].scaleY))break;d="horizontal"==r.orientation?this.previousScale[1].scaleX:this.previousScale[1].scaleY,o=r.zoomFactor,l=r.zoomPosition,a=this._ensureValueInMinMax(1/r.zoomFactor,1,1e4),n=this._ensureValueInMinMax(a+a*(n-d)/d,1,1e4),d="horizontal"==r.orientation?e[1].center.x/p.Width:1-e[1].center.y/p.Height,r.zoomFactor=this._ensureValueInMinMax(1/n,1e-4,1),r.zoomPosition=this._ensureValueInMinMax(l+(o-r.zoomFactor)*d,0,1-r.zoomFactor),s=s||o!=r.zoomFactor,u=u&&1==r.zoomFactor}!s||u||this.chartUpdating?u&&this.zoomed&&!this.chartUpdating&&(this.redraw(!0,!0,i),this.zoomed=!1,this._removeZoomkit()):(this.zoomed=!0,this.redraw(!0,!0,i),this._enableZoomingButtons())}this.previousScale=e},_addTouchPointer:function(e,t,i,s){for(s=e.length;s--;)if(t.pointerId==e[s].pointerId)return i&&(e[s]=t),0;e.push(t)},_removeTouchPointer:function(e,t,i){for(i=e&&e.length;i--;)if(t.pointerId==e[i].pointerId)return e.splice(i,1),0},_copyTouches:function(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]={pageX:e[i].pageX,pageY:e[i].pageY};return t},_initEventParams:function(){return{touches:[],movements:[]}},_pointerPinchStart:function(e){var t=e.originalEvent,i=this.model,s=i.m_AreaBounds,n=$(this.element).offset(),a=this.eventParams||(this.eventParams=this._initEventParams()),r=(t.pageX||t.changedTouches[0].pageX)-n.left,n=(t.pageY||t.changedTouches[0].pageY)-n.top;this.model.selectionEnable&&(this.cancelEvent(e),t.preventDefault()),!i.enable3D&&"cartesianaxes"==i.AreaType&&"mouse"!=t.pointerType&&4!=t.pointerType&&i.zooming.enable&&i.zooming.enablePinching&&(t.touches||t.pointerId)?-1!=(i=e.target.id).indexOf("ResetZoom")?this.resetZoom(e):-1!=i.indexOf("panIcon")?this.startPan(e):-1!=i.indexOf("ZoomIcon")?this.startZoom(e):-1!=i.indexOf("ZoomOut")||-1!=i.indexOf("ZoomIn")?this.startZoomInOut(e):r>s.X&&r<s.X+s.Width&&n>s.Y&&n<s.Y+s.Height?(t.touches?a.touches=this._copyTouches(t.touches):this._addTouchPointer(a.touches,{pageX:r,pageY:n,pointerId:t.pointerId}),a.touches.length<2&&this.chartMouseDown(e)):this.chartMouseDown(e):this.chartMouseDown(e)},_removeInteractions:function(){$("[id*=_TrackSymbol]").remove(),this._removeTrackBall(),this._removeHighlight(),$("#"+this.svgObject.id+"_TrackToolTip").hide(),$("#"+this._id+"_tooltip").remove()},_pinchGestureMove:function(e){var t=e.originalEvent.changedTouches[0],i=e.originalEvent.touches,s=this.model,n=$(this.element).offset(),a=s.m_AreaBounds,r=t.pageX-n.left,n=t.pageY-n.top;this.eventParams=this.eventParams||this._initEventParams(s,t),!s.enable3D&&"cartesianaxes"==s.AreaType&&"mouse"!=t.pointerType&&4!=t.pointerType&&s.zooming.enable&&s.zooming.enablePinching&&i&&r>a.X&&r<a.X+a.Width&&n>a.Y&&n<a.Y+a.Height?(this._removeInteractions(),1<i.length?this._calculatePinchZoomFactor(this._calculateTouchDistance(this.eventParams.touches,i),s.zooming.type,e.target):this.doPan||this.panning?this._calculatePinchZoomPosition(e):this.chartMouseMove(e)):this.chartMouseMove(e)},_pointerPinchMove:function(e){var t=0,i=e.originalEvent,s=$(this.element).offset(),n=i.pageX-s.left,a=i.pageY-s.top,r=this.model,o=this.eventParams||this._initEventParams(r,i),l=o.touches,s=this.previousPointerMove,d=l.length,h=o.movements;if(null!=s&&s.pageX==i.pagex&&s.pageY==i.pageY&&s.pointerId==e.pointerId)return!1;if(!r.enable3D&&"cartesianaxes"==r.AreaType&&"mouse"!=i.pointerType&&4!=i.pointerType&&r.zooming.enable&&r.zooming.enablePinching){if(n>(r=r.m_AreaBounds).X&&n<r.X+r.Width&&a>r.Y&&a<r.Y+r.Height)if(this._addTouchPointer(l,{pageX:n,pageY:a,pointerId:i.pointerId}),l&&1<l.length){for(;t<d;t++)this._addTouchPointer(h,l[t],!1);this._addTouchPointer(h,{pageX:n,pageY:a,pointerId:i.pointerId},!0),h[0].pageX==l[0].pageX&&h[1].pageX==l[1].pageX&&h[0].pageY==l[0].pageY&&h[1].pageY==h[1].pageY||this._calculatePinchZoomFactor(this._calculateTouchDistance(l,h),this.model.zooming.type,e.target)}else this.doPan||this.panning?this._calculatePinchZoomPosition(e):this.chartMouseMove(e);else 0<l.length&&this._removeTouchPointer(l,e),0<h.length&&this._removeTouchPointer(h,e),this.chartMouseMove(e);this.previousPointerMove={pageX:n,pageY:a,pointerId:i.pointerId}}else this.chartMouseMove(e)},_pointerPinchEnd:function(e){var t=this.model,i=e.originalEvent,s=this.eventParams||(this.eventParams=this._initEventParams(t,i)),n=-1!=i.type.indexOf("leave")||-1!=i.type.indexOf("out")||-1!=i.type.indexOf("Out");!t.enable3D&&"cartesianaxes"==t.AreaType&&"mouse"!=i.pointerType&&4!=i.pointerType&&t.zooming.enable&&t.zooming.enablePinching&&(i.touches||i.pointerId)?(null!=this.continuePinching&&this.svgObject.removeChild(this.svgObject.firstChild),this.continuePinching=this.previousPanTouch=this.previousScale=null,i.touches?(this.eventParams=null,this.chartMouseUp(e),n&&this.chartMouseLeave(e)):(this._removeTouchPointer(s.touches,{pointerId:i.pointerId}),0<s.movements.length&&this._removeTouchPointer(s.movements,{pointerId:i.pointerId}),0==s.touches.length&&(this.chartMouseUp(e),n&&this.chartMouseLeave(e),this.eventParams=null))):(this.chartMouseUp(e),n&&this.chartMouseLeave(e))},_appendStyle:function(e){var t="#"+e+".e-canvas * {touch-action:none; -ms-touch-action:none}",i=document.head||document.body,e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(t)),i.appendChild(e)},bindEvents:function(){var e=jQuery.uaMatch(navigator.userAgent),t=ej.EjSvgRender.utils.browserInfo(),i=t.isMSPointerEnabled,s=t.pointerEnabled,n=i?s?"pointerdown":"MSPointerDown":"touchstart mousedown",a=i?s?"pointerup":"MSPointerUp":"touchend mouseup",r=i?s?"pointermove":"MSPointerMove":"touchmove mousemove",i=i?s?"pointerleave":"MSPointerOut":"touchleave mouseleave";this.model.browserInfo=t,1<window.navigator.maxTouchPoints&&window.PointerEvent||window.PointerEventsPolyfill?(this._on(this.element,"pointerup pointerleave",this._pointerPinchEnd),this._on(this.element,"pointerdown",this._pointerPinchStart),this._on(this.element,"pointermove",this._pointerPinchMove),this._appendStyle(this.element[0].id)):window.TouchEvent?(this._on(this.element,"touchstart",this._pointerPinchStart),this._on(this.element,"touchmove",this._pinchGestureMove),this._on(this.element,"touchend",this._pointerPinchEnd),this._on($(this.element),"mousedown",this.chartMouseDown),this._on($(this.element),"mousemove",this.chartMouseMove),this._on(this.element,"mouseleave",this.chartMouseLeave),this._on($(document),"mouseup",this.chartMouseUp),this._appendStyle(this.element[0].id)):window.navigator.msMaxTouchPoints&&window.navigator.msPointerEnabled?(this._on(this.element,"MSPointerUp",this._pointerPinchEnd),this._on(this.element,"mouseleave",this.chartMouseLeave),this._on(this.element,"MSPointerDown",this._pointerPinchStart),this._on(this.element,"MSPointerMove",this._pointerPinchMove),this._appendStyle(this.element[0].id)):(this._on(this.element,r,this.chartMouseMove),this._on(this.element,i,this.chartMouseLeave),this._on($(document),a,this.chartMouseUp),this._on($(this.element),n,this.chartMouseDown)),this._isSafari=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),1!=(this.isDevice()&&this._isSafari)&&this._on($(this.element),"click",this.chartMouseClick),this._on($(this.element),"contextmenu",this.chartRightClick),this._on($(this.element),"dblclick",this.chartMouseDoubleClick),(this.model.canResize||this.model.isResponsive)&&this.bindResizeEvents();n=this.model.zooming.enable||this.model.commonSeriesOptions.dragSettings.enable?"none":"pan-y";$(this.element).css({"ms-touch-action":n,"touch-action":n,"content-zooming":"none"}),$(this.element).css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"});s="mozilla"!=e.browser.toLowerCase()||s?"mousewheel":"DOMMouseScroll";this._on(this.element,s,this.chartMouseWheel)},calZoomFactors:function(e,t,i,s){var n,t=1==e?(n=1,0):s+(i-(n=ej.EjSvgRender.utils._minMax(1/e,0,1)))*t;return{zoomMFactor:n,zoomMPosition:t}},doMouseWheelZoom:function(e,t,i){if(1<=e){t=this.calZoomFactors(e,t,i.zoomFactor,i.zoomPosition);if(i.zoomPosition!=t.zoomMPosition||i.zoomFactor!=t.zoomMFactor)return this.zoomed=!0,i.zoomPosition=t.zoomMPosition,i.zoomFactor=1<t.zoomMPosition+t.zoomMFactor?1-t.zoomMPosition:t.zoomMFactor,!0}return!1},enableAnimation:function(){for(var e=0;e<this.model.series.length;e++)this.model.series[e].enableAnimation=this.serAnimation[e]},disableAnimation:function(){for(var e=0;e<this.model.series.length;e++)this.model.series[e].enableAnimation=!1;for(var t=0;t<this.model.indicators.length;t++)this.model.indicators[t].enableAnimation=!1},_removeTrackBall:function(){var e,t="#"+this.svgObject.id;$("#"+this.svgObject.id+"_trackSymbol").remove(),$(document).find("#measureTex").remove(),this.chartCross.visible&&(e=$(this.svgObject).find(t+"_AxisCrossToolTip"),this.svgRenderer._setAttr($(e),{visibility:"hidden"}),e=$(this.svgObject).find(t+"_CrosshairVertical"),this.svgRenderer._setAttr($(e),{d:"M 0 0"}),e=$(this.svgObject).find(t+"_CrosshairHorizontal"),this.svgRenderer._setAttr($(e),{d:"M 0 0"}),e=$(this.svgObject).find(t+"_TrackAxisToolTip"),this.svgRenderer._setAttr($(e),{visibility:"hidden"}),e=$(this.svgObject).find(t+"_Tracker"),this.svgRenderer._setAttr($(e),{d:"M 0 0"}),e=$(this.svgObject).find('[id*="_TrackToolTip"]'),this.svgRenderer._setAttr($(e),{visibility:"hidden"}),e=$(this.svgObject).find('[id*="_TrackToolTip"]').children(),this.svgRenderer._setAttr($(e),{visibility:"hidden"}),$(e).css("visibility","hidden"),e=$(this.svgObject).find('[id*="_trackSymbol_"]'),this.svgRenderer._setAttr($(e),{visibility:"hidden"}),$(document).find('[id*="_TrackToolTipTemplate_"]').attr("visibility","hidden"),$(document).find('[id*="_TrackToolTipTemplate_"]').css("display","none"),$(t+"_CrosshairVertical").css("display","none"),$(t+"_CrosshairHorizontal").css("display","none"),$("#"+this._id).find('[id*="canvas_AxisToolTipRect"]').css("visibility","hidden"),$("#"+this._id).find('[id*="canvas_Tracker"]').remove(),$("#"+this._id).find('[id*="canvas_trackSymbol"]').css("visibility","hidden"),$("#"+this._id).find('[id*="_gTooltip_"]').remove(),$("#secondCanvas").remove(),$(document).find('[id*="TrackGroupToolTipTemplate"]').remove(),$(document).find('[id*="_TrackToolTipTemplate_"]').remove(),$("#"+this._id).find('[id*="_trackball_grouping_tooltip"]').remove())},enableTrackBall:function(){this.model.crosshair.visible=this.chartCross.visible,this.model.crosshair.type=this.chartCross.mArea},disableTrackBall:function(){this.model.crosshair.visible=!1,this._removeTrackBall()},_enableZoomingButtons:function(){var e=this.svgObject.id;if("cartesianaxes"!=this.model.AreaType&&($("#"+e+"_ResetZoom").remove(),$("#"+e+"_PanBtn").remove(),$("#"+e+"_ZoomBtn").remove(),$("#"+e+"_ZoomInBtn").remove(),$("#"+e+"_ZoomOutBtn").remove()),"cartesianaxes"==this.model.AreaType){this._removeZoomkit();e=this.model.zooming.isReversed;this.toolbarItems||(this.toolbarItems=$.extend(!0,[],this.model.zooming.toolbarItems),this.toolbarItems.reverse());for(var t,i,s=(e?this:this.model.zooming).toolbarItems,n=s.length,a=n-1;0<=a;a--)switch(i=n-a,t=s[a]){case"reset":this.resetZoomButton(i);break;case"pan":this.panButton(i);break;case"zoom":case"zoomIn":case"zoomOut":this.zoomButton(i,t);break;default:--n}}},chartMouseWheel:function(e){if($("#"+this.svgObject.id+"_TrackToolTip").hide(),$(document).find('[id*="TrackGroupToolTipTemplate"]').remove(),$(document).find('[id*="_TrackToolTipTemplate_"]').remove(),$(this.svgObject).find('[id*="_trackSymbol_"]').remove(),this.model.zooming.enableMouseWheel&&"cartesianaxes"==this.model.AreaType&&!this.model.enable3D&&!this.vmlRendering&&ej.util.isNullOrUndefined(this.model.isLazyZooming)){for(var t,i=this.zoomed=!1,s="#"+this.svgObject.id,n=jQuery.uaMatch(navigator.userAgent),a=!!navigator.userAgent.match(/Trident\/7\./),r=e.originalEvent.wheelDelta,o="mozilla"!=n.browser.toLowerCase()||a?0<r/120?1:-1:0<-e.originalEvent.detail/3?1:-1,l=0;l<this.model._axes.length;l++){var d,h=this.model._axes[l];("vertical"!=h.orientation.toLowerCase()||"y"!=this.model.zooming.type.toLowerCase()&&"x,y"!=this.model.zooming.type.trim().toLowerCase())&&("horizontal"!=h.orientation.toLowerCase()||"x"!=this.model.zooming.type.toLowerCase()&&"x,y"!=this.model.zooming.type.trim().toLowerCase())||(d=Math.max(1/ej.EjSvgRender.utils._minMax(h.zoomFactor,0,1),1),d=Math.max(d+.25*o,1),i|=this.doMouseWheelZoom(d,.5,h)),1!=h.zoomFactor&&0!=h.zoomPosition&&(t=!0),this.resetZooming=1==h.zoomFactor&&0==h.zoomPosition}this._updateScroll(),this.disableAnimation(),this.disableTrackBall(),i&&(this.model.legendCollapsed=!1,this.zoomed=!0,this.redraw(!0)),this.model._chartAreaZoom=!0,this._enableZoomingButtons(),this.mouseWheelCoords={x:e.originalEvent.pageX,y:e.originalEvent.pageY},t||($(s+"_ResetZoom").remove(),$(s+"_PanBtn").remove(),$(s+"_ZoomBtn").remove(),$(s+"_ZoomInBtn").remove(),$(s+"_ZoomOutBtn").remove(),this.enableAnimation(),this.panning=!1);n=jQuery.uaMatch(navigator.userAgent);e.preventDefault&&"chrome"==n.browser&&this.model.zooming.enable&&e.preventDefault(),e.returnValue=!1}$(".tooltipDiv"+this._id).remove()},getAxisMultiLevelLabelsData:function(e){var t,i,s,n,a,r,e=this.calMousePosition(e),o=this.model.multiLevelLabelRegions.length;for(this.mousemoveX=e.X,this.mousemoveY=e.Y,r=0;r<o;r++)if(i=(t=this.model.multiLevelLabelRegions[r]).bounds.x,s=t.bounds.y,n=t.bounds.height,a=t.bounds.width,this.mousemoveX>=i&&this.mousemoveX<=i+a&&this.mousemoveY<=s+n&&this.mousemoveY>=s)return{location:{x:this.mousemoveX,y:this.mousemoveY},axis:this.model._axes[t.axisIndex],multiLevelLabel:t.multiLevelLabel}},getAxisLabelData:function(e){var t,i,s,n,a,r,o=this.calMousePosition(e),l=e.target.id,d=this.model._axes.length;if(this.mousemoveX=o.X,this.mousemoveY=o.Y,"cartesianaxes"==this.model.AreaType||"polaraxes"==this.model.AreaType)if(this.model.enable3D){if(0<=l.indexOf("horizontal")||0<=l.indexOf("vertical"))for(h=0;h<d;h++){r=this.model._axes[h].visibleLabels.length;for(c=0;c<r;c++)if(l==this.svgObject.id+this.model._axes[h].orientation+c)return{location:{x:this.mousemoveX,y:this.mousemoveY},index:c,axis:this.model._axes[h],text:this.model._axes[h].visibleLabels[c].Text}}}else for(var h=0;h<d;h++)if(r=this.model._axes[h].visibleLabels.length,this.model._axes[h].visible)for(var c=0;c<r;c++)if(t=this.model._axes[h].visibleLabels[c].region,!ej.util.isNullOrUndefined(t)&&(i=t.bounds.x,s=t.bounds.y,n=t.bounds.width,a=t.bounds.height,i=!(this.vmlRendering&&0<=l.indexOf("_YLabel_"))||this.model._axes[h].opposedPosition?i:i+n,this.mousemoveX>=i&&this.mousemoveX<=i+n&&(this.vmlRendering?this.mousemoveY<=s+a&&this.mousemoveY>=s:this.mousemoveY>=s-a&&this.mousemoveY<=s)))return{location:{x:this.mousemoveX,y:this.mousemoveY},index:c,axis:this.model._axes[h],text:t.labelText}},getLegendData:function(e){var t=this.calMousePosition(e),i=this.model.legend.isReversed;t.X=i&&($("#legend_"+this._id).find('[class*="e-vscrollbar"]').length||"scroll"==$("#legend_"+this._id)[0].style.overflowY)?t.X-18:t.X,t.X-=parseFloat($(this.element).css("padding-left")),t.Y-=parseFloat($(this.element).css("padding-top"));var s=this.model.legend._ejScroller,n=0,a=s?$("#legend_"+this._id).ejScroller("instance").model.scrollTop:$("#legend_"+this._id).scrollTop(),n=s?$("#legend_"+this._id).ejScroller("instance").model.scrollLeft:$("#legend_"+this._id).scrollLeft();i&&s&&(n=0==n?$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue:$("#legend_"+this._id).ejScroller("instance").model.scrollLeft==$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue?0:$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue-$("#legend_"+this._id).ejScroller("instance").model.scrollLeft),this.scrolltop=a||0,this.scrollleft=n||0,this.mousemoveX=t.X+n,this.mousemoveY=t.Y+a;var r,a=e.target.id,o=this.mousemoveX,l=this.mousemoveY,d=this._id;return!(!(!ej.util.isNullOrUndefined(a)&&this.svgRenderer._getAttrVal($(e.target).parents(":eq(1)"),"id")==this.svgObject.id+"_Legend"||this.model.enableCanvasRendering&&a=="legend_"+d+"_canvas"||this.vmlRendering)||($.each(this.model.legendRegion,function(e,t){o>=t.Bounds.LegendBound.X+t.Bounds.ItemBound.X&&o<=t.Bounds.LegendBound.X+t.Bounds.ItemBound.X+t.Bounds.ItemBound._Width&&(l>=t.Bounds.LegendBound.Y+t.Bounds.ItemBound.Y-t.Bounds.ItemBound.Height/4&&l<=t.Bounds.LegendBound.Y+t.Bounds.ItemBound.Y+t.Bounds.ItemBound.Height?(r=t,$("#legend_"+d+"_canvas").css("cursor","pointer")):$("#legend_"+d+"_canvas").css("cursor","default"))}),ej.util.isNullOrUndefined(r)))&&{legendItem:r,series:this.model._visibleSeries[r.LegendItem.SeriesIndex]}},get3DSeriesPoint:function(e){var t=this.mousemoveX,i=this.mousemoveY,s="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.X,n="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.Y,a="polaraxes"==this.model.AreaType?$(this.svgObject).width():this.model.m_AreaBounds.Width,r="polaraxes"==this.model.AreaType?$(this.svgObject).height():this.model.m_AreaBounds.Height;if(s<t&&t<s+a&&n<i&&i<n+r){var n=$(e.target)[0].nodeName;if(("path"==n||"shape"==n)&&1<$(e.target)[0].id.indexOf("Region")){r=$(e.target)[0].id.match(/(\d+)/g),n=parseInt(r[r.length-1]),e=parseInt(r[r.length-2]);r={Region:{}};r.Region.PointIndex=n,r.SeriesIndex=e;e={};return e.pointIndex=n,{region:r,pointData:e,location:{x:t,y:i}}}}},GetSeriesPoint:function(S){for(var T,R=this.mousemoveX,k=this.mousemoveY,e=(D=this).model.indicators,O=D.model._visibleSeries,t=0;t<e.length&&e[t].segment;t++)O=O.concat(e[t].segment);if(D.model.enable3D)return this.get3DSeriesPoint(S);var i="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.X,s="polaraxes"==this.model.AreaType?0:this.model.m_AreaBounds.Y,n="polaraxes"==this.model.AreaType?$(this.svgObject).width():this.model.m_AreaBounds.Width,a="polaraxes"==this.model.AreaType?$(this.svgObject).height():this.model.m_AreaBounds.Height;if("cartesianaxes"==this.model.AreaType||"polaraxes"==this.model.AreaType){if(i<R&&R<i+n&&s<k&&k<s+a&&$.each(this.model.chartRegions,function(e,t){if(ej.util.isNullOrUndefined(t.SeriesIndex)){j=D.model.chartRegions;var i;if(!t.isStripLine){for(var s=t.length,n=D.model.requireInvertedAxes?D.model.series[t[s-1].SeriesIndex]._xAxisName:D.model.series[t[s-1].SeriesIndex]._yAxisName,a=0;a<D.model._axes.length;a++)if(n==D.model._axes[a].name){i=D.model._axes[a];break}for(v=0;v<j.length;v++)for(x=0;x<j[v].length;x++){var r=[],o=j[v][x].region;o[0]&&r.push({x:o[0].X+i.x,y:o[0].Y+i.y}),o[1]&&r.push({x:o[1].X+i.x,y:o[1].Y+i.y}),o[2]&&r.push({x:o[2].X+i.x,y:o[2].Y+i.y}),o[3]&&r.push({x:o[3].X+i.x,y:o[3].Y+i.y});f={x:R,y:k};D.isPointInPolygon(r,f)&&(T=j[v][x])}}}else{var l=O[t.SeriesIndex];if("polaraxes"==D.model.AreaType&&"column"==l.drawType.toLowerCase()&&S.target||"rangecolumn"==l.drawType.toLowerCase())if(D.model.enableCanvasRendering){if("polar"==l.type.toLowerCase()){var d=t.Region.Bounds,h=-.5*Math.PI,c=d.innerRadius||d.DRadius,u=R-d.CenterX,p=k-d.CenterY,m=D.model._visibleSeries[t.SeriesIndex],g=m.startAngle,s=(m.endAngle,g?2*Math.PI*(D.model.itemCurrentXPos<0?1+D.model.itemCurrentXPos:D.model.itemCurrentXPos):0),m=(Math.atan2(p,u)-h-s)%(2*Math.PI);m<0&&0!=d.PointIndex&&(m=2*Math.PI+m);g=parseFloat(d.StartAngle.toFixed(14)),h=parseFloat(d.EndAngle.toFixed(14));h-=s,(g-=s)<=m&&m<=h&&(e=d.PointIndex,(I=Math.sqrt(Math.pow(Math.abs(u),2)+Math.pow(Math.abs(p),2)))<=d.Radius&&c<I&&(C={Region:{PointIndex:e},SeriesIndex:t.SeriesIndex,type:t.type},T=C))}else if("radar"==l.type.toLowerCase())if((d=t.Region.Bounds).Line1){o=d.Line1,L=d.Line2,A=d.Line3,E=d.Line4;var r=[{x:o.x,y:o.y},{x:L.x,y:L.y},{x:A.x,y:A.y}],f={x:R,y:k};if("column"==l.drawType.toLowerCase())for(var _=!1,v=-1,b=r.length,x=b-1;++v<b;x=v)(r[v].y<=f.y&&f.y<r[x].y||r[x].y<=f.y&&f.y<r[v].y)&&f.x<(r[x].x-r[v].x)*(f.y-r[v].y)/(r[x].y-r[v].y)+r[v].x&&(_=!_);else for(var a,y=[{x:o.x,y:o.y},{x:L.x,y:L.y},{x:A.x,y:A.y},{x:E.x,y:E.y}],v=0,_=!(x=2),w=0;w<y.length;w++)(y[v].y<=f.y&&f.y<y[x].y||y[x].y<=f.y&&f.y<y[v].y)&&f.x<(y[x].x-y[v].x)*(f.y-y[v].y)/(y[x].y-y[v].y)+y[v].x&&(_=!_),a=v,v=x,x=++a,2==w&&(x=0);_&&(C={Region:{PointIndex:e=d.PointIndex},SeriesIndex:t.SeriesIndex,type:t.type},T=C)}}else{var C=$(S.target)[0].nodeName;if(("path"==C||"shape"==C)&&$($(S.target).parent())[0].id==D.svgObject.id+"_SeriesGroup_"+t.SeriesIndex)return e=$(S.target)[0].id.match(/(\d+)/g),t={Region:{PointIndex:parseInt(e[e.length-1])},SeriesIndex:t.SeriesIndex,type:t.type},T=t,!1}else R>=t.Region.Bounds.X&&R<=t.Region.Bounds.X+t.Region.Bounds.Width&&k>t.Region.Bounds.Y&&k<t.Region.Bounds.Y+t.Region.Bounds.Height&&(T=t)}}),T)return{region:T,location:{x:R,y:k}}}else{var D,I,r=(D=this).model.chartRegions;if(!(0<r.length)||"pyramid"!=r[0].Series.type.toLowerCase()&&"funnel"!=r[0].Series.type.toLowerCase())return $.each(D.model.chartRegions,function(e,t){var i=-.5*Math.PI,s=t.SeriesData,n=t.Region,a="doughnut"==D.model._visibleSeries[t.SeriesIndex].type.toLowerCase()?s.DRadius:0,r=R-s.CenterX,o=k-s.CenterY,l=D.model._visibleSeries[t.SeriesIndex],d=(d=l.startAngle)<0?d+360:d,h=(h=l.endAngle)<0?h+360:h;if(l.endAngle-l.startAngle<0){var c=(h/=360)?2*Math.PI*(h<0?1+h:h):0;(g=(Math.atan2(o,r)-i-c)%(2*Math.PI))<0&&(g=2*Math.PI+g),f=[];for(var u=0;u<n.length;u++){var p=parseFloat(n[u].StartAngle.toFixed(14)),m=parseFloat(n[u].EndAngle.toFixed(14));if(p=p<0?2*Math.PI+p:p,m=m<0?2*Math.PI+m:m,p-=c,m-=c,p=parseFloat(p.toFixed(14)),m=parseFloat(m.toFixed(14)),0<=l.startAngle&&l.endAngle<=0&&(p=p<=0?2*Math.PI+p:p,m=m<0?2*Math.PI+m:m),g<=p&&m<=g){f.push(n[u]);break}}}else{var g,c=d?2*Math.PI*(D.model.itemCurrentXPos<0?1+D.model.itemCurrentXPos:D.model.itemCurrentXPos):0;(g=(Math.atan2(o,r)-i-c)%(2*Math.PI))<0&&(g=D.model._isPieOfPie?g:2*Math.PI+g),f=[];for(u=0;u<n.length;u++){p=parseFloat(n[u].StartAngle.toFixed(14)),m=parseFloat(n[u].EndAngle.toFixed(14));if(p=!(p<0)||D.model._isPieOfPie?p:2*Math.PI+p,m=m<0?2*Math.PI+m:m,p-=c,m-=c,p=parseFloat(p.toFixed(14)),m=parseFloat(m.toFixed(14)),l.startAngle<0&&(-1<l.endAngle||null==l.endAngle)&&(p=p<0?2*Math.PI+p:p,m=m<=0?2*Math.PI+m:m),g+2*Math.PI<m&&"pieofpie"==l.type&&(g+=2*Math.PI),p<=g&&g<=m){f.push(n[u]);break}}}0<f.length&&(l.explodeAll||l.explodeIndex==f[0].PointIndex?(d=R-f[0].StartX,i=k-f[0].StartY,0<f.length&&(I=Math.sqrt(Math.pow(Math.abs(d),2)+Math.pow(Math.abs(i),2)))<=s.Radius&&a<I&&(n.PointIndex=f[0].PointIndex,n.Index=f[0].Index,n.SeriesIndex=f[0].SeriesIndex,T={region:t,pointData:f,location:{x:R,y:k}})):(I=Math.sqrt(Math.pow(Math.abs(r),2)+Math.pow(Math.abs(o),2)))<=s.Radius&&a<I&&(n.PointIndex=f[0].PointIndex,n.Index=f[0].Index,n.SeriesIndex=f[0].SeriesIndex,T={region:t,pointData:f,location:{x:R,y:k}}))}),T;var a=$(S.target)[0].nodeName;if(("path"==a||"shape"==a)&&$($(S.target).parent())[0].id==D.svgObject.id+"_SeriesGroup_"+r[0].SeriesIndex){var j=D.model.chartRegions[0],a=$(S.target)[0].id.match(/(\d+)/g);return a=parseInt(a[a.length-1]),j.Region.PointIndex=a,(f={}).pointIndex=a,T={region:j,pointData:f,location:{x:R,y:k}}}j=r[0];for(var o,L,A,E,l,d=this.pyrX,h=this.pyrY,f={},t=0;t<j.Region.length;t++){o=j.Region[t].Line1,L=j.Region[t].Line2,A=j.Region[t].Line3,E=j.Region[t].Line4,l="pyramid"==r[0].Series.type.toLowerCase()?[{x:o.x+d,y:o.y+h},{x:L.x+d,y:L.y+h},{x:A.x+d,y:A.y+h},{x:E.x+d,y:E.y+h}]:(l=j.Region[t].Line5,c=j.Region[t].Line6,[{x:o.x+d,y:o.y+h},{x:L.x+d,y:L.y+h},{x:A.x+d,y:A.y+h},{x:E.x+d,y:E.y+h},{x:l.x+d,y:l.y+h},{x:c.x+d,y:c.y+h}]);var c={x:R,y:k};if(this.isPointInPolygon(l,c))return f.pointIndex=j.Region[t].PointIndex,j.Region.PointIndex=f.pointIndex,T={region:j,pointData:f,location:{x:R,y:k}}}}},isPointInPolygon:function(e,t){for(var i=!1,s=-1,n=e.length,a=n-1;++s<n;a=s)(e[s].y<=t.y&&t.y<e[a].y||e[a].y<=t.y&&t.y<e[s].y)&&t.x<(e[a].x-e[s].x)*(t.y-e[s].y)/(e[a].y-e[s].y)+e[s].x&&(i=!i);return i},mousePosition:function(e){return!ej.util.isNullOrUndefined(e.pageX)&&0<e.pageX?{x:e.pageX,y:e.pageY}:e.originalEvent&&!ej.util.isNullOrUndefined(e.originalEvent.pageX)&&0<e.originalEvent.pageX?{x:e.originalEvent.pageX,y:e.originalEvent.pageY}:e.originalEvent&&null!=e.originalEvent.changedTouches?!ej.util.isNullOrUndefined(e.originalEvent.changedTouches[0].pageX)&&0<e.originalEvent.changedTouches[0].pageX?{x:e.originalEvent.changedTouches[0].pageX,y:e.originalEvent.changedTouches[0].pageY}:void 0:{x:0,y:0}},calMousePosition:function(e){var t=jQuery.uaMatch(navigator.userAgent),i=this.mousePosition(e);e.pageX=i.x,e.pageY=i.y;t.browser.toLowerCase();return{X:e.pageX-$(this.svgObject).offset().left,Y:e.pageY-$(this.svgObject).offset().top}},calTouchPosition:function(e){var t,i,s,n=jQuery.uaMatch(navigator.userAgent);return"mozilla"==n.browser.toLowerCase()||"webkit"==n.browser.toLowerCase()?(t=(s=e.originalEvent.touches[0]).pageX-$(this.svgObject).parent().offset().left,i=s.pageY-$(this.svgObject).parent().offset().top,this.leftPadding=$(this.svgObject).offset().left,this.grabPadding=0):(i="msie"==n.browser.toLowerCase()?(t=e.originalEvent.pageX-$(this.svgObject).offset().left,e.originalEvent.pageY-$(this.svgObject).offset().top):(t=(s=e.originalEvent.touches[0]).pageX-$(this.svgObject).offset().left,s.pageY-$(this.svgObject).offset().top),this.leftPadding=$(this.svgObject).offset().left),{X:t,Y:i}},cancelEvent:function(e){return e.stopPropagation(),"chrome"==jQuery.uaMatch(navigator.userAgent).browser&&(this.model.zooming.enable||this.model.crosshair.visible)&&e.preventDefault(),this.model.enable3D&&(e.preventDefault(),e.stopPropagation()),e.returnValue=!1,!(e.cancelBubble=!0)},resetZoom:function(){var e=this,t="#"+this.svgObject.id;$(".tooltipDiv"+this._id).remove(),$(".zoom"+this._id).remove(),e.zoomed&&($.each(this.model._axes,function(e,t){t.zoomed=!1,t.zoomFactor=1,t.zoomPosition=0}),e.model.primaryXAxis.zoomFactor=1,e.model.primaryYAxis.zoomFactor=1,e.model.primaryXAxis.zoomPosition=0,e.model.primaryYAxis.zoomPosition=0,$("#"+e._id+"_canvas").css({cursor:"default"}),$(t+"_ResetZoom").remove(),$(t+"_PanBtn").remove(),$(t+"_ZoomBtn").remove(),$(t+"_ZoomInBtn").remove(),$(t+"_ZoomOutBtn").remove(),e.zoomed=!1,e.zooming=!1,e.panning=!1,e.model._chartAreaZoom=!1,e.resetZooming=!0,e.enableTrackBall(),e.redraw(!0),e.enableAnimation(),e.svgRenderer._setAttr($(e.svgObject).find(t+"_XAxis,"+t+"_ChartArea,"+t+"_YAxis,"+t+"_SeriesCollection"),{cursor:"default"}))},startZoomInOut:function(e){var t=-1<e.target.id.indexOf("ZoomIn")?"zoomIn":"zoomOut";this.drag=!1,this.zoomed=!0;for(var i,s,n,a=this.model.zooming.type.toLowerCase(),r="zoomIn"==t?.2:-.2,o=!0,l=0;l<this.model._axes.length;l++)s=(i=this.model._axes[l]).zoomFactor,n=i.zoomPosition,"horizontal"==i.orientation.toLowerCase()?(i.zoomFactor="y"!=a?s-r:i.zoomFactor,i.zoomPosition="y"!=a?n+r:i.zoomPosition):(i.zoomFactor="x"!=a?s-r:i.zoomFactor,i.zoomPosition="x"!=a?n+r:i.zoomPosition),parseFloat(i.zoomFactor.toFixed(3))<=.001&&(i.zoomFactor=s,i.zoomPosition=n),1<=parseFloat(i.zoomFactor.toFixed(3))&&(i.zoomFactor=1,i.zoomPosition=0),o=o&&1==i.zoomFactor,this.resetZooming=1==i.zoomFactor&&0==i.zoomPosition;e=this._getZoomedData(this);t=$.extend({},ej.EjSvgRender.commonChartEventArgs);t.data={},t.data.series=e,this._trigger("zoomed",t),this._updateScroll(),this.redraw(!0),o?(this._removeZoomkit(),this.resetZooming=!0,this.zoomed=this.panning=!1,this.model._chartAreaZoom=!1):this._enableZoomingButtons()},startZoom:function(){var e="#"+this.svgObject.id;$(".tooltipDiv"+this._id).remove();var t=0<=this.model.theme.toLowerCase().indexOf("dark")?"#000000":" #FFFFFF";this.svgRenderer._setAttr($(e+"_ZoomBtn"),{selected:"true"}),this.svgRenderer._setAttr($(e+"_ZoomPath"),{fill:"#14B9FF"}),this.svgRenderer._setAttr($(e+"_ZoomIcon"),{fill:"#FFFFFF"}),this.svgRenderer._setAttr($(e+"_PanPath"),{fill:"#B7B7B7"}),this.svgRenderer._setAttr($(e+"_panIcon"),{fill:t}),$(e+"_ZoomBtn").css({"border-color":"#14B9FF","background-color":"#14B9FF"}),$(e+"_PanBtn").css({"border-color":"#B7B7B7","background-color":"#B7B7B7"}),$("#"+this._id+"_canvas").css({cursor:"default"}),this._cursorToDefault(),this.panning=!1,this.enableTrackBall()},startPan:function(){var e="#"+this.svgObject.id;$(".tooltipDiv"+this._id).remove();var t=0<=this.model.theme.toLowerCase().indexOf("dark")?"#000000":" #FFFFFF";this.svgRenderer._setAttr($(e+"_ZoomBtn"),{selected:"false"}),this.svgRenderer._setAttr($(e+"_PanBtn"),{selected:"true"}),this.svgRenderer._setAttr($(e+"_ZoomPath"),{fill:"#B7B7B7"}),this.svgRenderer._setAttr($(e+"_ZoomIcon"),{fill:t}),this.svgRenderer._setAttr($(e+"_PanPath"),{fill:"#14B9FF"}),this.svgRenderer._setAttr($(e+"_panIcon"),{fill:"#FFFFFF"}),$(e+"_ZoomBtn").css({"border-color":"#B7B7B7","background-color":"#B7B7B7"}),$(e+"_PanBtn").css({"border-color":"#14B9FF","background-color":"#14B9FF"}),$("#"+this._id+"_canvas").css({cursor:"pointer"}),this._cursorToPointer(),this.panning=!0,this.disableTrackBall()},zoomButton:function(e,t){var i="zoom"==t?"_Zoom":"zoomIn"==t?"_ZoomIn":"_ZoomOut",s=5*e+5,n=0,a=0,r=this.model.m_AreaBounds.X+(this.model.m_AreaBounds.Width-32*e-s),e=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height+(this.model.elementSpacing-this.model.m_AreaBounds.Height),s=0<=this.model.theme.toLowerCase().indexOf("dark")?"#000000":" #FFFFFF",s={id:this.svgObject.id+i+"Path",d:"M32,27c0,2.75-2.25,5-5,5H5c-2.75,0-5-2.25-5-5V5c0-2.75,2.25-5,5-5h22c2.75,0,5,2.25,5,5V27z",fill:this.panning||"zoomIn"==t||"zoomOut"==t?"#b7b7b7":"#14B9FF",zoomId:this._id+i+"Btn",width:26,height:26,left:r+n,top:e+a,iconColor:s};ej.EjCanvasRender.prototype.zoomButton(s,t,this),"zoom"==t?this._on($("#"+this.svgObject.id+i+"Btn"),"touchstart click",this.startZoom):this._on($("#"+this.svgObject.id+i+"Btn"),"touchstart click",this.startZoomInOut)},panButton:function(e){var t=5*e+5,i=0,s=0,n=this.model.m_AreaBounds.X+(this.model.m_AreaBounds.Width-32*e-t),e=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height+(this.model.elementSpacing-this.model.m_AreaBounds.Height),t=0<=this.model.theme.toLowerCase().indexOf("dark")?"#000000":" #FFFFFF",t={id:this.svgObject.id+"_PanPath",d:"M 32 27 c 0 2.75 -2.25 5 -5 5 H 5 c -2.75 0 -5 -2.25 -5 -5 V 5 c 0 -2.75 2.25 -5 5 -5 h 22 c 2.75 0 5 2.25 5 5 V 27 Z",fill:this.panning?"#14B9FF":"#b7b7b7",panId:this._id+"_PanBtn",width:26,height:26,left:n+i,top:e+s,iconColor:t};ej.EjCanvasRender.prototype.panButton(t,this),this._on($("#"+this.svgObject.id+"_PanBtn"),"touchstart click",this.startPan)},resetZoomButton:function(e){var t=5*e+5,i=0,s=0,n=this.model.m_AreaBounds.X+(this.model.m_AreaBounds.Width-(32*e+t)),e=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height+(this.model.elementSpacing-this.model.m_AreaBounds.Height),t=0<=this.model.theme.toLowerCase().indexOf("dark")?"#000000":" #FFFFFF",t={id:this.svgObject.id+"_ResetZoomPath",d:"M 32 27 c 0 2.75 -2.25 5 -5 5 H 5 c -2.75 0 -5 -2.25 -5 -5 V 5 c 0 -2.75 2.25 -5 5 -5 h 22 c 2.75 0 5 2.25 5 5 V 27 Z",fill:"#b7b7b7",resetZoomId:this._id+"_ResetZoom",width:26,height:26,left:n+i,top:e+s,iconColor:t};ej.EjCanvasRender.prototype.resetZoom(t,this);t=(window.TouchEvent?"touchstart":window.PointerEvent?"pointerdown":window.MSPointerEvent?"MSPointerDown":"click")+" click";this._on($("#"+this.svgObject.id+"_ResetZoom"),t,this.resetZoom)},doZoom:function(e,t,i){var s,n,a,r,o=this;this.model._chartAreaZoom=!0,this.scrollDraw=!0,$(".tooltipDiv"+this._id).remove(),r=o.model.enableCanvasRendering?(s=$("#"+this.svgObject.id+"_ZoomArea")[0].getClientRects()[0],n=$("#"+this.svgObject.id)[0].getClientRects()[0],a=s.left-n.left-$(document).scrollLeft(),s.top-n.top-$(document).scrollTop()):(a=parseFloat(o.svgRenderer._getAttrVal($(e),"x")),parseFloat(o.svgRenderer._getAttrVal($(e),"y"))),$("#"+this.svgObject.id+"_ZoomArea").remove(),this.drag=!1,this.zoomed=!0;for(var l=0;l<this.model._axes.length;l++){var d=this.model._axes[l],h=d.zoomFactor,c=d.zoomPosition;"horizontal"==d.orientation.toLowerCase()?(d.zoomFactor="y"!=o.model.zooming.type.toLowerCase()?h*(t/o.model.m_AreaBounds.Width):d.zoomFactor,d.zoomPosition="y"!=o.model.zooming.type.toLowerCase()?c+Math.abs((a-o.model.m_AreaBounds.X)/o.model.m_AreaBounds.Width)*h:d.zoomPosition):(d.zoomFactor="x"!=o.model.zooming.type.toLowerCase()?h*i/o.model.m_AreaBounds.Height:d.zoomFactor,d.zoomPosition="x"!=o.model.zooming.type.toLowerCase()?c+(1-Math.abs((i+(r-o.model.m_AreaBounds.Y))/o.model.m_AreaBounds.Height))*h:d.zoomPosition)}n=this._getZoomedData(o);e=$.extend({},ej.EjSvgRender.commonChartEventArgs);e.data={},e.data.series=n,this._trigger("zoomed",e),this.disableAnimation(),this.model.legendCollapsed=!1,this.redraw(!0),this._enableZoomingButtons()},_getZoomedData:function(e){for(var t,i,s,n,a,r=this.model._visibleSeries,o=r.length,l=[],d=[],h=0;h<o;h++){if("visible"==r[h].visibility){a=(t=r[h].points).length,i=r[h].type.toLowerCase(),(new ej.axisTypes[r[h].xAxis._valueType.toLowerCase()])._calculateVisibleRange(r[h].xAxis,e),(new ej.axisTypes[r[h].yAxis._valueType.toLowerCase()])._calculateVisibleRange(r[h].yAxis,e),s=r[h].xAxis.visibleRange,n=r[h].yAxis.visibleRange;for(var c=0;c<a;c++)s.min<=t[c].xValue&&s.max>=t[c].xValue&&n.min<=t[c].y&&n.max>=t[c].y&&(r[h]._hiloTypes?"rangearea"==i||"rangecolumn"==i||"waterfall"==i||"hilo"==i?l.push({XValue:t[c].x,High:t[c].high,Low:t[c].low}):l.push({XValue:t[c].x,High:t[c].high,Low:t[c].low,Open:t[c].open,Close:t[c].close}):l.push({XValue:t[c].x,YValue:t[c].y}))}0!=l.length&&d.push({selectedData:l}),l=[]}return d},_cursorToDefault:function(){var e="#"+this.svgObject.id;this.svgRenderer._setAttr($(this.svgObject).find(e+"_XAxis,"+e+"_ChartArea,"+e+"_YAxis,"+e+"_SeriesCollection,"+e+"_StriplineBehind,"+e+"_StriplineOver"),{cursor:"default"})},_cursorToPointer:function(){var e="#"+this.svgObject.id;this.svgRenderer._setAttr($(this.svgObject).find(e+"_XAxis,"+e+"_ChartArea,"+e+"_YAxis,"+e+"_SeriesCollection,"+e+"_StriplineBehind,"+e+"_StriplineOver"),{cursor:"pointer"})},removeMultiRect:function(){$(this.parentgEle).empty(),this.model.selectedDataCollection=[]},multiSelectDataCalculation:function(){for(var e,t,i,s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v=[],b=this.selectedRectIndex,x=this.oldRectX[b],y=this.oldRectY[b],w=this.oldRectWidth[b],C=this.oldRectHeight[b],S=this.model.series,T=S.length,R=this.multiAxis,k=R.length,O=this.multiSelectType,D=(this.model.AreaType.toLowerCase(),0);D<T;D++){c=(_=S[D]).xAxis.visibleRange,u=_.yAxis.visibleRange;var I=R.some(function(e){return e.name.toLowerCase()==_._xAxisName.toLowerCase()}),j=R.some(function(e){return e.name.toLowerCase()==_._yAxisName.toLowerCase()}),L=_.selectionSettings;if(I&&j&&"visible"==_.visibility.toLowerCase()){for(var A=0;A<k;A++)"horizontal"==(e=R[A]).orientation.toLowerCase()?(this.selectFactor="y"!=L.rangeType.toLowerCase()?w/this.multiAxis[A].width*1:1,this.selectPosition="y"!=L.rangeType.toLowerCase()?+Math.abs((x-this.multiAxis[A].x)/this.multiAxis[A].width)+0:0):(this.selectFactor="x"!=L.rangeType.toLowerCase()?+C/this.multiAxis[A].height:1,this.selectPosition="x"!=L.rangeType.toLowerCase()?1-Math.abs((C+(y-this.multiAxis[A].y))/this.multiAxis[A].height):0),parseFloat(1..toFixed(3))<=.001&&(this.selectFactor=1,this.selectPosition=0),e.visibleRange=$.extend(!0,{},e.actualRange),(this.selectFactor<1||0<this.selectPosition)&&(o="logarithmic"==e.valueType?e.visibleRange:e.actualRange,this.selectFactor=1<this.selectFactor?1:this.selectFactor<0?0:this.selectFactor,this.selectPosition=this.selectPosition<0?0:1<this.selectPosition?1:this.selectPosition,d=e.isInversed?(l=e.actualRange.max-this.selectPosition*e.actualRange.delta)-this.selectFactor*e.actualRange.delta:(l=e.actualRange.min+this.selectPosition*e.actualRange.delta)+this.selectFactor*e.actualRange.delta,l<o.min&&(d+=o.min-l,l=o.min),d>o.max&&(l-=d-o.max,d=o.max),"logarithmic"==e.valueType&&(l=Math.pow(10,l),d=Math.pow(10,d)),e.visibleRange.min=Math.min(l,d),e.visibleRange.max=Math.max(l,d));if(a=_._visiblePoints,r=_.type.toLowerCase(),f=_.isTransposed,t=_.xAxis.visibleRange.min,i=_.xAxis.visibleRange.max,s=_.yAxis.visibleRange.min,n=_.yAxis.visibleRange.max,ej.util.isNullOrUndefined(v)&&(v=[]),_.selectionSettings.enable)switch(O){case"x":for(A=0;A<a.length;A++)a[A].seriesIndex=D,h=a[A].isEmpty,p=a[A].xValue,m=a[A].y,_.xAxis.isInversed||_.yAxis.isInversed?0<=r.indexOf("bar")?0<=r.indexOf("stacking")?(g=_.stackedValue.EndValues[A],!h&&g<=n&&s<=g&&v.push(a[A])):("waterfall"==r&&!h&&n>=a[A].YValues[0]&&s<=a[A].YValues[0]||!h&&m<=n&&s<=m)&&v.push(a[A]):!h&&p<=i&&t<=p&&v.push(a[A]):f&&0<=r.indexOf("bar")?!h&&t<=p&&p<=i&&v.push(a[A]):0<=r.indexOf("bar")||_.isTransposed&&!(0<=r.indexOf("bar"))?0<=r.indexOf("stacking")?(g=_.stackedValue.EndValues[A],!h&&s<=g&&g<=n&&v.push(a[A])):("waterfall"==r&&!h&&s<=a[A].YValues[0]&&n>=a[A].YValues[0]||!h&&s<=m&&m<=n)&&v.push(a[A]):!h&&Math.round(t)<=p&&p<=i&&v.push(a[A]);break;case"y":for(A=0;A<a.length;A++)a[A].seriesIndex=D,h=a[A].isEmpty,p=a[A].xValue,m=a[A].y,_.xAxis.isInversed||_.yAxis.isInversed?0<=r.indexOf("bar")?!h&&p<=i&&t<=p&&v.push(a[A]):0<=r.indexOf("stacking")?(g=_.stackedValue.EndValues[A],!h&&s<=g&&g<=n&&v.push(a[A])):("waterfall"==r&&!h&&n>=a[A].YValues[0]&&s<=a[A].YValues[0]||!h&&m<=n&&s<=m)&&v.push(a[A]):!(f&&0<=r.indexOf("bar"))&&(0<=r.indexOf("bar")||_.isTransposed&&!(0<=r.indexOf("bar")))?!h&&t<=p&&p<=i&&v.push(a[A]):0<=r.indexOf("stacking")?(g=_.stackedValue.EndValues[A],!h&&s<=g&&g<=n&&v.push(a[A])):("waterfall"==r&&!h&&s<=a[A].YValues[0]&&n>=a[A].YValues[0]||!h&&s<=m&&m<=n)&&v.push(a[A]);break;case"xy":for(A=0;A<a.length;A++)a[A].seriesIndex=D,h=a[A].isEmpty,p=a[A].xValue,m=a[A].y,0<=r.indexOf("stacking")?(g=_.stackedValue.EndValues[A],!h&&p<=i&&t<=p&&s<=g&&g<=n&&v.push(a[A])):("waterfall"==r&&!h&&p<=i&&t<=p&&s<=a[A].YValues[0]&&n>=a[A].YValues[0]||!h&&p<=i&&Math.round(t)<=p&&s<=m&&m<=n)&&v.push(a[A])}}_.xAxis.visibleRange=c,_.yAxis.visibleRange=u}b=this.currentIndex;!ej.util.isNullOrUndefined(this.model.selectedDataCollection)&&0!=$("#"+this.svgObject.id+"_rectSelectionGroup").length||(this.model.selectedDataCollection=[]),this.removeRect?this.model.selectedDataCollection.splice(b,1):this.rectPan||this.resize?(this.model.selectedDataCollection[b]=0,this.model.selectedDataCollection[b]=v):this.model.selectedDataCollection[this.model.selectedDataCollection.length]=v;b=$.extend({},ej.EjSvgRender.commonChartEventArgs);b.data={},b.data.selectedData=v,b.data.selectedDataCollection=this.model.selectedDataCollection,this._trigger("rangeSelected",b)},multiSelectMouseUp:function(e){if(this._isMultiSelect&&"range"==this.multiSelectMode){var t,i,s,n=this.svgObject.id,a=this.selectedRectIndex,r="#"+n+"_selectRect",o=parseInt($(r+a).attr("width")),l=parseInt($(r+a).attr("height")),d=parseInt($(r+a).attr("x")),h=parseInt($(r+a).attr("y"));if((this.multiSelectDraw||!this.removeRect||!this.resize||!this.rectPan)&&0<o&&0<l){var c={id:n+"_resize_rightRect"+a,x:d+o-5,y:h+10,width:10,height:0<l-20?l-20:0,fill:"transparent",stroke:"transparent","stroke-width":2,cursor:"e-resize"};this.svgRenderer.drawRect(c,this.gEle);c={id:n+"_resize_bottomRect"+a,x:d,y:h+l-5,width:0<o-10?o-10:0,height:10,fill:"transparent",stroke:"transparent","stroke-width":2,cursor:"s-resize"};this.svgRenderer.drawRect(c,this.gEle);c={id:n+"_resize_leftRect"+a,x:d-5,y:h,width:10,height:l,fill:"transparent",stroke:"transparent","stroke-width":2,cursor:"w-resize"};this.svgRenderer.drawRect(c,this.gEle);c={id:n+"_resize_topRect"+a,x:d,y:h-5,width:0<o-10?o-10:0,height:10,fill:"transparent",stroke:"transparent","stroke-width":2,cursor:"n-resize"};this.svgRenderer.drawRect(c,this.gEle);c={id:n+"_resize_bottomRightCornerCircle"+a,cx:d+o,cy:h+l,r:10,fill:"transparent",stroke:"transparent","stroke-width":2,cursor:"se-resize"};this.svgRenderer.drawCircle(c,this.gEle);c={id:n+"_closeTopRightCornerCircle"+a,cx:d+o,cy:h,r:10,fill:"white",stroke:"#2988d6","stroke-width":2,cursor:"pointer"};this.svgRenderer.drawCircle(c,this.gEle);c={id:n+"_closePath"+a,x1:d+o-4,y1:h-4,x2:d+o+4,y2:h+4,stroke:"#2988d6","stroke-width":2,cursor:"pointer"};this.svgRenderer.drawLine(c,this.gEle);c={id:n+"_closePathOpposite"+a,x1:d+o+4,y1:h-4,x2:d+o-4,y2:h+4,stroke:"#2988d6","stroke-width":2,cursor:"pointer"};this.svgRenderer.drawLine(c,this.gEle),t=[16,10,4,10,4,4],i=[4,4,4,10,10,16],s=["a","b","c","d","e","f"];for(var u=0;u<6;u++){var p={id:n+"_gripCircle_"+s[u]+a,cx:d+o-t[u],cy:h+l-i[u],r:.4,stroke:"#5B5B5B","stroke-width":2};this.svgRenderer.drawCircle(p,this.gripCollection)}null!=this.gripCollection&&$(this.gripCollection).appendTo(this.gEle),$("#"+n+"_gripCollection"+a).css({visibility:"hidden"})}ej.util.isNullOrUndefined(this.oldRectX)&&(this.oldRectX=[],this.oldRectY=[],this.oldRectWidth=[],this.oldRectHeight=[],this.oldReRightRectX=[],this.oldReTopRectY=[],this.oldReBottomRectY=[]),this.oldRectX[a]=parseInt($(r+a).attr("x")),this.oldRectY[a]=parseInt($(r+a).attr("y")),this.oldRectWidth[a]=parseInt($(r+a).attr("width")),this.oldRectHeight[a]=parseInt($(r+a).attr("height")),this.oldReRightRectX[a]=parseInt($("#"+n+"_resize_rightRect"+a).attr("x")),this.oldReTopRectY[a]=parseInt($("#"+n+"_resize_topRect"+a).attr("y")),this.oldReBottomRectY[a]=parseInt($("#"+n+"_resize_bottomRect"+a).attr("y")),this.oldMultiSelectType=this.multiSelectType,(this.resize||this.rectPan)&&(this.resize&&$("#"+this.svgObject.id+"_gripCollection"+a).attr({transform:""}),$("#"+n+"_closeTopRightCornerCircle"+a).css({display:"inline"}),$("#"+n+"_closePath"+a).css({display:"inline"}),$("#"+n+"_closePathOpposite"+a).css({display:"inline"}),$("#"+n+"_resize_rightRect"+a).css({cursor:"e-resize"}),$("#"+n+"_resize_leftRect"+a).css({cursor:"w-resize"}),$("#"+n+"_resize_bottomRect"+a).css({cursor:"s-resize"}),$("#"+n+"_resize_topRect"+a).css({cursor:"n-resize"})),this.drag=!1,this.removeRect&&($("#"+n+"_selectedRectGroup"+a).remove(),this.parentgEle.childNodes.length<=0&&$(this.parentgEle).remove()),(this.multiSelectDraw||this.removeRect||this.resize||this.rectPan)&&0<o&&0<l&&(this.multiSelectDraw=!1,this.multiSelectDataCalculation(e)),this.resize&&(this.resize=!1),this.rectPan&&(this.rectPan=!1),this.removeRect=!1,this.enableTrackBall()}},chartMouseUp:function(e){this.isTouch(e)&&(this.model.touchCross=!1,this.chartMouseUpTouch(e)),!this.currentPageX&&this.panning&&(t=this.calMousePosition(e),this.currentPageX=t.X,this.currentPageY=t.Y);var t,i,s,n,a=this,r=this.model;this.mousedownPointX=this.mousedownPointY=null,$("[id*=_PreviewSeries]").remove(),$("[id*=_Marker]").remove(),a.dragPoint&&(i=this.dragIndex.seriesIndex,l=r._visibleSeries[i],this.model.enableCanvasRendering||this.gPreviewSeriesGroupEle&&($(this.svgObject).find("#"+this.svgObject.id+"_PreviewSeriesGroup_"+i).remove(),0<this.gPreviewSeriesGroupEle.childNodes.length&&this.gPreviewSeriesGroupEle.removeChild(this.gPreviewSeriesGroupEle.childNodes[0])),this.dragPoint=l.dragPoint=!1,n=(s=this._getDraggedPoint(l,this.mousemoveX,this.mousemoveY)).X,o=s.Y,t=l.data.seriesIndex,i=l.data.pointIndex,s={X:this.commonDragEventArgs.data.oldValue.X,Y:this.commonDragEventArgs.data.oldValue.Y},n={X:n,Y:o},(o=$.extend({},this.commonDragEventArgs)).data={series:l,seriesIndex:t,pointIndex:i,oldValue:s,newValue:n},this._trigger("dragEnd",o),a.commonDragEventArgs=o,a._changeDraggingPoints(l,i,o.data.newValue.X,o.data.newValue.Y),l.region=null,this.redraw()),"cartesianaxes"!=this.multiSelectAreaType||r.zooming.enable||r.enableCanvasRendering||this.multiSelectMouseUp(e);var o,l,a=this;r.zooming.enable&&"cartesianaxes"==r.AreaType&&((o=$("#"+this.svgObject.id+"_ZoomArea"))[0]&&(p=r.enableCanvasRendering?(u=(l=o[0].getClientRects()[0]).width,l.height):(p=$(o),u=parseFloat(this.svgRenderer._getAttrVal(p,"width")),parseFloat(this.svgRenderer._getAttrVal(p,"height")))),0<u&&0<p?a.doZoom(o,u,p):this.drag=!1,a.panning||this.enableTrackBall());var d,h,c,u=this.svgObject.id,p=ej.util.isNullOrUndefined(e.target.parentNode)?"":e.target.parentNode.id;p!=u+"_ResetZoom"&&p!=u+"_ZoomBtn"&&e.target.id!=u+"_ResetZoom"&&e.target.id!=u+"_ZoomBtn"||(this.panning=!1,this.model._chartAreaZoom=!1),(ej.isTouchDevice()||r.zooming.enableDeferredZoom)&&this.panning&&this.doPan&&"cartesianaxes"==r.AreaType&&(c={x:this.oPreviousCoords.x-this.currentPageX,y:this.oPreviousCoords.y-this.currentPageY},this.oPreviousCoords={x:this.currentPageX,y:this.currentPageY},$.each(r._axes,function(e,t){var i=Math.max(1/ej.EjSvgRender.utils._minMax(t.zoomFactor,0,1),1);a.translate(t,c.x,c.y,i)}),this.model.legendCollapsed=!1,d=r=$.extend({},ej.EjSvgRender.commonChartEventArgs),h=this,r.data={model:this.model},this._trigger("panStart",r),window.setTimeout(function(){h.redraw(!0,!0,e.target),h._cursorToPointer(),h._enableZoomingButtons(),(d=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={model:h.model},h._trigger("panEnd",d)},10)),this.doPan&&(this.doPan=!1),this.rotateActivate=!1},multiSelectMouseDown:function(evt){this.multiSelectAreaType=this.model.AreaType.toLowerCase();var model=this.model,chartX=model.m_AreaBounds.X,chartWidth=model.m_AreaBounds.Width,chartY=model.m_AreaBounds.Y,chartHeight=model.m_AreaBounds.Height,mouseDownCords=this.calMousePosition(evt);if("cartesianaxes"==this.multiSelectAreaType&&!model.zooming.enable&&!model.enableCanvasRendering&&mouseDownCords.X>=chartX&&mouseDownCords.X<chartX+chartWidth&&mouseDownCords.Y<chartY+chartHeight&&mouseDownCords.Y>=chartY){var seriesCollection=this.model.series,seriesCollectionLength=seriesCollection.length,id,mouseDownCords,matchStr,containerSvg=this.svgObject.id,selectMode=seriesCollection.some(function(e){return"range"==e.selectionSettings.mode.toLowerCase()});this._isMultiSelect=seriesCollection.some(function(e){return 1==e.selectionSettings.enable&&"range"==e.selectionSettings.mode.toLowerCase()}),selectMode&&(this.multiSelectMode="range");for(var i=0;i<seriesCollectionLength;i++)1==seriesCollection[i].selectionSettings.enable&&"range"==seriesCollection[i].selectionSettings.mode.toLowerCase()&&(this.multiSelectType=seriesCollection[i].selectionSettings.rangeType.toLowerCase());if(this._isMultiSelect&&"range"==this.multiSelectMode){this.disableTrackBall(),mouseDownCords=this.calMousePosition(evt),this.mouseDownX=mouseDownCords.X,this.mouseDownY=mouseDownCords.Y,this.drag=!0,$(this.parentgEle).find("g").length<1?this.selectedRectIndex=0:(id=$(this.parentgEle).find("g").last().attr("id"),matchStr=containerSvg+"_gripCollection",id=parseInt(id.substr(matchStr.length)),this.selectedRectIndex=id+1),0==$(this.parentgEle).find("g").length&&(this.parentgEle=this.svgRenderer.createGroup({id:containerSvg+"_rectSelectionGroup"})),this.gEle=this.svgRenderer.createGroup({id:containerSvg+"_selectedRectGroup"+this.selectedRectIndex}),0==$(this.gripCollection).find("g").length&&(this.gripCollection=this.svgRenderer.createGroup({id:containerSvg+"_gripCollection"+this.selectedRectIndex})),0<=evt.target.id.indexOf("resize")&&(id=evt.target.id.split("resize")[1].match(/\d+/)[0],this.selectedRectIndex=eval(id)),0<=evt.target.id.indexOf("close")&&(id=evt.target.id.split("close")[1].match(/\d+/)[0],this.selectedRectIndex=eval(id)),0<=evt.target.id.indexOf(this.svgObject.id+"_selectRect")&&(matchStr=this.svgObject.id+"_selectRect",this.selectedRectIndex=parseInt(evt.target.id.substr(matchStr.length))),this.currentIndex=$(evt.target.parentNode).index();var axes=this.model._axes,axesLength=axes.length,axis,mouseMoveCords=this.calMousePosition(evt),mouseMoveX=mouseMoveCords.X,mouseMoveY=mouseMoveCords.Y;this.multiAxis=[];for(var k=0;k<axesLength;k++)axis=axes[k],mouseMoveX>axis.Location.X1&&mouseMoveX<axis.Location.X2&&this.multiAxis.push(axis),mouseMoveY<axis.Location.Y1&&mouseMoveY>axis.Location.Y2&&this.multiAxis.push(axis)}}},_grab:function(e,t,i,s,n){var a=$.extend({},ej.EjSvgRender.commonChartEventArgs);a.data={seriesIndex:i,pointIndex:s,currentPoint:n},t._trigger("dragStart",a),e.data=a.data,this.commonDragEventArgs=a,this.mousedownPointX=this.mousedownPointY=null},_enableDragging:function(e,t,i){var s,n=e.type.toLowerCase(),a=this.model.AreaType,r=e.visibility.toLowerCase();!this.mousedownPointX||!this.mousedownPointY||"cartesianaxes"!=a||this.model.enable3D||"visible"!=r||"line"!=n&&"spline"!=n&&"area"!=n&&"stepline"!=n&&"steparea"!=n&&"splinearea"!=n&&"column"!=n&&"bar"!=n&&"bubble"!=n&&"scatter"!=n||(n=this.getClosesPointXY([],[],e,this.mousedownPointX,this.mousedownPointY,i),this.mousemoveX=this.mousedownPointX,this.mousemoveY=this.mousedownPointY,i=this.GetSeriesPoint(i),ej.util.isNullOrUndefined(n.point)||(this.dragPoint=e.dragPoint=!0,n.seriesIndex=t,s={xValue:(e.pointData=n).point.xValue,yValue:n.point.YValues},this._grab(e,this,t,n.index,s),this.dragIndex={pointIndex:n.index,seriesIndex:t}),ej.util.isNullOrUndefined(i)||t==(t=i.region).SeriesIndex&&(e.region=i.region,this.dragPoint=e.dragPoint=!0,s={xValue:e._visiblePoints[t.Region.PointIndex].xValue,yValue:e._visiblePoints[t.Region.PointIndex].YValues},this._grab(e,this,t.SeriesIndex,t.Region.PointIndex,s),this.dragIndex={pointIndex:t.Region.PointIndex,seriesIndex:t.SeriesIndex}))},chartMouseDown:function(e){var model=this.model,matchStr=this._id+"_scrollbar_",parentNodeId=e.target.parentNode&&e.target.parentNode.id?e.target.parentNode.id:"",selectionIndex=-1<parentNodeId.indexOf(matchStr)?parseInt(parentNodeId.substr(matchStr.length)):NaN,isZoom=this.isZoomButtonHovered(e.target),axes=model._axes,chart=this,id,mouseDownCords=this.calMousePosition(e),browserInfo=this.model.browserInfo,timer,parent,isZoomToolkit,mousePanCords;this.mousedownPointX=mouseDownCords.X,this.mousedownPointY=mouseDownCords.Y,"which"in e?this.chartRightClick=3==e.which:"button"in e&&(this.chartRightClick=2==e.button),isNaN(selectionIndex)||ej.util.isNullOrUndefined(selectionIndex)||(axes[selectionIndex].previousRange=$.extend(!0,{},model._axes[selectionIndex].visibleRange)),this.mousemoveX=this.mouseDownX=mouseDownCords.X,this.mousemoveY=this.mouseDownY=mouseDownCords.Y,this.isTouch(e)&&(this.model.event=e,this.model.touchCross=!0,$.finish?$(this.model.trackerElement).finish():$(this.model.trackerElement).stop(!0,!0),this.model.tapNum=this.model.tapNum||0,isZoom||this.doubleTap(e),chart.model.crosshair.visible&&!isZoom&&(timer=setTimeout(function(){var t=$("#"+chart.svgObject.id).find("#"+chart.svgObject.id+"_ZoomArea"),i=chart.model.elementSpacing/2,s=chart.getEvent(chart.model.event),n=s.pageX,s=s.pageY;chart.model.touchCross&&!chart.panning&&Math.abs(n-chart.model.cachedX)<i&&Math.abs(s-chart.model.cachedY)<i&&(0==t.length||0==parseFloat($(t).attr("width"))||0==parseFloat($(t).attr("height")))&&(chart.chartInteractiveBehavior(e),chart.model.crosshairMoved=!0,chart.drag=!1)},500))),this.model.enable3D&&this.model.enableRotation&&(this.rotateActivate=!0),this.svgRenderer.vmlNamespace||(this.oPreviousCoords={},0<=e.target.id.indexOf("resize")&&(id=e.target.id.split("resize")[1].match(/\d+/)[0],this.selectedRectIndex=eval(id),this.multiSelectMouseDownId=e.target.id,this.resize=!0),0<=e.target.id.indexOf("close")&&(id=e.target.id.split("close")[1].match(/\d+/)[0],this.selectedRectIndex=eval(id),this.removeRect=!0),0<=e.target.id.indexOf(this.svgObject.id+"_selectRect")&&(matchStr=this.svgObject.id+"_selectRect",this.selectedRectIndex=parseInt(e.target.id.substr(matchStr.length))),e.target.id==this.svgObject.id+"_selectRect"+this.selectedRectIndex&&(this.rectPan=!0,this.PreviousCoords={X:e.pageX,Y:e.pageY}),this.isTouch(e)||this.multiSelectMouseDown(e),parent=this.svgRenderer._getAttrVal($(e.target).parent(),"id"),isZoomToolkit=parent!=this.svgObject.id+"_ZoomBtn"&&parent!=this.svgObject.id+"_ZoomInBtn"&&parent!=this.svgObject.id+"_ZoomOutBtn"&&parent!=this.svgObject.id+"_ResetZoom"&&parent!=this.svgObject.id+"_PanBtn",isZoomToolkit&&this.model.zooming.enable&&!this.model.isLazyZooming&&!this.panning&&"cartesianaxes"==this.model.AreaType?this.mouseDownX>=this.model.m_AreaBounds.X&&this.mouseDownX<model.m_AreaBounds.X+model.m_AreaBounds.Width&&this.mouseDownY<model.m_AreaBounds.Y+model.m_AreaBounds.Height&&this.mouseDownY>=model.m_AreaBounds.Y&&!this.isTouch(e)&&((isNaN(selectionIndex)||ej.util.isNullOrUndefined(selectionIndex))&&(this.drag=!0),this.disableTrackBall()):(isZoomToolkit&&this.panning||"e-hhandle e-box"==$(e.target)[0].className)&&(mousePanCords=this.calMousePosition(e),this.mousePanX=mousePanCords.X,this.mousePanY=mousePanCords.Y,this.mousePanX>=model.m_AreaBounds.X&&this.mousePanX<model.m_AreaBounds.X+model.m_AreaBounds.Width&&this.mousePanY<model.m_AreaBounds.Y+model.m_AreaBounds.Height+18&&this.mousePanY>=model.m_AreaBounds.Y&&(this.doPan=!0)),(this.rotateActivate||this.doPan)&&(this.oPreviousCoords={x:e.pageX,y:e.pageY}))},chartMouseLeave:function(e){this.cancelEvent(e),this.isTouch(e)||($("[id*=_TrackSymbol]").remove(),this._removeHighlight(),this._removeTrackBall(),$("#"+this.svgObject.id+"_TrackToolTip").hide(),$("#"+this._id+"_tooltip").remove(),$(".tooltipDiv"+this._id).hasClass(this.svgObject.id)&&$(".tooltipDiv"+this._id).remove());var t=$.extend({},ej.EjSvgRender.commonChartEventArgs);t.data={location:{x:this.mousemoveX,y:this.mousemoveY},size:{height:this.model.svgHeight,width:this.model.svgWidth},id:e.target.id,pageX:e.pageX,pageY:e.pageY},this._trigger("chartMouseLeave",t)},_doClick:function(e){this.drag=!1,this.model.crosshairMoved||this._removeHighlight(),this.model.selectedDataPointIndexes||(this.model.selectedDataPointIndexes=[]),this.model.clusterPoints=[],this.model._isStateChaged=!1;var t=this.getEvent(e),i=t.pageX,s=t.pageY,n=(e.target.id,this.svgObject.id,this.model._visibleSeries),a=this.isZoomButtonHovered(e.target),r=e.target.id,o=(n.length,this.GetSeriesPoint(e));if(o?(x=o.region.SeriesIndex,b=o.region.Region.PointIndex):this.model.selectionEnable&&(this.model.enable3D||-1!=e.target.id.indexOf("LegendItem")||"none"==this.model.AreaType||(!(u=(t=e.target.id).match(/(\d+)/g))||-1==t.indexOf("symbol")&&-1==t.indexOf("Series")||-1!=t.indexOf("Text")?!u||-1==t.indexOf("Text")&&-1==t.indexOf("dataLabel")||(x=parseInt(u[0].charAt(1)),b=isNaN(parseInt(u[0].charAt(0)))?parseInt(u[0].charAt(1)):parseInt(u[0].charAt(0))):(x=parseInt(u[0]),b=isNaN(parseInt(u[1]))?0:parseInt(u[1])))),!a||this.model.enableCanvasRendering){for(var l=0;l<this.model._visibleSeries.length;l++){var d,h=(d=this.model._visibleSeries[l]).type.toLowerCase();"cartesianaxes"!=this.model.AreaType||"visible"!=d.visibility.toLowerCase()||"scatter"===h||"bubble"===h||"column"===h||-1!=h.indexOf("bar")||"stackingcolumn"===h||"stackingcolumn100"===h||d._hiloTypes||(h=this.calMousePosition(e),this.mousemoveX=h.X,this.mousemoveY=h.Y,h=this.getClosesPointXY([],[],d,this.mousemoveX,this.mousemoveY,e),ej.util.isNullOrUndefined(h.point)||(x=l,b=h.index,(d=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={location:{x:this.mousemoveX,y:this.mousemoveY},region:{SeriesIndex:l,Region:{PointIndex:h.index}}},this._trigger("pointRegionClick",d)))}!o||a&&!this.model.enableCanvasRendering||((y=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data=o,this._trigger("pointRegionClick",y))}if("none"==this.model.AreaType&&this.model.enable3D&&"path"==$(e.target)[0].nodeName&&(!this.isTouch(e)||Math.abs(i-this.model.cachedX)<10&&Math.abs(s-this.model.cachedY)<10)){w=$(e.target)[0].id.match(/(\d+)/g),x=parseInt(w[w.length-2]),b=parseInt(w[w.length-1]);var c,u=this.model._visibleSeries[x].explodeIndex,a=this.model._visibleSeries[x]._visiblePoints[b].actualIndex;if(this.model._visibleSeries[x].explodeIndex=u==a?null:a,this.vmlRendering||this.model.enableCanvasRendering||(c=this.selectedStyle(this)),$(this.svgObject).empty(),$(this.legendSvgContainer).empty(),this.draw(),"none"==this.model.AreaType){this.model._isStateChaged=!1;for(var p,m=c.length,g="_Region_Series_"+x+"_Point_"+b,f=$(this.svgObject).find("[id$="+g+"],[id*="+g+"back],[id*="+g+"front]"),_=f.length,v=0;v<m;v++)for(l=0;l<_;l++)c[v].id==f[l].id&&(p=c[v].className).indexOf("SelectionStyle")<0&&p.indexOf("SelectionundefinedStyle")<0&&$("[id="+f[l].id+"]").attr("class",p);c.pattern&&this.svgRenderer.append(c.pattern,this.svgObject)}else $("[id*="+this.svgObject.id+"_LegendItemShape],[id*=_Region_Series_]").each(function(){$(this).attr("class","")})}var b,x,g=this.getAxisLabelData(e);g&&((y=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data=g,this._trigger("axisLabelClick",y));g=this.getAxisMultiLevelLabelsData(e);g&&((y=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data=g,this._trigger("multiLevelLabelClick",y)),0<=r.indexOf("annotation_")&&(g=r.lastIndexOf("_"),g=r.substr(g+1,r.length),w=parseInt(g),(y=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={location:{x:this.mousemoveX,y:this.mousemoveY},contentData:this.model.annotations[w],pageX:e.pageX,pageY:e.pageY},this._trigger("annotationClick",y));var y,w=!ej.isNullOrUndefined(x)&&this.model._visibleSeries[x].selectionSettings.enable;!ej.isNullOrUndefined(x)&&w&&(!this.isTouch(e)||!this.model.crosshairMoved&&Math.abs(i-this.model.cachedX)<10&&Math.abs(s-this.model.cachedY)<10)&&(n[x].selectionSettings.type.toLowerCase(),"range"!=n[x].selectionSettings.mode.toLowerCase()&&this.segmentSelection(e,!1,x,b,o,n)),this.model.crosshairMoved=!1,(y=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={location:{x:this.mousemoveX,y:this.mousemoveY},size:{height:this.model.svgHeight,width:this.model.svgWidth},id:r,pageX:e.pageX,pageY:e.pageY},this._trigger("chartClick",y)},getTargetId:function(e,t,i){var s,n=this.model._visibleSeries[e].type.toLowerCase(),n=-1!=n.indexOf("area")||-1!=n.indexOf("line")||-1!=n.indexOf("scatter");return(this.model.enable3D?$("[id*=_Region_Series_"+e+"_Point_"+t+"]"):"series"!=i||"none"==this.model.AreaType?$(n?"[id*="+this.svgObject.id+"_Series"+e+"_Point"+t+"_symbol]":"[id$="+this.svgObject.id+"_Series"+e+"_Point"+t+"]"):$("[id*="+this.svgObject.id+"_Series"+e+"]")).each(function(){s=this.id}),s},findCanvasSelection:function(e,t,i){t=$("point"==i?"#"+this._id+"_Selection_series"+e+"_point_"+t+"_canvas":"series"==i?"#"+this._id+"_Selection_series"+e+"_canvas":"#"+this._id+"_Selection_Cluster_point_"+t+"_canvas").length;return 1==t},segmentSelection:function(e,t,i,s,n){var a=this.model._visibleSeries,r=a[i];if(ej.isNullOrUndefined(r))return 0;var o,l,d,h,c,u,p,m,g,f,_,v=r.selectionSettings,b=(v.enable,"multiple"==v.type.toLowerCase()),x=v.mode,y=!1;if(this.model.isSelected=!0,!ej.isNullOrUndefined(s)&&"cluster"==x){for(var w,C,S=[],T=a[i]._visiblePoints[s].xValue,R=0,k=a.length;R<k;R++){C=(w=a[R].points).length;for(var O=0;O<C;O++)T==w[O].xValue&&0==w[O].isEmpty&&1==w[O].visible&&(S[S.length]={seriesIndex:R,pointIndex:O})}this.model.clusterPoints=S}if(this.model.enableCanvasRendering||(_=this.getTargetId(i,s,x))&&(f=$("#"+_)[0].parentNode.id,null!=$("#"+f)[0]&&f&&(0<=f.indexOf(this.svgObject.id+"_TextGroup_")||f.indexOf(this.svgObject.id+"_symbolGroup"),0<=f.indexOf(this.svgObject.id+"_TrackSymbol_")&&(y=!0))),this.model.enableCanvasRendering?o=this.findCanvasSelection(i,s,x):(o=-1!=($("#"+_).attr("class")?$("#"+_).attr("class"):"").indexOf("Selection"),this.model.enable3D&&(o=-1!=($("[id*=_Region_Series_"+i+"_Point_"+s+"]").attr("class")?$("[id*=_Region_Series_"+i+"_Point_"+s+"]").attr("class"):"").indexOf("Selection"))),(o||!b||b)&&(this.removeSelection(i,s,a,x,b,t,o),0<(h=(n=this.model.selectedDataPointIndexes).length)&&!this.model._isStateChaged))if(b){if(o)for(D=0;D<h;D++)l=n[D].seriesIndex,d=n[D].pointIndex,c="series"==x&&l==i,p=("point"==x||"none"==this.model.AreaType)&&l==i&&d==s,m="cluster"==x&&d==s,((c||m)&&"none"!=this.model.AreaType||p)&&(n.splice(D,1),h=n.length,D=-1)}else for(var D=0;D<h;D++)l=n[D].seriesIndex,d=n[D].pointIndex,c="series"==x&&(l==i&&d==s||l!=i||d!=s),p=("point"==x||"none"==this.model.AreaType)&&l==i&&d==s,m="cluster"==x&&d==s,(c||p||m)&&(n.splice(D,1),h=n.length,D=-1);if(!o&&(this.model.enableCanvasRendering?this.canvasSelection(this,e,r,t,i,s,n,v):this.selection(this,e,r,y,t,i,s,f,_,n),h=(n=this.model.selectedDataPointIndexes).length,!this.model._isStateChaged))if(0<h)if(b)n.push({legendData:t,seriesIndex:i,pointIndex:s});else{for(D=0;D<h;D++)l=n[D].seriesIndex,d=n[D].pointIndex,g=!("series"!=x&&"cluster"!=x&&"none"!=this.model.AreaType||n[D].SeriesIndex==i&&n[D].PointIndex==s),u="point"==x&&n[D].SeriesIndex==i,(g||u)&&(n.splice(D,1),h=this.model.selectedDataPointIndexes.length,D=-1);n.push({legendData:t,seriesIndex:i,pointIndex:s})}else n.push({legendData:t,seriesIndex:i,pointIndex:s});t={selectedData:this.model.selectedDataPointIndexes};this._trigger("seriesRegionClick",t)},legendSelection:function(e,t,i,s){var n=this.model.selectedDataPointIndexes||[],a=this.model._visibleSeries.length,r="none"==e.model.AreaType&&1==a?t.legendItem.LegendItem.PointIndex:t.legendItem.LegendItem.SeriesIndex,o=t.legendItem.LegendItem.SeriesIndex,l=r,d=e.svgObject.id+"_LegendItemShape"+r,a=$("#"+d).attr("class")?$("#"+d).attr("class"):"";if(1==$("#"+e._id+"_Selection_Legend"+r+"_canvas").length||-1!=a.indexOf("Selection")){$("#"+e._id+"_Selection_Legend"+r+"_canvas").remove(),$("[id*="+e._id+"_Selection_series"+r+"]").remove(),$("#"+this._id+"_Selection_series"+o+"_point_"+l+"_canvas").remove(),$("#"+d).attr("class",""),$("[id*="+e.svgObject.id+"_Series"+o+"]").attr("class",""),$("[id*=_Region_Series_"+o+"]").attr("class","");for(var h=0;h<n.length;h++)if(n[h].seriesIndex==r||"none"==this.model.AreaType&&n[h].pointIndex==r){n.splice(h,1);break}}else e.segmentSelection(i,t,o,l,s)},chartMouseClick:function(e){this.cancelEvent(e),window.navigator.msPointerEnabled&&(e=e.originalEvent),this._doClick(e)},chartMouseDoubleClick:function(e){window.navigator.msPointerEnabled&&(e=e.originalEvent);var t=$.extend({},ej.EjSvgRender.commonChartEventArgs);t.data={location:{x:this.mousemoveX,y:this.mousemoveY},size:{height:this.model.svgHeight,width:this.model.svgWidth},id:e.target.id,pageX:e.pageX,pageY:e.pageY},this._trigger("chartDoubleClick",t)},drawTrackerSymbol:function(e,t,i,s,n,a,r){var o,l=e.type.toLowerCase(),d=new ej.seriesTypes[l],h="boxandwhisker"==e.type.toLowerCase()?r:i,c=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,this.model.requireInvertedAxes),u=(e.isTransposed?e.yAxis:e.xAxis).plotOffset,p=(e.isTransposed?e.xAxis:e.yAxis).plotOffset,p={id:this.svgObject.id+"_ClipRectTrack_"+t,x:-u,y:-p,width:c.width+2*u,height:c.height+2*p,fill:"white","stroke-width":1,stroke:"Gray"};"none"!=this.model.AreaType&&("cartesianaxes"==this.model.AreaType&&n.X+c.x<=c.x+c.width&&(n.X+c.x>=c.x||0==n.X)&&(n.Y+c.y>=c.y||0==n.Y)?this.model.crosshair.visible||"bubble"==l||"scatter"==l?(e.trackerRemoved||(o=this.svgObject.id+"_TrackSymbol_"+t,o="boxandwhisker"==l?o+h:o,$("#"+this._id).find("[id*="+o+"]").remove(),o="canvas_trackSymbol_"+t,o="boxandwhisker"==l?o+h:o,$("#"+this._id).find("[id*="+o+"]").remove()),o={"clip-path":"url(#"+this.svgObject.id+"_ClipRectTrack_"+t+")",class:"Tracker",id:this.svgObject.id+"_TrackSymbol_"+t+"_"+h,transform:"translate("+c.x+","+c.y+")"},this.gTrackerEle=this.svgRenderer.createGroup(o)):this.gTrackerEle=null:($("#"+this.svgObject.id+"_TrackSymbol_"+t+"_"+h).remove(),o={id:this.svgObject.id+"_TrackSymbol_"+t+"_"+h},this.gTrackerEle=this.svgRenderer.createGroup(o),this.model.enableCanvasRendering||("polaraxes"==this.model.AreaType?this.gTrackerEle.setAttribute("clip-path","url(#"+this.svgObject.id+"_SeriesGroup_"+t+"_ClipRect)"):(this.gTrackerEle.setAttribute("clip-path","url(#"+this.svgObject.id+"_ClipRectTrack_"+t+")"),this.gTrackerEle.setAttribute("transform","translate("+c.x+","+c.y+")")))),0==$("#"+this.svgObject.id+"_CrosshairGroup").length&&(c={id:this.svgObject.id+"_CrosshairGroup",visibility:"visible"},this.gTrackball=this.svgRenderer.createGroup(c),this.svgRenderer.append(this.gTrackball,this.svgObject)),this.model.crosshair.marker.visible&&!e.isIndicator&&e._visiblePoints[i].visible&&(d.drawSymbol(t,e,i,n.X,n.Y,this,s,r),n.low&&d.drawSymbol(t,e,i,this.model.requireInvertedAxes?n.low:n.X,this.model.requireInvertedAxes?n.Y:n.low,this,s)),this.gTrackerEle&&$("#"+this.gTrackerEle.id).length<1&&this.svgRenderer.append(this.gTrackerEle,this.gTrackball)),0!=$(this.svgObject).find("#"+this.svgObject.id+"_ClipRectTrack_"+t).length||this.vmlRendering||this.svgRenderer.drawClipPath(p,$("#"+this.svgObject.id+"_CrosshairGroup"))},getClosesPointXY:function(e,t,i,s,n,a){var r,o,l,d,h,c,u,p,m=ej.EjSvgRender.utils._getTransform(i.xAxis,i.yAxis,this.model.requireInvertedAxes),a=this.isTouch(a),g=i._visiblePoints?i._visiblePoints.length:0,f=i.marker?$.extend(!0,{},i.marker.size):{height:6,width:6};if(f.height=a&&f.height<20?f.height+10:f.height,f.width=a&&f.width<20?f.width+10:f.width,n<=m.y+m.height&&m.y<=n&&m.x<=s&&s<=m.x+m.width)for(var _=0;_<g;_++){if(h=(d=i._visiblePoints[_]).location,c=!1,p=u=null,"boxandwhisker"==i.type&&!this.model.enable3D&&!ej.util.isNullOrUndefined(d.boxPlotLocation))for(var v=0;v<d.boxPlotLocation.length;v++){var b={X:d.boxPlotLocation[v].X,Y:d.boxPlotLocation[v].Y};1==d.boxPlotLocation[v].outlier&&s>b.X+m.x-f.width&&s<b.X+m.x+f.width&&(u=d.x,ej.util.isNullOrUndefined(u)&&(c=d.visible),n>b.Y+m.y-f.height&&n<b.Y+m.y+f.height+10&&(p=d.boxPlotValues.outliers[v],o={X:b.X,Y:b.Y}),ej.util.isNullOrUndefined(o)||(r=d,l=_))}h&&(s>h.X+m.x-f.width/2&&s<h.X+m.x+f.width/2&&(u=d.x,ej.util.isNullOrUndefined(u)&&(c=d.visible)),n>h.Y+m.y-f.height/2&&n<h.Y+m.y+f.height/2&&(p=d.YValues[0]),ej.util.isNullOrUndefined(u)&&!c||ej.util.isNullOrUndefined(p)||(r=d,l=_))}return{point:r,index:l,outlierPosition:o}},getClosestPointX:function(i,e,t,s){var n=[],a=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,this.model.requireInvertedAxes);s=this.model.requireInvertedAxes?(t=Math.abs(s-(a.y+a.height)),Math.abs(t-a.x)):(t=Math.abs(t-a.x),Math.abs(s-(a.y+a.height)));var s=ej.EjSvgRender.utils._getValuebyPoint(t,s,e,this.model.requireInvertedAxes),s=(this.model.requireInvertedAxes,s.PointX),r=[];$.each(e.points,function(e,t){i.push(t.xValue)});var o=this.getClosest(i,s);return ej.util.isNullOrUndefined(o)||("number"==typeof o?$.each(e._visiblePoints,function(e,t){t.xValue==o&&(n.push(t),r.push(e))}):(o=o.getTime(),$.each(e._visiblePoints,function(e,t){("number"==typeof t.xValue?t.xValue==o:t.xValue.getTime()==o)&&(n.push(t),r.push(e))}))),{point:n,index:r}},getClosest:function(e,t){var i=null;this._beforeMin=!1,this._afterMax=!1;var s=Math.min.apply(null,e),n=Math.max.apply(null,e);if(s-.5<=t&&t<=n+.5){for(var a=0;a<e.length;a++)(null==i||Math.abs(e[a]-t)<Math.abs(i-t))&&(i=e[a]);this._closest=null}else n<t?(i=e[e.length-1],this._closest=ej.util.isNullOrUndefined(this._closest)||i>this._closest?i:this._closest,this._afterMax=!0):(i=e[0],this._closest=ej.util.isNullOrUndefined(this._closest)||i<this._closest?i:this._closest,this._beforeMin=!0);return i},createTooltip:function(e,t,i){var s="pieofpie"==(i=i||this.model._visibleSeries[e.SeriesIndex]).type?this._getPieOfPiePoint(e.Region.PointIndex,i):"pie"!=i.type&&"doughnut"!=i.type||this.model.enable3D?i._visiblePoints[e.Region.PointIndex]:i._visiblePoints[e.Region.Index],n=this.dragPoint?i.pointCollection[e.Region.PointIndex]:$.extend(!0,{},s),a=i.tooltip.isReversed;if(!1!==n.visible){var r=i.tooltip.format;if("boxandwhisker"==i.type){var o=this.calMousePosition(t);if(this.mousemoveX=o.X,this.mousemoveY=o.Y,!!e.Region.Bounds)if(e.Region.Bounds.Width==i.outlierSettings.size.width)for(var l=0;l<n.boxPlotLocation.length;l++)1==n.boxPlotLocation[l].outlier&&n.boxPlotLocation[l].X+i.outlierSettings.size.width/2>this.mousemoveX-i.xAxis.x&&n.boxPlotLocation[l].X-i.outlierSettings.size.width/2<this.mousemoveX-i.xAxis.x&&n.boxPlotLocation[l].Y+i.outlierSettings.size.height/2>this.mousemoveY-i.yAxis.y&&n.boxPlotLocation[l].Y-i.outlierSettings.size.height/2<this.mousemoveY-i.yAxis.y&&(d=this.getTooltipFormat(n,i,e.SeriesIndex,e.Region.PointIndex,r,n.boxPlotLocation[l]),n.x=d.data.x,n.y=d.text);else{var d=this.getTooltipFormat(n,i,e.SeriesIndex,e.Region.PointIndex,r,n.boxPlotLocation[0]);n.x=d.data.x,n.y=d.text}}else{d=this.getTooltipFormat(n,i,e.SeriesIndex,e.Region.PointIndex,r);n.x=d.data.x,n.y=d.data.y}var h=$.extend({},ej.EjSvgRender.commonChartEventArgs);h.data={currentText:null,seriesIndex:e.SeriesIndex,pointIndex:e.Region.PointIndex,series:i},this._trigger("toolTipInitialize",h);var c=$(".tooltipDiv"+this._id);$("#"+this.svgObject.id).find("#"+this.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),$("#"+this.svgObject.id+"_TrackToolTip").attr("visibility","hidden").hide(),0==$(".tooltipDiv"+this._id).length?(this.tooltipFirst=!0,c=$("<div></div>").attr("class","tooltipDiv"+this._id).css({position:"absolute","z-index":"13000",display:"block"}),$(document.body).append(c),$(".tooltipDiv"+this._id).addClass(this.svgObject.id)):($(".tooltipDiv"+this._id).css("display","block"),this.tooltipFirst=!1),null!=i.tooltip.template?(f=$("#"+i.tooltip.template).clone(),$(".tooltipDiv"+this._id)[0].innerHTML="",$(f).css("display","block").appendTo(c),i.count=1,n.count=1,(m=this.getSeriesColor(n,e.SeriesIndex,i))?$(c).css("background-color","array"==jQuery.type(m)?m[0].color:m):$(c).css("background-color",this.model.pointColors[e.Region.PointIndex]),g={series:i,point:n},ej.util.isNullOrUndefined(h.data.currentText)?$(c).html($(c).html().parseTemplate(g)):$(c).html($(f).html(h.data.currentText))):$(c).html(h.data.ToolTip);var u=this.model.m_AreaBounds,p=t.pageX+10,s=t.pageY+10,o=$(c).width(),m=$(c).height(),g=document.getElementById(this.svgObject.id).getClientRects()[0];null==p&&(p=t.pageX+10),null==s&&(s=t.pageY+10);var f=p,h=s;p-$(this.svgObject).offset().left+o>u.X+u.Width&&(f=p-(o+20)+$(document).scrollLeft()),s-$(this.svgObject).offset().top+m>u.Y+u.Height&&(h=s-(s+m-(u.Y+u.Height+g.top))+$(document).scrollTop()),f<0&&(m=$("#"+this._id)[0].getBoundingClientRect(),f=t.pageX<m.width/2?p:($(c).css("width",p-20),0)),$(c).css("left",f),$(c).css("top",h);h=i.tooltip;h.enableAnimation&&$(c).css({"transition-property":"left,top","-moz-transition-property":"left,top","-webkit-transition-property":"left,top","-o-transition-property":"left,top","transition-duration":h.duration,"-moz-transition-duration":h.duration,"-webkit-transition-duration":this.tooltipFirst?"0s":h.duration,"-o-transition-duration":h.duration}),$(c)[0].getBoundingClientRect().top<u.Y+g.top&&$(c).css("top",u.Y+g.top+$(document).scrollTop()),a&&($(c).css("left",p-(o+20)),p-(o+20)<i.xAxis.x&&$(c).css("left",p))}},translate:function(e,t,i,s){s="horizontal"==e.orientation.toLowerCase()?t/e.width/s:i/e.height/s;e.zoomPosition="horizontal"==e.orientation.toLowerCase()?ej.EjSvgRender.utils._minMax(e.zoomPosition+s,0,1-e.zoomFactor):ej.EjSvgRender.utils._minMax(e.zoomPosition-s,0,1-e.zoomFactor)},highlightFill:function(e,t,i,s,n){var a=t.model.seriesColors,r=t.model.pointColors,o=e.color,e=this.model._visibleSeries.length;n&&"none"==t.model.AreaType&&(1==e?s=n.legendItem.LegendItem.PointIndex:i=n.legendItem.LegendItem.SeriesIndex);e=n?a[i]:s&&t.model.series[i].points[s]?t.model.series[i].points[s].fill:null,i=""!=o?o:"none"==t.model.AreaType?r[s]:!n&&e||a[i];return"[object Array]"===Object.prototype.toString.call(i)&&(i=i[1].color),i},canvasHighlight:function(e,t,i,s){var n,a,r=i.highlightSettings,o=i.data,l=r.color,d=r.opacity,h=r.border.color,c=r.border.width,u=r.pattern.toLowerCase(),p=e.model.legend.visible,m=r.mode,g=i.seriesIndex,f=i.pointIndex,_=i.type.toLowerCase(),v=document.getElementById(e._id+"_canvas").getBoundingClientRect(),b=[],x=[],y=[],w=this.model._visibleSeries.length,C=this.highlightFill(r,e,g,f,s);if("none"!=e.model.AreaType||"none"==e.model.AreaType&&1<w&&("series"==m||s))for(var S=0,T=e.model.chartRegions.length;S<T;S++)"series"!=m&&!s||g!=e.model.chartRegions[S].SeriesIndex||b.push(e.model.chartRegions[S].Region);else for(S=0,T=e.model.chartRegions.length;S<T;S++)g==e.model.chartRegions[S].SeriesIndex&&f==e.model.chartRegions[S].Region.PointIndex&&b.push(e.model._isPieOfPie?e._getPieOfPiePoint(e.model.chartRegions[S].Region.PointIndex,i):e.model.chartRegions[S].Region[f]);if("cluster"==m&&"none"!=e.model.Areatype&&void 0!==f)for(var R=e.model._visibleSeries[g]._visiblePoints[f].xValue,S=0,T=e.model._visibleSeries.length;S<T;S++)for(var k=0;k<e.model._visibleSeries[S]._visiblePoints.length;k++)R==e.model._visibleSeries[S]._visiblePoints[k].xValue&&(y[y.length]={seriesIndex:S,pointIndex:k});for(var O=0;O<y.length;O++){n=y[O].seriesIndex,a=y[O].pointIndex;for(var D=0;D<e.model.chartRegions.length;D++)n==e.model.chartRegions[D].SeriesIndex&&a==e.model.chartRegions[D].Region.PointIndex&&("cluster"!=m?b.push(e.model.chartRegions[D].Region):b.push(e.model.chartRegions[D]))}var I="none"==e.model.AreaType&&1==w?f:g;if("series"!=m&&!s||0!=$("#"+e._id+"_Selection_series"+I+"_canvas").length||0!=$("#"+e._id+"_Selection_Cluster_point_"+f+"_canvas").length||0!=$("#"+e._id+"_Selection_"+g+"_point_"+f+"_canvas").length)if("cluster"==m&&0==$("#"+e._id+"_Selection_Cluster_point_"+f+"_canvas").length&&"none"!=this.model.AreaType&&0==$("#"+e._id+"_Selection_"+g+"_point_"+f+"_canvas").length&&0==$("#"+e._id+"_Selection_series"+g+"_canvas").length){for(S=0,T=this.model._visibleSeries.length;S<T;S++)(i=this.model._visibleSeries[S]).seriesIndex=S,x.push(i._visiblePoints[f]);var j=[],L=[],A=this.createCanvasElement(e._id+"_Highlight__Cluster_point_"+f+"_canvas",e.svgWidth,e.svgHeight,v);this.createRect(e,A);for(S=0,T=this.model._visibleSeries.length;S<T;S++){j=[],l=(r=e.model._visibleSeries[S].highlightSettings).color,d=r.opacity,h=r.border.color,c=r.border.width,u=r.pattern.toLowerCase(),C=this.highlightFill(r,e,S,f,I,s),l="none"==u||""==u?C:this.canvasPattern(A,e,t,C,r),L.push(l);for(var E=0,P=b.length;E<P;E++)b[E].SeriesIndex==S&&j.push(b[E].Region);if(-1!=_.indexOf("column")||-1!=_.indexOf("waterfall")||-1!=_.indexOf("bar"))for(M=0==$("#"+e._id+"_Selection_"+S+"_point_"+f+"_canvas").length,E=0,P=j.length;E<P;E++)this.canvasSeriesRect(j[E],d,h,c,l,M,i);else"bubble"==_?this.canvasBubbleHighlight(r,j,e,S,l,c,d,h):"scatter"==_&&this.canvasScatterHighlight(j,l,c,d,h)}}else("cluster"==m&&"none"==this.model.AreaType||"point"==m&&0==$("#"+e._id+"_Selection_"+g+"_point_"+f+"_canvas").length&&0==$("#"+e._id+"_Selection_series"+g+"_canvas").length&&0==$("#"+e._id+"_Selection_Cluster_point_"+f+"_canvas").length)&&(x[0]=this.model._isPieOfPie?this._getPieOfPiePoint(f,i):i._visiblePoints[f],A=this.createCanvasElement(e._id+"_Highlight_"+g+"_point_"+f+"_canvas",e.svgWidth,e.svgHeight,v),this.createRect(e,A),l="none"==u||""==u?C:this.canvasPattern(A,e,t,C,r),-1!=_.indexOf("column")||-1!=_.indexOf("waterfall")||-1!=_.indexOf("bar")?((b=[])[0]=o.region.Region,this.canvasSeriesRect(b[0],d,h,c,l,!0,i)):"pie"==_||"doughnut"==_||"pieofpie"==_?((b=[])[0]=o.pointData[0],this.canvasHighlightCircle(e,r,f,d,h,c,l,b,_,A)):"pyramid"==_||"funnel"==_?this.canvasHighlightPyramid(e,b[0],r,A,d,h,c,l,_):"bubble"==_?((b=[])[0]=o.region.Region,this.canvasBubbleHighlight(r,b,e,g,l,c,d,h)):"scatter"==_&&((b=[])[0]=o.region.Region,this.canvasScatterHighlight(b,l,c,d,h)));else if(x=i._visiblePoints,A=this.createCanvasElement(e._id+"_Highlight_series"+g+"_canvas",e.svgWidth,e.svgHeight,v),l="none"==u||""==u?C:this.canvasPattern(A,e,t,C,r),this.createRect(e,A),-1!=_.indexOf("column")||-1!=_.indexOf("waterfall")||-1!=_.indexOf("bar"))for(S=0;S<b.length;S++){var M=0==$("#"+e._id+"_Selection_"+g+"_point_"+S+"_canvas").length;this.canvasSeriesRect(b[S],d,h,c,l,M,i)}else"pie"==_||"doughnut"==_||"pieofpie"==_?(b=1==w?b:b[0],this.canvasHighlightCircle(e,r,f,d,h,c,l,b,_,A)):"pyramid"==_||"funnel"==_?this.canvasHighlightPyramid(e,b[0],r,A,d,h,c,l,_):"bubble"==_?this.canvasBubbleHighlight(r,b,e,g,l,c,d,h):"scatter"==_&&this.canvasScatterHighlight(b,l,c,d,h);if(p&&0==$("#"+e._id+"_Selection_Legend"+I+"_canvas").length)if("cluster"!=m||s||"none"==this.model.AreaType)this.canvasHighlightLegend(e,i,r,"Highlight",v,l);else for(var F,N,S=0,T=y.length;S<T;S++)F=y[S].seriesIndex,N=this.model._visibleSeries[F],this.canvasHighlightLegend(e,N,r,"Highlight",v,L[F]);"visible"===i.visibility&&1==i.marker.visible&&"none"!=this.model.AreaType&&this.canvasHighlightMarker(e,i,x,r,A,t,L)},canvasSeriesRect:function(e,t,i,s,n,a,r){n={opacity:t,stroke:i,"stroke-width":s,fill:n},r=r.cornerRadius;e&&(n.x=e.Bounds.X,n.y=e.Bounds.Y,n.width=e.Bounds.Width,n.height=e.Bounds.Height,a&&("object"!=typeof r&&0<r||0<r.topLeft||0<r.bottomLeft||0<r.topRight||0<r.bottomRight?(r=ej.EjSvgRender.utils._calculateroundedCorner(r,n),n.d=r,ej.EjCanvasRender.prototype.drawPath(n,void 0)):this.drawRect(n,void 0)))},canvasSelection:function(e,t,i,s,n,a,r,o){i.seriesIndex=n,i.pointIndex=a;var l,d,h,c=this.model._visibleSeries,u=o.color,p=o.opacity,m=o.border.color,g=o.border.width,f=o.pattern.toLowerCase(),_=e.model.legend.visible,v=o.mode,b=i.type.toLowerCase(),x=document.getElementById(e._id+"_canvas").getBoundingClientRect(),y=[],w=[],C=this.model._visibleSeries.length,S=e.model.chartRegions,T=this.model.clusterPoints,R="none"==e.model.AreaType&&1==C?a:n,k=this.highlightFill(o,e,n,a,s,r),O=S.length;if("none"!=e.model.AreaType||"none"==e.model.AreaType&&1<C)for(var D=0;D<O;D++)(("series"==v||s)&&n==S[D].SeriesIndex||("point"==v||s)&&n==S[D].SeriesIndex&&a==S[D].Region.PointIndex)&&("none"!=e.model.AreaType||"point"!=v||s?y.push(S[D].Region):y.push(S[D].Region[a]));else if(0<O){if(this.model._isPieOfPie){if(s)for(var I=0;I<i.pieCollections.length;I++)for(var j=i.pieCollections[I],L=0;L<j.length;L++)if(j[L].actualIndex==s.legendItem.LegendItem.PointIndex){var A=I;break}var E=S[i.data?i.data.pointData[0].PieSeriesIndex:A]}else E=S[0];l=E.Region.length;for(D=0;D<l;D++)a==E.Region[D].PointIndex&&y.push(E.Region[D])}if(("series"==v||s)&&("none"!=this.model.AreaType||"none"==this.model.AreaType&&1<C))if(w=i._visiblePoints,H=this.createCanvasElement(e._id+"_Selection_series"+R+"_canvas",e.svgWidth,e.svgHeight,x),u="none"==f||""==f?k:this.canvasPattern(H,e,t,k,o),this.createRect(e,H),-1!=b.indexOf("column")||-1!=b.indexOf("waterfall")||-1!=b.indexOf("bar"))for(D=0;D<y.length;D++)this.canvasSeriesRect(y[D],p,m,g,u,!0,i);else"pie"==b||"doughnut"==b||"pieofpie"==b?this.canvasHighlightCircle(e,o,a,p,m,g,u,y[0],b,H):"bubble"==b?this.canvasBubbleHighlight(o,y,e,n,u,g,p,m):"scatter"==b&&this.canvasScatterHighlight(y,u,g,p,m);else if("cluster"==v&&"none"!=this.model.AreaType&&0==$("#"+e._id+"_Selection_Cluster_point_"+a+"_canvas").length){for(var P,M,F,N=T.length,z=0;z<N;z++)P=T[z].seriesIndex,M=T[z].pointIndex,0<(F=$.grep(S,function(e){return e.SeriesIndex==P&&e.Region.PointIndex==M})).length?(y.push(F[0]),w.push(c[F[0].SeriesIndex]._visiblePoints[a])):w.push(c[z]._visiblePoints[a]);this.selectedPoint=a;var V=[],B=[],H=this.createCanvasElement(e._id+"_Selection_Cluster_point_"+a+"_canvas",e.svgWidth,e.svgHeight,x);for(this.createRect(e,H),D=0,d=c.length;D<d;D++){V=[],u=(h=c[D].selectionSettings).color,p=h.opacity,m=h.border.color,g=h.border.width,f=h.pattern.toLowerCase(),k=this.highlightFill(h,e,D,a,s),u="none"==f||""==f?k:this.canvasPattern(H,e,t,k,h),B.push(u);for(var Y=0,U=y.length;Y<U;Y++)y[Y].SeriesIndex==D&&V.push(y[Y].Region);if(-1!=b.indexOf("column")||-1!=b.indexOf("waterfall")||-1!=b.indexOf("bar"))for(var W=0,X=V.length;W<X;W++)this.canvasSeriesRect(V[W],p,m,g,u,!0,i);else"bubble"==b?this.canvasBubbleHighlight(h,V,e,D,u,g,p,m):"scatter"==b&&this.canvasScatterHighlight(V,u,g,p,m);!s&&"none"!=this.model.AreaType&&_&&((i=c[D]).seriesIndex=D,this.canvasHighlightLegend(e,i,o,"Selection_Cluster",x,u))}}else("point"==v&&0==$("#"+e._id+"_Selection_"+n+"_point_"+a+"_canvas").length||"none"==this.model.AreaType)&&(this.selectedPoint=a,w[0]=this.model._isPieOfPie?this._getPieOfPiePoint(a,i):i._visiblePoints[a],H=this.createCanvasElement(e._id+"_Selection_series"+n+"_point_"+a+"_canvas",e.svgWidth,e.svgHeight,x),this.createRect(e,H),u="none"==f||""==f?k:this.canvasPattern(H,e,t,k,o),-1!=b.indexOf("column")||-1!=b.indexOf("waterfall")||-1!=b.indexOf("bar")?this.canvasSeriesRect(y[0],p,m,g,u,!0,i):"pie"==b||"doughnut"==b||"pieofpie"==b?this.canvasHighlightCircle(e,o,a,p,m,g,u,y,b,H):"pyramid"==b||"funnel"==b?this.canvasHighlightPyramid(e,y[0],o,H,p,m,g,u,b):"bubble"==b?this.canvasBubbleHighlight(o,y,e,n,u,g,p,m):"scatter"==b&&this.canvasScatterHighlight(y,u,g,p,m));_&&("cluster"!=v||s)&&this.canvasHighlightLegend(e,i,o,"Selection",x,u),1==i.marker.visible&&"none"!=this.model.AreaType&&this.canvasHighlightMarker(e,i,w,o,H,t,B)},createRect:function(e,t){"none"!=e.model.AreaType&&(t.lineWidth=0,t.strokeStyle="transparent",t.rect(e.model.m_AreaBounds.X,e.model.m_AreaBounds.Y,e.model.m_AreaBounds.Width,e.model.m_AreaBounds.Height),t.clip(),t.stroke(),t.save())},canvasHighlightPyramid:function(e,t,i,s,n,a,r,o,l){""!=i.color?i.color:e.model.pointColors[t.PointIndex];var d=e.model.title.text?ej.EjSvgRender.utils._measureText(e.model.title.text,$(this.svgObject).width()-e.model.margin.left-e.model.margin.right,e.model.title.font):0,i=e.pyrX=("left"===e.model.legend.position.toLowerCase()?e.model.LegendViewerBounds.Width:0)+e.model.elementSpacing+e.model.margin.left,e=e.pyrY=("top"===e.model.legend.position.toLowerCase()?e.model.LegendViewerBounds.Height:0)+(e.model.title.text?e.model._titleLocation.Y+d.height:e.model.margin.top+e.model.elementSpacing),o={opacity:n,stroke:a,"stroke-width":r,fill:o,type:l,d:"M "+(i+t.Line1.x)+" "+(e+t.Line1.y)+" L "+(i+t.Line2.x)+" "+(e+t.Line2.y)+" L "+(i+t.Line3.x)+" "+(e+t.Line3.y)+" L "+(i+t.Line4.x)+" "+(e+t.Line4.y)+" z"};"funnel"==l&&(o.d="M "+(i+t.Line1.x)+" "+(e+t.Line1.y)+" L "+(i+t.Line2.x)+" "+(e+t.Line2.y)+" L "+(i+t.Line3.x)+" "+(e+t.Line3.y)+" L "+(i+t.Line4.x)+" "+(e+t.Line4.y)+" L "+(i+t.Line5.x)+" "+(e+t.Line5.y)+" L "+(i+t.Line6.x)+" "+(e+t.Line6.y)+" z"),ej.EjCanvasRender.prototype.drawPath(o,s)},canvasScatterHighlight:function(e,t,i,s,n){for(var a,r={},o={},l=0;l<e.length;l++)a={startX:e[l].Bounds.X+e[l].Bounds.Height/2,startY:e[l].Bounds.Y+e[l].Bounds.Width/2},o.height=e[l].Bounds.Height,o.width=e[l].Bounds.Width,(r={}).ShapeSize=o,r.cx=a.startX,r.cy=a.startY,r.Style={},r.Style.BorderColor=n,r.Style.Color=t,r.Style.Opacity=s,r.Style.BorderWidth=i,ej.EjSvgRender.chartSymbol._drawCircle(a,r,this,void 0)},canvasBubbleHighlight:function(e,t,i,s,n,a,r,o){for(var l,d,h=0;h<t.length;h++)l=t[h].Bounds.Height/2,""!=e.color?e.color:i.model.seriesColors[s],d={cx:t[h].Bounds.X-this.model.series[s].xAxis.x+l+this.canvasX,cy:t[h].Bounds.Y-this.model.series[s].yAxis.y+l+this.canvasY,r:l,fill:n,"stroke-width":a,opacity:r,stroke:o},ej.EjCanvasRender.prototype.drawCircle(d,void 0)},canvasHighlightCircle:function(e,t,i,s,n,a,r,o,l,d){for(var h=0;h<o.length;h++){""!=t.color?t.color:"series"==t.mode&&1<e.model._visibleSeries.length?e.model.pointColors[h]:e.model.pointColors[i];var c={opacity:s,stroke:n,lineWidth:a,color:r,x:o[h].StartX,y:o[h].StartY,radius:e.model._isPieOfPie?e.model.circularRadius[o[h].PieSeriesIndex]:e.model.circularRadius[o[h].SeriesIndex],innerRadius:e.model.innerRadius[o[h].SeriesIndex],startAngle:o[h].StartAngle,endAngle:o[h].EndAngle,type:l};this.highlightSegment(d,c)}},canvasHighlightMarker:function(e,t,i,s,n,a,r){var o,l,d,h=s,c=h.pattern.toLowerCase(),u=t.type.toLowerCase(),p={},s=""!=h.color?h.color:e.model.seriesColors[t.seriesIndex],m="none"==c||""==c?s:this.canvasPattern(n,e,a,s,h);p.Style={},p.Style.BorderColor=h.border.color,p.Style.Opacity=h.opacity,p.Style.BorderWidth=h.border.width;for(var g=0;g<i.length;g++)i[g].symbolLocation,(o=-1!=u.indexOf("line")||-1!=u.indexOf("area")?i[g].location:i[g].symbolLocation)&&(o="cartesianaxes"==this.model.AreaType?{startX:o.X+this.canvasX,startY:o.Y+this.canvasY}:{startX:o.X,startY:o.Y},l=t.marker,$.each(e.model.symbolShape,function(e){l.shape.toLowerCase()==e.toLowerCase()&&(d=e)}),p.ShapeSize=l.size,p.r=Math.sqrt(l.size.height*l.size.height+l.size.width*l.size.width)/2,p.cx=o.startX,p.cy=o.startY,p.Style.Color=r?r[g]:m,ej.EjSvgRender.chartSymbol["_draw"+d](o,p,e,n))},canvasHighlightLegend:function(e,t,i,s,n,a){var r=this.model._visibleSeries.length,o="none"==e.model.AreaType&&1==r?t.pointIndex:t.seriesIndex,l=e._id+"_"+s+"_Legend"+o+"_canvas";0==$("#"+l).length&&o<t.points.length&&(s=this.createCanvasElement(e._id+"_"+s+"_Legend"+o+"_canvas",e.svgWidth,e.svgHeight,n),r={startX:(n="none"!=e.model.AreaType||"none"==e.model.AreaType&&1<r?e.model.legendRegion[t.seriesIndex]:e.model.legendRegion[t.pointIndex]).Bounds.LegendBound.X+n.Location.startX,startY:n.Bounds.LegendBound.Y+n.Location.startY},t={svgRenderer:e.svgRenderer,svgObject:e.svgObject},a={SeriesIndex:o,Style:{Color:a,Opacity:i.opacity,Visibility:!0,BorderWidth:0,BorderColor:a},context:!0,ShapeSize:n.Style.ShapeSize},"seriestype"==n.SymbolShape.toLowerCase()?(e.legendItem=n.LegendItem,ej.EjSvgRender.chartSymbol["_draw"+n.SymbolShape](r,a,e)):ej.EjSvgRender.chartSymbol["_draw"+n.SymbolShape](r,a,t,s))},createCanvasElement:function(e,t,i,s){var n=document.createElement("canvas");jQuery(this.element).attr("id");n.setAttribute("id",e),n.height=i,n.width=t,n.style["touch-action"]&&(n.style["touch-action"]="none"),n.style["-ms-touch-action"]&&(n.style["-ms-touch-action"]="none"),this.svgRenderer.append(n,this.element);i=document.getElementById(e);return i.style.left=s.left+$(document).scrollLeft()+"px",i.style.top=s.top+$(document).scrollTop()+"px",i.style.position="absolute",t=$("#"+this._id+"_canvas").offset(),e=$(i).offset(),t.left<e.left&&(i.style.left=s.left-Math.abs(t.left-e.left)+$(document).scrollLeft()+"px"),t.top<e.top&&(i.style.top=s.top-Math.abs(t.top-e.top)+$(document).scrollTop()+"px"),n.getContext("2d")},highlightSegment:function(e,t){e.save(),e.beginPath(),"pie"==t.type||"pieofpie"==t.type?(e.moveTo(t.x,t.y),e.arc(t.x,t.y,t.radius,t.startAngle-1.57,t.endAngle-1.57,!1)):(e.arc(t.x,t.y,t.radius,t.startAngle-1.57,t.endAngle-1.57,!1),e.arc(t.x,t.y,t.innerRadius,t.endAngle-1.57,t.startAngle-1.57,!0)),e.fillStyle=t.color,e.globalAlpha=t.opacity,e.fill(),e.lineWidth=t.lineWidth,e.strokeStyle=t.stroke,e.clip(),e.stroke(),e.closePath(),e.restore()},canvasPattern:function(e,t,i,s,n){var a=n,r=(a.name,a.pattern.toLowerCase()),o=s,l=a.opacity,d=(a.border.color,a.border.width,document.createElement("canvas")),h=d.getContext("2d"),n=[];switch(r){case"chessboard":n[0]={x:0,y:0,width:10,height:10,fill:"white",stroke:"white",opacity:l,name:"rect"},n[1]={x:0,y:0,width:5,height:5,fill:o,opacity:l,name:"rect"},n[2]={x:5,y:5,width:5,height:5,fill:o,opacity:l,name:"rect"},d.width=10,d.height=10,this.loadPattern(t,n,"",h);break;case"pacman":n[0]={name:"rect",x:0,y:0,width:18,height:18,transform:"translate(0,0)",fill:"white",opacity:l},n[1]={name:"path",d:"M 9.081 9.194 L 14.887 6.114 C 14.075000000000001 4.618 12.484 3.0620000000000007 10.596 3.0620000000000007 L 8.835 3.0620000000000007 C 6.138 3.063 3 6.151 3 8.723 L 3 10.402000000000001 C 3 12.974 6.138 16.063000000000002 8.835 16.063000000000002 L 10.596 16.063000000000002 C 12.681000000000001 16.063000000000002 14.431000000000001 14.303000000000003 15.131 12.549000000000003 L 9.081 9.194 z","stroke-width":1,stroke:o,fill:o},d.width=18,d.height=18,this.loadPattern(t,n,"",h);break;case"crosshatch":n[0]={x:0,y:0,width:8,height:8,fill:"white",stroke:s,opacity:l,name:"rect"},n[1]={d:"M 0 0 L 8 8 Z","stroke-width":1,stroke:o,name:"path"},n[2]={d:"M 8 0 L 0 8 Z","stroke-width":1,stroke:o,name:"path"},d.width=8,d.height=8,this.loadPattern(t,n,"",h);break;case"dots":n[0]={x:0,y:0,width:7,height:7,transform:"translate(0,0)",fill:"white",opacity:l,name:"rect"},n[1]={cx:3,cy:3,r:2,"stroke-width":1,fill:o,name:"circle"},d.width=7,d.height=7,this.loadPattern(t,n,"",h);break;case"diagonalforward":n[0]={x:0,y:0,width:6,height:6,fill:"white",stroke:s,opacity:l,name:"rect"},n[1]={d:"M 3 -3 L 9 3 M 6 6 L 0 0 M 3 9 L -3 3","stroke-width":2,stroke:o,name:"path"},d.width=6,d.height=6,this.loadPattern(t,n,"",h);break;case"diagonalbackward":n[0]={x:0,y:0,width:6,height:6,"stroke-width":2,fill:"white",stroke:s,opacity:l,name:"rect"},n[1]={d:"M 3 -3 L -3 3 M 0 6 L 6 0 M 9 3 L 3 9","stroke-width":2,stroke:o,name:"path"},d.width=6,d.height=6,this.loadPattern(t,n,"",h);break;case"grid":n[0]={name:"rect",x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:"white",opacity:l},n[1]={name:"path",d:"M 1 3.5 L 11 3.5 M 0 3.5 L 11 3.5 M 0 7.5 L 11 7.5 M 0 11.5 L 11 11.5 M 5.5 0 L 5.5 12 M 11.5 0 L 11.5 12 Z","stroke-width":1,stroke:o},d.width=6,d.height=6,this.loadPattern(t,n,"",h);break;case"turquoise":n[0]={name:"rect",x:0,y:0,width:17,height:17,transform:"translate(0,0)",fill:"white",opacity:l},n[1]={name:"path",d:"M 2.697 0.5319999999999996 C 3.8695005238907747 0.5319999999999996 4.82 1.4771268931071944 4.82 2.643 C 4.82 3.808873106892805 3.8695005238907747 4.754 2.697 4.754 C 1.5244994761092252 4.754 0.5739999999999998 3.808873106892805 0.5739999999999998 2.643 C 0.5739999999999998 1.4771268931071944 1.5244994761092252 0.5319999999999996 2.697 0.5319999999999996 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},n[2]={name:"path",d:"M 13.928 0.5319999999999996 C 15.100500523890776 0.5319999999999996 16.051000000000002 1.4771268931071944 16.051000000000002 2.643 C 16.051000000000002 3.808873106892805 15.100500523890776 4.754 13.928 4.754 C 12.755499476109225 4.754 11.805 3.808873106892805 11.805 2.643 C 11.805 1.4771268931071944 12.755499476109225 0.5319999999999996 13.928 0.5319999999999996 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},n[3]={name:"path",d:"M 8.313 0.5319999999999996 C 9.485500523890776 0.5319999999999996 10.436 1.4771268931071944 10.436 2.643 C 10.436 3.808873106892805 9.485500523890776 4.754 8.313 4.754 C 7.140499476109226 4.754 6.19 3.808873106892805 6.19 2.643 C 6.19 1.4771268931071944 7.140499476109226 0.5319999999999996 8.313 0.5319999999999996 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},n[4]={name:"path",d:"M 13.928 6.16 C 15.100500523890776 6.16 16.051000000000002 7.105126893107196 16.051000000000002 8.271 C 16.051000000000002 9.436873106892806 15.100500523890776 10.382000000000001 13.928 10.382000000000001 C 12.755499476109225 10.382000000000001 11.805 9.436873106892806 11.805 8.271 C 11.805 7.105126893107196 12.755499476109225 6.16 13.928 6.16 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},n[5]={name:"path",d:"M 8.313 6.16 C 9.485500523890776 6.16 10.436 7.105126893107196 10.436 8.271 C 10.436 9.436873106892806 9.485500523890776 10.382000000000001 8.313 10.382000000000001 C 7.140499476109226 10.382000000000001 6.19 9.436873106892806 6.19 8.271 C 6.19 7.105126893107196 7.140499476109226 6.16 8.313 6.16 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},n[6]={name:"path",d:"M 13.928 11.787999999999998 C 15.100500523890776 11.787999999999998 16.051000000000002 12.733126893107194 16.051000000000002 13.899 C 16.051000000000002 15.064873106892804 15.100500523890776 16.009999999999998 13.928 16.009999999999998 C 12.755499476109225 16.009999999999998 11.805 15.064873106892804 11.805 13.899 C 11.805 12.733126893107194 12.755499476109225 11.787999999999998 13.928 11.787999999999998 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},n[7]={name:"path",d:"M 8.313 11.787999999999998 C 9.485500523890776 11.787999999999998 10.436 12.733126893107194 10.436 13.899 C 10.436 15.064873106892804 9.485500523890776 16.009999999999998 8.313 16.009999999999998 C 7.140499476109226 16.009999999999998 6.19 15.064873106892804 6.19 13.899 C 6.19 12.733126893107194 7.140499476109226 11.787999999999998 8.313 11.787999999999998 Z","stroke-width":1,"stroke-miterlimit":10,stroke:o,fill:o},d.width=17,d.height=17,this.loadPattern(t,n,"",h);break;case"star":n[0]={name:"rect",x:0,y:0,width:21,height:21,transform:"translate(0,0)",fill:"white",opacity:l},n[1]={name:"path",d:"M 15.913 18.59 L 10.762 12.842 L 5.613 18.75 L 8.291 11.422 L 0.325 9.91 L 8.154 8.33 L 5.337 0.91 L 10.488 6.658 L 15.637 0.75 L 12.959 8.078 L 20.925 9.59 L 13.096 11.17 z","stroke-width":1,stroke:o,fill:o},d.width=21,d.height=21,this.loadPattern(t,n,"",h);break;case"triangle":n[0]={name:"rect",x:0,y:0,width:10,height:10,fill:"white",opacity:l},n[1]={name:"path",d:"M 4.987 0 L 7.48 4.847 L 9.974 9.694 L 4.987 9.694 L 0 9.694 L 2.493 4.847 z","stroke-width":1,stroke:o,fill:o},d.width=10,d.height=10,this.loadPattern(t,n,"",h);break;case"circle":n[0]={name:"rect",x:0,y:0,width:9,height:9,transform:"translate(0,0)",fill:"white",opacity:l},n[1]={name:"circle",cx:5.125,cy:3.875,r:3.625,"stroke-width":1,fill:o},d.width=9,d.height=9,this.loadPattern(t,n,"",h);break;case"tile":n[0]={name:"rect",x:0,y:0,width:18,height:18,transform:"translate(0,0)",fill:"white",opacity:l},n[1]={name:"path",d:"M 0 9 L 0 0 L 9 0 z","stroke-width":1,stroke:o,fill:o},n[2]={name:"path",d:"M 9 9 L 9 0 L 18 0 z","stroke-width":1,stroke:o,fill:o},n[3]={name:"path",d:"M 0 18 L 0 9 L 9 9 z","stroke-width":1,stroke:o,fill:o},n[4]={name:"path",d:"M 9 18 L 9 9 L 18 9 z","stroke-width":1,stroke:o,fill:o},d.width=18,d.height=18,this.loadPattern(t,n,"",h);break;case"horizontaldash":n[0]={name:"rect",x:0,y:0,width:12,height:12,transform:"translate(0,0)",fill:"white",opacity:l},n[1]={name:"path",d:"M 0 1.5 L 10 1.5 M 0 5.5 L 10 5.5 M 0 9.5 L 10 9.5 z","stroke-width":1,stroke:o,fill:o},d.width=12,d.height=12,this.loadPattern(t,n,"",h);break;case"verticaldash":n[0]={name:"rect",x:0,y:0,width:12,height:12,transform:"translate(0,0)",fill:"white",opacity:l},n[1]={name:"path",d:"M 1.5 0 L 1.5 10 M 5.5 0 L 5.5 10 M 9.5 0 L 9.5 10 z","stroke-width":1,stroke:o,fill:o},d.width=12,d.height=12,this.loadPattern(t,n,"",h);break;case"rectangle":n[0]={x:0,y:0,name:"rect",width:12,height:12,fill:"white",opacity:l},n[1]={name:"rect",x:1,y:2,width:4,height:9,fill:o,opacity:l},n[2]={name:"rect",x:7,y:2,width:4,height:9,fill:o,opacity:l},d.width=12,d.height=12,this.loadPattern(t,n,"",h);break;case"box":n[0]={x:0,y:0,name:"rect",width:13,height:13,fill:"white",opacity:l},n[1]={name:"rect",x:1.5,y:1.5,width:10,height:9,fill:o,opacity:l},d.width=10,d.height=10,this.loadPattern(t,n,"",h);break;case"horizontalstripe":n[0]={name:"rect",x:0,y:0,width:10,height:12,transform:"translate(0,0)",fill:"white",opacity:l},n[1]={name:"path",d:"M 0 0.5 L 10 0.5 M 0 4.5 L 10 4.5 M 0 8.5 L 10 8.5 z","stroke-width":1,stroke:o,fill:o},d.width=10,d.height=12,this.loadPattern(t,n,"",h);break;case"verticalstripe":n[0]={name:"rect",x:0,y:0,width:12,height:10,transform:"translate(0,0)",fill:"white",opacity:l},n[1]={name:"path",d:"M 0.5 0 L 0.5 10 M 4.5 0 L 4.5 10 M 8.5 0 L 8.5 10 z","stroke-width":1,stroke:o,fill:o},d.width=12,d.height=10,this.loadPattern(t,n,"",h);break;case"bubble":n[0]={name:"rect",x:0,y:0,width:20,height:20,transform:"translate(0,0)",fill:"#ffffff",opacity:l},n[1]={name:"circle",cx:5.217,cy:11.325,r:3.429,"stroke-width":1,fill:"#D0A6D1"},n[2]={name:"circle",cx:13.328,cy:6.24,r:4.884,"stroke-width":1,fill:o},n[3]={name:"circle",cx:13.277,cy:14.66,r:3.018,"stroke-width":1,fill:"#D0A6D1"},d.width=20,d.height=20,this.loadPattern(t,n,"",h);break;case"custom":d=document.getElementById(a.customPattern)}return e.createPattern(d,"repeat")},foundClasses:function(e){var t=[];return $("[id*="+e+"]").each(function(){var e=$(this).attr("class")?$(this).attr("class"):"";0<=e.indexOf("Selection")&&t.push(e)}),t},selection:function(t,e,i,s,n,a,r,o,l,d){(R=this.model.clusterPoints)&&R.length;var h,c=this.model._visibleSeries,u=c.length,p="none"==this.model.AreaType&&1==u?r:a,m=i.selectionSettings,g=(this.model._visibleSeries[a].selectionSettings.type.toLowerCase(),"series"+a),f=!1,_=($("#"+l).attr("name"),m.pattern.toLowerCase()),v=m.mode;if(o&&(h=0<=o.indexOf(this.svgObject.id+"_SeriesGroup_")||0<=o.indexOf(this.svgObject.id+"_Chart3D")),("none"!=this.model.AreaType||"none"==this.model.AreaType&&"series"==v&&1<u)&&$("style").each(function(){-1<$(this).html().indexOf("."+t._id+"SelectionStyle"+g)&&(f=!0)}),!t.vmlRendering&&this.model.enable3D)"series"!=v&&!n||"none"==this.model.AreaType&&("none"!=this.model.AreaType||1==u)?"cluster"==v&&"none"!=t.model.AreaType?this.highlightCluster(t,a,r,"Selection",g,m,e,d):"none"==this.model.AreaType?(this.highlightPoint(t,a,r,"Selection",g+p,m,e,d),$("#"+this.svgObject.id+"_LegendItemShape"+p).attr("class","Selection"+g+p+"Style"+g+p+"1")):(this.highlightPoint(t,a,r,"Selection",g,m,e,d),$("#"+this.svgObject.id+"_LegendItemShape"+p).attr("class","Selection"+g+"Style"+g+"1")):(this.highlightSeries(t,a,r,"Selection",g,m,e,n,d),$("#"+this.svgObject.id+"_LegendItemShape"+p).attr("class","Selection"+g+"Style"+g+"1"));else if("cluster"==v&&!n&&"none"!=t.model.AreaType||((y={name:"2D"}).index="none"==this.model.AreaType?p:a,y.api="Selection",y.color=""!=m.color?m.color:n?("none"==this.model.AreaType?this.model.pointColors:this.model.seriesColors)[p]:"none"!=$("#"+l).attr("fill")?$("#"+l).attr("fill"):$("#"+l).attr("stroke"),"[object Array]"===Object.prototype.toString.call(y.color)&&(y.color=y.color[1].color),I="none"==_||t.vmlRendering||""==_?m.color:this.pattern(t,e,y,m),w=m.opacity,O=m.border.color,D=m.border.width,f||("none"==this.model.AreaType&&(("series"==v||n)&&1==u||"series"!=v&&!n)?($("style").each(function(){-1<$(this).html().indexOf(".SelectionStyle"+g+"Point"+p)&&(f=!0)}),f||(this.createStyle(t,t._id+"Selection",g+"Point"+p,w,I,O,D),this.createStyle(t,t._id+"SelectionLegend",g+"Point"+p,w,I,"transparent",0))):("none"==this.model.AreaType&&1<u||"none"!=this.model.AreaType)&&(this.createStyle(t,t._id+"Selection",g,w,I,O,D),this.createStyle(t,t._id+"SelectionLegend",g,w,I,"transparent",0)))),("series"==v||n)&&("none"==t.model.AreaType&&1<u||"none"!=t.model.AreaType)){if(!h)for(var b=$("#"+o).childNodes?$("#"+o).childNodes:[],x=0;x<b.length;x++)$("#"+b[x].id).attr("class",t._id+"SelectionStyle");$("[id*="+this.svgObject.id+"_Series"+p+"]").each(function(){var e;this.parentNode.id!=t.svgObject.id+"_SeriesGroup_"+p&&this.parentNode.id!=t.svgObject.id+"_symbolGroup_"+p||(e=$(this).attr("name")?t._id+"SelectionPathStyle"+g:t._id+"SelectionStyle"+g,$(this).attr("class",e))}),$("#"+this.svgObject.id+"_LegendItemShape"+p).attr("class",t._id+"SelectionLegendStyle"+g),s&&$("#"+o).remove()}else if("cluster"!=v||"none"==t.model.AreaType||ej.util.isNullOrUndefined(l)){if($("#"+l).attr("name")||l==t.svgObject.id+"_Series"+p||"none"==t.model.AreaType)$("#"+l).attr("class",t._id+"SelectionStyle"+g+"Point"+p),$("#"+this.svgObject.id+"_LegendItemShape"+p).attr("class",t._id+"SelectionLegendStyle"+g+"Point"+p),s&&$("#"+o).remove();else{if($("#"+l).attr("class",t._id+"SelectionStyle"+g),"cylinder"==this.model.commonSeriesOptions.columnFacet||"cylinder"==i.columnFacet)for(x=0;x<2;x++)$("#"+l.replace(/2$/,x)).attr("class",t._id+"SelectionStyle"+g);$("#"+this.svgObject.id+"_LegendItemShape"+p).attr("class",t._id+"SelectionLegendStyle"+g),$("#"+l+"_symbol").attr("class",t._id+"SelectionStyle"+g),s&&($("#"+l+"_symbol").attr("class",t._id+"SelectionStyle"+g),$("#"+o).remove())}null!=(j=$("#"+l).attr("name"))&&("candle"==j||0<=j.indexOf("hilo"))&&($("[id$="+l+"]").attr("class",t._id+"SelectionStyle"+g),$("#"+this.svgObject.id+"_LegendItemShape"+p).attr("class",t._id+"SelectionLegendStyle"+g))}else{var y,w,C,S,T=this.svgObject.id+"_Series",R=t.model.clusterPoints,p=l.match(/(\d+)/g);r=parseInt(p[p.length-1]),0<=l.indexOf("SeriesText")&&(r=this.GetSeriesPoint(e).region.Region.PointIndex);for(var k=0;k<R.length;k++){S=R[k].seriesIndex,g="ClusterSeries"+S,(y={}).index=S,y.name="2D",y.api="Selection"+g,m=c[S].selectionSettings,y.color=""!=m.color?m.color:this.model.seriesColors[S],"[object Array]"===Object.prototype.toString.call(y.color)&&(y.color=y.color[1].color),w=m.opacity;var O=m.border.color,D=m.border.width,I="none"==_||t.vmlRendering||""==_?y.color:this.pattern(t,e,y,m);$("style").each(function(){-1<$(this).html().indexOf("."+t._id+"SelectionStyle"+g)&&(C=!0)}),C||(this.createStyle(t,t._id+"Selection",g,w,I,O,D),this.createStyle(t,t._id+"SelectionLegend",g,w,I,"transparent",0));var j,L=$("#"+T+R[k].seriesIndex+"_Point"+R[k].pointIndex).attr("name")?t._id+"SelectionPathStyle"+g:t._id+"SelectionStyle"+g;$("#"+T+R[k].seriesIndex+"_Point"+R[k].pointIndex).attr("class",L),$("#"+T+R[k].seriesIndex+"_Point"+R[k].pointIndex+"_symbol").attr("class",L),"hidden"!=t.model._visibleSeries[S].visibility&&$("#"+this.svgObject.id+"_LegendItemShape"+S).not("[class*='Highlight']").attr("class",t._id+"SelectionLegendStyle"+g),null!=(j=$("#"+l).attr("name"))&&("candle"==j||0<=j.indexOf("hilo"))&&$("[id$="+T+R[k].seriesIndex+"_Point"+R[k].pointIndex+"]").attr("class","HighlightStyle"+g)}s&&($("#"+this.svgObject.id+"_Series"+S+"_Point"+r).attr("class",t._id+"SelectionStyle"+g),$("#"+this.svgObject.id+"_Series"+S+"_Point"+r+"_symbol").attr("class",t._id+"SelectionStyle"+g),$("#"+o).remove())}},removeSelection:function(e,t,i,s,n,a,r){var o,l=i.length,d=this.model.clusterPoints,h=d?d.length:0;if(("series"==s||a)&&("none"!=this.model.AreaType||"none"==this.model.AreaType&&1<l))for(var c=0;c<l;c++)"point"!=(o=i[c].selectionSettings).mode&&"single"==o.type.toLowerCase()||a&&"single"==o.type.toLowerCase()?($(this.svgObject).find("[id*="+this.svgObject.id+"_SeriesGroup_"+c+"],[id*="+this.svgObject.id+"_symbolGroup_"+c+"],[id*=_Region_Series_"+c+"_]").each(function(){$(this).find("*").attr("class",""),$(this).attr("class","")}),$("#"+this._id+"_Selection_Legend"+c+"_canvas").remove(),$("#"+this._id+"_Selection_series"+c+"_canvas").remove(),$("[id*=_Region_Series_"+c+"]").attr("class",""),$("#"+this.svgObject.id+"_LegendItemShape"+c).attr("class","")):r&&"multiple"==o.type.toLowerCase()&&($("#"+this._id+"_Selection_series"+e+"_canvas").remove(),$("#"+this._id+"_Selection_Legend"+e+"_canvas").remove(),$("[id*=_Region_Series_"+e+"]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+e+"]").attr("class",""),$("#"+this.svgObject.id+"_LegendItemShape"+e).attr("class",""));if("cluster"==s&&"none"!=this.model.AreaType&&!a)if(n)if(this.model.enableCanvasRendering)$("[id*="+this._id+"_Selection_Cluster_point_"+t+"]").remove(),0==$("[id*="+this._id+"_Selection_Cluster]").length&&$("[id*="+this._id+"_SelectionCluster_Legend]").remove();else{for(u=0;u<h;u++)$("[id*=_Region_Series_"+d[u].seriesIndex+"_Point_"+d[u].pointIndex+"]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+d[u].seriesIndex+"_Point"+d[u].pointIndex+"]").attr("class","");0==(this.model.enable3D?this.foundClasses("_Region_Series_"+e):this.foundClasses(this.svgObject.id+"_Series"+e)).length&&$("[id*="+this.svgObject.id+"_LegendItemShape]").attr("class","")}else if(this.model.enableCanvasRendering)$("[id*="+this._id+"_Selection_Cluster]").remove(),$("[id*="+this._id+"_SelectionCluster_Legend]").remove(),this.selectedPoint=null;else for(var u=0;u<h;u++)$("[id*=_Region_Series_"+d[u].seriesIndex+"_Point_]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+d[u].seriesIndex+"_Point]").attr("class",""),$("#"+this.svgObject.id+"_LegendItemShape"+d[u].seriesIndex).attr("class","");"point"!=s||"none"==this.model.AreaType||a||(n?($("#"+this._id+"_Selection_series"+e+"_point_"+t+"_canvas").remove(),$("[id*=_Region_Series_"+e+"_Point_"+t+"]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+e+"_Point"+t+"]").attr("class",""),0==$("[id*="+this._id+"_Selection_series"+e+"]").length&&$("#"+this._id+"_Selection_Legend"+e+"_canvas").remove(),0==(this.model.enable3D?this.foundClasses("_Region_Series_"+e):this.foundClasses(this.svgObject.id+"_Series"+e)).length&&$("#"+this.svgObject.id+"_LegendItemShape"+e).attr("class","")):($("[id*="+this._id+"_Selection_series"+e+"_point_]").remove(),$("[id*="+this._id+"_Selection_Legend"+e+"]").remove(),$("[id*=_Region_Series_"+e+"_Point_]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+e+"_Point]").attr("class",""),$("#"+this.svgObject.id+"_LegendItemShape"+e).attr("class",""))),"point"!=s&&"cluster"!=s&&("series"!=s||1!=this.model._visibleSeries.length||"none"!=this.model.AreaType||a)||(n?($("#"+this._id+"_Selection_series"+e+"_point_"+t+"_canvas").remove(),$("[id*=_Region_Series_"+e+"_Point_"+t+"]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+e+"_Point"+t+"]").attr("class",""),(1<this.model._visibleSeries.length?$("#"+this.svgObject.id+"_LegendItemShape"+e):$("#"+this.svgObject.id+"_LegendItemShape"+t)).attr("class",""),(1<this.model._visibleSeries.length?$("#"+this._id+"_Selection_Legend"+e+"_canvas"):$("#"+this._id+"_Selection_Legend"+t+"_canvas")).remove()):($("[id*="+this._id+"_Selection_series]").remove(),$("[id*="+this._id+"_Selection_Legend]").remove(),$("[id*=_Region_Series_"+e+"_Point_]").attr("class",""),$("[id*="+this.svgObject.id+"_Series"+e+"_Point]").attr("class",""),(1<this.model._visibleSeries.length?$("[id*="+this.svgObject.id+"_LegendItemShape"+e+"]"):$("[id*="+this.svgObject.id+"_LegendItemShape]")).attr("class","")))},createStyle:function(e,t,i,s,n,a,r,o){var l;e.vmlRendering?((l=document.createElement("style")).id=t+"Segment",e="."+t+"Style"+i+" {filter: alpha(opacity="+(s*=100)+");}."+t+"PathStyle"+i+"  {filter: alpha(opacity="+s+");}",l.setAttribute("type","text/css"),l.styleSheet?l.styleSheet.cssText=e:(e=document.createTextNode(e),l.appendChild(e)),document.getElementsByTagName("head")[0].appendChild(l)):($("<style id="+t+"Segment"+i+" type='text/css'> ."+t+"Style"+i+"{ fill:"+n+";opacity:"+s+";stroke:"+a+";stroke-width:"+r+";stroke-opacity:"+o+"}</style>").appendTo("body"),$("<style id="+t+"Path"+i+" type='text/css'> ."+t+"PathStyle"+i+"{ opacity:"+s+";stroke:"+a+";stroke-width:"+r+";stroke-opacity:"+o+"}</style>").appendTo("body"))},highlightPoint:function(e,t,i,s,n,a,r){for(var o="_Region_Series_"+t+"_Point_"+i,l=$(this.svgObject).find("[id$="+o+"],[id*="+o+"back],[id*="+o+"front]"),d=0;d<l.length;d++){var h=[];h.api=s+n,h.seriesName=n,h.name=$("[id="+l[d].id+"]").attr("name"),h.index=d;var c=this.highlightFill(a,e,t,i),u=$("#"+l[d].id).attr("class");(u=u||"").indexOf("Selection")<0&&$("[id="+l[d].id+"]").attr("class",this.dStyle(h,c,e,r,a))}},highlightCluster:function(e,t,i,s,n,a,r){if("none"!=e.model.AreaType){for(var o,l,d,h,c,u=[],p=e.model._visibleSeries[t]._visiblePoints[i].x,m=0,g=e.model._visibleSeries.length;m<g;m++)for(var f=0;f<e.model._visibleSeries[m]._visiblePoints.length;f++)p==e.model._visibleSeries[m]._visiblePoints[f].x&&(u[u.length]={seriesIndex:m,pointIndex:f});for(var _=0;_<u.length;_++){n="series"+_,o="_Region_Series_"+u[_].seriesIndex+"_Point_"+u[_].pointIndex,l=$(this.svgObject).find("[id$="+o+"],[id*="+o+"back],[id*="+o+"front]");for(f=0;f<l.length;f++)(d=[]).api=s+n,d.seriesName="series"+_,d.name=$("[id="+l[f].id+"]").attr("name"),d.index=f,t=_,a="Highlight"==s?e.model._visibleSeries[_].highlightSettings:e.model._visibleSeries[_].selectionSettings,h=this.highlightFill(a,e,t,i),(c=(c=$("#"+l[f].id).attr("class"))||"").indexOf("Selection"+n+"Style")<0&&c.indexOf("SelectionStyle")<0&&$("[id="+l[f].id+"]").attr("class",this.dStyle(d,h,e,r,a));"Highlight"==s?$("#"+this.svgObject.id+"_LegendItemShape"+_).not("[class*='Selection']").attr("class","Highlight"+n+"Style"+n+"1"):$("#"+this.svgObject.id+"_LegendItemShape"+_).attr("class","Selection"+n+"Style"+n+"1")}}},highlightSeries:function(e,t,i,s,n,a,r,o){var l,d,t=t,h=i,c=e.model._visibleSeries.length,c="none"==e.model.AreaType&&1==c?"_Region_Series_"+t+"_Point_"+i:"_Region_Series_"+t+"_Point_",u=$(this.svgObject).find("[id*="+c+"]"),p=o?$("#"+this.svgObject.id+"_LegendItemShape"+i).attr("class"):r?$("#"+r.target.id).attr("class"):"";if((p=p||"").indexOf("SelectionStyle")<0||o)for(var m=0;m<u.length;m++)(l=[]).api=s+n,l.seriesName=n,l.name=$("[id="+u[m].id+"]").attr("name"),l.index=m,d=this.highlightFill(a,e,t,h,o),(p=(p=$("#"+u[m].id).attr("class"))||"").indexOf("SelectionStyle")<0&&p.indexOf("Selection"+n+"Style")<0&&$("[id="+u[m].id+"]").attr("class",this.dStyle(l,d,e,r,a))},highlight:function(i,e,t,s,n,a,r,o){var l=t.highlightSettings,d=$.inArray(t,i.model._visibleSeries),h="series"+d,c=!1,u=d,p=r||e.target.id,r=jQuery.uaMatch(navigator.userAgent);!o&&this.isTouch(e)&&"chrome"==r.browser&&(w=e.originalEvent.changedTouches[0],p=document.elementFromPoint(w.clientX,w.clientY).id);var m,g,f,_,v,b,x,r=0<=(a=a||e.target.parentNode.id).indexOf(this.svgObject.id+"_SeriesGroup_")||0<=a.indexOf(this.svgObject.id+"_Chart3D"),y=($("#"+p).attr("name"),l.pattern.toLowerCase()),w=i.model._visibleSeries.length;if("none"==i.model.AreaType&&1==w&&(u=i.model.enable3D?(s?s.legendItem.LegendItem:n.region.Region).PointIndex:(x=s?this.svgObject.id+"_LegendItemShape":this.svgObject.id+"_Series"+d+"_Point",m=(s?this.svgObject.id+"_LegendItemShape"+s.legendItem.LegendItem.PointIndex:p).substr(x.length))),$("style").each(function(){-1<$(this).html().indexOf(".HighlightStyle"+h)&&(c=!0)}),i.model.enable3D&&!i.vmlRendering)"series"!=l.mode&&!s||("none"!=i.model.AreaType||1==w)&&"none"==i.model.AreaType?"cluster"==l.mode&&"none"!=i.model.AreaType?this.highlightCluster(i,d,n.pointData.pointIndex,"Highlight",h,l,e):(m=n?n.pointData.pointIndex:u,this.highlightPoint(i,d,m,"Highlight",h+m,l,e),$("#"+this.svgObject.id+"_LegendItemShape"+u).not("[class*='Selection']").attr("class","Highlight"+h+m+"Style"+h+m+"1")):(this.highlightSeries(i,d,u,"Highlight",h,l,e,s),$("#"+this.svgObject.id+"_LegendItemShape"+u).not("[class*='Selection']").attr("class","Highlight"+h+"Style"+h+"1"));else if(!l.mode&&"none"!=this.model.AreaType||((g={name:"2D"}).index=d,g.api="Highlight",g.color=""!=l.color?l.color:s?("none"==this.model.AreaType?this.model.pointColors:this.model.seriesColors)[u]:$("#"+p).attr("fill"),"[object Array]"===Object.prototype.toString.call(g.color)&&(g.color=g.color[1].color),f="none"==y||i.vmlRendering||""==y?l.color:this.pattern(i,e,g,l),_=o?1:l.opacity,v=o?-1==t.type.toLowerCase().indexOf("hilo")?i.model.highlightColor:f:l.border.color,b=o?3.5:l.border.width,x=o&&-1==t.type.toLowerCase().indexOf("hilo")?.5:1,c||(this.createStyle(i,"Highlight",h,_,f,v,b,x),this.createStyle(i,"HighlightLegend",h,_,f,"transparent",0,x))),-1==(E=(E=$(s?"#"+this.svgObject.id+"_LegendItemShape"+u:"#"+p).attr("class"))||"").indexOf("Selection"))if(("series"==l.mode&&!o||s)&&("none"==i.model.AreaType&&1!=w||"none"!=i.model.AreaType))$("[id*="+this.svgObject.id+"_Series"+u+"]").each(function(){var e,t;this.parentNode.id!=i.svgObject.id+"_SeriesGroup_"+u&&this.parentNode.id!=i.svgObject.id+"_symbolGroup_"+u||(e=$(this).attr("class"),t=$(this).attr("name")?"HighlightPathStyle"+h:"HighlightStyle"+h,(null==e||-1==e.indexOf("SelectionStyle"))&&e!="SelectionStyle"+h&&e!="SelectionStyleClusterSeries"+d&&e!="SelectionPathStyle"+h&&a.indexOf(i.svgObject.id+"_symbolGroup_"+u)<=0&&$(this).attr("class",t))}),$("#"+this.svgObject.id+"_LegendItemShape"+u).not("[class*='Selection']").attr("class","HighlightLegendStyle"+h);else if("cluster"!=l.mode||"none"==i.model.AreaType||o){if(!$("#"+p).attr("name")&&p!=i.svgObject.id+"_Series"+u){if(0!=(A=$("#"+p).attr("class")?$("#"+p).attr("class"):"").indexOf("Selection")&&a.indexOf(i.svgObject.id+"_symbolGroup_"+u)<=0&&(n||s)){if(r&&($("#"+p).attr("class","HighlightStyle"+h),"cylinder"==this.model.commonSeriesOptions.columnFacet||"cylinder"==t.columnFacet))for(O=0;O<2;O++)$("#"+p.replace(/2$/,O)).attr("class","HighlightStyle"+h);$("#"+p+"_symbol").attr("class","HighlightStyle"+h),$("#"+this.svgObject.id+"_Series"+d+"_Point"+m).not("[class*='Selection']").attr("class","HighlightStyle"+h),$("#"+this.svgObject.id+"_LegendItemShape"+u).not("[class*='Selection']").attr("class","HighlightLegendStyle"+h)}-1<p.indexOf("symbol")&&$("#"+p).attr("class","HighlightStyle"+h)}null!=(L=$("#"+p).attr("name"))&&("candle"==L||0<=L.indexOf("hilo"))&&($("[id$="+p+"]").attr("class","HighlightStyle"+h),$("#"+this.svgObject.id+"_LegendItemShape"+u).not("[class*='Selection']").attr("class","HighlightLegendStyle"+h))}else{var C,S=this.svgObject.id+"_Series",T=[];if((u=p.match(/(\d+)/g))&&0<p.toLowerCase().indexOf("point")){m=parseInt(u[u.length-1]);for(var R,k=i.model._visibleSeries[d]._visiblePoints[m].xValue,O=0,D=i.model._visibleSeries.length;O<D;O++)for(var I=0;I<i.model._visibleSeries[O]._visiblePoints.length;I++)k==(R=i.model._visibleSeries[O]._visiblePoints[I]).xValue&&0==R.isEmpty&&1==R.visible&&(T[T.length]={seriesIndex:O,pointIndex:I})}for(var j=0;j<T.length;j++){C=T[j].seriesIndex,(g={name:"2D"}).api="Highlight"+(h="series"+C),l=i.model._visibleSeries[C].highlightSettings,g.color=""!=l.color?l.color:this.model.seriesColors[C],"[object Array]"===Object.prototype.toString.call(g.color)&&(g.color=g.color[1].color),_=l.opacity,v=l.border.color,b=l.border.width,f="none"==y||i.vmlRendering||""==y?g.color:this.pattern(i,e,g,l),c||(this.createStyle(i,"Highlight",h,_,f,v,b),this.createStyle(i,"HighlightLegend",h,_,f,"transparent",0));var L,A=$("#"+S+T[j].seriesIndex+"_Point"+T[j].pointIndex).attr("class"),E=($("#"+S+T[j].seriesIndex+"_Point"+T[j].pointIndex+"_symbol").attr("class"),$("#"+S+T[j].seriesIndex+"_Point"+T[j].pointIndex).attr("name")?"HighlightPathStyle"+h:"HighlightStyle"+h);(null==A||-1==A.indexOf("SelectionStyleseries"+j))&&A!="SelectionStyleseries"+j&&A!="SelectionPathStyle"+h&&a.indexOf(i.svgObject.id+"_symbolGroup_"+j)<=0&&($("#"+S+T[j].seriesIndex+"_Point"+T[j].pointIndex).attr("class",E),$("#"+S+T[j].seriesIndex+"_Point"+T[j].pointIndex+"_symbol").attr("class",E)),"hidden"!=i.model._visibleSeries[C].visibility&&$("#"+this.svgObject.id+"_LegendItemShape"+C).not("[class*='Selection']").attr("class","HighlightLegendStyle"+h),null!=(L=$("#"+p).attr("name"))&&("candle"==L||0<=L.indexOf("hilo"))&&$("[id$="+S+T[j].seriesIndex+"_Point"+T[j].pointIndex+"]").attr("class","HighlightStyle"+h)}}},dStyle:function(e,t,i,s,n){var a=ej.Ej3DRender.prototype.polygon3D.prototype,r=n,o=e.api,l=e.seriesName,n=r.opacity;t=i.colorNameToHex(t),"XLight"==e.name?t=a.applyXLight(t,i):"ZLight"==e.name&&(t=a.applyZLight(t,i));var d,a={};return a.name=e.name,a.color=t,a.api=o,t="none"==r.pattern?t:this.pattern(i,s,a,r),document.getElementById(o+"Segment"+l)?(d=document.getElementById(o+"Segment"+l)).innerHTML=d.innerHTML+"."+o+"Style"+l+e.index+" { fill:"+t+";opacity:"+n+" }":((d=document.createElement("style")).id=o+"Segment"+l,d.type="text/css",d.innerHTML="."+o+"Style"+l+e.index+" { fill:"+t+";opacity:"+n+" }",document.getElementsByTagName("head")[0].appendChild(d)),o+"Style"+l+e.index},pattern:function(e,t,i,s){var n,a=s,r=i.api,o=a.pattern.toLowerCase(),l=i.color,s=""!=a.opacity?a.opacity:$("#"+t.target.id).attr("opacity"),t="#ffffff";document.getElementById(r+"Def")?n=$("#"+r+"Def")[0]:(d={id:r+"Def"},n=e.svgRenderer.createPattern(d,"svg"),e.svgRenderer.append(n,e.svgObject)),e.model.enable3D&&(t="XLight"==i.name?"#595959":"ZLight"==i.name?"#737373":"#808080"),"#"+o+"_"+r+"_"+i.name+"_"+i.index&&$("#"+o+"_"+r+"_"+i.name+"_"+i.index).remove();var d=[];switch(o){case"chessboard":var h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",x:0,y:0,width:10,height:10},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={x:0,y:0,width:10,height:10,fill:t,opacity:s,name:"rect"},d[1]={x:0,y:0,width:5,height:5,fill:l,opacity:s,name:"rect"},d[2]={x:5,y:5,width:5,height:5,fill:l,opacity:s,name:"rect"},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"pacman":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"17.917",height:"18.384"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:17.917,height:18.384,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"path",d:"M9.081,9.194l5.806-3.08c-0.812-1.496-2.403-3.052-4.291-3.052H8.835C6.138,3.063,3,6.151,3,8.723v1.679   c0,2.572,3.138,5.661,5.835,5.661h1.761c2.085,0,3.835-1.76,4.535-3.514L9.081,9.194z","stroke-width":1,stroke:l,fill:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"crosshatch":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"8",height:"8"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={x:0,y:0,width:8,height:8,transform:"translate(0,0)",fill:t,opacity:s,name:"rect"},d[1]={d:"M0 0L8 8ZM8 0L0 8Z","stroke-width":1,stroke:l,name:"path"},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"dots":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"6",height:"6"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={x:0,y:0,width:7,height:7,transform:"translate(0,0)",fill:t,opacity:s,name:"rect"},d[1]={cx:3,cy:3,r:2,"stroke-width":1,fill:l,name:"circle"},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"diagonalforward":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"6",height:"6"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:t,opacity:s,name:"rect"},d[1]={d:"M 3 -3 L 9 3 M 6 6 L 0 0 M 3 9 L -3 3","stroke-width":2,stroke:l,name:"path"},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"diagonalbackward":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"6",height:"6"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:t,opacity:s,name:"rect"},d[1]={d:"M 3 -3 L -3 3 M 0 6 L 6 0 M 9 3 L 3 9","stroke-width":2,stroke:l,name:"path"},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"grid":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"6",height:"6"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:6,height:6,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"path",d:"M1 3.5L11 3.5 M0 3.5L11 3.5 M0 7.5L11 7.5 M0 11.5L11 11.5 M5.5 0L5.5 12 M11.5 0L11.5 12Z","stroke-width":1,stroke:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"turquoise":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"17",height:"17"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:17,height:17,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"path",d:"M0.5739999999999998,2.643a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:l,fill:l},d[2]={name:"path",d:"M11.805,2.643a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:l,fill:l},d[3]={name:"path",d:"M6.19,2.643a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:l,fill:l},d[4]={name:"path",d:"M11.805,8.217a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:l,fill:l},d[5]={name:"path",d:"M6.19,8.217a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:l,fill:l},d[6]={name:"path",d:"M11.805,13.899a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:l,fill:l},d[7]={name:"path",d:"M6.19,13.899a2.123,2.111 0 1,0 4.246,0a2.123,2.111 0 1,0 -4.246,0","stroke-width":1,"stroke-miterlimit":10,stroke:l,fill:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"star":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"21",height:"21"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:21,height:21,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"path",d:"M15.913,18.59L10.762 12.842 5.613 18.75 8.291 11.422 0.325 9.91 8.154 8.33 5.337 0.91 10.488 6.658 15.637 0.75 12.959 8.078 20.925 9.59 13.096 11.17 z","stroke-width":1,stroke:l,fill:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"triangle":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"10",height:"10"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:10,height:10,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"path",d:"M4.987,0L7.48 4.847 9.974 9.694 4.987 9.694 0 9.694 2.493 4.847 z","stroke-width":1,stroke:l,fill:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"circle":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"9",height:"9"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:9,height:9,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"circle",cx:5.125,cy:3.875,r:3.625,"stroke-width":1,fill:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"tile":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"18",height:"18"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:18,height:18,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"path",d:"M0,9L0 0 9 0 z","stroke-width":1,stroke:l,fill:l},d[2]={name:"path",d:"M9,9L9 0 18 0 z","stroke-width":1,stroke:l,fill:l},d[3]={name:"path",d:"M0,18L0 9 9 9 z","stroke-width":1,stroke:l,fill:l},d[4]={name:"path",d:"M9,18L9 9 18 9 z","stroke-width":1,stroke:l,fill:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"horizontaldash":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"12",height:"12"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:12,height:12,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"path",d:"M0,1.5 L10 1.5 M0,5.5 L10 5.5 M0,9.5 L10 9.5 z","stroke-width":1,stroke:l,fill:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"verticaldash":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"12",height:"12"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:12,height:12,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"path",d:"M1.5,0 L1.5 10 M5.5,0 L5.5 10 M9.5,0 L9.5 10 z","stroke-width":1,stroke:l,fill:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"rectangle":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",x:0,y:0,width:12,height:12},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",width:12,height:12,fill:t,opacity:s},d[1]={name:"rect",x:1,y:2,width:4,height:9,fill:l,opacity:s},d[2]={name:"rect",x:7,y:2,width:4,height:9,fill:l,opacity:s},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"box":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",x:0,y:0,width:10,height:10},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",width:13,height:13,fill:t,opacity:s},d[1]={name:"rect",x:1.5,y:1.5,width:10,height:9,fill:l,opacity:s},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"horizontalstripe":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"10",height:"12"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:10,height:12,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"path",d:"M0,0.5 L10 0.5 M0,4.5 L10 4.5 M0,8.5 L10 8.5 z","stroke-width":1,stroke:l,fill:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"verticalstripe":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"12",height:"10"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:12,height:10,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"path",d:"M0.5,0 L0.5 10 M4.5,0 L4.5 10 M8.5,0 L8.5 10 z","stroke-width":1,stroke:l,fill:l},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"bubble":h={id:o+"_"+r+"_"+i.name+"_"+i.index,patternUnits:"userSpaceOnUse",width:"20",height:"20"},c=e.svgRenderer.createPattern(h,"pattern");return d[0]={name:"rect",x:0,y:0,width:20,height:20,transform:"translate(0,0)",fill:t,opacity:s},d[1]={name:"circle",cx:5.217,cy:11.325,r:3.429,"stroke-width":1,fill:"#D0A6D1"},d[2]={name:"circle",cx:13.328,cy:6.24,r:4.884,"stroke-width":1,fill:l},d[3]={name:"circle",cx:13.277,cy:14.66,r:3.018,"stroke-width":1,fill:"#D0A6D1"},this.loadPattern(e,d,c),n.appendChild(c),"url(#"+o+"_"+r+"_"+i.name+"_"+i.index+")";case"custom":return"url(#"+a.customPattern+")"}},loadPattern:function(e,t,i,s){for(var n,a=0;a<t.length;a++)s?"rect"==t[a].name?(t[a].stroke="transparent",this.drawRect(t[a],s)):"path"==t[a].name?ej.EjCanvasRender.prototype.drawPath(t[a],s):"circle"==t[a].name&&(t[a].stroke="transparent",ej.EjCanvasRender.prototype.drawCircle(t[a],s)):(n=e.svgRenderer.createPattern(t[a],t[a].name),i.appendChild(n))},drawRect:function(e,t){t.save(),t.beginPath(),t.globalAlpha=e.opacity,t.lineWidth=e["stroke-width"],t.strokeStyle=e.stroke,t.rect(e.x,e.y,e.width,e.height),"none"==e.fill&&(e.fill="transparent"),t.fillStyle=e.fill,e.transform&&t.translate(e.transform[0],e.transform[1]),t.rotate(e.rotate*Math.PI/180),t.fillRect(e.x,e.y,e.width,e.height),t.clip(),t.stroke(),t.restore()},chartRightClick:function(e){if(this.chartRightClick=!0,this.isTouch(e)&&this.model.crosshair.visible)return event.preventDefault(),event.stopPropagation(),!1},chartMouseUpTouch:function(e){var t=this,i=(jQuery.uaMatch(navigator.userAgent),this.calMousePosition(e));this.model.browserInfo;return this.mousemoveX=i.X,this.mousemoveY=i.Y,this.enableTrackBall(),clearTimeout(this.model.doubleTapTimer),this.drag||(this.model.doubleTapTimer=setTimeout(function(){(t.model.tapNum<2||t.model.crosshair.visible)&&t.singleTap(e),t.model.tapNum=0,t.model.cachedX=0,t.model.cachedY=0},200)),2==t.model.tapNum&&(t.model.doubleTapped=!1),!0},getEvent:function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0]:e},doubleTap:function(e){var t=this.getEvent(e),i=t.pageX,s=t.pageY,t=this.model.m_AreaBounds;this.model.cachedX=this.model.cachedX||i,this.model.cachedY=this.model.cachedY||s;(new Date).getTime();this.mouseDownX>=t.X&&this.mouseDownX<t.X+t.Width&&this.mouseDownY<t.Y+t.Height&&this.mouseDownY>=t.Y&&Math.abs(i-this.model.cachedX)<200&&Math.abs(s-this.model.cachedY)<200&&this.model.tapNum++,2==this.model.tapNum&&(this.model.doubleTapped=!0,this.multiSelectMouseDown(e),this.drag=this.model.zooming.enable||this._isMultiSelect,(e=this.model.trackerElement)&&($(e).finish(),e=null))},singleTap:function(e){var t,i,s=this,n=e.target.id,a=(this.model._visibleSeries,this.getEvent(e)),r=a.pageX,a=a.pageY;if(!this.panning&&!this.isZoomButtonHovered(e.target)){this.cancelEvent(e),s.model.trackerElement&&($.finish?$(s.model.trackerElement).finish():$(s.model.trackerElement).stop(!0,!0),s.model.trackerElement=null),$(".ejTooltip"+this._id).remove(),(!s.model.crosshair.visible||"cartesianaxes"!=s.model.AreaType)&&Math.abs(r-s.model.cachedX)<10&&Math.abs(a-s.model.cachedY)<10?this.chartInteractiveBehavior(e):(s.model.element=$(document).find("#"+this.svgObject.id+"_CrosshairGroup"),s.model.trackerElement=$(s.model.element).children().not(".Tracker").not("defs"),0<$(s.model.trackerElement).length&&$(s.model.trackerElement).fadeOut(1e3,function(){$(s.model.element).find('[id*="trackSymbol"]').attr("visibility","hidden"),s.model.trackerElement=null,s._removeHighlight()}),i=$(document).find('[id*="_trackball_grouping_tooltip"]'),0<$(i).length&&$(i).fadeOut(1e3,function(){$(i).remove()})),this.axisTooltip(e,n),this.showTitleTooltip(e,n),this.model.enableCanvasRendering&&(this._textTooltip(e,this.model.xAxisLabelRegions),this._textTooltip(e,this.model.yAxisLabelRegions));for(var o=0,l=this.model.series.length;o<l;o++){var d=this.model.series[o],h=d.marker.dataLabel;!d._enableSmartLabels||this.model.enable3D||h.enableWrap||(d=h.template,h=h.font,"none"==this.model.AreaType&&ej.util.isNullOrUndefined(d)&&this.datalabelTooltip(e,o,h))}0<$(".ejTooltip"+this._id).length&&(t=$(".ejTooltip"+this._id)),0<$(".tooltipDiv"+this._id).length&&(t=$(".tooltipDiv"+this._id)),window.clearTimeout(s.model.timer),s.model.trackerElement=t,s.model.timer=setTimeout(function(){var e,t=s.model.prevPoint;s.model.trackerElement?s.model.trackerElement.fadeOut(500,function(){var e;t&&("polaraxes"!=s.model.AreaType&&(e=ej.EjSvgRender.utils._getPoint(t.point,t.series),s.drawTrackerSymbol(t.series,t.seriesIndex,t.pointIndex,null,e)),$("#canvas_trackSymbol").remove()),$("[id*=_TrackSymbol]").remove()}):(t&&"polaraxes"!=s.model.AreaType&&(e=ej.EjSvgRender.utils._getPoint(t.point,t.series),s.drawTrackerSymbol(t.series,t.seriesIndex,t.pointIndex,null,e)),s.model.crosshair.visible||($("#canvas_trackSymbol").remove(),$("[id*=_TrackSymbol]").remove()))},1200)}e.originalEvent.pointerType||this.panning||!(this.model.selectionEnable||this.isDevice()&&this._isSafari)||this._doClick(e)},_getPieOfPiePoint:function(e,t,i){for(var s,n=i?t.points:t._visiblePoints,a=n.length,r=0;r<a;r++)e==n[r].actualIndex&&(s=n[r]);return s},tooltip:function(e,t){var i,s=!1,n=this.GetSeriesPoint(t);if($("#canvas_trackSymbol").remove(),ej.util.isNullOrUndefined(n)&&!this.dragPoint&&$("#"+e.svgObject.id+"_TrackToolTip").remove(),this.model.crosshair.visible||"cartesianaxes"!=this.model.AreaType)$("#"+this.svgObject.id).find("#"+this.svgObject.id+"_TrackToolTip").hide(),ej.util.isNullOrUndefined(n)&&(clearTimeout(this.removeTooltip),e.removeTooltip=setTimeout(function(){$(".tooltipDiv"+e._id).remove()},1e3));else{for(var a,r,o,l=this.model.indicators,d=this.model._visibleSeries,h=d.length,c=0,u=0;u<h;u++)for(o=d[u].trendlines,r=0;r<o.length;r++)"visible"!=o[r].visibility.toLowerCase()||o[r].isNull||"boxandwhisker"==this.model.series[0].type||(o[r]._visiblePoints=o[r].points,d=d.concat(o[r]));for(var p=0;p<l.length&&l[p].segment;p++)(a=l[p]).visible&&(d=d.concat(a.segment));for(var m=d.length,g=0;g<m;g++){var f,_,v,b,x,y,w,C=(i=d[P=g]).type.toLowerCase();"visible"!=i.visibility.toLowerCase()||"scatter"===C||"bubble"===C||"column"===C||-1!=C.indexOf("bar")||"stackingcolumn"===C||"stackingcolumn100"===C||i._hiloTypes?ej.util.isNullOrUndefined(n)&&!this.dragPoint&&$(".tooltipDiv"+this._id).hasClass(this.svgObject.id)&&(clearTimeout(this.removeTooltip),e.removeTooltip=setTimeout(function(){$(".tooltipDiv"+e._id).remove()},1e3)):($("#"+e.svgObject.id+"_TrackToolTipTemplate_"+P).remove(),$(".tooltipDiv"+this._id).hasClass(e.svgObject.id)||$(".tooltipDiv"+this._id).remove(),$("#"+e.svgObject.id).find("#"+e.svgObject.id+"_TrackSymbol_"+P).remove(),$("#"+e.svgObject.id+"_TrackSymbol_"+P).remove(),f=null,y=e.getClosesPointXY([],[],i,e.mousemoveX,e.mousemoveY,t),ej.util.isNullOrUndefined(y.point)&&(!this.model.prevPoint||this.model.prevPoint.seriesIndex&&!this.model.series[this.model.prevPoint.seriesIndex].tooltip.visible)&&!this.dragPoint&&$(".tooltipDiv"+this._id).hasClass(this.svgObject.id)&&(clearTimeout(this.removeTooltip),e.removeTooltip=setTimeout(function(){$(".tooltipDiv"+e._id).remove()},1e3)),y.point&&(f="boxandwhisker"==i.type.toLowerCase()?(c++,y.outlierPosition):ej.EjSvgRender.utils._getPoint(y.point,i),(_=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={location:{x:this.mousemoveX,y:this.mousemoveX},region:{SeriesIndex:g,Region:{PointIndex:y.index}}},e._trigger("pointRegionMouseMove",_)),(v=this.model.prevPoint)&&v.seriesIndex==g&&!y.point&&(b="boxandwhisker"==i.type.toLowerCase()?(c++,v.outlierPosition):ej.EjSvgRender.utils._getPoint(v.point,v.series),e.model.enableCanvasRendering||e.drawTrackerSymbol(v.series,v.seriesIndex,v.pointIndex,null,b),this.model.prevPoint=null),i.isIndicator||i.isTrendLine||i.selectionSettings.enable||i.highlightSettings.enable||!i.marker.visible&&"boxandwhisker"!=i.type.toLowerCase()||!y.point||_.cancel||((ej.util.isNullOrUndefined(y.point.marker)||ej.util.isNullOrUndefined(y.point.marker.visible)||y.point.marker&&y.point.marker.visible||"boxandwhisker"==i.type&&!y.point.marker)&&e.drawTrackerSymbol(i,P,y.index,!1,f),v&&y.point!=v.point&&(x="boxandwhisker"==i.type.toLowerCase()?(c++,v.outlierPosition):ej.EjSvgRender.utils._getPoint(v.point,v.series),e.drawTrackerSymbol(v.series,v.seriesIndex,v.pointIndex,null,x,j,c)),(ej.util.isNullOrUndefined(y.point.marker)||ej.util.isNullOrUndefined(y.point.marker.visible)||y.point.marker&&y.point.marker.visible)&&(this.model.prevPoint={point:y.point,pointIndex:y.index,series:i,seriesIndex:P,outlierPosition:y.outlierPosition})),i.tooltip.visible&&y.point&&(!n||g>n.region.SeriesIndex&&!(i._zOrder<this.model._visibleSeries[n.region.SeriesIndex]._zOrder))&&(w=ej.EjSvgRender.utils._getTransform(i.xAxis,i.yAxis,e.model.requireInvertedAxes),f.X+w.x<=w.x+w.width&&(f.X+w.x>=w.x||0==f.X)&&Math.abs(f.Y-(w.y+w.height))<=w.y+w.height&&(Math.abs(f.Y-(w.y+w.height))>=w.y||0==f.Y)&&(_.cancel||(0==$(e.svgObject).find("#"+e.svgObject.id+"_TrackToolTip").length&&(x={id:e.svgObject.id+"_TrackToolTip",transform:"translate("+w.x+","+w.y+")"},e.gTransToolEle=e.svgRenderer.createGroup(x)),e.svgRenderer._setAttr($(e.svgObject).find("#"+e.svgObject.id+"_TrackToolTip"),{transform:"translate("+w.x+","+w.y+")",visibility:"visible"}),ej.util.isNullOrUndefined(i.tooltip.template)?(s=!0,$(".tooltipDiv"+this._id).remove(),e.displayShowTooltip(f,y.point,i,y.index)):(s=!0,$("#"+e.svgObject.id).find("#"+e.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),y={SeriesIndex:P,Region:{PointIndex:y.index}},e.createTooltip(y,t,i))))))}}if($(".tooltipDiv"+this._id).hasClass(this.svgObject.id)||$(".tooltipDiv"+this._id).remove(),n&&ej.util.isNullOrUndefined(n.region.isStripLine)){if("pie"!=(E=this.model._visibleSeries[n.region.SeriesIndex].type.toLowerCase())&&"pieofpie"!=E&&"doughnut"!=E||!this.model._visibleSeries[n.region.SeriesIndex].explode||(this.model._visibleSeries[n.region.SeriesIndex].enableAnimation?(this.model.AnimationComplete||this.model.enableCanvasRendering)&&this.pieExplosion(n,t):this.model.enable3D||this.pieExplosion(n,t)),n.region.isIndicator){var S=(A=this.model.indicators[n.region.SeriesIndex]).segment[0]._visiblePoints[n.region.Region.PointIndex];A.fill=A.segment[0].fill}else if("pieofpie"!=(A=this.model._visibleSeries[n.region.SeriesIndex]).type||this.model.enable3D){if("pie"!=A.type&&"doughnut"!=A.type||this.model.enable3D)S=this.model._visibleSeries[n.region.SeriesIndex]._visiblePoints[n.region.Region.PointIndex];else for(var T=0;T<A._visiblePoints.length;T++)if(n.region.Region.length==A._visiblePoints.length){if(n.region.Region.PointIndex==A._visiblePoints[T].actualIndex){S=this.model._visibleSeries[n.region.SeriesIndex]._visiblePoints[T];break}}else if(n.region.Region.Index==T){S=this.model._visibleSeries[n.region.SeriesIndex]._visiblePoints[T];break}}else var S=this._getPieOfPiePoint(n.region.Region.PointIndex,A);if(S&&"polaraxes"==this.model.AreaType){for(g=0;g<this.model._visibleSeries.length;g++){$("[id*=_TrackSymbol]").remove();var R="canvas_trackSymbol_"+g;$("#"+this._id).find("[id*="+R+"]").remove()}var k,O="polaraxes"!=this.model.AreaType?ej.EjSvgRender.utils._getPoint(S,A):ej.EjSvgRender.utils.TransformToVisible(A,S.xValue,S.y,this),D=this.model.prevPoint;!ej.util.isNullOrUndefined(D)&&D!=n&&A.marker.visible&&(A=this.model._visibleSeries[D.region.SeriesIndex],k=this.model._visibleSeries[D.region.SeriesIndex]._visiblePoints[D.region.Region.PointIndex],k=ej.EjSvgRender.utils.TransformToVisible(A,k.xValue,k.y,this),this.drawTrackerSymbol(A,D.region.SeriesIndex,D.region.Region.PointIndex,null,k),this.model.prevPoint=null),A.marker.visible&&"column"!=A.drawType&&"rangecolumn"!=A.drawType.toLowerCase()&&(this.drawTrackerSymbol(A,n.region.SeriesIndex,n.region.Region.PointIndex,!0,O),this.model.prevPoint=n)}A.tooltip.visible&&!s&&"visible"==A.visibility.toLowerCase()&&(ej.util.isNullOrUndefined(A.tooltip.template)?(f="cartesianaxes"==this.model.AreaType?(w=ej.EjSvgRender.utils._getTransform(A.xAxis,A.yAxis,this.model.requireInvertedAxes),0==$(this.svgObject).find("#"+this.svgObject.id+"_TrackToolTip").length&&(k={id:this.svgObject.id+"_TrackToolTip",transform:"translate("+w.x+","+w.y+")"},this.gTransToolEle=this.svgRenderer.createGroup(k)),this.svgRenderer._setAttr($(this.svgObject).find("#"+this.svgObject.id+"_TrackToolTip"),{transform:"translate("+w.x+","+w.y+")"}),$("#"+this.svgObject.id+"_TrackToolTip").attr("visibility","visible"),{X:n.location.x-this.model.m_AreaBounds.X,Y:Math.abs(n.location.y-this.model.m_AreaBounds.Y)}):(0==$(this.svgObject).find("#"+this.svgObject.id+"_TrackToolTip").length&&(I={id:this.svgObject.id+"_TrackToolTip"},this.gTransToolEle=this.svgRenderer.createGroup(I)),{X:n.location.x,Y:Math.abs(n.location.y)}),$(".tooltipDiv"+this._id).remove(),this.displayShowTooltip(f,S,A,n.region.Region.PointIndex)):($("#"+e.svgObject.id).find("#"+e.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),this.createTooltip(n.region,t)));var I=$.extend({},ej.EjSvgRender.commonChartEventArgs);I.data=n,this._trigger("pointRegionMouseMove",I)}else if(ej.util.isNullOrUndefined(this.model.prevPoint)||"polaraxes"!=this.model.AreaType){if(!ej.util.isNullOrUndefined(this.model.explodeValue)){var j,L,C=this.model.series[this.model.explodeValue.SeriesIndex].type.toLowerCase(),A=this.model._visibleSeries[this.model.explodeValue.SeriesIndex],E=new ej.seriesTypes[C],P=(A.labelPosition.toLowerCase(),this.model.explodeValue.SeriesIndex),I=this.model._isPieOfPie?this._getPieOfPiePoint(this.model.explodeValue.PointIndex,A):A._visiblePoints[this.model.explodeValue.Index],M=E._calculateArcData(this,this.model.explodeValue.PointIndex,I,A,P,this.model.explodeValue.PieSeriesIndex);this.model.enableCanvasRendering&&(this.model.series[P].explodeIndex=null,L=document.getElementById(this.svgObject.id).getClientRects()[0],this.svgRenderer.ctx.clearRect(L.left,L.top,L.width,L.height),$("#"+this._id).ejChart("redraw")),j=this.svgObject.id+"_SeriesGroup_"+P,L=1==this.model.explodeValue.PieSeriesIndex?$(this.gSeriesEle).children("#"+j)[1]:$(this.gSeriesEle).children("#"+j)[0];for(var F=$(L).children(),g=0;g<F.length;g++){var N=F[g],z=this.svgRenderer._getAttrVal($(N)[0],"data-pointIndex");if(parseInt(z)==this.model.explodeValue.PointIndex){this.svgRenderer._setAttr($(N),{d:M.Direction});break}}E.drawDataLabelAcc(this,A,this.model.explodeValue.Index,I,P,this.model.explodeValue.PieSeriesIndex),this.model.explodeValue=null,this.model.explode=!1}}else{D=this.model.prevPoint;A=this.model._visibleSeries[D.region.SeriesIndex],S=this.model._visibleSeries[D.region.SeriesIndex]._visiblePoints[D.region.Region.PointIndex],O=ej.EjSvgRender.utils.TransformToVisible(A,S.xValue,S.y,this),this.drawTrackerSymbol(A,D.region.SeriesIndex,D.region.Region.PointIndex,null,O),this.model.prevPoint=null}},chartTrackball:function(o,l,e){this.crosshairLinePath=[];var t,i,s,n,a,r,d,h,c=o.model.requireInvertedAxes,u=[],p=[],m=this.model.indicators,g=this.model._visibleSeries,f=!1,_=[],v=[],b=[],x=[],y=this.model.enableCanvasRendering,w=0,C=0,S=0,T=$("#"+this._id).offset(),R=[],k=[],O=[],D=this.model.crosshair.trackballTooltipSettings.mode.toLowerCase(),I=o._id+"_trackball_grouping_tooltip",j=this.model.locale,L=0;if(!this.model.enable3D&&this.model.crosshair.visible&&"trackball"==this.model.crosshair.type.toLowerCase()){0==$("#"+this.svgObject.id+"_CrosshairGroup").length?(h={id:o.svgObject.id+"_CrosshairGroup",visibility:"visible"},y?(h.position="absolute",o.svgRenderer.drawCrosshairLine(h,"#chartContainer_"+this._id)):(o.gTrackball=o.svgRenderer.createGroup(h),o.svgRenderer.append(o.gTrackball,o.svgObject))):o.model.trackerElement&&($.finish?$(o.model.trackerElement).finish():$(o.model.trackerElement).stop(!0,!0),o.model.trackerElement=null),this.model.enableCanvasRendering||($("[class*=HighlightStyle]").attr("class",""),$("[class*=HighlightLegendStyle]").attr("class",""),$("[class*=HighlightLegendPathStyle]").attr("class",""),$("[class*=HighlightPathStyle]").attr("class",""),$("[class*=Highlightseries]").attr("class",""),$("[id*="+this._id+"_Highlight_]").remove()),$("#secondCanvas").remove(),$("#"+this._id).find('[id*="_gTooltip_"]').remove(),$("#"+I).children().remove(),$(document).find('[id*="TrackGroupToolTipTemplate"]').remove(),$(document).find('[id*="TrackToolTipTemplate"]').remove(),y&&$("#"+this._id).find('[id*="canvas_trackSymbol"]').css("visibility","hidden");for(var A=g.length,E=0;E<m.length&&m[E].segment;E++)g=g.concat(m[E].segment);n=g.length;for(var P=0;P<n;P++)if("visible"==g[P].visibility&&g[P].enableTrackTooltip&&(_e=P,B=[],H=c?o.mousemoveY+g[P].xAxis.plotOffset>g[P].xAxis.y&&o.mousemoveY<g[P].xAxis.y+g[P].xAxis.height+g[P].xAxis.plotOffset:o.mousemoveX+g[P].xAxis.plotOffset>g[P].xAxis.x&&o.mousemoveX<g[P].xAxis.x+g[P].xAxis.width+g[P].xAxis.plotOffset,y&&(this.canvasX=g[P].xAxis.x),i=o.getClosestPointX(B,g[P],o.mousemoveX,o.mousemoveY),s=g[P].xAxis.visibleRange,""!=i.point)){var M="boxandwhisker"==g[P].type.toLowerCase()?i.point[0].boxPlotLocation[0].YValues:i.point[0].YValues[0];if(""!=i.point&&(M>=g[P].yAxis.visibleRange.min||"grouping"==D)&&i.point[0].xValue>=s.min&&i.point[0].xValue<=s.max&&H)for(var F=0;F<i.point.length;F++)i.point[F].visible&&(g[P].isIndicator||w++)}for(var N,P=0;P<n;P++){var z=[];if("visible"==(t=g[_e=P]).visibility.toLowerCase()&&t.enableTrackTooltip){var V,B=[],H=c?o.mousemoveY+g[P].xAxis.plotOffset>t.xAxis.y&&o.mousemoveY<t.xAxis.y+t.xAxis.height+g[P].xAxis.plotOffset:o.mousemoveX+g[P].xAxis.plotOffset>t.xAxis.x&&o.mousemoveX<t.xAxis.x+t.xAxis.width+g[P].xAxis.plotOffset;if(y&&(this.canvasX=t.xAxis.x),i=o.getClosestPointX(B,t,o.mousemoveX,o.mousemoveY),s=t.xAxis.visibleRange,""!=i.point){if(((M="boxandwhisker"==g[P].type.toLowerCase()?i.point[0].boxPlotValues.midvalue:i.point[0].YValues[0])>=g[P].yAxis.visibleRange.min||"grouping"==D)&&i.point[0].xValue>=s.min&&i.point[0].xValue<=s.max)if(H)for(var Y,U,W,X,G,q=i.point.length,F=0;F<q;F++)if(i.point[F].visible){if(!t.isIndicator){if("boxandwhisker"==t.type){L++;var Q,K={xValue:i.point[F].xValue,YValues:i.point[F].boxPlotLocation[0].YValues};(Q=ej.EjSvgRender.utils._getPoint(K,t)).YValues=K.YValues,z.push(Q);for(var Z=0;Z<i.point[F].boxPlotLocation.length;Z++)1==i.point[F].boxPlotLocation[Z].outlier&&(V={X:i.point[F].boxPlotLocation[Z].X,Y:i.point[F].boxPlotLocation[Z].Y,YValues:i.point[F].boxPlotLocation[Z].YValues,outlier:i.point[F].boxPlotLocation[Z].outlier},z.push(V))}else Q=ej.EjSvgRender.utils._getPoint(i.point[F],t);if(this.model.financial=1==A&&1==q&&t._hiloTypes||!1,c)if(Y=this.model.financial?(U=Q.X>Q.low?Q.X:Q.low,W=Q.X<Q.low?Q.X:Q.low,"M "+t.yAxis.x+" "+(Q.Y+t.xAxis.y)+" L "+(W+t.yAxis.x)+" "+(Q.Y+t.xAxis.y)+" M "+(t.yAxis.x+U)+" "+(Q.Y+t.xAxis.y)+" L "+(t.yAxis.x+t.yAxis.width)+" "+(Q.Y+t.xAxis.y)):"M "+t.yAxis.x+" "+(Q.Y+t.xAxis.y)+" L "+(t.yAxis.x+t.yAxis.width)+" "+(Q.Y+t.xAxis.y),"boxandwhisker"==t.type)for(var J=0;J<z.length;J++)v.push({X:z[J].X,Y:z[J].Y,YValues:z[J].YValues,outlier:z[J].outlier});else v.push({X:i.point[F].location.X+t.yAxis.x,Y:i.point[F].location.Y+t.xAxis.y});else if(Y=this.model.financial?(U=Q.Y<Q.low?Q.Y:Q.low,W=Q.Y>Q.low?Q.Y:Q.low,"M "+(Q.X+t.xAxis.x)+" "+o.model.m_AreaBounds.Y+" L "+(Q.X+t.xAxis.x)+" "+(U+t.yAxis.y)+" M "+(Q.X+t.xAxis.x)+" "+(W+t.yAxis.y)+" L "+(Q.X+t.xAxis.x)+" "+(o.model.m_AreaBounds.Y+o.model.m_AreaBounds.Height)):"M "+(Q.X+t.xAxis.x)+" "+o.model.m_AreaBounds.Y+" L "+(Q.X+t.xAxis.x)+" "+(o.model.m_AreaBounds.Y+o.model.m_AreaBounds.Height),"boxandwhisker"==t.type)for(J=0;J<z.length;J++)v.push({X:z[J].X,Y:z[J].Y,YValues:z[J].YValues,outlier:z[J].outlier});else v.push({X:i.point[F].location.X+t.xAxis.x,Y:i.point[F].location.Y+t.yAxis.y});if(T.left,T.top,K={id:o.svgObject.id+"_Tracker",fill:"none","stroke-width":o.model.crosshair.line.width,"clip-path":"url(#"+o.svgObject.id+"_ChartAreaClipRect)",stroke:o.model.crosshair.line.color,d:Y},this.crosshairLinePath.push(K),0==$("#"+o.svgObject.id+"_Tracker").length?(y?(G=this.svgRenderer.createCrosshairCanvas()).ctx=G.getContext("2d"):(G=this.svgRenderer,X=o.gTrackball),o.svgRenderer.drawPath.call(G,K,X),f=!0):(f=!0,ej.util.isNullOrUndefined(this._closest)?o.svgRenderer._setAttr($(o.svgObject).find("#"+o.svgObject.id+"_Tracker"),{d:Y,visibility:"visible"}):this._beforeMin?this._closest>=i.point[F].xValue&&o.svgRenderer._setAttr($(o.svgObject).find("#"+o.svgObject.id+"_Tracker"),{d:Y,visibility:"visible"}):this._afterMax&&this._closest<=i.point[F].xValue&&o.svgRenderer._setAttr($(o.svgObject).find("#"+o.svgObject.id+"_Tracker"),{d:Y,visibility:"visible"}),$("#"+o.svgObject.id+"_Tracker").css({display:"block"}),y&&((G=this.svgRenderer.createCrosshairCanvas()).ctx=G.getContext("2d"),o.svgRenderer.drawPath.call(G,K,o.gTrackball)),$("#"+this._id).find('[id*="canvas_Tracker"]').css("visibility","visible")),K={transform:"translate("+(K=ej.EjSvgRender.utils._getTransform(t.xAxis,t.yAxis,c)).x+","+K.y+")",id:o.svgObject.id+"_TrackToolTip_"+_e},o.gTransToolEle=o.svgRenderer.createGroup(K),K=this.model.prePoint,ej.util.isNullOrUndefined(K)||K.pointIndex[0]!=i.index[0]||!$("#"+o.svgObject.id+"_trackSymbol_"+_e+"_"+i.index)){ej.util.isNullOrUndefined(r)&&(o.gTransToolEle&&o.gTrackerEle&&($(this.svgObject).find('[id*="_TrackSymbol_"],[id*="_TrackToolTip"]').attr("visibility","hidden"),$("#"+this._id).find('[id*="canvas_trackSymbol"]').css("visibility","hidden")),r=i);var K=t.type.toLowerCase(),ee=0;if((!t._hiloTypes||-1<K.indexOf("rangearea"))&&("grouping"!=D||"grouping"==D&&K.indexOf("column")<0&&K.indexOf("bar")<0))if("boxandwhisker"==t.type)for(var te=0;te<z.length;te++)o.drawTrackerSymbol(t,_e,i.index[F],!0,z[te],null,ee),ee++;else o.drawTrackerSymbol(t,_e,i.index[F],!0,Q);if(t.trackerRemoved=!0,o.model.crosshair.trackballTooltipSettings.tooltipTemplate)"grouping"===D?(i=o.getClosestPointX(B,t,o.mousemoveX,o.mousemoveY),oe=this.getSeriesColor(i.point[F],_e,t),p.push({seriesColor:oe}),q=i.point.length,(ae=this.getTooltipFormat(i.point[F],t,_e,i.index[F],le)).text="&nbsp"+ae.text+"&nbsp",R.push({text:ae.text,seriesIndex:_e,pointIndex:i.index[F]}),u.push({point:i.point[F]}),_.push({series:t}),(t._hiloTypes&&"rangearea"!=K||-1<K.indexOf("column")||-1<K.indexOf("bar"))&&(a={region:{Region:{PointIndex:i.index[F]},SeriesIndex:_e}},this.highlightStart(e,a,this._id+"_svg_SeriesGroup_"+_e,this._id+"_svg_Series"+_e+"_Point"+i.index[F],!0)),w===R.length&&(d=document.getElementById(this.svgRenderer.svgObj.id).getClientRects()[0],o.displayGroupingTemplate(void 0,void 0,Q,u,_,_e,i.index[F],d,p))):(d=document.getElementById(this.svgRenderer.svgObj.id).getClientRects()[0],o.displayTemplateTooltip(void 0,void 0,Q,i.point[F],t,_e,i.index[F],d));else{var ie=v.length-1,se=z.length;if("grouping"==D){var ne,ae,re,oe=this.getSeriesColor(i.point[F],_e,t),le=t.tooltip.format,de=[];if("boxandwhisker"==t.type)for(J=0;J<se;J++)re=this.getTooltipFormat(i.point[F],t,_e,i.index[F],le,z[J]),de.push(re),ae=null;else ae=this.getTooltipFormat(i.point[F],t,_e,i.index[F],le);var he=t.tooltip.font&&t.tooltip.font.color||oe,ce=t.tooltip.font?$.extend(!1,t.font,{},t.tooltip.font):t.font;if("object"==typeof he&&(he=oe[1].color),"boxandwhisker"==t.type)for(var ue=0;ue<de.length;ue++)R.push({text:de[ue].text,seriesIndex:_e,pointIndex:i.index[F]});else ae.text="&nbsp"+ae.text+"&nbsp",R.push({text:ae.text,seriesIndex:_e,pointIndex:i.index[F]});if((t._hiloTypes&&"rangearea"!=K||-1<K.indexOf("column")||-1<K.indexOf("bar"))&&(a={region:{Region:{PointIndex:i.index[F]},SeriesIndex:_e}},this.highlightStart(e,a,this._id+"_svg_SeriesGroup_"+_e,this._id+"_svg_Series"+_e+"_Point"+i.index[F],!0)),"boxandwhisker"==t.type)for(ue=0;ue<de.length;ue++)O.push(o._id+"_grouping_text_"+_e+"_"+i.index[F]+ue);else O.push(o._id+"_grouping_text_"+_e+"_"+i.index[F]);if(ne={color:he,"font-size":ce.size,"font-family":ce.fontFamily,"font-style":ce.fontStyle,"font-weight":ce.fontWeight},"boxandwhisker"==t.type)for(ue=0;ue<de.length;ue++)k.push(ne);else k.push(ne);(L==w&&"boxandwhisker"==t.type||w==R.length&&"boxandwhisker"!=t.type)&&o.displayTooltip(!0,{point:i.point[F],series:t,textCollection:R,textOptionsCollection:k,groupingTextId:O})}else{var pe,K=this.getTooltipFormat(i.point[F],t,_e,P,t.tooltip.format,P),he=t.tooltip,ce=he.font?$.extend(!1,t.font,{},he.font):t.font,me=ej.EjSvgRender.utils._measureText(K.text,null,ce),C=(S=c?me.height:me.width)<C?C:S,ge=Math.ceil(K.text.toString().split("<br/>").length/2);if(this.model.tooltipPadding=Number(ce.size.toString().replace(/px/i,""))/3,pe=this.model.tooltipPadding+2*t.tooltip.border.width,c)b.push({Start:v[ie].X-pe-me.width/2,End:v[ie].X+pe+me.width/2}),x.push({Point:v[ie],ClosestPoint:i.point[F],Series:t,ClosestPointIndex:i.index[F],Tgap:0,StEnd:b[ie],TextArea:me,ReqInvertAxis:c});else if("boxandwhisker"==t.type)for(J=0;J<se;J++)b.push({Start:z[J].Y-pe*ge-me.height/2,End:z[J].Y+pe*ge+me.height/2}),x.push({Point:z[J],ClosestPoint:i.point[F],Series:t,ClosestPointIndex:i.index[F],Tgap:0,StEnd:b[J],TextArea:me,ReqInvertAxis:c});else b.push({Start:v[ie].Y-pe*ge-me.height/2,End:v[ie].Y+pe*ge+me.height/2}),x.push({Point:v[ie],ClosestPoint:i.point[F],Series:t,ClosestPointIndex:i.index[F],Tgap:0,StEnd:b[ie],TextArea:me,ReqInvertAxis:c});if("boxandwhisker"==t.type&&L==w){C+=2*pe,x=c?x.sort(function(e,t){return e.Point.X-t.Point.X}):x.sort(function(e,t){return e.Point.Y-t.Point.Y}),this.SmartTooltipPosition(x);var fe=x.length;o.displayTooltip(!1,x,C);for(P=0;P<fe;P++){var _e=$.inArray(x[P].Series,this.model._visibleSeries);x[P].Series._hiloTypes&&(a={region:{Region:{PointIndex:x[P].ClosestPointIndex},SeriesIndex:_e}},this.highlightStart(e,a,this._id+"_svg_SeriesGroup_"+_e,this._id+"_svg_Series"+_e+"_Point"+x[P].ClosestPointIndex,!0))}}else if(x.length==w&&"boxandwhisker"!=t.type){C+=2*pe,x=c?x.sort(function(e,t){return e.Point.X-t.Point.X}):x.sort(function(e,t){return e.Point.Y-t.Point.Y}),this.SmartTooltipPosition(x);fe=x.length;o.displayTooltip(!1,x,C);for(P=0;P<fe;P++){_e=$.inArray(x[P].Series,this.model._visibleSeries);x[P].Series._hiloTypes&&(a={region:{Region:{PointIndex:x[P].ClosestPointIndex},SeriesIndex:_e}},this.highlightStart(e,a,this._id+"_svg_SeriesGroup_"+_e,this._id+"_svg_Series"+_e+"_Point"+x[P].ClosestPointIndex,!0))}}}}}else ie=$(this.svgObject).find('[id*="_TrackSymbol_"],[id*="_TrackToolTip"]'),this.svgRenderer._setAttr($(ie),{visibility:"visible"}),$("#"+this._id).find('[id*="canvas_trackSymbol"]').css("visibility","visible"),ie=$(this.svgObject).find('[id*="_TrackToolTip"]').children(),this.svgRenderer._setAttr($(ie),{visibility:"visible"}),ie=$(this.svgObject).find('[id*="_trackSymbol_"]'),this.svgRenderer._setAttr($(ie),{visibility:"visible"}),$(o.svgObject).find('[id*="_TrackAxisToolTip"]').attr("visibility","visible"),null!=this.model.crosshair.trackballTooltipSettings.tooltipTemplate&&(ie="grouping"===D?$(document).find('[id*="TrackGroupToolTipTemplate"]'):$(document).find('[id*="_TrackToolTipTemplate_"]'),this.svgRenderer._setAttr($(ie),{visibility:"visible"}))}}else $("#"+this.svgObject.id+"_TrackSymbol_"+_e).remove();else this._removeTrackBall()}else{f||$(o.svgObject).find('[id*="_Tracker"]').remove();$("#"+o.svgObject.id+"_TrackSymbol_"+P);var ve=this.svgObject.id+"_TrackSymbol_"+_e;$("#"+this._id).find("[id*="+ve+"]").remove(),$("#"+o._id).find("[id*=_canvas_trackSymbol_"+P+"]").css("visibility","hidden"),this.model.enableCanvasRendering||($("[class*=HighlightStyle]").attr("class",""),$("[class*=HighlightLegendStyle]").attr("class",""),$("[class*=HighlightLegendPathStyle]").attr("class",""),$("[class*=HighlightPathStyle]").attr("class",""),$("[class*=Highlightseries]").attr("class",""),$("[id*="+this._id+"_Highlight_]").remove())}}t.trackerRemoved=!1}if(null!=this.model.closestPoint&&(this.model.prePoint={point:i.point,pointIndex:i.index,series:t,seriesIndex:_e}),0==$("#"+this.svgObject.id+"_TrackAxisToolTip").length&&this.model.crosshairLabelVisibility?(I={id:o.svgObject.id+"_TrackAxisToolTip",visibility:"visible"},o.gTrackAxisEle=o.svgRenderer.createGroup(I),o.svgRenderer.append(o.gTrackAxisEle,o.gTrackball)):$("#"+this.svgObject.id+"_TrackAxisToolTip").css("display","block"),Q&&(N=i.point[0],y?$(o.svgObject.parentElement).find('[id*="AxisToolTipRect"]').css({visibility:"hidden",display:"none"}):$(o.svgObject).find('[id*="_TrackAxisToolTip"]').attr("visibility","visible").children().attr({display:"none"}),$.each(o.model._axes,function(e,t){var i,s,n,a=t.x,r=t._opposed;c?"vertical"==t.orientation.toLowerCase()&&t.crosshairLabel.visible&&o.mousemoveY<=t.y+t.height&&t.y<=o.mousemoveY&&(n=t._valueType.toLowerCase(),i=N.xValue,s=[],"logarithmic"==n&&(i=Math.pow(t.logBase,i).toFixed(2).replace(new RegExp("\\.0{2}"),"")),"datetime"==n&&(i=ej.format(new Date(Math.floor(i)),ej.util.isNullOrUndefined(t.labelFormat)?ej.EjSvgRender.utils._dateTimeLabelFormat(t._intervalType,t):t.labelFormat,j)),"category"==n&&(i=ej.EjSvgRender.utils._getLabelContent(i,t,j)),s={X:t.x,Y:Q.Y+t.y},o.displayAxisTooltip(s,i,t,e,l)):"horizontal"==t.orientation.toLowerCase()&&t.crosshairLabel.visible&&Q.X+a<=t.x+t.width&&t.x<=v[v.length-1].X&&(n=t._valueType.toLowerCase(),a=(Q.X/t.width*t.visibleRange.delta+t.visibleRange.min).toFixed(2).replace(new RegExp("\\.0{2}"),""),"logarithmic"==n&&(a=Math.pow(t.logBase,a)),"datetime"==n&&(a=ej.format(new Date(Math.floor(a)),ej.util.isNullOrUndefined(t.labelFormat)?ej.EjSvgRender.utils._dateTimeLabelFormat(t._intervalType,t):t.labelFormat,j)),"category"!=n&&"datetimecategory"!=n||("object"!=typeof N.x&&(a=N.xValue),a=(a="category"!=n&&ej.util.isNullOrUndefined(t.labelFormat)?ej.format(new Date(t.labels[Math.floor(a)]),ej.EjSvgRender.utils._dateTimeLabelFormat(t.intervalType,t),j):ej.EjSvgRender.utils._getLabelContent(Math.floor(a),t,j))||"undefined"),r={X:v[v.length-1].X,Y:r?t.y+t.height-t.majorTickLines.size:t.y+t.height+t.majorTickLines.size+10},o.displayAxisTooltip(r,a,t,e,l,!0))})),"grouping"!==D&&o.model.crosshair.trackballTooltipSettings.tooltipTemplate)for(var be=$(document).find('[id*="_TrackToolTipTemplate_"]'),P=0;P<be.length;P++)$(be[P]).appendTo(this.templateContainer),$(this.templateContainer).appendTo(this.chartContainer)}},chartCrossHair:function(a,r){var o=ej.util.isNullOrUndefined(this.model.primaryYAxis.roundingPlaces)?2:this.model.primaryYAxis.roundingPlaces,e=a.model.enableCanvasRendering,l=this.model.locale;if(!this.model.enable3D&&this.model.crosshair.visible&&"crosshair"==this.model.crosshair.type.toLowerCase()){0==$("#"+this.svgObject.id+"_CrosshairGroup").length?(b={id:this.svgObject.id+"_CrosshairGroup",visibility:"visible"},e?(b.position="absolute",a.svgRenderer.drawCrosshairLine(b,"#chartContainer_"+this._id)):(this.gCrosshair=this.svgRenderer.createGroup(b),this.svgRenderer.append(this.gCrosshair,this.svgObject))):$("#"+this.svgObject.id+"_CrosshairGroup").css("display","block"),a.model.trackerElement&&($.finish?$(this.model.trackerElement).finish():$(this.model.trackerElement).stop(!0,!0),this.model.trackerElement=null);var t,i,s,n,d=this.getScaleValues(this),h=$.extend(!0,{},r);mouseX=h.x/d.x,mouseY=h.y/d.y;for(var c=0;c<this.model._axes.length;c++){var u=this.model._axes[c];"vertical"==u.orientation.toLowerCase()?mouseY>=u.y&&mouseY<=u.y+u.height&&(u.x<mouseX?t=Math.min(t||u.x,u.x):i=Math.max(i||u.x,u.x)):mouseX>=u.x&&mouseX<=u.x+u.width&&(u.y<mouseY?s=Math.min(s||u.y,u.y):n=Math.max(n||u.y,u.y))}var p=t||this.model.m_AreaBounds.X,m=i?i-p:this.model.m_AreaBounds.X+this.model.m_AreaBounds.Width-p,g=s||this.model.m_AreaBounds.Y,f=n?n-g:this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height-g;this.mousemoveX=this.mousemoveX/d.x,this.mousemoveY=this.mousemoveY/d.y;var _="M "+this.mousemoveX+" "+g+" L "+this.mousemoveX+" "+(g+f),v="M "+p+" "+this.mousemoveY+" L "+(p+m)+" "+this.mousemoveY,b=$("#"+this._id).offset(),h=a.svgObject,d=h.offsetLeft>b.left?h.offsetLeft:b.left,h=h.offsetTop>b.top?h.offsetTop:b.top;0==$("#"+a.svgObject.id+"_CrosshairVertical").length?(b={id:a.svgObject.id+"_CrosshairVertical",fill:"none","stroke-width":a.model.crosshair.line.width,stroke:a.model.crosshair.line.color,"clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)",d:_},e?(b.width=0,b.height=f,b.top=g,b.left=p,b.position="absolute",b.style="solid",b.opacity=.5,a.svgRenderer.drawCrosshairLine(b,"#"+this.svgObject.id+"_CrosshairGroup")):a.svgRenderer.drawPath(b,a.gCrosshair)):(a.svgRenderer._setAttr($(a.svgObject).find("#"+a.svgObject.id+"_CrosshairVertical"),{d:_}),e&&($("#secondCanvas").remove(),$("#"+a.svgObject.id+"_CrosshairVertical").css("left",this.mousemoveX).css({top:g,height:f,display:"block"})),$("#"+a.svgObject.id+"_CrosshairVertical").attr("visibility","visible").css("display","block")),0==$("#"+a.svgObject.id+"_CrosshairHorizontal").length?(f={id:a.svgObject.id+"_CrosshairHorizontal",fill:"none","stroke-width":a.model.crosshair.line.width,stroke:a.model.crosshair.line.color,"clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)",d:v},e?(f.top=g+h,f.left=p+d,f.width=m,f.height=0,f.position="absolute",f.style="solid",f.opacity=.5,a.svgRenderer.drawCrosshairLine(f,"#"+this.svgObject.id+"_CrosshairGroup")):a.svgRenderer.drawPath(f,a.gCrosshair)):(a.svgRenderer._setAttr($(a.svgObject).find("#"+a.svgObject.id+"_CrosshairHorizontal"),{d:v}),$("#"+a.svgObject.id+"_CrosshairHorizontal").attr("visibility","visible").css("display","block"),e&&$("#"+a.svgObject.id+"_CrosshairHorizontal").css("top",this.mousemoveY).css({left:p,width:m,display:"block"})),0==$("#"+a.svgObject.id+"_AxisCrossToolTip").length?(m={id:a.svgObject.id+"_AxisCrossToolTip",visibility:"visible"},a.gTrackAxisEle=a.svgRenderer.createGroup(m),a.svgRenderer.append(a.gTrackAxisEle,a.gCrosshair)):(this.svgRenderer._setAttr($(a.gTrackAxisEle),{visibility:"visible"}),$(a.gTrackAxisEle).css("display","block")),$.each(a.model._axes,function(e,t){var i,s,n=t._valueType.toLowerCase();"horizontal"==t.orientation.toLowerCase()&&t.crosshairLabel.visible?a.mousemoveX<=t.x+t.width&&t.x<=a.mousemoveX?(i="category"==t._valueType&&"betweenticks"==t.labelPlacement.toLowerCase()?.5:0,s=(Math.abs(a.mousemoveX-(t.isInversed?t.x+t.width:t.x))/t.width*t.visibleRange.delta+t.visibleRange.min+i).toFixed(2).replace(new RegExp("\\.0{2}"),""),"logarithmic"==n&&(s=Math.pow(t.logBase,s).toFixed(2).replace(new RegExp("\\.0{2}"),"")),"datetime"==n&&(s=ej.format(new Date(Math.floor(s)),ej.util.isNullOrUndefined(t.labelFormat)?ej.EjSvgRender.utils._dateTimeLabelFormat(t._intervalType,t):t.labelFormat,l)),"category"!=n&&"datetimecategory"!=n||(s="category"!=n&&ej.util.isNullOrUndefined(t.labelFormat)?(s=s<0?0:s,ej.format(new Date(t.labels[Math.floor(s)]),ej.EjSvgRender.utils._dateTimeLabelFormat(t.intervalType,t),l)):ej.EjSvgRender.utils._getLabelContent(s,t,l)),i={X:a.mousemoveX,Y:t.y},a.displayAxisTooltip(i,s,t,e,r),$("#"+a.svgObject.id+"_AxisToolTipText_"+e).show(),$("#"+a.svgObject.id+"_AxisToolTipRect_"+e).show()):($("#"+a.svgObject.id+"_AxisToolTipText_"+e).hide(),$("#"+a.svgObject.id+"_AxisToolTipRect_"+e).hide()):"vertical"==t.orientation.toLowerCase()&&t.crosshairLabel.visible&&(a.mousemoveY<=t.y+t.height&&t.y<=a.mousemoveY?(s=(Math.abs(1-Math.abs(a.mousemoveY-(t.isInversed?t.y+t.height:t.y))/t.width/t.height)*t.visibleRange.delta+t.visibleRange.min).toFixed(o).replace(new RegExp("\\.0{"+o+"}"),""),"logarithmic"==n&&(s=Math.pow(t.logBase,s).toFixed(2).replace(new RegExp("\\.0{2}"),"")),"datetime"==n&&(s=ej.format(new Date(Math.floor(s)),ej.util.isNullOrUndefined(t.labelFormat)?ej.EjSvgRender.utils._dateTimeLabelFormat(t._intervalType,t):t.labelFormat,l)),"category"!=n&&"datetimecategory"!=n||(s="category"==n||ej.util.isNullOrUndefined(t.labelFormat)?ej.EjSvgRender.utils._getLabelContent(s,t,l):ej.format(new Date(t.labels[Math.floor(s)]),ej.EjSvgRender.utils._dateTimeLabelFormat(t.intervalType,t),l)),n={X:t.x,Y:a.mousemoveY},a.displayAxisTooltip(n,s,t,e,r),$("#"+a.svgObject.id+"_AxisToolTipText_"+e).show(),$("#"+a.svgObject.id+"_AxisToolTipRect_"+e).show()):($("#"+a.svgObject.id+"_AxisToolTipText_"+e).hide(),$("#"+a.svgObject.id+"_AxisToolTipRect_"+e).hide()))})}},chartTouchMove:function(e){this.cancelEvent(e),e=e.originalEvent.touches[0],this.chartInteractiveBehavior(e)},isZoomButtonHovered:function(e){if(null!=e.parentNode){var t=e.parentNode.id,e=e.id;if(-1==e.indexOf("_ZoomInBtn ")&&-1==e.indexOf("ZoomOutBtn")&&-1==e.indexOf("_ZoomBtn")&&-1==e.indexOf("_ResetZoom")&&-1==e.indexOf("_PanBtn")&&t&&-1==t.indexOf("_ZoomInBtn")&&-1==t.indexOf("_ZoomOutBtn")&&-1==t.indexOf("_ZoomBtn")&&-1==t.indexOf("_ResetZoom")&&-1==t.indexOf("_PanBtn"))return!1}return!0},showTooltipOnDrag:function(e,t){$("#"+e.svgObject.id).find("#"+e.svgObject.id+"_TrackToolTip").attr("visibility","visible"),$("#"+e.svgObject.id+"_TrackToolTip").show(),$(".tooltipDiv").css("display","block")},getScaleValues:function(e){for(var t,i=document.getElementById(e.element[0].id),s=1,n=1;"HTML"!=i.tagName;)"none"!=(t=window.getComputedStyle(i,"").getPropertyValue("transform"))&&(t=t.replace("matrix(","").replace(")","").split(","),s=parseFloat(t[0]),n=parseFloat(t[3])),i=i.parentNode;return{x:s,y:n}},chartInteractiveBehavior:function(e){var t=this.calMousePosition(e);this.mousemoveX=t.X,this.mousemoveY=t.Y;var i=this.getScaleValues(this),s=$.extend(!0,{},this.model.m_AreaBounds),n=s.X*i.x,a=s.Y*i.y,t=s.Width*i.x,s=s.Height*i.y,i="#"+this.svgObject.id;this.mouseWheelCoords&&(o=Math.abs(this.mouseWheelCoords.x-e.pageX),l=Math.abs(this.mouseWheelCoords.y-e.pageY),(0<o||0<l)&&!this.panning?this.enableTrackBall():this.disableTrackBall());var r,o=this,l=e.target.id;"cartesianaxes"==o.model.AreaType&&this.mousemoveX>=n&&this.mousemoveX<n+t&&this.mousemoveY<a+s&&this.mousemoveY>=a&&this.model.initSeriesRender?(r={x:o.mousemoveX,y:o.mousemoveY},null==(l=o.svgRenderer._getAttrVal($(e.target).parent(),"id"))||l!=o.svgRenderer._getAttrVal($(this.svgObject).find(i+"_ZoomBtn"),"id")&&l!=o.svgRenderer._getAttrVal($(this.svgObject).find(i+"_ResetZoom"),"id")&&l!=o.svgRenderer._getAttrVal($(this.svgObject).find(i+"_PanBtn"),"id")?this.enableTrackBall():this.disableTrackBall(),this.model.crosshair.visible||this.isZoomButtonHovered(e.target)?this.dragPoint?this.showTooltipOnDrag(o,e):this.closestXyPoint||($("#"+o.svgObject.id).find("#"+o.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),$("#"+o.svgObject.id+"_TrackToolTip").hide(),$(".tooltipDiv"+this._id).css("display","none")):this.tooltip(o,e),this.model.enable3D||(this.chartTrackball(o,r,e),this.chartCrossHair(o,r))):("none"!=o.model.AreaType&&"polaraxes"!=o.model.AreaType||this.isZoomButtonHovered(e.target)?this.dragPoint?this.showTooltipOnDrag(o,e):this.closestXyPoint||($("#"+o.svgObject.id).find("#"+o.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),$("#"+o.svgObject.id+"_TrackToolTip").hide(),$(".tooltipDiv"+this._id).css("display","none"),this._removeTrackBall(),this._removeHighlight()):this.tooltip(o,e),(r=this.model.prevPoint)&&r.point&&(this.model.enableCanvasRendering?$("#canvas_trackSymbol").remove():(e="boxandwhisker"==r.series.type?r.outlierPosition:ej.EjSvgRender.utils._getPoint(r.point,r.series),o.drawTrackerSymbol(r.series,r.seriesIndex,r.pointIndex,null,e)),this.model.prevPoint=null))},highlightSvg:function(e,t,i,s,n,a,r){var o;null!=t&&(o=this.svgObject.id+"_SeriesGroup_",l=t.substr(o.length),0<=t.indexOf(this.svgObject.id+"_symbolGroup_")&&(o=this.svgObject.id+"_symbolGroup_",l=t.substr(o.length))),l=null!=n?n.region.SeriesIndex:l;var l=this.model.series[l];i&&l&&(l.highlightSettings.enable||r)&&this.highlight(e,s,l,null,n,t,a,r)},highlightCanvas:function(e,t,i){for(var s,n=0;n<this.model._visibleSeries.length;n++){var a,r=this.model._visibleSeries[n],o=r.type.toLowerCase();"cartesianaxes"!=this.model.AreaType||"visible"!=r.visibility.toLowerCase()||"scatter"===o||"bubble"===o||"column"===o||-1!=o.indexOf("bar")||"stackingcolumn"===o||"stackingcolumn100"===o||r._hiloTypes||(o=this.calMousePosition(t),this.mousemoveX=o.X,this.mousemoveY=o.Y,r=this.getClosesPointXY([],[],r,this.mousemoveX,this.mousemoveY,t),ej.util.isNullOrUndefined(r.point)||((a=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={location:{x:this.mousemoveX,y:this.mousemoveY},region:{SeriesIndex:n,Region:{PointIndex:r.index}}}))}(i=a?a.data:i)&&this.model.series[i.region.SeriesIndex].highlightSettings.enable&&((s=$.extend({},this.model.series[i.region.SeriesIndex])).pointIndex=i.region.Region.PointIndex,s.seriesIndex=i.region.SeriesIndex,s.data=i,0==$("#"+this._id+"_Selection_series"+s.seriesIndex+"_canvas").length&&($("[id*="+this._id+"_Highlight_]").remove(),this.findCanvasSelection(s.seriesIndex,s.pointIndex,s.selectionSettings.mode.toLowerCase())||this.canvasHighlight(this,t,s)))},resizeCursor:function(e,t,i,s,n,a,r){var o=this.selectedRectIndex;t<=s||i<=n||a+s<=t||r+n<=i?($("#"+e+"_resize_rightRect"+o).css({cursor:"default"}),$("#"+e+"_resize_leftRect"+o).css({cursor:"default"}),$("#"+e+"_resize_bottomRect"+o).css({cursor:"default"}),$("#"+e+"_resize_topRect"+o).css({cursor:"default"}),$("#"+e+"_resize_bottomRightCornerCircle"+o).css({cursor:"default"})):(s<=t||n<=i||t<=a+s||i<=r+n)&&($("#"+e+"_resize_rightRect"+o).css({cursor:"e-resize"}),$("#"+e+"_resize_leftRect"+o).css({cursor:"w-resize"}),$("#"+e+"_resize_bottomRect"+o).css({cursor:"s-resize"}),$("#"+e+"_resize_topRect"+o).css({cursor:"n-resize"}),$("#"+e+"_resize_bottomRightCornerCircle"+o).css({cursor:"se-resize"}))},multiSelectMouseMove:function(evt){if(this._isMultiSelect&&"range"==this.multiSelectMode&&!this.dragPoint){for(var mouseMoveCords=this.calMousePosition(evt),mouseMoveX=mouseMoveCords.X,mouseMoveY=mouseMoveCords.Y,gripMouseMoveX,gripMouseMoveY,translate,selectionSettingsType=this.multiSelectType,width,height,x,y,rectX,rectY,rectWidth,rectHeight,id,x1,x2,y1,y2,xPlotOffset,yPlotOffset,modifiedX,modifiedY,mouseDownX=this.mouseDownX,mouseDownY=this.mouseDownY,selectedRectIndex=this.selectedRectIndex,containerSvg=this.svgObject.id,chartArea="#"+containerSvg+"_ChartArea",chartAreaX=parseInt($(chartArea).attr("x")),chartAreaY=parseInt($(chartArea).attr("y")),chartAreaWidth=parseInt($(chartArea).attr("width")),chartAreaHeight=parseInt($(chartArea).attr("height")),multiSelectMouseDownId=this.multiSelectMouseDownId,selctRectId="#"+containerSvg+"_selectRect",multiAxis=this.multiAxis,q=0,selectRectId,selectRectWidth,selectRectHeight,selectRectX,selectRectY,translate;q<multiAxis.length;q++)"horizontal"==multiAxis[q].orientation.toLowerCase()?(x1=multiAxis[q].Location.X1,x2=multiAxis[q].Location.X2,xPlotOffset=multiAxis[q].plotOffset):(y1=multiAxis[q].Location.Y1,y2=multiAxis[q].Location.Y2,yPlotOffset=multiAxis[q].plotOffset);if(this.drag&&!this.resize&&!this.rectPan&&!this.removeRect){var currentX=mouseMoveX,currentY=mouseMoveY,areaBounds=this.model.m_AreaBounds,rectOptions;switch(this.multiSelectDraw=!0,mouseMoveX<areaBounds.X?currentX=areaBounds.X:mouseMoveX>areaBounds.X+areaBounds.Width&&(currentX=areaBounds.X+areaBounds.Width),currentY=mouseMoveY<areaBounds.Y?areaBounds.Y:mouseMoveY>areaBounds.Y+areaBounds.Height?areaBounds.Y+areaBounds.Height:mouseMoveY,selectionSettingsType){case"x":width=Math.abs(currentX-mouseDownX),height=y1-y2+yPlotOffset+yPlotOffset,x=mouseDownX<currentX?mouseDownX:currentX,y=y2-yPlotOffset;break;case"y":width=x2-x1+xPlotOffset+xPlotOffset,height=Math.abs(currentY-mouseDownY),x=x1-xPlotOffset,y=mouseDownY<currentY?mouseDownY:currentY;break;case"xy":width=Math.abs(currentX-mouseDownX),height=Math.abs(currentY-mouseDownY),x=mouseDownX<currentX?mouseDownX:currentX,y=mouseDownY<currentY?mouseDownY:currentY}0<width&&0<height&&(rectOptions={id:this.svgObject.id+"_selectRect"+this.selectedRectIndex,x:x,y:y,width:width,height:height,fill:"rgba(41,136,214,0.2)","stroke-width":2,stroke:"rgba(41,136,214,0.5)",cursor:"pointer","clip-path":"url(#"+this.svgObject.id+"_ChartAreaClipRect)"},x1+xPlotOffset<=x&&mouseMoveX<=x2-xPlotOffset&&mouseMoveY<=y1+yPlotOffset&&y2-yPlotOffset<=y&&this.svgRenderer.drawRect(rectOptions,this.gEle),null!=this.gEle&&($(this.gEle).appendTo(this.parentgEle),0==this.selectedRectIndex&&(this.model.gCurrentEle=this.gEle),$(this.parentgEle).appendTo(this.svgObject)))}if(rectX=parseInt($(selctRectId+selectedRectIndex).attr("x")),rectY=parseInt($(selctRectId+selectedRectIndex).attr("y")),rectWidth=parseInt($(selctRectId+selectedRectIndex).attr("width")),rectHeight=parseInt($(selctRectId+selectedRectIndex).attr("height")),!this.drag&&(0<=evt.target.id.indexOf("selectRect")||0<=evt.target.id.indexOf("resize"))&&(0<=evt.target.parentNode.id.indexOf("selectedRect")&&(id=evt.target.parentNode.id.split("selectedRect")[1].match(/\d+/)[0],this.gripIndex=eval(id)),selectRectId="#"+containerSvg+"_selectRect",selectRectWidth=parseInt($(selectRectId+this.gripIndex).attr("width")),selectRectHeight=parseInt($(selectRectId+this.gripIndex).attr("height")),selectRectX=parseInt($(selectRectId+this.gripIndex).attr("x")),selectRectY=parseInt($(selectRectId+this.gripIndex).attr("y")),$("#"+containerSvg+"_gripCollection"+selectedRectIndex).css({visibility:"hidden"}),(selectRectX<=selectRectX+selectRectWidth-16||selectRectY<=selectRectY+selectRectHeight-16)&&$("#"+this.svgObject.id+"_gripCollection"+this.gripIndex).attr({transform:""}),(selectRectX+selectRectWidth-16<selectRectX||selectRectY+selectRectHeight-16<selectRectY)&&(translate="translate(15,15)",$("#"+this.svgObject.id+"_gripCollection"+this.gripIndex).attr({transform:translate})),this.oldId!=evt.target.id&&$("#"+containerSvg+"_gripCollection"+this.oldGripIndex).css({visibility:"hidden"}),$("#"+containerSvg+"_gripCollection"+this.gripIndex).css({visibility:"visible"}),this.oldId=evt.target.id,this.oldGripIndex=this.gripIndex),evt.target.id.indexOf("selectRect")<0&&evt.target.id.indexOf("resize")<0&&$("#"+containerSvg+"_gripCollection"+this.gripIndex).css({visibility:"hidden"}),this.resize){$("#"+containerSvg+"_closeTopRightCornerCircle"+selectedRectIndex).hide(),$("#"+containerSvg+"_closePath"+selectedRectIndex).hide(),$("#"+containerSvg+"_closePathOpposite"+selectedRectIndex).hide(),$("#"+containerSvg+"_gripCollection"+selectedRectIndex).css({visibility:"hidden"});var oldRectX=this.oldRectX[selectedRectIndex],oldRectY=this.oldRectY[selectedRectIndex],oldRectHeight=this.oldRectHeight[selectedRectIndex],oldRectWidth=this.oldRectWidth[selectedRectIndex],oldReBottomRectY=this.oldReBottomRectY[selectedRectIndex],oldReRightRectX=this.oldReRightRectX[selectedRectIndex];switch(selectionSettingsType){case"x":multiSelectMouseDownId==containerSvg+"_resize_rightRect"+selectedRectIndex?(rectWidth=mouseMoveX-oldRectX,$("#"+containerSvg+"_resize_rightRect"+selectedRectIndex).attr("x",mouseMoveX-5),mouseMoveX<oldRectX?(rectX=mouseMoveX,rectWidth=oldRectX-mouseMoveX):oldRectX<=mouseMoveX&&(rectX=oldRectX)):multiSelectMouseDownId==containerSvg+"_resize_leftRect"+selectedRectIndex&&(rectX=mouseMoveX,rectWidth=oldRectWidth+oldRectX-mouseMoveX,$("#"+containerSvg+"_resize_leftRect"+selectedRectIndex).attr("x",mouseMoveX-5),oldReRightRectX+5<mouseMoveX&&(rectX=oldReRightRectX+5,rectWidth=mouseMoveX-oldRectX-oldRectWidth)),this.resizeCursor(containerSvg,mouseMoveX,mouseMoveY,chartAreaX,chartAreaY,chartAreaWidth,chartAreaHeight);break;case"y":multiSelectMouseDownId==containerSvg+"_resize_topRect"+selectedRectIndex?(rectHeight=oldRectHeight+oldRectY-mouseMoveY,rectY=mouseMoveY,$("#"+containerSvg+"_resize_topRect"+selectedRectIndex).attr("y",mouseMoveY-5),oldReBottomRectY+5<mouseMoveY&&(rectY=oldReBottomRectY+5,rectHeight=mouseMoveY-oldRectY-oldRectHeight)):multiSelectMouseDownId==containerSvg+"_resize_bottomRect"+selectedRectIndex&&(rectHeight=mouseMoveY-oldRectY,$("#"+containerSvg+"_resize_bottomRect"+selectedRectIndex).attr("y",mouseMoveY-5),mouseMoveY<oldRectY?(rectY=mouseMoveY,rectHeight=oldRectY-mouseMoveY):oldRectY<=mouseMoveY&&(rectY=oldRectY)),this.resizeCursor(containerSvg,mouseMoveX,mouseMoveY,chartAreaX,chartAreaY,chartAreaWidth,chartAreaHeight);break;case"xy":multiSelectMouseDownId==containerSvg+"_resize_rightRect"+selectedRectIndex?(rectWidth=mouseMoveX-oldRectX,$("#"+containerSvg+"_resize_rightRect"+selectedRectIndex).attr("x",mouseMoveX-5),mouseMoveX<oldRectX?(rectX=mouseMoveX,rectWidth=oldRectX-mouseMoveX):oldRectX<=mouseMoveX&&(rectX=oldRectX)):multiSelectMouseDownId==containerSvg+"_resize_leftRect"+selectedRectIndex?(rectX=mouseMoveX,rectWidth=oldRectWidth+oldRectX-mouseMoveX,$("#"+containerSvg+"_resize_leftRect"+selectedRectIndex).attr("x",mouseMoveX-5),oldReRightRectX+5<mouseMoveX&&(rectX=oldReRightRectX+5,rectWidth=mouseMoveX-oldRectX-oldRectWidth)):multiSelectMouseDownId==containerSvg+"_resize_topRect"+selectedRectIndex?(rectHeight=oldRectHeight+oldRectY-mouseMoveY,rectY=mouseMoveY,$("#"+containerSvg+"_resize_topRect"+selectedRectIndex).attr("y",mouseMoveY-5),oldReBottomRectY+5<mouseMoveY&&(rectY=oldReBottomRectY+5,rectHeight=mouseMoveY-oldRectY-oldRectHeight)):multiSelectMouseDownId==containerSvg+"_resize_bottomRect"+selectedRectIndex?(rectHeight=mouseMoveY-oldRectY,$("#"+containerSvg+"_resize_bottomRect"+selectedRectIndex).attr("y",mouseMoveY-5),mouseMoveY<oldRectY?(rectY=mouseMoveY,rectHeight=oldRectY-mouseMoveY):oldRectY<=mouseMoveY&&(rectY=oldRectY)):multiSelectMouseDownId==containerSvg+"_resize_bottomRightCornerCircle"+selectedRectIndex&&(rectWidth=mouseMoveX-oldRectX,rectHeight=mouseMoveY-oldRectY,$("#"+containerSvg+"_resize_bottomRightCornerCircle"+selectedRectIndex).attr({cx:mouseMoveX,cy:mouseMoveY}),mouseMoveX<oldRectX&&mouseMoveY<oldRectY?(rectX=mouseMoveX,rectY=mouseMoveY,rectWidth=oldRectX-mouseMoveX,rectHeight=oldRectY-mouseMoveY):mouseMoveX<oldRectX?(rectX=mouseMoveX,rectWidth=oldRectX-mouseMoveX):mouseMoveY<oldRectY?(rectY=mouseMoveY,rectHeight=oldRectY-mouseMoveY):oldRectX<=mouseMoveX&&oldRectY<=mouseMoveY&&(rectX=oldRectX,rectY=oldRectY)),this.resizeCursor(containerSvg,mouseMoveX,mouseMoveY,chartAreaX,chartAreaY,chartAreaWidth,chartAreaHeight)}switch(selectionSettingsType){case"x":x1-xPlotOffset<=rectX&&rectWidth+rectX-x1<=x2-x1-xPlotOffset&&$(selctRectId+selectedRectIndex).attr({x:rectX,width:rectWidth});break;case"y":rectHeight+rectY-y2<=y1-y2+yPlotOffset&&y2-yPlotOffset<=rectY&&$(selctRectId+selectedRectIndex).attr({y:rectY,height:rectHeight});break;case"xy":x1-xPlotOffset<=rectX&&rectWidth+rectX-x1<=x2-x1-xPlotOffset&&rectHeight+rectY-y2<=y1-y2+yPlotOffset&&y2-yPlotOffset<=rectY&&$(selctRectId+selectedRectIndex).attr({x:rectX,y:rectY,width:rectWidth,height:rectHeight})}}if(this.rectPan)switch($("#"+containerSvg+"_closeTopRightCornerCircle"+selectedRectIndex).hide(),$("#"+containerSvg+"_closePath"+selectedRectIndex).hide(),$("#"+containerSvg+"_closePathOpposite"+selectedRectIndex).hide(),$("#"+containerSvg+"_gripCollection"+selectedRectIndex).css({visibility:"hidden"}),(mouseMoveX<=chartAreaX||mouseMoveY<=chartAreaY||chartAreaX+chartAreaWidth<=mouseMoveX||chartAreaY+chartAreaHeight<=mouseMoveY)&&this.multiSelectMouseUp(evt),modifiedX=this.PreviousCoords.X-evt.pageX,modifiedY=this.PreviousCoords.Y-evt.pageY,rectX-=modifiedX,rectY-=modifiedY,this.PreviousCoords.X=evt.pageX,this.PreviousCoords.Y=evt.pageY,selectionSettingsType){case"x":x1-xPlotOffset<=rectX&&rectWidth+rectX-x1<=x2-x1-xPlotOffset&&$(selctRectId+selectedRectIndex).attr({x:rectX});break;case"y":rectHeight+rectY-y2<=y1-y2+yPlotOffset&&y2-yPlotOffset<=rectY&&$(selctRectId+selectedRectIndex).attr({y:rectY});break;case"xy":x1-xPlotOffset<=rectX&&rectWidth+rectX-x1<=x2-x1-xPlotOffset&&rectHeight+rectY-y2<=y1-y2+yPlotOffset&&y2-yPlotOffset<=rectY&&$(selctRectId+selectedRectIndex).attr({x:rectX,y:rectY})}}},isTouch:function(e){this.model.browserInfo;e=e.originalEvent||e;return"touch"==e.pointerType||2==e.pointerType||-1<e.type.indexOf("touch")},highlightStart:function(e,t,i,s,n){var a;null!=e.target.parentNode&&(a=0<=(i=i||e.target.parentNode.id).indexOf(this.svgObject.id+"_SeriesGroup_")||0<=i.indexOf(this.svgObject.id+"_symbolGroup_")||0<=i.indexOf(this.svgObject.id+"_TrackSymbol_")||0<=i.indexOf(this.svgObject.id+"_Chart3D")),this.model.enableCanvasRendering?this.highlightCanvas(this,e,t):this.highlightSvg(this,i,a,e,t,s,n)},_changeDraggingPoints:function(e,t,i,s){i="datetime"==e.xAxis._valueType?new Date(i):i,s="datetime"==e.yAxis._valueType?new Date(s):s;var n=e.dragSettings.type.toLowerCase();"x"!=n&&"xy"!=n||"category"==e.xAxis._valueType||(this.dragPoint?(e.pointCollection[t].x=i,e.pointCollection[t].xValue="datetime"==e.xAxis._valueType&&"object"!=typeof i?new Date(i):i):(e._visiblePoints[t].x=e.points[t].x=i,e._visiblePoints[t].xValue=e.points[t].xValue="datetime"==e.xAxis._valueType&&"object"==typeof i?Date.parse(i):i),ej.util.isNullOrUndefined(e.dataSource)||(e.dataSource[t][e.xName]=i)),"y"!=n&&"xy"!=n||(this.dragPoint?(e.pointCollection[t].y=s,e.pointCollection[t].YValues[0]="datetime"==e.yAxis._valueType&&"object"!=typeof s?new Date(s):s):(e._visiblePoints[t].y=e.points[t].y=s,e._visiblePoints[t].YValues[0]=e.points[t].YValues[0]="datetime"==e.yAxis._valueType&&"object"==typeof s?Date.parse(s):s),ej.util.isNullOrUndefined(e.dataSource)||(e.dataSource[t][e.yName]=s))},_dragDelta:function(e,t,i,s,n,a){s={X:i,Y:s},e={X:e,Y:t},t=$.extend({},this.commonDragEventArgs);t.data={seriesIndex:n,pointIndex:a,oldValue:s,newValue:e},this._trigger("dragging",t),this.commonDragEventArgs=t},_getDraggedPoint:function(e,t,i){var s,n=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,this.model.requireInvertedAxes),i=this.model.requireInvertedAxes?(s=n.y+n.height-i,t-n.x):(s=t-n.x,n.y+n.height-i),e=ej.EjSvgRender.utils._getValuebyPoint(s,i,e,this.model.requireInvertedAxes);return{X:parseFloat(e.PointX.toFixed(2)),Y:parseFloat(e.PointY.toFixed(2))}},_pointDragandDrop:function(e,t,i){for(var s=e.data.seriesIndex,n=[],a=null,r=e.type.toLowerCase(),o={axes:{}},l=0;l<this.model._axes.length;l++)o.axes[this.model._axes[l].name]={};$("[id*=_Marker]").remove();var d,h=this._getDraggedPoint(e,this.mousemoveX,this.mousemoveY),c=h.X,u=h.Y,p=this.commonDragEventArgs.data.currentPoint?this.commonDragEventArgs.data.currentPoint.xValue:this.commonDragEventArgs.data.oldValue.X,m=this.commonDragEventArgs.data.currentPoint?this.commonDragEventArgs.data.currentPoint.yValue[0]:this.commonDragEventArgs.data.oldValue.Y;e.region?(y=e.region,i._dragDelta(c,u,p,m,y.SeriesIndex,y.Region.PointIndex)):(h=e.pointData,i._dragDelta(c,u,p,m,h.seriesIndex,h.index)),this.model.enableCanvasRendering?(this.canvasElement&&this.canvasElement.clearRect(0,0,i.svgWidth,i.svgHeight),0==$("#"+i._id+"_PreviewSeries"+s+"_canvas").length&&(g=document.getElementById(i._id+"_canvas").getBoundingClientRect(),d=this.createCanvasElement(i._id+"_PreviewSeries"+s+"_canvas",i.svgWidth,i.svgHeight,g),this.createRect(i,d),this.canvasElement=d)):(e.xAxis=null===e.xAxis||void 0===e.xAxis?this.model._axes[0]:e.xAxis,e.yAxis=null===e.yAxis||void 0===e.yAxis?this.model._axes[1]:e.yAxis,a="translate("+(f=ej.EjSvgRender.utils._getTransform(e.xAxis,e.yAxis,this.model.requireInvertedAxes)).x+","+f.y+")",x={id:this.svgObject.id+"_PreviewSeriesGroup",transform:a,cursor:"default",visibility:"visible"},$("#"+this.svgObject.id+"_PreviewSeriesGroup").attr("transform",a),this.gPreviewSeriesGroupEle||(this.chartObj=i,this.chartObj.gPreviewSeriesGroupEle=this.gPreviewSeriesGroupEle=this.svgRenderer.createGroup(x)),0<this.gPreviewSeriesGroupEle.childNodes.length&&this.gPreviewSeriesGroupEle.removeChild(this.gPreviewSeriesGroupEle.childNodes[0])),n=$.extend(!0,{},e._visiblePoints),(e.pointCollection=n).length=e._visiblePoints.length;var s=i.commonDragEventArgs.data,g=s.pointIndex,f=s.seriesIndex;i._changeDraggingPoints(e,g,s.newValue.X,s.newValue.Y);var _,v,b,a=new ej.seriesTypes[r],x=e.pointCollection[g];"bubble"==r?(w=ej.EjSvgRender.utils._getPoint(x,e),b={id:this.svgObject.id+"_PreviewSeries"+f+"_Point"+g,cx:w.X+this.canvasX,cy:w.Y+this.canvasY,r:x.radius,fill:e.fill,"stroke-width":2,visibility:"visible","stroke-dasharray":"",opacity:.6,stroke:"transparent"},this.model.enableCanvasRendering?ej.EjCanvasRender.prototype.drawCircle(b,d):this.svgRenderer.drawCircle(b,this.gPreviewSeriesGroupEle),this.svgRenderer.append(this.gPreviewSeriesGroupEle,this.gSeriesEle)):"scatter"==r?(w=ej.EjSvgRender.utils._getPoint(x,e),_=e.marker.shape.capitalizeFirstString(),w={startX:w.X+this.canvasX,startY:w.Y+this.canvasY},v={ShapeSize:{width:e.marker.size.width,height:e.marker.size.height},ID:this.svgObject.id+"_PreviewSeries"+f+"_Point"+g,Style:{Color:e.fill,BorderWidth:e.marker.border.width,BorderColor:"transparent",Opacity:.6,Visibility:"visible"}},this.model.enableCanvasRendering?ej.EjSvgRender.chartSymbol["_draw"+_](w,v,this,d):ej.EjSvgRender.chartSymbol["_draw"+_](w,v,this,this.gPreviewSeriesGroupEle),this.svgRenderer.append(this.gPreviewSeriesGroupEle,this.gSeriesEle)):"column"==r||"bar"==r?(x.xValue="object"==typeof x.xValue?Date.parse(x.xValue):x.xValue,n=ej.EjSeriesRender.prototype.getOrigin(i,e,o),s=e.sidebysideInfo,_=x.YValues[0],v=n,s=(n=ej.EjSeriesRender.prototype.calculateSides(x,s)).x1,n=n.x2,v=ej.EjSeriesRender.prototype.getRectangle(s,_,n,v,e,i),b={id:this.svgObject.id+"_PreviewSeries"+f+"_Point"+g,x:v.X+this.canvasX,y:v.Y+this.canvasY,width:v.Width,height:v.Height,cornerRadius:e.cornerRadius,fill:e.fill,"stroke-width":2,plot:_<0?"negative":"positive",opacity:.6,stroke:"transparent","stroke-dasharray":""},this.model.enableCanvasRendering?ej.EjCanvasRender.prototype.drawRect(b,d):(this.svgRenderer.drawRect(b,this.gPreviewSeriesGroupEle),this.svgRenderer.append(this.gPreviewSeriesGroupEle,this.gSeriesEle))):("spline"!=r&&"splinearea"!=r||(x.xValue="object"==typeof x.xValue?Date.parse(x.xValue):x.xValue),a.draw(this,e,o));var y,w=ej.EjSvgRender.utils._getPoint(x,e);e.tooltip.visible&&(ej.util.isNullOrUndefined(e.tooltip.template)?($(".tooltipDiv"+this._id).remove(),i.displayShowTooltip(w,x,e,x.actualIndex)):($("#"+i.svgObject.id).find("#"+i.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),y={SeriesIndex:f,Region:{PointIndex:x.actualIndex}},i.createTooltip(y,t,e)))},_dragPointMarker:function(e,t,i,s,n){var a,r,o=e.seriesIndex,l=ej.EjSvgRender.utils._getPoint(n.point,e);this.model.enableCanvasRendering?0==$("#"+this.svgObject.id+"_Marker").length&&(r=document.getElementById(this.svgObject.id).getBoundingClientRect(),a=this.createCanvasElement(this.svgObject.id+"_Marker",this.svgWidth,this.svgHeight,r)):(r={id:this.svgObject.id+"_markerGroup_"+o},this.gMarkerGroupEle||(this.gMarkerGroupEle=this.svgRenderer.createGroup(r)));e={id:this.svgObject.id+"_Series"+o+"_Point"+n.index+"_Marker",cx:l.X+this.model.m_AreaBounds.X,cy:l.Y+this.model.m_AreaBounds.Y,r:7,fill:e.fill,"stroke-width":3,opacity:1,stroke:"white",visibility:"visible"};this.model.enableCanvasRendering?ej.EjCanvasRender.prototype.drawCircle(e,a):(this.svgRenderer.drawCircle(e,this.gMarkerGroupEle),this.svgRenderer.append(this.gMarkerGroupEle,this.gSeriesEle))},_dragPointGripper:function(e){var t,i,s=e.region.type.toLowerCase(),n=this.model._visibleSeries[e.region.SeriesIndex],a=(n._visiblePoints[e.region.Region.PointIndex],n.isTransposed),r=n.yAxis.isInversed;if("column"==s||"bar"==s){this.model.enableCanvasRendering?(i=document.getElementById(this.svgObject.id).getBoundingClientRect(),t=this.createCanvasElement(this.svgObject.id+"_Marker",this.svgWidth,this.svgHeight,i),document.getElementById(t.canvas.id).style.zIndex=1):(i={id:this.svgObject.id+"_markerGroup_"+e.region.SeriesIndex},this.gMarkerGroupEle||(this.gMarkerGroupEle=this.svgRenderer.createGroup(i)));var o,l,d,h,c=e.region.Region.Bounds;(a&&"bar"==s||"column"==s&&!a)&&(l=c.Width,o=c.X),(!a&&"bar"==s||"column"==s&&a)&&(l=c.Height,o=c.Y),h=(75<l?l-75:0)/2+o+(l=l<75?l-l/3:50)/6+(d=(l-6)/6)/2;for(var u=1;u<=3;u++){var p={id:this.svgObject.id+"_Series"+e.region.SeriesIndex+"_Point"+e.region.Region.PointIndex+"_Marker"+u,fill:"white",opacity:1,stroke:"white",visibility:"visible"};h+=1==u?d:2*d+3,p.r=Math.abs(d),(a&&"bar"==s||"column"==s&&!a)&&(p.cx=h,p.cy=r?c.Y+c.Height-d-5:c.Y+d+5),(!a&&"bar"==s||"column"==s&&a)&&(p.cx=r?c.X+d+5:c.X+c.Width-d-5,p.cy=h),this.model.enableCanvasRendering?ej.EjCanvasRender.prototype.drawCircle(p,t):this.svgRenderer.drawCircle(p,this.gMarkerGroupEle)}this.svgRenderer.append(this.gMarkerGroupEle,this.gSeriesEle)}},chartMouseMove:function(s){var e=this.GetSeriesPoint(s),t=this.svgObject,i=this.model,n=i.zooming.enable,a=i.enableCanvasRendering;i.event=s,clearTimeout(this.removeTooltip),this.doPan&&-1<s.target.id.indexOf(this._id+"_scrollbar")&&(this.doPan=!1);s.target.classList;var r=0,o=0;if("cartesianaxes"!=this.multiSelectAreaType||n||a||this.multiSelectMouseMove(s),this.rotateActivate&&this.oPreviousCoords){var l,d=this.oPreviousCoords.Y-this.mousemoveY,h=this.oPreviousCoords.X-this.mousemoveX;if(h||d){i.tilt-=d,i.rotation+=h,this.model.isSelected&&(l=this.selectedStyle(this)),this.isTouch(s)||$(this.chart3D).empty(),$("#template_group_"+this._id).empty();var c={Width:$(t).width(),Height:$(t).height()};if(this.graphics.view(t,this,i.rotation,i.tilt,c,i.perspectiveAngle,i.depth),this.svgRenderer.append(this.chart3D,t),this.model.isSelected)for(var u=0;u<l.length;u++)$("#"+l[u].id).attr("class",l[u].className)}this.oPreviousCoords.Y=this.mousemoveY,this.oPreviousCoords.X=this.mousemoveX}s.target.id;var p=t.id,c=this.isZoomButtonHovered(s.target),m=i._visibleSeries,g=m.length;$("[id*=_Marker]").remove();for(u=g-1;0<=u;u--){var f=m[u],_=f.type.toLowerCase();if(f.dragSettings.enable&&!i.enable3D){if(this._enableDragging(f,u,s),this.dragPoint)break;F=this.calMousePosition(s),this.mousemoveX=F.X,this.mousemoveY=F.Y;F=this.GetSeriesPoint(s);if(!f.marker.visible&&"bubble"!=_&&"scatter"!=_&&"column"!=_&&"bar"!=_){_=this.getClosesPointXY(v,b,f,this.mousemoveX,this.mousemoveY,s);if(_.point){f.seriesIndex=u,this._dragPointMarker(f,this.mousemoveX,this.mousemoveY,s,_),this.closestXyPoint=_;break}}if(F&&F.region.SeriesIndex==u){this._dragPointGripper(F);break}}}var v,b,x,y=this;this.dragPoint&&(v=[],b=[],$(document).keyup(function(e){27==e.keyCode&&($(".tooltipDiv"+this._id).remove(),$("#"+p+"_TrackToolTip").remove(),y.dragPoint=!1,m[y.commonDragEventArgs.data.seriesIndex].pointCollection=null,y.chartMouseUp(e))}),D=this.dragIndex.seriesIndex,y._pointDragandDrop(m[D],s,y)),this.calMousePosition(s),$("#"+this._id+"_tooltip").remove(),!this.dragPoint&&(this.drag||c||(this.isTouch(s)||i.doubleTapped)&&!i.crosshairMoved)||this.chartInteractiveBehavior(s),i.crosshair.visible&&"cartesianaxes"==i.AreaType||(a&&e||($("[class*=HighlightStyle]").attr("class",""),$("[class*=HighlightLegendStyle]").attr("class",""),$("[class*=HighlightLegendPathStyle]").attr("class",""),$("[class*=HighlightPathStyle]").attr("class",""),$("[class*=Highlightseries]").attr("class",""),$("[id*="+this._id+"_Highlight_]").remove()),this.highlightStart(s,e)),this.panning||(A="#"+p,n&&"cartesianaxes"==i.AreaType&&!i.enable3D&&(!this.drag||this.dragPoint||this.chartRightClick||(this.disableTrackBall(),$("#"+p+"_ZoomArea").remove(),V=this.mousemoveX,B=this.mousemoveY,c=i.m_AreaBounds,this.mousemoveX<c.X?V=c.X:this.mousemoveX>c.X+c.Width&&(V=c.X+c.Width),B=this.mousemoveY<c.Y?c.Y:this.mousemoveY>c.Y+c.Height?c.Y+c.Height:this.mousemoveY,c="x"==(e=i.zooming.type.toLowerCase())?(L=Math.abs(V-this.mouseDownX),w=c.Height,x=V>this.mouseDownX?this.mouseDownX:V,c.Y):(x="y"==e?(L=c.Width,w=Math.abs(B-this.mouseDownY),c.X):(L=Math.abs(V-this.mouseDownX),w=Math.abs(B-this.mouseDownY),V>this.mouseDownX?this.mouseDownX:V),B>this.mouseDownY?this.mouseDownY:B),$(t).css({"-moz-user-select":"-moz-none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}),this.zooming=!0,L={id:p+"_ZoomArea",x:x+r,y:c+o,width:L,height:w,fill:"rgba(69,114,167,0.25)","stroke-width":1,stroke:"rgba(69,114,167,0.25)","clip-path":"url(#"+p+"_ChartAreaClipRect)"},a?this.svgRenderer.drawZoomRect(L,this):this.svgRenderer.drawRect(L,t))));var w=i.zooming.enableDeferredZoom;if(this.panning&&this.doPan&&"cartesianaxes"==i.AreaType&&!this.dragPoint)if(this.currentPageX=s.pageX,this.currentPageY=s.pageY,$("#secondCanvas").remove(),$("#"+this._id+"_canvas").css({cursor:"pointer"}),ej.isTouchDevice()||w){if(ej.isTouchDevice()||w){for(var C=0;C<m.length;C++){var S=i.series[C],T=ej.EjSvgRender.utils._getTransform(S.xAxis,S.yAxis,i.requireInvertedAxes),R=s.pageX-this.oPreviousCoords.x+T.x,k=s.pageY-this.oPreviousCoords.y+T.y,O="translate("+R+","+k+")";$("#"+p+"_SeriesGroup_"+C).attr("transform",O),$("#"+p+"_symbolGroup_"+C).attr("transform",O),$("#"+p+"_TextGroup_"+C).attr("transform",O)}for(var D=0;D<i.indicators.length&&0<i.indicators[D]._points.length;D++){var I=i.indicators[D],T=ej.EjSvgRender.utils._getTransform(I.xAxis,I.yAxis,i.requireInvertedAxes),O="translate("+(R=s.pageX-this.oPreviousCoords.x+T.x)+","+(k=s.pageY-this.oPreviousCoords.y+T.y)+")";$("#"+p+"_indicatorGroup_"+D).attr("transform",O)}}}else{var j={x:this.oPreviousCoords.x-s.pageX,y:this.oPreviousCoords.y-s.pageY};this.oPreviousCoords={x:s.pageX,y:s.pageY},$.each(i._axes,function(e,t){var i=Math.max(1/ej.EjSvgRender.utils._minMax(t.zoomFactor,0,1),1);y.translate(t,j.x,j.y,i)}),this._updateScroll(),this.redraw(!0,null,s.target,this.isTouch(s)),this._cursorToPointer(),this._enableZoomingButtons()}var L=s.target.id;""!=L||ej.util.isNullOrUndefined(s.target.parentNode)||(L=0<=s.target.parentNode.id.indexOf("_XLabel_")||0<=s.target.parentNode.id.indexOf("_YLabel_")?s.target.parentNode.id:L);var A=this._id,w=ej.util.isNullOrUndefined(s.target.parentNode)?"":s.target.parentNode.id;function E(e){var t,i=y._id;$("#"+i+"_tooltip").length<=0?(t=$("<div></div>").attr({id:i+"_tooltip",class:"zoom"+i}),$(t).html("&nbsp"+e+"&nbsp"),$(document.body).append(t),$(t).css({left:s.pageX+10,top:s.pageY+10,display:"block",position:"absolute","z-index":"13000",cursor:"default","font-family":"Segoe UI",color:"#707070","font-size":"12px","background-color":"#FFFFFF",border:"1px solid #707070"})):$("#"+i+"_tooltip").css({left:s.pageX+10,top:s.pageY+10})}n&&(w==A+"_svg_ResetZoom"?E(this._localizedLabels.reset):w==A+"_svg_PanBtn"?E(this._localizedLabels.pan):w==A+"_svg_ZoomBtn"?E(this._localizedLabels.zoom):w==A+"_svg_ZoomInBtn"?E(this._localizedLabels.zoomIn):w==A+"_svg_ZoomOutBtn"&&E(this._localizedLabels.zoomOut));n=this.getAxisLabelData(s);if(n&&((H=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data=n,this._trigger("axisLabelMouseMove",H)),!this.isTouch(s)){this.axisTooltip(s,L),i.title.enableTrim&&this.showTitleTooltip(s,L);for(u=0,g=i.series.length;u<g;u++){var P,M=(S=i.series[u]).marker&&S.marker.dataLabel;!S._enableSmartLabels||this.model.enable3D||M.enableWrap||(P=M.template,M=M.font,"none"==i.AreaType&&ej.util.isNullOrUndefined(P)&&this.datalabelTooltip(s,u,M))}}0<$(t).find(A+"_ResetZoom,"+A+"_PanBtn,"+A+"_ZoomBtn").length&&$(t).find(A+"_ResetZoom,"+A+"_PanBtn,"+A+"_ZoomBtn").appendTo(t);var F;a&&$(this.legendContainer).children().css("cursor","default"),a&&(-1!=L.indexOf("_ResetZoom")||-1!=w.indexOf("_ResetZoom")?E(this._localizedLabels.reset):-1!=L.indexOf("_PanBtn")||-1!=w.indexOf("_PanBtn")?E(this._localizedLabels.pan):-1!=L.indexOf("_ZoomBtn")||-1!=w.indexOf("_ZoomBtn")?E(this._localizedLabels.zoom):-1!=L.indexOf("_ZoomInBtn")||-1!=w.indexOf("_ZoomInBtn")?E(this._localizedLabels.zoomIn):-1==L.indexOf("_ZoomOutBtn")&&-1==w.indexOf("_ZoomOutBtn")||E(this._localizedLabels.zoomOut),this.isTouch(s)||(this._textTooltip(s,i.xAxisLabelRegions),this._textTooltip(s,i.yAxisLabelRegions)));var N,z,V,B,H,Y=this;i.xAxisTitleRegion&&(V=this.mousemoveX,B=this.mousemoveY,N=this.model.primaryXAxis.title.isReversed,z=this.model.primaryXAxis.font,$.each(i.xAxisTitleRegion,function(e,t){V>=t.Bounds.X&&V<=t.Bounds.X+t.Bounds.Width&&B>=t.Bounds.Y-t.Bounds.Height&&B<=t.Bounds.Y&&t.trimText!=t.labelText&&Y.showAxisTooltip(s.pageX,s.pageY,t.labelText,t.trimText,N,z)})),i.yAxisTitleRegion&&(V=this.mousemoveX,B=this.mousemoveY,N=this.model.primaryXAxis.title.isReversed,z=this.model.primaryXAxis.font,$.each(i.yAxisTitleRegion,function(e,t){V>=t.Bounds.X&&V<=t.Bounds.X+t.Bounds.Width&&B>=t.Bounds.Y-t.Bounds.Height&&B<=t.Bounds.Y&&t.trimText!=t.labelText&&Y.showAxisTooltip(s.pageX,s.pageY,t.labelText,t.trimText,N,z)})),i.axisMultiLevelLabelRegions&&(V=this.mousemoveX,B=this.mousemoveY,$.each(i.axisMultiLevelLabelRegions,function(e,t){V>=t.Bounds.X&&V<=t.Bounds.X+t.Bounds.Width&&B>=t.Bounds.Y-t.Bounds.Height&&B<=t.Bounds.Y&&t.trimText!=t.labelText&&Y.showAxisTooltip(s.pageX,s.pageY,t.labelText)})),(H=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={location:{x:this.mousemoveX,y:this.mousemoveY},size:{height:i.svgHeight,width:i.svgWidth},id:s.target.id,pageX:s.pageX,pageY:s.pageY},this._trigger("chartMouseMove",H)},axisTooltip:function(e,t){var i,s=this.svgObject.id,n=this.model.hAxes,a=this.model.vAxes;if(-1<t.indexOf("svghorizontal")&&(l=n[0],i=t.replace(this._id,"").replace("_svghorizontal",""),(h=l.visibleLabels[parseInt(i)]).Text=h.Text.toString(),-1<h.Text.indexOf("...")&&(c=h.Text==h.originalText?"":h.originalText,this.showAxisTooltip(e.pageX,e.pageY,c))),0<=t.indexOf("_YLabel_")){for(var r=0;r<a.length;r++)if(0<=t.indexOf(s+"_"+a[r].name+"_YLabel_")){l=a[r];break}if(l&&l.enableTrim){d=l.visibleLabels.length;for(var o=0;o<d&&"cartesianaxes"==this.model.AreaType;o++)if(t==s+"_"+a[r].name+"_YLabel_"+o){if(""==(c=(h=l.visibleLabels[o]).Text==h.displayText?"":l.labelFormat?l.labelFormat.replace("{value}",h.Text):h.Text))break;"inside"==l.labelPosition.toLowerCase()&&(this._hideTooltip(),this._removeTrackBall()),this.showAxisTooltip(e.pageX,e.pageY,c,h.displayText)}}}if(0<=t.indexOf("_XLabel_")){for(var l,d,r=0;r<n.length;r++)if(0<=t.indexOf(s+"_"+n[r].name+"_XLabel_")){l=n[r];break}if(l&&(l.enableTrim||"trim"==l.labelIntersectAction.toLowerCase()||"wrapbyword"==l.labelIntersectAction.toLowerCase())){d=l.visibleLabels.length;for(var h,c,u=l.isInversed,p=l.font,o=0;o<d&&"cartesianaxes"==this.model.AreaType;o++)if(t==s+"_"+n[r].name+"_XLabel_"+o){if(""==(c=(h=l.visibleLabels[o]).Text==h.displayText?"":h.Text))break;"inside"==l.labelPosition.toLowerCase()&&(this._hideTooltip(),this._removeTrackBall()),this.showAxisTooltip(e.pageX,e.pageY,c,h.displayText,u,p)}}}},showTitleTooltip:function(e,t){ej.EjSvgRender.utils._measureText(this.model.title.text,$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,this.model.title.font);var i,s=this.model,n=s._titleLocation,a=s._subTitleLocation,r=s.title.enableTrim,o=s.elementSpacing,l=this.mousemoveX,d=this.mousemoveY,h=(s.title.textOverflow.toLowerCase(),s.title.subTitle.enableTrim),c=(s.title.subTitle.textOverflow.toLowerCase(),s.title.text),u=s.title.subTitle.text,p=s.title.isReversed;r&&this.model.trimTooltip&&(i=ej.EjSvgRender.utils._trimText(c,s.title.maximumWidth,s.title.font),(0<=t.indexOf("ChartTitleText")||this.model.enableCanvasRendering&&l>=n.X-o&&l<=n.X-o+n.size.width&&d>=n.Y-n._height&&d<=n.Y+n.size.height)&&this.showAxisTooltip(e.pageX,e.pageY,c,i,p,s.title.font)),h&&s.subTitleTooltip&&(i=ej.EjSvgRender.utils._trimText(u,s.title.subTitle.maximumWidth,s.title.subTitle.font),(0<=t.indexOf("ChartSubTitleText")||s.enableCanvasRendering&&l>=a.X&&l<=a.X+a.size.width&&d>=a.Y&&d<=a.Y+a.size.height)&&this.showAxisTooltip(e.pageX,e.pageY,u,i,p,s.title.subTitle.font))},_updateScroll:function(){for(var e,t=this.model.scrollObj,i=t?t.length:0,s=this.model._axes,n=this.scrollbarContainer,a=0;a<i;a++)t[a]&&((e=t[a]).zoomPosition==s[a].zoomPosition&&e.zoomFactor==s[a].zoomFactor||(e.zoomPosition=s[a].zoomPosition,e.zoomFactor=s[a].zoomFactor,n._initializeScrollbarVariables(e),n._scrollbarUpdate.call(this,e),n._setScrollPosition.call(this,e.startX,e.startX+e.rectWidth,e)))},_hideTooltip:function(){$("#"+this.svgObject.id).find("#"+this.svgObject.id+"_TrackToolTip").attr("visibility","hidden"),$("#"+this.svgObject.id+"_TrackToolTip").attr("visibility","hidden").hide(),$(".tooltipDiv"+this._id).css("display","none")},_removeHighlight:function(){if($("[id*=HighlightSegment]").remove(),$("[id*=HighlightPath]").remove(),$("[id*=HighlightLegendSegment]").remove(),$("[id*=HighlightLegendPath]").remove(),$("[id*=HighlightDef]").remove(),$("[id*=Highlightseries]").remove(),$("[id*="+this._id+"_Highlight_]").remove(),!this.model.enableCanvasRendering&&!this.vmlRendering){var e=this.svgObject.querySelector("[class^='Highlight']");if(null!==e&&null==e.length)e.removeAttribute("class");else for(var t=e&&e.length;t--;)e.removeAttribute("class")}},_removeSelection:function(){$("[id*="+this._id+"_SelectionCluster_Legend]").remove(),$("[id*="+this._id+"_Selection_series]").remove(),$("[id*="+this._id+"_Selection_Cluster]").remove(),$("[id*="+this._id+"SelectionSegment]").remove(),$("[id*="+this._id+"SelectionPath]").remove(),$("[id*="+this._id+"SelectionLegend]").remove(),$("[id*="+this._id+"SelectionDef]").remove(),$("[id*="+this._id+"Selectionseries]").remove(),$("[id*="+this._id+"_Selection_]").remove()},datalabelTooltip:function(i,e,s){var t=this.calMousePosition(i);this.mousemoveX=t.X,this.mousemoveY=t.Y;var n,a,r,o,l,d,h=this._id,c=this.mousemoveX,u=this.mousemoveY,p=this.vmlRendering,m=this.model.elementSpacing,g=this;ej.util.isNullOrUndefined(this.accDataLabelRegion[e])||$.each(this.accDataLabelRegion[e],function(e,t){n=t.bounds.minX,r=t.bounds.minY,a=t.bounds.maxX,o=t.bounds.maxY,p&&(n=t.bounds.minX+t.bounds.width/2,a=t.bounds.maxX+t.bounds.width/2,r=t.bounds.minY,o=t.bounds.maxY),n<=c&&c<=a&&r<=u&&u<=o&&($("#"+h+"_tooltip").remove(),r=$("<div></div>").attr({id:h+"_tooltip",class:"ejTooltip"+h}),t.trimmedText!=t.text&&($("#"+g.svgObject.id+"_TrackToolTip").hide(),$(r).html(t.text),$(document.body).append(r),o=ej.EjSvgRender.utils._measureText(t.text,t.text.length,t.font).width,$(r).css({top:i.pageY+m,display:"block",position:"absolute","z-index":"13000",cursor:"default",color:"#000000","font-size":s.size,"background-color":"#FFFFFF",border:"1px solid #707070","white-space":"nowrap",padding:"5px"}),"pyramid"!=t.type&&"funnel"!=t.type||(l=g.model.m_AreaBounds.Width+g.model.m_AreaBounds.X-i.pageX,o<l?$(r).css({left:i.pageX+m}):(d=i.pageX-o+2*m,$(r).css({left:d}))),"pie"!=t.type&&"doughnut"!=t.type&&"pieofpie"!=t.type||(n>t.bounds.centerX?(l=g.svgWidth-g.model.margin.left-g.model.margin.right-c)<o?(d=i.pageX-o,$(r).css({left:d+m})):$(r).css({left:i.pageX+m}):(l=c)<o?$(r).css({left:i.pageX+m}):(d=i.pageX-o,$(r).css({left:d-2*m})))))})},showAxisTooltip:function(e,t,i,s,n,a){var r,o=this._id,o=$("<div></div>").attr({id:o+"_tooltip",class:"ejTooltip"+o});$(o).html(i),n&&!ej.util.isNullOrUndefined(a)&&(i=ej.EjSvgRender.utils._measureText(i,null,a).width,r=(r=ej.EjSvgRender.utils._measureText(s,null,a).width)<=i?i:r),$(document.body).append(o),$(o).css({left:n?e-r:e+10,top:t+10,display:"block",position:"absolute","padding-left":"3px","padding-right":"3px","z-index":"13000",cursor:"default","font-family":"Segoe UI",color:"#707070","font-size":"12px","background-color":"#FFFFFF",border:"1px solid #707070"})},_textTooltip:function(s,e,n,a){var r,t=this.calMousePosition(s),i=this.model.legend._ejScroller,o=0,l=n&&($("#legend_"+this._id).find('[class*="e-vscrollbar"]').length||"scroll"==$("#legend_"+this._id)[0].style.overflowY)?t.X-18:t.X,d=t.Y,h=l,c=d,u=this._id,p=this.model.legend,t=p.enableScrollbar,m=(p.textOverflow.toLowerCase(),i?$("#legend_"+this._id).ejScroller("instance").model.scrollTop:$("#legend_"+this._id).scrollTop()),o=i?$("#legend_"+this._id).ejScroller("instance").model.scrollLeft:$("#legend_"+this._id).scrollLeft();n&&i&&(o=0==o?$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue:$("#legend_"+this._id).ejScroller("instance").model.scrollLeft==$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue?0:$("#legend_"+this._id).ejScroller("instance")._rtlScrollLeftValue-$("#legend_"+this._id).ejScroller("instance").model.scrollLeft),(t||i)&&(h=l+(o||0),c=d+(m||0)),$.each(e,function(e,t){var i;h>=t.bounds.x&&h<=t.bounds.x+t.bounds.width&&(c>=t.bounds.y&&c<=t.bounds.y+t.bounds.height||c>=t.bounds.y-t.bounds.height/3&&c<=t.bounds.y)&&($("#"+u+"_tooltip").remove(),r=$("<div></div>").attr({id:u+"_tooltip",class:"ejTooltip"+u}),("array"==jQuery.type(t.trimText)?t.trimText.join(" "):t.trimText)!=t.labelText&&($(r).html(t.labelText),n&&!ej.util.isNullOrUndefined(a)&&(i=ej.EjSvgRender.utils._measureText(t.labelText,null,a).width),$(document.body).append(r),$(r).css({left:n?s.pageX-i-15:s.pageX+10,top:s.pageY+10,display:"block",position:"absolute","padding-left":"3px","padding-right":"3px","z-index":"13000",cursor:"default","font-family":"Segoe UI",color:"#707070","font-size":"12px","background-color":"#FFFFFF",border:"1px solid #707070"})))})},pieExplosion:function(e){this.model.explode=!0;var t=e,i=t.region.Series,s=t.region.SeriesIndex,n=new ej.seriesTypes[i.type.toLowerCase()],a=i.explodeIndex,r=(i.labelPosition.toLowerCase(),{SeriesIndex:t.pointData[0].SeriesIndex,PointIndex:t.pointData[0].Index}),o=this.model._isPieOfPie?t.pointData[0].PointIndex:t.region.Series._visiblePoints[t.pointData[0].Index].actualIndex;if(a!=o&&!t.region.Series.explodeAll){if(i.explodeIndex=o,o=t.pointData[0].PieSeriesIndex,!ej.util.isNullOrUndefined(this.model.explodeValue)&&this.model.explodeValue!=r){this.model.explodeValue.SeriesIndex!=t.region.SeriesIndex&&(i=this.model._visibleSeries[this.model.explodeValue.SeriesIndex]);for(var r=this.model._isPieOfPie?this._getPieOfPiePoint(this.model.explodeValue.PointIndex,i):i._visiblePoints[this.model.explodeValue.Index],l=n._calculateArcData(this,this.model.explodeValue.PointIndex,r,i,this.model.explodeValue.SeriesIndex,this.model.explodeValue.PieSeriesIndex),d=this.svgObject.id+"_SeriesGroup_"+this.model.explodeValue.SeriesIndex,h=1==this.model.explodeValue.PieSeriesIndex?$(this.gSeriesEle).children("#"+d)[1]:$(this.gSeriesEle).children("#"+d)[0],c=$(h).children(),u=0;u<c.length;u++){var p=c[u],m=this.svgRenderer._getAttrVal($(p)[0],"data-pointIndex");if(parseInt(m)==this.model.explodeValue.PointIndex){this.svgRenderer._setAttr($(p),{d:l.Direction});break}}n.drawDataLabelAcc(this,i,this.model.explodeValue.Index,r,this.model.explodeValue.SeriesIndex,this.model.explodeValue.PieSeriesIndex)}e=this.model._isPieOfPie?this._getPieOfPiePoint(e.region.Region.PointIndex,i):i._visiblePoints[t.pointData[0].Index],l=n._calculateArcData(this,t.pointData[0].PointIndex,e,t.region.Series,s,o);d=this.svgObject.id+"_SeriesGroup_"+t.region.SeriesIndex,h=1==o?$(this.gSeriesEle).children("#"+d)[1]:$(this.gSeriesEle).children("#"+d)[0];for(c=$(h).children(),u=0;u<c.length;u++){p=c[u],m=this.svgRenderer._getAttrVal($(p)[0],"data-pointIndex");if(parseInt(m)==t.pointData[0].PointIndex){this.svgRenderer._setAttr($(p),{d:l.Direction});break}}this.model.enableCanvasRendering&&(h=document.getElementById(this.svgObject.id).getClientRects()[0],this.svgRenderer.ctx.clearRect(h.left,h.top,h.width,h.height),$("#"+this._id).ejChart("redraw")),n.drawDataLabelAcc(this,i,t.pointData[0].Index,e,s,o),this.model.explodeValue={SeriesIndex:t.pointData[0].SeriesIndex,PointIndex:t.pointData[0].PointIndex,Index:t.pointData[0].Index,PieSeriesIndex:t.pointData[0].PieSeriesIndex}}t.region.Series.explodeIndex=a},displayGroupingTemplate:function(e,t,i,s,n,a,r,o,l){for(var d,h,c,u,p,m,g=[],f=[],_=[],v=$.extend(!0,{},l),_=$.extend(!0,{},n),b=Object.keys(_).length,g=$.extend(!0,{},s),x=0;x<b;x++){d=_[x].series.isTransposed,g[x].point.x=g[x].point.x,"datetime"==_[x].series.xAxis._valueType.toLowerCase()&&(g[x].point.x=ej.format(new Date(g[x].point.x),ej.EjSvgRender.utils._dateTimeLabelFormat(_[x].series.xAxis.intervalType,_[x].series.xAxis))),"category"==_[x].series.xAxis._valueType.toLowerCase()&&(g[x].point.x=ej.EjSvgRender.utils._getLabelContent(r,_[x].series.xAxis)),e=ej.util.isNullOrUndefined(e)?0:e,t=ej.util.isNullOrUndefined(t)?0:t,h=this.model.m_AreaBounds.X,c=this.model.m_AreaBounds.Y,u=d||this.model.requireInvertedAxes?_[x].series.yAxis.y:i.X+e+h+this.model.crosshair.marker.size.width+5,w=d||this.model.requireInvertedAxes?_[x].series.xAxis.x+i.Y:this.model.m_AreaBounds.Height/2+c,p=$("#"+this.model.crosshair.trackballTooltipSettings.tooltipTemplate).clone(),$(p).css("background-color",v[x].seriesColor),$(p).css("display","block"),g[x].point.count=1,n.count=void 0;var y={series:n,point:g[x].point};f.push($(p).html($(p).html().parseTemplate(y)))}0==$("#"+this.svgObject.id+"_TrackGroupToolTipTemplate").length&&(m=$("<div id ="+this.svgObject.id+"TrackGroupToolTipTemplate style='pointer-events:none; position: absolute; z-index: 13000; display: block;'></div>"),$(m).appendTo(this.chartContainer)),$(m).append(f);l=this.model.crosshair.trackballTooltipSettings.border;$(m).css("border",l.width+"px solid "+l.color);var s=parseFloat($(m).css("height")),l=parseFloat($(m).css("width")),w=d||this.model.requireInvertedAxes?w:w-s/2;1!=b||d||(w=i.Y+c+s/2),1==b&&(d||this.model.requireInvertedAxes)&&(u=i.X+e+h+this.model.crosshair.marker.size.width+5-l/2,w=i.Y+c-s-this.model.crosshair.marker.size.height-5),w+s<this.model.m_AreaBounds.Y?w=this.model.m_AreaBounds.Y:w+s/2>this.model.m_AreaBounds.Height&&(w-=s),u+l>h+this.model.m_AreaBounds.Width&&!d&&(u=i.X+e+h-this.model.crosshair.marker.size.width-5-l),$(m).css("left",u),$(m).css("top",w)},displayTemplateTooltip:function(e,t,i,s,n,a,r,o){s=$.extend(!0,{},s);s.x=s.x,"datetime"==n.xAxis._valueType.toLowerCase()&&(s.x=ej.format(new Date(s.x),ej.EjSvgRender.utils._dateTimeLabelFormat(n.xAxis.intervalType,n.xAxis))),"category"==n.xAxis._valueType.toLowerCase()&&(s.x=ej.EjSvgRender.utils._getLabelContent(r,n.xAxis)),e=ej.util.isNullOrUndefined(e)?0:e,t=ej.util.isNullOrUndefined(t)?0:t;for(var l,d,r=this.model.m_AreaBounds.X,h=this.model._axes,c=n._xAxisName,u=n._yAxisName,p=0,m=h.length;p<m;p++)c==h[p].name?n._isTransposed?l=h[p].Location.Y2:d=h[p].Location.X1:u==h[p].name&&(n._isTransposed?d=h[p].Location.X1:l=h[p].Location.Y2);var g,e=i.X+this.model.crosshair.marker.size.width+d,t=i.Y+t+l;0==$("#"+this.svgObject.id+"_TrackToolTipTemplate_"+a).length&&(g=$("<div id="+this.svgObject.id+"_TrackToolTipTemplate_"+a+" style='pointer-events:none;position: absolute; z-index: 13000; display: block;'></div>"),$(document.body).append(g)),null!=this.model.crosshair.trackballTooltipSettings.tooltipTemplate&&(f=document.getElementById(this.model.crosshair.trackballTooltipSettings.tooltipTemplate).cloneNode(!0),$(f).css("display","block").appendTo(g),n.count=1,s.count=1,f=this.getSeriesColor(s,a,n),$(g).css("background-color","array"==jQuery.type(f)?f[0].color:f),f={series:n,point:s},$(g).html($(g).html().parseTemplate(f))),t-=parseFloat($(g).css("height"))/2;var s=parseFloat($(g).css("height")),f=parseFloat($(g).css("width"));(n.isTransposed||this.model.requireInvertedAxes)&&(t=i.Y+this.model.m_AreaBounds.Y-s-5-this.model.crosshair.marker.size.height,e=i.X+r-f/2),t+s<this.model.m_AreaBounds.Y&&(n.isTransposed||this.model.requireInvertedAxes)&&(t+=s+this.model.crosshair.marker.size.height+5+o.top),e+f>r+this.model.m_AreaBounds.Width&&(e-=f+10+this.model.crosshair.marker.size.width),$(g).css("left",e),$(g).css("top",t)},displayAxisTooltip:function(e,t,i,s,n,a){"double"==i._valueType.toLowerCase()&&(l=i.labelFormat?i.labelFormat.match("{value}"):null,t=i.labelFormat?null!=l?"${value}"==i.labelFormat?i.labelFormat.replace("{value}","$"+Number(t)):i.labelFormat.replace("{value}",Number(t)):ej.format(Number(t),i.labelFormat,this.model.locale):t);for(var r,o,l,d,h=0,c=i.orientation.toLowerCase(),u=0,p=0,m=i._opposed,g=this.model.enableCanvasRendering,f=m?h+10+(i.x+i.width):i.x+i.width,_=0;_<this.model._axes.length;_++)this.model._axes[_].majorTickLines.size>h&&(h=this.model._axes[_].majorTickLines.size);0<=e.X&&e.X<=f&&(o=e.X,l=e.Y,(f=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={axisIndex:s,chartAxis:i,currentTrackText:t,location:n},this._trigger("trackAxisToolTip",f),t=f.data.currentTrackText,t=ej.EjSvgRender.utils._measureText(t,null,i.crosshairLabel.font),"horizontal"==c&&(o-=t.width/2,"inside"==i.labelPosition||(m?n.y<i.y:n.y>i.y)?(0==m&&(l=i.y-t.height+h-(i._isScroll?this.model.scrollerSize:0),r="top"),1==m&&(l=i.y+t.height-h,r="bottom")):(1==m&&(l=i.y-t.height/2-5-h,r="bottom"),0==m&&(l=i.y+t.height-5+h,r="top")),u=5,l+=i._isScroll?i.opposedPosition?-this.model.scrollerSize:this.model.scrollerSize:0),!m&&o+t.width>this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X&&(o=this.model.m_AreaBounds.Width+this.model.m_AreaBounds.X-t.width+5+this.model.elementSpacing),"vertical"==c&&(l=e.Y+t.height/4,"inside"==i.labelPosition||!m&&n.x<i.x?(1==m&&(o=i.x-t.width+5-h,r="left"),0==m&&(o=i.x+10+(i._isScroll?this.model.scrollerSize:0),r="right")):(1==m&&(o=t.width+i.x>$(this.svgObject).width()-5?$(this.svgObject).width()-t.width-5:i.x+15,r="left"),0==m&&(o=t.width>i.x?10:i.x-t.width-h,r="right")),o+=i._isScroll?i.opposedPosition?this.model.scrollerSize:-this.model.scrollerSize:0,p=5),m={id:this.svgObject.id+"_AxisToolTipText_"+s,x:o-p,y:l+u,fill:i.crosshairLabel.font.color,"font-size":i.crosshairLabel.font.size,"font-family":i.crosshairLabel.font.fontFamily,"font-style":i.crosshairLabel.font.fontStyle,"font-weight":i.crosshairLabel.font.fontWeight,"text-anchor":"start",opacity:i.crosshairLabel.font.opacity},t=ej.EjSvgRender.utils._measureText(f.data.currentTrackText,this.model.m_AreaBounds.Width,i.crosshairLabel.font),i=i.crosshairLabel,t={x:(o=o-5)-p,y:(l=l-t.height)+u,width:t.width+10,height:2*t.height-10,rx:i.rx*(g?2:1),ry:i.ry*(g?2:1)},a=ej.EjSvgRender.utils._calculateroundedCorner(null,t,!0,r,0,a),t={id:this.svgObject.id+"_AxisToolTipRect_"+s,d:a,fill:i.fill,"stroke-width":i.border.width,stroke:i.border.color},i=this.model._axes[s],n.y<i.y+i.height&&n.y>i.y||n.x<i.x+i.width&&n.x>i.x?(this.svgRenderer._setAttr($("#"+this.svgObject.id+"_AxisToolTipRect_"+s),{display:"block"}),this.svgRenderer._setAttr($("#"+this.svgObject.id+"_AxisToolTipText_"+s),{display:"block"}),t.display="block"):(this.svgRenderer._setAttr($("#"+this.svgObject.id+"_AxisToolTipRect_"+s),{display:"none"}),this.svgRenderer._setAttr($("#"+this.svgObject.id+"_AxisToolTipText_"+s),{display:"none"}),t.display="none"),g?(d=this.svgRenderer.createCrosshairCanvas()).ctx=d.getContext("2d"):d=this.svgRenderer,this.svgRenderer.drawPath.call(d,t,this.gTrackAxisEle),this.svgRenderer.drawText.call(d,m,f.data.currentTrackText,this.gTrackAxisEle))},maxWdithArrayCollection:function(e,t){for(var i,s,n=0,a=0,r=ej.EjSvgRender.utils._measureText,o=0,l=e.length;o<l;o++)s=(i=r(e[o],0,t)).width,a+=i.height,n=0==n||n<s?s:n;return{maxTextWidth:n,totalHeight:a}},displayTooltip:function(e,t,i){var s=this.model.crosshair,n=s.trackballTooltipSettings,a=n.rx,r=n.ry,o=n.border,l=this.model.m_AreaBounds,d=this.model.crosshair.isReversed;if(e){var h,c,u=t.series,p=document.getElementById(this._id),m=($(p).offset(),(E=u.tooltip).font?$.extend(!1,u.font,{},E.font):u.font),g="boxandwhisker"==u.type?t.point.boxPlotLocation[3]:t.point.location,f=u.marker.size.width/2+u.marker.border.width+o.width+5,_=u._isTransposed?u.xAxis.y+f:u.yAxis.y,v={X:(u._isTransposed?u.yAxis.x:u.xAxis.x+f)+g.X,Y:_+g.Y},b=t.textCollection,x=t.textOptionsCollection,y=t.groupingTextId,w={X:v.X,Y:v.Y},C=document.getElementById(this._id+"_trackball_grouping_tooltip");if(this._trigger("trackToolTip",{data:{currentText:b,location:w}}),!ej.util.isNullOrUndefined(this.model.trackToolTip)&&""!=this.model.trackToolTip)for(var S=0,T=b.length;S<T-1;S++)""==b[S].text&&(b.splice(S,1),x.splice(S,1),y.splice(S,1));ej.util.isNullOrUndefined(C)?(C=document.createElement("div"),h={left:w.X,top:w.Y,border:parseInt(o.width||1)+"px solid "+(o.color||"#000000"),background:n.fill||"#ffffff",opacity:n.opacity,position:"absolute",height:"auto",width:"auto","border-radius":a+"px "+r+"px","pointer-events":"none"},C.setAttribute("id",this._id+"_trackball_grouping_tooltip")):h={left:w.X,top:w.Y};for(S=0,T=b.length;S<T;S++){(c=document.createElement("span")).setAttribute("id",y[S]);var R=b[S].text;$(c).html(R+"</br>"),$(c).css(x[S]),C.appendChild(c)}var p=b.map(function(e){return e.text});i=(p=this.maxWdithArrayCollection(p,m)).maxTextWidth,p=p.totalHeight,h.top=u._isTransposed?h.top:h.top-.5*p,h.left=u._isTransposed?h.left-.5*i:h.left,1<b.length&&(h.top=u._isTransposed?h.top:_+(.5*l.Height-.5*p),h.left=u._isTransposed?l.Width/2+l.X-.5*i:h.left),u._isTransposed?p+h.top>l.Y+l.Height&&(h.top-=p+2*f):h.left+i>=l.X+l.Width&&(h.left-=i+2*(f+o.width)),h.left=w.X==v.X?h.left:w.X,h.top=w.Y==v.Y?h.top:w.Y,$(C).css(h),$(C).appendTo(this.chartContainer)}else for(var k=0,O=t.length;k<O;k++){for(var D,I,j,L,A,E,P,M,F,N,z,V,B,H,Y,U,W,X,G,q,Q,K,Z,v=t[k].Point,g=t[k].ClosestPoint,u=t[k].Series,J=t[k].ClosestPointIndex,ee=t[k].Tgap,te=$.inArray(u,this.model._visibleSeries),ie={X1:l.X,Y1:l.Y+l.Height,X2:l.X+l.Width,Y2:l.Y},se=this.model._axes,ne=u._xAxisName,ae=u._yAxisName,re=0,T=se.length;re<T;re++)ne==se[re].name?u._isTransposed?(ie.Y1=se[re].Location.Y1,ie.Y2=se[re].Location.Y2):(ie.X1=se[re].Location.X1,ie.X2=se[re].Location.X2):ae==se[re].name&&(u._isTransposed?(ie.X1=se[re].Location.X1,ie.X2=se[re].Location.X2):(ie.Y1=se[re].Location.Y1,ie.Y2=se[re].Location.Y2));v.X="boxandwhisker"==u.type?v.X+ie.X1:v.X,v.Y="boxandwhisker"==u.type?v.Y+ie.Y2:v.Y,(v.X>=ie.X1&&v.X<=ie.X2&&v.Y>=ie.Y2&&v.Y<=ie.Y1||e)&&(D=this.model.requireInvertedAxes,Q=v.X+(u.isIndicator?0:(ej.util.isNullOrUndefined(u._trackMarker)?u.marker:u._trackMarker).size.width)+A+1,X=v.Y,V=u.tooltip.format,B=ej.util.isNullOrUndefined(u.yAxis.roundingPlaces)?2:u.yAxis.roundingPlaces,H="boxandwhisker"==t[k].Series.type&&v.outlier?this.getTooltipFormat(g,u,te,J,V,v):this.getTooltipFormat(g,u,te,J,V,B),u.name&&u.name.replace(" ",""),(j=$.extend({},ej.EjSvgRender.commonChartEventArgs)).data={Location:{X:Q,Y:X},Series:u,serIndex:te,pointIndex:J,currentText:H.text},this._trigger("trackToolTip",j),j.cancel||(Q=j.data.Location.X,X=j.data.Location.Y,A=this.model.tooltipPadding,q=ee,m=(E=u.tooltip).font?$.extend(!1,u.font,{},E.font):u.font,Y=ej.EjSvgRender.utils._measureText(j.data.currentText,u.xAxis.width,m),G=this.getSeriesColor(g,te,u),(W=this.getTooltipOptions(G,u)).rectBColor,W.rectFColor,W.rectTextColor,P=Y.width+2*A,M=Y.height+2*A,F=(D?u.yAxis:u.xAxis).width,N=D?ee+v.X-P/2:ee+v.Y-M/2,z=D?ee+v.X+P/2:ee+v.Y+M/2,V=D?l.X:l.Y,B=D?l.X+l.Width:l.Y+l.Height,H=[],W=3+s.marker.border.width+(D?s.marker.size.height:s.marker.size.width)/2,Y=this.model.financial?0:W+5,W=0==(ee=u.type.toLowerCase()).indexOf("rangearea")?this.model.crosshair.marker.size.height/2:0,(V<=N&&z<=B||this.model.financial)&&(D?v.Y-Y-i<l.Y?(L={x:v.X-P/2+q,y:v.Y+Y,width:P,height:M,rx:a,ry:r},H.push({X:v.X-P/2+A+q,Y:v.Y+Y+M/2-A}),U="top"):(U=this.model.financial?(S=(Q=v.X-P/2+q)+A,I=(X=v.Y+A+W)+2*A,"top"):(Q=v.X-P/2+q,X=v.Y-Y-M,S=v.X-P/2+A+q,I=v.Y-Y-M/2-A,"bottom"),L={x:Q,y:X,width:P,height:M,rx:a,ry:r},H.push({X:S,Y:I})):(L=(U=v.X+Y+i-l.X>=F||d?this.model.financial?(S=(Q=v.X-P/2)+A,I=(X=v.Y-M-A-W)+q+M,"bottom"):v.X-i<=this.model.m_AreaBounds.X&&d?(Q=v.X+Y,X=v.Y-M/2+q,S=Q+A,I=v.Y+q+M/2,"left"):(Q=v.X-Y-P,X=v.Y-M/2+q,S=Q+A,I=v.Y+q+M/2,"right"):this.model.financial?(S=(Q=v.X-P/2)+A,I=(X=v.Y-W-M-2*A)+q+M,"bottom"):(Q=v.X+Y,X=v.Y-M/2+q,S=Q+A,I=v.Y+q+M/2,"left"),{x:Q,y:X,width:P,height:M,rx:a,ry:r}),H.push({X:S,Y:I})),"object"==typeof(Q=G)&&(Q=G[1].color),X=j.data.currentText,G=ej.EjSvgRender.utils._measureText(X,u.xAxis.width,m).height,0<=j.data.currentText.indexOf("<br/>")&&((X=j.data.currentText.split("<br/>"))[0],D?v.Y-Y-i<l.Y?H.push({X:v.X-P/2+A+q,Y:v.Y+Y+G/X.length}):(I=this.model.financial?(S=v.X-P/2+A+q,v.Y+4*A+W):(S=v.X-P/2+A+q,v.Y-Y-M+G/X.length),H.push({X:S,Y:I})):(Z=0<=ee.indexOf("candle")||0<=ee.indexOf("hiloopenclose")||!1,v.X+Y+i-l.X>=F?this.model.financial?(S=v.X-P/2+A,I=v.Y+q-M-W+(Z?0:2*A),L.y-=Z?3*A:A,L.height+=Z?2*A:A):(S=v.X-P-Y+A,I=v.Y+q-M/2+G/X.length):this.model.financial?(S=v.X-P/2+A,I=v.Y+q-M-W+(Z?0:A),L.y-=Z?2*A:A,L.height+=Z?2*A:A):(S=v.X+Y+A,I=v.Y+q-M/2+G/X.length),H.push({X:S,Y:I})),G=0),T=H.length-1,G=D?G:-G,Z="boxandwhisker"==u.type?k:J,G={id:this.svgObject.id+"_ToolTipText_"+te+"_"+Z,x:H[T].X,y:H[T].Y+G/2,fill:E.font&&E.font.color||"#ffffff","font-size":m.size,"font-family":m.fontFamily,"font-style":m.fontStyle,"font-weight":m.fontWeight,"text-anchor":"start",isTrackball:!0,padding:this.model.tooltipPadding},q=ej.EjSvgRender.utils._calculateroundedCorner(null,L,!0,U,q),Q={id:this.svgObject.id+"_gTooltip_"+te+"_"+Z,d:q,fill:n.fill||Q,"stroke-width":parseInt(n.border.width||0)+"px",stroke:n.border.color||"transparent","fill-opacity":n.opacity},this.model.enableCanvasRendering?(K=this.svgRenderer.createCrosshairCanvas()).ctx=K.getContext("2d"):K=this.svgRenderer,Z=this.svgRenderer.createGroup({id:this.svgObject.id+"_gTooltip_"+te+"_"+Z}),this.svgRenderer.drawPath.call(K,Q,Z),this.svgRenderer.drawText.call(K,G,X,Z,m))),0==$("#"+this.svgObject.id+"_TrackToolTip_"+te).length&&this.svgRenderer.append($(Z),this.gTrackball))}},SmartTooltipPosition:function(e){for(var t=[[],[]],i=e.length,s=[],n=e[0].Series._isTransposed?this.model.m_AreaBounds.Width:this.model.m_AreaBounds.Height,a=this.model.tooltipPadding,r=-a,o=0;o<i;o++)t[0][o]=$.extend({},e[o].StEnd),t[1][o]={yAxis:e[o].Series._yAxisName,xAxis:e[o].Series._xAxisName,isTransposed:e[o].Series._isTransposed},e[o].ReqInvertAxis?s[o]=e[o].Point.X:s[o]=e[o].Point.Y,r+=e[o].StEnd.End-e[o].StEnd.Start+a;this.ContinousOverlappingPoints(t[0],s),r<n&&this.verticalArrangeMents(t);for(o=0;o<i;o++)e[o].Tgap=this.model.financial?0:t[0][o].Start-e[o].StEnd.Start},verticalArrangeMents:function(e){for(var t,i,s,n,a,r,o,l,d=e[0],h=e[1],c=(this.model.m_AreaBounds,this.model.tooltipPadding),u=this.model._axes,p=d.length,m=p-1,g=0,f=0,_=u.length;0<=m;m--){for(t=h[m].isTransposed,n=h[m].yAxis,f=0;f<_;f++)n==u[f].name&&(s=t?(i=u[f].Location.X2,u[f].Location.X1):(i=u[f].Location.Y1,u[f].Location.Y2));if(l=(a=d[m]).End-a.Start,i<a.End)for(a.End=i-2,a.Start=a.End-l,g=m-1;0<=g;g--)o=(r=d[g]).End-r.Start,r.End>d[g+1].Start&&d[g+1].Start>s&&d[g+1].End<i&&(r.End=d[g+1].Start-c,r.Start=r.End-o)}for(m=0;m<p;m++){for(t=h[m].isTransposed,n=h[m].yAxis,f=0;f<_;f++)n==u[f].name&&(s=t?(i=u[f].Location.X2,u[f].Location.X1):(i=u[f].Location.Y1,u[f].Location.Y2));if(l=(a=d[m]).End-a.Start,a.Start<s)for(a.Start=s+1,a.End=a.Start+l,g=m+1;g<=p-1;g++)o=(r=d[g]).End-r.Start,r.Start<d[g-1].End&&d[g-1].Start>s&&d[g-1].End<i&&(r.Start=d[g-1].End+c,r.End=r.Start+o)}},ContinousOverlappingPoints:function(e,t){for(var i,s,n,a,r=this.model.tooltipPadding,o=0,l=0,d=0,h=0,c=e.length-1,u=e[0].End-e[0].Start+r,o=e[0].Start+u,d=e[0].Start,p=0;p<c;p++)if(o>=e[p+1].Start){if(o+=u=e[p+1].End-e[p+1].Start+r,++l-1==c-1||p==c-1){i=(o-d)/2,s=(t[h]+t[p+1])/2,n=e[h].End-e[h].Start,e[h].Start=s-i,e[h].End=e[h].Start+n;for(var m=h;0<m&&e[m].Start<=e[m-1].End+r;m--)a=e[m-1].End-e[m-1].Start,e[m-1].Start=e[m].Start-a-r,e[m-1].End=e[m-1].Start+a;for(var g=h+1;g<=h+l;g++)n=e[g].End-e[g].Start,e[g].Start=e[g-1].End+r,e[g].End=e[g].Start+n}}else{if(0<(l=0<p?l:0)){i=(o-d)/2,s=(t[h]+t[p])/2,n=e[h].End-e[h].Start,e[h].Start=s-i,e[h].End=e[h].Start+n;for(m=h;0<m&&e[m].Start<=e[m-1].End+r;m--)a=e[m-1].End-e[m-1].Start,e[m-1].Start=e[m].Start-a-r,e[m-1].End=e[m-1].Start+a;for(g=h+1;g<=h+l;g++)n=e[g].End-e[g].Start,e[g].Start=e[g-1].End+r,e[g].End=e[g].Start+n;l=0}u=e[p+1].End-e[p+1].Start+r,o=e[p+1].Start+u,d=e[p+1].Start,h=p+1}},getTooltipOptions:function(e,t){var i,s,n,a;return e=a=0<=this.model.theme.indexOf("gradient")?(i="array"==jQuery.type(e)?e[0].color:e,s="white",n="#333333",5):(n=-1==(a=t.type.toLowerCase()).indexOf("column")&&-1==a.indexOf("waterfall")&&-1==a.indexOf("bar")&&-1==a.indexOf("box")&&"rangearea"!=a&&"none"!=this.model.AreaType?(s="array"==jQuery.type(e)?e[0].color:e,i="transparent","white"):(s="white",i="#333333"),0),{rectBColor:i,rectFColor:s,rectTextColor:n,rectX:a,rectY:e}},getSeriesColor:function(e,t,i){t=!i||i.isIndicator||i.isTrendLine?i.fill:e._hiloFill?e._hiloFill._gradientStop?e._hiloFill._gradientStop[0].color:e._hiloFill:e.fill?e.fill._gradientStop?e.fill._gradientStop[0].color:e.fill:"waterfall"==i.type.toLowerCase()&&i.positiveFill&&(0<e.y&&!e.showIntermediateSum&&!e.showTotalSum||0<e.waterfallSum)?i.positiveFill:this.model.seriesColors[t];return t},getFormat:function(e,t){if(e.tooltip.format)return e.tooltip.format;var i=e.type.toLowerCase(),t="boxandwhisker"!=e.type?"null":t.outlier;return-1<i.indexOf("range")||-1<i.indexOf("hilo")&&-1==i.indexOf("open")?"#point.x# <br/> High : #point.high# <br/> Low : #point.low#":-1<i.indexOf("candle")||-1<i.indexOf("open")?"#point.x# <br/> High : #point.high# <br/> Low : #point.low# <br/> Open : #point.open# <br/> Close : #point.close#":-1<i.indexOf("bubble")?"#point.x# : #point.y# : #point.size#":-1<i.indexOf("box")&&t?"X : #boxPlotPoints.xValue#  Y : #boxPlotPoints.YValues#":-1<i.indexOf("box")?"Minimum : #boxPlotPoints.Minimum# <br/> Upper Quartile : #boxPlotPoints.UpperQuartile# <br/> Median : #boxPlotPoints.midvalue# <br/> Lower Quartile : #boxPlotPoints.LowerQuartile# <br/> Maximum : #boxPlotPoints.Maximum#  ":"#point.x# : #point.y#"},getTooltipFormat:function(e,t,i,s,n,a){var r,o,l,d,h,c,u,p=$.extend(!0,{},e),m=this.model.AreaType,g=this.model.locale,f=t.xAxis,_=t.yAxis,v=f._valueType.toLowerCase(),b=ej.util.isNullOrUndefined,e=f.labelFormat,x=_.labelFormat,_=ej.EjSvgRender.utils._dateTimeLabelFormat,y=(ej.EjSvgRender.utils._decimalPlaces,!1),w=!1;for(t.count=1,p.count=1,n=this.getFormat(t,a);0<=n.indexOf("ej.format(");){var C=(h=n.substring(n.indexOf("ej.format("),n.indexOf(")")+1)).substring(h.indexOf("(")+1,h.indexOf(","));"#point.x#"==C?(y=!0,r=h.substring(h.indexOf(",")+1,h.indexOf(")"))):"#point.y#"==C?(w=!0,o=h.substring(h.indexOf(",")+1,h.indexOf(")"))):(c=h.substring(h.indexOf(",")+1,h.indexOf(")")),u=(u=C.substring(C.indexOf("#")+1)).substring(u.indexOf(".")+1,u.indexOf("#")),p.hasOwnProperty(u)&&p[u]&&(p[u]=ej.format(p[u],c,g))),n=n.replace(h,C)}if("cartesianaxes"==m?"datetime"==v.toLowerCase()?(p.x=ej.format(new Date(p.xValue),b(e)?_(f._intervalType,f):t.xAxis.labelFormat,g),p.x=y?ej.format(new Date(p.xValue),r,g):p.x):"datetimecategory"==v.toLowerCase()?(p.x=ej.format(new Date(p.x),b(e)?_(f.intervalType,f):f.labelFormat,g),p.x=y?ej.format(new Date(p.x),r,g):p.x):"category"==v.toLowerCase()?this.model.primaryXAxis.isIndexed?p.x=p.x||"undefined":p.x=ej.EjSvgRender.utils._getLabelContent(p.xValue,t.xAxis,g):(!y||0!=r.indexOf("e")&&0!=r.indexOf("E")?p.x=y?ej.format(p.x,r,g):p.x:p.x=this.convertExponential(void 0,6,20,p.x,r),l=e?e.match("{value}"):null,p.x=e?null!=l?"${value}"==e?e.replace("{value}","$"+p.x):e.replace("{value}",p.x):y||0==e.indexOf("e")||0==e.indexOf("E")?p.x:ej.format(Number(p.x),e,g):p.x):"date"==v&&(p.x=ej.format(new Date(p.xValue),_("days"),g),p.x=y?ej.format(new Date(p.xValue),r,g):p.x),!w||0!=o.indexOf("e")&&0!=o.indexOf("E")?(p.y=p.waterfallSum||p.y,p.y=w?ej.format(p.y,o,g):p.y):p.y=this.convertExponential(void 0,6,20,p.y,o),l=x?x.match("{value}"):null,p.y=x?null!=l?"${value}"==x?x.replace("{value}","$"+p.y):x.replace("{value}",p.y):w||0==x.indexOf("e")||0==x.indexOf("E")?p.y:ej.format(Number(p.y),x,g):p.y,"none"!=m&&"polaraxes"!=m||!y||0!=r.indexOf("e")&&0!=r.indexOf("E")||(p.x=this.convertExponential(void 0,6,20,p.x,r)),!t.isStacking||"area"!=t.drawType||"polar"!=t.type&&"radar"!=t.type||(p.y=t.stackedValue.EndValues[s]-t.stackedValue.StartValues[s]),"boxandwhisker"==t.type.toLowerCase()){var S=t._visiblePoints[s].boxPlotValues;if(1==a.outlier)for(var T=0;T<S.outliers.length;T++)a.YValues==S.outliers[T]&&(a.YValues=x?null!=l?"${value}"==x?x.replace("{value}","$"+a.YValues):x.replace("{value}",a.YValues):w||0==x.indexOf("e")||0==x.indexOf("E")?a.YValues:ej.format(Number(a.YValues),x,g):a.YValues);else a.YValues==S.Minimum?S.Minimum=x?null!=l?"${value}"==x?x.replace("{value}","$"+S.Minimum):x.replace("{value}",S.Minimum):w||0==x.indexOf("e")||0==x.indexOf("E")?S.Minimum:ej.format(Number(S.Minimum),x,g):S.Minimum:a.YValues==S.Maximum?S.Maximum=x?null!=l?"${value}"==x?x.replace("{value}","$"+S.Maximum):x.replace("{value}",S.Maximum):w||0==x.indexOf("e")||0==x.indexOf("E")?S.Maximum:ej.format(Number(S.Maximum),x,g):S.Maximum:a.YValues==S.UpperQuartile?S.UpperQuartile=x?null!=l?"${value}"==x?x.replace("{value}","$"+S.UpperQuartile):x.replace("{value}",S.UpperQuartile):w||0==x.indexOf("e")||0==x.indexOf("E")?S.UpperQuartile:ej.format(Number(S.UpperQuartile),x,g):S.UpperQuartile:a.YValues==S.LowerQuartile?S.LowerQuartile=x?null!=l?"${value}"==x?x.replace("{value}","$"+S.LowerQuartile):x.replace("{value}",S.LowerQuartile):w||0==x.indexOf("e")||0==x.indexOf("E")?S.LowerQuartile:ej.format(Number(S.LowerQuartile),x,g):S.LowerQuartile:a.YValues==S.midvalue&&(S.midvalue=x?null!=l?"${value}"==x?x.replace("{value}","$"+S.midvalue):x.replace("{value}",S.midvalue):w||0==x.indexOf("e")||0==x.indexOf("E")?S.midvalue:ej.format(Number(S.midvalue),x,g):S.midvalue);S.count=t.count,S.xValue=p.x,S.YValues=a.YValues,d={boxPlotPoints:S}}else d={series:t,point:p};return{data:p,text:n=n.parseTemplate(d)}},convertExponential:function(e,t,i,s,n){return e=null==(e=n.match(/(\d+)/g))?t:i<e?i:e,s=s.toExponential(e)},displayShowTooltip:function(e,t,i,s){var n=this.model.requireInvertedAxes,a=i.tooltip.isReversed;if(!1!==t.visible){$(".ejTooltip"+this._id).not("#"+this.svgObject.id+"_TrackToolTip").remove(),$.finish?$(".ejTooltip"+this._id).finish():$(".ejTooltip"+this._id).stop(!0,!0);var r,o,l=i.isIndicator||i.isTrendLine?0:$.inArray(i,this.model._visibleSeries),d=7,h=i.tooltip.format,c=document.getElementById(this.svgObject.id).getClientRects()[0],u=this.model.m_AreaBounds,p=i.type.toLowerCase();switch(this.model.AreaType){case"cartesianaxes":r=a?e.X-(i.isIndicator||i.isTrendLine?0:ej.util.isNullOrUndefined(i._trackMarker)?"bubble"==p?t.radius+15:i.marker.size.width:i._trackMarker.size.width)+("column"==p||"bar"==p||"stackingbar"==p||"stackingcolumn"==p||"waterfall"==p||"rangecolumn"==p?u.X:(n?i.yAxis:i.xAxis).x):e.X+(i.isIndicator||i.isTrendLine?0:ej.util.isNullOrUndefined(i._trackMarker)?"bubble"==p?t.radius+15:i.marker.size.width:i._trackMarker.size.width)+("column"==p||"bar"==p||"stackingbar"==p||"stackingcolumn"==p||"waterfall"==p||"rangecolumn"==p?u.X:(n?i.yAxis:i.xAxis).x),j=e.Y+(-1==p.indexOf("column")&&-1==p.indexOf("waterfall")&&-1==p.indexOf("bar")&&-1==p.indexOf("rangearea")&&"scatter"!=p&&"bubble"!=p||this.dragPoint?(n?i.xAxis:i.yAxis).y:u.Y),this.dragPoint&&(r=r>i.xAxis.x?r:i.xAxis.x,j=j<i.yAxis.height+i.yAxis.y?j:i.yAxis.height+i.yAxis.y),w=this.getSeriesColor(t,l,i);break;case"polaraxes":r=a?e.X-d+(ej.util.isNullOrUndefined(i._trackMarker)?i.marker:i._trackMarker).size.width:e.X+d+(ej.util.isNullOrUndefined(i._trackMarker)?i.marker:i._trackMarker).size.width,j=e.Y,w=this.getSeriesColor(t,l,i);break;case"none":r=a?e.X-i.marker.size.width+d:e.X+i.marker.size.width+d,j=e.Y,w=this.model.pointColors[s]}if("boxandwhisker"==i.type.toLowerCase())for(var m=0;m<i._visiblePoints[s].boxPlotLocation.length;m++){var g=i._visiblePoints[s].boxPlotLocation[m];(!g.outlier||g.X+i.outlierSettings.size.width/2>e.X&&g.X-i.outlierSettings.size.width/2<e.X&&g.Y+i.outlierSettings.size.height/2>e.Y&&g.Y-i.outlierSettings.size.height/2<e.Y)&&(o=this.getTooltipFormat(t,i,l,s,h,g),ej.EjSvgRender.utils._measureText(o.text))}else o=this.getTooltipFormat(t,i,l,s,h),ej.EjSvgRender.utils._measureText(o.text);var f=this.getTooltipOptions(w,i),_=f.rectBColor,v=f.rectFColor,b=f.rectTextColor,x=f.rectX,y=f.rectY,n=i.tooltip,d=5,w=null==document.getElementById(this.svgObject.id+"_TrackToolTip")?$("<div></div>").attr({id:this.svgObject.id+"_TrackToolTip",class:"ejTooltip"+this._id}):$("#"+this.svgObject.id+"_TrackToolTip"),f=!!navigator.userAgent.match(/Trident\/7\./);!ej.isTouchDevice()||f||this.vmlRendering?this._on(w,"mousemove",this.chartTooltipHover):window.navigator.msPointerEnabled?this._on(w,"MSPointerMove",this.chartTooltipHover):this._on(w,"touchmove",this.chartTooltipHover),$("#"+this.svgObject.id+"_TrackToolTip").show(),f=$("#"+this._id).parent()[0].style.zIndex;n={top:j+$(document).scrollTop(),left:r+$(document).scrollLeft(),"background-color":n.fill||v,"border-style":"solid",position:"absolute","border-color":n.border.color||_,"border-width":n.border.width||0==n.border.width?n.border.width:1,opacity:n.opacity,"z-index":f+1e6,"border-radius":(n.rx||x).toString()+"px "+(n.ry||y).toString()+"px","padding-left":"5px","padding-right":"5px","padding-top":"2px","padding-bottom":"2px"};$(w).css(n);y=$.extend({},ej.EjSvgRender.commonChartEventArgs);if(y.data={seriesIndex:l,pointIndex:s,currentText:o.text,isTrendLine:i.isTrendLine,trendlineIndex:i.trendlineIndex},this._trigger("toolTipInitialize",y),!y.cancel){var n=i.tooltip,C=n.font?$.extend(!1,i.font,{},n.font):i.font,b={top:j+$(document).scrollTop(),left:r+$(document).scrollLeft(),color:n.font&&n.font.color?C.color:b,"font-size":C.size,"font-family":C.fontFamily,"font-style":C.fontStyle,"font-weight":C.fontWeight,"align-self":"baseline"};$(w).css(b),null==document.getElementById(this.svgObject.id+"_TrackToolTip")&&$(document.body).append(w[0]);var S=b=y.data.currentText;$("#"+this.svgObject.id+"_TrackToolTip").html(S);var T=0,R=0;S=(S=S.replace(/<br >/g,"<br/>").replace(/<br \/>/g,"<br/>").replace(/<br>/g,"<br/>")).split("<br/>");for(var k=0;k<S.length;k++)for(var O=(O=S[k]).split("</tr>"),D=0;D<O.length;D++){var I=O[D];I=(I=this.RemoveTableAttr(I)).replace(/&nbsp;/g," "),T+=ej.EjSvgRender.utils._measureText(I,null,C).height;I=ej.EjSvgRender.utils._measureText(I,null,C).width;R<I&&(R=I)}("cartesianaxes"==this.model.AreaType?ej.EjSvgRender.utils._measureText(b,i.xAxis.width,C):ej.EjSvgRender.utils._measureText(S,null,C)).height;var j,L,A,w="cartesianaxes"==this.model.AreaType?(this.model.requireInvertedAxes?i.yAxis:i.xAxis).width:$(this.svgObject).width()-("right"==this.model.legend.position.toLowerCase()?this.model.LegendViewerBounds.Width+2*this.model.elementSpacing:0),y="cartesianaxes"==this.model.AreaType?(this.model.requireInvertedAxes?i.xAxis:i.yAxis).height:$(this.svgObject).height()-("bottom"==this.model.legend.position.toLowerCase()?this.model.LegendViewerBounds.Height+this.model.elementSpacing:0),b=$("#"+this.svgObject.id+"_TrackToolTip")[0].getBoundingClientRect();$("#"+this.svgObject.id+"_TrackToolTip").css("top",$(document).scrollTop()+b.top+c.top-(T+4)/2),$("#"+this.svgObject.id+"_TrackToolTip").css("left",$(document).scrollLeft()+b.left+c.left+(b.left-r)),r+(R+d)>=w+i.xAxis.x&&!a&&(L=document.getElementById(this.svgObject.id).getClientRects()[0],A=r-(R+2*d+(i.isIndicator||i.isTrendLine?0:ej.util.isNullOrUndefined(i._trackMarker)?i.marker.visible?i.marker.size.width:"bubble"==p?t.radius+15:0:i._trackMarker.size.width)+2*d),$("#"+this.svgObject.id+"_TrackToolTip").css("left",A+L.left-d+$(document).scrollLeft())),((b=$("#"+this.svgObject.id+"_TrackToolTip")[0].getBoundingClientRect()).bottom>=i.yAxis.y+y+c.top||b.bottom>=i.xAxis.y+y+c.top)&&(j=j-(b.bottom-b.top+(i.isIndicator||i.isTrendLine?0:ej.util.isNullOrUndefined(i._trackMarker)?i.marker.visible?i.marker.size.height:0:i._trackMarker.size.height))+d+c.top,$("#"+this.svgObject.id+"_TrackToolTip").css("top",j+$(document).scrollTop())),(b=$("#"+this.svgObject.id+"_TrackToolTip")[0].getBoundingClientRect()).left<0&&(L=document.getElementById(this.svgObject.id).getClientRects()[0],u=u.Width/2,e.X<u?$("#"+this.svgObject.id+"_TrackToolTip").css("left",r+c.left):($("#"+this.svgObject.id+"_TrackToolTip").css("width",b.right-2*d),$("#"+this.svgObject.id+"_TrackToolTip").css("left",0))),(b.top<c.top||b.top<0)&&$("#"+this.svgObject.id+"_TrackToolTip").css("top",(c.top<0?$(document).scrollTop():c.top)+"px"),a&&(a=b.right-b.left,$("#"+this.svgObject.id+"_TrackToolTip").css("left",b.x-a),b.x<i.xAxis.x&&(A=R+2*d+(i.isIndicator||i.isTrendLine?0:ej.util.isNullOrUndefined(i._trackMarker)?i.marker.visible?i.marker.size.width:"bubble"==p?t.radius+15:0:i._trackMarker.size.width)+2*d,$("#"+this.svgObject.id+"_TrackToolTip").css("left",b.x+A))),$("#"+this.svgObject.id+"_TrackToolTip").show()}}},RemoveTableAttr:function(e){for(-1==e.indexOf("<table>")&&-1==e.indexOf("</table>")&&-1==e.indexOf("<td>")&&-1==e.indexOf("</td>")&&-1==e.indexOf("<tr>")||(e=e.replace(/\//g,"").replace(/<table>/g,"").replace(/<th>/g,"").replace(/<tr>/g,"").replace(/<td>/g,""));-1<e.search(/<td/i);)if(-1<e.search(/<tr/))e=e.slice(e.search(/<td/i));else if(-1<e.search(/<td/)&&e.indexOf(">")>e.search(/<td/)){for(var t=(e=e.slice(e.indexOf(">")+1)).split("<td"),i=0;i<t.length;i++){var s=t[i];t[i]=-1<s.indexOf(">")?s.slice(s.indexOf(">")+1):s}e=t.join("")}return e},chartTooltipHover:function(e){var t=$("#"+e.target.id)[0].getBoundingClientRect(),i=e.clientX-t.left;$("#"+e.target.id).css("left",t.left+i+5),t=$("#"+e.target.id)[0].getBoundingClientRect();i=document.getElementById(this.svgObject.id).getClientRects()[0];t.right>i.right+5&&$("#"+e.target.id).css("left",e.clientX-(t.right-t.left)-5)},_initializeSeriesColors:function(){var e=this,t=e.model.palette||e.model.colors,i=t.length,s=e.model.AreaType;e.model.seriesColors=[],e.model.seriesBorderColors=[],e.model.pointColors=[],e.model.pointBorderColors=[];var n,a,r,o,l,d=e.model._visibleSeries.length;e.model._visibleSeries;if("none"!=s)n=e.model._visibleSeries,a=e.model.seriesColors,r=e.model.seriesBorderColors;else{for(var h=0,c=0;c<d;c++){var u,p=e.model._visibleSeries[c].type.toLowerCase();e.model._visibleSeries[c].points.length>h?(h=e.model._visibleSeries[c].points.length,u=e.model._visibleSeries[c].points):e.model._visibleSeries[c].points.length==h&&"funnel"!=p&&"pieofpie"!=p&&"pyramid"!=p&&(u=e.model._visibleSeries[c].points)}n=u||[],a=e.model.pointColors,r=e.model.pointBorderColors}if("none"==s&&1<d)for(var m=0;m<d;m++)e.model.seriesColors[m]=t[m%i];for(c=0;c<n.length;c++)l=(o=n[c]).trendlines,o.isFill=null==o.isFill?!(!o.fill||""==o.fill):o.isFill,o.isFill?a[c]=o.fill:(a[c]=t[c%i],o._hiloTypes||(o.fill=a[c])),"none"!=s&&0<l.length&&this._initializeTrendlinesColors(l,a[c]),ej.util.isNullOrUndefined(o.border)||ej.util.isNullOrUndefined(o.border.color)||""==o.border.color?(r[c]=e.model.seriesBorderDefaultColors[c%10],"none"!=s&&(o.border.color=r[c])):r[c]=o.border.color,o.dataPoint=o.points,o.trendLine=o.trendlines},_initializeTrendlinesColors:function(e,t){for(var i in e)!ej.util.isNullOrUndefined(e[i].fill)&&""!=e[i].fill||(e[i].fill=t)},_createAxisLabelAndRange:function(){for(var e,t,i=0,s=this.model,n=s.series,a=n.length,r=s.primaryXAxis,o=s.primaryYAxis,l=0;l<a;l++)n[l]._isTransposed&&"polaraxes"!=this.model.AreaType&&i++;a&&(i==a||n[0]._isTransposed&&"polaraxes"!=this.model.AreaType)&&(s.requireInvertedAxes=!0),s.requireInvertedAxes?(o.orientation="horizontal",r.orientation="vertical",o.labelPlacement=o.labelPlacement||ej.datavisualization.Chart.LabelPlacement.OnTicks):(o.orientation="vertical",r.orientation="horizontal"),o.name=ej.util.isNullOrUndefined(o.name)?"SecondaryAxis":o.name,r.name=ej.util.isNullOrUndefined(r.name)?"PrimaryAxis":r.name,s._axes=[],s._axes[0]=r,s._axes[1]=o,t=s.axes.length,e=s.indicators;for(l=0;l<t;l++)if((u=s.axes[l]).name){for(var d=0;d<a;d++){var h=n[d].type.toLowerCase();if(n[d].xAxisName==u.name){u.orientation=-1!=h.indexOf("bar")?n[d].isTransposed?"horizontal":"vertical":n[d].isTransposed?"vertical":"horizontal";break}if(n[d].yAxisName==u.name){u.orientation=-1!=h.indexOf("bar")?n[d].isTransposed?"vertical":"horizontal":n[d].isTransposed?"horizontal":"vertical";break}}for(var c=0;c<e.length;c++){if(e[c].xAxisName==u.name){u.orientation="horizontal";break}if(e[c].yAxisName==u.name){u.orientation="vertical";break}}u.orientation&&("horizontal"==u.orientation.toLowerCase()?s.axes[l]=$.extend(!0,{},s.secondaryX,u):s.axes[l]=$.extend(!0,{},s.secondaryY,u),s._axes.push(s.axes[l]))}for(c=0;c<s._axes.length;c++){var u,p=(u=this.model._axes[c]).scrollbarSettings,m=p.range;u.orientation.toLowerCase();u.visibleLabels=[],u.range=null==u.range.min&&null==u.range.max&&null==u.range.interval?null:u.range,u.setRange=!!u.range&&(!!ej.util.isNullOrUndefined(u.setRange)||u.setRange),u.setRange=!(!u.actual_Range&&0==u.setRange),u.actualRange=u.actualRange||(null==u.range?{}:$.extend(!0,{},u.range)),u.visibleRange=u.visibleRange||(null==u.range?{}:u.range),u.name=u.name||c.toString(),u._isScroll=p.visible&&(null!=p.pointsLength||null!=m.min||null!=m.max)||s.zooming.enableScrollbar&&p.visible&&(u.zoomFactor<1||0<u.zoomPosition),u._pointsLength=p.pointsLength,"string"==typeof m.min&&-1!=m.min.indexOf("/Date(")&&(m.min=new Date(parseInt(m.min.substr(6)))),"string"==typeof m.max&&-1!=m.max.indexOf("/Date(")&&(m.max=new Date(parseInt(m.max.substr(6))))}},_drawTitle:function(){var e=this.model.title,t=this.model.margin,i=$(this.svgObject).width(),s=ej.EjSvgRender.utils._measureText(e.text,i-t.left-t.right,e.font),n=this.model.elementSpacing,a=""!=e.text&&e.visible?s.height+n:0,t=t,r=this.model.m_AreaBounds,o=this.model.AreaType,l="left"==this.model.legend.position.toLowerCase()?this.model.LegendViewerBounds.Width/2:"right"==this.model.legend.position.toLowerCase()?-this.model.LegendViewerBounds.Width/2:0,d=t.left+n+this.model.border.width,h=t.right+n+this.model.border.width,c=this.model.titleWrapTextCollection,u=parseInt(e.font.size),p=1.2*parseInt(e.font.size),m=e.enableTrim,g=e.maximumWidth,f=(e.textAlignment.toLowerCase(),e.textOverflow.toLowerCase()),_=e.text,v=e.isReversed,b=!(!m||"wrap"!=f&&"wrapandtrim"!=f||!(1<c.length));"auto"==g.toString()||""==g.toString()?(g=.75*r.Width,this.model.titleMaxWidth=g):g=parseInt(g);r=s.width>g;m&&r&&"trim"==f&&(_=ej.EjSvgRender.utils._trimText(_,g,e.font),this.model.titleTrim=s=ej.EjSvgRender.utils._measureText(_,i-t.left-t.right,e.font),this.model.trimTooltip=!0),this.model.trimTooltip&&"wrap"==f&&(this.model.trimTooltip=!1);f={width:this.model.trimTooltip&&b||1<c.length?this.model.titleMaxWidth:s.width,height:s.height*(0<c.length?c.length-1:1)};if(""!=e.text&&null!=e.text){u="transparent"==e.border.color&&"transparent"==e.background?t.top+a/2+n:t.top+p/2+n+u/4;l=("cartesianaxes"!=o?(i-t.left-t.right)/2+(t.left+l):d+(i-h)/2)-f.width/2;"near"==this.model.title.textAlignment.toLowerCase()?l=v?i-h-s.width:d:"far"==this.model.title.textAlignment.toLowerCase()&&(l=v?d:i-h-f.width);h=$.extend({},ej.EjSvgRender.commonChartEventArgs);h.data={title:_,location:{x:l,y:u},size:s},this._trigger("titleRendering",h);var x={id:this.svgObject.id+"_ChartTitleText",x:h.data.location.x,y:h.data.location.y,fill:e.font.color,"font-size":e.font.size,"font-family":e.font.fontFamily,"font-style":e.font.fontStyle,"font-weight":e.font.fontWeight,opacity:e.font.opacity,"text-anchor":"start"},p={id:this.svgObject.id+"_ChartTitleBorder",x:h.data.location.x-n,y:h.data.location.y-p+p/4,rx:e.border.cornerRadius,ry:e.border.cornerRadius,width:b&&r?this.model.titleMaxWidth+2*n:s.width+2*n,height:b&&r?s.height*c.length:p,fill:e.background,"stroke-width":e.border.width,stroke:e.border.color,opacity:e.border.opacity,class:"e-titleborder"};if(this.svgRenderer.drawRect(p,this.gTitleEle),b&&r)for(var y=0;y<c.length;y++)x.id=this.svgObject.id+"_ChartTitleText_"+y,0!=y&&(x.y=x.y+s.height),this.svgRenderer.drawText(x,c[y],this.gTitleEle);else this.svgRenderer.drawText(x,h.data.title,this.gTitleEle);this.model._titleLocation={X:h.data.location.x,Y:h.data.location.y,size:f,_height:s.height},this.svgRenderer.append(this.gTitleEle,this.svgObject),""!=e.subTitle.text&&e.subTitle.text&&e.subTitle.visible&&this._drawSubTitle()}},_getLegendSize:function(e){var t=this.model.legend.itemStyle,e=ej.EjSvgRender.utils._measureText(e.Text,null,e.Font);return{Width:t.width+10+e.width,Height:Math.max(t.height,e.height)}},_getYValues:function(e){for(var t=[],i=e.length,s=0;s<i;s++)t.push(e[s].y);return t},_getXValues:function(e){for(var t=[],i=e.length,s=0;s<i;s++)t.push(e[s].xValue);return t},_drawSubTitle:function(){var e,t=this.model.title,i=t.isReversed,s=t.subTitle,n=$(this.svgObject).width(),a=ej.EjSvgRender.utils._measureText(t.text,n-this.model.margin.left-this.model.margin.right,t.font),r=ej.EjSvgRender.utils._measureText(s.text,n-this.model.margin.left-this.model.margin.right,s.font),o="middle",l=this.model.elementSpacing,d=parseInt(s.font.size),h=this.model.m_AreaBounds.Width,c=1.2*parseInt(t.font.size),u=1.2*parseInt(s.font.size),p=""!=s.text&&s.visible?r.height+l:0,m=s.enableTrim,g=s.maximumWidth,f=t.maximumWidth,_=s.textOverflow.toLowerCase(),v=(t.textAlignment.toLowerCase(),s.textAlignment.toLowerCase()),b=t.text,x=t.enableTrim,y=t.textOverflow.toLowerCase(),w=s.text,C=!(!x||"wrap"!=y&&"wrapandtrim"!=y),S=!(!m||"wrap"!=_&&"wrapandtrim"!=_),f="auto"==f.toString()||""==f.toString()?.75*h:parseInt(f),g="auto"==g.toString()||""==g.toString()?.75*h:parseInt(g);(a=ej.EjSvgRender.utils._measureText(t.text,n-this.model.margin.left-this.model.margin.right,t.font)).width;if(m&&r.width>g&&"trim"==_&&(b=x&&"trim"==y?ej.EjSvgRender.utils._trimText(b,f,t.font):b,w=ej.EjSvgRender.utils._trimText(w,g,s.font),a=ej.EjSvgRender.utils._measureText(b,$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,t.font),r=ej.EjSvgRender.utils._measureText(w,$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,s.font),this.model.subTitleTooltip=!0),f=a.width>f,""!=w&&null!=w){c="transparent"==this.model.title.border.color&&"transparent"==this.model.title.background||"transparent"==this.model.title.subTitle.border.color&&"transparent"==this.model.title.subTitle.background?p/2+l+this.model._titleLocation.Y+this.model._titleLocation._height*(this.model.titleWrapTextCollection?this.model.titleWrapTextCollection.length-1:0):u/2+10+l+(C&&f?a.height*this.model.titleWrapTextCollection.length:c)+10+d/3;d=this.model._titleLocation.X+this.model._titleLocation.size.width/2;"near"==v?(d=e=i?this.model._titleLocation.X+this.model._titleLocation.size.width:this.model._titleLocation.X,o=i?"end":"start"):"far"==v&&(d=i?this.model._titleLocation.X:this.model._titleLocation.X+this.model._titleLocation.size.width,o=i?"start":"end");i=$.extend({},ej.EjSvgRender.commonChartEventArgs);i.data={subTitle:w,location:{x:d,y:c},size:r},this._trigger("subTitleRendering",i);var c="transparent"==t.border.color&&"transparent"==t.background||"transparent"==t.subTitle.border.color&&"transparent"==t.subTitle.background?i.data.location.y:i.data.location.y-l/2,T={id:this.svgObject.id+"_ChartSubTitleText",x:i.data.location.x,y:c,fill:s.font.color,"font-size":s.font.size,"font-family":s.font.fontFamily,"font-style":s.font.fontStyle,"font-weight":s.font.fontWeight,opacity:s.font.opacity,"text-anchor":o},c=i.data.location.x,c="start"==o?c-l:"end"==o?S?c-l-this.model.subTitleMaxWidth:c-l-r.width:S?c-l-this.model.subTitleMaxWidth/2:c-l-r.width/2,t="transparent"==t.border.color&&"transparent"==t.background||"transparent"==s.border.color&&"transparent"==s.background?i.data.location.y-u+u/4:i.data.location.y-u+u/4-l/2,s={id:this.svgObject.id+"_ChartSubTitleBorder",x:c,y:t,rx:s.border.cornerRadius,ry:s.border.cornerRadius,width:S?this.model.subTitleMaxWidth+2*l:r.width+2*l,height:S?r.height*this.model.subTitleWrapTextCollection.length:u,fill:s.background,"stroke-width":s.border.width,stroke:s.border.color,opacity:s.border.opacity,class:"e-subtitleborder"};if(this.svgRenderer.drawRect(s,this.gSubTitleEle),S&&r.width>g)for(var R=0;R<this.model.subTitleWrapTextCollection.length;R++)T.id=this.svgObject.id+"_ChartSubTitleText_"+R,0!=R&&(T.y=T.y+r.height),this.svgRenderer.drawText(T,this.model.subTitleWrapTextCollection[R],this.gSubTitleEle);else this.svgRenderer.drawText(T,i.data.subTitle,this.gSubTitleEle);g={width:this.model.subTitleTooltip?g:r.width,height:r.height*this.model.subTitleWrapTextCollection.length};"middle"==o?e=d-g.width/2:"end"==o&&(e=d-g.width),this.model._subTitleLocation={X:e,Y:i.data.location.y-r.height/2,size:g},this.svgRenderer.append(this.gSubTitleEle,this.gTitleEle)}},_calculateStackingValues:function(e,t,i){var s=this.model;s.stackedValue[t.name]=[];var n=s.stackedValue[t.name];n.min=0,n.max=0;for(var a,r,o,l,d,h=s.requireInvertedAxes?s.vAxes:s.hAxes,c=h.length,u=(e.length,ej.util.isNullOrUndefined),p=0;p<c;p++)for(var m,g=[],f=[],_=[],v=[],b=y=0,x=0;x<e.length;x++)if(e[x]._xAxisName==h[p].name&&(-1!=e[x].type.toLowerCase().indexOf("stacking")||e[x].isStacking)){d={StartValues:[],EndValues:[]},(o=e[x].stackingGroup)&&"stackingarea"!=e[x].type.toLowerCase()?u(g[o])&&(g[o]=[],f[o]=[],_[o]=[],v[o]=[]):u(g[o=""])&&(g[o]=[],f[o]=[],_[o]=[],v[o]=[]),m=e[x],"number"!=typeof(b=this._getXCrossValue(m,h[p],i))&&(b=0),l=ej.EjSeriesRender.prototype._isVisiblePoints(m),r=this._getYValues(m._visiblePoints),a=l.length;for(var y=0;y<a;y++){var w,C=0,S=r[y];u(g[o][m._visiblePoints[y].xValue])&&(g[o][m._visiblePoints[y].xValue]=b),u(f[o][m._visiblePoints[y].xValue])&&(f[o][m._visiblePoints[y].xValue]=b),d.StartValues.length<=y&&(d.StartValues.push(0),d.EndValues.push(0)),0<=S?(_[o][y]=null==_[o][y],S-=_[o][y]&&b,C=-1!=m.type.toLowerCase().indexOf("stacking")||0<S?g[o][m._visiblePoints[y].xValue]:0,g[o][m._visiblePoints[y].xValue]+=S,w=C<b?b-C:0,d.StartValues[y]=C+w,d.EndValues[y]=S+C):(v[o][y]=null==v[o][y],S-=v[o][y]&&b,C=f[o][m._visiblePoints[y].xValue],f[o][m._visiblePoints[y].xValue]+=S,d.StartValues[y]=C,d.EndValues[y]=S+C,b<d.EndValues[y]&&(f[o][m._visiblePoints[y].xValue]=d.StartValues[y],g[o][m._visiblePoints[y].xValue]=d.EndValues[y],_[o][y]=null==_[o][y])),C=l[y].actualIndex,m.points[C].YValues=[d.EndValues[y]]}d.stackedSeries=!0,n.push(d),n.min>Math.min.apply(0,d.StartValues)&&(n.min=Math.min.apply(0,d.StartValues)),n.max<Math.max.apply(0,d.EndValues)&&(n.max=Math.max.apply(0,d.EndValues)),m.stackedValue=d}},_calculateStackingCumulativeValues:function(e,t,i){this.model.stackedValue[t.name]=[],this.model.stackedValue[t.name].min=0,this.model.stackedValue[t.name].max=0;for(var s=this.model.requireInvertedAxes?this.model.vAxes:this.model.hAxes,n=e.length,a=s.length,r=0;r<a;r++){for(var o=[],l=[],d=[],h=" ",c=[],u=[],p=0,m=[],g=0;g<n;g++){ej.EjSeriesRender.prototype._isVisiblePoints(e[g]);h=e[g].stackingGroup;if(-1!=e[g].type.toLowerCase().indexOf("100")&&e[g]._xAxisName==s[r].name){e[g].stackingGroup&&" stackingarea100 "!=e[g].type.toLowerCase()?o[h]||(d[h]=[],o[h]=[],l[h]=[],c[h]=[],u[h]=[]):(e[g].stackingGroup="",o[h=e[g].stackingGroup]||(d[h]=[],o[h]=[],l[h]=[],c[h]=[],u[h]=[])),m[h]=g;for(var f=(w=this._getYValues(e[g]._visiblePoints)).length,_=0;_<f;_++){var v=w[_];d[h][e[g].points[_].xValue]||(d[h][e[g].points[_].xValue]=0),d[h][e[g].points[_].xValue]+=Math.abs(v)}}}for(g=0;g<n;g++)if(h=e[g].stackingGroup,-1!=e[g].type.toLowerCase().indexOf("100")){var b=!1;if(e[g]._xAxisName==s[r].name){var x={StartValues:[],EndValues:[]},y=e[g];"number"!=typeof(p=this._getXCrossValue(y,s[r],i))&&(p=0);for(var w,f=(w=this._getYValues(y._visiblePoints)).length,_=0;_<f;_++){var C,S,T=0,R=(k=w[_])/d[h][y.points[_].xValue]*100,k=isNaN(R)?0:R;y.points[_].percentage=k.toFixed(2),o[h][y.points[_].xValue]||(o[h][y.points[_].xValue]=p),l[h][y.points[_].xValue]||(l[h][y.points[_].xValue]=p),x.StartValues.length<=_&&(x.StartValues.push(0),x.EndValues.push(0)),0<=k?(S=o[h][y.points[_].xValue],c[h][_]=null==c[h][_],k-=c[h][_]&&p,T=S<p?p-S:0,C=S,o[h][y.points[_].xValue]+=k):(S=l[h][y.points[_].xValue],u[h][_]=null==u[h][_],k-=u[h][_]&&p,T=p<S?p-S:0,C=S,l[h][y.points[_].xValue]+=k),x.StartValues[_]=C+T,x.EndValues[_]=C+k,100<x.EndValues[_]&&(x.EndValues[_]=100),y.points[_].YValues=[x.EndValues[_]],b=m[h]!=g||b}x.stackedSeries=b,this.model.stackedValue[t.name].push(x),this.model.stackedValue[t.name].min>Math.min.apply(0,x.StartValues)&&(this.model.stackedValue[t.name].min=Math.min.apply(0,x.StartValues)),this.model.stackedValue[t.name].max<Math.max.apply(0,x.EndValues)&&(this.model.stackedValue[t.name].max=Math.max.apply(0,x.EndValues)),this.model.stackedValue[t.name].min>Math.min.apply(0,x.EndValues)&&(this.model.stackedValue[t.name].min=-100),y.stackedValue=x}}}},_legendItemBounds:function(e,t,i){var s,n,a=this.model.legend,r=a.position.toLowerCase(),o=(a.itemPadding,0),l=0;return ej.util.isNullOrUndefined(a.columnCount)&&a.rowCount?(n=a.rowCount,o=t*Math.ceil(e/n),l=i*n):ej.util.isNullOrUndefined(a.rowCount)&&a.columnCount?(n=Math.ceil(e/a.columnCount),o=t*(s=a.columnCount),l=i*n):a.rowCount&&a.columnCount&&(l=a.columnCount<a.rowCount?(n=a.rowCount,o=t*Math.ceil(e/n),i*n):a.columnCount>a.rowCount?(o="top"===r||"bottom"===r||"custom"===r?(n=Math.ceil(e/a.columnCount),t*(s=a.columnCount)):(n=Math.ceil(e/a.columnCount),t*Math.ceil(e/n)),i*n):"top"===r||"bottom"===r||"custom"===r?(n=Math.ceil(e/a.columnCount),s=Math.ceil(e/a.rowCount),o=t*a.columnCount,i*s):(n=a.rowCount,o=t*Math.ceil(e/n),i*n)),{LegendWidth:o,LegendHeight:l+=this.model.elementSpacing}},_isEjScroller:function(){var e=this.model,t=$(this.legendContainer),e=e.legend;ej.util.isNullOrUndefined($("#"+t[0].id).ejScroller)?e._ejScroller=!1:e._ejScroller=e.enableScrollbar},_rowsCalculation:function(e,t,i){this.model.legend;for(var s,n,a,r=[],o=(e.legendItem?e.legendItem.Text.toString():e.text).split(" "),l=t,d=e.legendItem?e.legendItem.LegendStyle.Font:e.font,h=o.length,c=0,u=0;u<h;u++)if(s=o[u],(n=ej.EjSvgRender.utils._measureText(s,null,d).width)<=l){for(;u<h;){if(!((n=ej.EjSvgRender.utils._measureText(s,null,d).width)+(a=o[u+1]?ej.EjSvgRender.utils._measureText(o[u+1],null,d).width:0)<=l&&0<a)){c=Math.max(c,n);break}s=s.concat(" "+o[u+1]),u++}r.push(s)}else"wrapandtrim"==i?(s=ej.EjSvgRender.utils._trimText(s,l,d),r.push(s),this.model._legendMaxWidth=l,c=Math.max(c,l),e.legendItem||(this.model.trimTooltip=!0)):(r.push(s),e.legendItem?this.model._legendMaxWidth=Math.max(this.model._legendMaxWidth,n):c=Math.max(c,n));return this.model._legendMaxHeight=Math.max(this.model._legendMaxHeight,r.length),{textCollection:r,wordMax:c}},_triggerLegendEvent:function(e,t,i){var s=this.model,n=s.legend,a=s.AreaType,r=n.itemStyle,o=r.border,l=s.elementSpacing,d=n.textWidth,h=ej.EjSvgRender,c=this.svgRenderer,u=s._visibleSeries.length,p=this.svgObject,m=s.enableCanvasRendering,l=s.elementSpacing,s=n.textOverflow.toLowerCase(),t={BorderColor:o.color,BorderWidth:o.width,Opacity:n.opacity,Color:t,Font:$.extend(!0,{},n.font)},h=$.extend({},h.commonChartEventArgs);return h.data={svgRenderer:c,svgObject:p,symbolShape:n.shape,legendItem:{Text:e,Shape:n.shape,LegendStyle:t,SeriesIndex:"none"==a&&1==u?0:i},style:{ShapeSize:r,ElementSpace:l,Style:t,ID:this.svgObject.id+"_LegendItemShape"+i,SeriesIndex:"none"==a&&1==u?0:i},gLegendItemEle:this.gLegendItemEle},m&&(h.data.style.context=!0),this._trigger("legendItemRendering",h),u=h.data.legendItem.Text,i=h.data.legendItem.LegendStyle.Font,m=ej.EjSvgRender.utils._measureText(u,null,i).width,"trim"==s?d<m&&(u=ej.EjSvgRender.utils._trimText(u,d,i),this.model._legendMaxWidth=d):"wrap"!=s&&"wrapandtrim"!=s||(u=this._rowsCalculation(h.data,d,this.model.legend.textOverflow.toLowerCase()).textCollection),{commonEventArgs:h,legendItem:u}},_calculateLegendBounds:function(){this.model.legendCollection=[],this.model.legendTextRegion=[],this.model.legendRegion=[],this.model.svgHeight=$(this.svgObject).height(),this.model.svgWidth=$(this.svgObject).width(),this.model._legendMaxWidth=0,this.model._legendMaxHeight=0;var e,t,i,s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v=this.model,b=Math,x=b.max,y=b.min,w=b.abs,C=v.legend,S=C.size.height,T=C.size.width,R=C.isReversed,k=0<C.itemPadding?C.itemPadding:0,O=C.position.toLowerCase(),D=0,I=0,j=v.svgHeight,L=v.svgWidth,A=0,E=0,P=0,M=0,F=1,N={},z=[],V=v.AreaType,B=v._visibleSeries,H=C.rowCount,Y=C.columnCount,U=v.elementSpacing,W=ej.EjSvgRender.utils._measureText(C.title.text,null,C.title.font),X=0,G=0,q=v.border.width,b=C.border.width,Q=C.textOverflow.toLowerCase(),K=j-(4*U+2*q+2*C.border.width),Z=L-(4*U+2*q+2*b);if(B&&C.visible&&0!=B.length){if(q=B[0].type.toLowerCase(),"none"==V&&1==B.length||"pieofpie"==q||"pyramid"==q||"funnel"==q)for(o=B[0],l=(r=ej.EjSeriesRender.prototype._calculateVisiblePoints(o).legendPoints).length,ee=!R||"top"!=O&&"bottom"!=O?0:l-1;!R||"top"!=O&&"bottom"!=O?ee<l:0<=ee;!R||"top"!=O&&"bottom"!=O?ee++:ee--)d=C.fill?C.fill._gradientStop||C.fill:v.pointColors[r[ee].actualIndex],a=r[ee],h=ej.util.isNullOrUndefined(a.x)?"series"+ee:a.x,m=a.visibleOnLegend||"visible",a.isEmpty||"visible"!=m.toLowerCase()||"visible"!=o.visibleOnLegend.toLowerCase()||(f=(g=this._triggerLegendEvent(h,d,ee)).commonEventArgs.data.legendItem.LegendStyle,N={Text:g.legendItem,displayText:g.commonEventArgs.data.legendItem.Text,Font:f.Font,SeriesIndex:0,PointIndex:ee,ActualIndex:a.actualIndex,fill:f.Color,visibility:!1!==a.visible?"visible":"hidden",Shape:g.commonEventArgs.data.legendItem.Shape,LegendStyle:f,CommonEventArgs:{cancel:g.commonEventArgs.cancel,data:g.commonEventArgs.data}},z.push(N));else for(l=B.length,ee=!R||"top"!=O&&"bottom"!=O?0:l-1;!R||"top"!=O&&"bottom"!=O?ee<l:0<=ee;!R||"top"!=O&&"bottom"!=O?ee++:ee--){d=C.fill?C.fill._gradientStop||C.fill:(ej.util.isNullOrUndefined(v.seriesColors[ee])?v.pointColors:v.seriesColors)[ee],h=(o=B[ee]).name||"series"+ee,"visible"==o.visibleOnLegend.toLowerCase()&&(f=(g=this._triggerLegendEvent(h,d,ee)).commonEventArgs.data.legendItem.LegendStyle,N={Text:g.legendItem,displayText:g.commonEventArgs.data.legendItem.Text,Font:f.Font,SeriesIndex:ee,fill:f.Color,visibility:o.visibility,Shape:g.commonEventArgs.data.legendItem.Shape,LegendStyle:f,CommonEventArgs:{cancel:g.commonEventArgs.cancel,data:g.commonEventArgs.data}},z.push(N)),i=(s=o.trendlines).length;for(var J=0;J<i;J++)n=s[J],d=C.fill?C.fill._gradientStop||C.fill:n.fill,h=n.name||"series"+ee,""!=n.visibility&&"visible"==n.visibleOnLegend.toLowerCase()&&(f=(g=this._triggerLegendEvent(h,d,ee)).commonEventArgs.data.legendItem.LegendStyle,N={Text:g.legendItem,displayText:g.commonEventArgs.data.legendItem.Text,Font:f.Font,SeriesIndex:ee,trendLineIndex:J,fill:f.Color,isTrendLine:!0,visibility:"visible"==o.visibility.toLowerCase()?n.visibility:"hidden",Shape:g.commonEventArgs.data.legendItem.Shape,LegendStyle:f,CommonEventArgs:{cancel:g.commonEventArgs.cancel,data:g.commonEventArgs.data}},z.push(N))}c=z.length;for(var ee=0;ee<c;ee++)_=(e=z[ee]).CommonEventArgs.data.style.ShapeSize.width,u=this._getLegendSize(e),A=x(0<this.model._legendMaxWidth?this.model._legendMaxWidth+k+_:u.Width,A),E=x("wrap"==Q||"wrapandtrim"==Q?u.Height*this.model._legendMaxHeight:u.Height,E);M=E+2*U,P=A,(Y||H)&&(P=(q=this._legendItemBounds(z.length,A+k,E+k)).LegendWidth,M=q.LegendHeight,"top"===O||"bottom"===O||"custom"===O?M=M-k+U:P-=k);for(var te=0;te<c;te++)t=(e=z[te]).SeriesIndex,o=v.series[t],u=this._getLegendSize(e),"wrap"!=Q&&"wrapandtrim"!=Q||(u.Width=A,u.Height=E),H||Y||("top"==O||"bottom"==O||"custom"==O?(Z<(D+=u.Width+k)&&0!=te?(P=x(P,D-=u.Width+k),D=u.Width+k,F++,M+=E+k):P=x(P,D),I=x(I,E)):(K<(I+=u.Height+k)?(M=x(M,I-=u.Height+k),I=u.Height+k,P+=A+k):M=x(M,I),D=x(D,A))),p="visible"==e.visibility.toLowerCase()?this.svgRenderer.createGradientElement("legend"+te,z[te].fill,0,0,0,K,this.gLegendEle):"gray",e.CommonEventArgs.data.legendItem.LegendStyle.Color=p,(t=H||Y?{Width:A,Height:E}:u)._Width=u.Width,e.isTrendLine&&(e.TrendLineIndex=e.trendLineIndex,p=o.trendlines[e.trendLineIndex].type.toLowerCase(),e.CommonEventArgs.data.legendItem.drawType=e.drawType="linear"==p||"movingaverage"==p?"line":"spline"),z[te].Bounds=t,v.legendCollection.push(e);"top"===O||"bottom"===O||"custom"===O?(P=W.width>P-k?W.width+20+k:P+20,D+=10,I+=20,v.LegendBounds={Width:x(P,D)-k,Height:x(M,I),Rows:F}):(P=W.width>P?W.width+20:P+20,D+=10,I+=10,v.LegendBounds={Width:x(P,D),Height:x(M,I)+10-k,Columns:F}),v.LegendViewerBounds={Width:"0",Height:"0"},""==S||null==S?(W=w("left"==O||"right"==O||"custom"==O?j:j/100*parseInt("20%")),v.LegendViewerBounds.Height=y(W,v.LegendBounds.Height)):-1!=S.indexOf("%")?v.LegendViewerBounds.Height=w(j/100*parseInt(S)):v.LegendViewerBounds.Height=parseInt(S),""==T||null==T?(j=w("top"==O||"bottom"==O||"custom"==O?L:L/100*parseInt("20%")),v.LegendViewerBounds.Width=y(j,v.LegendBounds.Width)):-1!=T.indexOf("%")?v.LegendViewerBounds.Width=w(L/100*parseInt(T)):v.LegendViewerBounds.Width=parseInt(T)}else v.LegendBounds={Width:0,Height:0},v.LegendViewerBounds={Width:0,Height:0};w=$(this.legendContainer),L=$(this.legendSvgContainer),C.enableScrollbar?(v.LegendActualBounds=v.LegendViewerBounds,w.removeAttr("style"),w.css({visibility:"hidden",width:v.LegendViewerBounds.Width,height:v.LegendViewerBounds.Height}),L.css({height:v.LegendBounds.Height,width:v.LegendBounds.Width}),C._ejScroller?(C._ejScroller&&R&&w.addClass("e-rtl"),$("#"+w[0].id).ejScroller({width:v.LegendViewerBounds.Width,height:v.LegendViewerBounds.Height})):(w.css({overflow:"scroll"}),w.hasClass("e-rtl")&&w.removeClass("e-rtl")),v.LegendBounds.Width>v.LegendViewerBounds.Width&&v.LegendBounds.Height>v.LegendViewerBounds.Height?X=C._ejScroller?(G=$(".e-hscrollbar").height()||0,$(".e-vscrollbar").width()||0):(w.css({overflow:"scroll"}),G=w[0].offsetHeight-2*b-w[0].clientHeight,w[0].offsetWidth-2*b-w[0].clientWidth):v.LegendBounds.Width>v.LegendViewerBounds.Width?X=(G=C._ejScroller?$(".e-hscrollbar").height()||0:(w[0].style.overflowX="scroll",w[0].style.overflowY="hidden",w[0].offsetHeight-2*b-w[0].clientHeight),0):v.LegendBounds.Height>v.LegendViewerBounds.Height&&(X=C._ejScroller?(G=0,$(".e-vscrollbar").width()):(w[0].style.overflowY="scroll",w[0].style.overflowX="hidden",w[G=0].offsetWidth-2*b-w[0].clientWidth))):(v.LegendActualBounds=v.LegendBounds,""!=T&&null!=T&&(v.LegendActualBounds.Width=parseInt(T)),""!=S&&null!=S&&(v.LegendActualBounds.Height=parseInt(S))),v.LegendActualBounds.Height+=Math.abs(G),v.LegendActualBounds.Width+=Math.abs(X),v.LegendActualBounds.hScrollSize=G,v.LegendActualBounds.vScrollSize=X},GetPointXYOrgin:function(e,t,i,s){return{X:(e-i)/(this.model.axes.PrimaryXaxis.visibleRange.max-i)*this.model.m_AreaBounds.Width,Y:(t-s)/(this.model.axes.PrimaryYaxis.visibleRange.max-s)*(this.model.m_AreaBounds.Height-this.GetPointXY(this.model.axes.PrimaryXaxis.visibleRange.min,Math.max(this.model.axes.PrimaryYaxis.visibleRange.min,0)).Y)}},_wrap:function(e,t,i,s,n,a){var r,o=i,l=a.width,d=[],h=[],c=o.length,u=0,p=i.split(" "),m=p.length;if("wrap"==s){if(t<l)for(var g,f=1;f<=o.length;f++)i=o.substring(0,f),t<(l=ej.EjSvgRender.utils._measureText(i,null,n).width)&&(i=o.substring(0,f-1),d[u]=i,r=(o=o.slice(f-1,c)).split(" "),o=-1<p.indexOf(r[0])?o:"-"+o,g=ej.EjSvgRender.utils._measureText(i,null,n).width,u++,f=0);d[u]=i}else if("wrapandtrim"==s)for(var _,v,b,x=0,u=0;u<m;u++)if(_=p[u],ej.EjSvgRender.utils._measureText(_,null,n).width<t&&t<l){for(;u<m;){if(!((v=ej.EjSvgRender.utils._measureText(_,null,n).width)+(b=p[u+1]?ej.EjSvgRender.utils._measureText(p[u+1],null,n).width:0)<=t&&0<b)){x=Math.max(x,v);break}_=_.concat(" "+p[u+1]),u++}d.push(_)}else{if(!(t<l)){d.push(i);break}h.push(_),_=ej.EjSvgRender.utils._trimText(_,t,n),g=ej.EjSvgRender.utils._measureText(_,null,n).width,x=Math.max(x,g),d.push(_)}return{text:d,unTrimmedText:h}},getMultiLevelLabelSize:function(e){var t=0;e._multiLevelLabelHeight=0;var i,s,n,a,r,o,l,d,h=[],c=[],u=[],p=e.multiLevelLabels.length,m=e.visibleRange,g=e.orientation.toLowerCase(),f=[],_="vertical"==g?e.length:e.width||(this.model.primaryYAxis.AxisMaxWidth?e.length-this.model.primaryYAxis.AxisMaxWidth:e.length);for(b=0;b<p;b++)o=(i=e.multiLevelLabels[b]=h[b]=$.extend(!0,{},this.model.multiLevelLabelsDefault,e.multiLevelLabels[b])).border.type.toLowerCase(),s=i.level,!i.visible||""==i.text||ej.util.isNullOrUndefined(i.start)||ej.util.isNullOrUndefined(i.end)||(a=Math.ceil(ej.EjSvgRender.utils._getPointXY(i.start,m,e.isInversed)*_),n=Math.ceil(ej.EjSvgRender.utils._getPointXY(i.end,m,e.isInversed)*_),r=ej.EjSvgRender.utils._measureText(i.text,null,i.font),d=i.textOverflow.toLowerCase(),n=ej.util.isNullOrUndefined(i.maximumTextWidth)?n-a:i.maximumTextWidth,a="vertical"==g?i.maximumTextWidth||r.width:r.height,a+=2*i.border.width,r.width>n-10&&("wrap"==d||"wrapandtrim"==d)&&(r=this._wrap(e,n-10,i.text,d,i.font,r).text,a="vertical"==g?n-10:a*r.length),ej.util.isNullOrUndefined(c[s])?c[s]=a:c[s]=c[s]<a?a:c[s]);h.sort(function(e,t){return parseFloat(e.level)-parseFloat(t.level)}),e.multiLevelLabels.sort(function(e,t){return parseFloat(e.level)-parseFloat(t.level)});for(var v=0;v<h.length;v++)l=0==v?e.multiLevelLabels[v]._level=h[v]._level=0:h[v].level>l+1?(e.multiLevelLabels[v]._level=h[v]._level=l+1,h[v]._level):(e.multiLevelLabels[v]._level=h[v]._level=h[v].level,h[v].level>l?h[v].level:l),"curlybrace"==o&&(f[e.multiLevelLabels[v]._level]=!0);for(var b=0;b<c.length;b++)u[b]=t,ej.util.isNullOrUndefined(c[b])?(c.splice(b,1),b--):(t="brace"==o?t+c[b]:t+c[b]+5,f[b]&&(t+=10,c[b]+=10));return e._multiLevelLabelHeight=t,e.multiLevelLabelHeight=c,e.prevHeight=u,t},_saturationColor:function(e,t){e=this.colorNameToHex(e),(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;for(var i,s="#",n=0;n<3;n++)i=parseInt(e.substr(2*n,2),16),s+=("00"+(i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16))).substr(i.length);return s},_drawChartAreaRect:function(){var e=this.model.background&&this.model.background._gradientStop?"url(#"+this.svgObject.id+"_backGradient)":this.model.background;this.model.backGroundImageUrl&&(e="transparent");var t=this.model.border,t={id:this.svgObject.id+"_SvgRect",x:t.width/2,y:t.width/2,width:$(this.svgObject).width()-2*t.width,height:$(this.svgObject).height()-2*t.width,fill:e,opacity:t.opacity,"stroke-width":t.width,stroke:t.color,class:"e-chartborder"};this.svgRenderer.drawRect(t,this.svgObject),this.model.backGroundImageUrl&&this._drawBackImage(),"cartesianaxes"!=this.model.AreaType||this.model.enable3D||(t={id:this.svgObject.id+"_ChartArea",x:this.model.m_AreaBounds.X,y:this.model.m_AreaBounds.Y,width:this.model.m_AreaBounds.Width,height:this.model.m_AreaBounds.Height,fill:this.model.chartArea.background,"stroke-width":this.model.chartArea.border.width,opacity:this.model.chartArea.border.opacity,stroke:this.model.chartArea.border.color,class:"e-chartareaborder"},this.svgRenderer.drawRect(t,this.svgObject))},axesIndexCount:function(e,t){for(var i=[],s=0;s<e.length;s++){var n=e[s];"vertical"==n.orientation.toLowerCase()?n.rowIndex==t&&i.push(n):n.columnIndex==t&&i.push(n)}return i},axesCount:function(e){var i=[],t=[],s=0,n=this.model;$.each(e,function(e,t){"vertical"==t.orientation.toLowerCase()?(s=n.rowDefinitions?n.rowDefinitions.length:0,0!=e&&t.rowIndex==i[i.length-1].axis.rowIndex||i.push({axis:t,index:t.rowIndex})):(s=n.columnDefinitions?n.columnDefinitions.length:0,0!=e&&t.columnIndex==i[i.length-1].axis.columnIndex||i.push({axis:t,index:t.columnIndex}))});var a=i.length;if(a<s){a=s;for(var r=0;r<s;r++)t.push(r)}else for(var o=0;o<a;o++)t.push(i[o].index);return{length:a,indexValue:t}},_calRowSize:function(){var e=0,t=[],i=0,s=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height;if(null!=this.model._rowDefinitions[0].rowDefinitions)for(var n=0,a=this.model._rowDefinitions.length;n<a;n++){var r=this.model._rowDefinitions[n].rowDefinitions;r.rowHeight=Math.abs(r.rowHeight);var o,l=0;l="percentage"==r.unit.toLowerCase()?(o=this._axisRowDefinitionSize(this.model.rowDefinitions),Math.floor(this.model.m_AreaBounds.Height*(r.rowHeight/o))):r.rowHeight,0==n&&t.push(s),t.push(s-l-i),i+=l}else for(var d=Math.floor(this.model.m_AreaBounds.Height/this.model._rowDefinitions.length),e=s;e>=this.model.m_AreaBounds.Y;e-=d)t.push(e);return t},_calColumnSize:function(){var e=[],t=this.model.m_AreaBounds.X,i=this.model.m_AreaBounds.Width,s=0,n=this.model._columnDefinitions;if(null!=n[0].columnDefinitions)for(var a=0,r=n.length;a<r;a++){var o,l=n[a].columnDefinitions;l.columnWidth=Math.abs(l.columnWidth),l="percentage"==l.unit.toLowerCase()?(o=this._axisColumnDefinitionSize(this.model.columnDefinitions),Math.floor(i*(l.columnWidth/o))):l.columnWidth,0==a&&e.push(t),e.push(t+l+s),s+=l}else for(var d=Math.floor(i/n.length),h=t,c=t+i;h<=c;h+=d)e.push(h);return e},_calculateAxisSize:function(e){for(var t=!0,i=!0,s=this._calColumnSize(),n=this.model._columnDefinitions,a=0,r=n.length;a<r;a++)for(var o=s[a],l=s[a+1],d=0,h=0,c=!0,u=!0,p=this.model.m_AreaBounds.Y,m=p+this.model.m_AreaBounds.Height,g=0,f=n[a].axis.length;g<f;g++){var _=n[a].axis[g],v=0,b=_._opposed;if(e.axes[_.name]._validCross||(b?!u||!i&&0!=h?(v=p-=n.farSizes[h],h++):(v=p,u=!1):!c||!t&&0!=d?(v=m+=n.nearSizes[d],d++):(v=m,c=!1)),_.columnSpan){if(n[a].index!=_.columnIndex)continue;l=s[r>=a+_.columnSpan?a+_.columnSpan:a+1];b||0!=d||(t=c),b&&0==h&&(i=u)}else l=s[a+1],i=t=!0;_.Location={},_.Location.X1=o+_.plotOffset,_.Location.Y1=v,_.Location.X2=l-_.plotOffset,_.Location.Y2=v,_.x=_.Location.X1,_.y=_.Location.Y1,_.width=_.Location.X2-_.Location.X1,_.height=_.Location.Y2-_.Location.Y1}i=t=!0;for(var x=this._calRowSize(),y=this.model._rowDefinitions,a=0,w=y.length;a<w;a++)for(var C=x[a],S=x[a+1],T=0,R=0,k=!0,O=!0,D=this.model.m_AreaBounds.X,I=D,j=D+this.model.m_AreaBounds.Width,g=0,L=y[a].axis.length;g<L;g++){var A=0,E=y[a].axis[g],b=E._opposed;if(e.axes[E.name]._validCross||(b?!O||!i&&0!=i?(A=j+=y.farSizes[R],R++):(A=j,O=!1):!k||!t&&0!=T?(A=I-=y.nearSizes[T],T++):(A=D,k=!1)),E.rowSpan){if(y[a].index!=E.rowIndex)continue;S=x[w>=a+E.rowSpan?a+E.rowSpan:a+1];b||0!=T||(t=k),b&&0==R&&(i=O)}else S=x[a+1],i=t=!0;E.Location={},E.Location.X1=A,E.Location.Y1=C-E.plotOffset,E.Location.X2=A,E.Location.Y2=S+E.plotOffset,E.x=E.Location.X1,E.y=E.Location.Y2,E.height=E.Location.Y1-E.Location.Y2,E.width=E.axisLine.width}},_validateCrossing:function(e){if(e._opposedPosition=!1,null==e.crossesAt)return!1;var t=this._getCrossAxis(this.model._axes,"horizontal"==e.orientation.toLowerCase(),e.crossesInAxis);return e._crossValue=this._getCrossValue(e,t,t._valueType),((t.isInversed?!e.opposedPosition:e.opposedPosition)?e._crossValue<=t.visibleRange.min:e._crossValue>=t.visibleRange.max)&&(e._opposedPosition=!0),t.visibleRange.min<e._crossValue&&t.visibleRange.max>e._crossValue},_axisCrossing:function(e,t,i){var s="horizontal"==e.orientation.toLowerCase(),n=this._getCrossAxis(this.model._axes,s,e.crossesInAxis),a=e._crossValue,a=Math.abs((n.isInversed?n.visibleRange.max:n.visibleRange.min)-a);this._locateAxis(e,n,s,a),t||(i._crossAxisOverlap=this._avoidOverlapping(e,this.model.m_AreaBounds,s,e.opposedPosition,i)||i._crossAxisOverlap)},_locateAxis:function(e,t,i,s){s=(i?t.height:t.width)*s/t.visibleRange.delta;i?e.y=t.y+t.height-s:e.x=t.x+s},_avoidOverlapping:function(e,t,i,s,n){var a=0,n=e.showNextToAxisLine?n.axes[e.name]._bounds:0;return i?!s&&e.y+n>t.Y+t.Height?(t.Height-=a=e.y+n-t.Y-t.Height,this._recalculateSpace(e,i,s,a),!0):s&&e.y-n<t.Y?(t.Y+=a=n-(e.y-t.Y),t.Height-=a,this._recalculateSpace(e,i,s,a),!0):void 0:!s&&e.x-n<t.X?(t.X+=a=n-(e.x-t.X),t.Width-=a,this._recalculateSpace(e,i,s,a),!0):s&&e.x+n>t.X+t.Width?(t.Width-=a=e.x+n-t.X-t.Width,this._recalculateSpace(e,i,s,a),!0):"inside"==e.labelPosition&&e.x+n>t.X+t.Width?(t.Width-=a=e.x+n-t.X-t.Width,this._recalculateSpace(e,i,s,a,e.showNextToAxisLine),!0):void 0},_recalculateSpace:function(e,t,i,s,n){if(t){for(var a=0,r=(h=this.model._rowDefinitions)[c=i?h.length-1:0].axis.length;a<r;a++)h[c].axis[a].height-=s,h[c].axis[a].Location.Y2-=s,i&&(h[c].axis[a].Location.Y1=h[c].axis[a].y+=s);for(var o=e.columnIndex,a=0,r=(h=this.model._columnDefinitions).length;a<r;a++)if(a!==o)for(var l=0,d=h[a].axis.length;l<d;l++)h[a].axis[l]._opposed===i&&(h[a].axis[l].Location.Y1=h[a].axis[l].Location.Y2=h[a].axis[l].y+=(i?1:-1)*s)}else{for(var h,c,a=0,r=(h=this.model._columnDefinitions)[c=i?h.length-1:0].axis.length;a<r;a++)h[c].axis[a].width-=s,n||(i?h[c].axis[a].Location.X2-=s:h[c].axis[a].Location.X1=h[c].axis[a].x+=s);for(var u=e.rowIndex,a=0,r=(h=this.model._rowDefinitions).length;a<r;a++)if(a!==u)for(l=0,d=h[a].axis.length;l<d;l++)h[a].axis[l]._opposed===i&&(h[a].axis[l].Location.X1=h[a].axis[l].Location.X2=h[a].axis[l].x+=(i?-1:1)*s)}},_getCrossValue:function(e,t,i){switch(i.toLowerCase()){case"category":return-1!=t.labels.indexOf(e.crossesAt)?t.labels.indexOf(e.crossesAt):e.crossesAt;case"datetime":return isNaN(Date.parse(e.crossesAt))?null:Date.parse(e.crossesAt);case"logarithmic":return Math.log(e.crossesAt)/Math.log(t.logBase)}return e.crossesAt},_getXCrossValue:function(e,t,i){var s=t.crossesInAxis,e=e._yAxisName;return(i.axes[t.name]._validCross||null==i.axes[t.name]._validCross)&&t.crossesAt&&(!s&&e===this.model.primaryYAxis.name||s&&this._getCrossAxis(this.model._axes,!0,s).name===e)?t.crossesAt:0},_getAxisByName:function(e,t,i){if(i)for(var s=0,n=e.length;s<n;s++)if(e[s].name===i&&(t?"vertical"==e[s].orientation:"horizontal"==e[s].orientation))return e[s]},_getCrossAxis:function(e,t,i){return this._getAxisByName(e,t,i)||(this.model.requireInvertedAxes?t?this.model.primaryXAxis:this.model.primaryYAxis:t?this.model.primaryYAxis:this.model.primaryXAxis)},_arrangeAxis:function(){for(var e,t,i=this,s=0;s<this.model._axes.length;s++)"horizontal"==(e=this.model._axes[s]).orientation.toLowerCase()?(i.model.hAxes.push(e),e.columnIndex=ej.util.isNullOrUndefined(e.columnIndex)?0:e.columnIndex,i.model.hAxes[i.model.hAxes.length-1].columnIndex=e.columnIndex):"vertical"==e.orientation.toLowerCase()&&(i.model.vAxes.push(e),e.rowIndex=ej.util.isNullOrUndefined(e.rowIndex)?0:e.rowIndex,i.model.vAxes[i.model.vAxes.length-1].rowIndex=e.rowIndex,(t=ej.util.isNullOrUndefined(i.model.rowDefinitions)?null:i.model.rowDefinitions[e.rowIndex])&&(e.axisBottomLine={},e.axisBottomLine.visible=!0,e.axisBottomLine.lineWidth=t.lineWidth,e.axisBottomLine.color=t.lineColor));this.model.hAxes=ej.DataManager(this.model.hAxes,ej.Query().sortBy("columnIndex")).executeLocal(),this.model.vAxes=ej.DataManager(this.model.vAxes,ej.Query().sortBy("rowIndex")).executeLocal();var n=this.axesCount(i.model.vAxes);if(i.model._rowDefinitions=[],0<i.model.vAxes.length)for(var a=0;a<n.length;a++){var r=i.model.rowDefinitions,r=r?r[a]||r[0]:null;i.model._rowDefinitions.push({axis:this.axesIndexCount(i.model.vAxes,n.indexValue[a]),index:n.indexValue[a],rowDefinitions:r})}var o=i.model._rowDefinitions,l=this._axisFilter(o,"rowSpan");this._SpanningAxes(o,l,!0);var d=this.axesCount(i.model.hAxes);if(i.model._columnDefinitions=[],0<i.model.hAxes.length)for(var h=0;h<d.length;h++){var c=i.model.columnDefinitions,c=c?c[h]||c[0]:null;i.model._columnDefinitions.push({axis:this.axesIndexCount(i.model.hAxes,d.indexValue[h]),index:d.indexValue[h],columnDefinitions:c})}o=i.model._columnDefinitions,l=this._axisFilter(o,"columnSpan");this._SpanningAxes(o,l,!1),this._axisSize()},_SpanningAxes:function(e,t,i){for(var s=0,n=t.length;s<n;s++){var a=t[s];if(null==a)break;var r=i?a.rowSpan:a.columnSpan,o=i?a.rowIndex:a.columnIndex;if(null!=e[o])for(var l=e[o].axis.indexOf(a),d=1,h=o+1;d<r&&h<e.length;d++,h++)e[h].axis.length>=l&&e[h].axis.splice(l,0,a)}},_axisFilter:function(e,n){var a=[];return e.filter(function(e){for(var t=ej.DataManager(e.axis,ej.Query().where(n,">",1)).executeLocal(),i=0,s=t.length;i<s;i++)a.push(t[i])}),a},_axisSize:function(){for(var e=this._getLegendSpace(),t=$(this.svgObject).width()-this.model.margin.left-this.model.margin.right-2*this.model.elementSpacing-e.leftLegendWidth-e.rightLegendWidth,i=Math.floor(t/this.axesCount(this.model.hAxes).length),s=$(this.svgObject).height()-this.model.margin.top-this.model.margin.bottom-2*this.model.elementSpacing-e.topLegendHeight-e.bottomLegendHeight-e.modelTitleHeight-e.modelsubTitleHeight,n=Math.floor(s/this.axesCount(this.model.vAxes).length),a=0;a<this.model._axes.length;a++){var r,o,l,d=this.model._axes[a];"horizontal"==d.orientation.toLowerCase()?"polaraxes"!=this.model.AreaType?(r=i,(l=ej.util.isNullOrUndefined(this.model.columnDefinitions)?[]:this.model.columnDefinitions[d.columnIndex])&&(l.unit=null==l.unit?"percentage":l.unit,l.columnWidth=null==l.columnWidth?100:l.columnWidth,r="percentage"==l.unit.toLowerCase()?(o=this._axisColumnDefinitionSize(this.model.columnDefinitions),Math.floor(i*(l.columnWidth/o))):l.columnWidth),d.length=d.columnSpan?d.columnSpan*r:r):d.length=2*s<t?t-s:t:"vertical"==d.orientation.toLowerCase()&&("polaraxes"!=this.model.AreaType?(l=n,(r=ej.util.isNullOrUndefined(this.model.rowDefinitions)?[]:this.model.rowDefinitions[d.rowIndex])&&(r.unit=null==r.unit?"percentage":r.unit,r.rowHeight=null==r.rowHeight?100:r.rowHeight,l="percentage"==r.unit.toLowerCase()?(o=this._axisRowDefinitionSize(this.model.rowDefinitions),Math.floor(n*(r.rowHeight/o))):r.rowHeight),d.length=d.rowSpan?d.rowSpan*l:l):d.length=s/2)}},_axisRowDefinitionSize:function(e){var t=0;if(e)for(var i=0;i<e.length;i++)t+=e[i].rowHeight;return t=100<t?t:100},_axisColumnDefinitionSize:function(e){var t=0;if(e)for(var i=0;i<e.length;i++)t+=e[i].columnWidth;return t=100<t?t:100},_axisMeasure:function(e,t,i,s){var n,a=0,r=0;e.axisLine.width=e.axisLine.width<0?0:e.axisLine.width,e.majorTickLines.size=!e.visible||e.majorTickLines.size<0?0:e.majorTickLines.size;var o=!this.model.enable3D&&e.visible&&e.axisLine.visible&&e.axisLine.width,l=ej.EjSvgRender.utils._measureText(e.title.text,t,e.title.font),t=e.visible?this.model.elementSpacing:0,a="vertical"==i?(r=e._LableMaxWidth.width,""!=e.title.text&&e.title.visible&&e.visible?8===document.documentMode?l.width:l.height+2*t:0):(r=e._LableMaxWidth.height,""!=e.title.text&&e.title.visible&&e.visible?l.height+t:0);return a="inside"==e.title.position.toLowerCase()?0:a,n=this.getMultiLevelLabelSize(e),0==s&&"inside"==e.tickLinesPosition&&"inside"==e.labelPosition?e.AxisMaxWidth=a+n+o+t:0==s&&"inside"==e.tickLinesPosition&&"inside"!=e.labelPosition?e.AxisMaxWidth=a+n+o+t+r:0==s&&"inside"!=e.tickLinesPosition&&"inside"==e.labelPosition?e.AxisMaxWidth=a+n+o+t+e.majorTickLines.size:e.AxisMaxWidth=a+n+o+t+e.majorTickLines.size+r,e.AxisMaxWidth+=e._isScroll?18:0,e.AxisMaxWidth},_arraySum:function(e){for(var t=0,i=0;i<e.length;i++)t+=parseFloat(e[i])||0;return t},_calSpace:function(e,t,i,s){for(var n=[],a=[],r=0;r<t.length;r++)for(var o=0,l=0,d=0;d<t[r].axis.length;d++){var h,c=t[r].axis[d],u=s.axes[c.name]._bounds=this._axisMeasure(c,e,i,d),p=(h=s.axes[c.name]._validCross=this._validateCrossing(c))?0:u;c._opposed=c.opposedPosition?!c._opposedPosition:c._opposedPosition||c.opposedPosiiton||!1,h&&t[r].axis[d].showNextToAxisLine||(c.showNextToAxisLine||(p="inside"==c.labelPosition?u-c._multiLevelLabelHeight:u),c._opposed?(a.length<=l?a.push(p):a[l]<p&&(a[l]=p),l++):(n.length<=o?n.push(p):n[o]<p&&(n[o]=p),o++))}return{nearSizes:n,farSizes:a}},_getLegendSpace:function(){var e,t,i,s=this.model,n=s.legend,a=n.position.toLowerCase(),r=s.LegendActualBounds,o=ej.EjSvgRender.utils._measureText,l=s.title,d=l.subTitle,h=s.elementSpacing,c=s.margin,u=s.svgWidth,p=n.border.width,m=0,g=0,f=0,_=0,v=0,b=(l.text.split(" "),l.enableTrim),x="auto"==(x=l.maximumWidth).toString()||""==x.toString()?.75*u:parseInt(x),y=l.textOverflow.toLowerCase(),w=l.text,C=l.visible,S=ej.EjSvgRender.utils._measureText(l.text,$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,l.font),T=(d.text.split(" "),d.enableTrim),R="auto"==(R=d.maximumWidth).toString()||""==R.toString()?.75*u:parseInt(R),k=d.textOverflow.toLowerCase(),O=d.text,D=d.visible,I=ej.EjSvgRender.utils._measureText(d.text,$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,d.font),j=!!(C&&b&&S.width>x),s=!!(D&&T&&I.width>R),C="wrap"==y||"wrapandtrim"==y,D="wrap"==k||"wrapandtrim"==k;this.model.titleWrapTextCollection=[],this.model.subTitleWrapTextCollection=[],this.model.trimTooltip=!1,this.model.subTitleTooltip=!1,n.visible&&(e=r.Width+5+h+2*p,g="left"==a?e:0,f="right"==a?e:0,n.title.text&&(m=o(n.title,null,n.title.font).height),_="top"==a?r.Height+m+2*p:0,v="bottom"==a?r.Height+m+2*p:0),j&&"wrap"==y||j&&"wrapandtrim"==y?(i={text:w,font:l.font},t=this._rowsCalculation(i,x,y)):"wrapandtrim"!=y&&"wrap"!=y||(i={text:w,font:l.font},t=this._rowsCalculation(i,ej.EjSvgRender.utils._measureText(w,null,l.font).width,y)),this.model.titleWrapTextCollection=t?t.textCollection:"",this.model.titleMaxWidth=t?t.wordMax:x,s&&"wrap"==k?(i={text:O,font:d.font},L=this._rowsCalculation(i,R,k)):s&&"wrapandtrim"==k?(i={text:O,font:d.font},L=this._rowsCalculation(i,R,k),this.model.subTitleTooltip=this.model.trimTooltip):"wrapandtrim"!=k&&"wrap"!=k||(i={text:O,font:d.font},L=this._rowsCalculation(i,R,k)),this.model.subTitleWrapTextCollection=L?L.textCollection:"",this.model.subTitleMaxWidth=L?L.wordMax:R;var L=o(l.text,u-c.left-c.right,l.font).height,c=o(d.text,u-c.left-c.right,d.font).height;return{leftLegendWidth:g,rightLegendWidth:f,topLegendHeight:_,bottomLegendHeight:v,modelTitleHeight:""!=l.text&&l.visible?b&&C&&S.width>x?L*this.model.titleWrapTextCollection.length+h:L+h:0,modelsubTitleHeight:""!=d.text&&d.visible&&l.visible?T&&D&&I.width>R?c*this.model.subTitleWrapTextCollection.length+h:c+h:0}},_arraySome:function(e,t){for(var i,s,n=!1,a=this.model.zooming.enableScrollbar,r=e.length,o=0;o<r;o++)i=e[o].scrollbarSettings.enableScrollbar,s=e[o].scrollbarSettings.pointsLength,n=n||(e[o]._isScroll&&e[o].maxPointLength<s||e[o].zoomFactor<1&&i&&a)&&e[o].orientation.toLowerCase()==t;return n},_calculateAreaBounds:function(e){var t=this,i=$(this.svgObject).width()-this.model.margin.left-this.model.margin.right,s=t.model.border.width;this.model._axes[0],this.model.zooming.enableScrollbar,this.model.zooming.type.toLowerCase();t.model.scrollerSize=18,this.model._yScroll=this._arraySome(this.model._axes,"vertical"),this.model._xScroll=this._arraySome(this.model._axes,"horizontal");var n=this._calSpace(i,t.model._rowDefinitions,"vertical",e);t.model._rowDefinitions.nearSizes=n.nearSizes,t.model._rowDefinitions.farSizes=n.farSizes;var a=this._arraySum(n.nearSizes),r=this._arraySum(n.farSizes),o=this._getLegendSpace(),l=a+o.leftLegendWidth+t.model.margin.left+s,n=r+o.rightLegendWidth+t.model.margin.right+t.model.margin.left+2*s,a=$(this.svgObject).width(),r=a-(l+n);(r=Math.round(r)<=0?0:r)<=0&&"cartesianaxes"==this.model.AreaType?($(this.svgObject).width(a-r+1),this._calculateAreaBounds(e)):(i=this._calSpace(i,t.model._columnDefinitions,"horizontal",e),t.model._columnDefinitions.nearSizes=i.nearSizes,t.model._columnDefinitions.farSizes=i.farSizes,e=this._arraySum(i.nearSizes),t=this._arraySum(i.farSizes),i=e||t?this.model.elementSpacing:0,i=t+this.model.margin.top+i+o.modelTitleHeight+o.modelsubTitleHeight+o.topLegendHeight+s,o=e+this.model.margin.bottom+o.bottomLegendHeight+2*s,s=0==(s=Math.abs($(this.svgObject).height()-(i+o)))?1:s,this.model.m_AreaBounds={X:l,Y:i,Width:r,Height:s},this.model.m_Spacing={Left:l,Top:i,Right:n,Bottom:o},this.model.enableCanvasRendering?(this.canvasX=l,this.canvasY=i,this.canvasWidth=r,this.canvasHeight=s):this.canvasX=this.canvasY=this.canvasHeight=this.canvasWidth=0)}},jQuery.uaMatch=function(e){e=e.toLowerCase();e=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:e[1]||"",version:e[2]||"0"}}}(jQuery),function(O,g){g.widget("ejChart","ej.datavisualization.Chart",{element:null,model:null,validTags:["div"],defaults:{border:{color:"transparent",width:0,opacity:.3},chartArea:{border:{color:"Gray",width:.5,opacity:.3},background:"transparent"},highlightColor:null,primaryXAxis:{rotateOn:"middle",crossesAt:null,crossesInAxis:null,isIndexed:!1,multiLevelLabelsColor:null,multiLevelLabelsFontColor:null,alignment:"center",labelPlacement:"",scrollbarSettings:{visible:!0,canResize:!0,range:{min:null,max:null},pointsLength:null},range:{min:null,max:null,interval:null},labelPosition:"outside",tickLinesPosition:"outside",alternateGridBand:{odd:{fill:"transparent",opacity:1},even:{fill:"transparent",opacity:1}},enableAutoIntervalOnZooming:!0,majorGridLines:{color:null,width:1,dashArray:"",visible:!0,opacity:1},majorTickLines:{color:null,width:1,size:5,visible:!0},minorGridLines:{color:null,width:1,dashArray:"",visible:!0},minorTickLines:{color:null,width:1,size:5,visible:!0},labelBorder:{color:null,width:0},multiLevelLabels:[{visible:!1,text:"",textAlignment:"center",start:null,end:null,level:0,maximumTextWidth:null,textOverflow:"trim",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",opacity:1},border:{type:"rectangle",width:1}}],minorTicksPerInterval:null,columnIndex:null,columnSpan:null,labelRotation:null,valueType:null,name:null,labelFormat:null,desiredIntervals:null,intervalType:null,roundingPlaces:null,logBase:10,plotOffset:0,labels:[],stripLine:[{visible:!1,startFromAxis:!1,text:"",width:0,textAlignment:"middlecenter",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",color:"black",opacity:1},start:null,end:null,isRepeat:!1,repeatEvery:null,repeatUntil:null,sizeType:"auto",color:"gray",borderColor:"black",zIndex:"over"}],title:{text:"",visible:!0,enableTrim:!1,offset:0,alignment:"center",isReversed:!1,position:"outside",maximumTitleWidth:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"14px",opacity:1,fontWeight:"regular",color:null}},rangePadding:"Auto",additionalPadding:[1,1],orientation:"Horizontal",maximumLabels:3,opposedPosition:!1,showNextToAxisLine:!0,axisLine:{visible:!0,width:1,dashArray:"",offset:0,color:null},labelIntersectAction:"none",maximumLabelWidth:34,enableTrim:!1,edgeLabelPlacement:"none",isInversed:!1,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"11px",color:null,fontWeight:"regular",opacity:1},visible:!0,crosshairLabel:{rx:3,ry:3,border:{color:null,width:1},fill:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:null},visible:!1},zoomFactor:1,zoomPosition:0},primaryYAxis:{rotateOn:"middle",crossesAt:null,crossesInAxis:null,showNextToAxisLine:!0,alignment:"center",startFromZero:!0,range:{min:null,max:null,interval:null},scrollbarSettings:{visible:!0,canResize:!0,range:{min:null,max:null},pointsLength:null},labelPlacement:"",labelPosition:"outside",tickLinesPosition:"outside",multiLevelLabelsColor:null,multiLevelLabelsFontColor:null,alternateGridBand:{odd:{fill:"transparent",opacity:1},even:{fill:"transparent",opacity:1}},enableAutoIntervalOnZooming:!0,majorGridLines:{color:null,width:1,dashArray:"",visible:!0,opacity:1},majorTickLines:{color:null,width:1,size:5,visible:!0},minorGridLines:{color:null,width:1,dashArray:"",visible:!0},minorTickLines:{color:null,width:1,size:5,visible:!0},labelBorder:{color:null,width:0},multiLevelLabels:[{visible:!1,text:"",textAlignment:"center",start:null,end:null,level:0,maximumTextWidth:null,textOverflow:"trim",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",opacity:1},border:{type:"rectangle",width:1}}],minorTicksPerInterval:null,rowIndex:null,rowSpan:null,valueType:null,name:null,labelFormat:null,desiredIntervals:null,intervalType:null,roundingPlaces:null,labels:[],title:{text:"",visible:!0,enableTrim:!1,offset:0,alignment:"center",isReversed:!1,position:"outside",maximumTitleWidth:null,font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",opacity:1,size:"14px",fontWeight:"regular"}},rangePadding:"Auto",stripLine:[{visible:!1,startFromAxis:!1,width:0,text:"",textAlignment:"middlecenter",font:{fontFamily:"Segoe UI",fontWeight:"Regular",fontStyle:"Normal",size:"12px",color:"black",opacity:1},start:null,end:null,isRepeat:!1,repeatEvery:null,repeatUntil:null,sizeType:"auto",color:"gray",borderColor:"black",zIndex:"over"}],logBase:10,plotOffset:0,orientation:"Vertical",maximumLabels:3,labelIntersectAction:"none",maximumLabelWidth:34,enableTrim:!1,edgeLabelPlacement:"none",isInversed:!1,crosshairLabel:{rx:3,ry:3,border:{color:null,width:1},fill:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:null},visible:!1},visible:!0,opposedPosition:!1,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"11px",opacity:1,fontWeight:"regular",color:null},axisLine:{visible:!0,width:1,dashArray:"",offset:0,color:null},zoomFactor:1,zoomPosition:0},axes:[],secondaryX:{rotateOn:"middle",crossesAt:null,crossesInAxis:null,showNextToAxisLine:!0,alignment:"center",multiLevelLabelsColor:null,multiLevelLabelsFontColor:null,range:{min:null,max:null,interval:null},scrollbarSettings:{visible:!0,canResize:!0,range:{min:null,max:null},pointsLength:null},tickLinesPosition:"outside",labelPosition:"outside",majorGridLines:{color:null,width:1,dashArray:"",visible:!0},alternateGridBand:{odd:{fill:"transparent",opacity:1},even:{fill:"transparent",opacity:1}},enableAutoIntervalOnZooming:!0,majorTickLines:{color:null,width:1,size:5,visible:!0},minorGridLines:{color:null,width:1,dashArray:"",visible:!0},minorTickLines:{color:null,width:1,size:5,visible:!0},labelBorder:{color:null,width:0},multiLevelLabels:[{visible:!1,text:"",textAlignment:"center",start:null,end:null,level:0,maximumTextWidth:null,textOverflow:"trim",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",opacity:1},border:{type:"rectangle",width:1}}],minorTicksPerInterval:null,columnIndex:null,columnSpan:null,labelRotation:null,valueType:null,name:null,labelFormat:null,labelPlacement:"",desiredIntervals:null,intervalType:null,roundingPlaces:null,logBase:10,plotOffset:0,labels:[],stripLine:[{visible:!1,startFromAxis:!1,text:"",textAlignment:"middlecenter",font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"regular",size:"12px",color:"black",opacity:1},start:null,end:null,isRepeat:!1,repeatEvery:null,repeatUntil:null,sizeType:"auto",color:"gray",borderColor:"black",zIndex:"over"}],title:{text:"",visible:!0,enableTrim:!1,offset:0,alignment:"center",isReversed:!1,position:"outside",maximumTitleWidth:null,font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",size:"14px",opacity:1,fontWeight:"regular"}},rangePadding:"Auto",additionalPadding:[1,1],orientation:"Horizontal",maximumLabels:3,opposedPosition:!1,axisLine:{visible:!0,width:1,dashArray:"",offset:0,color:null},labelIntersectAction:"none",edgeLabelPlacement:"none",font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",size:"11px",fontWeight:"regular",opacity:1},visible:!0,crosshairLabel:{rx:3,ry:3,border:{color:null,width:1},fill:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:null},visible:!1},zoomFactor:1,zoomPosition:0},secondaryY:{rotateOn:"middle",crossesAt:null,crossesInAxis:null,showNextToAxisLine:!0,alignment:"center",startFromZero:!0,multiLevelLabelsColor:null,multiLevelLabelsFontColor:null,range:{min:null,max:null,interval:null},scrollbarSettings:{visible:!0,canResize:!0,range:{min:null,max:null},pointsLength:null},tickLinesPosition:"outside",labelPosition:"outside",majorGridLines:{color:null,width:1,dashArray:"",visible:!0},alternateGridBand:{odd:{fill:"transparent",opacity:1},even:{fill:"transparent",opacity:1}},enableAutoIntervalOnZooming:!0,majorTickLines:{color:null,width:1,size:5,visible:!0},minorGridLines:{color:null,width:1,dashArray:"",visible:!0},minorTickLines:{color:null,width:1,size:5,visible:!0},labelBorder:{color:null,width:0},multiLevelLabels:[{visible:!1,text:"",textAlignment:"center",start:null,end:null,level:0,maximumTextWidth:null,textOverflow:"trim",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",opacity:1},border:{type:"rectangle",width:1}}],minorTicksPerInterval:null,rowIndex:null,rowSpan:null,valueType:null,name:null,labelFormat:null,desiredIntervals:null,intervalType:null,roundingPlaces:null,labels:[],title:{text:"",visible:!0,enableTrim:!1,offset:0,alignment:"center",isReversed:!1,position:"outside",maximumTitleWidth:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",opacity:1,size:"14px",fontWeight:"regular",color:null}},rangePadding:"Auto",stripLine:[{visible:!1,startFromAxis:!1,text:"",textAlignment:"middlecenter",font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"regular",size:"12px",color:"black",opacity:1},start:null,end:null,isRepeat:!1,repeatEvery:null,repeatUntil:null,sizeType:"auto",color:"gray",borderColor:"black",zIndex:"over"}],logBase:10,plotOffset:0,orientation:"Vertical",maximumLabels:3,labelIntersectAction:"none",labelPlacement:"",edgeLabelPlacement:"none",crosshairLabel:{rx:3,ry:3,border:{color:null,width:1},fill:null,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"13px",fontWeight:"regular",opacity:1,color:null},visible:!1},visible:!0,opposedPosition:!1,font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"11px",opacity:1,fontWeight:"regular"},axisLine:{color:null,visible:!0,width:1,dashArray:"",offset:0},zoomFactor:1,zoomPosition:0},trendlineDefaults:{type:"linear",visibility:"",visibleOnLegend:"visible",name:"Trendline",fill:"",width:1,opacity:1,dashArray:"",forwardForecast:0,backwardForecast:0,polynomialOrder:2,period:2,intercept:null,tooltip:{visible:!1,format:null,fill:null,border:{width:1,color:null},duration:"500ms",enableAnimation:!0,opacity:.95,font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",opacity:1}}},indicatorDefaults:{visible:!0,points:[],tooltip:{visible:!1,format:null,fill:null,border:{width:1,color:null},duration:"500ms",enableAnimation:!0,opacity:.95},seriesName:"",font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"#707070",opacity:1},type:"SMA",period:14,standardDeviations:2,kPeriod:3,dPeriod:3,periodLine:{fill:"blue",width:2},lowerLine:{fill:"#008000",width:2},upperLine:{fill:"#ff0000",width:2},macdLine:{fill:"#ff9933",width:2},histogram:{fill:"#ccccff",opacity:1,border:{color:"#9999ff",width:1}},fill:"#00008B",width:2,xAxisName:"",yAxisName:"",visibility:"visible",macdType:"line",shortPeriod:12,longPeriod:26,trigger:9,enableAnimation:!1,animationDuration:null},annotationsDefault:{visible:!1,content:"",coordinateUnit:"none",verticalAlignment:"middle",horizontalAlignment:"middle",region:"chart",x:0,y:0,opacity:1,angle:0,xAxisName:"",yAxisName:"",margin:{left:0,right:0,bottom:0,top:0}},multiLevelLabelsDefault:{visible:!1,text:"",textAlignment:"center",start:null,end:null,level:0,maximumTextWidth:null,textOverflow:"trim",font:{fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",fontWeight:"Regular",opacity:1},border:{type:"rectangle",width:1}},stripLineDefault:{visible:!1,startFromAxis:!1,width:0,text:"",textAlignment:"middlecenter",font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"black",opacity:1},start:null,end:null,isRepeat:!1,repeatEvery:null,repeatUntil:null,sizeType:"auto",color:"gray",borderColor:"black",zIndex:"over",borderWidth:1},rowDefinitions:null,columnDefinitions:null,title:{text:"",enableTrim:!1,visible:!0,isReversed:!1,maximumWidth:"auto",textOverflow:"trim",textAlignment:"center",background:"transparent",border:{color:"transparent",width:1,opacity:.8,cornerRadius:.8},font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",size:"16px",opacity:1,fontWeight:"regular"},subTitle:{text:"",enableTrim:!1,visible:!0,maximumWidth:"auto",textOverflow:"trim",textAlignment:"far",background:"transparent",border:{color:"transparent",width:1,opacity:.8,cornerRadius:.8},font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",size:"12px",opacity:1,fontWeight:"regular"}}},lineCap:{butt:"butt",round:"round",square:"square"},lineJoin:{round:"round",bevel:"bevel",miter:"miter"},legendAlignment:{near:"near",center:"center",far:"far"},legendPosition:{top:"top",bottom:"bottom",right:"right",left:"left",custom:"custom"},enableAnimation:!0,legend:{title:{text:"",textAlignment:"center",font:{color:null,size:"12px",fontFamily:"Segoe UI",fontStyle:"normal",fontWeight:"regular"}},border:{color:"transparent",width:1},visible:!0,isReversed:!1,textOverflow:"none",textWidth:34,toggleSeriesVisibility:!0,enableScrollbar:!0,itemPadding:10,shape:"None",alignment:"Center",position:"Bottom",location:{x:0,y:0},itemStyle:{height:9,width:9,border:{color:"transparent",width:1}},rowCount:null,columnCount:null,opacity:1,fill:null,background:null,font:{color:null,fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px"},size:{height:null,width:null}},indicators:[{points:[],tooltip:{visible:!1,format:null,fill:null,border:{width:1,color:null},duration:"500ms",enableAnimation:!0,opacity:.95},seriesName:"",animationDuration:null,type:"SMA",period:14,standardDeviations:2,kPeriod:3,dPeriod:3,periodLine:{fill:"blue",width:2},lowerLine:{fill:"#008000",width:2},upperLine:{fill:"#ff0000",width:2},macdLine:{fill:"#ff9933",width:2},histogram:{fill:"#ccccff",opacity:1,border:{color:"#9999ff",width:1}},fill:"#00008B",visible:!0,font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"#707070",opacity:1},width:2,xAxisName:"",yAxisName:"",macdType:"line",shortPeriod:12,longPeriod:26,trigger:9,visibility:"visible",enableAnimation:!1}],background:null,backGroundImageUrl:null,annotations:[{visible:!1,content:"",coordinateUnit:"none",verticalAlignment:"middle",horizontalAlignment:"middle",region:"chart",x:0,y:0,opacity:1,angle:0,xAxisName:"",yAxisName:"",margin:{left:0,right:0,bottom:0,top:0}}],series:[{dragSettings:{enable:!1,type:"xy"},type:"column",enableTrackTooltip:!0,splitMode:"value",splitValue:null,splineType:"natural",cardinalSplineTension:.5,gapWidth:50,pieOfPieCoefficient:.6,visibleOnLegend:"visible",enableAnimation:!1,animationDuration:null,animationType:"linear",isClosed:!0,isTransposed:!1,isStacking:!0,columnSpacing:0,columnWidth:.7,columnFacet:"rectangle",drawType:"line",doughnutCoefficient:.4,explodeOffset:25,pyramidMode:"linear",boxPlotMode:"exclusive",funnelWidth:"11.6%",funnelHeight:"32.7%",positiveFill:null,showMedian:!0,outlierSettings:{shape:"circle",size:{width:6,height:6}},cornerRadius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},connectorLine:{width:1,opacity:1,dashArray:null},errorBar:{visibility:"hidden",mode:"vertical",type:"fixedValue",horizontalErrorValue:1,verticalErrorValue:3,horizontalPositiveErrorValue:1,horizontalNegativeErrorValue:1,verticalPositiveErrorValue:5,verticalNegativeErrorValue:5,direction:"both",cap:{visible:!0,width:1,length:20},width:1,opacity:1},highlightSettings:{enable:!1,mode:"series",color:"",opacity:.6,border:{color:"",width:2},pattern:"none",customPattern:""},selectionSettings:{type:"Single",enable:!1,mode:"series",rangeType:"xy",color:"",opacity:.6,border:{color:"",width:2},pattern:"none",customPattern:""},emptyPointSettings:{visible:!0,style:{color:"",border:{color:"",width:1}},displayMode:"gap"},labelPosition:"inside",gapRatio:0,points:null,pieCoefficient:.8,doughnutSize:.8,dataSource:null,high:"",low:"",open:"",close:"",bullFillColor:null,bearFillColor:null,query:null,xName:"",yName:"",pointColorMappingName:"",visibility:"visible",startAngle:null,endAngle:null,xAxisName:null,yAxisName:null,explodeAll:null,explode:!1,explodeIndex:null,enableSmartLabels:null,tooltip:{visible:!1,isReversed:!1,format:null,template:null,fill:null,border:{width:1,color:null},enableAnimation:!0,duration:"500ms",opacity:.95},fill:null,opacity:1,lineCap:"butt",lineJoin:"round",dashArray:"",border:{width:1,color:"transparent",dashArray:""},width:2,marker:{shape:"circle",imageUrl:"",size:{width:6,height:6},visible:!1,opacity:1,fill:null,border:{color:"white",width:3},dataLabel:{visible:!1,isReversed:!1,angle:0,showEdgeLabels:!1,enableContrastColor:!1,textMappingName:"",verticalTextAlignment:"center",horizontalTextAlignment:"center",textPosition:"top",textAnchor:"middle",shape:"none",opacity:1,fill:null,border:{color:"white",width:.1},maximumLabelWidth:null,enableWrap:!1,connectorLine:{width:.5,type:"line",color:null},offset:{x:0,y:0},font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",color:null,size:"11px",opacity:1},margin:{left:5,top:5,bottom:5,right:5}}},bubbleOptions:{radiusMode:"minmax",minRadius:1,maxRadius:3},trendlines:[{visibility:"",visibleOnLegend:"visible",type:"linear",name:"Trendline",fill:"",width:1,opacity:1,dashArray:"",forwardForecast:0,backwardForecast:0,polynomialOrder:2,period:2,intercept:null,tooltip:{visible:!1,format:null,fill:null,border:{width:1,color:null},duration:"500ms",enableAnimation:!0,opacity:.95,font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",color:null,size:"12px",opacity:1}}}],font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"#707070",opacity:1},_isdesigntime:!0}],commonSeriesOptions:{dragSettings:{enable:!1,type:"xy"},type:"column",enableTrackTooltip:!0,splitMode:"value",splitValue:null,splineType:"natural",cardinalSplineTension:.5,gapWidth:50,pieOfPieCoefficient:.6,visibleOnLegend:"visible",enableAnimation:!1,animationDuration:null,animationType:"linear",isClosed:!0,isTransposed:!1,isStacking:!1,columnWidth:.7,columnSpacing:0,columnFacet:"rectangle",drawType:"line",doughnutCoefficient:.4,explodeOffset:25,pyramidMode:"linear",boxPlotMode:"exclusive",funnelWidth:"11.6%",funnelHeight:"32.7%",positiveFill:null,showMedian:!0,outlierSettings:{shape:"circle",size:{width:6,height:6}},cornerRadius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},connectorLine:{width:1,opacity:1,dashArray:null},errorBar:{visibility:"hidden",mode:"vertical",type:"fixedValue",horizontalErrorValue:1,verticalErrorValue:3,horizontalPositiveErrorValue:1,horizontalNegativeErrorValue:1,verticalPositiveErrorValue:5,verticalNegativeErrorValue:5,direction:"both",cap:{visible:!0,width:1,length:20},width:1,opacity:1},highlightSettings:{enable:!1,mode:"series",color:"",opacity:.6,border:{color:"",width:2},pattern:"none",customPattern:""},selectionSettings:{type:"Single",enable:!1,mode:"series",rangeType:"xy",color:"",opacity:.6,border:{color:"",width:2},pattern:"none",customPattern:""},emptyPointSettings:{visible:!0,style:{color:"",border:{color:"",width:1}},displayMode:"gap"},labelPosition:"inside",gapRatio:0,pieCoefficient:.8,doughnutSize:.8,dataSource:null,xName:"",yName:"",pointColorMappingName:"",high:"",low:"",open:"",close:"",startAngle:null,endAngle:null,xAxisName:null,yAxisName:null,explodeAll:!1,explode:!1,explodeIndex:null,enableSmartLabels:null,tooltip:{visible:!1,isReversed:!1,format:null,template:null,fill:null,border:{color:null,width:1},enableAnimation:!0,duration:"500ms",opacity:.95},fill:null,opacity:1,lineCap:"butt",lineJoin:"round",dashArray:"",border:{color:"transparent",width:1,dashArray:""},width:2,marker:{shape:"circle",imageUrl:"",size:{width:6,height:6},visible:!1,opacity:1,fill:null,border:{color:"white",width:3},dataLabel:{visible:!1,isReversed:!1,angle:0,enableContrastColor:!1,showEdgeLabels:!1,textMappingName:"",verticalTextAlignment:"center",horizontalTextAlignment:"center",textPosition:"top",textAnchor:"middle",shape:"none",maximumLabelWidth:null,enableWrap:!1,opacity:1,fill:null,border:{color:"white",width:.1},offset:{x:0,y:0},connectorLine:{width:.5,type:"line",height:null},font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"11px",color:null,opacity:1},margin:{left:5,top:5,bottom:5,right:5}}},bubbleOptions:{radiusMode:"minmax",minRadius:1,maxRadius:3},trendlines:[{visibility:"",visibleOnLegend:"visible",type:"linear",name:"Trendline",fill:"",width:1,opacity:1,dashArray:"",forwardForecast:0,backwardForecast:0,polynomialOrder:2,period:2,intercept:null,tooltip:{visible:!1,format:null,fill:null,border:{width:1,color:null},duration:"500ms",enableAnimation:!0,opacity:.95,font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",color:null,size:"12px",opacity:1}}}],font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"#707070",opacity:1}},crosshair:{line:{width:1},marker:{visible:!0,size:{width:10,height:10},opacity:1,border:{width:3}},visible:!1,isReversed:!1,type:"crosshair",trackballTooltipSettings:{fill:null,mode:"float",border:{width:null,color:null},rx:3,ry:3,opacity:1,tooltipTemplate:null}},pointStyle:{lineCap:"butt",lineJoin:"round",opacity:1,interior:null,borderColor:null,borderWidth:1},textStyle:{marker:{textAlignment:"center",textPosition:"top"},font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",size:"12px",color:"#707070",opacity:1}},symbolShape:{None:0,LeftArrow:1,RightArrow:2,Circle:3,Cross:4,HorizLine:5,VertLine:6,Diamond:7,Rectangle:8,Triangle:9,InvertedTriangle:10,Hexagon:11,Pentagon:12,Star:13,Ellipse:14,Wedge:15,Trapezoid:16,UpArrow:17,DownArrow:18,Image:19,SeriesType:20},initSeriesRender:!0,theme:"flatlight",canResize:!1,isResponsive:!1,enable3D:!1,enableRotation:!1,sideBySideSeriesPlacement:null,perspectiveAngle:90,rotation:0,tilt:0,wallSize:2,depth:100,enableCanvasRendering:!1,selectedDataPointIndexes:[],exportSettings:{type:"png",fileName:"Chart",orientation:"portrait",angle:0,mode:"client",action:"",multipleExport:!1},zooming:{enable:!1,isReversed:!1,enableScrollbar:!1,type:"x,y",enablePinching:!0,enableMouseWheel:!1,enableDeferredZoom:!1,toolbarItems:["zoomIn","zoomOut","zoom","pan","reset"]},type:"x,y",locale:null,xZoomFactor:1,yZoomFactor:1,xZoomPosition:0,yZoomPosition:0,load:"",axesLabelRendering:"",axesRangeCalculate:"",axesTitleRendering:"",dragStart:"",dragging:"",dragEnd:"",chartAreaBoundsCalculate:"",legendItemRendering:"",legendBoundsCalculate:"",preRender:"",seriesRendering:"",trendlineRendering:"",symbolRendering:"",titleRendering:"",subtitleRendering:"",axesLabelsInitialize:"",pointRegionClick:"",seriesRegionClick:"",annotationClick:"",axisLabelClick:"",chartClick:"",scrollStart:"",scrollEnd:"",scrollChanged:"",chartDoubleClick:"",pointRegionMouseMove:"",legendItemClick:"",axisLabelMouseMove:"",chartMouseMove:"",legendItemMouseMove:"",chartMouseLeave:"",displayTextRendering:"",toolTipInitialize:"",trackAxisToolTip:"",trackToolTip:"",animationComplete:"",zoomed:"",destroy:"",create:"",beforeResize:"",afterResize:"",rangeSelected:"",multiLevelLabelClick:"",multiLevelLabelRendering:"",margin:{left:10,right:10,top:10,bottom:10},size:{width:null,height:null},elementSpacing:10,dateStart:25568.791666666668},dataTypes:{commonSeriesOptions:{dataSource:"data"},axes:"array",series:"array",annotations:"array",indicators:"array",seriesColors:"array",palette:"array",rowDefinitions:"array",columnDefinitions:"array",seriesBorderColors:"array",pointColors:"array",pointBorderColors:"array",initSeriesRender:"boolean",theme:"enum",canResize:"boolean",isResponsive:"boolean",elementSpacing:"number",primaryXAxis:{labels:"array",multiLevelLabels:"array",stripLine:"array",orientation:"enum",rangePadding:"enum",labelPlacement:"enum",tickLinesPosition:"enum",labelPosition:"enum",opposedPosition:"boolean",zoomFactor:"number",zoomPosition:"number",showNextToAxisLine:"boolean"},primaryYAxis:{labels:"array",multiLevelLabels:"array",stripLine:"array",orientation:"enum",rangePadding:"enum",labelPlacement:"enum",opposedPosition:"boolean",zoomFactor:"number",zoomPosition:"number"},legend:{textOverflow:"enum",shape:"enum",alignment:"enum",position:"enum",itemPadding:"number"},exportSettings:{type:"string",fileName:"string",orientation:"enum",angle:"number",mode:"enum",action:"string",multipleExport:"boolean"},zooming:{enable:"boolean",type:"string",enableMouseWheel:"boolean",toolbarItems:"array",enableScrollbar:"boolean"},size:{width:"string",height:"string"}},observables:["xZoomFactor","yZoomFactor","xZoomPosition","yZoomPosition"],_tags:[{tag:"series",attr:["xAxisName","yAxisName","zOrder","endAngle","startAngle","explodeIndex","labelPosition","xName","yName","pointColorMappingName","pyramidMode","boxPlotMode","showMedian","pieCoefficient","explodeAll","explodeOffset","funnelWidth","columnFacet","funnelHeight","gapRatio","isClosed","isTransposed","enableTrackTooltip","isStacking","bearFillColor","bullFillColor","dataSource","enableAnimation","animationDuration","doughnutCoefficient","doughnutSize","enableSmartLabels","drawType","dashArray","visibleOnLegend","columnSpacing","columnWidth","drawType","positiveFill","explodeIndex","cornerRadius","lineCap","lineJoin","highlightSettings.enable","highlightSettings.mode","highlightSettings.pattern","highlightSettings.color","highlightSettings.opacity","highlightSettings.customPattern","highlightSettings.border.color","highlightSettings.border.width","selectionSettings.enable","selectionSettings.mode","selectionSettings.pattern","selectionSettings.color","selectionSettings.opacity","selectionSettings.customPattern","selectionSettings.type","selectionSettings.rangeType","selectionSettings.border.width","selectionSettings.border.color","dragSettings.enable","dragSettings.type","connectorLine.width","connectorLine.opacity","connectorLine.dashArray","cornerRadius.topLeft","cornerRadius.topRight","cornerRadius.bottomLeft","cornerRadius.bottomRight","errorBar.visibility","errorBar.mode","errorBar.type","errorBar.horizontalErrorValue","errorBar.verticalErrorValue","errorBar.horizontalPositiveErrorValue","errorBar.horizontalNegativeErrorValue","errorBar.verticalPositiveErrorValue","errorBar.verticalNegativeErrorValue","errorBar.direction","errorBar.cap.visible","errorBar.cap.width","errorBar.cap.length","errorBar.width","errorBar.opacity","emptyPointSettings.visible","emptyPointSettings.style.color","emptyPointSettings.style.border.color","emptyPointSettings.style.border.width","emptyPointSettings.displayMode","bubbleOptions.minRadius","bubbleOptions.maxRadius","bubbleOptions.radiusMode","tooltip.visible","tooltip.format","tooltip.template","tooltip.fill","tooltip.border.width","tooltip.border.color","tooltip.enableAnimation","tooltip.duration","tooltip.opacity","tooltip.font.size","tooltip.font.opacity","tooltip.font.fontFamily","tooltip.font.fontStyle","tooltip.font.fontWeight","tooltip.font.color","border.width","border.color","border.dashArray","marker.shape","marker.imageUrl","marker.size.width","marker.size.height","marker.visible","marker.opacity","marker.fill","marker.border.color","marker.border.width","marker.dataLabel.visible","marker.dataLabel.angle","marker.dataLabel.template","marker.dataLabel.textMappingName","marker.dataLabel.verticalTextAlignment","marker.dataLabel.horizontalTextAlignment","marker.dataLabel.textPosition","marker.dataLabel.textAnchor","marker.dataLabel.shape","marker.dataLabel.opacity","marker.dataLabel.fill","marker.dataLabel.border.color","marker.dataLabel.border.width","marker.dataLabel.maximumLabelWidth","marker.dataLabel.enableWrap","marker.dataLabel.connectorLine.width","marker.dataLabel.connectorLine.type","marker.dataLabel.connectorLine.color","marker.dataLabel.offset","marker.dataLabel.offset.x","marker.dataLabel.offset.y","marker.dataLabel.font.size","marker.dataLabel.font.color","marker.dataLabel.enableContrastColor","marker.dataLabel.showEdgeLabels","marker.dataLabel.font.opacity","marker.dataLabel.font.fontFamily","marker.dataLabel.font.fontStyle","marker.dataLabel.font.fontWeight","marker.dataLabel.margin","marker.dataLabel.margin.left","marker.dataLabel.margin.top","marker.dataLabel.margin.bottom","marker.dataLabel.margin.right","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","font.color","splineType","cardinalSplineTension",[{tag:"trendlines",attr:["visibility","visibilityOnLegend","dashArray","forewardForecast","backwardForecast","polynomialOrder","tooltip.visible","tooltip.format","tooltip.fill","tooltip.border.width","tooltip.border.color","tooltip.enableAnimation","tooltip.duration","tooltip.opacity","tooltip.font.size","tooltip.font.opacity","tooltip.font.fontFamily","tooltip.font.fontStyle","tooltip.font.fontWeight","tooltip.font.color"],singular:"trendline"}],[{tag:"points",attr:["x","y","text","textMappingName","isEmpty","fill","visible"],singular:"points"}]],singular:"series"},{tag:"axes",attr:["columnIndex","rowIndex","desiredIntervals","multiLevelLabelsColor","multiLevelLabelsFontColor","isIndexed","labelPlacement","edgeLabelPlacement","intervalType","labelFormat","labelPosition","labelRotation","logBase","labelIntersectAction","opposedPosition","plotOffset","rangePadding","roundingPlaces","valueType","zoomFactor","zoomPosition","orientation","crossesAt","crossesInAxis","scrollbarSettings.visible","scrollbarSettings.canResize","scrollbarSettings.range.min","scrollbarSettings.range.max","scrollbarSettings.pointsLength","range.min","range.max","range.interval","tickLinesPosition","alternateGridBand.odd.fill","alternateGridBand.odd.opacity","alternateGridBand.even.fill","alternateGridBand.even.opacity","enableAutoIntervalOnZooming","majorGridLines.width","majorGridLines.color","majorGridLines.dashArray","majorGridLines.visible","majorGridLines.opacity","majorTickLines.color","majorTickLines.width","majorTickLines.size","majorTickLines.visible","minorGridLines.width","minorGridLines.dashArray","minorGridLines.color","minorGridLines.visible","minorTickLines.color","minorTickLines.width","minorTickLines.size","minorTickLines.visible","labelBorder.color","labelBorder.width","minorTicksPerInterval","columnSpan","crosshairLabel.visible","crosshairLabel.rx","crosshairLabel.ry","crosshairLabel.border.color","crosshairLabel.border.width","crosshairLabel.fill","crosshairLabel.font.fontFamily","crosshairLabel.font.fontStyle","crosshairLabel.font.size","crosshairLabel.font.fontWeight","crosshairLabel.font.opacity","crosshairLabel.font.color","font.size","font.color","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","isInversed","enableTrim","maximumLabelWidth","axisLine.visible","axisLine.width","axisLine.color","axisLine.dashArray","axisLine.offset","maximumLabels","title.text","title.visible","title.enableTrim","title.offset","title.alignment","title.position","title.maximumTitleWidth","title.font.size","title.font.color","title.font.opacity","title.font.fontFamily","title.font.fontStyle","title.font.fontWeight","additionalPadding","showNextToAxisLine",[{tag:"stripLine",attr:["borderColor","startFromAxis","zIndex","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","font.color"],singular:"stripLine"}],[{tag:"multiLevelLabels",attr:["textOverflow","maximumTextWidth","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","border.type","border.width"],singular:"multiLevelLabel"}]],singular:"axis"},{tag:"primaryXAxis.stripLine",attr:["borderColor","startFromAxis","zIndex","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","font.color"],singular:"primaryXAxis.stripLine"},{tag:"primaryYAxis.stripLine",attr:["borderColor","startFromAxis","zIndex","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","font.color"],singular:"primaryYAxis.stripLine"},{tag:"primaryXAxis.multiLevelLabels",attr:["textOverflow","maximumTextWidth","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","border.type","border.width"],singular:"primaryXAxis.multiLevelLabel"},{tag:"primaryYAxis.multiLevelLabels",attr:["textOverflow","maximumTextWidth","textAlignment","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","border.type","border.width"],singular:"primaryYAxis.multiLevelLabel"},{tag:"indicators",attr:["seriesName","xName","xAxisName","macdType","shortPeriod","longPeriod","enableAnimation","animationDuration","yAxisName","standardDeviations","kPeriod","dPeriod","periodLine.fill","periodLine.width","lowerLine.fill","lowerLine.width","upperLine.fill","upperLine.width","macdLine.fill","macdLine.width","histogram.fill","histogram.opacity","histogram.border.color","histogram.border.width","font.size","font.opacity","font.fontFamily","font.fontStyle","font.fontWeight","font.color","tooltip.visible","tooltip.format","tooltip.fill","tooltip.border.width","tooltip.border.color","tooltip.enableAnimation","tooltip.duration","tooltip.opacity",[{tag:"points",attr:[]}]],singular:"indicator"},{tag:"annotations",attr:["coordinateUnit","verticalAlignment","horizontalAlignment","xAxisName","yAxisName","margin.left","margin.right","margin.top","margin.bottom"],singular:"annotation"},{tag:"rowDefinitions",attr:["rowHeight","lineColor","lineWidth","unit"],singular:"rowDefinition"},{tag:"columnDefinitions",attr:["columnWidth","lineColor","lineWidth","unit"],singular:"columnDefinition"}],_xZoomFactor:g.util.valueFunction("xZoomFactor"),_yZoomFactor:g.util.valueFunction("yZoomFactor"),_xZoomPosition:g.util.valueFunction("xZoomPosition"),_yZoomPosition:g.util.valueFunction("yZoomPosition"),_init:function(){this._renderSfChart()},_destroy:function(){O("#template_group_"+this._id).remove(),O("#annotation_group_"+this._id).remove(),O(this.element).removeClass("e-chart e-js").find("#"+this.svgObject.id).remove(),O(this.element).removeClass("e-chart e-js").find("#legend_"+this.svgObject.id).remove()},_series:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_series_points:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_primaryXAxis_stripLine:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_primaryYAxis_stripLine:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_axes:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_axes_stripLine:function(e,t,i,s){this.redraw(),this._trigger("refresh")},_ignoreOnExport:["dataSource"],_removeZoomkit:function(){this.model.zooming.enable&&(O("[id^="+this._id+"_][id$=_ResetZoom]").remove(),O("[id^="+this._id+"_][id$=_PanBtn]").remove(),O("[id^="+this._id+"_][id$=_ZoomBtn]").remove(),O("[id^="+this._id+"_][id$=_ZoomInBtn]").remove(),O("[id^="+this._id+"_][id$=_ZoomOutBtn]").remove())},getCanvasElement:function(e){O("#"+e);var t=document.createElement("canvas"),i=t.getContext("2d"),s=O("#"+e+"_canvas").width(),n=O("#"+e+"_canvas").height();return t.setAttribute("width",s),t.setAttribute("height",n),e=O("#"+e+"_canvas")[0],i.drawImage(e,0,0,s,n),{canvasContainer:t,canvasArea:i,width:s,height:n}},getSVGElement:function(e){var t=O("#"+e+"_svg").width(),i=O("#"+e+"_svg").height(),s=document.getElementById(e+"_svg"),n=O("<div>").append(O(s).clone()).html(),a=document.getElementById("legend_"+e+"_svg"),s=O("#legend_"+e).position();O("#"+e+"_svg_Legend").attr("transform","translate("+s.left+","+s.top+")");return{chartSVG:n,legendChartSVG:O("<div>").append(O(a).clone()).html(),width:t,height:i}},print:function(){for(var e,t,i,s,n,a,r,o=[],l=[],d=this.model.series.length,h="",c=0,u=0;u<arguments.length;u++)if(n=O("#"+arguments[u]),t=arguments[u],n.hasClass("e-datavisualization-chart")){s=n.ejChart("instance"),e="<html> <div style='position:relative; left:0px; top:"+c+"px'>",r="",i=s.svgObject.id,c=O("#"+i).height()+50,O("#axisScrollbar_"+t)[0]&&(r=O("#axisScrollbar_"+t)[0].innerHTML);for(var p,m=["ResetZoom","PanBtn","ZoomBtn","ZoomOutBtn","ZoomInBtn"],g=[],f=0;f<5;f++)O(p="#"+i+"_"+m[f])[0]&&(g.push(O(p)),O(p).remove());if(1==s.model.enableCanvasRendering){var _,v=this.getCanvasElement(t);s.model.LegendBounds;(h=document.createElement("img")).setAttribute("src",O("#legend_"+t+"_canvas")[0].toDataURL()),O("#legend_Scroller"+t).prepend(h),e+=document.getElementById("chartContainer_"+t).outerHTML,O(h).remove(),h="";for(var b=0;b<d;b++)if(_=s.model.series[b].selectionSettings.mode.toLowerCase(),"none"!=s.model.AreaType)if("series"==_)0<O(n).find("#"+t+"_Selection_series"+b+"_canvas").length&&(a=O("#"+t+"_Selection_series"+b+"_canvas")[0],v.canvasArea.drawImage(a,0,0,v.width,v.height)),0<O(n).find("#"+t+"_Selection_Legend"+b+"_canvas").length&&(h="<img style='position:absolute;left:0px;' src='"+O("#"+t+"_Selection_Legend"+b+"_canvas")[0].toDataURL()+"'/>");else if("point"==_){for(var x=s.model.selectedDataPointIndexes,f=0;f<x.length;f++)x[f].seriesIndex==b&&0<O(n).find("#"+t+"_Selection_series"+b+"_point_"+x[f].pointIndex+"_canvas").length&&(a=O("#"+t+"_Selection_series"+b+"_point_"+x[f].pointIndex+"_canvas")[0],v.canvasArea.drawImage(a,0,0,v.width,v.height));0<O(n).find("#"+t+"_Selection_Legend"+b+"_canvas").length&&(h="<img style='position:absolute;left:0px;' src='"+O("#"+t+"_Selection_Legend"+b+"_canvas")[0].toDataURL()+"'/>")}else{for(x=s.model.selectedDataPointIndexes,f=0;f<x.length;f++)x[f].seriesIndex==b&&0<O(n).find("#"+t+"_Selection_Cluster_point_"+x[f].pointIndex+"_canvas").length&&(a=O("#"+t+"_Selection_Cluster_point_"+x[f].pointIndex+"_canvas")[0],v.canvasArea.drawImage(a,0,0,v.width,v.height));0<O(n).find("#"+t+"_SelectionCluster_Legend"+b+"_canvas").length&&(h="<img style='position:absolute;left:0px;' src='"+O("#"+t+"_SelectionCluster_Legend"+b+"_canvas")[0].toDataURL()+"'/>")}else for(x=s.model.selectedDataPointIndexes,f=0;f<x.length;f++)x[f].seriesIndex==b&&0<O("#"+t+"_Selection_series"+b+"_point_"+x[f].pointIndex+"_canvas").length&&(a=document.getElementById(t+"_Selection_series"+b+"_point_"+x[f].pointIndex+"_canvas"),v.canvasArea.drawImage(a,0,0,v.width,v.height),0<O("#"+t+"_Selection_Legend"+x[f].pointIndex+"_canvas").length&&(h="<img style='position:absolute;left:0px;' src='"+document.getElementById(t+"_Selection_Legend"+x[f].pointIndex+"_canvas").toDataURL()+"'/>"));v.canvasArea.save(),o.push(v.canvasContainer)}else{var y,w,C=this.getSVGElement(t);O("#"+t+"_svg_Legend").removeAttr("transform"),e+=O("#chartContainer_"+t)[0].outerHTML,e=this._getSelectionContentInSVG(s,t,e,"print"),null!=s.model.backGroundImageUrl&&((R=new Image).src=s.model.backGroundImageUrl,w=(y=document.createElement("canvas")).getContext("2d"),y.setAttribute("width",C.width),y.setAttribute("height",C.height),w.drawImage(R,0,0,C.width,C.height),e+="<img src='"+y.toDataURL()+"'/>"),e+='<svg xmlns="http://www.w3.org/2000/svg" style="left:0px; top:0px; position:absolute;" width="'+C.width+'" height="'+C.height+'" >',e+=C.chartSVG.toString()+" </svg>",e+=r+"</div></html>",l.push(e)}for(f=0;f<g.length;f++)O("#chartContainer_"+t).append(g[f])}else e="<html>",e+=document.getElementById(arguments[u]).innerHTML,e+="</html>",l.push(e);for(var S=window.open(),T=0;T<l.length;T++)S.document.write(l[T]);if(0<o.length){for(var R=new Image,k=0;k<o.length;k++)e+="<img src='"+o[k].toDataURL()+"'/>",R.src=o[k].toDataURL();e+=h,e+=r+"</div></html>",R.onload=function(){S.document.write(e),e="",S.document.close(),S.focus(),S.print(),S.close()}}else 0<l.length&&(e="",S.document.close(),S.focus(),S.print(),S.close())},redraw:function(e,t,i,s){var n;if(this.model.enableCanvasRendering)this.model.zooming.enable&&this.svgRenderer.ctx?(this.svgRenderer.ctx.clearRect(0,0,O("#"+this._id).width(),O("#"+this._id).height()),O(this.axisScroll).empty()):(O(this.svgObject).remove(),n=this.svgWidth,O("#canvas_trackSymbol").remove(),O("#"+this._id+"_canvas_Tracker").remove(),O("#secondCanvas").remove(),this.svgRenderer=new g.EjCanvasRender(this.element),this.svgRenderer.svgObj.height=g.util.isNullOrUndefined(this.model.size.height)?"450":this.model.size.height,this.svgRenderer.svgObj.width=g.util.isNullOrUndefined(this.model.size.width)?n:this.model.size.width,this.svgObject=this.svgRenderer.svgObj,this.svgRenderer.svgObj.getContext("2d"),O(this.scrollerContainer).remove(),O(this.legendSvgContainer).remove(),O(this.legendContainer).remove(),this.legendContainer=O("<div></div>").attr("id","legend_"+this._id).css("height","0px"),this.scrollerContainer=O("<div></div>").attr("id","legend_Scroller"+this._id).css("height","0px"),this.legendSvgContainer=this.svgRenderer.createLegendCanvas(this.element),this.svgRenderer.append(this.legendSvgContainer,this.scrollerContainer),O(this.scrollerContainer).appendTo(this.legendContainer),O(this.legendContainer).appendTo(this.chartContainer));else if(-1!=this.svgObject.id.indexOf("_canvas"))this._removeZoomkit(),O(this.svgObject).remove(),this.svgRenderer=new g.EjSvgRender(this.element),this.svgObject=this.svgRenderer.svgObj,this.canvasX=this.canvasY=0,O(this.scrollerContainer).remove(),O(this.legendSvgContainer).remove(),O(this.legendContainer).remove(),this.legendContainer=O("<div></div>").attr("id","legend_"+this._id).css("height","0px"),this.scrollerContainer=O("<div></div>").attr("id","legend_Scroller"+this._id).css("height","0px"),this.legendSvgContainer=this.svgRenderer.createLegendSvg(this.element),this.svgRenderer.append(this.legendSvgContainer,this.scrollerContainer),O(this.scrollerContainer).appendTo(this.legendContainer),O(this.legendContainer).appendTo(this.chartContainer);else if(!this.dragPoint||!t&&(!this.panning||!i||this.scrollbarUpdate||s||this.panning&&"chrome"!=this.model.browserInfo.name)||this.model.enable3D)O(this.svgObject).empty(),O(this.legendSvgContainer).empty(),O(this.axisScroll).empty();else{var a=this.svgObject;for(this.chartUpdating=!0,!this.continuePinching&&i&&(i.id="",i.setAttribute("opacity",0),a.appendChild(i),this.continuePinching=!1);1<a.childNodes.length;)a.removeChild(a.firstChild);O(this.legendSvgContainer).empty()}this.model._chartAreaZoom&&(this.zoomed=this.model._chartAreaZoom=this.model._axes.some(function(e){return e.zoomFactor<1||0<e.zoomPosition})),this._removeZoomkit(),O("#annotation_group_"+this._id).remove(),e||(this.model.canResize||this.model.isResponsive?this.bindResizeEvents():this.removeResizeEvents()),this.bindTo(e)},export:function(e,t,i){var s,n=this.model.exportSettings,e=g.util.isNullOrUndefined(e)?n.type:e.toLowerCase(),t=g.util.isNullOrUndefined(t)?n.action:t.toLowerCase();return"xlsx"==e?this._getExportModel(e,t,i):s="svg"!=e&&this.model.enableCanvasRendering?this.imageExport():this.svgExport(),s},_getExportModel:function(e,t,i){var s,n=O.extend(!0,{},this.model),a=this.model.exportSettings,i=g.util.isNullOrUndefined(e)?a.multipleExport:i,e=(this.svgHeight,this.svgWidth,n.size.height),a=n.size.width,t={action:t,method:"post"},r=g.buildTag("form","",null,t),o=this;if(n.event=null,n.primaryXAxis.range=n.primaryXAxis.actualRange,n.primaryYAxis.range=n.primaryYAxis.actualRange,delete n.chartRegions,this._ignoreOnExport){s=n.series;for(var l=0;l<s.length;l++)delete s[l].dataSource,delete s[l].query,s[l].fill="array"==jQuery.type(s[l].fill)?s[l].fill[0].color:s[l].fill}for(l=0;l<s.length;l++){if(!s[l].dataPoint){s[l].dataPoint=s[l].points;for(var d=0;d<s[l].dataPoint.length;d++)!s[l].dataPoint[d].fill&&n.pointColors.length>d&&(s[l].dataPoint[d].fill=n.pointColors[d])}s[l].trendLine||(s[l].trendLine=s[l].trendlines)}if(g.raiseWebFormsServerEvents)this.raiseWebServerEvents(JSON.stringify(n),"excelExporting"),this.raiseWebServerEvents(JSON.stringify(n));else{if(n.size.height&&-1!=n.size.height.indexOf("%")&&(n.size.height=O(this.svgObject).height().toString()),n.size.width&&-1!=n.size.width.indexOf("%")&&(n.size.width=O(this.svgObject).width().toString()),i){var h={};O("body").find(".e-datavisualization-chart").each(function(e,t){t=O(t).data("ejChart");if(!g.isNullOrUndefined(t)){t.model.event=null;t=JSON.parse(JSON.stringify(t.model));if(o._ignoreOnExport){s=t.series;for(var i=0;i<s.length;i++)delete s[i].dataSource,delete s[i].query,s[i].fill="array"==jQuery.type(s[i].fill)?s[i].fill[0].color:s[i].fill;h[e]=JSON.stringify(t);t={name:"ChartModel",type:"hidden",value:JSON.stringify(t)},t=g.buildTag("input","",null,t);r.append(t)}}})}else{s=n.series;for(l=0;l<s.length;l++)delete s[l]._visiblePoints,delete s[l].points;i={name:"ChartModel",type:"hidden",value:JSON.stringify(n)},i=g.buildTag("input","",null,i);r.append(i),r.append(this)}O("body").append(r),r.submit(),n.size={width:a,height:e}}return n},imageExport:function(){var e=O.extend(!0,{},this.model);e.primaryXAxis.range=e.primaryXAxis.actualRange,e.primaryYAxis.range=e.primaryYAxis.actualRange,e.event=null;var t,i=this._id,s=O("[id*="+i+"_Selection_]"),n=O("#legend_"+i+"_canvas")[0],a=this.model.exportSettings,r=a.angle,o=this.model.LegendBounds,l=this.getCanvasElement(i),d=l.canvasContainer,h=l.canvasArea,c=l.width,u=l.height,l=O("#"+i+"_canvas")[0];for(d.setAttribute("id","Export_"+i),0==r?(o=this.model.LegendBounds).X&&0!=o.Width&&0!=o.Height&&h.drawImage(n,o.X,o.Y):90==r||-90==r?(d.setAttribute("width",u),d.setAttribute("height",c),h.save(),h.translate(u/2,c/2),h.rotate(r*Math.PI/180),h.drawImage(l,-c/2,-u/2),h.restore(),o.X&&(h.save(),90==r?h.translate(u-o.Y-o.Height/2,c-o.X-o.Width/2):h.translate(o.Y+o.Height/2,o.X+o.Width/2),h.rotate(r*Math.PI/180),h.drawImage(n,-o.Width/2,-o.Height/2),h.restore())):(d.setAttribute("width",c),d.setAttribute("height",u),h.save(),h.translate(c,u),h.rotate(180*Math.PI/180),h.drawImage(l,0,0),h.restore(),o.X&&(h.save(),h.translate(o.X+o.Width/2,u-o.Y-o.Height/2),h.rotate(r*Math.PI/180),h.drawImage(n,-o.Width/2,-o.Height/2),h.restore())),t=0;t<s.length;t++)document.getElementById(s[t].id).getBoundingClientRect(),0==r?h.drawImage(s[t],0,0):90==r||-90==r?(h.save(),h.translate(u/2,c/2),h.rotate(r*Math.PI/180),h.drawImage(s[t],-c/2,-u/2),h.restore(),90==r&&0<=s[t].id.indexOf(i+"_Selection_Legend")?(h.save(),h.translate(u-o.Y-o.Height/2,c-o.X-o.Width/2),h.rotate(r*Math.PI/180),h.drawImage(s[t],-o.Width/2,-o.Height/2),h.restore()):-90==r&&0<=s[t].id.indexOf(i+"_Selection_Legend")&&(h.save(),h.translate(o.X+o.Width/2,u-o.Y-o.Height/2),h.rotate(r*Math.PI/180),h.drawImage(s[t],-o.Width/2,-o.Height/2),h.restore())):180==r&&(h.save(),h.translate(c,u),h.rotate(180*Math.PI/180),h.drawImage(s[t],0,0),h.restore(),180==r&&0<=s[t].id.indexOf(i+"_Selection_Legend")&&(h.save(),h.translate(o.X+o.Width/2,u-o.Y-o.Height/2),h.rotate(r*Math.PI/180),h.drawImage(s[t],-o.Width/2,-o.Height/2),h.restore()));if(n="jpg"==a.type?d.toDataURL("image/jpeg"):d.toDataURL(),"client"==a.mode)return d;g.raiseWebFormsServerEvents?this.raiseWebServerEvents(n):"server"==a.mode&&(a={action:a.action,method:"post"},a=g.buildTag("form","",null,a),e={name:"ChartModel",type:"hidden",value:JSON.stringify(e)},e=g.buildTag("input","",null,e),n={name:"Data",type:"hidden",value:n},n=g.buildTag("input","",null,n),a.append(e).append(n).append(this),O("body").append(a),a.submit())},svgExport:function(){for(var e=this.svgObject.id,t=O.extend(!0,{},this.model),i=0;i<this.model._axes.length;i++)t._axes[i].range=t._axes[i].actual_Range;t.event=null;var s=this._id,n=this.getSVGElement(s),a=this.model.exportSettings,r=a.angle,o=n.height,l=n.chartSVG,d=n.legendChartSVG,h=n.width,n='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">',n=0==r?n+l.toString()+d.toString()+"</svg>":90==r?n+'<g transform="translate('+o+',0) rotate(90 0 0)">'+l.toString()+d.toString()+"</g></svg>":-90==r?n+'<g transform="translate(0,'+h+') rotate(-90 0 0)">'+l.toString()+d.toString()+"</g></svg>":n+'<g transform="translate('+h+","+o+') rotate(180 0 0)">'+l.toString()+d.toString()+"</g></svg>",d=this._getSelectionContentInSVG(this,s,n,"export");if(n=0<O("#"+s).find('[class*="Selection"]').length?d:n,n=encodeURIComponent(n),O("#"+e+"_Legend").removeAttr("transform"),"client"==a.mode)return n;g.raiseWebFormsServerEvents?this.raiseWebServerEvents(n):"server"==a.mode&&(e={action:a.action,method:"post"},a=g.buildTag("form","",null,e),e={name:"ChartModel",type:"hidden",value:JSON.stringify(t)},e=g.buildTag("input","",null,e),n={name:"Data",type:"hidden",value:n},n=g.buildTag("input","",null,n),a.append(n).append(e).append(this),O("body").append(a),a.submit())},_getSelectionContentInSVG:function(e,t,i,s){var n,a,r,o,l,d,h=this.model.series.length;if(e.model.enable3D){d="";for(u=0;u<h;u++)0<O("#Selectionseries"+u+"Segmentseries"+u).length&&(d+=O("#Selectionseries"+u+"Segmentseries"+u)[0].outerHTML);i+=d}else{for(var c,u=0;u<h;u++)if(c=e.model.series[u].selectionSettings.mode.toLowerCase(),"none"!=e.model.AreaType)"cluster"!=c?0<O("#"+t+"SelectionSegmentseries"+u).length&&(a=document.getElementById(t+"SelectionSegmentseries"+u),r=O("<div>").append(O(a).clone()).html(),o=document.getElementById(t+"SelectionLegendSegmentseries"+u),l=O("<div>").append(O(o).clone()).html(),"export"===s?(n=i.slice(0,i.length-6),n+="<svg>"+r.toString()+l.toString()+"</svg></svg>"):i+=r.toString()+l.toString()):0<O("#"+t+"SelectionSegmentClusterSeries"+u).length&&(a=document.getElementById(t+"SelectionSegmentClusterSeries"+u),r=O("<div>").append(O(a).clone()).html(),o=document.getElementById(t+"SelectionLegendSegmentClusterSeries"+u),l=O("<div>").append(O(o).clone()).html(),"export"===s?(n=g.util.isNullOrUndefined(n)?i.slice(0,i.length-6):n,n+="<svg >"+r.toString()+l.toString()+"</svg>"):i+=r.toString()+l.toString());else for(var p=e.model.selectedDataPointIndexes,m=0;m<p.length;m++)p[m].seriesIndex==u&&0<O("#"+t+"SelectionSegmentseries"+u+"Point"+p[m].pointIndex).length&&(a=document.getElementById(t+"SelectionSegmentseries"+u+"Point"+p[m].pointIndex),r=O("<div>").append(O(a).clone()).html(),o=document.getElementById(t+"SelectionLegendSegmentseries"+u+"Point"+p[m].pointIndex),l=O("<div>").append(O(o).clone()).html(),"export"===s?(n=i.slice(0,i.length-6),n+="<svg>"+r.toString()+l.toString()+"</svg></svg>"):i+=r.toString()+l.toString());"cluster"==c&&"export"===s&&(n+="</svg>")}return"export"===s?n:i},raiseWebServerEvents:function(e,t){var i=O.extend(!0,{},this.model),s=this.model.exportSettings,t=g.util.isNullOrUndefined(t)?"exporting":t;this.model.size._width=O(this.svgObject).width(),this.model.size._height=O(this.svgObject).height(),i={model:i,originalEventType:t},s={Data:e,Format:s.type,Orientation:s.orientation,FileName:s.fileName},g.raiseWebFormsServerEvents(t,i,s)},animate:function(e){if(e)if(e.constructor===Array)for(i=0;i<e.length;i++)e[i]._animatedSeries=!1,e[i]._animatedTrendline=!1,e[i].AnimationComplete=!1;else e._animatedSeries=!1,e._animatedTrendline=!1,e.AnimationComplete=!1;else{for(var t=this.model.series,i=0;i<t.length;i++)t[i]._animatedSeries=!1,t[i]._animatedTrendline=!1,t[i].AnimationComplete=!1;for(var s=this.model.indicators,n=0;n<s.length;n++)s[n]._animatedSeries=!1,s[n]._animatedTrendline=!1}this.redraw()},_setModel:function(e){var t,i,s;for(s in e)switch(this.disableAnimation(),s){case"theme":this.model._themeChanged=!0,this.model.theme=e[s],this.setTheme(g.EjSvgRender.themes,this.model.theme),O.extend(!0,this.model.primaryXAxis,g.EjSvgRender.themes[this.model.theme].primaryXAxis),O.extend(!0,this.model.primaryYAxis,g.EjSvgRender.themes[this.model.theme].primaryYAxis);for(var n=0;n<this.model.axes.length;n++)this.model.axes[n].orientation&&"horizontal"==this.model.axes[n].orientation.toLowerCase()?O.extend(!0,this.model.axes[n],g.EjSvgRender.themes[this.model.theme].secondaryX):O.extend(!0,this.model.axes[n],g.EjSvgRender.themes[this.model.theme].secondaryY);for(var a=0;a<this.model.series.length;a++)O.extend(!0,this.model.series[a],g.EjSvgRender.themes[this.model.theme].commonSeriesOptions);break;case"commonSeriesOptions":for(var r=0;r<this.model.series.length;r++)e[s].dataSource&&(this.model.series[r].dataSource=null),O.extend(!0,this.model.series[r],{},e[s]);break;case"series":e[s].length<this.model.series.length&&(this.model.series=this.model.series.slice(0,e[s].length)),t=this.model.series;for(r=0;r<t.length;r++)e[s][r].dataSource&&(t[r].dataSource=null);O.extend(!0,t,{},e[s]);for(var r=0,o=t.length;r<o;r++)t[r].enableAnimation&&(t[r]._animatedSeries=!1),e[s][r]&&e[s][r].dataSource instanceof g.DataManager&&(t[r].dataSource=e[s][r].dataSource),e[s][r]&&e[s][r].query instanceof g.Query&&(t[r].query=e[s][r].query);break;case"legend":O.extend(!0,this.model.legend,{},e[s]);break;case"axes":O.extend(!0,this.model.axes,{},e[s]);break;case"primaryXAxis":this.model.primaryXAxis.setRange=!!e[s].range,this.model.primaryXAxis.setAxisInterval=!(!e[s].range||!e[s].range.interval)||this.model.primaryXAxis.setAxisInterval,this.model.primaryXAxis.actual_Range=this.model._axes[0].setRange?null:this.model._axes[0].actual_Range,O.extend(!0,this.model.primaryXAxis,{},e[s]);break;case"primaryYAxis":this.model.primaryYAxis.setRange=!!e[s].range,this.model.primaryYAxis.log_Range=e[s].range||this.model.primaryYAxis.log_Range,this.model.primaryYAxis.actual_Range=!this.model._axes||this.model._axes[1].setRange?null:this.model._axes[1].actual_Range,O.extend(!0,this.model.primaryYAxis,{},e[s]);break;case"xZoomFactor":this.model.primaryXAxis.zoomFactor=this._xZoomFactor(),i=this.model.axes;for(r=0;r<i.length;r++)"horizontal"==i[r].orientation.toLowerCase()&&(i[r].zoomFactor=this._xZoomFactor());break;case"yZoomFactor":this.model.primaryYAxis.zoomFactor=this._yZoomFactor(),i=this.model.axes;for(r=0;r<i.length;r++)"vertical"==i[r].orientation.toLowerCase()&&(i[r].zoomFactor=this._yZoomFactor());break;case"xZoomPosition":this.model.primaryXAxis.zoomPosition=this._xZoomPosition(),i=this.model.axes;for(r=0;r<i.length;r++)"horizontal"==i[r].orientation.toLowerCase()&&(i[r].zoomPosition=this._xZoomPosition());break;case"yZoomPosition":this.model.primaryYAxis.zoomPosition=this._yZoomPosition(),i=this.model.axes;for(r=0;r<i.length;r++)"vertical"==i[r].orientation.toLowerCase()&&(i[r].zoomPosition=this._yZoomPosition());break;case"drilldown":this.model.series=[],this.model.explodeValue=null,O.extend(!0,this.model,{},e[s]);break;case"datasource":for(r=0;r<this.model.series.length;r++)this.model.series[r].dataSource=null,this.model.series[r].points=null;O.extend(!0,this.model,{},e[s]);break;case"chartArea":O.extend(!0,this.model.chartArea,{},e[s]);break;default:O.extend(!0,this.model,{},e[s]);for(r=0,o=(t=this.model.series).length;r<o;r++)t[r].enableAnimation&&(t[r]._animatedSeries=!1)}this.model.canResize||this.model.isResponsive?this.bindResizeEvents():this.removeResizeEvents(),O("#annotation_group_"+this._id).remove(),this.model.enableCanvasRendering?(O(this.svgObject).remove(),O("#canvas_trackSymbol").remove(),O("#"+this._id+"_canvas_Tracker").remove(),O("#secondCanvas").remove(),this.svgRenderer=new g.EjCanvasRender(this.element),this.svgRenderer.svgObj.height=g.util.isNullOrUndefined(this.model.size.height)?"450":this.model.size.height,this.svgRenderer.svgObj.width=g.util.isNullOrUndefined(this.model.size.width)?O("#"+this._id).width():this.model.size.width,this.svgObject=this.svgRenderer.svgObj,O(this.legendSvgContainer).remove(),this.legendSvgContainer=this.svgRenderer.createLegendCanvas(this.element),this.svgRenderer.append(this.legendSvgContainer,this.legendContainer)):-1!=this.svgObject.id.indexOf("_canvas")?(this._removeZoomkit(),O(this.svgObject).remove(),this.svgRenderer=new g.EjSvgRender(this.element),this.svgObject=this.svgRenderer.svgObj,this.canvasX=this.canvasY=0,O(this.legendSvgContainer).remove(),this.legendSvgContainer=this.svgRenderer.createLegendSvg(this.element),this.svgRenderer.append(this.legendSvgContainer,this.legendContainer)):this.chartUpdating||(O(this.svgObject).empty(),O(this.legendSvgContainer).empty()),this.bindTo()}}),g.datavisualization.Chart.Locale=g.datavisualization.Chart.Locale||{},g.datavisualization.Chart.Locale.default=g.datavisualization.Chart.Locale["en-US"]={zoomIn:"Zoom In",zoomOut:"Zoom Out",zoom:"Zoom",pan:"Pan",reset:"Reset"},g.datavisualization.Chart.CrosshairType={Crosshair:"crosshair",TrackBall:"trackBall"},g.datavisualization.Chart.TrackballDisplayMode={Float:"float",Grouping:"grouping"},g.datavisualization.Chart.VisibleOnLegend={Visible:"visible",Hidden:"hidden"},g.datavisualization.Chart.ExportingType={PNG:"png",JPG:"jpg",PDF:"pdf",SVG:"svg",DOCX:"docx",XLSX:"xlsx"},g.datavisualization.Chart.ExportingMode={Client:"client",Server:"server"},g.datavisualization.Chart.ExportingOrientation={Portrait:"portrait",Landscape:"landscape"},g.datavisualization.Chart.ValueType={Double:"double",DateTime:"datetime",Category:"category",Logarithmic:"logarithmic",DateTimeCategory:"datetimecategory"},g.datavisualization.Chart.TextOverflow={None:"none",Wrap:"wrap",Trim:"trim",WrapAndTrim:"wrapandtrim"},g.datavisualization.Chart.Type={Line:"line",Spline:"spline",Column:"column",Doughnut:"doughnut",Area:"area",SplineArea:"splinearea",StepLine:"stepline",StepArea:"steparea",Pie:"pie",PieOfPie:"pieofpie",Hilo:"hilo",HiloOpenClose:"hiloopenclose",Candle:"candle",Bubble:"bubble",Scatter:"scatter",Bar:"bar",StackingArea:"stackingarea",StackingArea100:"stackingarea100",RangeColumn:"rangecolumn",StackingColumn:"stackingcolumn",StackingColumn100:"stackingcolumn100",StackingBar:"stackingbar",StackingBar100:"stackingbar100",Pyramid:"pyramid",Funnel:"funnel",Polar:"polar",Radar:"radar",RangeArea:"rangearea",SplineRangeArea:"splinerangearea",Waterfall:"waterfall",BoxAndWhishker:"boxandwhisker",StackingSplineArea:"stackingsplinearea",StackingSplineArea100:"stackingsplinearea100"},g.datavisualization.Chart.SplitMode={Position:"position",Value:"value",Percentage:"percentage",Indexes:"indexes"},g.datavisualization.Chart.SplineType={Natural:"natural",Monotonic:"monotonic",Cardinal:"cardinal",Clamped:"clamped"},g.datavisualization.Chart.DragType={XY:"xy",X:"x",Y:"y"},g.datavisualization.Chart.LabelPlacement={BetweenTicks:"betweenTicks",OnTicks:"onTicks"},g.datavisualization.Chart.TrendlinesType={Linear:"linear",Exponential:"exponential",Logarithmic:"logarithmic",Power:"power",Polynomial:"polynomial"},g.datavisualization.Chart.ErrorBarType={FixedValue:"fixedValue",Percentage:"percentage",StandardDeviation:"standardDeviation",StandardError:"standardError",Custom:"custom"},g.datavisualization.Chart.ErrorBarMode={Both:"both",Vertical:"vertical",Horizontal:"horizontal"},g.datavisualization.Chart.ErrorBarDirection={Both:"both",Plus:"plus",Minus:"minus"},g.datavisualization.Chart.LabelIntersectAction={None:"none",Rotate90:"rotate90",Rotate45:"rotate45",Wrap:"wrap",WrapByword:"wrapByWord",Trim:"trim",Hide:"hide",MultipleRows:"multipleRows"},g.datavisualization.Chart.EdgeLabelPlacement={None:"none",Shift:"shift",Hide:"hide"},g.datavisualization.Chart.roundedCorner={Both:"both",Start:"start",End:"end"},g.datavisualization.Chart.Theme={Azure:"azure",FlatLight:"flatlight",Azuredark:"azuredark",Lime:"lime",LimeDark:"limedark",Saffron:"saffron",SaffronDark:"saffrondark",GradientLight:"gradientlight",GradientDark:"gradientdark",HighContrast01:"highcontrast01",HighContrast02:"highcontrast02",Material:"material",Office365:"office365",Bootstrap:"bootstrap"},g.datavisualization.Chart.FontStyle={Normal:"normal",Italic:"italic"},g.datavisualization.Chart.FontWeight={Regular:"regular",Bold:"bold",Lighter:"lighter"},g.datavisualization.Chart.IntervalType={Auto:"auto",Days:"days",Hours:"hours",Seconds:"seconds",Milliseconds:"milliseconds",Minutes:"minutes",Months:"months",Years:"years"},g.datavisualization.Chart.RangePadding={Additional:"additional",Normal:"normal",None:"none",Round:"round",Auto:"auto"},g.datavisualization.Chart.TextAlignment={MiddleTop:"middletop",MiddleCenter:"middlecenter",MiddleBottom:"middlebottom"},g.datavisualization.Chart.LabelPosition={Inside:"inside",Outside:"outside"},g.datavisualization.Chart.ZIndex={Over:"over",Behind:"behind"},g.datavisualization.Chart.Unit={percentage:"percentage",pixel:"pixel"},g.datavisualization.Chart.PyramidMode={Linear:"linear",Surface:"Surface"},g.datavisualization.Chart.DrawType={Line:"line",Column:"column",Area:"area",RangeColumn:"rangecolumn",Scatter:"scatter",Spline:"spline"},g.datavisualization.Chart.AnimationType={Linear:"linear",Smooth:"smooth"},g.datavisualization.Chart.columnFacet={Rectangle:"rectangle",Cylinder:"cylinder"},g.datavisualization.Chart.EmptyPointMode={Gap:"gap",Zero:"zero",Average:"average"},g.datavisualization.Chart.Pattern={None:"none",Chessboard:"chessboard",Crosshatch:"crosshatch",Dots:"dots",Pacman:"pacman",DiagonalBackward:"diagonalBackward",DiagonalForward:"diagonalForward",Grid:"grid",Turquoise:"turquoise",Star:"star",Triangle:"triangle",Circle:"circle",Tile:"tile",HorizontalDash:"horizontalDash",VerticalDash:"verticalDash",Rectangle:"rectangle",Box:"box",VerticalStripe:"verticalStripe",HorizontalStripe:"horizontalStripe",Bubble:"bubble",Custom:"custom"},g.datavisualization.Chart.Mode={Series:"series",Point:"point",Cluster:"cluster",Range:"range"},g.datavisualization.Chart.SelectionType={Single:"single",Multiple:"multiple"},g.datavisualization.Chart.Shape={None:"none",LeftArrow:"leftarrow",RightArrow:"rightarrow",Circle:"circle",Cross:"cross",HorizLine:"horizline",VertLine:"vertLine",Diamond:"diamond",Rectangle:"rectangle",Triangle:"triangle",InvertedTriangle:"invertedtriangle",Hexagon:"hexagon",Pentagon:"pentagon",Star:"star",Ellipse:"ellipse",Wedge:"wedge",Trapezoid:"trapezoid",UpArrow:"uparrow",DownArrow:"downarrow",Image:"image"},g.datavisualization.Chart.DrawMode={Both:"both",Open:"open",Close:"close"},g.datavisualization.Chart.LineCap={Butt:"butt",Round:"round",Square:"square"},g.datavisualization.Chart.LineJoin={Round:"round",Bevel:"bevel",Miter:"miter"},g.datavisualization.Chart.Position={Top:"top",Middle:"middle",Bottom:"bottom"},g.datavisualization.Chart.Alignment={Center:"center",Near:"near",Far:"far"},g.datavisualization.Chart.RotateOn={Start:"start",Middle:"middle",End:"end"},g.datavisualization.Chart.TextAnchor={Start:"start",Middle:"middle",End:"end"},g.datavisualization.Chart.TickLinesPosition={Inside:"inside",Outside:"outside"},g.datavisualization.Chart.CoordinateUnit={None:"none",Pixels:"pixels",Points:"points"},g.datavisualization.Chart.HorizontalAlignment={Left:"left",Right:"right",Middle:"middle"},g.datavisualization.Chart.VerticalAlignment={Top:"top",Bottom:"bottom",Middle:"middle"},g.datavisualization.Chart.Region={Chart:"chart",Series:"series"},g.datavisualization.Chart.ConnectorLineType={Line:"line",Bezier:"bezier"},g.datavisualization.Chart.HorizontalTextAlignment={Near:"near",Far:"far",Center:"center"},g.datavisualization.Chart.VerticalTextAlignment={Near:"near",Far:"far",Center:"center"},g.datavisualization.Chart.multiLevelLabelsBorderType={None:"none",Rectangle:"rectangle",WithoutTopAndBottom:"withouttopandbottom",Brace:"brace",CurlyBrace:"curlybrace"},g.datavisualization.Chart.MACDType={Line:"line",Histogram:"histogram",Both:"both"},g.datavisualization.Chart.IndicatorsType={RSI:"rsi",Momentum:"momentum",Bollingerband:"bollingerband",Accumulationdistribution:"accumulationdistribution",EMA:"ema",SMA:"sma",Stochastic:"stochastic",ATR:"atr",MACD:"macd",TMA:"tma"},g.datavisualization.Chart.BoxPlotMode={Normal:"normal",Exclusive:"exclusive",Inclusive:"inclusive"},g.datavisualization.Chart.BubbleRadiusMode={MinMax:"minmax",Auto:"auto"},g.datavisualization.Chart.SizeType={Auto:"auto",Pixel:"pixel",Years:"years",Months:"months",Days:"days",Hours:"hours",Minutes:"minutes",Seconds:"seconds"},O.extend(g.datavisualization.Chart.prototype,g.ejChart)}(jQuery,Syncfusion),ej.EjCanvasRender=function(e){this.svgObj=document.createElement("canvas"),this._rootId=jQuery(e).attr("id"),this.svgObj.setAttribute("id",this._rootId+"_canvas"),this.ctx=this.svgObj.getContext("2d")},function(_){ej.EjCanvasRender.prototype={drawPath:function(e,t,i){var s=e.hasStackingInnerRadius||!1,n=e.d.split(" "),a=e["stroke-width"];if(e.lgndCtx){var r=this.lgndCtx;this.lgndCtx=null!=t?t:this.lgndCtx,this.lgndCtx.save(),this.lgndCtx.beginPath(),i&&this.lgndCtx.translate(i[0],i[1]),this.lgndCtx.globalAlpha=e.opacity||e["fill-opacity"],this.lgndCtx.lineWidth=e["stroke-width"],this.lgndCtx.strokeStyle=e.stroke;for(h=0;h<n.length;h+=3){c=parseFloat(n[h+1]),u=parseFloat(n[h+2]);switch(n[h]){case"M":this.lgndCtx.moveTo(c,u);break;case"L":this.lgndCtx.lineTo(c,u);break;case"C":this.lgndCtx.bezierCurveTo(c,u,parseFloat(n[h+3]),parseFloat(n[h+4]),parseFloat(n[h+5]),parseFloat(n[h+6])),h+=4;break;case"A":this.lgndCtx.arc(parseFloat(n[h-5]),parseFloat(n[h-4]),c,0,2*Math.PI,!1),h+=5;break;case"a":this.lgndCtx.beginPath();var o=parseFloat(n[h-2])+c,l=n[h-1];this.lgndCtx.arc(o,l,c,0,2*Math.PI,!1),h+=5;break;case"Z":this.lgndCtx.fillStyle=e.fill,this.lgndCtx.fill(),h-=2;break;case"Q":this.lgndCtx.quadraticCurveTo(c,u,parseFloat(n[h+3]),parseFloat(n[h+4])),h+=2}}"none"!=e.fill&&null!=e.fill&&(this.lgndCtx.fillStyle=e.fill,this.lgndCtx.fill()),this.lgndCtx.stroke(),this.lgndCtx.restore(),this.lgndCtx=r}else{r=this.ctx;this.ctx=null!=t?t:this.ctx,this.ctx.save(),this.ctx.beginPath(),i&&this.ctx.translate(i[0],i[1]),this.ctx.globalAlpha=e.opacity||e["fill-opacity"];var d=!0;this.ctx.lineWidth=a;i=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(",");i&&this.ctx.setLineDash(i),this.ctx.strokeStyle=e.stroke;for(var h=0;h<n.length;h+=3){var c=parseFloat(n[h+1]),u=parseFloat(n[h+2]);switch(n[h]){case"M":e.innerR&&!s||e.cx||this.ctx.moveTo(c,u);break;case"L":e.innerR&&!s||this.ctx.lineTo(c,u);break;case"C":this.ctx.bezierCurveTo(c,u,parseFloat(n[h+3]),parseFloat(n[h+4]),parseFloat(n[h+5]),parseFloat(n[h+6])),h+=4;break;case"A":e.innerR?d&&(this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.arc(e.x,e.y,e.innerR,e.end,e.start,!e.counterClockWise),d=!1):e.cx?this.ctx.arc(e.cx,e.cy,e.radius,0,2*Math.PI,e.counterClockWise):(this.ctx.moveTo(e.x,e.y),this.ctx.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),this.ctx.lineTo(e.x,e.y)),h+=5;break;case"Q":this.ctx.bezierCurveTo(c,u,parseFloat(n[h+1]),parseFloat(n[h+2]),parseFloat(n[h+3]),parseFloat(n[h+4])),h+=2;break;case"z":this.ctx.closePath()}}"none"!=e.fill&&null!=e.fill&&(this.ctx.fillStyle=e.fill,this.ctx.fill()),0<a&&this.ctx.stroke(),this.ctx.restore(),this.ctx=r}},_setLinePathStyle:function(e,t){var i=e["stroke-width"];t&&this.ctx.translate(t[0],t[1]),this.ctx.globalAlpha=e.opacity||e["fill-opacity"],this.ctx.lineWidth=i,(i=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(","))&&this.ctx.setLineDash(i),this.ctx.strokeStyle=e.stroke,"none"!=e.fill&&null!=e.fill&&(this.ctx.fillStyle=e.fill,this.ctx.fill())},drawRect:function(e,t){var i=this.ctx,s=e.rx;this.ctx=t&&t.canvas?t:this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.globalAlpha=e.opacity,this.ctx.lineWidth=e["stroke-width"];t=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(",");t&&this.ctx.setLineDash(t),this.ctx.strokeStyle=e.stroke,this.ctx.rect(e.x,e.y,e.width,e.height),null!=s&&0<=s?this.drawCornerRadius(e):("none"==e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.ctx.stroke()),0<=e.id.indexOf("Series")&&this.ctx.clip(),this.ctx.restore(),this.ctx=i},drawCylinder:function(e,t,i){var s=this.ctx;this.ctx=t&&t.canvas?t:this.ctx,this.ctx.save();var n,a,r,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O=ej.datavisualization.Chart.prototype.colorNameToHex(e.fill),D={svgRenderer:ej.EjSvgRender.prototype},I=Math.PI,j=2*I+.1,L=e.x,A=e.y,E=e.width,t=e.height,P=j;this.ctx.fillStyle=ej.Ej3DRender.prototype.polygon3D.prototype.applyZLight(O,D),this.ctx.lineWidth=0,this.ctx.strokeStyle=ej.Ej3DRender.prototype.polygon3D.prototype.applyZLight(O,D),this.ctx.globalAlpha=e.opacity,1==i.isColumn?(S=E+(w=L),d=l=L+(r=E/2),g=h=A-(o=r/4),u=(p=L)+E,c=m=A+t-o,y=T=C=0,x=I,R=-r,k=o,i.stacking=!0,i.isLastSeries||(g=h=A+o)):(w=S=0,C=t+A,p=l=L+(r=(o=t/2)/4),u=d=L+E+r,m=(T=A)+t,c=h=(g=A)+o,y=I/2,x=1.5*I,i.stacking=!0,i.isLastSeries||(u=d=L+E-r),R=r=-r,k=-(o=-o));var D=ej.Ej3DRender.prototype.polygon3D.prototype.applyXLight(O,D),M=this.ctx.createLinearGradient(w,T,S,C);M.addColorStop(0,O),M.addColorStop(.3,D),M.addColorStop(.7,D),M.addColorStop(1,O);for(var F=1;F<=4;F++){var N=0;for(F<4&&this.ctx.beginPath(),b=F%2==0?(f=d,_=c,v=p,g):(f=l,_=h,v=u,m),4==F&&(r=R,o=k,this.ctx.fillStyle=M),2<F&&(N=y,P=x);N<=P;N+=.1)n=f-r*Math.cos(N),a=_+o*Math.sin(N),0===N?this.ctx.moveTo(n,a):this.ctx.lineTo(n,a);2<F&&this.ctx.lineTo(v,b),3!=F&&(this.ctx.stroke(),this.ctx.fill())}0<=e.id.indexOf("Series")&&this.ctx.clip(),this.ctx.restore(),this.ctx=s},drawCornerRadius:function(e){var t=e.rx,i=e.x,s=e.y,n=e.width,a=e.height;"none"==e.fill&&(e.fill="transparent"),this.ctx.fillStyle=e.fill,n<2*t&&(t=n/2),a<2*t&&(t=a/2),this.ctx.beginPath(),this.ctx.moveTo(i+n-t,s),this.ctx.arcTo(i+n,s,i+n,s+a,t),this.ctx.arcTo(i+n,s+a,i,s+a,t),this.ctx.arcTo(i,s+a,i,s,t),this.ctx.arcTo(i,s,i+n,s,t),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()},createGradientElement:function(e,t){var i,s=this.ctx;if("[object Array]"==Object.prototype.toString.call(t)){for(var n=s.createLinearGradient(0,0,0,this.svgObj.height),a=0;a<=t.length-1;a++){var r=t[a].color,o=t[a].colorStop.slice(0,-1),o=parseInt(o)/100;n.addColorStop(o,r)}i=n}else i=t;return i},drawLine:function(e){this.ctx.save(),this.ctx.beginPath(),this.ctx.lineWidth=e["stroke-width"],this.ctx.strokeStyle=e.stroke,this.ctx.moveTo(e.x1,e.y1),this.ctx.lineTo(e.x2,e.y2),this.ctx.stroke(),this.ctx.restore()},drawText:function(e,t,i){ej.util.isNullOrUndefined(e["font-weight"])||"regular"!=e["font-weight"].toLowerCase()||(e["font-weight"]="normal");var s=e["font-style"].toLowerCase()+" "+e["font-weight"]+" "+e["font-size"]+" "+e["font-family"],n=e["text-anchor"],a=void 0!==e.opacity?e.opacity:1;if("middle"==n&&(n="center"),e.lgndCtx)this.lgndCtx.save(),this.lgndCtx.fillStyle=e.fill,this.lgndCtx.font=s,this.lgndCtx.textAlign=n,this.lgndCtx.globalAlpha=a,"middle"==e["dominant-baseline"]&&(this.lgndCtx.textBaseline="center"),e.labelRotation?(this.lgndCtx.translate(e.x,e.y),this.lgndCtx.rotate(e.labelRotation*Math.PI/180),this.lgndCtx.fillText(t,0,0)):this.lgndCtx.fillText(t,e.x,e.y),this.lgndCtx.restore();else{if(this.ctx.save(),this.ctx.fillStyle=e.fill,this.ctx.font=s,this.ctx.textAlign=n,this.ctx.globalAlpha=a,e.baseline&&(this.ctx.textBaseline=e.baseline),e.labelRotation){var r,o=e.labelRotation;if(!o||-1==e.id.indexOf("XLabel")&&-1==e.id.indexOf("YLabel"))this.ctx.translate(e.x,e.y),this.ctx.rotate(e.labelRotation*Math.PI/180),this.ctx.fillText(t,0,0);else{var l="rotate("+e.labelRotation.toString()+"deg)";_(e).attr("rotateAngle",l);var d=i||t,a=ej.EjSvgRender.utils._measureText(d,null,s).height,l=this.createText(e,d);_(document.body).append(l);i=l.getBoundingClientRect();_(l).remove(),r=i.height,o<0&&(o=360+o);d=e.transform.split(","),n=null!=n?n:"center",l=parseFloat(d[1]),i=parseFloat(d[2]),d=r/2;if("outside"==e.labelPosition?"start"==n?this.ctx.translate(l,i+d-(o<0&&-180<o||180<o?r/2:(r-a)/2)):"end"==n?this.ctx.translate(l,i+d-(o<0&&-180<o||180<o?r/2:-(r-a)/2)):this.ctx.translate(l,i+d):"start"==n?this.ctx.translate(l,i-d-(o<0&&-180<o||180<o?r/2:(r-a)/2)):"end"==n?this.ctx.translate(l,i-d-(o<0&&-180<o||180<o?r/2:-(r-a)/2)):this.ctx.translate(l,i-d),this.ctx.textAlign=n,this.ctx.rotate(o*(Math.PI/180)),"object"==typeof t)for(h=t.length,c=0;c<h;c++){p=ej.EjSvgRender.utils._measureText(t[c],null,s).height;this.ctx.fillText(t[c],0,c*p)}else this.ctx.fillText(t,0,0)}}else if("object"==typeof t||e.isTrackball)if(e.isTrackball&&"string"==typeof t)this.ctx.fillText(t,e.x,e.y);else for(var h=t.length,c=0;c<h;c++){var u=ej.util.isNullOrUndefined(e.padding)?0:e.padding,p=ej.EjSvgRender.utils._measureText(t[c],null,s).height,m=e.isTrackball?Number(parseInt(e["font-size"])):p;this.ctx.fillText(t[c],e.x,e.y+(m+u)*c)}else this.ctx.fillText(t,e.x,e.y);this.ctx.restore()}},drawZoomRect:function(e,t){var i,s,n=0,a=0,r=_("<div id="+e.id+"></div>"),t=t.model.m_AreaBounds,n=e.x<t.X||e.x+n+e.width>n+_(this.svgObj).width()-20?(i=this.prevWidth,this.prevX):(i=this.prevWidth=e.width,this.prevX=e.x+n),a=e.y<t.Y||e.y+a+e.height>a+t.Y+t.Height?(s=this.prevHeight,this.prevY):(s=this.prevHeight=e.height,this.prevY=e.y+a);_(r).css({width:i,height:s,top:a,left:n,"background-color":e.fill,"border-style":"solid",position:"absolute","border-color":e.stroke,"border-width":e["stroke-width"]}),document.getElementById("chartContainer_"+this._rootId).appendChild(r[0])},zoomButton:function(e,t,i){var s,n,a,r=i.svgObj||i.svgObject,o=i._rootId||i._id,l="zoom"==t?"_Zoom":"zoomIn"==t?"_ZoomIn":"_ZoomOut",d=0,h=0;_("#"+e.zoomId).length<=0?(a=_("<div id="+r.id+l+"Btn></div>"),_(a).css({width:e.width,height:e.height,top:e.top+h,left:e.left+d,"background-color":e.fill,"border-style":"solid",position:"absolute","border-radius":"0.4em","border-color":e.fill,"box-sizing":"content-box","z-index":2e3}),n="http://www.w3.org/2000/svg",(i=document.createElementNS(n,"svg")).setAttribute("id",e.zoomId),i.setAttribute("width",25),i.setAttribute("height",25),t="zoom"==t?(s="M26.101,22.893l-6.605-6.174c1.414-2.781,0.897-6.267-1.496-8.504c-2.901-2.711-7.448-2.56-10.161,0.341    c-2.712,2.9-2.56,7.45,0.341,10.163c2.426,2.266,6,2.523,8.694,0.853l6.579,6.151L26.101,22.893z M10.186,16.571    c-1.715-1.604-1.805-4.293-0.203-6.009c1.605-1.715,4.295-1.805,6.009-0.201c1.715,1.603,1.805,4.293,0.202,6.007    C14.59,18.084,11.901,18.175,10.186,16.571","translate(-3,-3)"):(s="zoomIn"==t?"M9.0983096,4.2999878L9.0983096,9.3999634 3.9983783,9.3999634 3.9983783,12.699951 9.0983096,12.699951 9.0983096,17.799988 12.398249,17.799988 12.398249,12.699951 17.49818,12.699951 17.49818,9.5 12.398249,9.5 12.398249,4.2999878z M10.998276,0C14.298215,0 17.49818,1.3999634 19.69813,4.1999512 22.79809,8.0999756 22.79809,13.5 19.998144,17.399963L28.597992,28.299988 23.898081,32 15.398205,21.199951C10.898271,23.099976 5.5983606,21.899963 2.3983956,17.899963 -1.4015366,13.099976 -0.60156059,6.0999756 4.1983567,2.3999634 6.1983276,0.79998779 8.5983163,0 10.998276,0z":"M3.9983433,9.5L3.9983433,12.799988 17.598165,12.799988 17.598165,9.5z M10.998234,0C14.298169,0 17.498131,1.3999634 19.698108,4.1999512 22.798034,8.0999756 22.798034,13.5 19.998092,17.399963L28.597994,28.299988 23.898054,32 15.398188,21.199951C10.898259,23.099976 5.5983546,21.899963 2.398393,17.899963 -1.4015351,13.099976 -0.60155994,6.0999756 4.1983522,2.3999634 6.1983207,0.79998779 8.5983074,0 10.998234,0z","translate(4,4) scale(0.6)"),s={id:l+"Path",fill:e.iconColor,transform:t,d:s},n=document.createElementNS(n,"path"),_(n).attr(s).appendTo(i),a[0].appendChild(i),document.getElementById("chartContainer_"+o).appendChild(a[0])):(a=document.getElementById(r.id+l+"Btn"),_(a).css({top:e.top+h,left:e.left+d}))},panButton:function(e,t){var i,s,n,a=t.svgObj||t.svgObject,r=t._rootId||t._id,o=0,l=0;_("#"+e.panId).length<=0?(n=_("<div id="+a.id+"_PanBtn></div>"),_(n).css({width:e.width,height:e.height,top:e.top+l,left:e.left+o,"background-color":e.fill,"border-style":"solid",position:"absolute","border-radius":"0.4em","border-color":e.fill,"box-sizing":"content-box","z-index":2e3}),s="http://www.w3.org/2000/svg",(i=document.createElementNS(s,"svg")).setAttribute("id",e.panId),i.setAttribute("width",25),i.setAttribute("height",25),t={id:"panPath",fill:e.iconColor,transform:"translate(-3,-3)",points:"26.105,16 21.053,12.211 21.053,14.737 17.263,14.737 17.263,10.947 19.834,10.947 16.044,5.895 12.255,10.947 14.737,10.947 14.737,14.737 10.947,14.737 10.947,12.211 5.895,16 10.947,19.789 10.947,17.263 14.737,17.263 14.737,21.053 12.255,21.053 16.044,26.105 19.834,21.053 17.263,21.053 17.263,17.263 21.053,17.263 21.053,19.789"},s=document.createElementNS(s,"polygon"),_(s).attr(t).appendTo(i),n[0].appendChild(i),document.getElementById("chartContainer_"+r).appendChild(n[0])):(n=document.getElementById(a.id+"_PanBtn"),_(n).css({top:e.top+l,left:e.left+o}))},resetZoom:function(e,t){var i,s,n,a,r=t.svgObj||t.svgObject,o=t._rootId||t._id,l=0,d=0;_("#"+e.resetZoomId).length<=0?(a=_("<div id="+r.id+"_ResetZoom></div>"),_(a).css({width:e.width,height:e.height,top:e.top+d,left:e.left+l,"background-color":e.fill,"border-style":"solid","border-radius":"0.4em",position:"absolute","border-color":e.fill,"box-sizing":"content-box","z-index":2e3}),n="http://www.w3.org/2000/svg",(i=document.createElementNS(n,"svg")).setAttribute("id",e.resetZoomId),i.setAttribute("width",25),i.setAttribute("height",25),s={id:"p1",fill:e.iconColor,transform:"translate(-3,-3)",points:"11.895,18.398 8.061,22.23 5.796,19.967 5.796,26.283 12.112,26.283 9.848,24.018 13.682,20.186"},t=document.createElementNS(n,"polygon"),_(t).attr(s).appendTo(i),t={id:"p2",fill:e.iconColor,transform:"translate(-3,-3)",points:"19.691,6.072 21.955,8.337 18.121,12.172 19.908,13.959 23.742,10.123 26.007,12.389 26.007,6.072"},s=document.createElementNS(n,"polygon"),_(s).attr(t).appendTo(i),s={id:"p3",fill:e.iconColor,transform:"translate(-3,-3)",points:"11.895,13.958 13.682,12.172 9.848,8.337 12.112,6.072 5.796,6.072 5.796,12.389 8.061,10.123"},t=document.createElementNS(n,"polygon"),_(t).attr(s).appendTo(i),s={id:"p4",fill:e.iconColor,transform:"translate(-3,-3)",points:"19.908,18.396 18.121,20.186 21.955,24.018 19.691,26.283 26.007,26.283 26.007,19.967 23.741,22.23"},n=document.createElementNS(n,"polygon"),_(n).attr(s).appendTo(i),a[0].appendChild(i),document.getElementById("chartContainer_"+o).appendChild(a[0])):(a=document.getElementById(r.id+"_ResetZoom"),_(a).css({top:e.top+d,left:e.left+l}))},drawCrosshairLine:function(e,t){var i=_("<div id="+e.id+"></div>");_(i).css({width:e.width,height:e.height,left:e.left,top:e.top,"border-style":e.style,opacity:e.opacity,visibility:"visible","border-color":e.stroke,"border-width":e["stroke-width"],position:e.position}),_(t).append(i[0])},drawCrosshairlabel:function(e,t,i){_("#"+this._rootId).offset();var s,n=0,a=0;0<_("#"+e.id).length?(s=document.getElementById(e.id),_(s).css({width:e.width-5,height:e.height-5,left:t.x+n-5,top:t.y+a-15,visibility:"visible",display:e.display}),document.getElementById(e.id).textContent=i):(s=_("<div id="+e.id+" style='position: absolute; z-index: 13000;'></div>"),_(s).css({color:t.fill,"font-family":t["font-family"],"font-size":t["font-size"],"font-weight":t["font-weight"],"font-style":t["font-style"],"background-color":e.fill,"border-style":"solid","border-color":e.stroke,"border-width":e["stroke-width"],opacity:e["fill-opacity"],"text-align":"center"}),document.getElementById(this._rootId).appendChild(s[0]))},createCrosshairCanvas:function(){var e,t=document.getElementById(this._rootId+"_canvas"),i=(_("#"+this._rootId).offset(),0),s=0;return _("#secondCanvas").length?e=document.getElementById("secondCanvas"):(e=document.createElement("canvas"),_(document).find("#"+this.svgObj.id+"_CrosshairGroup").append(e),_(e).attr({id:"secondCanvas",width:t.width,height:t.height,top:s,left:i}),_(e).css({width:t.width,height:t.height,top:s,left:i})),e},drawTrackToolTip:function(e,t,i,s){var n=this.svgObj.offsetLeft,a=this.svgObj.offsetTop;if(0<_("#"+e.id).length){var r=document.getElementById(e.id);if(_(r).css({left:e.x+n,top:e.y+a,visibility:"visible","border-box":"content-box","background-color":e.fill,color:t.fill,"border-color":e.stroke,"border-width":e["stroke-width"]}),"array"==jQuery.type(i)){for(var o="",l=0;l<i.length;l++)o=o+i[l]+"</br>";_("#"+e.id).html(o)}else _("#"+e.id).html(i)}else{r=_("<div id="+e.id+" style='position: absolute; z-index: 13000;'></div>");_(r).css({color:t.fill,"font-family":t["font-family"],"font-size":t["font-size"],"font-weight":t["font-weight"],"font-style":t["font-style"],width:e.width,height:e.height-s-2*e["stroke-width"],"background-color":e.fill,"border-style":"solid","text-align":"center",padding:"0px","padding-top":s/2+"px","padding-bottom":s/2+"px","border-color":e.stroke,"border-width":e["stroke-width"],opacity:e["fill-opacity"]}),document.getElementById(this._rootId).appendChild(r[0])}},trackSymbol:function(e,t,i,s,n){var a=n.model.m_AreaBounds;_("#"+this._rootId).offset();if(t.startX>=a.X&&t.startX<=a.X+a.Width&&t.startY>=a.Y&&t.startY<=a.Y+a.Height){var r,o=e.SeriesIndex,l=e.PointIndex;if("bubble"==n.model.series[o].type.toLowerCase()&&(u=2*n.model.series[o]._visiblePoints[l].radius+5,e.Style.BorderColor=e.Style.Color),"scatter"==n.model.series[o].type.toLowerCase()&&ej.util.isNullOrUndefined(s)){var d={cx:t.startX-2,cy:t.startY-2,r:e.ShapeSize.width/2,fill:e.Style.Color,opacity:e.Style.Opacity,stroke:e.Style.BorderColor};this.drawCircle(d,null)}else{0<_("#canvas_trackSymbol").length?(r=_("#canvas_trackSymbol"),_(r).css({visibility:"visible",display:"block"})):r=_("<div id=canvas_trackSymbol></div>");var h=t.startX,a=t.startY,l=_("<div id="+e.ID+"></div>"),n=h-(u||e.ShapeSize.width),o=a-(u||e.ShapeSize.height);_(l).css({left:n,top:o,"box-sizing":"content-box",position:"absolute",visibility:"visible",opacity:e.Style.Opacity,"z-index":200});s=e.ShapeSize;e.symbol=l;d={};switch(i.toLowerCase()){case"circle":_(l).css({width:u||e.ShapeSize.width+"px",height:u||e.ShapeSize.height+"px",left:u?n+u/2:n+e.ShapeSize.width/2-e.Style.BorderWidth+"px",top:u?o+u/2:o+e.ShapeSize.height/2-e.Style.BorderWidth+"px","border-style":"solid","background-color":e.Style.Color,"border-color":e.Style.BorderColor,"border-width":e.Style.BorderWidth,"border-radius":"100%"});break;case"rectangle":_(l).css({width:e.ShapeSize.width,height:e.ShapeSize.height,left:n+e.ShapeSize.width/2-e.Style.BorderWidth/2,top:o+e.Style.BorderWidth/2,"border-style":"solid","background-color":e.Style.Color,"border-color":e.Style.BorderColor,"border-width":e.Style.BorderWidth});break;case"diamond":var c="M "+(t.startX+-s.width/2)+" "+t.startY+" L "+t.startX+" "+(t.startY+-e.ShapeSize.height/2)+" L "+(t.startX+e.ShapeSize.width/2)+" "+t.startY+" L "+t.startX+" "+(t.startY+e.ShapeSize.height/2)+" L "+(t.startX+-e.ShapeSize.width/2)+" "+t.startY+"z";d.direction=c,this.drawSvgShape(e,d);break;case"triangle":c="M "+(t.startX+-s.width/2)+" "+(t.startY+s.height/2)+" L "+t.startX+" "+(t.startY+-s.height/2)+" L "+(t.startX+s.width/2)+" "+(t.startY+s.height/2)+" L "+(t.startX+-s.width/2)+" "+(t.startY+s.height/2)+"z";d.direction=c,this.drawSvgShape(e,d);break;case"invertedtriangle":c="M "+(t.startX+-s.width/2)+" "+(t.startY+s.height/2)+" L "+t.startX+" "+(t.startY+-s.height/2)+" L "+(t.startX+s.width/2)+" "+(t.startY+s.height/2)+" L "+(t.startX+-s.width/2)+" "+(t.startY+s.height/2)+"z",i="rotate(180,"+t.startX+","+t.startY+")";d.direction=c,d.rotate=i,this.drawSvgShape(e,d);break;case"cross":c="M "+(t.startX+-s.width/2)+" "+t.startY+" L "+(t.startX+s.width/2)+" "+t.startY+" M "+t.startX+" "+(t.startY+s.height/2)+" L "+t.startX+" "+(t.startY+-s.height/2)+"z";d.direction=c,this.drawSvgShape(e,d);break;case"star":c="M "+(t.startX+s.width/3)+" "+(t.startY+-s.height/2)+" L "+(t.startX+-s.width/2)+" "+(t.startY+s.height/6)+" L "+(t.startX+s.width/2)+" "+(t.startY+s.height/6)+" L "+(t.startX+-s.width/3)+" "+(t.startY+-s.height/2)+" L "+t.startX+" "+(t.startY+s.height/2)+" L "+(t.startX+s.width/3)+" "+(t.startY+-s.height/2)+"z";d.direction=c,this.drawSvgShape(e,d);break;case"hexagon":c="M "+(t.startX+-s.width/2)+" "+t.startY+" L "+(t.startX+-s.width/4)+" "+(t.startY+-s.height/2)+" L "+(t.startX+s.width/4)+" "+(t.startY+-s.height/2)+" L "+(t.startX+s.width/2)+" "+t.startY+" L "+(t.startX+s.width/4)+" "+(t.startY+s.height/2)+" L "+(t.startX+-s.width/4)+" "+(t.startY+s.height/2)+" L "+(t.startX+-s.width/2)+" "+t.startY+"z";d.direction=c,this.drawSvgShape(e,d);break;case"wedge":c="M "+(t.startX-s.width)+" "+t.startY+" L "+(t.startX+s.width)+" "+(t.startY+-s.height/2)+" L "+(t.startX+s.width/4*3)+" "+t.startY+" L "+(t.startX+s.width)+" "+(t.startY+s.height/2)+" L "+(t.startX-s.width)+" "+t.startY+"z";d.direction=c,this.drawSvgShape(e,d);break;case"trapezoid":c="M "+(t.startX+-s.width/2)+" "+t.startY+" L "+(t.startX+-s.width/2)+" "+(t.startY+-s.height/4)+" L "+(t.startX+-s.width/2+s.width)+" "+(t.startY+-s.height/2)+" L "+(t.startX+-s.width/2+s.width)+" "+(t.startY+s.height/2)+" L "+(t.startX+-s.width/2)+" "+(t.startY+s.height/4)+" L "+(t.startX+-s.width/2)+" "+t.startY+"z";d.direction=c,this.drawSvgShape(e,d);break;case"uparrow":c="M "+(t.startX-s.width/2+s.width/4)+" "+(t.startY-s.height/2+s.height)+" L "+(t.startX-s.width/2+s.width/4)+" "+(t.startY-s.height/2+s.height/2)+" L "+(t.startX-s.width/2)+" "+(t.startY-s.height/2+s.height/2)+" L "+t.startX+" "+(t.startY-s.height/2)+" L "+(t.startX+s.width/2)+" "+(t.startY-s.height/2+s.height/2)+" L "+(t.startX+s.width/2-s.width/4)+" "+(t.startY-s.height/2+s.height/2)+" L "+(t.startX+s.width/2-s.width/4)+" "+(t.startY-s.height/2+s.height)+" L "+(t.startX-s.width/2+s.width/4)+" "+(t.startY-s.height/2+s.height)+"z";d.direction=c,this.drawSvgShape(e,d);break;case"downarrow":c="M "+(t.startX-s.width/2+s.width/4)+" "+(t.startY-s.height/2)+" L "+(t.startX+s.width/2-s.width/4)+" "+(t.startY-s.height/2)+" L "+(t.startX+s.width/2-s.width/4)+" "+(t.startY-s.height/2+s.height/2)+" L "+(t.startX+s.width/2)+" "+(t.startY-s.height/2+s.height/2)+" L "+t.startX+" "+(t.startY-s.height/2+s.height)+" L "+(t.startX-s.width/2)+" "+(t.startY-s.height/2+s.height/2)+" L "+(t.startX-s.width/2+s.width/4)+" "+(t.startY-s.height/2+s.height/2)+" L "+(t.startX-s.width/2+s.width/4)+" "+(t.startY-s.height/2)+"z";d.direction=c,this.drawSvgShape(e,d);break;case"leftarrow":c="M "+(t.startX-s.width/2+s.width)+" "+(t.startY+s.height/4)+" L "+(t.startX-s.width/2+s.width)+" "+(t.startY+-s.height/4)+" L "+(t.startX-s.width/2+s.width/2)+" "+(t.startY+-s.height/4)+" L "+(t.startX-s.width/2+s.width/2)+" "+(t.startY+-s.height/2)+" L "+(t.startX-s.width/2)+" "+t.startY+" L "+(t.startX-s.width/2+s.width/2)+" "+(t.startY+s.height/2)+" L "+(t.startX-s.width/2+s.width/2)+" "+(t.startY+s.height/4)+" L "+(t.startX-s.width/2+s.width)+" "+(t.startY+s.height/4)+"z";d.direction=c,this.drawSvgShape(e,d);break;case"rightarrow":c="M "+(t.startX-s.width/2)+" "+(t.startY+s.height/4)+" L "+(t.startX-s.width/2)+" "+(t.startY+-s.height/4)+" L "+(t.startX-s.width/2+s.width/2)+" "+(t.startY+-s.height/4)+" L "+(t.startX-s.width/2+s.width/2)+" "+(t.startY+-s.height/2)+" L "+(t.startX-s.width/2+s.width)+" "+t.startY+" L "+(t.startX-s.width/2+s.width/2)+" "+(t.startY+s.height/2)+" L "+(t.startX-s.width/2+s.width/2)+" "+(t.startY+s.height/4)+" L "+(t.startX-s.width/2)+" "+(t.startY+s.height/4)+"z";d.direction=c,this.drawSvgShape(e,d);break;case"pentagon":for(var u=Math.sqrt(s.height*s.height+s.width*s.width)/2,p=ej.EjSvgRender.utils._getStringBuilder(),m=0;m<=5;m++){var g=72*m,f=Math.PI/180*g,g=u*Math.cos(f),f=u*Math.sin(f);0==m?p.append("M "+(t.startX+g)+" "+(t.startY+f)+" "):p.append("L "+(t.startX+g)+" "+(t.startY+f)+" ")}p.append("z");c=p.toString();d.direction=c,this.drawSvgShape(e,d);break;case"ellipse":_(l).css({width:e.ShapeSize.width,height:e.ShapeSize.height/2,"border-style":"solid",left:n+e.ShapeSize.height/2-e.Style.BorderWidth/2,top:t.startY+a-e.ShapeSize.height+4,"background-color":e.Style.Color,"border-color":e.Style.BorderColor,"border-width":e.Style.BorderWidth,"-moz-border-radius":"50%","-webkit-border-radius":"50%","border-radius":"50%","border-box":"content-box"});break;case"horizline":_(l).css({width:e.ShapeSize.width,height:0,"border-style":"solid",left:n+e.ShapeSize.width/2,top:t.startY+a-1,"border-color":e.Style.BorderColor,"border-width":"2px","border-box":"content-box"});break;case"vertline":_(l).css({width:0,height:e.ShapeSize.height,"border-style":"solid",left:t.startX+h-1,top:o+e.ShapeSize.height/2-2,"border-color":e.Style.BorderColor,"border-width":"2px","border-box":"content-box"});break;default:_(l).css({width:e.ShapeSize.width,height:e.ShapeSize.height,"border-style":"solid","background-color":e.Style.Color,"border-color":e.Style.BorderColor,"border-width":e.Style.BorderWidth,"border-radius":"50px"})}r[0].appendChild(l[0]),(document.getElementById(this.svgObj.id+"_CrosshairGroup")||document.getElementById("chartContainer_"+this._rootId)).appendChild(r[0])}}},drawSvgShape:function(e,t){var i=document.getElementById(this._rootId+"_canvas"),s=0,n=0,a="http://www.w3.org/2000/svg",r=document.createElementNS(a,"svg");r.setAttribute("id","mySVG"),r.setAttribute("width",_(i).width()),r.setAttribute("height",_(i).height()),_(e.symbol).css({left:s+"px",top:n+"px"});n={id:"svgPath","fill-opacity":e.Style.Opacity,"stroke-width":e.Style.BorderWidth,fill:e.Style.Color,transform:t.rotate,stroke:e.Style.BorderColor};n.d=t.direction;a=document.createElementNS(a,"path");_(a).attr(n).appendTo(r),e.symbol[0].appendChild(r)},drawCircle:function(e,t){var i;e.lgndCtx?(i=this.lgndCtx,this.lgndCtx=null!=t?t:this.lgndCtx,this.lgndCtx.save(),this.lgndCtx.beginPath(),this.lgndCtx.arc(e.cx,e.cy,e.r,0,2*Math.PI),this.lgndCtx.fillStyle=e.fill,this.lgndCtx.globalAlpha=e.opacity,this.lgndCtx.fill(),this.lgndCtx.lineWidth=e["stroke-width"],this.lgndCtx.strokeStyle=e.stroke,this.lgndCtx.stroke(),this.lgndCtx.restore(),this.lgndCtx=i):(i=this.ctx,this.ctx=null!=t?t:this.ctx,this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.cx,e.cy,e.r,0,2*Math.PI),this.ctx.fillStyle=e.fill,this.ctx.globalAlpha=e.opacity,this.ctx.fill(),this.ctx.lineWidth=e["stroke-width"],(t=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(","))&&this.ctx.setLineDash(t),this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore(),this.ctx=i)},drawPolyline:function(e,t){this.ctx.save(),this.ctx.beginPath();for(var i=e.points.split(" "),s=0;s<i.length-1;s++){var n=i[s].split(","),a=n[0],n=n[1];0==s?this.ctx.moveTo(a,n):this.ctx.lineTo(a,n)}this.ctx.lineWidth=e["stroke-width"],this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore()},drawPolygon:function(e,t){},setFillAttribute:function(e,t){},setStrokeAttribute:function(e,t){},changePathValue:function(e){},drawArc:function(e,t,i){},changeVMLStyle:function(e,t){},applyVMLStyle:function(e,t){},drawEllipse:function(e,t){var i=this.ctx;this.ctx=null!=t?t:this.ctx;var s=Math.max(e.rx,e.ry),n=e.rx/s,t=e.ry/s;e.lgndCtx?(this.lgndCtx.save(),this.lgndCtx.beginPath(),this.lgndCtx.translate(e.rx,e.ry),this.lgndCtx.scale(n,t),this.lgndCtx.arc(e.cx-e.rx,2*e.cy-e.rx,e.rx,0,2*Math.PI,!1),this.lgndCtx.fillStyle=e.fill,this.lgndCtx.fill(),this.lgndCtx.restore(),this.lgndCtx.lineWidth=e["stroke-width"],this.lgndCtx.strokeStyle=e.stroke,this.lgndCtx.stroke(),this.lgndCtx.restore()):(this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(e.cx,e.cy),this.ctx.save(),this.ctx.scale(n,t),this.ctx.arc(0,0,s,0,2*Math.PI,!1),this.ctx.fillStyle=e.fill,this.ctx.fill(),this.ctx.restore(),this.ctx.lineWidth=e["stroke-width"],this.ctx.strokeStyle=e.stroke,this.ctx.stroke(),this.ctx.restore(),this.ctx=i)},_getAttrVal:function(e,t,i){t=_(e).attr(t);return null!=t?t:i},_setAttr:function(e,t){},setSpanAttr:function(e,t,i){},_textAttrReplace:function(e,t,i,s){},drawImage:function(e,t){this.ctx.save();var i=this,s=new Image;s.src=e.href,s.onload=function(){i.ctx.drawImage(s,e.x,e.y,e.width,e.height)},this.ctx.restore()},createDefs:function(){},createGroup:function(e){},createText:function(e,t){var i=document.createElement("div");return _(i).css({transform:e.rotateAngle,"font-family":parseFloat(e["font-family"]),"font-size":1.1*parseFloat(e["font-size"]),position:"absolute"}),ej.util.isNullOrUndefined(t)||(i.textContent=t),i},drawAxesBoundsClipPath:function(e,t,i){},getAttrVal:function(e,t,i){},hexFromRGB:function(e){},createDelegate:function(e,t){},drawClipPath:function(e,t){},drawCircularClipPath:function(e,t){},append:function(e,t){_(e).appendTo(t)},createLegendCanvas:function(e){return this.legendsvgObj=document.createElement("canvas"),this._rootId=jQuery(e).attr("id"),this.legendsvgObj.setAttribute("id","legend_"+this._rootId+"_canvas"),this.lgndCtx=this.legendsvgObj.getContext("2d"),this.legendsvgObj}}}(jQuery),ej.Ej3DAxisRenderer=function(){},ej.Ej3DSeriesRender=function(){},ej.Ej3DChart=function(){},ej.series3DTypes={},function(Q){ej.Ej3DAxisRenderer.prototype={_drawAxes:function(e,t,i){t.majorGridLines.visible&&this._drawGridLines3D(t,i),t.visible&&t.majorTickLines.visible&&this._renderTicks3D(t,t.majorTickLines.size,t.majorTickLines.width,i),t.visible&&(this._drawAxisLabel(t,i),this._drawMultiLevelLabel(e,t,i),this._drawAxisTitle(t))},_drawAxisTitle:function(e){if(e.title.visible){var t=e.title.font;this.gAxisTitleEle=this.svgRenderer.createGroup({id:this.svgObject.id+"axisTitle_"+e.name});var i=e._opposed,s={Width:Q(this.svgObject).width(),Height:Q(this.svgObject).height()},n=ej.EjSvgRender.chartTransform3D.transform3D(s);n.mViewport=s,n.Rotation=0,n.Tilt=0,n.Depth=100,n.PerspectiveAngle=90,ej.EjSvgRender.chartTransform3D.transform(n);for(var a,r,o,l,d,h,c,u,p=ej.EjSvgRender.chartTransform3D.result,s=ej.Ej3DRender.prototype.matrix3D.prototype,m=e.orientation.toLowerCase(),g=!1,f=0;f<this.model._axes.length;f++)if((a=this.model._axes[f]).orientation.toLowerCase()==m)for(var _=0;_<a.multiLevelLabels.length;_++)if(a.multiLevelLabels[_].visible){g=!0;break}"horizontal"==m?(r=this.model.elementSpacing+e._LableMaxWidth.height,o=ej.EjSvgRender.utils._measureText(e.title.text,e.width,e.title.font).height/2,(d=Q.extend({},ej.EjSvgRender.commonChartEventArgs)).data={Text:e.title.text,location:{x:e.width/2,y:r+o+e.majorTickLines.size+e.axisLine.width+this.model.wallSize+e._multiLevelLabelHeight},axes:e},this._trigger("axesTitleRendering",d),t=e.title.font,l=d.data.location.x+e.x,h=i?e.y-d.data.location.y:d.data.location.y+e.y,r={Width:o.width,Height:o.height,Label:d.data,TextAnchor:"middle",tag:"text",font:t,id:this.svgObject.id+"axisTitle",child:this.chart3D},g?(c={id:this.svgObject.id+"axisTitle",x:l,y:h,fill:t.color,"font-size":t.size,"font-family":t.fontFamily,"font-style":t.fontStyle,"font-weight":t.fontWeight,opacity:t.opacity,"text-anchor":"middle"},u=ej.EjSvgRender.chartTransform3D.toScreen({x:l,y:h,z:0},n,p,s),c.x=u.x,c.y=u.y,this.svgRenderer.drawText(c,d.data.Text,this.gAxisTitleEle),this.svgRenderer.append(this.gAxisTitleEle,this.svgObject)):this.graphics.addVisual(this.polygon.createTextElement(this.vector.vector3D(l,h,0),r,10,10))):(o=ej.EjSvgRender.utils._measureText(e.title.text,e.height,e.title.font),l=i?e.x+(4*this.model.elementSpacing+e._LableMaxWidth.width+e.majorTickLines.size+e.axisLine.width+this.model.wallSize+e._multiLevelLabelHeight):e.x-(3*this.model.elementSpacing+e._LableMaxWidth.width+e.majorTickLines.size+e.axisLine.width+this.model.wallSize+e._multiLevelLabelHeight),(d=Q.extend({},ej.EjSvgRender.commonChartEventArgs)).data={Text:e.title.text,location:{x:o.width/2,y:0},axes:e},this._trigger("axesTitleRendering",d),t=e.title.font,h=d.data.location.y+(e.y+e.height)+e.height/2*-1,e=i?25:-25,r={Width:o.width,Height:o.height,Angle:-90,Label:d.data,TextAnchor:"middle",tag:"text",font:t,id:this.svgObject.id+"_YAxisTitle",child:this.chart3D},g?(c={id:void 0,x:l,y:h,fill:t.color,"font-size":t.size,"font-family":t.fontFamily,"font-style":t.fontStyle,"font-weight":t.fontWeight,opacity:t.opacity,"text-anchor":"middle",transform:"rotate(-90,"+l+","+(i?h+10:h-10)+")"},u=ej.EjSvgRender.chartTransform3D.toScreen({x:l,y:h,z:0},n,p,s),c.x=u.x+e,c.y=u.y,this.svgRenderer.drawText(c,d.data.Text,this.gAxisTitleEle),this.svgRenderer.append(this.gAxisTitleEle,this.svgObject)):this.graphics.addVisual(this.polygon.createTextElement(this.vector.vector3D(l,h,0),r,10,10)))}},_drawMultiLevelLabel:function(e,t,i){this.gMultiLevelEle=this.svgRenderer.createGroup({id:this.svgObject.id+"_axisMultiLevelLabels_"+e});var s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w=t.multiLevelLabels.length,C=this.model,S=C.elementSpacing,T=0,R=0,k=C.m_AreaBounds,O=t.visibleRange,D=C.wallSize,I=t._opposed,i=i.axes[t.name]._validCross,j=t.orientation.toLowerCase(),L=i?t.y:k.Y+(!I&&k.Height),A=i?t.x:k.X+(I&&k.Width),E=[],i={Width:Q(this.svgObject).width(),Height:Q(this.svgObject).height()},P=ej.EjSvgRender.chartTransform3D.transform3D(i);P.mViewport=i,P.Rotation=0,P.Tilt=0,P.Depth=100,P.PerspectiveAngle=C.perspectiveAngle,ej.EjSvgRender.chartTransform3D.transform(P);for(var M=ej.EjSvgRender.chartTransform3D.result,F=ej.Ej3DRender.prototype.matrix3D.prototype,N=0;N<w;N++)if(s=t.multiLevelLabels[N],n=this.svgObject.id+"_"+t.name+"MultiLevelLabels_"+e+"_"+N,""!=s.text&&s.visible){d=s._level,h="middle",a=s.font,y=s.border.width,H=s.maximumTextWidth,X=s.textAlignment.toLowerCase(),V=z=s.text,l=s.textOverflow.toLowerCase(),_=ej.EjSvgRender.utils._measureText(s.text,k.Width,s.font),o=(s.end-s.start)/2,B=(s.start+o-O.min)/O.delta,r=(s.start-O.min)/O.delta,o=(s.end-O.min)/O.delta,t.isInversed&&(B=isNaN(B)?0:1-B,r=isNaN(r)?0:1-r,o=isNaN(o)?0:1-o),B="horizontal"==j?(T=Math.round(t.width*B)+k.X+t.plotOffset,R=I?L-D-t.majorTickLines.size-S-5-t._LableMaxWidth.height:L+D+t.majorTickLines.size+S+t._LableMaxWidth.height,r=Math.round(t.width*r)+k.X+t.plotOffset,o=Math.round(t.width*o)+k.X+t.plotOffset,H||o-r-10):(R=Math.round(t.plotOffset+t.y+t.height*(1-B)),T=I?t.x+D+t.majorTickLines.size+t.axisLine.width+S/2+t._LableMaxWidth.width+t.prevHeight[d]+t.multiLevelLabelHeight[d]/2:A-D-t.majorTickLines.size-S/2-t._LableMaxWidth.width-t.prevHeight[d]-t.multiLevelLabelHeight[d]/2,r=Math.round(t.plotOffset+t.y+t.height*(1-r)),o=Math.round(t.plotOffset+t.y+t.height*(1-o)),H||t.multiLevelLabelHeight[d]+10),"horizontal"==j&&(R=I?R-t.prevHeight[d]:R+t.prevHeight[d]),"far"==X?(T=T+B/2-y/2,h="end"):"near"==X&&(h="start",T=T-B/2+y/2);var z,V,B,H=ej.EjAxisRenderer.prototype._triggerMultiLevelLabelsRendering(V,T,R,l,a,s.border,this);if(z=V=H.text,T=H.location.x,R=H.location.y,l=H.textOverflow.toLowerCase(),(a=H.font).color=a.color||t.multiLevelLabelsFontColor,H.border,X=H.border.type.toLowerCase(),y=H.border.width,x={id:n,x:T,y:R,fill:a.color,"font-size":a.size,"font-family":a.fontFamily,"font-style":a.fontStyle,"font-weight":a.fontWeight,opacity:a.opacity,"text-anchor":h},"none"!=l&&(z=ej.EjAxisRenderer.prototype.textOverflowMultiLevelLabels(t,B,z,V,l,a,_,{x:T,y:R},null,this)),"wrap"==l||"wrapandtrim"==l)for(var Y=R,U=0;U<z.length;U++){_=ej.EjSvgRender.utils._measureText(z[U],null,a),0!=U&&(Y=I?Y-_.height:Y+_.height),_.width,_.height,z[U],this.chart3D,x.id=x.id+"_"+U;var W=ej.EjSvgRender.chartTransform3D.toScreen({x:T,y:Y+5,z:0},P,M,F);x.x=W.x,x.y=W.y,this.svgRenderer.drawText(x,z[U],this.gMultiLevelEle)}if(T="horizontal"==j?T:I?T+10:T-10,"wrap"!=l&&"wrapandtrim"!=l&&(_.width,_.height,this.chart3D,W=ej.EjSvgRender.chartTransform3D.toScreen({x:T,y:R+5,z:0},P,M,F),x.x=W.x,x.y=W.y,this.svgRenderer.drawText(x,z,this.gMultiLevelEle)),B="horizontal"==j?{bounds:{x:r,y:R-10,height:t.multiLevelLabelHeight[d],width:B},axisIndex:e,multiLevelLabel:s}:{bounds:{x:T-m/2-5,y:o,height:r-o,width:m},axisIndex:e,multiLevelLabel:s},this.model.multiLevelLabelRegions.push(B),"none"!=X&&0<y){n=this.svgObject.id+"_"+t.name+"MultiLevelLabelsBorder_"+e+"_"+N;for(var X=R-10+t.multiLevelLabelHeight[d]+5,G=s.border.color||t.multiLevelLabelsColor,$="horizontal"==j?(c={x1:r,y1:R-10,x2:o,y2:R-10},u={x1:r,y1:X,x2:o,y2:X},p={x1:r,y1:R-10,x2:r,y2:X},{x1:o,y1:R-10,x2:o,y2:X}):(c={x1:T-(m=t.multiLevelLabelHeight[d]-5)/2-5,y1:o,x2:T+m/2+5,y2:o},u={x1:T-m/2-5,y1:r,x2:T+m/2+5,y2:r},p={x1:T-m/2-5,y1:o,x2:T-m/2-5,y2:r},{x1:T+m/2+5,y1:o,x2:T+m/2+5,y2:r}),q=0;q<4;q++){switch(q){case 0:g=n+"_top",f=c;break;case 1:g=n+"_bottom",f=u;break;case 2:g=n+"_left",f=p;break;case 3:g=n+"_right",f=$}E[0]=ej.Ej3DRender.prototype.vector3D.prototype.vector3D(f.x1,f.y1,0),E[1]=ej.Ej3DRender.prototype.vector3D.prototype.vector3D(f.x2,f.y2,0),v=ej.EjSvgRender.chartTransform3D.toScreen(E[0],P,M,F),b=ej.EjSvgRender.chartTransform3D.toScreen(E[1],P,M,F),x={id:g,x1:v.x,y1:v.y,x2:b.x,y2:b.y,stroke:G,"stroke-width":y},this.svgRenderer.drawLine(x,this.gMultiLevelEle)}this.svgRenderer.append(this.gMultiLevelEle,this.svgObject)}}},_textTrim:function(e,t,i){var s,n=t.length;if(!(ej.EjSvgRender.utils._measureText(t,this.model.m_AreaBounds.Width,i).width>e))return t;for(var a=n-1;0<=a;--a)if(s=t.substring(0,a)+"...",ej.EjSvgRender.utils._measureText(s,this.model.m_AreaBounds.Width,i).width<=e)return s},_textWrap:function(e,t,i){for(var s=t.toString().split(" "),n="",a=[],r=s.length,o="",l=0;l<r;l++)o=s[l],ej.EjSvgRender.utils._measureText(n.concat(o),this.model.m_AreaBounds.Width,i).width<e?n=n.concat((""===n?"":" ")+o):""!==n?(a.push(this._textTrim(e,n,i)),n=o):(a.push(this._textTrim(e,o,i)),o=""),n&&l===r-1&&a.push(this._textTrim(e,n,i));return a},_textWrapByLength:function(e,t,i){for(var s,n=0,a=[],r=(t=t.toString()).length,o=0;o<=r;o++)s=0==n?t.slice(n,o):"-"+t.slice(n,o),ej.EjSvgRender.utils._measureText(s,this.model.m_AreaBounds.Width,i).width>e-5?(a.push(s),n=o++):o===r&&a.push(s);return a},_multipleRows:function(e,t,i,s){for(var n,a,r=[],o=e-1;0<=o;o--)n=s.visibleLabels[o],a=ej.EjSvgRender.utils._measureText(n.Text,this.model.m_AreaBounds.Width,s.font),t<ej.EjSvgRender.utils._valueToCoefficient(s,o)*s.width+s.x+a.width/2?(n.index=n.index||0,r.push(n.index),i.index=i.index>n.index?i.index:n.index+1):i.index=(-1<r.indexOf(n.index)?i:n).index},_drawAxisLabel:function(e,t){for(var i=[],s=null,n=e.visibleLabels.length,a=this.model.m_AreaBounds,r=e._opposed,t=t.axes[e.name]._validCross,o=t?e.y:a.Y+(!r&&a.Height),l=t?e.x:a.X+(r&&a.Width),d=0;d<n;d++)if(!ej.util.isNullOrUndefined(e.visibleLabels[d].Text)){var h,c,u=0,p=0;e.visibleLabels[d].originalText=e.visibleLabels[d].Text;var m=ej.EjSvgRender.utils._measureText(e.visibleLabels[d].Text,this.model.m_AreaBounds.Width,e.font),g=(e.visibleLabels[d].Value-e.visibleRange.min)/e.visibleRange.delta,g=e.isInversed?1-g:g;g=isNaN(g)?0:g,c="horizontal"==e.orientation.toLowerCase()?(u=Math.round(e.width*g)+this.model.m_AreaBounds.X+e.plotOffset,p=r?o-this.model.wallSize-e.majorTickLines.size-this.model.elementSpacing/2:o+this.model.wallSize+e.majorTickLines.size+this.model.elementSpacing,"middle"):(p=Math.round(e.plotOffset+e.y+m.height/4+e.height*(1-g)),u=r?e.x+e.majorTickLines.size+e.axisLine.width+this.model.elementSpacing/2:l-this.model.wallSize-e.majorTickLines.size-this.model.elementSpacing/2,r?"start":"end"),i.push({x:u,y:p,size:m});var f=e.width/e.visibleLabels.length-5,g=i[d];if((g.x-g.size.width/2<e.x&&0===d||g.x+g.size.width/2>e.x+e.width&&d===e.visibleLabels.length-1)&&"trim"!=e.labelIntersectAction&&e.labelIntersectAction.indexOf("wrap")<0){if("hide"===e.edgeLabelPlacement)continue;"shift"===e.edgeLabelPlacement&&(0==d?g.x=u=e.x+g.size.width/2:d==e.visibleLabels.length-1&&(g.x=u=e.x+e.width-g.size.width/2))}if("horizontal"==e.orientation.toLowerCase())if(e.labelRotation){s=e.labelRotation;p+=ej.EjSvgRender.utils.rotatedLabel(e,this,e.labelRotation,e.visibleLabels[d].Text,!0).height/2}else if("trim"==e.labelIntersectAction)e.visibleLabels[d].Text=this._textTrim(f,e.visibleLabels[d].Text,e.font);else if("wrapByWord"==e.labelIntersectAction)e.visibleLabels[d].Text=this._textWrap(f,e.visibleLabels[d].Text,e.font);else if("wrap"==e.labelIntersectAction)e.visibleLabels[d].Text=this._textWrapByLength(f,e.visibleLabels[d].Text,e.font);else if("rotate45"==e.labelIntersectAction||"rotate90"==e.labelIntersectAction)s=-1<e.labelIntersectAction.indexOf("45")?45:90,p+=ej.EjSvgRender.utils.rotatedLabel(e,this,s,e.visibleLabels[d].Text,!0).height/2;else if("multipleRows"===e.labelIntersectAction)g=g.x,g-=m.width/2,this._multipleRows(d,g,e.visibleLabels[d],e),p=e.visibleLabels[d].index?p+e.visibleLabels[d].index*(m.height+5):p;else if("hide"===e.labelIntersectAction){if(h=h||0,0!=d&&i[h].x+i[h].size.width/2>=i[d].x-i[d].size.width/2)continue;h=d}c={Width:m.width,Height:m.height,Label:e.visibleLabels[d],TextAnchor:c,tag:"text",font:e.font,id:this.svgObject.id+e.orientation+d,child:this.chart3D,Angle:s},this.graphics.addVisual(this.polygon.createTextElement(this.vector.vector3D(u,p,0),c,10,10))}},_renderTicks3D:function(e,t,i,s){for(var n,a=e.visibleLabels.length,r=this.model.m_AreaBounds,o=(e.y,0);o<a;o++){var l=0,d=0,h=0,c=0,u=(e.visibleLabels[o].Value-e.visibleRange.min)/e.visibleRange.delta,u=e.isInversed?1-u:u;u=isNaN(u)?0:u,"horizontal"==e.orientation.toLowerCase()?d=l=Math.round(e.width*u)+r.X+e.plotOffset:h=c=Math.round(e.plotOffset+e.height*(1-u)+e.y);var p=this._calculatePosition3D(e,e.tickLinesPosition,t,i,l,h,d,c,s);if((g={width:e.majorTickLines.width,stroke:e.majorTickLines.color,child:this.chart3D,tag:"line"}).id=this.svgObject.id+e.name+"_majorTickLines_"+o,this.graphics.addVisual(this.polygon.createLine(g,p.X1,p.Y1,p.X2,p.Y2,0)),e.minorGridLines.visible&&0<e.minorTicksPerInterval&&o<a-1){n=e.visibleRange.interval/(e.minorTicksPerInterval+1);for(var m=0;m<e.minorTicksPerInterval;m++){u=ej.EjSvgRender.utils._valueToCoefficient(e,e.visibleLabels[o].Value+n*(m+1)),u=isNaN(u)?0:u,"horizontal"==e.orientation.toLowerCase()?l=d=Math.round(e.plotOffset+r.Width*u+r.X):h=c=Math.round(e.plotOffset+r.Height*(1-u))+e.y;var g,p=this._calculatePosition3D(e,e.tickLinesPosition,t,i,l,h,d,c,s);(g={width:e.minorTickLines.width,stroke:e.minorTickLines.color,child:this.chart3D,tag:"line"}).id=this.svgObject.id+e.name+"_minorTickLines_"+o+m,this.graphics.addVisual(this.polygon.createLine(g,p.X1,p.Y1,p.X2,p.Y2,0))}}}},_calculatePosition3D:function(e,t,i,s,n,a,r,o,l){e.orientation;var d,h,c=e._opposed,u=this.model.m_AreaBounds,p=l.axes[e.name]._validCross,l=p?e.y:u.Y+(!c&&u.Height),u=p?e.x:u.X+(c&&u.Width);return"horizontal"==e.orientation.toLowerCase()?(a=0,o=c?i:a+i,h=c?l-this.model.wallSize-i:l+this.model.wallSize-i/2,d=e.x,a+=h,o+=h,n=r=n):(n=0,r=c?n+i:i,d=c?u+this.model.wallSize:u-this.model.wallSize-i,h=this.model.m_AreaBounds.Y,n+=d,r+=d,a=o=a),{X1:n,Y1:a,X2:r,Y2:o}},_drawGridLines3D:function(e,t){if(null!=e){var i,s,n,a,r,o,l=e.visibleLabels.length,d=e._opposed,h=e.orientation,c=t.axes[e.name]._validCross;if("horizontal"==h.toLowerCase())for(o=0;o<l;o++){var u=ej.EjSvgRender.utils._valueToCoefficient(e,e.visibleLabels[o].Value);u=isNaN(u)?0:u,n=s=Math.round(e.width*u)+this.model.m_AreaBounds.X+e.plotOffset,a=this.model.m_AreaBounds.Y,r=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height;var p=2<this.model.depth?this.model.depth-2:1,m=c?e.y:this.model.m_AreaBounds.Y+(!d&&this.model.m_AreaBounds.Height);(b={opacity:e.majorGridLines.opacity,width:e.majorGridLines.width,stroke:e.majorGridLines.color,child:this.chart3D,tag:"line"}).id=this.svgObject.id+e.name+"_gridlines_"+o,this.graphics.addVisual(this.polygon.createLine(b,s,a,n,r,p)),(f=Q.extend({},b)).id=this.svgObject.id+e.name+"_parallelGridlines_"+o;var g=this.polygon.createLine(f,n,0,n,-p,m);if(this.polygon.transform(this.matrixobj.tilt(parseFloat(Math.PI/2)),g),this.graphics.addVisual(g),e.minorGridLines.visible&&0<e.minorTicksPerInterval&&o<l-1){i=e.visibleRange.interval/(e.minorTicksPerInterval+1);for(var f,_=0;_<e.minorTicksPerInterval;_++){u=ej.EjSvgRender.utils._valueToCoefficient(e,e.visibleLabels[o].Value+i*(_+1)),u=isNaN(u)?0:u,n=s=Math.round(this.model.m_AreaBounds.Width*u)+this.model.m_AreaBounds.X,a=this.model.m_AreaBounds.Y,r=this.model.m_AreaBounds.Y+this.model.m_AreaBounds.Height,(b={opacity:e.minorGridLines.opacity,width:e.minorGridLines.width,stroke:e.minorGridLines.color,child:this.chart3D,tag:"line"}).id=this.svgObject.id+e.name+"_minorgridlines_"+o+_,this.graphics.addVisual(this.polygon.createLine(b,s,a,n,r,p)),(f=Q.extend({},b)).id=this.svgObject.id+e.name+"_parallelMinorGridlines_"+o+_;g=this.polygon.createLine(f,n,0,n,-p,m);this.polygon.transform(this.matrixobj.tilt(parseFloat(Math.PI/2)),g),this.graphics.addVisual(g)}}0}else for(o=0;o<l;o++){u=(e.visibleLabels[o].Value-e.visibleRange.min)/e.visibleRange.delta;u=e.isInversed?1-u:u,u=isNaN(u)?0:u,s=this.model.m_AreaBounds.X,a=Math.round(e.height*(1-u))+.5,a+=e.y,n=s+this.model.m_AreaBounds.Width,r=a;p=2<this.model.depth?this.model.depth-2:1;(b={opacity:e.majorGridLines.opacity,width:e.majorGridLines.width,stroke:e.majorGridLines.color,axisName:e.name,child:this.chart3D,tag:"line"}).id=this.svgObject.id+e.name+"_gridlines_"+o,this.graphics.addVisual(this.polygon.createLine(b,s,a,n,r,p));var v=c?e.x:this.model.m_AreaBounds.X+(d&&this.model.m_AreaBounds.Width+1);(x=Q.extend({},b)).id=this.svgObject.id+e.name+"_parallelGridlines_"+o;g=this.polygon.createLine(x,-p,r,0,r,v);if(this.polygon.transform(this.matrixobj.turn(parseFloat(-Math.PI/2)),g),this.graphics.addVisual(g),e.minorGridLines.visible&&0<e.minorTicksPerInterval&&o<l-1){i=e.visibleRange.interval/(e.minorTicksPerInterval+1);for(_=0;_<e.minorTicksPerInterval;_++){var b,x,u=ej.EjSvgRender.utils._valueToCoefficient(e,e.visibleLabels[o].Value+i*(_+1));u=isNaN(u)?0:u,s=this.model.m_AreaBounds.X,a=Math.round(e.height*(1-u))+.5,a+=e.y,n=s+this.model.m_AreaBounds.Width,r=a,(b={opacity:e.minorGridLines.opacity,width:e.minorGridLines.width,stroke:e.minorGridLines.color,axisName:e.name,child:this.chart3D,tag:"line"}).id=this.svgObject.id+e.name+"_minorgridlines_"+o+_,this.graphics.addVisual(this.polygon.createLine(b,s,a,n,r,p)),(x=Q.extend({},b)).id=this.svgObject.id+e.name+"_parallelMinorGridlines_"+o+_;g=this.polygon.createLine(x,-p,r,0,r,v);this.polygon.transform(this.matrixobj.turn(parseFloat(-Math.PI/2)),g),this.graphics.addVisual(g)}}0}}}},ej.Ej3DSeriesRender.prototype={_getSegmentDepth:function(e){var t,i,s,n=this.chartObj.model.depth;return s=this.chartObj.model._sideBySideSeriesPlacement?(t=s=n/4,3*s):(i=e.position-1,(t=(s=n/(2*(e=e.all)+e+1))+s*i*3)+2*s),{Start:t,End:s,Delta:s-t}},createSegment:function(e,t,i,s,n,a,r,o,l){return{StartValue:t,EndValue:i,depth:s,radius:n,index:a,YData:r,Center:e,inSideRadius:o,ActualEndValue:i,ActualStartValue:t,pointIndex:l}},calculateSize:function(e,t){var i,s=e.chartObj.model.legend,n=0,a=0,r=e.chartObj.model.title,o=e.chartObj.model.title.subTitle,l=e.chartObj.model._titleLocation,d=e.chartObj.model._subTitleLocation,h=e.chartObj.model.title.textOverflow,c=e.chartObj.model.title.subTitle.textOverflow,h=!(!(r.text&&r.visible&&r.enableTrim)||"wrap"!=h&&"wrapandtrim"!=h),c=!(!(o.text&&o.visible&&o.enableTrim)||"wrap"!=c&&"wrapandtrim"!=c);return s.visible&&"custom"!=s.position.toLowerCase()&&("right"==s.position.toLowerCase()||"left"==s.position.toLowerCase()?n=("right"==s.position.toLowerCase()?e.chartObj.model.margin.right:e.chartObj.model.margin.left)+e.chartObj.model.LegendViewerBounds.Width:a=("top"==s.position.toLowerCase()?e.chartObj.model.margin.top:e.chartObj.model.margin.bottom)+e.chartObj.model.LegendViewerBounds.Height),t.actualWidth=Q(e.chartObj.svgObject).width()-n,{centerX:.5*t.actualWidth+("left"===s.position.toLowerCase()?n:0),centerY:h||c?(i=l.size.height+(c?d.size.height:0)+a,t.actualHeight=Q(e.chartObj.svgObject).height()-i,.5*t.actualHeight+("top"===s.position.toLowerCase()?i:l.size.height+(c?d.size.height:0))):(i=(r.text&&r.visible?l.Y:0)+a,t.actualHeight=Q(e.chartObj.svgObject).height()-i,.5*t.actualHeight+("top"===s.position.toLowerCase()?i:r.text&&r.visible?l.Y:0))}},createPoints:function(e,t){e.segments=[];for(var i=this.calculateSize(t,e),s=0,n=this._calculateVisiblePoints(e).visiblePoints,a=e._visiblePoints.length,r=0;r<a;r++)s+=n[r].YValues[0];for(var o,l,d,h,c,u=360/(s=0!=s?s:1),p=Q.inArray(e,t.chartObj.model._visibleSeries),m=(this.chartObj.model._visibleSeries.length,t.chartObj.model.innerRadius[p]),g=t.chartObj._getYValues(e._visiblePoints),f=t.chartObj.model.depth,_=0,v=0,b=0,x=t.chartObj.model.circularRadius[p],y=0;y<a;y++)(e._visiblePoints[y].visible||e._visiblePoints[y].gapMode)&&(c=Q.inArray(e._visiblePoints[y],e._visiblePoints),l=Math.abs(g[y]),o=Math.abs(l)*(2*Math.PI/s),d={x:0,y:0},ej.util.isNullOrUndefined(l)||(e.explodeIndex!=e._visiblePoints[y].actualIndex&&!e.explodeAll||((h={X:0,Y:0}).X=Math.cos(2*Math.PI*(v+l/2)/s),h.Y=Math.sin(2*Math.PI*(v+l/2)/s),d.x=.01*x*h.X*e.explodeOffset,d.y=.01*x*h.Y*e.explodeOffset),h=t.chartObj.vector.vector3D(d.x+i.centerX,d.y+i.centerY,0),c=this.createSegment(h,parseFloat(u*v),parseFloat(u*l),f,x,y,l,m,c,e),e._visiblePoints[y].gapMode?c.visible=!1:c.visible=!0,e.segments.push(c)),e.marker.dataLabel.visible&&this._addPieDataLabel(b,g[y],_,_+o,y,x,this._isChartRotated(t)?t.chartObj.model.depth+5:0,h,e._visiblePoints[y]),b++,_+=o,v+=l);return e.segments},_addPieDataLabel:function(e,t,i,s,n,a,r,o,l){s=(i+s)/2;l.symbolLocation={x:0,y:0,radius:0,angle:0,StartDepth:0},l.symbolLocation.x=e,l.symbolLocation.y=t,l.symbolLocation.radius=a,l.symbolLocation.angle=s,l.symbolLocation.center=o,l.startDepth=r},_isChartRotated:function(e){var t=Math.abs(e.chartObj.model.tilt%360),e=Math.abs(e.chartObj.model.rotattion%360);return!!((90<t&&t<270)^(90<e&&e<270))},createSector:function(e,t,i,s){var n=parseInt(Math.ceil(e.ActualEndValue/6)),a=Math.PI/180,r=0,o=[],l=t.chartObj.model.depth;if(n<1)return null;for(var d=[],h=e.ActualEndValue/n,c=[],u=[],p=0;p<n+1;p++){var m=parseFloat(e.Center.x+e.radius*Math.cos((e.ActualStartValue+p*h)*a)),g=parseFloat(e.Center.y+e.radius*Math.sin((e.ActualStartValue+p*h)*a));c[p]={X:m,Y:g};var f=parseFloat(e.Center.x+e.inSideRadius*Math.cos((e.ActualStartValue+p*h)*a)),_=parseFloat(e.Center.y+e.inSideRadius*Math.sin((e.ActualStartValue+p*h)*a));u[p]={X:f,Y:_},o.push({X:m,Y:g})}for(var v,b=[],p=0;p<n;p++)v=new Array(t.chartObj.vector.vector3D(c[p].X,c[p].Y,0),t.chartObj.vector.vector3D(c[p].X,c[p].Y,l),t.chartObj.vector.vector3D(c[p+1].X,c[p+1].Y,l),t.chartObj.vector.vector3D(c[p+1].X,c[p+1].Y,0)),b[p]=t.chartObj.polygon.polygon3D(v,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,r.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D),r++;if(d[1]=b,0<e.inSideRadius){for(var x=[],p=0;p<n;p++)v=new Array(t.chartObj.vector.vector3D(u[p].X,u[p].Y,0),t.chartObj.vector.vector3D(u[p].X,u[p].Y,l),t.chartObj.vector.vector3D(u[p+1].X,u[p+1].Y,l),t.chartObj.vector.vector3D(u[p+1].X,u[p+1].Y,0)),x[p]=t.chartObj.polygon.polygon3D(v,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,r.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D),r++;d[3]=x}for(var y,w,C=[],S=[],p=0;p<n+1;p++)C.push(t.chartObj.vector.vector3D(c[p].X,c[p].Y,0)),S.push(t.chartObj.vector.vector3D(c[p].X,c[p].Y,l));if(0<e.inSideRadius)for(p=n;-1<p;p--)C.push(t.chartObj.vector.vector3D(u[p].X,u[p].Y,0)),S.push(t.chartObj.vector.vector3D(u[p].X,u[p].Y,l));else C.push(e.Center),S.push(t.chartObj.vector.vector3D(e.Center.x,e.Center.y,l));return d[0]=[],d[0].push(t.chartObj.polygon.polygon3D(C,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,r.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D)),r++,d[0].push(t.chartObj.polygon.polygon3D(S,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,r.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D)),r++,w=0<e.inSideRadius?(y=new Array(t.chartObj.vector.vector3D(c[0].X,c[0].Y,0),t.chartObj.vector.vector3D(c[0].X,c[0].Y,l),t.chartObj.vector.vector3D(u[0].X,u[0].Y,l),t.chartObj.vector.vector3D(u[0].X,u[0].Y,0)),new Array(t.chartObj.vector.vector3D(c[n].X,c[n].Y,0),t.chartObj.vector.vector3D(c[n].X,c[n].Y,l),t.chartObj.vector.vector3D(u[n].X,u[n].Y,l),t.chartObj.vector.vector3D(u[n].X,u[n].Y,0))):(y=new Array(t.chartObj.vector.vector3D(c[0].X,c[0].Y,0),t.chartObj.vector.vector3D(c[0].X,c[0].Y,l),t.chartObj.vector.vector3D(e.Center.x,e.Center.y,l),t.chartObj.vector.vector3D(e.Center.x,e.Center.y,0)),new Array(t.chartObj.vector.vector3D(c[n].X,c[n].Y,0),t.chartObj.vector.vector3D(c[n].X,c[n].Y,l),t.chartObj.vector.vector3D(e.Center.x,e.Center.y,l),t.chartObj.vector.vector3D(e.Center.x,e.Center.y,0))),d[2]=[],d[2].push(t.chartObj.polygon.polygon3D(y,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,r.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D)),r++,d[2].push(t.chartObj.polygon.polygon3D(w,this,e.index,i.borderColor,i.borderWidth,i.opacity,i.interior,r.toString()+"_Region_Series_"+s+"_Point_"+e.index,t.chartObj.chart3D)),r++,d},createPolygons:function(e,t,i){for(var s,n,a,r,o=[],l=Q.inArray(e,t.chartObj.model._visibleSeries),d=e.segments&&i?e.segments:this.createPoints(e,t),h=d.length,c=0;c<h;c++)if(s=d[c],s.visible&&(a=d[c].pointIndex,n=t.chartObj.setStyle(t,e,l,a),"object"==typeof t.chartObj.model.pointColors[a]&&(n.interior=t.chartObj.model.pointColors[a][0].color),null!=(r=this.createSector(s,t,n,l))))for(var u=0;u<r.length;u++)if(o[u]||(o[u]=[]),null!=r[u])for(var p=0;p<r[u].length;p++)o[u].push(r[u][p]);if(i)return o;for(u=0;u<o.length;u++)for(var m=0;m<o[u].length;m++)t.chartObj.graphics.addVisual(o[u][m])},draw3DDataLabel:function(e,t,i,s){var n,a,r,o,l,d,h,c,u=e.marker.dataLabel.connectorLine.height,p=0,m=0;m="number"==typeof e.marker.dataLabel.offset?e.marker.dataLabel.offset:(p=e.marker.dataLabel.offset.x,e.marker.dataLabel.offset.y),"none"==this.chartObj.model.AreaType?(d={x:0,y:0},a=i.text||i.y,g=Q.inArray(e,this.chartObj.model.series),"doughnut"!=e.type.toLowerCase()&&"pie"!=e.type.toLowerCase()||(Math.min(e.actualWidth,e.actualHeight),l=i.symbolLocation.center,p=e.marker.dataLabel.offset.x,m=e.marker.dataLabel.offset.y,o=i.symbolLocation.radius*e._coefficient,ej.util.isNullOrUndefined(u)&&(u=ej.EjSvgRender.utils._measureText(a,null,e.marker.dataLabel.font).height),null!=e&&"inside"!=e.labelPosition?n=i.symbolLocation.radius+u:null!=e&&(n=o+(i.symbolLocation.radius-o)/2),c=d.X=l.x+n*Math.cos(i.symbolLocation.angle)+p,h=d.Y=l.y+n*Math.sin(i.symbolLocation.angle)+m,(o=Q.extend({},ej.EjSvgRender.commonChartEventArgs)).data={text:a,location:{x:c,y:h},series:e,pointIndex:t,seriesIndex:g},this.chartObj._trigger("displayTextRendering",o),o.data.Text=o.data.text,l=ej.EjSvgRender.utils._measureText(o.data.Text,null,e.marker.dataLabel.font),c=d.X=o.data.location.x,h=d.Y=o.data.location.y)):(r=e.yAxis.labelFormat||"",g=Q.inArray(e,this.chartObj.model.series),a=i.text||i.y,r&&(a=-1<r.indexOf("{value}")?r.replace("{value}",i.y):0==r.indexOf("e")||0==r.indexOf("E")?(n=null==(n=r.match(/(\d+)/g))?6:20<n?20:n,i.y.toExponential(n)):ej.globalize.format(i.y,r,this.chartObj.model.locale)),r=0,o=Q.extend({},ej.EjSvgRender.commonChartEventArgs),l=ej.EjSvgRender.utils._measureText(a,null,e.marker.dataLabel.font),d=ej.EjSvgRender.utils.Transform3DToVisible(e,i.symbolLocation.x,i.symbolLocation.y,this.chartObj),u=e.marker.dataLabel.connectorLine.height||0,h=d.Y,c=d.X,this.chartObj.model.requireInvertedAxes?(c=0<i.x?d.X-Math.sin(4.71)*u:d.X+Math.sin(4.71)*u,r=-l.height/3):h=0<i.y?d.Y+Math.sin(4.71)*u:d.Y+Math.sin(-4.71)*u,h="bottom"==e.marker.dataLabel.textPosition?d.Y+m:d.Y-m,c=d.X+p,o.data={text:a,location:{x:c,y:h},series:e,pointIndex:t},o.data.Text=o.data.text,this.chartObj._trigger("displayTextRendering",o),c=o.data.location.x,h=o.data.location.y);this._getSegmentDepth(e);"none"==e.marker.dataLabel.shape.toLowerCase()||i.marker.dataLabel.template||""==o.data.Text||(f={tag:"dataLabel",series:e,point:i,pointIndex:t,id:this.chartObj.svgObject.id+g+"_DataLabel"+t,child:this.chartObj.chart3D},this.chartObj.graphics.addVisual(this.chartObj.polygon.createTextElement(this.chartObj.vector.vector3D(c,h,i.symbolLocation.z||0),f,0,-l.height))),a=i.marker.dataLabel.template?"template":"text";var g,f={Width:l.width,Height:l.height,Label:o.data,TextAnchor:"middle",tag:a,font:e.marker.dataLabel.font,Angle:e.marker.dataLabel.angle,id:this.chartObj.svgObject.id+"_SeriesText"+t+g,child:this.chartObj.chart3D};"none"!=this.chartObj.model.AreaType?(e.marker.dataLabel.connectorLine.height&&0<e.marker.dataLabel.connectorLine.height&&((g=[]).push({x:d.X,y:d.Y+r,z:i.symbolLocation.z}),g.push({x:c,y:h+r,z:i.symbolLocation.z}),this.drawLineSegment(g,t,e)),this.chartObj.graphics.addVisual(this.chartObj.polygon.createTextElement(this.chartObj.vector.vector3D(c,h,i.symbolLocation.z),f,0,-l.height))):("inside"!=e.labelPosition.toLowerCase()&&this.updateConnectorLine(i,t,e,d,u),e.actualWidth,e.actualHeight,this.chartObj.graphics.addVisual(this.chartObj.polygon.createTextElement(this.chartObj.vector.vector3D(d.X,d.Y,-1),f,0,-l.height)))},updateConnectorLine:function(e,t,i,s,n){var a=[],r=e.symbolLocation,o=r.center.x+Math.cos(r.angle)*r.radius,e=r.center.y+Math.sin(r.angle)*r.radius;a.push({x:o,y:e});n=r.radius+n,o=r.center.x+Math.cos(r.angle)*n,e=r.center.y+Math.sin(r.angle)*n;a.push({x:o,y:e}),"bezier"==i.marker.dataLabel.connectorLine.type&&(a=this.getBezierApproximation(a,256,i)),this.drawLineSegment(a,t,i)},getBezierApproximation:function(e,t,i){for(var s=[],n=0;n<=t;n++){var a=n/t;s.push(this.GetBezierPoint(a,e,0,e.length,i))}return s},drawLineSegment:function(e,t,i){for(var s=[],n=0;n<e.length;n++)s.push(this.chartObj.vector.vector3D(e[n].x,e[n].y,e[n].z||0));var a=Q.inArray(i,this.chartObj.model._visibleSeries),r="none"==this.chartObj.model.AreaType?this.chartObj.model.pointColors[t]:this.chartObj.model.seriesColors[a],r=i.marker.dataLabel.connectorLine.stroke||r,t={width:i.marker.dataLabel.connectorLine.width,stroke:r,child:this.chartObj.chart3D,tag:"polyline",id:this.chartObj.svgObject.id+"_"+a+"_"+t};this.chartObj.graphics.addVisual(this.chartObj.polygon.createPolyline(s,t))}},ej.ejCircularSeries={draw:function(e,t,i){t.chartObj.model._visibleSeries.length;var s=Q.inArray(e,t.chartObj.model._visibleSeries);if(t._calculateVisiblePoints(e),t.calculateSize(t,e),"pie"==i?(e._size=e.pieCoefficient,e._coefficient=0==s?0:e._size):(e._size=e.doughnutSize,e._coefficient=e.doughnutCoefficient),1<t.chartObj.model.circularRadius.length){for(var n=s;n<t.chartObj.model.circularRadius.length;n++)if(!ej.util.isNullOrUndefined(t.chartObj.model.circularRadius[n])){t.chartObj.model.circularRadius[s]=t.chartObj.model.circularRadius[n]*e._size;break}}else t.chartObj.model.circularRadius[s]=.97*Math.min(e.actualWidth/2,e.actualHeight/2)*e._size;t.chartObj.model.innerRadius[s]=e._coefficient*t.chartObj.model.circularRadius[s],t.createPolygons(e,t)},doAnimation:function(r,o){r.count=0,Q.each(r.segments,function(e,a){var t=a.radius,i=a.inSideRadius;r.animate=!0,Q(o.chartObj.element).each(function(){a.radius=0,a.inSideRadius=0}).animate({Radius:t,InsideRadius:i},{duration:1e3,queue:!1,step:function(e,t){"Radius"===t.prop.toString()?a.radius=e:a.inSideRadius=e;for(var i=o.createPolygons(r,o,!0),s=0;s<i.length;s++)for(var n=0;n<i[s].length;n++)o.chartObj.polygon.update(i[s][n].VectorPoints,i[s][n],o)},complete:function(){o.chartObj.model.AnimationComplete=!0;var e=Q.extend({},ej.EjSvgRender.commonChartEventArgs);e.data={series:r},o.chartObj._trigger("animationComplete",e)}})})}},ej.series3DTypes.doughnut=ej.ejCircularSeries,ej.series3DTypes.pie=ej.ejCircularSeries,ej.ej3DStackingColumn={draw:function(e,t,i,s){var n=t._isVisiblePoints(e);this.createSegments(e,t,s);for(var a=0;a<n.length;a++)n[a].visible&&(e._visiblePoints[a].plans=null,ej.ej3DColumnSeries.update(e,e._visiblePoints[a],a,t))},createSegments:function(e,t,i){var s=t.chartObj._getXValues(e._visiblePoints);if(null!=s)for(var n=t.getSideBySideInfo(e,i),a=t._getSegmentDepth(e),r=n.Delta/2,o=t._isVisiblePoints(e),l=0;l<o.length;l++){var d=s[l]+n.Start,h=s[l]+n.End,c=e.stackedValue.StartValues[l],u=e.stackedValue.EndValues[l];if(ej.ej3DColumnSeries._setData(d,u,h,c,a.Start,a.End,t,o[l]),e.marker.dataLabel.visible)switch(o[l].symbolLocation={x:0,y:0,z:0},e.marker.dataLabel.textPosition){case"top":o[l].symbolLocation.x=d+r,o[l].symbolLocation.y=u,o[l].symbolLocation.z=a.Start+a.Delta/2;break;case"bottom":o[l].symbolLocation.x=d+r,o[l].symbolLocation.y=c-.2,o[l].symbolLocation.z=a.Start+(a.End-a.Start)/2;break;default:o[l].symbolLocation.x=d+r,o[l].symbolLocation.y=u+(c-u)/2,o[l].symbolLocation.z=a.Start}}},doAnimation:function(n,a){Q.each(n._visiblePoints,function(i,s){var e=s.Top,t=s.Bottom;Q(s).each(function(){s.Top=0,s.Bottom=0}).animate({Top:e,Bottom:t},{duration:1200,queue:!1,step:function(e,t){"Top"===t.prop.toString()&&(s.Top=e),"Bottom"===t.prop.toString()&&(s.Bottom=e),ej.ej3DColumnSeries.update(n,s,i,a)},complete:function(){a.chartObj.model.AnimationComplete=!0;var e=Q.extend({},ej.EjSvgRender.commonChartEventArgs);e.data={series:n},a.chartObj._trigger("animationComplete",e)}})})}},ej.series3DTypes.stackingcolumn=ej.ej3DStackingColumn,ej.series3DTypes.stackingbar=ej.ej3DStackingColumn,ej.series3DTypes.stackingbar100=ej.ej3DStackingColumn,ej.series3DTypes.stackingcolumn100=ej.ej3DStackingColumn,ej.ej3DColumnSeries={draw:function(e,t,i,s){var n=t._isVisiblePoints(e);this.createSegments(e,t,s);for(var a=0;a<n.length;a++)n[a].visible&&(e._visiblePoints[a].plans=null,this.update(e,e._visiblePoints[a],a,t))},update:function(e,t,i,s){var n=e.xAxis._valueType.toLowerCase(),a=Q.inArray(e,s.chartObj.model._visibleSeries),r="logarithmic"==n?null:1,o="logarithmic"==n,l=o?Math.log(t.Left,r):t.Left,d=o?Math.log(t.Right,r):t.Right,h=e.yAxis.visibleRange.min,n=e.yAxis.visibleRange.max,o=e.xAxis.visibleRange.min,r=e.xAxis.visibleRange.max;(o<=l&&l<=r||o<=d&&d<=r)&&(n=t.Top<0?t.Top>h?t.Top:h:e.yAxis.valueType&&"logarithmic"==e.yAxis.valueType.toLowerCase()||t.Top<n?t.Top:n,n=ej.EjSvgRender.utils.Transform3DToVisible(e,t.Left>o?t.Left:o,n,s.chartObj),r=ej.EjSvgRender.utils.Transform3DToVisible(e,r>t.Right?t.Right:r,h>t.Bottom?h:t.Bottom,s.chartObj),h=s.chartObj.vector.vector3D(Math.min(n.X,r.X),Math.min(n.Y,r.Y),t.StartDepth),r=s.chartObj.vector.vector3D(Math.max(n.X,r.X),Math.max(n.Y,r.Y),t.EndDepth),0<=(t=s.chartObj.setStyle(s,e,a,i)).interior.indexOf("url")&&(t.interior=s.chartObj.model.seriesColors[a][0].color),a="Region_Series_"+a+"_Point_"+i,"cylinder"==e.columnFacet?s.chartObj.polygon.createCylinder(h,r,this,i,e.type,t.borderColor,t.interior,t.borderWidth,t.opacity,s.chartObj.model.requireInvertedAxes,a,s.chartObj.chart3D):"rectangle"==e.columnFacet&&s.chartObj.polygon.createBox(h,r,this,i,e.type,t.borderColor,t.interior,t.borderWidth,t.opacity,s.chartObj.model.requireInvertedAxes,a,s.chartObj.chart3D))},_setData:function(){var e=arguments,t=arguments[arguments.length-1],i=arguments[arguments.length-2];t.Left=e[0],t.Bottom=e[3],t.Top=e[1],t.Right=e[2],t.StartDepth=e[4],t.EndDepth=e[5],t.XRange=i.getDoubleRange(t.Left,t.Right),isNaN(t.Top)||isNaN(t.Bottom)||(t.YRange=i.getDoubleRange(t.Top,t.Bottom))},createSegments:function(e,t,i){var s=t.chartObj._getXValues(e._visiblePoints),n=t.chartObj._getYValues(e._visiblePoints);if(null!=s)for(var a=t.getSideBySideInfo(e,i),r=t._getSegmentDepth(e),o=t.chartObj._getXCrossValue(e,e.xAxis,i),l=a.Delta/2,d=e._visiblePoints,h=0;h<d.length;h++){var c=s[h]+a.Start,u=s[h]+a.End,p=n[h],m=o;if(this._setData(c,p,u,m,r.Start,r.End,t,d[h]),s[h],n[h],e.marker.dataLabel.visible)switch(d[h].symbolLocation={x:0,y:0,z:0},e.marker.dataLabel.textPosition){case"top":d[h].symbolLocation.x=c+l,d[h].symbolLocation.y=p,d[h].symbolLocation.z=r.Start;break;case"bottom":d[h].symbolLocation.x=c+l,d[h].symbolLocation.y=m-.2,d[h].symbolLocation.z=r.Start+(r.End-r.Start)/2;break;default:d[h].symbolLocation.x=c+l,d[h].symbolLocation.y=Math.abs(m-p)/2,d[h].symbolLocation.z=r.Start}}},doAnimation:function(n,a){var r=this;Q.each(n._visiblePoints,function(i,s){var e=s.Top;Q(s).each(function(){s.Top=0}).animate({Top:e},{duration:1200,queue:!1,step:function(e,t){"Top"===t.prop.toString()&&(s.Top=e),r.update(n,s,i,a)},complete:function(){a.chartObj.model.AnimationComplete=!0;var e=Q.extend({},ej.EjSvgRender.commonChartEventArgs);e.data={series:n},a.chartObj._trigger("animationComplete",e)}})})}},ej.series3DTypes.column=ej.ej3DColumnSeries,ej.series3DTypes.bar=ej.ej3DColumnSeries,ej.Ej3DChart.prototype={renderSeries:function(i,s,e){ej.Ej3DSeriesRender.prototype.chartObj=i,Q.extend(ej.Ej3DSeriesRender.prototype,ej.EjSeriesRender.prototype);var n=new ej.Ej3DSeriesRender,t=Q.extend({},ej.EjSvgRender.commonChartEventArgs);t.data={series:s},n.chartObj._trigger("seriesRendering",t);var a=s.type.toLowerCase(),t=ej.series3DTypes[a];ej.util.isNullOrUndefined(t)||(t.draw(s,n,a,e),s.marker.dataLabel.visible&&Q.each(s._visiblePoints,function(e,t){t.marker=Q.extend(!0,{},s.marker,t.marker),t.visible&&(ej.util.isNullOrUndefined(t.marker)||t.marker.dataLabel&&t.marker.dataLabel.visible)&&n.draw3DDataLabel(s,e,t,i)}))},update3DWall:function(e,t){if("cartesianaxes"==e.model.AreaType){Q.extend(ej.Ej3DRender.prototype,this),this.updateBackWall(e);for(var i=0;i<e.model._axes.length;i++){var s=e.model._axes[i],n=s._opposed;"vertical"==s.orientation.toLowerCase()?n?this.updateRightWall(e,s,t):this.updateLeftWall(e,s,t):n?this.updateTopWall(e,s,t):this.updateBottomWall(e,s,t)}}},updateTopWall:function(e,t,i){for(var s=0,n=e.model.m_AreaBounds,t=i.axes[t.name]._validCross?t.y:n.Y,s=e.model.wallSize<t?t-e.model.wallSize:-(e.model.wallSize-t),t=e.vector.vector3D(n.X+n.Width,-e.model.depth,t-.1),s=e.vector.vector3D(n.X,-.1,s),a=e.polygon.createBox(t,s,this,0,"Graphics3D","#e2e1e1","#e2e1e1",0,.15,!1,"TopWallBrush",e.chart3D),r=0;r<a.length;r++)e.polygon.transform(e.matrixobj.tilt(parseFloat(Math.PI/2)),a[r])},updateRightWall:function(e,t,i){for(var s=i.axes[t.name]._validCross?t.x:e.model.m_AreaBounds.X+e.model.m_AreaBounds.Width,i={left:-e.model.depth,top:e.model.m_AreaBounds.Y,bottom:e.model.m_AreaBounds.Height+e.model.m_AreaBounds.Y,right:0},t=e.vector.vector3D(i.left,i.top,s+1.5),s=e.vector.vector3D(i.right,i.bottom,s+e.model.wallSize),n=e.polygon.createBox(t,s,e,0,"Graphics3D","#e2e1e1","#e2e1e1",0,.15,!1,"RightWallBrush",e.chart3D),a=0;a<n.length;a++)e.polygon.transform(e.matrixobj.turn(parseFloat(-Math.PI/2)),n[a])},updateBackWall:function(e){var t=e.model.m_AreaBounds,i=e.vector.vector3D(t.X,t.Y,0==e.model.depth?1.5:e.model.depth+e.model.wallSize),t=e.vector.vector3D(t.X+t.Width,t.Y+t.Height,0==e.model.depth?1.5:e.model.depth);e.polygon.createBox(i,t,e,0,"Graphics3D","#e2e1e1","#e2e1e1",0,.15,!1,"BackWallBrush",e.chart3D)},updateLeftWall:function(e,t,i){for(var s={left:-e.model.depth,top:e.model.m_AreaBounds.Y,bottom:e.model.m_AreaBounds.Height+e.model.m_AreaBounds.Y,right:0},i=i.axes[t.name]._validCross?t.x:e.model.m_AreaBounds.X,t=e.vector.vector3D(s.left,s.top,i-.1),i=e.vector.vector3D(s.right,s.bottom,i-e.model.wallSize),n=e.polygon.createBox(t,i,this,0,"Graphics3D","#e2e1e1","#e2e1e1",0,.15,!1,"LeftWallBrush",e.chart3D),a=0;a<n.length;a++)e.polygon.transform(e.matrixobj.turn(parseFloat(-Math.PI/2)),n[a])},updateBottomWall:function(e,t,i){for(var s=e.model.m_AreaBounds,i=i.axes[t.name]._validCross?t.y:s.Y+s.Height,t=e.vector.vector3D(s.X+s.Width,-e.model.depth,e.model.wallSize+i),i=e.vector.vector3D(s.X,-.1,i+1),n=e.polygon.createBox(i,t,this,0,"Graphics3D","#D3D3D3","#D3D3D3",0,.15,!1,"BottomWallBrush",e.chart3D),a=0;a<n.length;a++)e.polygon.transform(e.matrixobj.tilt(parseFloat(Math.PI/2)),n[a])}}}(jQuery),ej.Ej3DRender=function(){},function(b){ej.Ej3DRender.Polygons=[],ej.Ej3DRender.prototype={matrix3D:function(){},vector3D:function(){},BSPTreeBuilder:function(){},Graphics3D:function(){},polygon3D:function(){}};var u=new ej.Ej3DRender;u.vector3D.prototype={x:"",y:"",z:"",Epsilon:1e-5,isValid:function(e){return!isNaN(e.x)&&!isNaN(e.y)&&!isNaN(e.z)},vector3D:function(e,t,i){return{x:this.x=e,y:this.y=t,z:this.z=i}},vector3DMinus:function(e,t){return this.vector3D(e.x-t.x,e.y-t.y,e.z-t.z)},vector3DPlus:function(e,t){return this.vector3D(e.x+t.x,e.y+t.y,e.z+t.z)},vector3DMultiply:function(e,t){var i=e.y*t.z-t.y*e.z,s=e.z*t.x-t.z*e.x,e=e.x*t.y-t.x*e.y;return this.vector3D(i,s,e)},vector3dAND:function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},vector3DStarMultiply:function(e,t){var i=e.x*t,s=e.y*t,t=e.z*t;return this.vector3D(i,s,t)},getLength:function(e){e=this.vector3dAND(e,e);return Math.sqrt(e)},normalize:function(){this.getLength()},getNormal:function(e,t,i){e=this.vector3DMinus(e,t),t=this.vector3DMinus(i,t),e=this.vector3DMultiply(e,t),t=this.getLength(e);return t<this.Epsilon&&(t=0),{x:e.x/t,y:e.y/t,z:e.z/t}}},u.matrix3D.prototype={MATRIX_SIZE:4,matrix3D:function(e){for(var t=[],i=0;i<e;i++)t[i]=this.createArray(e);return t},isAffine:function(e){return 0==e[0][3]&&0==e[1][3]&&0==e[2][3]&&1==e[3][3]},createArray:function(e){for(var t=[],i=0;i<e;++i)t[i]=0;return t},getIdentity:function(){for(var e=this.matrix3D(this.MATRIX_SIZE),t=0;t<this.MATRIX_SIZE;t++)e[t][t]=1;return e},getInvertal:function(e){for(var t=this.getIdentity(),i=0;i<this.MATRIX_SIZE;i++)for(var s=0;s<this.MATRIX_SIZE;s++)t[i][s]=this.getMinor(e,i,s);return t=this.transposed(t),t=this.getMatrixMultiple(1/this.getDeterminant(e),t)},getMatrixMultiple:function(e,t){for(var i=0;i<t.length;i++)for(var s=0;s<t[i].length;s++)t[i][s]=t[i][s]*e;return t},getMatrixVectorMutiple:function(e,t){var i=e[0][0]*t.x+e[1][0]*t.y+e[2][0]*t.z+e[3][0],s=e[0][1]*t.x+e[1][1]*t.y+e[2][1]*t.z+e[3][1],n=e[0][2]*t.x+e[1][2]*t.y+e[2][2]*t.z+e[3][2];return this.isAffine(e)||(i*=e=1/(e[0][3]*t.x+e[1][3]*t.y+e[2][3]*t.z+e[3][3]),s*=e,n*=e),{x:i,y:s,z:n}},getMatrixVectorAnd:function(e,t){var i=e[0][0]*t.x+e[1][0]*t.y+e[2][0]*t.z,s=e[0][1]*t.x+e[1][1]*t.y+e[2][1]*t.z,t=e[0][2]*t.x+e[1][2]*t.y+e[2][2]*t.z;return u.vector3D.prototype.vector3D(i,s,t)},getMatrixAdd:function(e,t){for(var i=this.matrix3D(4),s=0;s<4;s++)for(var n=0;n<4;n++)i[s][n]=e[s][n]+t[s][n];return i},getMatrixMultiplication:function(e,t){for(var i=this.getIdentity(),s=0;s<this.MATRIX_SIZE;s++)for(var n=0;n<this.MATRIX_SIZE;n++){for(var a=0,r=0;r<this.MATRIX_SIZE;r++)a+=e[r][n]*t[s][r];i[s][n]=a}return i},getMatrixEqual:function(e,t){for(var i=!0,s=0;s<e.length;s++)for(var n=0;n<e.length;n++)e[s][n]!=t[s][n]&&(i=!1);return i},getMatrixNotEqual:function(e,t){for(var i=!0,s=0;s<e.length;s++)for(var n=0;n<e.length;n++)e[s][n]!=t[s][n]&&(i=!1);return!i},getMinor:function(e,t,i){return((t+i)%2==0?1:-1)*this.getDeterminant(this.getMMtr(e,t,i))},getMMtr:function(e,t,i){for(var s=e.length-1,n=this.createArray(s),a=0;a<s;a++){var r=t<=a?a+1:a;n[a]=this.createArray(s);for(var o=0;o<s;o++){var l=i<=o?o+1:o;n[a][o]=e[r][l]}}return n},getDeterminant:function(e){var t=e.length,i=0;if(t<2)i=e[0][0];else for(var s=1,n=0;n<t;n++){var a=this.getMMtr(e,n,0);i+=s*e[n][0]*this.getDeterminant(a),s=0<s?-1:1}return i},transform:function(e,t,i){var s=this.getIdentity();return s[3][0]=e,s[3][1]=t,s[3][2]=i,s},turn:function(e){var t=this.getIdentity();return t[0][0]=Math.cos(e),t[2][0]=-Math.sin(e),t[0][2]=Math.sin(e),t[2][2]=Math.cos(e),t},tilt:function(e){var t=this.getIdentity();return t[1][1]=Math.cos(e),t[2][1]=Math.sin(e),t[1][2]=-Math.sin(e),t[2][2]=Math.cos(e),t},transposed:function(e){for(var t=this.getIdentity(),i=0;i<this.MATRIX_SIZE;i++)for(var s=0;s<this.MATRIX_SIZE;s++)t[i][s]=e[s][i];return t},shear:function(e,t,i,s,n,a){var r=this.getIdentity();return r[0]=e,r[0]=t,r[1]=i,r[1]=s,r[2]=n,r[2]=a,r}},u.Graphics3D.prototype={addVisual:function(e){return null==e||x.test(e)?-1:(e.Graphics3D=this,r.add(e))},getVisualCount:function(){return ej.Ej3DRender.Polygons.length()},remove:function(e){ej.Ej3DRender.Polygons.Remove(e)},clearVisual:function(){ej.Ej3DRender.Polygons=null},getVisual:function(){return ej.Ej3DRender.Polygons},prepareView:function(e,t,i,s,n,a){0==arguments.length?r.build():(null==ej.Ej3DRender.transform?ej.Ej3DRender.transform=ej.EjSvgRender.chartTransform3D.transform3D(n):ej.Ej3DRender.transform.mViewport=n,ej.Ej3DRender.tree||(ej.Ej3DRender.tree=[]),ej.Ej3DRender.transform.Rotation=i,ej.Ej3DRender.transform.Tilt=s,ej.Ej3DRender.transform.Depth=t,ej.Ej3DRender.transform.PerspectiveAngle=e,ej.EjSvgRender.chartTransform3D.transform(ej.Ej3DRender.transform),ej.Ej3DRender.tree[a._id]=r.build())},view:function(e,t,i,s,n,a,r){var o;2==arguments.length?null!=e&&(o=D.vector3D(0,0,32767),this.drawBspNode3D(ej.Ej3DRender.tree[t._id],o,e,t)):null!=e&&(null==ej.Ej3DRender.transform?ej.Ej3DRender.transform=ej.EjSvgRender.chartTransform3D.transform3D(n):ej.Ej3DRender.transform.mViewport=n,ej.Ej3DRender.transform.Rotation=i,ej.Ej3DRender.transform.Tilt=s,ej.Ej3DRender.transform.Depth=r,ej.Ej3DRender.transform.PerspectiveAngle=a,ej.EjSvgRender.chartTransform3D.transform(ej.Ej3DRender.transform),o=D.vector3D(0,0,32767),this.drawBspNode3D(ej.Ej3DRender.tree[t._id],o,e,t))},draw3DElement:function(e,t){e.Plane.element?"text"==e.Plane.element.tag||"dataLabel"==e.Plane.element.tag?x.drawText(e.Plane,t):"polyline"==e.Plane.element.tag?x.drawPolyLine(e.Plane,t):"template"==e.Plane.element.tag?x.drawTemplate(e.Plane,t):x.drawLine(e.Plane,t):x.draw(e.Plane,t)},drawBspNode3D:function(e,t,i,s){if(null!=e&&null!=ej.Ej3DRender.transform)for(;;){if(D.vector3dAND(x.getNormal(ej.EjSvgRender.chartTransform3D.result(ej.Ej3DRender.transform),e.Plane.VectorPoints),t)>e.Plane.D){if(null!=e.Front&&this.drawBspNode3D(e.Front,t,i,s),this.draw3DElement(e,s),null!=e.Back){e=e.Back;continue}}else if(null!=e.Back&&this.drawBspNode3D(e.Back,t,i,s),this.draw3DElement(e,s),null!=e.Front){e=e.Front;continue}break}}},u.BSPTreeBuilder.prototype={EPSILON:5e-4,Polygon:[],add:function(e){return ej.Ej3DRender.Polygons.push(e),ej.Ej3DRender.Polygons.length-1},remove:function(e){ej.Ej3DRender.Polygons.splice(e,1)},clear:function(){ej.Ej3DRender.Polygons=[]},count:function(){return ej.Ej3DRender.Polygons.length},getNext:function(e,t){return t<=e?e-t:e<0?e+t:e},getNodeCount:function(e){return null==e?0:1+this.getNodeCount(e.Back)+this.getNodeCount(e.Front)},vector3DIndexClassification:function(e,t,i){return{index:t,result:i,vector:e,isCuttingBackPoint:!1,cuttingBackPairIndex:null,alreadyCuttedBack:!1,isCuttingFrontPoint:!1,cuttingFrontPairIndex:null,alreadyCuttedFront:!1}},classifyPoint:function(e,t){var i="OnPlane",t=-t.D-u.vector3D.prototype.vector3dAND(e,t.normal);return t>this.EPSILON?i="OnBack":t<-this.EPSILON&&(i="OnFront"),i},classifyPolygon:function(e,t){var i="Unknown",s=t.Points;if(null==s)return i;for(var n=0,a=0,r=0,o=e.normal,l=e.D,d=0,h=s.length;d<h;d++){var c=-l-u.vector3D.prototype.vector3dAND(s[d],o);if(c>this.EPSILON?n++:c<-this.EPSILON?a++:r++,0<n&&0<a)break}return i=r==s.length?"OnPlane":a+r==s.length?"ToRight":n+r==s.length?"ToLeft":"Unknown"},splitPolygon:function(e,t){var i=[],s=[];if(null!=e.Points){for(var n=[],a=[],r=[],o=e.Points.length,l=0;l<o;l++){var d=e.Points[l],h=e.Points[this.getNext(l+1,o)],c=this.classifyPoint(d,t),u=this.classifyPoint(h,t),p=this.vector3DIndexClassification(d,n.length,c);if(n.push(p),c!=u&&"OnPlane"!=c&&"OnPlane"!=u){var m=D.vector3DMinus(d,h),d=D.vector3DMinus(D.vector3DStarMultiply(t.normal,-t.D),h),d=D.vector3dAND(d,t.normal)/D.vector3dAND(t.normal,m),d=D.vector3DPlus(h,D.vector3DStarMultiply(m,d)),d=this.vector3DIndexClassification(d,n.length,"OnPlane");n.push(d),a.push(d),r.push(d)}else if("OnPlane"==c){c=e.Points[this.getNext(l-1,o)],c=this.classifyPoint(c,t);if(c!=u)if("OnPlane"!=c&&"OnPlane"!=u)a.push(p),r.push(p);else if("OnPlane"==c)switch(u){case"OnBack":a.push(p);break;case"OnFront":r.push(p)}else if("OnPlane"==u)switch(c){case"OnBack":a.push(p);break;case"OnFront":r.push(p)}}}if(0!=r.length||0!=a.length){for(l=0;l<a.length-1;l+=2){var g=a[l],f=a[l+1];g.CuttingBackPoint=!0,f.CuttingBackPoint=!0,g.CuttingBackPairIndex=f.index,f.CuttingBackPairIndex=g.index}for(l=0;l<r.length-1;l+=2){g=r[l],f=r[l+1];g.CuttingFrontPoint=!0,f.CuttingFrontPoint=!0,g.CuttingFrontPairIndex=f.index,f.CuttingFrontPairIndex=g.index}for(var _,l=0;l<a.length-1;l++)(g=a[l]).alreadyCuttedBack||2<(_=this.cutOutBackPolygon(n,g)).length&&(_=x.polygon3D(_,e),i.push(b.extend({},_)));for(var v,l=0;l<r.length-1;l++)(f=r[l]).alreadyCuttedFront||2<(v=this.cutOutFrontPolygon(n,f)).length&&(v=x.polygon3D(v,e),s.push(b.extend({},v)))}}else i.push(e),s.push(e);return{BackP:i,FrontP:s}},cutOutFrontPolygon:function(e,t){for(var i=[],s=t;;){s.alreadyCuttedFront=!0,i.push(s.vector);var n=e[s.CuttingFrontPairIndex];if(s.CuttingFrontPoint)if(n.alreadyCuttedFront){var a=e[this.getNext(s.index-1,e.length)],r=e[this.getNext(s.index+1,e.length)];if("OnFront"!=a.result||a.alreadyCuttedFront){if("OnFront"!=r.result||r.alreadyCuttedFront)return i;s=r}else s=a}else s=n;else{a=e[this.getNext(s.index-1,e.length)],n=e[this.getNext(s.index+1,e.length)];if("OnBack"==a.result||a.alreadyCuttedFront){if("OnBack"==n.result||n.alreadyCuttedFront)return i;s=n}else s=a}}return i},cutOutBackPolygon:function(e,t){for(var i=[],s=t;;){s.alreadyCuttedBack=!0,i.push(s.vector);var n=e[s.CuttingBackPairIndex];if(s.CuttingBackPoint)if(n.alreadyCuttedBack){var a=e[this.getNext(s.index-1,e.length)],r=e[this.getNext(s.index+1,e.length)];if("OnBack"!=a.result||a.alreadyCuttedBack){if("OnBack"!=r.result||r.alreadyCuttedBack)return i;s=r}else s=a}else s=n;else{a=e[this.getNext(s.index-1,e.length)],r=e[this.getNext(s.index+1,e.length)];if("OnFront"==a.result||a.alreadyCuttedBack){if("OnFront"==r.result||r.alreadyCuttedBack)return i;s=r}else s=a}}return i},build:function(){if(arguments[0]){var e=arguments[0];if(e.length<1)return null;var t={Back:null,Front:null,Plane:null},i=e[0];t.Plane=i;for(var s=[],n=[],a=1,r=e.length;a<r;a++){var o=e[a];if(o!=i)switch(this.classifyPolygon(i,o)){case"OnPlane":case"ToRight":n.push(o);break;case"ToLeft":s.push(o);break;case"Unknown":if(!o.element||"line"!=o.element.tag&&"text"!=o.element.tag){for(var l=this.splitPolygon(o,i),d=0;d<l.BackP.length;d++)l.BackP[d].Name=l.BackP[d].Name+"back",s.push(l.BackP[d]);for(var h=0;h<l.FrontP.length;h++)l.FrontP[h].Name=l.FrontP[h].Name+"front",n.push(l.FrontP[h])}else s.push(o)}}return 0<s.length&&(t.Back=this.build(s)),0<n.length&&(t.Front=this.build(n)),t}return this.build(ej.Ej3DRender.Polygons)}},u.polygon3D.prototype={epsilon:1e-5,normal:{x:0,y:0,z:0},vector:new(new ej.Ej3DRender).vector3D,polygon3D:function(e,t,i,s,n,a,r,o){if(3!=arguments.length){if(2==arguments.length)return e=arguments[0],this.calcNormal(e[0],e[1],e[2]),this.vectorPoints=e,this.calcNormal(this.vectorPoints),(d=t).Normal=this.normal,d.normal=this.normal,d.Points=e,d.VectorPoints=this.vectorPoints,d.IsSplitted=!0,d.d=this.d,d.D=this.d,d;this.calcNormal(e[0],e[1],e[2]),this.vectorPoints=e,this.calcNormal(this.vectorPoints);var l={Tag:"path",Parent:arguments[arguments.length-1]},d={Normal:this.normal,normal:this.normal,Points:e,VectorPoints:this.vectorPoints,Index:i,Tag:t,Name:o||null,StrokeThickness:n,Opacity:a,Fill:r,d:this.d,D:this.d};return 1!=arguments.length&&(d.Element=l),d}this.calcNormal(arguments[0],t,i)},createLine:function(e,t,i,s,n,a){var r=e.width,o=[];return o[0]=D.vector3D(t,i,a),o[1]=D.vector3D(t+r,n+r,a),o[2]=D.vector3D(s,n,a),this.line3D(e,o)},createPolyline:function(e,t){var i;return 2==e.length&&(i=e[1],e.push(D.vector3D(i.x,i.y,i.z))),this.polyLine3D(t,e)},polyLine3D:function(e,t){t=this.polygon3D(t);return t.element=e,t},line3D:function(e,t){t=this.polygon3D(t);return t.element=e,t},text3D:function(e,t){t=this.polygon3D(t);return t.element=e,t},createCylinder:function(e,t,i,s,n,a,r,o,l,d,h,c){var u,p,m,g,f=0,_=24,v=360/_,b=Math.PI/180,x=parseFloat((e.z+t.z)/2),y=[],w=[],C=[],S=[],T=t.y-e.y<t.z-e.z?parseFloat((t.y-e.y)/2):parseFloat((t.z-e.z)/2),R=t.x-e.x<t.z-e.z?parseFloat((t.x-e.x)/2):parseFloat((t.z-e.z)/2),k=parseFloat((e.x+t.x)/2),O=parseFloat((e.y+t.y)/2);switch(n=n.toLowerCase()){case"bar":case"stackingbar":case"stackingbar100":for(_++;_--;)p=parseFloat(O+T*Math.cos(f*v*b)),m=parseFloat(x+T*Math.sin(f*v*b)),w[f]={Y:p,Z:m},C.push(D.vector3D(e.x,w[f].Y,w[f].Z)),S.push(D.vector3D(t.x,w[f].Y,w[f].Z)),0<f&&(g=new Array(D.vector3D(e.x,w[f-1].Y,w[f-1].Z),D.vector3D(t.x,w[f-1].Y,w[f-1].Z),D.vector3D(t.x,w[f].Y,w[f].Z),D.vector3D(e.x,w[f].Y,w[f].Z)),y[f+1]=this.polygon3D(g,i,s,r,0,l,r,"_"+(f+1).toString()+"_"+h,c),I.addVisual(y[f+1])),f++;break;case"column":case"stackingcolumn":case"stackingcolumn100":for(_++;_--;)u=parseFloat(k+R*Math.cos(f*v*b)),m=parseFloat(x+R*Math.sin(f*v*b)),w[f]={X:u,Z:m},C.push(D.vector3D(w[f].X,e.y,w[f].Z)),S.push(D.vector3D(w[f].X,t.y,w[f].Z)),0<f&&(g=new Array(D.vector3D(w[f-1].X,e.y,w[f-1].Z),D.vector3D(w[f-1].X,t.y,w[f-1].Z),D.vector3D(w[f].X,t.y,w[f].Z),D.vector3D(w[f].X,e.y,w[f].Z)),y[f+1]=this.polygon3D(g,i,s,r,0,l,r,"_"+(f+1).toString()+"_"+h,c),I.addVisual(y[f+1])),f++}return y[0]=this.polygon3D(S,i,s,a,0,l,r,"_0_"+h,c),y[1]=this.polygon3D(C,i,s,a,o,l,r,"_1_"+h,c),I.addVisual(y[0]),I.addVisual(y[1]),y},createBox:function(e,t,i,s,n,a,r,o,l,d,h,c){var u=[],p=new Array(D.vector3D(e.x,e.y,e.z),D.vector3D(t.x,e.y,e.z),D.vector3D(t.x,t.y,e.z),D.vector3D(e.x,t.y,e.z)),m=new Array(D.vector3D(e.x,e.y,t.z),D.vector3D(t.x,e.y,t.z),D.vector3D(t.x,t.y,t.z),D.vector3D(e.x,t.y,t.z)),g=new Array(D.vector3D(e.x,e.y,t.z),D.vector3D(t.x,e.y,t.z),D.vector3D(t.x,e.y,e.z),D.vector3D(e.x,e.y,e.z)),f=new Array(D.vector3D(e.x,t.y,t.z),D.vector3D(t.x,t.y,t.z),D.vector3D(t.x,t.y,e.z),D.vector3D(e.x,t.y,e.z)),_=new Array(D.vector3D(e.x,e.y,e.z),D.vector3D(e.x,e.y,t.z),D.vector3D(e.x,t.y,t.z),D.vector3D(e.x,t.y,e.z)),v=new Array(D.vector3D(t.x,e.y,e.z),D.vector3D(t.x,e.y,t.z),D.vector3D(t.x,t.y,t.z),D.vector3D(t.x,t.y,e.z));return h?(u[0]=this.polygon3D(p,i,s,a,o,l,r,"_0_"+h,c),u[1]=this.polygon3D(m,i,s,a,o,l,r,"_1_"+h,c),u[2]=this.polygon3D(g,i,s,a,o,l,r,"_2_"+h,c),u[3]=this.polygon3D(f,i,s,a,o,l,r,"_3_"+h,c),u[4]=this.polygon3D(_,i,s,a,o,l,r,"_4_"+h,c),u[5]=this.polygon3D(v,i,s,a,o,l,r,"_5_"+h,c)):(c=arguments[arguments.length-1],u[0]=this.polygon3D(p,i,s,a,o,l,r,"_0_"+s,c),u[1]=this.polygon3D(m,i,s,a,o,l,r,"_1_"+s,c),u[2]=this.polygon3D(g,i,s,a,o,l,r,"_2_"+s,c),u[3]=this.polygon3D(f,i,s,a,o,l,r,"_3_"+s,c),u[4]=this.polygon3D(_,i,s,a,o,l,r,"_4_"+s,c),u[5]=this.polygon3D(v,i,s,a,o,l,r,"_5_"+s,c)),d?(I.addVisual(u[0]),I.addVisual(u[1]),I.addVisual(u[2]),I.addVisual(u[3]),I.addVisual(u[4]),I.addVisual(u[5])):(I.addVisual(u[5]),I.addVisual(u[4]),I.addVisual(u[0]),I.addVisual(u[1]),I.addVisual(u[2]),I.addVisual(u[3])),u},calcNormal:function(){if(3<=arguments.length){var e=arguments[0],t=arguments[1],i=arguments[2],s=D.vector3DMinus(e,t),t=D.vector3DMinus(i,t),s=D.vector3DMultiply(s,t),t=D.getLength(s);t<this.epsilon&&(t=1),this.normal=D.vector3D(s.x/t,s.y/t,s.z/t),this.d=-(this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z),arguments[3]&&(arguments[3].normal=this.normal,arguments.d=this.d)}else{var n=arguments[0];this.calcNormal(n[0],n[1],n[2],arguments[1]);for(var a=3;a<n.length&&this.test();a++)this.calcNormal(n[a],n[0],n[a/2])}},test:function(){return!D.isValid(this.normal)},transform:function(e,t){if(null!=t.Points){for(var i=0;i<t.Points.length;i++)t.VectorPoints[i]=t.Points[i]=o.getMatrixVectorMutiple(e,t.Points[i]);this.calcNormal(t.VectorPoints,t)}else{var s=e*(t.normal*-t.d);t.normal=o.getMatrixVectorAnd(e,t.normal),D.normalize(),t.d=-(t.normal&s)}},getPoint:function(e,t,i,s){if("number"==typeof e){var n=-(i.x*e+i.y*t+s)/i.z;return D.vector3D(e,t,n)}s=D.vector3DMinus(D.vector3DStarMultiply(i,-s),e),i=D.vector3dAND(s,i)/D.vector3dAND(i,t);return D.vector3DPlus(e,D.vector3DStarMultiply(t*i))},getNormal:function(e,t){if(null!=t){r=D.getNormal(o.getMatrixVectorMutiple(e,t[0]),o.getMatrixVectorMutiple(e,t[1]),o.getMatrixVectorMutiple(e,t[2]));for(var i=3;i<t.length&&!D.isValid(r)&&t[i/2];i++)var s=o.getMatrixVectorMutiple(e,t[i]),n=o.getMatrixVectorMutiple(e,t[0]),a=o.getMatrixVectorMutiple(e,t[i/2]),r=D.getNormal(s,n,a)}else r=o.getMatrixVectorAnd(e),D.normalize();return r},createTextElement:function(e,t,i,s){var n=[],a=e.x,r=e.y,o=t.Width,l=t.Height;return n[0]=this.vector.vector3D(a,r,e.z),n[1]=this.vector.vector3D(a+o,r+l+s,e.z),n[2]=this.vector.vector3D(a+o+i,r+l+s,e.z),this.text3D(t,n)},redraw:function(){},drawPolyLine:function(e,t){var i=ej.Ej3DRender.transform,s=ej.EjSvgRender.utils._getStringBuilder(),n=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[0],i);s.append("M "+n.x+" "+n.y+" ");for(var a=0;a<e.VectorPoints.length;a++){var r=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[a],i);s.append("L "+r.x+" "+r.y+" ")}n=s.toString(),n={id:e.element.id,"stroke-dasharray":e.element.dashArray,"stroke-width":e.element.width,stroke:e.element.stroke,d:n};n.id=n.id.replace(/[^a-zA-Z0-9]/g,""),t.svgRenderer.drawPath(n,e.element.child)},drawLine:function(e,t){var i,s=ej.Ej3DRender.transform;null!=s&&(i=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[0],s),s=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[2],s),(s={id:e.element.id,x1:i.x,y1:i.y,x2:s.x,y2:s.y,"stroke-dasharray":e.element.dashArray,"stroke-width":e.element.width,stroke:e.element.stroke,opacity:e.element.opacity}).id=s.id.replace(/[^a-zA-Z0-9]/g,""),t.svgRenderer.drawLine(s,e.element.child))},drawTemplate:function(e,t){var i=e.element,s=ej.Ej3DRender.transform;null!=s&&(s=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[0],s),ej.EjSeriesRender.prototype.drawLabelTemplate(i.Label.series,i.Label.series.points[i.Label.pointIndex],i.Label.pointIndex,{X:s.x,Y:s.y},t))},drawText:function(e,t){var i,s,n,a,r,o,l=e.element,d=ej.Ej3DRender.transform;null!=d&&(i=(o=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[0],d)).x,s=o.y,"text"==l.tag?(r={id:l.id,x:i,y:s,fill:l.font.color,"font-size":l.font.size,"font-family":l.font.fontFamily,"font-style":l.font.fontStyle,"font-weight":l.font.fontWeight,opacity:l.font.opacity,"text-anchor":l.TextAnchor,cursor:"default",transform:l.Angle?"rotate("+l.Angle+","+i+","+s+")":null},t.svgRenderer.drawText(r,e.element.Label.Text,e.element.child,e.element.font)):(i=(d=l.series).yAxis&&d.yAxis.labelFormat?d.yAxis.labelFormat:"",s=l.point.text||l.point.y+i.substring(i.indexOf("}")+1),r=ej.EjSvgRender.utils._measureText(s,null,d.marker.dataLabel.font),e=d.marker.dataLabel.margin,i=r.width+e.left+e.right,s=r.height+e.top+e.bottom,r=o.x,o=o.y,a=d.marker.dataLabel.shape||d.marker.dataLabel.shape||"None",b.each(t.model.symbolShape,function(e){a.toLowerCase()==e.toLowerCase()&&(n=e)}),r=r-e.left/2+e.right/2,o=o-e.top/2-s/e.top+e.bottom/2,e=b.inArray(d,t.model.series),ej.EjSeriesRender.prototype.dataLabelSymbol(e,d,l.pointIndex,r,o,i,s,n,t)))},draw:function(e,t){if(!(null==e.VectorPoints||e.VectorPoints.length<=0)){var i=ej.Ej3DRender.transform,s=ej.EjSvgRender.utils._getStringBuilder(),n=e.Fill;t.svgRenderer.checkColorFormat(n)||(n=t.colorNameToHex(n));var a={Segments:null,StartPoint:null};if(null!=i){a.StartPoint=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[0],i),s.append("M "+a.StartPoint.x+" "+a.StartPoint.y+" ");for(var r=0;r<e.VectorPoints.length;r++){var o=ej.EjSvgRender.chartTransform3D.toScreen(e.VectorPoints[r],i);s.append("L "+o.x+" "+o.y+" ")}}var l=s.toString(),d="Light",h=2*(Math.abs(D.vector3dAND(e.normal,D.vector3D(0,0,1)))-1),a=2*(Math.abs(D.vector3dAND(e.normal,D.vector3D(0,1,0)))-1);h==2*(Math.abs(D.vector3dAND(e.normal,D.vector3D(1,0,0)))-1)?(d="ZLight",n=this.applyZLight(n,t)):a==h||0!=h&&a<h?(d="XLight",n=this.applyXLight(n,t)):h<0?(d="ZLight",n=this.applyZLight(n,t)):d="Light","none"==t.model.AreaType&&(e.StrokeThickness=0);l={id:t.svgObject.id+"_"+e.Name,name:d,fill:n,stroke:e.Stroke,"stroke-width":e.StrokeThickness,opacity:e.Opacity,d:l};t.svgRenderer.drawPath(l,e.Element.Parent),t.model.previousID&&t.model.touchCross&&b("#"+l.id).insertAfter(b("#"+t.model.previousID)),t.model.previousID=l.id}},applyXLight:function(e,t){e=t.svgRenderer.hexToRGB(e);return e.R=parseInt(.7*e.R),e.G=parseInt(.7*e.G),e.B=parseInt(.7*e.B),t.svgRenderer.hexFromRGB(e)},applyZLight:function(e,t){e=t.svgRenderer.hexToRGB(e);return e.R=parseInt(.9*e.R),e.G=parseInt(.9*e.G),e.B=parseInt(.9*e.B),t.svgRenderer.hexFromRGB(e)},update:function(e,t,i){if(!(null==t.VectorPoints||t.VectorPoints.length<=0)){t.VectorPoints=e;var s=ej.Ej3DRender.transform,n=ej.EjSvgRender.utils._getStringBuilder(),a=(t.Fill,{Segments:null,StartPoint:null});if(null!=s){a.StartPoint=ej.EjSvgRender.chartTransform3D.toScreen(t.VectorPoints[0],s),n.append("M "+a.StartPoint.x+" "+a.StartPoint.y+" ");for(var r=0;r<t.VectorPoints.length;r++){var o=ej.EjSvgRender.chartTransform3D.toScreen(t.VectorPoints[r],s);n.append("L "+o.x+" "+o.y+" ")}}e=n.toString();0<b(i.chartObj.chart3D).find("#"+i.chartObj.svgObject.id+"_"+t.Name).length&&(a=b(i.chartObj.chart3D).find("#"+i.chartObj.svgObject.id+"_"+t.Name)[0],i.chartObj.svgRenderer._setAttr(b(a),{d:e}))}}};var D=new(u=new ej.Ej3DRender).vector3D,o=new u.matrix3D,r=new u.BSPTreeBuilder,x=new u.polygon3D,I=new u.Graphics3D}(jQuery),ej.EjSvgScrollbarRender=function(e,t){this.svgSupport=!!window.SVGSVGElement;var i=jQuery(e).attr("id");this.scrollsvgObj=this.scrollsvgObj||[],this.svgSupport?(this.svgLink="http://www.w3.org/2000/svg",this.scrollsvgObj[t.index]=document.createElementNS(this.svgLink,"svg")):(e=document,this.scrollsvgObj[t.index]=e.createElement("div"),this.scrollsvgObj[t.index].style.position="relative"),this.scrollsvgObj[t.index].setAttribute("id","scrollbar_"+i+t.index)},function(g){ej.EjSvgScrollbarRender.prototype={_initializeScrollbarVariables:function(e){e.offsetLeftX=0,e.rectWidth=e.offsetRightX=e.oldWidth=e.width,e.startX=0,e.endX=0,e.scrollbarLoaded=!1,(e.zoomPosition||e.zoomFactor)&&(e.offsetLeftX=e.zoomPosition*e.width,e.rectWidth=e.zoomFactor*e.width)},_scrollbarUpdate:function(e){var t=parseFloat(e.width)-30;e.offsetLeftX=e.scrollbarLoaded?e.offsetLeftX-15:e.offsetLeftX,e.offsetLeftX=e.offsetLeftX<15?0:e.offsetLeftX;var i=e.offsetLeftX/e.oldWidth*t+15,s=e.rectWidth/e.oldWidth*t,n=s<44;e._diff=n?44-s:0,s=44<s?s:44,e.oldWidth=t;t=i+s;e.rectWidth=s,e.offsetLeftX=e.startX=i,e.offsetRightX=t-15<=i?t+15:t,e.endX=e.width-e.offsetRightX,e.startX=i<15?15:i,i+s>e.width-15&&(e.offsetLeftX=e.startX=e.width-15-s,e.offsetRightX=e.width-15,e.endX=e.width-e.offsetRightX),e.scrollbarLoaded=!0},_renderScrollbar:function(e){this.scrollsvgObj=this.scrollsvgObj||[],g(this.scrollsvgObj[e.index]).empty(),this.scrollsvgObj[e.index]&&g(document).find("[id*= "+this.scrollsvgObj[e.index].id+"]").attr("height","0px");var t=this._id;this.scrollsvgObj[e.index]=this.scrollbarContainer.scrollsvgObj[e.index];var i=parseFloat(e.width),s=i-30;e.offsetLeftX=e.scrollbarLoaded?e.offsetLeftX-15:e.offsetLeftX,e.offsetLeftX=e.offsetLeftX<15?0:e.offsetLeftX;var n=e.offsetLeftX/e.oldWidth*s+15,a=e.rectWidth/e.oldWidth*s,r=a<44;e._diff=r?44-a:0,a=44<a?a:44;var o=(n=(e.oldWidth=s)<n+a?s-(a-15):n)+a;e.rectWidth=a,e.offsetLeftX=e.startX=n,e.offsetRightX=n+a,e.endX=e.width-e.offsetRightX,e.scrollbarLoaded=!0,o=o-15<=n?o+15:o;r=this.padding||0,s=this.vmlRendering?-5:0;"horizontal"==e.orientation?this.scrollbar=this.renderer.createGroup({id:t+"_scrollbar_"+e.index,transform:"translate("+r+","+s+")"}):this.scrollbar=this.renderer.createGroup({id:t+"_scrollbar_"+e.index,transform:"translate(0,"+e.width+") rotate(270)"});var l,d,h,c,u,p,m,r=(d=l=0,h=i,c=18,u=4,m=(p=e).orientation,p=p.opposed,c="vertical"==m&&!p||p&&"vertical"!=m?"M "+l+" "+u+" v "+(c-u)+" h "+h+" v "+(u-c)+" a "+u+" "+u+" 0 0 0 "+-u+" "+-u+" h "+-(h-2*u)+" a "+u+" "+u+" 0 0 0 "+-4+" "+u+" z":"M "+l+" "+d+" v "+(c-u)+" a "+u+" "+u+" 0 0 0 "+u+" "+u+" h "+(h-2*u)+" a "+u+" "+u+" 0 0 0 "+u+" "+-u+" v "+(u-c)+" z"),s={id:t+"_scrollbarBackRect_"+e.index,"stroke-width":1,height:18,width:i,"stroke-linejoin":"round",stroke:"#B4B4B4",fill:"#F7F7F7",class:"e-rangeScroll-backRect"};this.vmlRendering?this.renderer.drawRect(s,this.scrollbar):(s.d=r,this.renderer.drawPath(s,this.scrollbar));s={id:t+"_scrollbarRightRect_"+e.index,"stroke-width":1,x:i-5,height:18,width:5,"stroke-linejoin":"round",stroke:"transparent",fill:"transparent"};this.renderer.drawRect(s,this.scrollbar);s={id:t+"_scrollbarLeftRect_"+e.index,"stroke-width":1,x:0,height:18,width:5,"stroke-linejoin":"round",stroke:"transparent",fill:"transparent"};this.renderer.drawRect(s,this.scrollbar);s={id:t+"_scrollbarLeftArrow_"+e.index,"stroke-width":1,stroke:"#999999",d:"M 5 9 L 10 14 L 10 3.5 Z",fill:"#999999",class:"e-rangeScroll-arrow"};this.renderer.drawPath(s,this.scrollbar);s={id:t+"_scrollbarRightArrow_"+e.index,"stroke-width":1,stroke:"#999999",d:"M "+(i-5)+" 9 L "+(i-10)+" 14 L "+(i-10)+" 3.5 Z",fill:"#999999",class:"e-rangeScroll-arrow"};this.renderer.drawPath(s,this.scrollbar);s={id:t+"_scrollbarSelect_"+e.index,x:n,y:0,width:a,rx:4,ry:4,height:17,stroke:"#999999","stroke-width":1,fill:"#CECECE",class:"e-rangeScroll-select"};this.renderer.drawRect(s,this.scrollbar),this.centerLine=this.renderer.createGroup({id:t+"_scrollbarCenterLine_"+e.index,transform:"translate("+(n+a/2-7.5)+")"});a={id:t+"_scrollbarCenterShape_"+e.index,"stroke-width":1,stroke:"#999999",d:"M 0 3.5 L 0 13.5 ZM 5 3.5 L 5 13.5 ZM 10 3.5 L 10 13.5 ZM 15 3.5 L 15 13.5 Z",fill:"#999999",class:"e-rangeScroll-centerShape"};this.renderer.drawPath(a,this.centerLine),this.renderer.append(this.centerLine,this.scrollbar);a={id:t+"_leftHeaderHideRect_"+e.index,x:n,y:0,width:11,height:17,fill:"transparent",opacity:0,"stroke-width":1,class:"e-rangeScroll-leftRect"};this.renderer.drawRect(a,this.scrollbar);n={id:t+"_scrollbarLeftHeader_"+e.index,cx:n+8,cy:8.5,r:3,fill:"#999999",stroke:"#999999","stroke-width":1,class:"e-rangeScroll-leftCircle"};this.renderer.drawCircle(n,this.scrollbar);n={id:t+"_rightHeaderHideRect_"+e.index,x:o-11,y:0,width:11,height:17,fill:"transparent",opacity:0,"stroke-width":1,class:"e-rangeScroll-rightRect"};this.renderer.drawRect(n,this.scrollbar);o={id:t+"_scrollbarRightHeader_"+e.index,fill:"#999999",cx:o-8,cy:8.5,r:3,stroke:"#999999","stroke-width":1,class:"e-rangeScroll-rightCircle"};this.renderer.drawCircle(o,this.scrollbar),this.renderer.append(this.scrollbar,this.scrollsvgObj[e.index]),"horizontal"==e.orientation?(this.scrollsvgObj[e.index].setAttribute("height",18),this.scrollsvgObj[e.index].setAttribute("width",i)):(this.scrollsvgObj[e.index].setAttribute("height",i),this.scrollsvgObj[e.index].setAttribute("width",18)),this.renderer.append(this.scrollsvgObj[e.index],e.parent);i=this.vmlRendering?e.y+5:e.y;"ejRangeNavigator"==this.pluginName?this.scrollsvgObj[e.index].setAttribute("style","overflow:visible;position:relative;display:block; top:"+(i-e.y)+"px;left:"+e.x+"px"):this.scrollsvgObj[e.index].setAttribute("style","overflow:visible;position:absolute;display:block; top:"+i+"px;left:"+e.x+"px"),g("#"+t+"_scrollbarSelect_"+e.index).css({cursor:"pointer"}),e.enableResize?(g("#"+t+"_leftHeaderHideRect_"+e.index).css({cursor:"horizontal"==e.orientation?"w-resize":"n-resize"}),g("#"+t+"_rightHeaderHideRect_"+e.index).css({cursor:"horizontal"==e.orientation?"w-resize":"n-resize"}),g("#"+t+"_scrollbarRightHeader_"+e.index).css({cursor:"horizontal"==e.orientation?"w-resize":"n-resize"}),g("#"+t+"_scrollbarLeftHeader_"+e.index).css({cursor:"horizontal"==e.orientation?"w-resize":"n-resize"})):(g("#"+t+"_leftHeaderHideRect_"+e.index).hide(),g("#"+t+"_rightHeaderHideRect_"+e.index).hide(),g("#"+t+"_scrollbarLeftHeader_"+e.index).hide(),g("#"+t+"_scrollbarRightHeader_"+e.index).hide()),this.vmlRendering&&(g("#"+t+"_leftHeaderHideRect_"+e.index).css("visibility","hidden"),g("#"+t+"_rightHeaderHideRect_"+e.index).css("visibility","hidden")),this.scrollbarContainer._bindScrollEvents.call(this,e)},_bindScrollEvents:function(e){var t,i,s=this._id,n=jQuery.uaMatch(navigator.userAgent),a=!!navigator.userAgent.match(/Trident\/7\./);r.call(this,e),window.PointerEvent?(this._on(g("#"+s+"_scrollbarLeftHeader_"+e.index),"pointerdown",this.scrollbarContainer._leftScrollbarDown),this._on(g("#"+s+"_scrollbarRightHeader_"+e.index),"pointerdown",this.scrollbarContainer._rightScrollbarDown),this._on(g("#"+s+"_leftHeaderHideRect_"+e.index),"pointerdown",this.scrollbarContainer._leftScrollbarDown),this._on(g("#"+s+"_rightHeaderHideRect_"+e.index),"pointerdown",this.scrollbarContainer._rightScrollbarDown),this._on(g("#"+s+"_scrollbarLeftArrow_"+e.index),"pointerdown",this.scrollbarContainer._leftArrowDown),this._on(g("#"+s+"_scrollbarLeftArrow_"+e.index),"pointerup",this.scrollbarContainer._leftArrowUp),this._on(g("#"+s+"_scrollbarRightArrow_"+e.index),"pointerdown",this.scrollbarContainer._rightArrowDown),this._on(g("#"+s+"_scrollbarRightArrow_"+e.index),"pointerup",this.scrollbarContainer._rightArrowUp),this._on(g("#"+s+"_scrollbarSelect_"+e.index),"pointerdown",this.scrollbarContainer._scrollSelectRectDown),this._on(g("#"+s+"_scrollbarBackRect_"+e.index),"pointerdown",this.scrollbarContainer._scrollBackRectDown),this._on(g("#"+s+"_scrollbarBackRect_"+e.index),"pointerup",this.scrollbarContainer._scrollBackRectUp),this._on(g(window),"pointermove",this.scrollbarContainer._scrollbarMove),this._on(g(window),"pointerup",this.scrollbarContainer._scrollbarUp),this._on(g(this.scrollsvgObj[e.index]),"pointermove",this.scrollbarContainer._scrollbarMove),this._on(g(this.scrollsvgObj[e.index]),"pointerup",this.scrollbarContainer._scrollbarUp),g(this.scrollsvgObj[e.index]).css("touch-action","none")):window.navigator.msPointerEnabled&&!a?(this._on(g("#"+s+"_scrollbarLeftHeader_"+e.index),"MSPointerDown",this.scrollbarContainer._leftScrollbarDown),this._on(g("#"+s+"_scrollbarRightHeader_"+e.index),"MSPointerDown",this.scrollbarContainer._rightScrollbarDown),this._on(g("#"+s+"_leftHeaderHideRect_"+e.index),"MSPointerDown",this.scrollbarContainer._leftScrollbarDown),this._on(g("#"+s+"_rightHeaderHideRect_"+e.index),"MSPointerDown",this.scrollbarContainer._rightScrollbarDown),this._on(g("#"+s+"_scrollbarLeftArrow_"+e.index),"MSPointerDown",this.scrollbarContainer._leftArrowDown),this._on(g("#"+s+"_scrollbarLeftArrow_"+e.index),"MSPointerUp",this.scrollbarContainer._leftArrowUp),this._on(g("#"+s+"_scrollbarRightArrow_"+e.index),"MSPointerDown",this.scrollbarContainer._rightArrowDown),this._on(g("#"+s+"_scrollbarRightArrow_"+e.index),"MSPointerUp",this.scrollbarContainer._rightArrowUp),this._on(g("#"+s+"_scrollbarSelect_"+e.index),"MSPointerDown",this.scrollbarContainer._scrollSelectRectDown),this._on(g("#"+s+"_scrollbarBackRect_"+e.index),"MSPointerDown",this.scrollbarContainer._scrollBackRectDown),this._on(g("#"+s+"_scrollbarBackRect_"+e.index),"MSPointerUp",this.scrollbarContainer._scrollBackRectUp),this._on(g(window),"MSPointerMove",this.scrollbarContainer._scrollbarMove),this._on(g(window),"MSPointerUp",this.scrollbarContainer._scrollbarUp),this._on(g(this.scrollsvgObj[e.index]),"MSPointerMove",this.scrollbarContainer._scrollbarMove),this._on(g(this.scrollsvgObj[e.index]),"MSPointerUp",this.scrollbarContainer._scrollbarUp),g(this.scrollsvgObj[e.index]).css("-ms-touch-action","none")):"chrome"==n.browser.toLowerCase()?o.call(this,e):this.isDevice()&&(t=-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome"),i=(window.location!=window.parent.location?window.parent:window).navigator.userAgent.toLowerCase(),i=/mobile|tablet|android|kindle/i.test(i),ej.isMobile()&&this.isWindows()||!i&&ej.isMobile()&&t?(r.call(this),g(this.scrollsvgObj[e.index]).css("-ms-touch-action","none")):o.call(this,e));n="mozilla"!=n.browser.toLowerCase()||a?"mousewheel":"DOMMouseScroll";function r(e){this._on(g("#"+s+"_scrollbarLeftHeader_"+e.index),"mousedown",this.scrollbarContainer._leftScrollbarDown),this._on(g("#"+s+"_scrollbarRightHeader_"+e.index),"mousedown",this.scrollbarContainer._rightScrollbarDown),this._on(g("#"+s+"_leftHeaderHideRect_"+e.index),"mousedown",this.scrollbarContainer._leftScrollbarDown),this._on(g("#"+s+"_rightHeaderHideRect_"+e.index),"mousedown",this.scrollbarContainer._rightScrollbarDown),this._on(g("#"+s+"_scrollbarLeftArrow_"+e.index),"mousedown",this.scrollbarContainer._leftArrowDown),this._on(g("#"+s+"_scrollbarLeftArrow_"+e.index),"mouseup",this.scrollbarContainer._leftArrowUp),this._on(g("#"+s+"_scrollbarRightArrow_"+e.index),"mousedown",this.scrollbarContainer._rightArrowDown),this._on(g("#"+s+"_scrollbarRightArrow_"+e.index),"mouseup",this.scrollbarContainer._rightArrowUp),this._on(g("#"+s+"_scrollbarSelect_"+e.index),"mousedown",this.scrollbarContainer._scrollSelectRectDown),this._on(g("#"+s+"_scrollbarBackRect_"+e.index),"mousedown",this.scrollbarContainer._scrollBackRectDown),this._on(g("#"+s+"_scrollbarBackRect_"+e.index),"mouseup",this.scrollbarContainer._scrollBackRectUp),this._on(g(window),"mousemove",this.scrollbarContainer._scrollbarMove),this._on(g(window),"mouseup",this.scrollbarContainer._scrollbarUp),this._on(g(this.svgObject),"mousemove",this.scrollbarContainer._scrollbarMove),this._on(g(this.scrollsvgObj[e.index]),"mousemove",this.scrollbarContainer._scrollbarMove),this._on(g(this.scrollsvgObj[e.index]),"mouseup",this.scrollbarContainer._scrollbarUp)}function o(e){this._on(g("#"+s+"_scrollbarLeftHeader_"+e.index),"touchstart",this.scrollbarContainer._leftScrollbarDown),this._on(g("#"+s+"_scrollbarRightHeader_"+e.index),"touchstart",this.scrollbarContainer._rightScrollbarDown),this._on(g("#"+s+"_leftHeaderHideRect_"+e.index),"touchstart",this.scrollbarContainer._leftScrollbarDown),this._on(g("#"+s+"_rightHeaderHideRect_"+e.index),"touchstart",this.scrollbarContainer._rightScrollbarDown),this._on(g("#"+s+"_scrollbarLeftArrow_"+e.index),"touchstart",this.scrollbarContainer._leftArrowDown),this._on(g("#"+s+"_scrollbarLeftArrow_"+e.index),"touchend",this.scrollbarContainer._leftArrowUp),this._on(g("#"+s+"_scrollbarRightArrow_"+e.index),"touchstart",this.scrollbarContainer._rightArrowDown),this._on(g("#"+s+"_scrollbarRightArrow_"+e.index),"touchend",this.scrollbarContainer._rightArrowUp),this._on(g("#"+s+"_scrollbarSelect_"+e.index),"touchstart",this.scrollbarContainer._scrollSelectRectDown),this._on(g("#"+s+"_scrollbarBackRect_"+e.index),"touchstart",this.scrollbarContainer._scrollBackRectDown),this._on(g("#"+s+"_scrollbarBackRect_"+e.index),"touchend",this.scrollbarContainer._scrollBackRectUp),this._on(g(window),"touchmove",this.scrollbarContainer._scrollbarMove),this._on(g(window),"touchend",this.scrollbarContainer._scrollbarUp),this._on(g(this.scrollsvgObj[e.index]),"touchmove",this.scrollbarContainer._scrollbarMove),this._on(g(this.scrollsvgObj[e.index]),"touchend",this.scrollbarContainer._scrollbarUp)}this._on(g(this.scrollsvgObj[e.index]),n,this.scrollbarContainer._scrollMouseWheel),a&&g(this.scrollsvgObj[e.index]).css("touch-action","none")},_setScrollPosition:function(e,t,i){var s=this._id,n=e+i.rectWidth/2-7.5;g("#"+s+"_scrollbarLeftHeader_"+i.index).attr("cx",e+8),g("#"+s+"_leftHeaderHideRect_"+i.index).attr("x",e),g("#"+s+"_scrollbarRightHeader_"+i.index).attr("cx",t-8),g("#"+s+"_rightHeaderHideRect_"+i.index).attr("x",t-5),g("#"+s+"_scrollbarSelect_"+i.index).attr("x",e),g("#"+s+"_scrollbarSelect_"+i.index).attr("width",i.rectWidth),g("#"+s+"_scrollbarCenterLine_"+i.index).attr("transform","translate("+n+")"),"ejRangeNavigator"==this.pluginName&&(g("#"+s+"_scrollbarLeftHeader_"+i.index).css("left",e),g("#"+s+"_leftHeaderHideRect_"+i.index).css("left",e),g("#"+s+"_scrollbarRightHeader_"+i.index).css("left",t-8),g("#"+s+"_rightHeaderHideRect_"+i.index).css("left",t-5),g("#"+s+"_scrollbarSelect_"+i.index).css("left",e),g("#"+s+"_scrollbarCenterLine_"+i.index).css("left",n))},_calculateScrollLeftMove:function(e,t){15<t._startX-e?t.startX=t._startX-e:(t.startX=15,t._offsetLeftX=t.offsetLeftX),t.offsetLeftX=t.startX,t._offsetRightX=t.startX+t.rectWidth,t.offsetRightX=t._offsetRightX,t.endX=t.width-t.offsetRightX},_calculateScrollRightMove:function(e,t){t&&t._offsetRightX+Math.abs(e)<t.width-15?(t._startX=t.startX+Math.abs(e),t.offsetLeftX=t._startX,t.offsetRightX=t._offsetRightX+Math.abs(e)):(t._ofsetRightX=t.offsetRightX,t.offsetRightX=t.width-15,t._startX=t.offsetRightX-t.rectWidth,t.offsetLeftX=t._startX),t.endX=t.width-t.offsetRightX},_calculateRange:function(e,t,i){var s,n,a,r,o=(e-15)/(i.width-30-i._diff),l=i.scrollRange,e=(i.rectWidth-i._diff)/(i.width-30-i._diff);i.isRTL?s=(n=l.max-o*l.delta)-e*l.delta:n=(s=l.min+o*l.delta)+e*l.delta,"datetime"==i.valueType?(a=i.startDateTime,r=i.endDateTime,i.startDateTime=this.startDateTime=s=new Date(s),i.endDateTime=this.endDateTime=n=new Date(n)):(a=parseInt(i.startValue),r=parseInt(i.endValue),i.startValue=this.startValue=s=Math.ceil(s),i.endValue=this.endValue=n=Math.ceil(n)),i._scrollChanged=!0;l=g.extend({},ej.EjSvgRender.commonChartEventArgs);return l.data={zoomPosition:o,zoomFactor:e,oldRange:{start:a,end:r},newRange:{start:s,end:n}},i.zoomPosition=o,i.zoomFactor=e,l},_calculateScrollPosition:function(e,t){var i,s,n,a;if(this.leftScrollbarClicked&&t.enableResize){var r,o=((e=15<=(e=15<=e?e:15)&&e<t.offsetRightX-15?e:t.offsetRightX-15)-36)/(t.width-30),l=t.rectWidth/(t.width-30),d=t.valueType.toLowerCase(),h=t.scrollRange;return t.isRTL?(s=(s=h.max-o*h.delta)<h.max?s:h.max,i="datetime"==d?(n=t.startDateTime,a=t.endDateTime,t.endDateTime=this.endDateTime=s=new Date(s),t.startDateTime):(n=parseInt(t.startValue),a=parseInt(t.endValue),t.endValue=this.endValue=s=Math.ceil(s),Math.ceil(t.startValue))):(i=(i=h.min+o*h.delta)>h.min?i:h.min,s="datetime"==d?(n=t.startDateTime,a=t.endDateTime,t.startDateTime=this.startDateTime=i=new Date(i),t.endDateTime):(n=parseInt(t.startValue),a=parseInt(t.endValue),t.startValue=this.startValue=i=Math.ceil(i),Math.ceil(t.endValue))),(r=g.extend({},ej.EjSvgRender.commonChartEventArgs)).data={zoomPosition:o,zoomFactor:l,oldRange:{start:n,end:a},newRange:{start:i,end:s}},t._scrollChanged=!0,t.zoomPosition=o,t.zoomFactor=l,r}if(this.rightScrollbarClicked&&t.enableResize)return h=t.scrollRange,l=t.rectWidth/(t.width-30),o=t.zoomPosition,d=t.valueType.toLowerCase(),t.isRTL?(o=(e-36)/(t.width-30),i=h.max-o*h.delta,s="datetime"==d?(n=t.startDateTime,a=t.endDateTime,t.startDateTime=this.startDateTime=i=new Date(i),t.endDateTime):(n=parseInt(t.startValue),a=parseInt(t.endValue),t.startValue=this.startValue=i=Math.floor(i),Math.ceil(t.endValue))):(s=h.min+o*h.delta+l*h.delta,i="datetime"==d?(n=t.startDateTime,a=t.endDateTime,t.endDateTime=this.endDateTime=s=new Date(s),t.startDateTime):(n=parseInt(t.startValue),a=parseInt(t.endValue),t.endValue=this.endValue=s=Math.floor(s),Math.ceil(t.startValue))),(r=g.extend({},ej.EjSvgRender.commonChartEventArgs)).data={zoomPosition:t.zoomPosition||0,zoomFactor:l,oldRange:{start:n,end:a},newRange:{start:i,end:s}},t._scrollChanged=!0,t.zoomFactor=l,r;if(t&&this.scrollRectClicked){e=this.mouseDownPos-e;return 0<e&&0<=t.offsetLeftX?(this.scrollbarContainer._calculateScrollLeftMove.call(this,e,t),this.scrollbarContainer._calculateRange.call(this,t.startX,t.offsetRightX,t)):e<0?(this.scrollbarContainer._calculateScrollRightMove.call(this,e,t),this.scrollbarContainer._calculateRange.call(this,t._startX,t.offsetRightX,t)):void 0}},_scrollbarMove:function(e){if(this.moveClientX=(ej.isNullOrUndefined(e.clientX)?null==e.originalEvent.clientX?e.originalEvent.touches[0]:e.originalEvent:e).clientX,this.moveClientX!=this.downClientX){var t=this.model.padding||0,i=jQuery.uaMatch(navigator.userAgent),s=this.scrollbarContainer._doScrollIndex.call(this,e);if(!s)return 0;this.lastIndex=s.index,i=!this.vmlRendering&&"[object TouchEvent]"!==e.originalEvent.toString()&&"msie"!=i.browser.toLowerCase()||this.vmlRendering?("horizontal"==s.orientation?this.calMousePosition(e).X-s.x:s.width-(this.calMousePosition(e).Y-s.y))-t:("horizontal"==s.orientation?this.calTouchPosition(e).X-s.x:s.width-(this.calTouchPosition(e).Y-s.y))-t,this.mouseX=i;var n,a,r,o,t=this._id;this.leftScrollbarClicked&&s.enableResize&&(s&&(34<i||23<i)&&i<s.offsetRightX-34?(s.rectWidth=s.width-(s.endX+i-8),n=i-8+s.rectWidth/2-7.5,g("#"+t+"_scrollbarLeftHeader_"+s.index).attr("cx",i),g("#"+t+"_leftHeaderHideRect_"+s.index).attr("x",i-7.5),g("#"+t+"_scrollbarSelect_"+s.index).attr("x",i-8),g("#"+t+"_scrollbarSelect_"+s.index).attr("width",s.rectWidth),g("#"+t+"_scrollbarCenterLine_"+s.index).attr("transform","translate("+n+")"),"ejRangeNavigator"==this.pluginName&&(g("#"+t+"_scrollbarLeftHeader_"+s.index).css("left",i),g("#"+t+"_leftHeaderHideRect_"+s.index).css("left",i-7.5),g("#"+t+"_scrollbarSelect_"+s.index).css("left",i),g("#"+t+"_scrollbarSelect_"+s.index).css("width",s.rectWidth),g("#"+t+"_scrollbarCenterLine_"+s.index).css("left",n)),s.offsetLeftX=s.startX=i-8,this.scrollbarContainer._scrollStartArgs.call(this,s),this.scrollbarContainer._scrollChangeArgs.call(this,s),s._diff=0):i>s.offsetRightX-34&&(this.rectWidth=42.89984101748814)),this.rightScrollbarClicked&&s.enableResize&&s&&(i<=s.width-34||i<=s.width-23)&&i>s.offsetLeftX+34&&(s.rectWidth=i-s.offsetLeftX+8,n=s.offsetLeftX+s.rectWidth/2-7.5,g("#"+t+"_scrollbarRightHeader_"+s.index).attr("cx",i),g("#"+t+"_rightHeaderHideRect_"+s.index).attr("x",i-2.5),g("#"+t+"_scrollbarSelect_"+s.index).attr("width",s.rectWidth),g("#"+t+"_scrollbarCenterLine_"+s.index).attr("transform","translate("+n+")"),"ejRangeNavigator"==this.pluginName&&(g("#"+t+"_scrollbarRightHeader_"+s.index).css("left",i),g("#"+t+"_rightHeaderHideRect_"+s.index).css("left",i-2.5),g("#"+t+"_scrollbarSelect_"+s.index).css("width",s.rectWidth),g("#"+t+"_scrollbarCenterLine_"+s.index).css("left",n)),s.offsetRightX=i+8,s.endX=s.width-i-8,this.scrollbarContainer._scrollStartArgs.call(this,s),this.scrollbarContainer._scrollChangeArgs.call(this,s),s._diff=0),this.scrollRectClicked&&(t=this.mouseDownPos-i,s._startX=ej.isNullOrUndefined(s._startX)?s.startX:s._startX,s&&0<t&&0<=s.offsetLeftX&&(this.scrollbarContainer._calculateScrollLeftMove.call(this,t,s),this.scrollbarContainer._setScrollPosition.call(this,s.startX,s.offsetRightX,s),(15<s.offsetLeftX||s.offsetLeftX!=s._offsetLeftX)&&(this.scrollbarContainer._scrollStartArgs.call(this,s),this.scrollbarContainer._scrollChangeArgs.call(this,s))),s&&t<0&&(ej.isNullOrUndefined(s._offsetRightX)&&(this.scrollbarContainer._scrollSelectRectDown.call(this,e),this.scrollbarContainer._scrollbarMove.call(this,e)),this.scrollbarContainer._calculateScrollRightMove.call(this,t,s),this.scrollbarContainer._setScrollPosition.call(this,s._startX,s._startX+s.rectWidth,s),(s.offsetRightX<s.width-15||s.offsetRightX!=s._ofsetRightX)&&(this.scrollbarContainer._scrollStartArgs.call(this,s),!1!==this.model.enableDeferredUpdate&&!s.isZooming&&""==this.model.scrollChanged||(e=(n=this.scrollbarContainer._calculateRange.call(this,s._startX,s._startX+s.rectWidth,s)).data.oldRange,t=n.data.newRange,t="datetime"==s.valueType.toLowerCase()?(a=Date.parse(e.start),o=Date.parse(t.start),r=Date.parse(e.end),Date.parse(t.end)):(a=e.start,o=t.start,r=e.end,t.end),""==this.model.scrollChanged||a==o&&r==t||(n=this.scrollbarContainer._args.call(this,s,n),this._trigger("scrollChanged",n)),this.model.enableDeferredUpdate||(this.scrollUpdate?this.scrollUpdate=!1:this.scrollbarContainer._appendScrollRange.call(this,s))))))}this.offsetX=i},_scrollbarUp:function(e){var t=this.scrollbarContainer._doScrollIndex.call(this,e);g("[id^="+this._id+"_scrollbarSelect_]").attr("class","e-rangeScroll-select"),this.lastIndex=null;var i,s,n,a,r=this.scrollbarContainer._calculateScrollPosition.call(this,this.mouseX,t),o=this.model.enableDeferredUpdate;r&&(i=r.data.oldRange,e=r.data.newRange,e="datetime"==t.valueType.toLowerCase()?(s=Date.parse(i.start),a=Date.parse(e.start),n=Date.parse(i.end),Date.parse(e.end)):(s=i.start,a=e.start,n=i.end,e.end),!(s!=a||n!=e||this.scrollRectClicked&&!o||o||this.leftScrollbarClicked||this.rightScrollbarClicked)||(!(o=-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&-1<navigator.vendor.toLowerCase().indexOf("google"))||o&&(this.leftScrollbarClicked||this.rightScrollbarClicked)&&this.downClientX!=this.moveClientX||this.scrollRectClicked||this.leftArrowClicked||this.rightArrowClicked)&&(!this.leftScrollbarClicked&&!this.rightScrollbarClicked||(this.leftScrollbarClicked||this.rightScrollbarClicked)&&Math.ceil(t.rectWidth)!=Math.ceil(this.rectOldWidth)&&(4<Math.abs(t.rectWidth-t.rectOldWidth)||!t.rectOldWidth))&&(!ej.isNullOrUndefined(t._previousStart)&&t._previousStart==a&&t._previousEnd==e||(r=this.scrollbarContainer._args.call(this,t,r),this._trigger("scrollEnd",r),t._scrollStarted=!1,t._previousStart=a,t._previousEnd=e,t.rectOldWidth=t.rectWidth,this.scrollUpdate?this.scrollUpdate=!1:this.scrollbarContainer._appendScrollRange.call(this,t))),t.release=!0,t.clicked=!1),this._scrollEnd=!1,this.leftScrollbarClicked=!1,this.rightScrollbarClicked=!1,this.scrollRectClicked=!1,this.leftArrowClicked=!1,this.rightArrowClicked=!1,this.scrollbarBackRectClicked=!1},_leftScrollbarDown:function(e){e.preventDefault(),this.leftScrollbarClicked=!0,this.downClientX=(ej.isNullOrUndefined(e.clientX)?e.originalEvent.touches[0]:e).clientX},_rightScrollbarDown:function(e){e.preventDefault(),this.rightScrollbarClicked=!0,this.downClientX=(ej.isNullOrUndefined(e.clientX)?e.originalEvent.touches[0]:e).clientX},_scrollSelectRectDown:function(e){var t=this.scrollbarContainer._doScrollIndex.call(this,e);g("#"+this._id+"_scrollbarSelect_"+t.index).attr("class","e-rangeScroll-select e-rangeScroll-select-hover"),e.preventDefault();var i=jQuery.uaMatch(navigator.userAgent),s=this.model.padding||0,t=this.scrollbarContainer._doScrollIndex.call(this,e);s=!this.vmlRendering&&"[object TouchEvent]"!==e.originalEvent.toString()&&"msie"!=i.browser.toLowerCase()||this.vmlRendering?("horizontal"==t.orientation?this.calMousePosition(e).X-t.x:t.width-(this.calMousePosition(e).Y-t.y))-s:("horizontal"==t.orientation?this.calTouchPosition(e).X-t.x:t.width-(this.calTouchPosition(e).Y-t.y))-s,this.mouseDownPos=s,t._startX=t.startX=t.offsetLeftX,t._offsetRightX=t.offsetRightX,t.clicked=!0,t.release=!1,this.scrollRectClicked=!0},_scrollMouseWheel:function(e){e.preventDefault();var t=this.scrollbarContainer._doScrollIndex.call(this,e),i=!!navigator.userAgent.match(/Trident\/7\./),s=e.originalEvent.wheelDelta,s="mozilla"!=jQuery.uaMatch(navigator.userAgent).browser.toLowerCase()||i?0<s/120?1:-1:0<-e.originalEvent.detail/3?1:-1,e=Math.max(1/ej.EjSvgRender.utils._minMax(t.zoomFactor,0,1),1),s=Math.max(e+.25*s,1);this.scrollbarContainer.doMouseWheelZoom.call(this,s,.5,t)},_scrollStartArgs:function(e){var t;e._scrollStarted=!0,""==this.model.scrollStart||this._scrollEnd||(t=g.extend({},ej.EjSvgRender.commonChartEventArgs),e.isZooming?t.data={axis:this.model._axes[e.index],currentRange:this.model._axes[e.index].visibleRange}:t.data={startRange:"datetime"==e.valueType?e.startDateTime:e.startValue,endRange:"datetime"==e.valueType?e.endDateTime:e.endValue},this._trigger("scrollStart",t),this._scrollEnd=!0)},_scrollChangeArgs:function(e){var t,i,s,n,a,r;!1!==this.model.enableDeferredUpdate&&!e.isZooming&&""==this.model.scrollChanged||(i=(t=this.scrollbarContainer._calculateRange.call(this,e.offsetLeftX,e.offsetRightX,e)).data.oldRange,r=t.data.newRange,r="datetime"==e.valueType.toLowerCase()?(s=Date.parse(i.start),a=Date.parse(r.start),n=Date.parse(i.end),Date.parse(r.end)):(s=i.start,a=r.start,n=i.end,r.end),""==this.model.scrollChanged||s==a&&n==r||(t=this.scrollbarContainer._args.call(this,e,t),this._trigger("scrollChanged",t)),this.model.enableDeferredUpdate||(this.scrollUpdate?this.scrollUpdate=!1:this.scrollbarContainer._appendScrollRange.call(this,e)))},_scrollEndArgs:function(e,t){var i,s,n,a,r=this.scrollbarContainer._calculateRange.call(this,e,t.offsetRightX,t);r&&t._scrollStarted&&(i=r.data.oldRange,e=r.data.newRange,e="datetime"==t.valueType.toLowerCase()?(s=Date.parse(i.start),a=Date.parse(e.start),n=Date.parse(i.end),Date.parse(e.end)):(s=i.start,a=e.start,n=i.end,e.end),(s!=a||n!=e||this.leftScrollbarClicked||this.rightScrollbarClicked)&&(r=this.scrollbarContainer._args.call(this,t,r),this._trigger("scrollEnd",r)),t._scrollStarted=!1,this.scrollUpdate?this.scrollUpdate=!1:this.scrollbarContainer._appendScrollRange.call(this,t))},_args:function(e,t){var i,s;return e.isZooming&&(i=this.model._axes[e.index],(s=t.data).axis=i,s.newRange=i.visibleRange,s.oldRange=i.previousRange),e.isVirtual&&(t.data.axis=this.model._axes[e.index],delete t.data.zoomFactor,delete t.data.zoomPosition),t},doMouseWheelZoom:function(e,t,i){return 1<=e&&(t=this.scrollbarContainer.calZoomFactors(e,t,i.zoomFactor,i.zoomPosition),i.zoomPosition!=t.zoomMPosition&&t.zoomMPosition+i.zoomFactor<=1&&0<=i.zoomPosition&&(1<=t.zoomMPosition+i.zoomFactor&&(t.zoomMPosition=1-i.zoomFactor),t.zoomMPosition<0&&(t.zoomMPosition=0),i.zoomPosition=t.zoomMPosition,i.startX=i.zoomPosition*(i.width-30-i._diff)+15,i.startX=i.startX+i.rectWidth+5>i.width?i.width-i.rectWidth-15:i.startX,i.offsetLeftX=i.startX,i._offsetRightX=i.startX+i.rectWidth,i._offsetRightX>i.width-15?(i.offsetRightX=i.width-15,i.startX=i.offsetRightX-i.rectWidth,i.offsetLeftX=i.startX):i.offsetRightX=i._offsetRightX,i.endX=i.width-i.offsetRightX,this.scrollbarContainer._setScrollPosition.call(this,i.startX,i.offsetRightX,i),this.scrollbarContainer._calculateMouseWheelRange.call(this,i.startX,i.offsetRightX,i))),!1},_calculateMouseWheelRange:function(e,t,i){var s,n;i.zoomFactor=i.rectWidth/(i.width-30),i.zoomPosition=(e-15)/(i.width-30-i._diff),e=i.scrollRange,i.isRTL?l=(d=e.max-i.zoomPosition*e.delta)-i.zoomFactor*e.delta:d=(l=e.min+i.zoomPosition*e.delta)+i.zoomFactor*e.delta,"datetime"==i.valueType?(s=i.startDateTime,n=i.endDateTime,i.startDateTime=this.startDateTime=l=new Date(l),i.endDateTime=this.endDateTime=d=new Date(d)):(s=parseInt(i.startValue),n=parseInt(i.endValue),i.startValue=this.startValue=l=Math.ceil(l),i.endValue=this.endValue=d=Math.ceil(d));e=g.extend({},ej.EjSvgRender.commonChartEventArgs);e.data={zoomPosition:i.zoomPosition,zoomFactor:i.zoomFactor,oldRange:{start:s,end:n},newRange:{start:l,end:d}},i._scrollChanged=!0,i._scrollStarted=!1;var a,r,o,l=e.data.oldRange,d=e.data.newRange,d="datetime"==i.valueType.toLowerCase()?(a=Date.parse(l.start),o=Date.parse(d.start),r=Date.parse(l.end),Date.parse(d.end)):(a=l.start,o=d.start,r=l.end,d.end);a==o&&r==d&&!i.isZooming||(this.scrollbarContainer._scrollStartArgs.call(this,i),e=this.scrollbarContainer._args.call(this,i,e),this._trigger("scrollEnd",e),this.scrollUpdate?this.scrollUpdate=!1:this.scrollbarContainer._appendScrollRange.call(this,i),this._scrollEnd=!1)},calZoomFactors:function(e,t,i,s){var n,t=1==e?(n=1,0):s+(i-(n=ej.EjSvgRender.utils._minMax(1/e,0,1)))*t;return{zoomMFactor:n,zoomMPosition:t}},_leftArrowDown:function(e){this.leftArrowClicked=!0;var t=this.scrollbarContainer._doScrollIndex.call(this,e);t._startX=t.startX=t.offsetLeftX,t._offsetRightX=t.offsetRightX,t.leftIncrement=5;var i=this;t.interval=setInterval(function(){i.scrollbarContainer.leftArrowRecursive.call(i,t)},50)},_leftArrowUp:function(e){this.leftArrowClicked=!1;e=this.scrollbarContainer._doScrollIndex.call(this,e);this.scrollbarContainer.leftArrowRecursive.call(this,e)},leftArrowRecursive:function(e){this.leftArrowClicked?(this._id,this.scrollbarContainer._calculateScrollLeftMove.call(this,e.leftIncrement,e),e._scrollStarted=!0,15<e.startX&&this.scrollbarContainer._scrollEndArgs.call(this,e.startX,e),this.scrollbarContainer._setScrollPosition.call(this,e.startX,e.offsetRightX,e),e.leftIncrement+=5):(clearInterval(e.interval),e.leftIncrement=0)},_rightArrowDown:function(e){this.rightArrowClicked=!0;var t=this.scrollbarContainer._doScrollIndex.call(this,e);t._startX=t.startX=t.offsetLeftX,t._offsetRightX=t.offsetRightX,t.rightIncrement=-5;var i=this;t.interval=setInterval(function(){i.scrollbarContainer.rightArrowRecursive.call(i,t)},50)},_rightArrowUp:function(e){this.rightArrowClicked=!1;e=this.scrollbarContainer._doScrollIndex.call(this,e);this.scrollbarContainer.rightArrowRecursive.call(this,e)},rightArrowRecursive:function(e){this.rightArrowClicked?(this._id,this.scrollbarContainer._calculateScrollRightMove.call(this,e.rightIncrement,e),e._scrollStarted=!0,e.offsetRightX<e.width-15&&this.scrollbarContainer._scrollEndArgs.call(this,e._startX,e),this.scrollbarContainer._setScrollPosition.call(this,e._startX,e.offsetRightX,e),e.rightIncrement-=5):(clearInterval(e.interval),e.rightIncrement=0)},_scrollBackRectDown:function(e){var t=jQuery.uaMatch(navigator.userAgent),i=this.model.padding||0,s=this.scrollbarContainer._doScrollIndex.call(this,e);i=!this.vmlRendering&&"[object TouchEvent]"!==e.originalEvent.toString()&&"msie"!=t.browser.toLowerCase()||this.vmlRendering?("horizontal"==s.orientation?this.calMousePosition(e).X-s.x:s.width-(this.calMousePosition(e).Y-s.y))-i:("horizontal"==s.orientation?this.calTouchPosition(e).X-s.x:s.width-(this.calTouchPosition(e).Y-s.y))-i,this.mouseDownPos=i,this.scrollbarBackRectClicked=!0;var n=this;this.scrollbarContainer._scrollStartArgs.call(this,s);var a=setInterval(function(){n.scrollbarContainer.scrollBackRectRecursive.call(n,s),this.scrollbarBackRectClicked||clearInterval(a)},50)},_scrollBackRectUp:function(e){this.scrollbarBackRectClicked=!1;e=this.scrollbarContainer._doScrollIndex.call(this,e);this.scrollbarContainer.scrollBackRectRecursive.call(this,e)},_doScrollIndex:function(e){var t=this._id+"_scrollbar_",e=e.target.parentNode&&e.target.parentNode.id?e.target.parentNode.id:"",t=-1<e.indexOf(t)?parseInt(e.substr(t.length)):NaN;return ej.isNullOrUndefined(this.lastIndex)||isNaN(this.lastIndex)||!this.model.scrollObj[this.lastIndex].release&&this.model.scrollObj[this.lastIndex].clicked&&(t=this.lastIndex),this.lastIndex=ej.isNullOrUndefined(this.lastIndex)?t:this.lastIndex,ej.isNullOrUndefined(this.model.scrollObj[t])?this.model.scrollObj[this.lastIndex]:this.model.scrollObj[t]},scrollBackRectRecursive:function(e){var t;this.scrollbarBackRectClicked?(t=.1*(e.width-30),e._startX=e.startX=e.offsetLeftX,e._offsetRightX=e.offsetRightX,this.mouseDownPos<e.startX?(t=t<e.startX?t:e.startX-16,this.scrollbarContainer._calculateScrollLeftMove.call(this,t,e),e._scrollStarted=!0,this.scrollbarContainer._scrollEndArgs.call(this,e.startX,e),this.scrollbarContainer._setScrollPosition.call(this,e.startX,e.offsetRightX,e)):this.mouseDownPos>e.offsetRightX?(t=-1*(t<e.endX?t:e.endX-16),this.scrollbarContainer._calculateScrollRightMove.call(this,t,e),e._scrollStarted=!0,this.scrollbarContainer._scrollEndArgs.call(this,e._startX,e),this.scrollbarContainer._setScrollPosition.call(this,e._startX,e.offsetRightX,e)):e._scrollStarted=!1):e._scrollStarted=!1},_appendScrollRange:function(e){var t;this.scrollbarUpdate=!0,"ejRangeNavigator"==this.pluginName?this.renderNavigator():(t=e.index,t=this.model._axes[t],!e.isZooming||t.zoomFactor==e.zoomFactor&&t.zoomPosition==e.zoomPosition||(t.zoomFactor=e.zoomFactor,t.zoomPosition=e.zoomPosition,this.redraw(!0))),this.scrollbarUpdate=!1}}}(jQuery),window.ej=window.Syncfusion=window.Syncfusion||{},function(v,b,e,g){"use strict";b.DataManager=function(e,t,i){if(!(this instanceof b.DataManager))return new b.DataManager(e,t,i);e=e||[],"string"==typeof(i=i||e.adaptor)&&(i=new b[i]);var s=[],n=this;return e instanceof Array?s={json:e,offline:!0}:"object"==typeof e?v.isPlainObject(e)?(e.json||(e.json=[]),e.table&&(e.json=this._getJsonFromElement(e.table,e.headerOption)),s={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,async:e.async,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,antiForgery:e.antiForgery,jsonp:e.jsonp,dataType:e.dataType,enableAjaxCache:e.enableAjaxCache,offline:e.offline!==g?e.offline:!("remoteSaveAdaptor"==e.adaptor||e.adaptor instanceof b.remoteSaveAdaptor)&&!e.url,requiresFormat:e.requiresFormat}):(e.jquery||A(e))&&(s={json:this._getJsonFromElement(e),offline:!0,table:e}):"string"==typeof e&&(s={url:e,offline:!1,dataType:"json",json:[]}),s.requiresFormat!==g||b.support.cors||(s.requiresFormat=!!V(s.crossDomain)||s.crossDomain),s.antiForgery&&this.antiForgeryToken(),s.dataType===g&&(s.dataType="json"),this.dataSource=s,this.defaultQuery=t,s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=i||new b.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(t||b.Query()).done(function(e){n.dataSource.offline=!0,n.isDataAvailable=!0,s.json=e.result,n.adaptor=new b.JsonAdaptor})):this.adaptor=new(s.offline?b.JsonAdaptor:b.ODataAdaptor),!s.jsonp&&this.adaptor instanceof b.ODataAdaptor&&(s.jsonp="callback"),this.adaptor=i||this.adaptor,s.enableCaching&&(this.adaptor=new b.CacheAdaptor(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this},b.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(e,t,i,s){"function"==typeof e&&(s=i,i=t,t=e,e=null),(e=e||this.defaultQuery)instanceof b.Query||B("DataManager - executeQuery() : A query is required to execute");var n=v.Deferred();n.then(t,i,s);var a,r={query:e};return this.dataSource.offline||this.dataSource.url==g?b.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?k(function(){this._localQueryProcess(e,r,n)},this):this._localQueryProcess(e,r,n):(a=this.adaptor.processQuery(this,e),b.isNullOrUndefined(a.url)?k(function(){r=this._getDeferedArgs(e,a,r),n.resolveWith(this,[r])},this):this._makeRequest(a,n,r,e)),n.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=P(e._fromTable,i.result,this),i.getKnockoutModel=M(i.result),i},executeLocal:function(e){this.defaultQuery||e instanceof b.Query||B("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||B("DataManager - executeLocal() : Json data is required to execute"),e=e||this.defaultQuery;var t=this.adaptor.processQuery(this,e);if(e._subQuery){var i=e._subQuery._fromTable,s=e._subQuery._lookup,n=e._requiresCount?t.result:t;s&&s instanceof Array&&r(e._subQuery._fKey,i,n,s,e._subQuery._key);for(var a=0;a<n.length;a++)n[a][i]instanceof Array&&(n[a]=v.extend({},n[a]),n[a][i]=this.adaptor.processResponse(e._subQuery.using(b.DataManager(n[a][i].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(t,this,e)},_makeRequest:function(e,o,l,d){var h=!!d._subQuerySelector,n=z(function(e){l.error=e,o.rejectWith(this,[l])},this),c=z(function(e,t,i,s,n,a,r){h||(l.xhr=i,l.count=parseInt(t,10),l.result=e,l.request=s,l.aggregates=a,l.getTableModel=P(d._fromTable,e,this),l.getKnockoutModel=M(e),l.actual=n,l.virtualSelectRecords=r,o.resolveWith(this,[l]))},this),u=z(function(t,e){var i=v.Deferred(),s={parent:l};d._subQuery._isChild=!0;e=this.adaptor.processQuery(this,d._subQuery,t?this.adaptor.processResponse(t):e),s=this._makeRequest(e,i,s,d._subQuery);return h||i.then(function(e){t&&(r(d._subQuery._fKey,d._subQuery._fromTable,t,e,d._subQuery._key),c(t))},n),s},this),t=N(function(e,t,i,s){-1==i.getResponseHeader("Content-Type").indexOf("xml")&&b.dateParse&&(e=b.parseJSON(e));var n=this.adaptor.processResponse(e,this,d,i,s),a=0,r=null,o=e.virtualSelectRecords;d._requiresCount&&(a=n.count,r=n.aggregates,n=n.result),d._subQuery?h||u(n):c(n,a,i,s,e,r,o)},this),t=v.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!!b.isNullOrUndefined(this.dataSource.enableAjaxCache)||this.dataSource.enableAjaxCache,beforeSend:z(this._beforeSend,this),processData:!1,success:t,error:n},e);return"async"in this.dataSource&&(t.async=this.dataSource.async),t=v.ajax(t),h&&((e=d._subQuerySelector.call(this,{query:d._subQuery,parent:d}))&&e.length?(t=v.when(t,u(null,e))).then(N(function(e,t,i){var s=this.adaptor.processResponse(e[0],this,d,e[2],i[0]),n=0;d._requiresCount&&(n=s.count,s=s.result);i=this.adaptor.processResponse(t[0],this,d._subQuery,t[2],i[1]),n=0;d._subQuery._requiresCount&&(n=i.count,i=i.result),r(d._subQuery._fKey,d._subQuery._fromTable,s,i,d._subQuery._key),h=!1,c(s,n,e[2])},this),n):h=!1),t},_beforeSend:function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,s=this.dataSource.headers,n=0;s&&n<s.length;n++)for(var a in i=[],s[n])i.push(a),e.setRequestHeader(a,s[n][a])},saveChanges:function(n,a,e,t){e instanceof b.Query&&(t=e,e=null);e={url:e,key:a||this.dataSource.key},t=this.adaptor.batchRequest(this,n,e,t);if(this.dataSource.offline)return t;var r=v.Deferred();return v.ajax(v.extend({beforeSend:z(this._beforeSend,this),success:N(function(e,t,i,s){r.resolveWith(this,[this.adaptor.processResponse(e,this,null,i,s,n,a)])},this),error:function(e){r.rejectWith(this,[{error:e}])}},t)),r.promise()},insert:function(e,t,i){e=x.replacer(e,!0),t instanceof b.Query&&(i=t,t=null);i=this.adaptor.insert(this,e,t,i);if(this.dataSource.offline)return i;var n=v.Deferred();return v.ajax(v.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},i)),n.promise()},antiForgeryToken:function(){return b.isNullOrUndefined(v("input[name='_ejRequestVerifyToken']").val())?b.buildTag("input","","",{type:"hidden",name:"_ejRequestVerifyToken",value:b.getGuid()}).appendTo("body"):v("input[name='_ejRequestVerifyToken']").val(b.getGuid()),b.cookie.set("_ejRequestVerifyToken",v("input[name='_ejRequestVerifyToken']").val()),{name:"_ejRequestVerifyToken",value:v("input[name='_ejRequestVerifyToken']").val()}},remove:function(e,t,i,s){"object"==typeof t&&(t=t[e]),i instanceof b.Query&&(s=i,i=null);s=this.adaptor.remove(this,e,t,i,s);if(this.dataSource.offline)return s;var n=v.Deferred();return v.ajax(v.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},s)),n.promise()},update:function(e,t,i,s){t=x.replacer(t,!0),i instanceof b.Query&&(s=i,i=null);s=this.adaptor.update(this,e,t,i,s);if(this.dataSource.offline)return s;var n=v.Deferred();return v.ajax(v.extend({contentType:"application/json; charset=utf-8",beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},s)),n.promise()},_getJsonFromElement:function(e){"string"==typeof e&&(e=v(v(e).html()));var t=(e=e.jquery?e[0]:e).tagName.toLowerCase();return"table"!==t&&B("ej.DataManager : Unsupported htmlElement : "+t),b.parseTable(e)}};var r=function(e,t,i,s,n){var a,r={};for(s.result&&(s=s.result),s.GROUPGUID&&B("ej.DataManager: Do not have support Grouping in hierarchy"),a=0;a<s.length;a++){var o=b.getObject(e,s[a]);(r[o]||(r[o]=[])).push(s[a])}for(a=0;a<i.length;a++)i[a][t]=r[b.getObject(n||e,i[a])]},a="application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",s="multipart/mixed",o="--changeset_",l="batch_",d="Content-Type: application/http\nContent-Transfer-Encoding: binary ",h="Content-Type: application/json; charset=utf-8 ",x={parseJson:function(e){var t=typeof e;return"string"==t?e=JSON.parse(e,x.jsonReviver):e instanceof Array?x.iterateAndReviveArray(e):"object"==t&&x.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?x.iterateAndReviveJson(e[t]):"string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?e[t]=x.parseJson(e[t]):e[t]=x.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t,i;for(i in e)i.startsWith("__")||("object"==typeof(t=e[i])?t instanceof Array?x.iterateAndReviveArray(t):x.iterateAndReviveJson(t):e[i]=x.jsonReviver(i,t))},jsonReviver:function(e,t){var i=t,s=/[\-,/,\,.,:,]+/;if("string"==typeof t){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(n)return b.parseDateInUTC?x.isValidDate(n[0]):x.replacer(new Date(parseInt(n[1])));(b.dateParse?/^(?:(\d{4}\-\d\d\-\d\d)|(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?)$/:/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/).test(t)&&(i=i.split(/[^0-9]/),/^(\d{4}\-\d\d\-\d\d)$/.test(t)?t=new Date(i[b.dateFormat.split(s).indexOf("yyyy")],i[b.dateFormat.split(s).indexOf("MM")]-1,i[b.dateFormat.split(s).indexOf("dd")]):(t=b.parseDateInUTC?x.isValidDate(t):x.replacer(new Date(t)),isNaN(t)&&(t=x.replacer(new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5])))))}return t},isValidDate:function(e){var t=e;return"string"==typeof t&&0==t.indexOf("/Date(")&&(e=t.replace(/\d+/,function(e){var t=6e4*new Date(parseInt(e)).getTimezoneOffset(),t=parseInt(e)+t;return x.replacer(new Date(parseInt(t)))})),"string"!=typeof e?e:(e=(e=e.replace("/Date(",function(){return""})).replace(")/",function(){return""}),new Date(e)instanceof Date?new Date(e):e)},isJson:function(e){return"string"==typeof e[0]?e:b.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e,t){return b.isPlainObject(e)?x.jsonReplacer(e,t):e instanceof Array?x.arrayReplacer(e):e instanceof Date?x.jsonReplacer({val:e},t).val:e},jsonReplacer:function(e,t){var i,s,n;for(i in e)(n=e[i])instanceof Date&&(s=60*b.serverTimezoneOffset*60*1e3*(b.isNullOrUndefined(t)||!1===t?1:-1),e[i]=new Date(+n+s));return e},arrayReplacer:function(e){for(var t=0;t<e.length;t++)b.isPlainObject(e[t])?e[t]=x.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=x.jsonReplacer({date:e[t]}).date);return e}};b.isJSON=x.isJson,b.parseJSON=x.parseJson,b.dateParse=!0,b.dateFormat="yyyy-MM-dd",b.isGUID=x.isGuid,b.Query=function(e){return this instanceof b.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new b.Query(e)},b.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof b.DataManager?(this.dataManagar=e,this):B("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,t,i,s){return(e=e||this.dataManagar)&&e instanceof b.DataManager?e.executeQuery(this,t,i,s):B("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return(e=e||this.dataManagar)&&e instanceof b.DataManager?e.executeLocal(this):B("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new b.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,t){return"function"==typeof t||b.isPlainObject(t)?"function"==typeof t&&this._params.push({key:e,fn:t}):this._params.push({key:e,value:t}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,t,i,s,n){t=(t||b.FilterOperators.equal).toLowerCase();var a=null;return"string"==typeof e?a=new b.Predicate(e,t,i,s,n):e instanceof b.Predicate?a=e:B("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:a}),this},search:function(e,t,i,s,n){t&&"boolean"!=typeof t?"string"==typeof t&&(t=[t]):s=t=[],"boolean"==typeof i&&(s=i,i=null),(i=i||b.FilterOperators.contains).length<3&&(i=b.data.operatorSymbols[i]);var a=b.data.fnOperators[i]||b.data.fnOperators.processSymbols(i);return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:s,ignoreAccent:n,comparer:a}}),this},sortBy:function(e,t,i){var s,n,a=b.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),t=b.sortOrder.Descending),e instanceof Array){for(var r=0;r<e.length;r++)this.sortBy(e[r],t,i);return this}if("boolean"==typeof t?t=t?b.sortOrder.Descending:b.sortOrder.Ascending:"function"==typeof t&&(a="custom"),t&&"string"!=typeof t||(a=t?t.toLowerCase():b.sortOrder.Ascending,t=b.pvt.fnSort(t)),i){s=y(this.queries,"onSortBy");for(r=0;r<s.length;r++)if("string"==typeof(n=s[r].e.fieldName)){if(n===e)return this}else if(n instanceof Array)for(var o=0;o<n.length;o++)if(n[o]===e||e.toLowerCase()===n[o]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:t,direction:a}}),this},sortByDesc:function(e){return this.sortBy(e,b.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return"number"==typeof e&&"number"==typeof t||B("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&B("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&B("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||B("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,t){return e&&e instanceof b.Query||B("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof t&&(this._subQuerySelector=t),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},b.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},b.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",antiForgery:"antiForgery"},init:function(){},extend:function(e){function t(e){this.dataSource=e,this.options&&(this.options=v.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}}var i,s=((t.prototype=new this.type).type=t).prototype.base={};for(i in e)t.prototype[i]&&(s[i]=t.prototype[i]);return v.extend(!0,t.prototype,e),t},processQuery:function(e,t){},processResponse:function(e,t,i,s){return e.d||e},convertToQueryString:function(e,t,i){return v.param(e)},type:b.Adaptor},b.UrlAdaptor=(new b.Adaptor).extend({processQuery:function(e,t,i){var s,n,a=y(t.queries,"onSortBy"),r=y(t.queries,"onGroup"),o=y(t.queries,"onWhere"),l=y(t.queries,"onSearch"),d=y(t.queries,"onAggregates"),h=w(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),c=t._params,u=e.dataSource.url,p=null,m=this.options,g={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};h.onPage?(s=h.onPage,n=((n=S(s.pageIndex,t))-1)*(p=S(s.pageSize,t))):h.onRange&&(n=(s=h.onRange).start,p=s.end-s.start);for(var f=0;f<a.length;f++)s=S(a[f].e.fieldName,t),g.sorted.push(C(this,"onEachSort",{name:s,direction:a[f].e.direction},t));i&&(s=this.getFiltersFrom(i,t))&&g.filters.push(C(this,"onEachWhere",s.toJSON(),t));for(f=0;f<o.length;f++)for(var _ in g.filters.push(C(this,"onEachWhere",o[f].e.toJSON(),t)),g.filters[f])V(g[_])&&delete g[_];for(f=0;f<l.length;f++)s=l[f].e,g.searches.push(C(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(f=0;f<r.length;f++)g.grouped.push(S(r[f].e.fieldName,t));for(f=0;f<d.length;f++)s=d[f].e,g.aggregates.push({type:s.type,field:S(s.field,t)});var v={};for(_ in v[m.from]=t._fromTable,m.expand&&(v[m.expand]=t._expands),v[m.select]=h.onSelect?C(this,"onSelect",S(h.onSelect.fieldNames,t),t):"",v[m.count]=t._requiresCount?C(this,"onCount",t._requiresCount,t):"",v[m.search]=g.searches.length?C(this,"onSearch",g.searches,t):"",v[m.skip]=h.onSkip?C(this,"onSkip",S(h.onSkip.nos,t),t):"",v[m.take]=h.onTake?C(this,"onTake",S(h.onTake.nos,t),t):"",v[m.antiForgery]=e.dataSource.antiForgery?e.antiForgeryToken().value:"",v[m.where]=g.filters.length||g.searches.length?C(this,"onWhere",g.filters,t):"",v[m.sortBy]=g.sorted.length?C(this,"onSortBy",g.sorted,t):"",v[m.group]=g.grouped.length?C(this,"onGroup",g.grouped,t):"",v[m.aggregates]=g.aggregates.length?C(this,"onAggregates",g.aggregates,t):"",v.param=[],C(this,"addParams",{dm:e,query:t,params:c,reqParams:v}),v)!V(v[_])&&""!==v[_]&&0!==v[_].length&&"params"!==_||delete v[_];m.skip in v&&m.take in v||null===p||(v[m.skip]=C(this,"onSkip",n,t),v[m.take]=C(this,"onTake",p,t));p=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(v),url:u,ejPvtData:p,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(v,t,e),{type:"GET",url:(s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s).length?u.replace(/\/*$/,s):u,ejPvtData:p})},convertToQueryString:function(e,t,i){return i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")?v.param(e):"?"+v.param(e)},processResponse:function(e,t,i,s,n,a){var r=n.ejPvtData||{},o=e.groupDs;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];n=JSON.parse(n.data);if(n&&"batch"===n.action&&e.added)return a.added=e.added,a;if(e.d&&(e=e.d),r&&r.aggregates&&r.aggregates.length){var l,d=r.aggregates,h={},c={};"count"in e&&(h.count=e.count),e.result&&(h.result=e.result),e.aggregate&&(e=e.aggregate);for(var u=0;u<d.length;u++)(l=b.aggregates[d[u].type])&&(c[d[u].field+" - "+d[u].type]=l(e,d[u].field));h.aggregates=c,e=h}if(r&&r.groups&&r.groups.length){var p=r.groups,h={};"count"in e&&(h.count=e.count),e.aggregates&&(h.aggregates=e.aggregates),e.result&&(e=e.result);for(u=0;u<p.length;u++){var m=D(p[u],i.queries);b.isNullOrUndefined(o)||(o=b.group(o,p[u],null,m)),e=b.group(e,p[u],r.aggregates,m,null,o)}return h.count!=g?h.result=e:h=e,h}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){i={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i)}},beforeSend:function(e,t){},insert:function(e,t,i,s){i={value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(i)}},remove:function(e,t,i,s,n){s={key:i,keyColumn:t,table:s,action:"remove",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:s}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(s)}},update:function(e,t,i,s,n){s={value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:s}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(s)}},getFiltersFrom:function(e,t){e instanceof Array&&e.length||B("ej.SubQuery: Array of key values required");var i,s=t._fKey,n=s,a=t._key,r=[],o="object"!=typeof e[0];"object"!=typeof e[0]&&(n=null);for(var l=0;l<e.length;l++)i=o?e[l]:b.pvt.getObject(a||n,e[l]),r.push(new b.Predicate(s,"==",i));return b.Predicate.or(r)},addParams:function(e){var t=e.dm,i=e.query,s=e.params,n=e.reqParams;n.params={};for(var a,r=0;a=s[r];r++)n[a.key]&&B("ej.Query: Custom Param is conflicting other request arguments"),n[a.key]=a.value,a.fn&&(n[a.key]=a.fn.call(i,a.key,i,t)),n.params[a.key]=n[a.key]}}),b.WebMethodAdaptor=(new b.UrlAdaptor).extend({processQuery:function(e,t,i){var s=b.UrlAdaptor.prototype.processQuery(e,t,i),n=b.parseJSON(s.data),i={};return i.value=n,C(this,"addParams",{dm:e,query:t,params:t._params,reqParams:i}),{data:JSON.stringify(i),url:s.url,ejPvtData:s.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t=e.dm,i=e.query,s=e.params,n=e.reqParams;n.params={};for(var a,r=0;a=s[r];r++){n[a.key]&&B("ej.Query: Custom Param is conflicting other request arguments");var o=a.key,l=a.value;a.fn&&(l=a.fn.call(i,a.key,i,t)),n[o]=l,n.params[o]=n[o]}}}),b.CacheAdaptor=(new b.UrlAdaptor).extend({init:function(e,s,t){b.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=t,this.guidId=b.getGuid("cacheAdaptor");window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}));var n=this.guidId;b.isNullOrUndefined(s)||setInterval(function(){for(var e=b.parseJSON(window.localStorage.getItem(n)),t=[],i=0;i<e.results.length;i++)e.results[i].timeStamp=new Date-new Date(e.results[i].timeStamp),new Date-new Date(e.results[i].timeStamp)>s&&t.push(i);for(i=0;i<t.length;i++)e.results.splice(t[i],1),e.keys.splice(t[i],1);window.localStorage.removeItem(n),window.localStorage.setItem(n,JSON.stringify(e))},s)},generateKey:function(e,t){var i=y(t.queries,"onSortBy"),s=y(t.queries,"onGroup"),n=y(t.queries,"onWhere"),a=y(t.queries,"onSearch"),r=(y(t.queries,"onPage"),w(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),o=(t._params,e);r.onPage&&(o+=r.onPage.pageIndex),i.forEach(function(e){o+=e.e.direction+e.e.fieldName}),s.forEach(function(e){o+=e.e.fieldName}),a.forEach(function(e){o+=e.e.searchKey});for(var l=0;l<n.length;l++){var d=n[l];if(d.e.isComplex){var h=t.clone();h.queries=[];for(var c=0;c<d.e.predicates.length;c++)h.queries.push({fn:"onWhere",e:d.e.predicates[c],filter:t.queries.filter});o+=d.e.condition+this.generateKey(e,h)}else o+=d.e.field+d.e.operator+d.e.value}return o},processQuery:function(e,t,i){var s,t=this.generateKey(e.dataSource.url,t);window.localStorage&&(s=b.parseJSON(window.localStorage.getItem(this.guidId)));t=s?s.results[s.keys.indexOf(t)]:null;return null==t||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):t},processResponse:function(e,t,i,s,n,a){if(this._insertAction||n&&this.cacheAdaptor.options.batch&&n.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,s,n,a);var e=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),t=this.generateKey(t.dataSource.url,i),r={};window.localStorage&&(r=b.parseJSON(window.localStorage.getItem(this.guidId)));i=v.inArray(t,r.keys);for(-1!=i&&(r.results.splice(i,1),r.keys.splice(i,1)),r.results[r.keys.push(t)-1]={keys:t,result:e.result,timeStamp:new Date,count:e.count};r.results.length>this.pageSize;)r.results.splice(0,1),r.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(r)),e},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var y=function(e,t){return e.filter(function(e){return e.fn===t})||[]},w=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},n=0;n<i.length;n++)s[i[n].fn]||(s[i[n].fn]=i[n].e);return s},C=function(e,t,i,s){return e[t]&&(s=e[t](i,s),V(s)||(i=s)),i};b.ODataAdaptor=(new b.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},_typeStringQuery:function(e,t,i,s,n){-1!=i.indexOf("'")&&(i=i.replace(new RegExp(/'/g),"''"));return/[ !@@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(i)&&(i=encodeURIComponent(i)),i="'"+i+"'",t&&(s="cast("+s+", 'Edm.String')"),b.isGUID(i)&&(n="guid"),e.ignoreCase&&(n||(s="tolower("+s+")"),i=i.toLowerCase()),{val:i,guid:n,field:s}},onPredicate:function(e,t,i){var s,n,a,r="",o=e.value,l=typeof o,d=this._p(e.field);if(o instanceof Date&&(o="datetime'"+x.replacer(o).toJSON()+"'"),"string"==l&&(o=(h=this._typeStringQuery(e,i,o,d,n)).val,d=h.field,n=h.guid),s=b.data.odBiOperator[e.operator],""!=e.anyCondition&&s)return r+=o.table,r+="/"+e.anyCondition,r+="(d:d/",r+=d,r+=s,r+=o.value,r+=")";if("in"!=e.operator&&"notin"!=e.operator)return s?this.onOperation(r,s,d,o,n):(s=b.data.odUniOperator[e.operator])&&"string"==l?("substringof"===s&&(l=o,o=d,d=l),r+=s+"(",r+=d+",",n&&(r+=n),r+=o+")","notcontains"==e.operator&&(r+=" eq false"),""!=e.anyCondition&&s?(a+=o.table,a+="/"+e.anyCondition,a+="(d:d/",r+=r,a+=")"):r):"";r+="(";for(var h,c=0;c<o.length;c++)o[c]instanceof Date&&(o[c]="datetime'"+x.replacer(o[c]).toJSON()+"'"),"string"==typeof o[c]&&(h=this._typeStringQuery(e,i,o[c],d,n),o[c]=h.val,d=h.field,n=h.guid),r+=d,r+=s,r+=o[c],c!=o.length-1&&(r+="in"==e.operator?" or ":" and ");return r+=")"},onOperation:function(e,t,i,s,n){return e+=i,e+=t,n&&(e+=n),e+s},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){0===e.fields.length&&B("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.searches||[],i=0;i<e.fields.length;i++)t.push(new b.Predicate(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.searches=t},onSearch:function(e){return this.pvt.searches=b.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)t.push(this._p(e.name[i]));else t.push(this._p(e.name)+("descending"===e.direction?" desc":""));return t.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",s),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(e,t,i,s,n,a){if(!b.isNullOrUndefined(e.d)){var r=i&&i._requiresCount?e.d.results:e.d;if(!b.isNullOrUndefined(r))for(var o=0;o<r.length;o++)b.isNullOrUndefined(r[o].__metadata)||delete r[o].__metadata}var l=n&&n.ejPvtData;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];if(n&&this.options.batch&&n.url.endsWith(this.options.batch)&&"post"===n.type.toLowerCase()){var d,h,c=(c=s.getResponseHeader("Content-Type")).substring(c.indexOf("=batchresponse")+1);if((e=e.split(c)).length<2)return;e=e[1];var u=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(e);e.replace(u[0],"");for(c=u[1],o=(e=e.split(c)).length;-1<o;o--)/\bContent-ID:/i.test(e[o])&&/\bHTTP.+201/.test(e[o])&&(d=parseInt(/\bContent-ID: (\d+)/i.exec(e[o])[1]),a.added[d]&&(h=x.parseJson(/^\{.+\}/m.exec(e[o])[0]),v.extend(a.added[d],this.processResponse(h))));return a}u=null,c={},s=(s=s&&s.getResponseHeader("DataServiceVersion"))&&parseInt(s,10)||2;if(i&&i._requiresCount&&((e.__count||e["odata.count"])&&(u=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(u=e.__count||e["odata.count"])),3===s&&e.value&&(e=e.value),e.d&&(e=e.d),s<3&&e.results&&(e=e.results),l&&l.aggregates&&l.aggregates.length){for(var p,m=l.aggregates,g={},o=0;o<m.length;o++)(p=b.aggregates[m[o].type])&&(g[m[o].field+" - "+m[o].type]=p(e,m[o].field));c=g}if(l&&l.groups&&l.groups.length)for(var f=l.groups,o=0;o<f.length;o++){var _=D(f[o],i.queries);e=b.group(e,f[o],l.aggregates,_)}return V(u)?e:{result:e,count:u,aggregates:c}},convertToQueryString:function(e,t,i){var s,n=[],a=e.table||"";for(s in delete e.table,i.dataSource.requiresFormat&&(e.$format="json"),e)n.push(s+"="+e[s]);return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!a?n:n.length?a+"?"+n:a||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,t,i,s){return"string"==typeof i?{type:"DELETE",url:b.isGUID(i)?e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")":e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"('"+i+"')"}:{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")"}},update:function(e,t,i,s){t="string"!=typeof i[t]||b.isGUID(i[t])?e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i[t]+")":e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"('"+i[t]+"')";return{type:"PUT",url:t,data:JSON.stringify(i),accept:this.options.accept}},batchRequest:function(e,t,i){var s=i.guid=b.getGuid(l),n=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),e={url:i.url,key:i.key,cid:1,cSet:b.getGuid(o)},i="--"+s+"\n";return i+="Content-Type: multipart/mixed; boundary="+e.cSet.replace("--","")+"\n",this.pvt.changeSet=0,i+=this.generateInsertRequest(t.added,e),i+=this.generateUpdateRequest(t.changed,e),i+=this.generateDeleteRequest(t.deleted,e),i+=e.cSet+"--\n",{type:"POST",url:n,contentType:"multipart/mixed; charset=UTF-8;boundary="+s,data:i+="--"+s+"--"}},generateDeleteRequest:function(e,t){if(!e)return"";for(var i,s="",n=0;n<e.length;n++)s+="\n"+t.cSet+"\n",s+=d+"\n\n",s+="DELETE ",i="string"==typeof e[n][t.key]?"'"+e[n][t.key]+"'":e[n][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+a+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=h+"\n";return s+"\n"},generateInsertRequest:function(e,t){if(!e)return"";for(var i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=d+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+a+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=h+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){if(!e)return"";for(var i,s="",n=0;n<e.length;n++)s+="\n"+t.cSet+"\n",s+=d+"\n\n",s+="PUT ",i="string"==typeof e[n][t.key]?"'"+e[n][t.key]+"'":e[n][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+a+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=h+"\n\n",s+=JSON.stringify(e[n])+"\n\n";return s},_p:function(e){return e.replace(/\./g,"/")}}),b.ODataV4Adaptor=(new b.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,t,i){var s="",n=e.value instanceof Date;return b.data.odUniOperator.contains="contains",s=b.ODataAdaptor.prototype.onPredicate.call(this,e,t,i),b.data.odUniOperator.contains="substringof",n&&(s=s.replace(/datetime'(.*)'$/,"$1")),s},onOperation:function(e,t,i,s,n){return n?(e+="("+i,e+=t,e+=s.replace(/["']/g,"")+")"):(e+=i,e+=t,e+=s),e},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(e){return this.pvt.search.join(" OR ")},beforeSend:function(e,t,i){},processQuery:function(e,t){for(var i=/\/[\d*\/]*/g,s="",n=t._expands.length-1;0<n;n--)if(0<=s.indexOf(t._expands[n]))t._expands.pop();else if(i.test(t._expands[n])){for(var a=(s=t._expands.pop()).replace(i,"($expand="),r=0;r<s.split(i).length-1;r++)a+=")";t._expands.unshift(a),n++}return b.ODataAdaptor.prototype.processQuery.apply(this,[e,t])},processResponse:function(e,t,i,s,n,a){var r=n&&n.ejPvtData;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];if(n&&this.options.batch&&n.url.endsWith(this.options.batch)&&"post"===n.type.toLowerCase()){var o,l,d=(d=s.getResponseHeader("Content-Type")).substring(d.indexOf("=batchresponse")+1);if((e=e.split(d)).length<2)return;e=e[1];var h=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(e);e.replace(h[0],"");for(var d=h[1],c=(e=e.split(d)).length;-1<c;c--)/\bContent-ID:/i.test(e[c])&&/\bHTTP.+201/.test(e[c])&&(o=parseInt(/\bContent-ID: (\d+)/i.exec(e[c])[1]),a.added[o]&&(l=x.parseJson(/^\{.+\}/m.exec(e[c])[0]),v.extend(a.added[o],this.processResponse(l))));return a}h=null,d={};if(i&&i._requiresCount&&"@odata.count"in e&&(h=e["@odata.count"]),e=b.isNullOrUndefined(e.value)?e:e.value,r&&r.aggregates&&r.aggregates.length){for(var u,p=r.aggregates,m={},c=0;c<p.length;c++)(u=b.aggregates[p[c].type])&&(m[p[c].field+" - "+p[c].type]=u(e,p[c].field));d=m}if(r&&r.groups&&r.groups.length)for(var g=r.groups,c=0;c<g.length;c++){var f=D(g[c],i.queries);e=b.group(e,g[c],r.aggregates,f)}return V(h)?e:{result:e,count:h,aggregates:d}}}),b.JsonAdaptor=(new b.Adaptor).extend({processQuery:function(e,t){for(var i,s,n=e.dataSource.json.slice(0),a=n.length,r=!0,o={},l=0;l<t.queries.length;l++)i=this[(s=t.queries[l]).fn].call(this,n,s.e,t),"onAggregates"==s.fn?o[s.e.field+" - "+s.e.type]=i:n=i!==g?i:n,"onPage"!==s.fn&&"onSkip"!==s.fn&&"onTake"!==s.fn&&"onRange"!==s.fn||(r=!1),r&&(a=n.length);return t._requiresCount&&(n={result:n,count:a,aggregates:o}),n},batchRequest:function(e,t,i){for(var s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e&&e.filter(function(e){return t.validate(e)})},onAggregates:function(e,t){var i=b.aggregates[t.type];return e&&i&&0!=e.length?i(e,t.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&b.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var t=0;t<i.fieldNames.length;t++)if(i.comparer.call(e,b.pvt.getObject(i.fieldNames[t],e),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},onSortBy:function(e,t,i){if(!e)return e;var s,n=S(t.fieldName,i);if(!n)return e.sort(t.comparer);if(n instanceof Array){for(var a=(n=n.slice(0)).length-1;0<=a;a--)n[a]&&(s=t.comparer,n[a].endsWith(" desc")&&(s=b.pvt.fnSort(b.sortOrder.Descending),n[a]=n[a].replace(" desc","")),e=O(e,n[a],s,[]));return e}return O(e,n,t.comparer,i?i.queries:[])},onGroup:function(e,t,i){if(!e)return e;var s=y(i.queries,"onAggregates"),n=[];if(s.length)for(var a,r=0;r<s.length;r++)a=s[r].e,n.push({type:a.type,field:S(a.field,i)});var o=D(t.fieldName,i.queries);return b.group(e,S(t.fieldName,i),n,o)},onPage:function(e,t,i){var s=S(t.pageSize,i),i=(S(t.pageIndex,i)-1)*s,s=i+s;return e&&e.slice(i,s)},onRange:function(e,t){return e&&e.slice(S(t.start),S(t.end))},onTake:function(e,t){return e&&e.slice(0,S(t.nos))},onSkip:function(e,t){return e&&e.slice(S(t.nos))},onSelect:function(e,t){return e&&b.select(e,S(t.fieldNames))},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,t,i,s){var n,a=e.dataSource.json;for("object"==typeof i&&(i=b.getObject(t,i)),n=0;n<a.length&&b.getObject(t,a[n])!==i;n++);return n!==a.length?a.splice(n,1):null},update:function(e,t,i,s){for(var n=e.dataSource.json,a=b.getObject(t,i),r=0;r<n.length&&b.getObject(t,n[r])!==a;r++);return r<n.length?v.extend(n[r],i):null}}),b.ForeignKeyAdaptor=function(i,s){var e=(new b[s||"JsonAdaptor"]).extend({init:function(){this.foreignData=[],this.key=[],this.adaptorType=s,this.value=[],this.fValue=[],this.keyField=[];for(var e=i,t=0;t<e.length;t++)this.foreignData[t]=e[t].dataSource,this.key[t]=e[t].foreignKeyField,this.fValue[t]=b.isNullOrUndefined(e[t].field)?e[t].foreignKeyValue:e[t].field+"_"+e[t].foreignKeyValue,this.value[t]=e[t].foreignKeyValue,this.keyField[t]=e[t].field||e[t].foreignKeyField,this.initial=!0},processQuery:function(e,t){var i=e.dataSource.json;if(this.initial){for(var s=0;s<i.length;s++)for(var n=this,a=0;a<this.foreignData.length;a++)this.foreignData[a].filter(function(e){b.getObject(n.key[a],e)==b.getObject(n.keyField[a],i[s])&&(i[s][n.fValue[a]]=b.getObject(n.value[a],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,t])},setValue:function(e){for(var t=0;t<this.foreignData.length;t++){var i=this,s=e[this.fValue[t]];"string"!=typeof s||isNaN(s)||(s=b.parseFloat(s));var n=v.grep(i.foreignData[t],function(e){return e[i.value[t]]==s})[0];b.isNullOrUndefined(n)&&(n=v.grep(i.foreignData[t],function(e){return e[i.key[t]]==s})[0],b.getObject(this.value[t],n)!=g&&b.createObject(i.value[t],b.getObject(this.value[t],n),e)),b.getObject(this.value[t],n)!=g&&b.createObject(this.keyField[t],b.getObject(this.key[t],n),e)}},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}},update:function(e,t,i,s){return this.setValue(i),b.JsonAdaptor.prototype.update(e,t,i,s),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}}});return v.extend(this,new e),this},b.remoteSaveAdaptor=(new b.JsonAdaptor).extend({beforeSend:b.UrlAdaptor.prototype.beforeSend,insert:b.UrlAdaptor.prototype.insert,update:b.UrlAdaptor.prototype.update,remove:b.UrlAdaptor.prototype.remove,addParams:b.UrlAdaptor.prototype.addParams,batchRequest:function(e,t,i,s){i={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i)}},processResponse:function(e,t,i,s,n,a,r){if(b.isNullOrUndefined(a))return e.d||e;var o;for(e.d&&(e=e.d),e.added&&(a.added=b.parseJSON(e.added)),e.changed&&(a.changed=b.parseJSON(e.changed)),e.deleted&&(a.deleted=b.parseJSON(e.deleted)),o=0;o<a.added.length;o++)b.JsonAdaptor.prototype.insert(t,a.added[o]);for(o=0;o<a.changed.length;o++)b.JsonAdaptor.prototype.update(t,r,a.changed[o]);for(o=0;o<a.deleted.length;o++)b.JsonAdaptor.prototype.remove(t,r,a.deleted[o]);return e}}),b.WebApiAdaptor=(new b.ODataAdaptor).extend({insert:function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},batchRequest:function(i,e,s){var n=s.guid=b.getGuid(l),a=[];return v.each(e.added,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("POST "+i.dataSource.insertUrl+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),v.each(e.changed,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("PUT "+i.dataSource.updateUrl+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),v.each(e.deleted,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("DELETE "+i.dataSource.removeUrl+"/"+t[s.key]+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),a.push("--"+n+"--",""),{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,data:a.join("\r\n"),contentType:'multipart/mixed; boundary="'+n+'"'}},processResponse:function(e,t,i,s,n,a){var r=n&&n.ejPvtData;if(n&&"post"!=n.type.toLowerCase()){var o=null,n={},s=(s=s&&s.getResponseHeader("DataServiceVersion"))&&parseInt(s,10)||2;if(i&&i._requiresCount&&(V(e.Count)||(o=e.Count)),s<3&&e.Items&&(e=e.Items),r&&r.aggregates&&r.aggregates.length){for(var l,d=r.aggregates,h={},c=0;c<d.length;c++)(l=b.aggregates[d[c].type])&&(h[d[c].field+" - "+d[c].type]=l(e,d[c].field));n=h}if(r&&r.groups&&r.groups.length)for(var u=r.groups,c=0;c<u.length;c++){var p=D(u[c],i.queries);e=b.group(e,u[c],r.aggregates,p)}return V(o)?e:{result:e,count:o,aggregates:n}}}});var S=function(e,t){return"function"==typeof e?e.call(t||{}):e};b.TableModel=function(e,t,i,s){if(!E(this,b.TableModel))return new b.TableModel(t);E(t,Array)||B("ej.TableModel - Json Array is required");for(var n,a=[],r=z(m,this),o=0;o<t.length;o++)(n=new b.Model(t[o],this)).state="unchanged",n.on("stateChange",r),s&&n.computes(s),a.push(n);return this.name=e||"table1",this.rows=b.NotifierArray(a),this._deleted=[],this._events=v({}),this.dataManager=i,this._isDirty=!1,this},b.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){var e;this.dataManager&&E(this.dataManager,b.DataManager)||B("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()&&((e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name)).done(z(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(z(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1)},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){e=new b.Model(e);e._isDirty=this._isDirty=!0,this.rows.push(e),this._events.triggerHandler({type:"insert",model:e,table:this})},update:function(e){this.key||B("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=e,s=this.key,n=i[s],a=this.rows.array.filter(function(e){return e.get(s)===n});for(t in a=a[0],i)a.set(t,i[t]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:a,table:this})},remove:function(e){this.key||B("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=this.key,s=-1;e&&"object"==typeof e&&(e=e[i]!==g?e[i]:e.get(i));for(var n=0;n<this.rows.length();n++)if(this.rows.array[n].get(i)===e){s=n;break}-1<s&&((t=this.rows.removeAt(s)).markDelete(),this._deleted.push({model:t,position:s}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:t,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},t=this.toArray(),i=0;i<t.length;i++)e[t[i].state]&&e[t[i].state].push(t[i].json);return e.deleted=b.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(e){var t,i=c,s=v(e.html()),n=this.toArray();v.inArray(e.prop("tagName").toLowerCase(),["table","tbody"])&&(i=u),i.insertBefore(e),e.detach().empty();for(var a=0;a<n.length;a++)t=s.clone(),n[a].bindTo(t),e.append(t);e.insertAfter(i),i.remove()}};var c=e?v(document.createElement("div")):{},u=e?v(document.createElement("tr")):{};b.Model=function(e,t,i){"string"==typeof t&&(i=t,t=null),this.$id=F("m"),this.json=e,this.table=t instanceof b.TableModel?t:null,this.name=i||this.table&&this.table.name,this.dataManager=t instanceof b.DataManager?t:t.dataManagar,this.actual={},this._events=v({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},b.Model.prototype={computes:function(e){v.extend(this.computed,e)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,s=this.json,n=e;e=e.split(".");for(var a=0;a<e.length-1;a++)s=s[(e=e[0])[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=s[e],this.actual[e]!==g||e in this.actual||(this.actual[e]=t),s[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:n,current:t,previous:i,model:this})},get:function(e){return b.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(e,t){return e=e||this.dataManagar,t=t||e.dataSource.key,e||B("ej.Model - DataManager is required to commit the changes"),"added"===this.state?e.insert(this.json,this.name).done(b.proxy(function(e){v.extend(this.json,e.record)},this)):"changed"===this.state?e.update(t,this.json,this.name):"deleted"===this.state?e.remove(t,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(e,t){if(this.state!==e){if("added"===this.state){if("deleted"!==e)return;e="unchanged"}var i=e;t=t||{},this.state=e,this._events.triggerHandler(v.extend({type:"stateChange",current:e,previous:i,model:this},t))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(e){var t,i,e=v(e),s=e.find("[ej-observe], [ej-computed], [ej-prop]"),n=s.length;e.data("ejModel",this);for(var a={fields:[],props:[],computes:[]},r=0;r<n;r++)(i=(t=s.eq(r)).attr("ej-prop"))&&this._processAttrib(i,t,a),(i=t.attr("ej-observe"))&&-1!==this._props.indexOf(i)?this._processField(t,i,a):(i=t.attr("ej-computed"))&&this._processComputed(i,t,a);e.data("ejModelBinding"+this.$id,a)},unbind:function(e){var t,i,s={props:this._attrEls,computes:this._computeEls},n=!1;for(i in e&&(s=v(e).removeData("ejModel").data("ejModelBinding"+this.$id)||s,n=!0),this.computed)t=s.computes[i],i=this.computed[i],t&&i.deps&&(this.off(i.deps.join(" "),t.handle),n&&delete this._computeEls[i]);for(i in n||(this._computeEls={}),s.props)(t=s.props[i])&&(this.off(t.deps.join(" "),t.handle),delete s.props[i],n&&delete this._attrEls[i]);if(n||(this._attrEls={}),s.fields&&s.fields.length)for(var a,r,o=s.fields.length,l=0;l<o;l++)a=s.fields[l],v(a).off("change",null,this._changeHandler),r=-1!==this.formElements.indexOf(a.tagName.toLowerCase())?"input":"read",-1!==(a=this._updates[r].indexOf(a))&&this._updates[r].splice(a,1)},_processComputed:function(e,t,i){var s,n,a;e&&(n=p(e),a=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html",this.computed[e]&&this.computed[n]||(this.computed[n]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=n),(s=this.computed[e]).get||(s.get=function(){s.value.call(this.json)}),n=s.deps,s=s.value,this._updateDeps(n),this._updateElement(t,a,s),s={el:t,handle:z(this._computeHandle,this,{value:e,type:a})},this._computeEls[e]=s,i.computes[e]=s,this.on(n.join(" "),s.handle))},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(e,t,i){e[t](i.call(v.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var t=0;t<e.length;t++)!(e[t]in this.json)&&e[t]in this.computed&&b.merge(e,this.computed[e[t]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],n=0;n<i.length;n++)i[n].startsWith("#ej.#")&&(t=i[n].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t);return s},_processAttrib:function(e,t,i){var s,n,a={};e=e.replace(/^ +| +$/g,"").split(";");for(var r=0;r<e.length;r++)e[r]=e[r].split(":"),e[r].length<2||(a[s=e[r][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,"")]=e[r][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));var o=[];for(s in e=a)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),a=F("emak"),n={el:t,handle:z(this._attrHandle,this,a),value:e,deps:o},t.prop("ejmodelattrkey",a),i.props[a]=n,this._attrEls[a]=n,this.on(o.join(" "),n.handle)},_attrHandle:function(e){e=this._attrEls[e];e&&this._updateProps(e.el,e.value)},_updateProps:function(e,t){var i,s,n=this.json,a=this.computed;for(s in t)(i=t[s])in n?i=n[i]:i in a&&(i=(i=a[i])&&i.value.call(v.extend({},this.json,a))),V(i)||e.prop(s,i)},_updateValues:function(e,t){e=this._updates[e];e&&(e.read||e.input)&&(this._ensureItems(e.read,"html",t),this._ensureItems(e.input,"val",t))},_ensureItems:function(e,t,i){if(e)for(var s=e.length-1;-1<s;s--)e[s].offsetParent?v(e[s])[t](i):e.splice(s,1)},_changeHandler:function(e){e.data.self.set(e.data.prop,v(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},n=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(n),this._updates[t].read.push(e[0])):(e.val(n).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var t=/[^\w]+/g,p=function(e){return e.replace(t,"_")},m=function(e){this.setDirty(!0,e.model)};b.Predicate=function(e,t,i,s,n){return this instanceof b.Predicate?(this.ignoreAccent=!1,"string"==typeof e?(a="",-1!=t.toLowerCase().indexOf(" any")?(t=t.replace(" any",""),a="any"):-1!=t.toLowerCase().indexOf(" all")&&(t=t.replace(" all",""),a="all"),this.field=e,this.operator=t,this.value=i,this.ignoreCase=s,this.ignoreAccent=n,this.isComplex=!1,this.anyCondition=a,this._comparer=b.data.fnOperators.processOperator(""!=a?a:this.operator)):(e instanceof b.Predicate&&i instanceof b.Predicate||i instanceof Array)&&(this.isComplex=!0,this.condition=t.toLowerCase(),this.predicates=[e],i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this):new b.Predicate(e,t,i,s,n);var a},b.Predicate.and=function(){return R._combinePredicates([].slice.call(arguments,0),"and")},b.Predicate.or=function(){return R._combinePredicates([].slice.call(arguments,0),"or")},b.Predicate.fromJSON=function(e){if(E(e,Array)){for(var t=[],i=0,s=e.length;i<s;i++)t.push(R._fromJSON(e[i]));return t}return R._fromJSON(e)};var n,f,_,T,R={_combinePredicates:function(e,t){if(!e.length)return g;if(1===e.length){if(!E(e[0],Array))return e[0];e=e[0]}return new b.Predicate(e[0],t,e.slice(1))},_combine:function(e,t,i,s,n,a,r){return t instanceof b.Predicate?b.Predicate[n](e,t):"string"==typeof t?b.Predicate[n](e,new b.Predicate(t,i,s,a,r)):B("Predicate - "+n+" : invalid arguments")},_fromJSON:function(e){if(!e||E(e,b.Predicate))return e;for(var t=e.predicates||[],i=t.length,s=[],n=0;n<i;n++)s.push(R._fromJSON(t[n]));return e.isComplex?new b.Predicate(s[0],e.condition,s.slice(1)):new b.Predicate(e.field,e.operator,b.parseJSON({val:e.value}).val,e.ignoreCase,e.ignoreAccent)}};b.Predicate.prototype={and:function(e,t,i,s,n){return R._combine(this,e,t,i,"and",s,n)},or:function(e,t,i,s,n){return R._combine(this,e,t,i,"or",s,n)},validate:function(e){var t,i,s=this.predicates;if(!this.isComplex)return this._comparer.call(this,b.pvt.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var n=0;n<s.length;n++)if(i=s[n].validate(e),t){if(!i)return!1}else if(i)return!0;return t},toJSON:function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJSON())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,anyCondition:this.anyCondition}}},b.dataUtil={swap:function(e,t,i){var s;t!=i&&(s=e[t],e[t]=e[i],e[i]=s)},mergeSort:function(e,t,i){return i&&"string"!=typeof i||(i=b.pvt.fnSort(i,!0)),"function"==typeof t&&(i=t,t=null),b.pvt.mergeSort(e,t,i)},max:function(e,t,i){return"function"==typeof t&&(i=t,t=null),b.pvt.getItemFromComparer(e,t,i||b.pvt.fnDescending)},min:function(e,t,i){return"function"==typeof t&&(i=t,t=null),b.pvt.getItemFromComparer(e,t,i||b.pvt.fnAscending)},distinct:function(e,t,i){for(var s,n=[],a={},r=0;r<e.length;r++)(s=L(e,t,r))in a||(n.push(i?e[r]:s),a[s]=1);return n},sum:function(e,t){for(var i,s=0,n="number"!=typeof L(e,t,0),a=0;a<e.length;a++)i=L(e,t,a),isNaN(i)||null===i||(n&&(i=+i),s+=i);return s},avg:function(e,t){return b.sum(e,t)/e.length},select:function(e,t){for(var i=[],s=0;s<e.length;s++)i.push(b.pvt.extractFields(e[s],t));return i},group:function(t,e,i,s,n,a){if(n=n||1,t.GROUPGUID==b.pvt.consts.GROUPGUID){for(var r,o=0;o<t.length;o++)b.isNullOrUndefined(a)?(t[o].items=b.group(t[o].items,e,i,s,t.level+1),t[o].count=t[o].items.length):(r=-1,m=v.grep(a,function(e){return e.key==t[o].key}),r=a.indexOf(m[0]),t[o].items=b.group(t[o].items,e,i,s,t.level+1,a[r].items),t[o].count=a[r].count);return t.childLevels+=1,t}var l={},d=[];d.GROUPGUID=b.pvt.consts.GROUPGUID,d.level=n,d.childLevels=0,d.records=t;for(var h=0;h<t.length;h++){var c,u=L(t,e,h);b.isNullOrUndefined(s)||(u=s(u,e)),l[u]||(l[u]={key:u,count:0,items:[],aggregates:{},field:e},d.push(l[u]),b.isNullOrUndefined(a)||(c=v.grep(a,function(e){return e.key==l[u].key}),l[u].count=c[0].count)),l[u].count=b.isNullOrUndefined(a)?l[u].count+=1:l[u].count,l[u].items.push(t[h])}if(i&&i.length)for(h=0;h<d.length;h++){for(var p={},o=0;o<i.length;o++){var m,g=b.aggregates[i[o].type];b.isNullOrUndefined(a)?g&&(p[i[o].field+" - "+i[o].type]=g(d[h].items,i[o].field)):(m=v.grep(a,function(e){return e.key==d[h].key}),g&&(p[i[o].field+" - "+i[o].type]=g(m[0].items,i[o].field)))}d[h].aggregates=p}return d},parseTable:function(e,t,i){var s,n=e.rows,a=[],r=[];if(!n.length)return[];switch(i=i||0,(t||"").toLowerCase()){case b.headerOption.tHead:s=e.tHead.rows[i];break;case b.headerOption.row:default:s=e.rows[i]}for(var o=s.cells,l=0;l<o.length;l++)a.push(v.trim(o[l].innerHTML));for(l=i+1;l<n.length;l++){for(var d={},h=n[l].cells,c=0;c<h.length;c++){var u=h[c].innerHTML;"string"==typeof u&&v.isNumeric(u)?d[a[c]]=Number(u):d[a[c]]=u}r.push(d)}return r}},b.headerOption={tHead:"thead",row:"row"},b.aggregates={sum:function(e,t){return b.sum(e,t)},average:function(e,t){return b.avg(e,t)},minimum:function(e,t){return b.getObject(t,b.min(e,t))},maximum:function(e,t){return b.getObject(t,b.max(e,t))},truecount:function(e,t){t=b.Predicate(t,"equal",!0);return b.DataManager(e).executeLocal(b.Query().where(t)).length},falsecount:function(e,t){t=b.Predicate(t,"equal",!1);return b.DataManager(e).executeLocal(b.Query().where(t)).length},count:function(e,t){return e.length}},b.pvt={filterQueries:y,mergeSort:function(e,t,i){if(e.length<=1)return e;var s=parseInt(e.length/2,10),n=e.slice(0,s),s=e.slice(s),n=b.pvt.mergeSort(n,t,i),s=b.pvt.mergeSort(s,t,i);return b.pvt.merge(n,s,t,i)},getItemFromComparer:function(e,t,i){var s,n,a,r=0,o="string"==typeof L(e,t,0);if(e.length)for(;b.isNullOrUndefined(s)&&r<e.length;)s=L(e,t,r),a=e[r++];for(;r<e.length;r++)n=L(e,t,r),b.isNullOrUndefined(n)||(o&&(s=+s,n=+n),0<i(s,n)&&(s=n,a=e[r]));return a},quickSelect:function(e,t,i,s,n,a){if(i==s)return e[i];var r=b.pvt.partition(e,t,i,s,a),o=r-i+1;return o==n?e[r]:n<o?b.pvt.quickSelect(e,t,i,r-1,n,a):b.pvt.quickSelect(e,t,r+1,s,n-o,a)},extractFields:function(e,t){var i={};if(1==t.length)return b.pvt.getObject(t[0],e);for(var s=0;s<t.length;s++)i[t[s].replace(".",b.pvt.consts.complexPropertyMerge)]=b.pvt.getObject(t[s],e);return i},partition:function(e,t,i,s,n){var a=parseInt((i+s)/2,10),r=L(e,t,a);b.swap(e,a,s);for(var o=a=i;o<s;o++)n(L(e,t,o),r)&&(b.swap(e,o,a),a++);return b.swap(e,a,s),a},fnSort:function(e){return(e=e?e.toLowerCase():b.sortOrder.Ascending)==b.sortOrder.Ascending?b.pvt.fnAscending:b.pvt.fnDescending},fnGetComparer:function(i,s){return function(e,t){return s(b.pvt.getObject(i,e),b.pvt.getObject(i,t))}},fnAscending:function(e,t){return b.isNullOrUndefined(t)&&b.isNullOrUndefined(e)||null===t||t===g?-1:"string"==typeof e?e.localeCompare(t):null===e||e===g?1:e-t},fnDescending:function(e,t){return b.isNullOrUndefined(t)&&b.isNullOrUndefined(e)?-1:null===t||t===g?1:"string"==typeof e?-1*e.localeCompare(t):null===e||e===g?-1:t-e},merge:function(e,t,i,s){for(var n,a=[];0<e.length||0<t.length;)n=0<e.length&&0<t.length?s?s(L(e,i,0),L(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:0<e.length?e:t,a.push(n.shift());return a},getObject:function(e,t){if(!t)return g;if(!e)return t;if(-1===e.indexOf("."))return t[e];for(var i=t,s=e.split("."),n=0;n<s.length&&null!=i;n++)i=i[s[n]];return i},createObject:function(e,t,i){for(var s=e.split("."),i=i||window,n=i,a=0;a<s.length;a++)a+1==s.length?n[s[a]]=t===g?{}:t:null==n[s[a]]&&(n[s[a]]={}),n=n[s[a]];return i},ignoreDiacritics:function(e){return"string"!=typeof e?e:e.split("").map(function(e){return e in b.data.diacritics?b.data.diacritics[e]:e}).join("")},getFieldList:function(e,t,i){if(i===g&&(i=""),t===g||null===t)return b.pvt.getFieldList(e,[],i);for(var s in e)"object"!=typeof e[s]||e[s]instanceof Array?t.push(i+s):b.pvt.getFieldList(e[s],t,i+s+".");return t}},b.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},b.data={},b.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},b.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne ",in:" eq ",notin:" ne "},b.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",notcontains:"substringof"},b.data.diacritics={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"},b.data.fnOperators={equal:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?j(e)==j(t):e==t},notequal:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),!b.data.fnOperators.equal(e,t,i)},notin:function(e,t,i){for(var s=0;s<t.length;s++)if(0==b.data.fnOperators.notequal(e,t[s],i))return!1;return!0},lessthan:function(e,t,i){return i?j(e)<j(t):e<t},greaterthan:function(e,t,i){return i?j(e)>j(t):t<e},lessthanorequal:function(e,t,i){return i?j(e)<=j(t):e<=t},greaterthanorequal:function(e,t,i){return i?j(e)>=j(t):t<=e},contains:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?!V(e)&&!V(t)&&-1!=j(e).indexOf(j(t)):!V(e)&&!V(t)&&-1!=e.toString().indexOf(t)},notcontains:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),!b.data.fnOperators.contains(e,t,i)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?e&&t&&j(e).startsWith(j(t)):e&&t&&e.startsWith(t)},endswith:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?e&&t&&j(e).endsWith(j(t)):e&&t&&e.endsWith(t)},all:function(e,t,i){for(var s=0;s<t.length;s++)if(0==b.data.fnOperators[this.operator](e,t[s],i))return!1;return!0},any:function(e,t,i){for(var s=0;s<t.length;s++)if(1==b.data.fnOperators[this.operator](e,t[s],i))return!0;return!1},processSymbols:function(e){e=b.data.operatorSymbols[e];if(e){e=b.data.fnOperators[e];if(e)return e}return B("Query - Process Operator : Invalid operator")},processOperator:function(e){var t=b.data.fnOperators[e];return t||b.data.fnOperators.processSymbols(e)}},b.data.fnOperators.in=function(e,t,i){for(var s=0;s<t.length;s++)if(1==b.data.fnOperators.equal(e,t[s],i))return!0;return!1},b.NotifierArray=function(e){return E(this,b.NotifierArray)?(this.array=e,this._events=v({}),this._isDirty=!1,this):new b.NotifierArray(e)},b.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t=E(e,Array)?[].push.apply(this.array,e):this.array.push(e);return this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return-1<t&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(e,t){this._events.triggerHandler(v.extend({type:e},t)),this._events.triggerHandler({type:"all",name:e,args:t})},toArray:function(){return this.array}},v.extend(b,b.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},Array.prototype.filter=Array.prototype.filter||function(e){if("function"!=typeof e)throw new TypeError;for(var t=[],i=arguments[1]||this,s=0;s<this.length;s++){var n=this[s];e.call(i,n,s,this)&&t.push(n)}return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},b.support||(b.support={}),b.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),b.support.cors=v.support.cors,!v.support.cors&&window.XDomainRequest&&(n=/^https?:\/\//i,f=/^get|post$/i,_=new RegExp("^"+location.protocol,"i"),T=/\/xml/i,v.ajaxTransport("text html xml json",function(t,i,e){if(t.crossDomain&&t.async&&f.test(t.type)&&n.test(i.url)&&_.test(i.url)){var a=null,r=(i.dataType||"").toLowerCase();return{send:function(e,n){a=new XDomainRequest,/^\d+$/.test(i.timeout)&&(a.timeout=i.timeout),a.ontimeout=function(){n(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,t={code:200,message:"success"},i={text:a.responseText};try{if("json"===r)try{i.json=JSON.parse(a.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===r||"text"!==r&&T.test(a.contentType)){var s=new ActiveXObject("Microsoft.XMLDOM");s.async=!1;try{s.loadXML(a.responseText)}catch(e){s=g}if(!s||!s.documentElement||s.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+a.responseText;i.xml=s}}catch(e){throw e}finally{n(t.code,t.message,i,e)}},a.onerror=function(){n(500,"error",{text:a.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(a.onprogress=function(){}),a.open(t.type,t.url),a.send(i.data)},abort:function(){a&&a.abort()}}}})),v.support.cors=!0,b.sortOrder={Ascending:"ascending",Descending:"descending"},b.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};var k=function(e,t){t&&(e=z(e,t)),(window.setImmediate||window.setTimeout)(e,0)};b.support.enableLocalizedSort=!1;var O=function(e,t,i,s){return b.support.stableSort?b.support.enableLocalizedSort||"string"!=typeof b.pvt.getObject(t,e[0]||{})||i!==b.pvt.fnAscending&&i!==b.pvt.fnDescending||1!==s.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(b.pvt.fnGetComparer(t,i)):I(e,t,i===b.pvt.fnDescending):b.mergeSort(e,t,i)},D=function(e,t){for(var i=v.grep(t,function(e){return"onGroup"==e.fn}),s=0;s<i.length;s++)if(b.getObject("fieldName",i[s].e)==e)return b.getObject("fn",i[s].e)},I=function(e,t,i){var s=Object.prototype.toString;Object.prototype.toString=-1===t.indexOf(".")?function(){return this[t]}:function(){return b.pvt.getObject(t,this)},e=e.sort(),Object.prototype.toString=s,i&&e.reverse()},j=function(e){return e?(e.toLowerCase?e:e.toString()).toLowerCase():0===e||!1===e?e.toString():""},L=function(e,t,i){return t?b.pvt.getObject(t,e[i]):e[i]},A=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},E=function(e,t){return e instanceof t},P=function(t,i,s,n){return function(e){return"object"==typeof e&&(n=e,e=null),new b.TableModel(e||t,i,s,n)}},M=function(o){return function(e,t){(t=t||window.ko)||B("Knockout is undefined");for(var i,s,n,a=[],r=0;r<o.length;r++){for(s in i={},o[r])s.startsWith("_")||(i[s]=t.observable(o[r][s]));for(s in e)n=e[s],n=v.isPlainObject(n)?(n.owner||(n.owner=i),t.computed(n)):t.computed(n,i),i[s]=n;a.push(i)}return t.observableArray(a)}},i=0,F=function(e){return e+(i+=1)};b.getGuid=function(e){var s;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,t){var i;return s="crypto"in window&&"getRandomValues"in crypto?(i=new Uint8Array(1),window.crypto.getRandomValues(i),i[0]%16|0):16*Math.random()|0,"0123456789abcdef"[19===t?3&s|8:s]})};var N=function(t,i){return function(){var e=[].slice.call(arguments,0);return e.push(this),t.apply(i||this,e)}},z=function(t,i,s){return"bind"in t?s?t.bind(i,s):t.bind(i):function(){var e=s?[s]:[];return e.push.apply(e,arguments),t.apply(i||this,e)}};b.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)};var V=function(e){return e===g||null===e},B=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document),function(x,y){ej.globalize={},ej.cultures={},ej.cultures.default=ej.cultures["en-US"]=x.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,week:{name:"Week",nameAbbr:"Wek",nameShort:"Wk"},days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]),ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var t=/^\s+|\s+$/g,h=/^[+-]?infinity$/i,c=/^0x[a-f0-9]+$/i,u=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,A={9:"[0-9 ]",0:"[0-9 ]",a:"[A-Za-z0-9 ]",A:"[A-Za-z0-9]",N:"[0-9]","#":"[0-9]","&":"[^]+","<":"",">":"",C:"[A-Za-z ]","?":"[A-Za-z]"};function p(e,t,i){if(ej.isNullOrUndefined(e)||"string"==typeof e||!t)throw"Bad Number Format Exception";var s,n=t,a=function(e,t){var i=e||"",s=A,n=-1<(t=t.toString()).indexOf(".")||-1<e.indexOf("."),a=0,r=0,o="",l="",d=e.split(","),h="0",c=e.toLowerCase().indexOf("e"),u=i.indexOf("#");if(-1<e.indexOf("\\")&&(l=e.substr(0,e.lastIndexOf("\\")+1),u=(e=e.substr(e.lastIndexOf("\\")+1,e.length)).indexOf("#")),-1<c){for(var p="",i="",m=e.toLowerCase().split("e"),g=((-1<e.indexOf("+")?e.split("+"):e.split("-"))[1],(t=parseInt(t).toExponential()).split("e")),a=m[1].length-g[1].length,f=m[1].length-1;0<f;f--)"0"!=m[1][f]?i+=m[1][f]:1<a?(i+="#",a--):i+="0";i=(-1<e.indexOf("+")?"+":"")+i.split("").reverse().join("");for(f=0;f<g[0].length;f++)p="."!=g[0][f]?p.concat("#"):p.concat(".");p.length>m[0].length&&(p=m[0]),i=l+p+"e"+i}else if(n){if(m=e.split("."),g=t.split("."),m[1]=m[1].replace(/[,.]/g,""),(a=m[0].replace(/[,.]/g,"").length-g[0].replace(/[,.]/g,"").length)<0&&ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){d=m[0].split(","),o=m[0].split(",");for(var _=d.length-1;0<=_;_--)if(d[_])for(var v=d[_].length,f=0,b=Math.abs(a);f<b&&3!==v;f++)o[_]="0"+o[_],v++,a++;if(o=o.join(),a<0){ej.isNullOrUndefined(v)||3==v||(o=","+o);for(f=0,b=Math.abs(a);f<b;f++)3===v&&(o=","+o,v=0),o="0"+o,v++}a=0,i=l+o+"."+m[1]}else if(ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){for(var x="",v=0,y=(o=m[0].replace(/[,.]/g,"")).length-1;0<=y;y--)3===v?(x=","+x,v=0):v++,x=o[y]+x;i=l+x+"."+m[1]}}else{var w=0,C=d.splice(1,d.length);if(a=e.replace(/[,.\[\(\]\)]/g,"").length-t.replace(/[,.]/g,"").length,-1<u){for(var S=0,b=e.length;S<b;S++)"#"===e[S]&&w++;(1===w||d[1]&&2===w)&&(h="#"),1===w&&(C=d[0])}if(a<0){o=(m=i.split(",")).splice(1,m.length);for(_=d.length-1;0<=_;_--)if(C[_]){v=C[_].length;o[_]||(o[_]="");for(f=0,b=Math.abs(a)+1;f<b;f++){if(1!=w&&3===v){v=0;break}o[_]=o[_].concat(h),v++,a++}}if(o=o.join(),a<0){ej.isNullOrUndefined(v)||3==v||(o=","+o);for(f=0,b=Math.abs(a)+1;f<b;f++)1!=w&&3===v&&(o=","+o,v=0),o=h+o,v++}a=0,i=l+o}r=0}for(var T,R,k=[],O=i.split(""),D=0,y=0,I=!1,j=!1,L=e.indexOf("\\");y<i.length;y++)if("e"===(T=O[y])&&(j=!0),"0"===T&&u<0?0<a&&r<=y?(a--,r++):0<a?a--:R=s[T]:"0"==T&&(j||"0"!=T)||(R=s[T]),"0"===T&&-1<L&&(R=s[T]),y===i.lastIndexOf("\\")&&(I=!1),R&&!I)k[D]={rule:R},D+=1;else{"\\"===T&&(T="",y!==i.lastIndexOf("\\")&&(I=!0)),T=T.split("");for(_=0;_<T.length;_++)k[D]=T[_],D+=1}return{rules:s=k,format:i}}(t,e),r=a.rules;return 0<=(t=a.format).indexOf("\\")?(s=t.lastIndexOf("\\"),s=(t.slice(0,s)+t.slice(s+1,t.length).replace(/[9?CANa#&]/g,"_")).replace(/[\\]/g,""),t=t.replace(/[\\]/g,"")):s=t.replace(/[9?CANa#&]/g,"_"),function(e,t,i,s,n,a){if(ej.isNullOrUndefined(e))return;-1<t.toLowerCase().indexOf("e")&&((-1<a.indexOf("+")?a.split("+"):a.split("-"))[1],e=e.toExponential(),-1<a.indexOf("-")&&(e=e.replace("+","")));var r,o,l,d,h,c,u,p,m=r=o=e.toString(),g=i,f=l=0,a=t.match(/[\(\[\]\)]/g);m=0<=!t.indexOf("\\")?e=o.replace(/[\(\)-]/g,""):void 0;var _=s.length-1,v=r.length-1;if(ej.isNullOrUndefined(a)){for(;f<s.length&&(d=r[l],h=s[f],d!=y);)if(d===h||"_"===d||"e"===d&&d===h.toLowerCase()?(c=g.substring(0,f),u=g.substring(f),d=w(d,n),g=c+d+u.substr(1,u.length),l+=1,f+=1):s[f].rule!=y?(b=r.charCodeAt(l),C(t,b,f)?(c=g.substring(0,f),u=g.substring(f),p=S(r,l,f,t,i),g=c+p+u.substr(1,u.length),f++,l++):f++):("e"===h&&(l=r.indexOf("e")+1),f++),l>m.length||_<0)break}else for(;0<=_&&(d=r[v],h=s[_],d!=y);){var b;if(d===h||"_"===d||"e"===d&&d===h.toLowerCase()?(c=g.substring(0,_+1),u=g.substring(_+1),d=w(d,n),g=c.substr(0,c.length-1)+d+u,_--,v--):s[_].rule!=y?(b=r.charCodeAt(v),C(t,b,_)?(c=g.substring(0,_+1),u=g.substring(_+1),p=S(r,v,_,t,i),g=c.substr(0,c.length-1)+p+u,_--,v--):_--):_--,l>m.length||_<0)break}if(e)return g.indexOf("_")-g.indexOf(",")!=1&&g.indexOf("_")-g.indexOf(".")!=1||(g=g.slice(0,g.indexOf("_")-1)),""==x.trim(g.replace(/[_]/g,""))?null:g.replace(/[_]/g,"")}(e,t,s=w(s,i),r,i,n)}function w(e,t){if(0!=e.length){for(var t=ej.preferredCulture(t),i="",s=t.numberFormat[","],n=t.numberFormat.currency.symbol,a=t.numberFormat["."],r=0;r<e.length;r++)","==e[r]?i+=s:"."==e[r]?i+=a:"$"==e[r]?i+=n:i+=e[r];e=i}return e}function C(e,t,i){var s=A,n=!1,a=e.substr(i,1),r=String.fromCharCode(t);return x.each(s,function(e,t){a==e&&(n=!!r.match(new RegExp(t)))}),n}function S(e,t,i,s,n){var a=!1;return-1<s.indexOf(".")&&i===n.length-1&&5<e[t+1]&&(a=!0),a?(parseInt(e[t])+1).toString():e[t]}function E(e,t){return 0===e.indexOf(t)}function a(e,t){return e.substr(e.length-t.length)===t}function P(e){return(e+"").replace(t,"")}function m(e,t,i){for(var s=e.length;s<t;s++)e=i?"0"+e:e+"0";return e}function g(e,t,i){var s,n=t["-"],t=t["+"];switch(i){case"n -":n=" "+n,t=" "+t;case"n-":a(e,n)?s=["-",e.substr(0,e.length-n.length)]:a(e,t)&&(s=["+",e.substr(0,e.length-t.length)]);break;case"- n":n+=" ",t+=" ";case"-n":E(e,n)?s=["-",e.substr(n.length)]:E(e,t)&&(s=["+",e.substr(t.length)]);break;case"(n)":E(e,"(")&&a(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]}function s(e,t,i){if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var s,n=i.numberFormat,a=Math.abs(e),r=-1;1<t.length&&(r=parseInt(t.slice(1),10));var o,l,d=t.charAt(0).toUpperCase();switch(d){case"D":s="n",l=a,a=isNaN(l)?NaN:Math[l<0?"ceil":"floor"](l),-1!==r&&(a=m(""+a,r,!0)),e<0&&(a=-a);break;case"N":(o=n).pattern=o.pattern||["-n"];case"C":(o=o||n.currency).pattern=o.pattern||["-$n","$n"];case"P":(o=o||n.percent).pattern=o.pattern||["-n %","n %"],s=e<0?o.pattern[0]||"-n":o.pattern[1]||"n",-1===r&&(r=o.decimals),a=function(e,t,i){var s=i.groupSizes||[3],n=s[0],a=1,r=ej._round(e,t);isFinite(r)||(r=e);var o=(e=r)+"",l="",e=1<(r=o.split(/e/i)).length?parseInt(r[1],10):0;o=(r=(o=r[0]).split("."))[0],l=1<r.length?r[1]:"",0<e?(o+=(l=m(l,e,!1)).slice(0,e),l=l.substr(e)):e<0&&(l=(o=m(o,(e=-e)+1,!0)).slice(-e,o.length)+l,o=o.slice(0,-e));for(var e=i["."]||".",l=0<t?e+(l.length>t?l.slice(0,t):m(l,t)):"",d=o.length-1,h=i[","]||",",c="";0<=d;){if(0===n||d<n)return o.slice(0,d+1)+(c.length?h+c+l:l);c=o.slice(d-n+1,d+1)+(c.length?h+c:""),d-=n,a<s.length&&(n=s[a],a++)}return o.slice(0,d+1)+h+c+l}(a*("P"===d?100:1),r,o);break;default:return p(e,t,i)}return function(e,t,i){for(var s=/n|\$|-|%/g,n="";;){var a=s.lastIndex,r=s.exec(t);if(n+=t.slice(a,r?r.index:t.length),!r)break;switch(r[0]){case"n":n+=e;break;case"$":n+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(e)&&(n+=i["-"]||"-");break;case"%":n+=i.percent.symbol||"%"}}return n}(a,s,n)}function n(e,t,i){"string"==typeof i&&(t=i,i=10);var s,n,a,r,o=NaN,l=(t=ej.globalize.findCulture(t)).numberFormat,d=t.numberFormat.pattern[0];return-1<(e=e.replace(/ /g,"")).indexOf(t.numberFormat.currency.symbol)?(e=(e=e.replace(t.numberFormat.currency.symbol||"$","")).replace(t.numberFormat.currency["."]||".",t.numberFormat["."]||"."),d=P(t.numberFormat.currency.pattern[0].replace("$",""))):-1<e.indexOf(t.numberFormat.percent.symbol)&&(e=(e=e.replace(t.numberFormat.percent.symbol||"%","")).replace(t.numberFormat.percent["."]||".",t.numberFormat["."]||"."),d=P(t.numberFormat.percent.pattern[0].replace("%",""))),e=P(e),h.test(e)?o=parseFloat(e,"",i):c.test(e)?o=parseInt(e,16):(s=(n=g(e,l,d))[0],t=n[1],""===s&&"-n"!==l.pattern[0]&&(s=(n=g(e,l,"-n"))[0],t=n[1]),s=s||"+",(e=t.indexOf("e"))<0&&(e=t.indexOf("E")),n=e<0?(a=t,null):(a=t.substr(0,e),t.substr(e+1)),t=l["."]||".",a=(e=a.indexOf(t))<0?(r=a,null):(r=a.substr(0,e),a.substr(e+t.length)),e=l[","]||",",r=r.split(e).join(""),t=e.replace(/\u00A0/g," "),e!==t&&(r=r.split(t).join("")),r=s+r,null!==a&&(r+="."+a),null!==n&&(r+="e"+((d=g(n,l,d))[0]||"+")+d[1]),!i&&u.test(r)?o=parseFloat(r):i&&(o=parseInt(r,i))),o}var M={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"};function F(e,t,i){return e<t||i<e}function N(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function z(e){return e.split("Â ").join(" ").toUpperCase()}function V(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=z(e[i]);return t}function T(e,t){for(var i=0,s=!1,n=0,a=e.length;n<a;n++)var r=e.charAt(n),s="'"==r?(s?t.push("'"):i++,!1):"\\"==r?(s&&t.push("\\"),!s):(t.push(r),!1);return i}function R(e,t){t=t||"F";var i=e.patterns,e=t.length;if(1===e){if(!(i=i[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===e&&"%"===t.charAt(0)&&(t=t.charAt(1));return t}function d(e,t,i){e=P(e),t=P(t);var s=i.calendar,n=ej.globalize._getDateParseRegExp(s,t),a=new RegExp(n.regExp).exec(e);if(null===a)return null;for(var r,o,l,d,h,c,u,p,m,g,f=n.groups,_=null,v=null,b=null,x=0,y=0,w=0,C=0,S=null,T=!1,R=0,k=f.length;R<k;R++){var O=a[R+1];if(O){var D=f[R],I=D.length,j=parseInt(O,10);switch(D){case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:if(F(b=j,1,31))return null;break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:if(h=O,c=3===I,g=m=p=u=void 0,u=(D=s).months,p=D.monthsGenitive||D.months,m=D._upperMonths,g=D._upperMonthsGen,m||(D._upperMonths=m=[V(u.names),V(u.namesAbbr)],D._upperMonthsGen=g=[V(p.names),V(p.namesAbbr)]),h=z(h),(m=N(c?m[1]:m[0],h))<0&&(m=N(c?g[1]:g[0],h)),F(v=m,0,11))return null;break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:if(F(v=j-1,0,11))return null;break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:if(F(_=I<4?(o=s,l=j,d=void 0,d=new Date,l<100&&((o="string"==typeof(o=o.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(o,10):o)<(l+=(d=d.getFullYear())-d%100)&&(l-=100)),l):j,0,9999))return null;break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(12===(x=j)&&(x=0),F(x,0,11))return null;break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(F(x=j,0,23))return null;break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:if(F(y=j,0,59))return null;break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:if(F(w=j,0,59))return null;break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:if(!(T=s.PM&&(O===s.PM[0]||O===s.PM[1]||O===s.PM[2]))&&(!s.AM||O!==s.AM[0]&&O!==s.AM[1]&&O!==s.AM[2]))return null;break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:if(F(C=j*Math.pow(10,3-I),0,999))return null;break;case M.DAY_OF_WEEK_THREE_LETTER:b=function(o,i,e){if(!o)return null;for(var t,s,n,a=0,l=0,r=null,d=(i=i.split("")).length;a<d;a++)"d"===i[a]&&(t=function(e){for(var t=0;i[a]===e;)t++,a++;return 0<t&&--a,t}("d"),e._lowerDays||(e._lowerDays=function(e){var t,i={};for(t in e)i[t]=function(e){for(var t=0,i=e.length,s=[];t<i;t++)s[t]=(e[t]+"").toLowerCase();return s}(e[t]);return i}(e.days)),r=t<3?(s=2,n=n=void 0,n=new RegExp("^\\d{1,"+s+"}"),(n=o.substr(l,s).match(n))?(n=n[0],l+=n.length,parseInt(n,10)):null):function(e,t){for(var i,s,n,a=0,r=e.length;a<r;a++)if(s=(i=e[a]).length,n=o.substr(l,s),t&&(n=n.toLowerCase()),n==i)return l+=s,a+1;return null}(e._lowerDays[3==t?"namesAbbr":"names"],!0));return r}(e,t,s);break;case M.DAY_OF_WEEK_FULL_NAME:L=O,o=3===I,l=d=void 0,d=(I=s).days,(l=I._upperDays)||(I._upperDays=l=[V(d.names),V(d.namesAbbr),V(d.namesShort)]),L=z(L),o?-1===N(l[1],L)&&N(l[2],L):N(l[0],L);break;case M.TIME_ZONE_OFFSET_FULL:var L=O.split(/:/);if(2!==L.length)return null;if(F(r=parseInt(L[0],10),-12,13))return null;L=parseInt(L[1],10);if(F(L,0,59))return null;S=60*r+(E(O,"-")?-L:L);break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(F(r=j,-12,13))return null;S=60*r}}}var A=new Date,i=s.convert,n=i?i.fromGregorian(A)[0]:A.getFullYear();if(null===_&&(_=n),null===v&&(v=0),null===b&&(b=1),i){if(null===(A=i.toGregorian(_,v,b)))return null}else{if(A.setFullYear(_,v,b),A.getDate()!==b)return null;0}return T&&x<12&&(x+=12),A.setHours(x,y,w,C),null!==S&&(i=A.getMinutes()-(S+A.getTimezoneOffset()),A.setHours(A.getHours()+parseInt(i/60,10),i%60)),A}ej.globalize._getDateParseRegExp=function(e,t){var i=e._parseRegExp;if(i){var s=i[t];if(s)return s}else e._parseRegExp=i={};for(var n,a=R(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],o=[],l=0,d=0,h=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;null!==(n=h.exec(a));){var c=a.slice(l,n.index),l=h.lastIndex;if((d+=T(c,r))%2)r.push(n[0]);else{var u,p=n[0],c=p.length;switch(p){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:case M.MONTH_FULL_NAME:case M.MONTH_THREE_LETTER:u="(\\D+)";break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:u="(\\D*)";break;case M.YEAR_FULL:case M.MILLISECONDS:case M.CENTISECONDS:case M.DECISECONDS:u="(\\d{"+c+"})";break;case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:case M.MONTH_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_SINGLE_DIGIT:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.MINUTES_DOUBLE_DIGIT:case M.MINUTES_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:case M.SECONDS_SINGLE_DIGIT:u="(\\d\\d?)";break;case M.TIME_ZONE_OFFSET_FULL:u="([+-]?\\d\\d?:\\d{2})";break;case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:u="([+-]?\\d\\d?)";break;case M.DATE_SEPARATOR:u="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+p+"'."}u&&r.push(u),o.push(n[0])}}T(a.slice(l),r),r.push("$");s={regExp:r.join("").replace(/\s+/g,"\\s+"),groups:o};return i[t]=s},ej.globalize.addCulture=function(e,t){ej.cultures[e]=x.extend(!0,x.extend(!0,{},ej.cultures.default,t),ej.cultures[e]),ej.cultures[e].calendar=ej.cultures[e].calendars.standard},ej.globalize.preferredCulture=function(e){return e=void 0!==e&&typeof e==typeof this.cultureObject?e.name:e,this.cultureObject=ej.globalize.findCulture(e),this.cultureObject},ej.globalize.setCulture=function(e){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(e)),(e=void 0!==e&&typeof e==typeof this.globalCultureObject?e.name:e)&&(this.globalCultureObject=ej.globalize.findCulture(e)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject},ej.globalize.culture=function(e){ej.cultures.current=ej.globalize.findCulture(e)},ej.globalize.findCulture=function(e){var t;if(e){if(x.isPlainObject(e)&&e.numberFormat&&(t=e),"string"==typeof e){var i=ej.cultures;if(i[e])return i[e];if(-1<e.indexOf("-")){var s=e.split("-")[0];if(i[s])return i[s]}else for(var n=x.map(i,function(e){return e}),a=0;a<n.length;a++)if(n[a].name.split("-")[0]===e)return n[a];return ej.cultures.default}}else t=ej.cultures.current||ej.cultures.default;return t},ej.globalize.format=function(e,t,i){i=ej.globalize.findCulture(i);return"number"==typeof e?e=s(e,t,i):e instanceof Date&&(e=function e(t,i,s){var n=s.calendar,a=n.convert;if(!i||!i.length||"i"===i){var r=s&&s.name.length?a?e(t,n.patterns.F,s):t.toLocaleString():t.toString();return r}s="s"===i;i=R(n,i),r=[];var o,l,d,h,c=["0","00","000"],u=/([^d]|^)(d|dd)([^d]|$)/g,p=0,m=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;function g(e,t){var i,e=e+"";return 1<t&&e.length<t?(i=c[t-2]+e).substr(i.length-t,t):i=e}for(!s&&a&&(h=a.fromGregorian(t));;){var f=m.lastIndex,_=m.exec(i);if(p+=T(i.slice(f,_?_.index:i.length),r),!_)break;if(p%2)r.push(_[0]);else{var v=_[0],f=v.length;switch(v){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:_=3===f?n.days.namesAbbr:n.days.names,r.push(_[t.getDay()]);break;case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.DAY_OF_MONTH_DOUBLE_DIGIT:l=!0,r.push(g(h?h[2]:t.getDate(),f));break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:var b=h?h[1]:t.getMonth();r.push((n.monthsGenitive&&(l||d||(l=u.test(i),d=!0),l)?n.monthsGenitive:n.months)[3===f?"namesAbbr":"names"][b]);break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:r.push(g((h?h[1]:t.getMonth())+1,f));break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:b=h?h[0]:t.getFullYear(),f<4&&(b%=100),r.push(g(b,f));break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:0==(o=t.getHours()%12)&&(o=12),r.push(g(o,f));break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:r.push(g(t.getHours(),f));break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:r.push(g(t.getMinutes(),f));break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:r.push(g(t.getSeconds(),f));break;case M.MERIDIAN_INDICATOR_SINGLE:case M.MERIDIAN_INDICATOR_FULL:b=t.getHours()<12?n.AM?n.AM[0]:" ":n.PM?n.PM[0]:" ",r.push(1===f?b.charAt(0):b);break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:r.push(g(t.getMilliseconds(),3).substr(0,f));break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:o=t.getTimezoneOffset()/60,r.push((o<=0?"+":"-")+g(Math.floor(Math.abs(o)),f));break;case M.TIME_ZONE_OFFSET_FULL:o=t.getTimezoneOffset()/60,r.push((o<=0?"+":"-")+g(Math.floor(Math.abs(o)),2)+":"+g(Math.abs(t.getTimezoneOffset()%60),2));break;case M.DATE_SEPARATOR:r.push(n["/"]||"/");break;default:throw"Invalid date format pattern '"+v+"'."}}}return r.join("")}(e,t,i)),e},ej.globalize._round=function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t},ej.globalize.parseInt=function(e,t,i){return t=t||10,Math.floor(n(e,i,t))},ej.globalize.getISODate=function(e){if(e instanceof Date)return e.toISOString()},ej.globalize.parseFloat=function(e,t,i){return"string"==typeof t&&(i=t,t=10),n(e,i)},ej.globalize.parseDate=function(e,t,i){var s,n,a;if(i=ej.globalize.findCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(var r=0,o=t.length;r<o;r++){var l=t[r];if(l&&(s=d(e,l,i)))break}}else for(n in a=i.calendar.patterns)if(s=d(e,a[n],i))break;return s||null},ej.globalize.getLocalizedConstants=function(e,t){var e=e.replace("ej.","").split("."),e=function e(t,i){return i.length?e(t[i[0]],i.slice(1)):t}(ej,e);return x.extend(!0,{},e.Locale.default,e.Locale[t||this.cultureObject.name])},x.extend(ej,ej.globalize)}(jQuery);var __extends=this&&this.__extends||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);function s(){this.constructor=e}e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)};!function(c){var i,e=(i=ej.WidgetBase,__extends(t,i),t.prototype._setModel=function(e){var t,i;for(t in e)switch(t){case"allowFiltering":this.model.allowFiltering=e[t],this.setSearchBox();break;case"allowCustom":this.model.allowCustom=e[t];break;case"htmlAttributes":this.model.htmlAttributes=e[t],this.setHTMLAttributes();break;case"width":this.model.width=e[t],c(this.inputWrapper.container).css({width:this.formatUnit(e[t])});break;case"placeholder":this.model.placeholder=e[t],this.setPlaceholder(e[t],this.inputElement);break;case"readonly":this.model.readonly=e[t],this.setReadonly(e[t],this.inputElement);break;case"cssClass":this.model.cssClass=e[t],this.setCssClass(e[t]),this.popupObj&&c(this.popupObj).addClass(e[t]);break;case"enableRtl":this.model.enableRtl=e[t],this.setEnableRtl();break;case"enabled":this.model.enabled=e[t],this.setEnable();break;case"text":case"value":case"index":if(null===e[t])return void this.clear();this.list||(this.model.dataSource instanceof ej.DataManager&&(this.initRemoteRender=!0),this.renderList()),this.initRemoteRender||(i="text"==t?this.getElementByText(e[t]):"value"==t?this.getElementByValue(e[t]):this.liCollections[e[t]],this.isValidLI(i)?this.setSelection(i,null):"text"==t?this.setOldText(e[t]):"value"==t&&this.setOldValue(this.value(e[t])));break;case"query":case"dataSource":case"fields":case"sortOrder":"sortOrder"==t&&(this.model.sortOrder=e[t]),"fields"==t&&(this.model.fields=e[t]),"query"==t&&(this.model.query=e[t]),"dataSource"==t&&(this.model.dataSource=e[t]),this.clear(),this.resetList(this.model.dataSource);break;case"footerTemplate":this.model.footerTemplate=e[t],this.popupObj&&this.setFooterTemplate(this.popupObj)}},t.prototype.wireEvent=function(){this._on(c(this.inputWrapper.buttons[0]),"mousedown",this.preventBlur),this._on(c(this.inputWrapper.container),"blur",this.onBlur),this._on(c(this.inputElement),"focus",this.targetFocus),this._on(c(this.inputElement),"blur",this.onBlur),this.model.readonly||(this._on(c(this.inputElement),"input",this.onInput),this._on(c(this.inputElement),"keyup",this.onFilterUp),this._on(c(this.inputElement),"keydown",this.onFilterDown)),ej.isNullOrUndefined(this.inputWrapper.buttons[0])||this._on(c(this.inputWrapper.buttons[0]),"mousedown",this.dropDownClick),ej.isDevice()||this._on(c(this.inputElement),"keydown",this.keyActionHandler),this.model.showClearButton&&this._on(c(this.inputWrapper.clearButton),"mousedown",this.resetHandler)},t.prototype.unWireEvent=function(){this._off(c(this.inputWrapper.buttons[0]),"mousedown",this.preventBlur),this._off(c(this.inputWrapper.container),"blur",this.onBlur),this._off(c(this.inputElement),"focus",this.targetFocus),this._off(c(this.inputElement),"blur",this.onBlur),ej.isNullOrUndefined(this.inputWrapper.buttons[0])||this._off(c(this.inputWrapper.buttons[0]),"mousedown",this.dropDownClick),this.model.readonly||(this._off(c(this.inputElement),"input",this.onInput),this._off(c(this.inputElement),"keyup",this.onFilterUp),this._off(c(this.inputElement),"keydown",this.onFilterDown)),ej.isDevice()||this._off(c(this.inputElement),"keydown",this.keyActionHandler),this.model.showClearButton&&this._off(c(this.inputWrapper.clearButton),"mousedown",this.resetHandler)},t.prototype.preventBlur=function(e){(!this.model.allowFiltering&&document.activeElement!==this.inputElement&&(ej.isNullOrUndefined(document.activeElement)||document.activeElement.className&&-1==document.activeElement.className.indexOf(comboBoxClasses.input))&&ej.isDevice()||!ej.isDevice())&&e.preventDefault()},t.prototype.setOldText=function(e){this.setInputValue(this.model.text,this.inputElement,this.model.showClearButton),this.customValue(),this.removeSelection()},t.prototype.setOldValue=function(e){this.valueMuteChange(this.model.allowCustom?this.value():null),this.removeSelection(),this.setHiddenValue()},t.prototype.valueMuteChange=function(e){var t=ej.isNullOrUndefined(e)?null:e.toString();this.setInputValue(t,this.inputElement,this.model.showClearButton),this.value(e),this.model.text=e?e.toString():null,this.model.index=null,this.activeIndex=this.model.index;var i=this.getFields(),t={};t[i.text]=ej.isNullOrUndefined(e)?null:e.toString(),t[i.value]=ej.isNullOrUndefined(e)?null:e.toString(),this.itemData=t,this.item=null,this.previousValue!==this.value()&&this.detachChangeEvent(null)},t.prototype.updateValues=function(){var e;ej.isNullOrUndefined(this.value())?this.model.text&&ej.isNullOrUndefined(this.value())?(e=this.getElementByText(this.model.text))?this.setSelection(e,null):(this.setInputValue(this.model.text,this.inputElement,this.model.showClearButton),this.customValue()):this.setSelection(this.liCollections[this.activeIndex],null):(e=this.getElementByValue(this.value()))?this.setSelection(e,null):this.model.allowCustom?this.valueMuteChange(this.value()):this.valueMuteChange(null),this.setHiddenValue(),this.setInputValue(this.model.text,this.inputElement,this.model.showClearButton)},t.prototype.getAriaAttributes=function(){return{"aria-owns":this.element[0].id+"_options",role:"combobox","aria-autocomplete":"both","aria-hasPopup":"true","aria-expanded":"false","aria-readonly":this.model.readonly.toString(),autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}},t.prototype.searchLists=function(e){this.isTyped=!0,this.model.allowFiltering?(this.listsearchLists(e),""===c.trim(this.filterInput.value)&&this.setHoverList(this.ulElement.querySelector("."+comboBoxClasses.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+comboBoxClasses.li)),this.incrementalSearch(e))},t.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.model.allowFiltering?this.inputWrapper:inputObject},t.prototype.onActionComplete=function(e,t,i,s){this.listonActionComplete(e,t,i),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&this.isTyped&&this.inlineSearch()},t.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),t=this.list.querySelector("."+comboBoxClasses.selected);if(e.text===this.inputElement.value&&!ej.isNullOrUndefined(t))return t;if((ej.isDevice()&&!this.isDropDownClick||!ej.isDevice())&&!ej.isNullOrUndefined(this.liCollections)&&0<this.liCollections.length){var i=this.inputElement.value,s=this.search(i,this.liCollections,"StartsWith",!0).item;return ej.isNullOrUndefined(s)?this.isSelectCustom&&""!==c.trim(this.inputElement.value)&&(this.removeFocus(),this.list.scrollTop=0):(e=this.getIndexByValue(s.getAttribute("data-value"))-1,t=parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.liCollections[0],null).getPropertyValue("height"):this.liCollections[0].currentStyle.height,10),isNaN(t)||(i=this.model.fields.groupBy?this.liCollections[0].offsetHeight:0,this.list.scrollTop=e*t+i,c(s).addClass(comboBoxClasses.focus))),s}return null},t.prototype.setValue=function(e){return e&&"keydown"===e.type&&13===e.KeyCode&&this.removeFillSelection(),this.model.autofill&&e&&"keydown"===e.type&&13!==e.keyCode?(this.preventAutoFill=!1,this.inlineSearch(e),!1):this.listsetValue(e)},t.prototype.setAutoFill=function(e,t){var i;t||this.setHoverList(e),this.model.autofill&&!this.preventAutoFill&&(i=this.getTextByValue(e.getAttribute("data-value")).toString(),t=this.getFormattedValue(e.getAttribute("data-value")),this.isSelected||this.previousValue===t?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value"))),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i))},t.prototype.isAndroidAutoFill=function(e){if(ej.isMobile()){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,s=t.end,n=this.prevSelectPoints.start,t=t.start;return 0!==i&&(i===e.length&&n===e.length||t<n&&s<i||i===s&&n===t)}return!1},t.prototype.inlineSearch=function(e){var t,i=e&&(40===e.keyCode||38===e.keyCode||36===e.keyCode||35===e.keyCode||33===e.keyCode||34===e.keyCode),e=i?this.liCollections[this.activeIndex]:this.getFocusElement();ej.isNullOrUndefined(e)?""===this.inputElement.value?(this.activeIndex=null,this.list.scrollTop=0,t=this.list.querySelector("."+comboBoxClasses.li),this.setHoverList(t)):(this.activeIndex=null,this.removeSelection(),this.removeFocus()):(i||(t=this.getFormattedValue(e.getAttribute("data-value")),this.activeIndex=this.getIndexByValue(t),this.activeIndex=ej.isNullOrUndefined(this.activeIndex)?null:this.activeIndex),this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(e,i))},t.prototype.incrementalSearch=function(e){this.isWatermark||this.hiddenSpan.css("display","none"),this.showPopup(),ej.isNullOrUndefined(this.listData)||(this.inlineSearch(e),e.preventDefault())},t.prototype.setAutoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.inputElement.value.substr(0,t.start);i&&i.toLowerCase()===e.substr(0,t.start).toLowerCase()?(i=i+e.substr(i.length,e.length),this.setInputValue(i,this.inputElement,this.model.showClearButton),this.inputElement.setSelectionRange(t.start,this.inputElement.value.length)):(this.setInputValue(e,this.inputElement,this.model.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length))},t.prototype.setSelection=function(e,t){this.listsetSelection(e,t),ej.isNullOrUndefined(e)||this.model.autofill||this.isDropDownClick||this.removeFocus()},t.prototype.selectCurrentItem=function(e){var t;this.isPopupOpen&&((t=this.list.querySelector("."+comboBoxClasses.focus))&&(this.setSelection(t,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),this.isTyped&&!this.isSelected&&ej.isNullOrUndefined(t)&&this.customValue(),this.hidePopup()},t.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&-1==e.className.indexOf(comboBoxClasses.selected)&&(this.removeFocus(),c(e).addClass(comboBoxClasses.focus))},t.prototype.targetFocus=function(e){c(this.inputWrapper.container).addClass(comboBoxClasses.inputFocus),ej.isDevice()&&!this.model.allowFiltering&&(this.preventFocus=!1),this.isWatermark||this.hiddenSpan.css("display","none"),this.onFocus()},t.prototype.dropDownClick=function(e){ej.isDevice()&&!this.model.allowFiltering&&(this.preventFocus=!0),this.listdropDownClick(e)},t.prototype.customValue=function(){var e,t,i,s,n,a=this.getValueByText(this.inputElement.value,!0);this.model.allowCustom||""===this.inputElement.value?""!==c.trim(this.inputElement.value)&&(e=this.value(),ej.isNullOrUndefined(a)?(t=""===this.inputElement.value?null:this.inputElement.value,i=this.getFields(),s=void 0,s={text:t,item:{}},this.initial||this._trigger("customValueSpecifier",s),n={},(s=s.item)&&s[i.text]&&s[i.value]?n=s:(n[i.text]=t,n[i.value]=t),this.itemData=n,this.model.text=this.itemData[i.text],this.value(this.itemData[i.value]),this.model.index=null,this.setSelection(null,null),this.isSelectCustom=!0):(this.isSelectCustom=!1,this.value(a)),e!==this.value()&&this.onChangeEvent(null)):(this._setModel({value:a}),this.value(a),ej.isNullOrUndefined(this.value())&&this.setInputValue("",this.inputElement,this.model.showClearButton))},t.prototype._init=function(){this.listrender(),this.setSearchBox(),this.model.allowFiltering&&ej.isNullOrUndefined(this.list)&&this.renderList()},t.prototype.hidePopup=function(){if(!ej.isNullOrUndefined(this.listData)){var e=this.isEscapeKey;this.isEscapeKey&&(this.setInputValue(this.typedString,this.inputElement,this.model.showClearButton),this.isEscapeKey=!1),this.model.autofill&&this.removeFillSelection();var t=this.isSelectCustom?{text:""}:this.getItemData(),i=this.list.querySelector("."+comboBoxClasses.selected);if(t.text===this.inputElement.value&&!ej.isNullOrUndefined(i))return this.isSelected&&(this.onChangeEvent(null),this.isSelectCustom=!1),void this.listhidePopup();""!==c.trim(this.inputElement.value)&&(i=this.search(this.inputElement.value,this.liCollections,"Equal",!0),this.selectedLI=i.item,ej.isNullOrUndefined(i.index)&&(i.index=this.search(this.inputElement.value,this.liCollections,"StartsWith",!0).index),this.activeIndex=i.index,ej.isNullOrUndefined(this.selectedLI)?e&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)),this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue()}this.listhidePopup()},t.prototype.focusIn=function(){ej.isDevice()&&!this.model.allowFiltering&&(this.preventFocus=!0),this.listfocusIn()},t.prototype.listhidePopup=function(){this.closePopup();var e=this.getItemData();""!==c.trim(this.inputElement.value)||this.isInteracted||!this.isSelectCustom&&(ej.isNullOrUndefined(this.selectedLI)||this.inputElement.value===e.text)||(this.isSelectCustom=!1,this.clear())},t.prototype.closePopup=function(e){var t;this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj)&&(this._off(c(document),"mousedown",this.onDocumentClick),this.isActive=!1,this.isDropDownClick=!1,this.isDocumentClick=!1,this.preventAutoFill=!1,this._off(ej.getScrollableParents(c(this.inputWrapper.container)),"scroll",this.scrollHandler),c(this.inputElement).attr({"aria-expanded":"false","aria-activedescendant":null}),c(this.inputWrapper.container).removeClass(comboBoxClasses.iconAnimation),this.model.allowFiltering&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.isPopupOpen?((t=this).isPopupOpen=!1,c(this.popupObj).fadeOut(100,function(){c(t.popupObj).removeClass("e-popup-open").addClass("e-popup-close"),t._trigger("close",{popup:t.popupObj}),t.destroyPopup()})):this.destroyPopup())},t.prototype.scrollHandler=function(){ej.isDevice()&&!this.model.allowFiltering&&this.isDropDownClick&&this.hidePopup()},t.prototype.destroyPopup=function(){this.isFilterFocus=!1,this.popupObj&&c("#"+this.popupObj.id+".e-ddl.e-popup.e-control").remove(),this.popupObj=null},t.prototype.onDocumentClick=function(e){var t=e.target;!ej.isNullOrUndefined(this.popupObj)&&0<c(t).closest("#"+this.popupObj.id).length||this.inputWrapper.container.contains(e.target)?t===this.inputElement||this.model.allowFiltering&&t===this.filterInput||!this.model.allowFiltering&&ej.isDevice()&&t===this.inputWrapper.buttons[0]||(this.isPreventBlur=!("msie"!=ej.browserInfo().name&&"edge"!==ej.browserInfo().name||document.activeElement!==this.inputElement&&document.activeElement!==this.filterInput),e.preventDefault()):(-1<this.inputWrapper.container.className.indexOf(comboBoxClasses.inputFocus)||this.isPopupOpen)&&(this.isDocumentClick=!0,e=this.isRequested,this.isInteracted=!1,this.hidePopup(),e||(this.onFocusOut(),c(this.inputWrapper.container).removeClass(comboBoxClasses.inputFocus)))},t.prototype.onFocusOut=function(){this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.dispatchEvent(this.hiddenElement,"change"),this.inputWrapper.clearButton&&c(this.inputWrapper.clearButton).addClass(comboBoxClasses.clearIconHide),this._trigger("blur")},t.prototype.dispatchEvent=function(e,t){var i;document.createEvent&&((i=document.createEvent("HTMLEvents")).initEvent(t,!1,!0),e.dispatchEvent(i))},t.prototype.onBlur=function(e){var t=e.relatedTarget,i=e.target,e=this.isPreventBlur;this.isPreventBlur=!1,!e||this.isDocumentClick||!this.isPopupOpen||ej.isNullOrUndefined(i)&&!ej.isNullOrUndefined(t)?this.isDocumentClick||!ej.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj)&&-1<this.popupObj.className.indexOf(comboBoxClasses.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(document.activeElement!==t||document.activeElement===t&&-1<i.className.indexOf(comboBoxClasses.inputFocus)||!this.inputWrapper.container.contains(t)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(),this.isTabKey=!1):this.inputElement.focus()},t.prototype.focusOutAction=function(){this.isInteracted=!1,this.focusOut(),this.onFocusOut()},t.prototype.focusOut=function(){this.isTyped=!0,this.hidePopup(),this.inputElement.blur(),c(this.inputWrapper.container).removeClass(comboBoxClasses.inputFocus)},t.prototype.listdropDownClick=function(e){-1<this.inputElement.className.indexOf(comboBoxClasses.disable)||this.inputWrapper.clearButton===e.target||(e.target,this.model.readonly||(this.isPopupOpen?this.hidePopup():(this.focusIn(),this.queryString=""===c.trim(this.inputElement.value)?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup())))},t.prototype.showPopup=function(){this.beforePopupOpen?this.refreshPopup():(this.beforePopupOpen=!0,this.model.allowFiltering&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(ej.isNullOrUndefined(this.list)||null!=this.list&&-1<this.list.className.indexOf(comboBoxClasses.noData))&&this.renderList(),(!ej.isNullOrUndefined(this.list.children[0])||-1<this.list.className.indexOf(comboBoxClasses.noData))&&this.renderPopup(),c(this.inputElement).attr({"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),this.model.cssClass&&this.popupObj&&c(this.popupObj).addClass(this.model.cssClass))},t.prototype.listfocusIn=function(){var e;-1<this.inputElement.className.indexOf(comboBoxClasses.disable)||(e=!1,this.preventFocus&&ej.isDevice()&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),e=!(this.preventFocus=!1)),e||this.inputElement.focus(),c(this.inputWrapper.container).addClass(comboBoxClasses.inputFocus),this.onFocus())},t.prototype.onFocus=function(){this.isInteracted||(this.isInteracted=!0,this._trigger("focus")),this.updateIconState()},t.prototype.updateIconState=function(){this.model.showClearButton&&(""!==this.inputElement.value?c(this.inputWrapper.clearButton).removeClass(comboBoxClasses.clearIconHide):c(this.inputWrapper.clearButton).addClass(comboBoxClasses.clearIconHide))},t.prototype.refreshPopup=function(){!ej.isNullOrUndefined(this.popupObj)&&document.body.contains(this.popupObj)&&this.setPopupPosition()},t.prototype.renderPopup=function(){var e,t,i,s;this.popupObj&&document.body.contains(this.popupObj)?this.refreshPopup():(i=ej.buildTag("div#"+this.element[0].id+"_popup.e-ddl e-popup e-widget")[0],e=this.setSearchBox(),this.listHeight=this.formatUnit(this.model.popupHeight),this.model.headerTemplate&&(this.header=document.createElement("div"),c(this.header).addClass(comboBoxClasses.header),this.header.innerHTML=this.model.headerTemplate,c(i).append(this.header)),c(i).append(this.list),this.model.footerTemplate&&this.setFooterTemplate(i),i.style.visibility="hidden",i.style.display="none",document.body.appendChild(i),"auto"!==this.model.popupHeight?(this.searchBoxHeight=0,ej.isNullOrUndefined(e.container)||(this.searchBoxHeight=e.container.parentElement.getBoundingClientRect().height,this.listHeight=(parseInt(this.listHeight,10)-this.searchBoxHeight).toString()+"px"),this.model.headerTemplate&&(t=Math.round(this.header.getBoundingClientRect().height),this.listHeight=(parseInt(this.listHeight,10)-(t+this.searchBoxHeight)).toString()+"px"),this.model.footerTemplate&&(t=Math.round(this.footer.getBoundingClientRect().height),this.listHeight=(parseInt(this.listHeight,10)-(t+this.searchBoxHeight)).toString()+"px"),this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",i.style.maxHeight=this.formatUnit(this.model.popupHeight)):i.style.height="auto",!ej.isNullOrUndefined(this.selectedLI)&&!ej.isNullOrUndefined(this.activeIndex)&&0<=this.activeIndex?this.setScrollPosition():this.list.scrollTop=0,ej.isDevice()&&!this.model.allowFiltering&&this.isDropDownClick&&(this.setPopupPosition(),t=this.isEmptyList()?this.list:this.liCollections[0],parseInt(("undefined"!=typeof getComputedStyle?getComputedStyle(t):t.currentStyle).textIndent,10),parseInt(("undefined"!=typeof getComputedStyle?getComputedStyle(this.inputElement):this.inputElement.currentStyle).textIndent,10),parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.inputElement.parentElement).borderLeftWidth:this.inputElement.parentElement.currentStyle.textIndent)),this.getFocusElement(),this.popupObj=c(i).css("width",this.setWidth()).addClass("e-control e-popup e-ddl")[0],this.model.enableRtl?c(i).addClass(comboBoxClasses.rtl):c(i).removeClass(comboBoxClasses.rtl),ej.isDevice()&&c(this.popupObj).addClass(comboBoxClasses.device),this.setListPosition(),i.style.visibility="visible",this._on(ej.getScrollableParents(c(this.inputWrapper.container)),"scroll",this.scrollHandler),this._on(ej.getScrollableParents(c(this.inputWrapper.container)),"scroll",this.setListPosition),this._on(c(window),"resize",this.setListPosition),c(this.inputElement).attr({"aria-expanded":"true"}),i=this.model.allowFiltering?this.filterInput.parentElement:this.inputWrapper.container,c(i).addClass(comboBoxClasses.inputFocus),c(this.inputWrapper.container).addClass(comboBoxClasses.iconAnimation),this.beforePopupOpen=!0,c((s=this).popupObj).fadeIn(100,function(){s.isPopupOpen=!0,s.activeStateChange(),c(s.popupObj).addClass("e-popup-open"),s._trigger("open",{popup:s.popupObj}),s.model.allowFiltering&&s.filterInput.focus()}),this._on(c(document),"mousedown",this.onDocumentClick),this.wireListEvents(),this.model.fields.groupBy&&this._on(c(this.list),"scroll",this.setFloatingHeader))},t.prototype.setListPosition=function(){var e=this.inputWrapper.container,t=ej.getOffset(c(e)),i=c(document).scrollTop()+c(window).height()-(t.top+c(e).outerHeight()),s=t.top-c(document).scrollTop(),n=c(this.popupObj).outerHeight(),a=c(this.popupObj).outerWidth(),r=t.left,o=c(e).outerHeight(),l=(o-c(e).height())/2,d=ej.getZindexPartial(this.element,this.popupObj),n=(n<i||s<n?t.top+o+3:t.top-n-3)-l,l=c(document).scrollLeft()+c(window).width()-r;(this.model.enableRtl||l<a&&a<r+c(e).outerWidth())&&(r-=c(this.popupObj).outerWidth()-c(e).outerWidth()),c(this.popupObj).css({left:r+"px",top:n+"px","z-index":d})},t.prototype.setFooterTemplate=function(e){this.footer?this.footer.innerHTML="":(this.footer=document.createElement("div"),c(this.footer).addClass(comboBoxClasses.footer)),this.footer.innerHTML=this.model.footerTemplate,c(e).append(this.footer)},t.prototype.setPopupPosition=function(){var e,t=this.list.querySelector("."+comboBoxClasses.focus)||this.selectedLI,i=this.isEmptyList()?this.list:this.liCollections[0],s=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],n=i.getBoundingClientRect().height,a=parseInt(this.listHeight,10)/2,i=(ej.isNullOrUndefined(t)?i:t).offsetTop;return s.offsetTop-a<i&&!ej.isNullOrUndefined(this.liCollections)&&0<this.liCollections.length&&!ej.isNullOrUndefined(t)?(s=parseInt(this.model.popupHeight,10)/n,e=parseInt(("undefined"!=typeof getComputedStyle?getComputedStyle(this.list):this.list.currentStyle).paddingBottom,10),e=(s-(this.liCollections.length-this.activeIndex))*n-2+e,this.list.scrollTop=t.offsetTop):a<i?(e=a-n/2,this.list.scrollTop=i-a+n/2):e=i,-(e=e+n-2+(n-this.inputWrapper.container.offsetHeight)/2)},t.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),c(this.inputWrapper.container).removeClass(comboBoxClasses.inputFocus))},t.prototype.isEmptyList=function(){return!ej.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},t.prototype.formatUnit=function(e){e+="";return"auto"===e||-1!==e.indexOf("%")||-1!==e.indexOf("px")?e:e+"px"},t.prototype.createInput=function(e){var t={container:null,buttons:[],clearButton:null};t.container=ej.buildTag("span."+comboBoxClasses.input+" e-widget")[0],e.element.parentNode.insertBefore(t.container,e.element),t.container.appendChild(c(e.element).addClass("e-input")[0]),e.properties.showClearButton&&(t.clearButton=this.createClearButton(e.element,t.container));var i=ej.buildTag("span."+e.buttons[0])[0];return"msie"===ej.browserInfo().name&&parseInt(ej.browserInfo().version)<=10&&(9==parseInt(ej.browserInfo().version)?c(i).addClass("e-comboie9"):8==parseInt(ej.browserInfo().version)&&c(i).addClass("e-comboie8"),c(i).addClass("e-comboie")),t.container.appendChild(i),t.buttons.push(i),-1==t.container.className.indexOf(comboBoxClasses.input)&&c(t.container).addClass("e-input-group"),e.properties.readonly?c(this.inputElement).attr({readonly:""}):this.inputElement.removeAttribute("readonly"),t},t.prototype.createClearButton=function(t,e){var i=ej.buildTag("span."+comboBoxClasses.clearIcon+("msie"===ej.browserInfo().name&&parseInt(ej.browserInfo().version)<=10?" e-comboie":""))[0];return e.appendChild(i),t.value?c(i).removeClass(comboBoxClasses.clearIconHide):c(i).addClass(comboBoxClasses.clearIconHide),this._on(c(i),"click",function(e){-1<t.className.indexOf(comboBoxClasses.disable)||t.readOnly||(e.preventDefault(),t!==document.activeElement&&t.focus(),t.value="",c(i).addClass(comboBoxClasses.clearIconHide))}),i},t.prototype.setWidth=function(){var e,t=this.formatUnit(this.model.popupWidth);return-1<t.indexOf("%")&&(t=(this.inputWrapper.container.offsetWidth*parseFloat(t)/100).toString()+"px"),ej.isDevice()&&!this.model.allowFiltering&&this.isDropDownClick&&(e=this.isEmptyList()?this.list:this.liCollections[0],t=parseInt(t,10)+2*(parseInt(("undefined"!=typeof getComputedStyle?getComputedStyle(e):e.currentStyle).textIndent,10)-parseInt(("undefined"!=typeof getComputedStyle?getComputedStyle(this.inputElement):this.inputElement.currentStyle).textIndent,10)+parseInt(("undefined"!=typeof getComputedStyle?getComputedStyle(this.inputElement.parentElement):this.inputElement.parentElement.currentStyle).borderLeftWidth,10))+"px"),t},t.prototype.clearText=function(){this.filterInput.value="",this.searchLists(null)},t.prototype.onInput=function(){this.isValidKey=!0,this.updateIconState()},t.prototype.onFilterUp=function(e){if(this.isValidKey=40===e.keyCode||38===e.keyCode||this.isValidKey,this.isValidKey)switch(this.isValidKey=!1,e.keyCode){case 38:case 40:this.preventAutoFill=!1,this.preventAltUp=!1,e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&0<this.queryString.length?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.resetFocusElement(),this.activeIndex=null),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}},t.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},t.prototype.resetHandler=function(e){e.preventDefault(),this.clear()},t.prototype.clear=function(){this.list&&(this.model.allowFiltering&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value(null),this.model.text=null,this.model.index=null,this.activeIndex=null,this.item=null,this.itemData=null,this.queryString="",this.setSelection(null,null),this.isSelectCustom=!1,this.onChangeEvent(null),this.updateIconState()},t.prototype.resetFocusElement=function(){this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0;var e=this.ulElement.querySelector("."+comboBoxClasses.li);e&&c(e).addClass(comboBoxClasses.focus)},t.prototype.keyActionHandler=function(e){var t=33===e.keyCode||34===e.keyCode,i=36===e.keyCode||35===e.keyCode;this.isEscapeKey=27===e.keyCode,this.isTabKey=!this.isPopupOpen&&9===e.keyCode;var s=40===e.keyCode||38===e.keyCode||33===e.keyCode||34===e.keyCode||36===e.keyCode||35===e.keyCode;if((!t&&!i||this.isPopupOpen)&&!this.model.readonly){i=9===e.keyCode||9===e.keyCode&&e.shiftKey;if(void 0!==this.list||this.isRequested||i||27===e.keyCode||(this.searchKeyEvent=e,this.renderList()),!(ej.isNullOrUndefined(this.list)||!ej.isNullOrUndefined(this.liCollections)&&s&&0===this.liCollections.length||this.isRequested))switch((i&&this.isPopupOpen||27===e.keyCode)&&e.preventDefault(),this.isSelected=27!==e.keyCode&&this.isSelected,this.isTyped=!s&&27!==e.keyCode&&this.isTyped,e.keyCode){case 40:case 38:if(e.altKey&&40===e.keyCode){this.showPopup();break}if(e.altKey&&38===e.keyCode){this.preventAltUp=this.isPopupOpen,this.hidePopup();break}var n=this.list.querySelector("."+comboBoxClasses.focus);ej.isNullOrUndefined(n)?(i=void 0,s=40===e.keyCode?this.activeIndex+1:this.activeIndex-1,i=ej.isNullOrUndefined(this.activeIndex)?this.liCollections[0]:this.liCollections[s],this.setSelection(i,e)):this.setSelection(n,e),e.preventDefault();break;case 33:this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case 34:this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case 36:if(e.preventDefault(),0===this.activeIndex)return;this.setSelection(this.liCollections[0],e);break;case 35:e.preventDefault();n=this.getItems().length-1;if(this.activeIndex===n)return;this.setSelection(this.liCollections[n],e);break;case 13:this.selectCurrentItem(e);break;case 27:case 9:this.isPopupOpen&&this.hidePopup()}}},t.prototype.getPageCount=function(){var e=-1<this.list.className.indexOf(comboBoxClasses.noData)?null:"undefined"!=typeof getComputedStyle?getComputedStyle(this.getItems()[0],null).getPropertyValue("height"):this.getItems()[0].currentStyle.height;return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},t.prototype.pageUpSelection=function(e,t){e=0<=e?this.liCollections[e+1]:this.liCollections[0];this.setSelection(e,t)},t.prototype.pageDownSelection=function(e,t){var i=this.getItems(),i=e<=i.length?this.liCollections[e-1]:this.liCollections[i.length-1];this.setSelection(i,t)},t.prototype.getValueByText=function(t,e){var i=null,s=this.listData,n=this.model.fields.text||"text",a=this.model.fields.value||n;if(e)if("string"==typeof s[0]||"number"==typeof s[0])for(var r=0,o=s;r<o.length;r++){var l=o[r];if(String(l).toLowerCase()===t.toString().toLowerCase()){i="string"==typeof s[0]?String(l):this.getFormattedValue(String(l));break}}else s.filter(function(e){if(e[n].toString().toLowerCase()===t.toLowerCase())return i=e[a],!0});else if("string"==typeof s[0]||"number"==typeof s[0])for(var d=0,h=s;d<h.length;d++){l=h[d];if(String(l)===t.toString()){i="string"==typeof s[0]?t:this.getFormattedValue(t);break}}else s.filter(function(e){if(e[n]===t)return i=e[a],!0});return i},t.prototype.removeSelection=function(){var e=this.list.querySelectorAll("."+comboBoxClasses.selected);e.length&&(c(e).removeClass(comboBoxClasses.selected),e[0].removeAttribute("aria-selected"))},t.prototype.listonActionComplete=function(e,t,i,s){var n;this.isNotSearchList?this.isNotSearchList=!1:this.isActive&&(n=this.selectedLI?this.selectedLI.cloneNode(!0):null,this.baseonActionComplete(e,t,i),this.isRequested&&!ej.isNullOrUndefined(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!ej.isNullOrUndefined(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,ej.isNullOrUndefined(e)||c(e).attr({id:this.element[0].id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender&&(this.initial=!0,this.activeIndex=this.model.index,this.updateValues(),this.initRemoteRender=!1,this.initial=!1),this.model.allowFiltering&&!this.isTyped&&(this.actionCompleteData.isUpdated||(this.actionCompleteData={ulElement:e.cloneNode(!0),list:t,isUpdated:!0}),this.addNewItem(t,n),ej.isNullOrUndefined(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup())},t.prototype.addNewItem=function(e,t){var i,s=this;ej.isNullOrUndefined(this.itemData)||ej.isNullOrUndefined(t)||(i=this.getItemData().value,e.some(function(e){return e[s.model.fields.value]===i})||(this.addItem(this.itemData),this.actionCompleteData.list.push(this.itemData),this.actionCompleteData.ulElement.appendChild(t)),t=void 0,(t=this.actionCompleteData.ulElement.querySelectorAll("."+comboBoxClasses.selected)).length&&(c(t).removeClass(comboBoxClasses.selected),t[0].removeAttribute("aria-selected")))},t.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+comboBoxClasses.focus);e&&e.length&&c(e).removeClass(comboBoxClasses.focus)},t.prototype.getItemData=function(){var e=this.model.fields.text||"text",t=this.model.fields.value||e,i=this.itemData;return{value:ej.isNullOrUndefined(i)||ej.isNullOrUndefined(i[t])?i:i[t],text:ej.isNullOrUndefined(i)||ej.isNullOrUndefined(i[e])?i:i[e]}},t.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},t.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},t.prototype.updateSelectedItem=function(e,t,i){this.removeSelection(),c(e).addClass(comboBoxClasses.selected),this.removeHover();var s=this.getFormattedValue(e.getAttribute("data-value"));this.item=e,this.itemData=this.getDataByValue(s),this.initial||i||(this.isSelected=!0,n={e:t,item:this.item,itemData:this.itemData,isInteracted:!!t,text:this.itemData[this.model.fields.text],value:this.itemData[this.model.fields.value]},this._trigger("select",n));var n=this.list.querySelector("."+comboBoxClasses.focus);n&&c(n).removeClass(comboBoxClasses.focus),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(s)},t.prototype.setHiddenValue=function(){var e;ej.isNullOrUndefined(this.value())?this.hiddenElement.innerHTML="":((e=document.createElement("option")).innerText=this.model.text,e.selected=!0,e.setAttribute("value",this.value()),c(this.hiddenElement).append(e))},t.prototype.detachChangeEvent=function(e){this.isSelected=!1,this.previousValue=this.value(),this.activeIndex=this.model.index,this.typedString=ej.isNullOrUndefined(this.model.text)?"":this.model.text,this.initial||(this.setHiddenValue(),e={e:e,item:this.item,itemData:this.itemData,isInteracted:!!e,value:this.value()},this._trigger("_change",{value:this.value()}),this._trigger("change",e))},t.prototype.getElementByValue=function(e){for(var t,i=0,s=this.getItems();i<s.length;i++){var n=s[i];if(this.getFormattedValue(n.getAttribute("data-value"))===e){t=n;break}}return t},t.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},t.prototype.listsearchLists=function(e){var s=this;this.isTyped=!0,this.activeIndex=null,this.filterInput.parentElement.querySelector("."+comboBoxClasses.clearIcon)&&(this.filterInput.parentElement.querySelector("."+comboBoxClasses.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.model.allowFiltering&&this._trigger("filtering",{text:this.filterInput.value,updateData:function(e,t,i){ej.isNullOrUndefined(s.filterInput)||(s.beforePopupOpen=!0,""===c.trim(s.filterInput.value)?(s.actionCompleteData.isUpdated=!1,s.isTyped=!1,s.onActionComplete(s.actionCompleteData.ulElement,s.actionCompleteData.list),s.isTyped=!0,s.isNotSearchList=!0):(s.isNotSearchList=!1,s.resetList(e,i,t)))},event:e})},t.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);e=this.list.querySelector('[data-value="'+e+'"]');this.selectedLI=e,this.activeItem(e),this.removeFocus()},t.prototype.activeItem=function(e){this.isValidLI(e)&&-1==e.className.indexOf(comboBoxClasses.selected)&&(this.removeSelection(),c(e).addClass(comboBoxClasses.selected),this.removeHover(),e.setAttribute("aria-selected","true"))},t.prototype.removeFillSelection=function(){var e;this.isInteracted&&(e=this.getSelectionPoints(),this.inputElement.setSelectionRange(e.end,e.end))},t.prototype.listsetValue=function(e){var t=this.getItemData();return ej.isNullOrUndefined(t.value)?this.setInputValue(null,this.inputElement,this.model.showClearButton):this.setInputValue(t.text,this.inputElement,this.model.showClearButton),this.previousValue===t.value?!(this.isSelected=!1):(this.isSelected=!this.initial,this.isSelectCustom=!1)},t.prototype.listsetSelection=function(e,t){this.isValidLI(e)&&-1==e.className.indexOf(comboBoxClasses.selected)&&this.updateSelectedItem(e,t,!1),this.list&&this.removeHover(),this.selectedLI=e,this.setValue(t)||(this.model.valueTemplate&&null!==this.itemData?(this.valueTempElement||(this.valueTempElement=ej.buildTag("span."+comboBoxClasses.value)[0],this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none",this.inputWrapper.container.focus(),c(this.inputWrapper.container).addClass(comboBoxClasses.inputFocus)),this.valueTempElement.innerHTML="",this.valueTempElement.innerHTML=this.model.valueTemplate):this.inputElement.previousSibling===this.valueTempElement&&(c(this.valueTempElement).remove(),this.inputElement.style.display="block"),this.isPopupOpen&&c(this.inputElement).attr({"aria-activedescendant":this.selectedLI?this.selectedLI.id:null}),(!this.isPopupOpen&&!ej.isNullOrUndefined(e)||this.isPopupOpen&&!ej.isNullOrUndefined(t)&&("keydown"!==t.type||"keydown"===t.type&&13===t.keyCode))&&(this.isSelectCustom=!1,this.onChangeEvent(t)),!this.isPopupOpen||ej.isNullOrUndefined(this.selectedLI)||null===this.itemData||t&&"click"===t.type||this.setScrollPosition(t))},t.prototype.setScrollPosition=function(e){if(ej.isNullOrUndefined(e))this.scrollBottom(!0);else switch(e.keyCode){case 34:case 40:case 35:this.scrollBottom();break;default:this.scrollTop()}},t.prototype.scrollBottom=function(e){var t=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,s=this.list.scrollTop+i-t,s=e?s+2*parseInt(("undefined"!=typeof getComputedStyle?getComputedStyle(this.list):this.list.currentStyle).paddingTop,10):s,e=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,e=this.model.fields.groupBy&&!ej.isNullOrUndefined(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;0===this.activeIndex?this.list.scrollTop=0:(t<i||!(0<e&&this.list.offsetHeight>e))&&(this.list.scrollTop=s)},t.prototype.scrollTop=function(){var e=this.selectedLI.offsetTop-this.list.scrollTop,e=(this.selectedLI.offsetTop,this.selectedLI.offsetHeight,this.list.scrollTop,this.model.fields.groupBy&&!ej.isNullOrUndefined(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e),t=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:0<t&&this.list.offsetHeight>t||(this.list.scrollTop=this.selectedLI.offsetTop-(this.model.fields.groupBy&&!ej.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},t.prototype.onChangeEvent=function(e){var t=this.getItemData(),i=this.isSelectCustom?null:this.activeIndex;this.value(t.value),this.model.index=i,this.model.text=t.text,this.isWatermark||(ej.isNullOrUndefined(this.model.text)?this.hiddenSpan.css("display","block"):this.hiddenSpan.css("display","none")),this.detachChangeEvent(e)},t.prototype.setPlaceholder=function(e,t){c(t).parent()[0];this.isWatermark=c(document.createElement("input")).attr("placeholder","")[0].hasAttribute("placeholder"),ej.isNullOrUndefined(e)||""===e?(t.removeAttribute("placeholder"),t.removeAttribute("aria-placeholder")):(c(t).attr({placeholder:e,"aria-placeholder":e}),this.isWatermark||(this.hiddenSpan=ej.buildTag("span.e-input e-placeholder ").insertAfter(t),this.hiddenSpan.text(e),this.hiddenSpan.css("display","block")))},t.prototype.setReadonly=function(e,t){e?c(t).attr({readonly:""}):t.removeAttribute("readonly")},t.prototype.setEnableRtl=function(){this.model.enableRtl?(c(this.inputElement.parentElement).addClass(comboBoxClasses.rtl),this.popupObj&&c(this.popupObj).addClass(comboBoxClasses.rtl)):(c(this.inputElement.parentElement).removeClass(comboBoxClasses.rtl),this.popupObj&&c(this.popupObj).removeClass(comboBoxClasses.rtl))},t.prototype.listrender=function(){"INPUT"===this.element[0].tagName?this.inputElement=this.element[0]:(this.inputElement=ej.buildTag("input")[0],"EJ-COMBOBOX"!==this.element[0].tagName&&(this.element[0].style.display="none"),this.element[0].parentElement.insertBefore(this.inputElement,this.element[0])),this.inputWrapper=this.createInput({element:this.inputElement,buttons:[comboBoxClasses.icon],properties:{readonly:this.model.readonly,showClearButton:this.model.showClearButton}}),this.setPlaceholder(this.model.placeholder,this.inputElement),this.setCssClass(this.model.cssClass),this.setEnable(),this.setEnableRtl(),"EJ-COMBOBOX"===this.element[0].tagName?this.element[0].appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element[0],this.inputElement);var e=this.element[0].getAttribute("name")?this.element[0].getAttribute("name"):this.element[0].getAttribute("id");this.hiddenElement=ej.buildTag("select",null,null,{name:e,"aria-hidden":"true",class:"e-ddl-hidden",tabindex:"-1"})[0],c(this.inputWrapper.container).prepend(this.hiddenElement),this.element[0].removeAttribute("name"),this.inputWrapper.container.style.width=this.formatUnit(this.model.width),c(this.inputWrapper.container).addClass("e-ddl"),this.wireEvent(),this.tabIndex=this.element[0].hasAttribute("tabindex")?this.element[0].getAttribute("tabindex"):"0",this.element[0].removeAttribute("tabindex");e=this.element[0].getAttribute("id")?this.element[0].getAttribute("id"):"dropdownlist"+ej.getGuid("dropdownlist");this.element[0].id=e,this.inputElement.setAttribute("tabindex",this.tabIndex),c(this.inputElement).attr(this.getAriaAttributes()),this.setHTMLAttributes(),ej.isNullOrUndefined(this.model.index)||(this.activeIndex=this.model.index),ej.isNullOrUndefined(this.value())&&ej.isNullOrUndefined(this.activeIndex)&&ej.isNullOrUndefined(this.model.text)?"SELECT"===this.element[0].tagName&&this.element[0].options[0]&&(e=this.element[0],this.value(e.options[e.selectedIndex].value),this.model.text=ej.isNullOrUndefined(this.value())?null:e.options[e.selectedIndex].textContent,this.initValue()):this.initValue(),this.model.enabled||(this.inputElement.tabIndex=-1),this.initial=!1,this.element[0].style.opacity=""},t.prototype.setHTMLAttributes=function(){if(!ej.isNullOrUndefined(Object.keys)&&Object.keys(this.model.htmlAttributes).length)for(var e=0,t=Object.keys(this.model.htmlAttributes);e<t.length;e++){var i=t[e];"class"===i?this.setCssClass(this.model.htmlAttributes[i]):"disabled"===i&&"disabled"===this.model.htmlAttributes[i]?(this.model.enabled=!1,this.setEnable()):"readonly"===i&&"readonly"===this.model.htmlAttributes[i]?this._setModel({readonly:!0}):"style"===i?this.inputWrapper.container.setAttribute("style",this.model.htmlAttributes[i]):-1<["name","required"].indexOf(i)?this.hiddenElement.setAttribute(i,this.model.htmlAttributes[i]):-1<["title","id","placeholder"].indexOf(i)?"placeholder"===i?this.setPlaceholder(this.model.htmlAttributes[i],this.inputElement):this.element[0].setAttribute(i,this.model.htmlAttributes[i]):this.inputWrapper.container.setAttribute(i,this.model.htmlAttributes[i])}},t.prototype.setCssClass=function(e){c(this.inputWrapper.container).addClass(e),this.popupObj&&c(this.popupObj).addClass(e)},t.prototype.setEnable=function(){this.model.enabled?(c(this.inputElement).removeAttr("disabled aria-disabled").removeClass(comboBoxClasses.disable).attr("aria-disabled","false"),c(this.inputWrapper.container).removeClass(comboBoxClasses.disable),this.inputElement.tabIndex=parseInt(this.tabIndex)):(c(this.inputElement).attr({disabled:"disabled","aria-disabled":"true"}).addClass(comboBoxClasses.disable).attr("aria-disabled","true"),this.hidePopup(),c(this.inputWrapper.container).addClass(comboBoxClasses.disable))},t.prototype.initValue=function(){this.renderList(),this.model.dataSource instanceof ej.DataManager?this.initRemoteRender=!0:this.updateValues()},t.prototype.renderList=function(e){this.baserender(e),this.wireListEvents()},t.prototype.wireListEvents=function(){this._on(c(this.list),"click",this.onMouseClick),this._on(c(this.list),"mouseover",this.onMouseOver),this._on(c(this.list),"mouseout",this.removeHover)},t.prototype.onMouseClick=function(e){var t=e.target,t=c(t).closest("."+comboBoxClasses.li)[0];this.isValidLI(t)&&(this.setSelection(t,e),this.closePopup(100))},t.prototype.onMouseOver=function(e){e=c(e.target).closest("."+comboBoxClasses.li)[0];this.setHover(e)},t.prototype.setHover=function(e){this.model.enabled&&this.isValidLI(e)&&-1==e.className.indexOf(comboBoxClasses.hover)&&(this.removeHover(),c(e).addClass(comboBoxClasses.hover))},t.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+comboBoxClasses.hover);e&&e.length&&c(e).removeClass(comboBoxClasses.hover)},t.prototype.baserender=function(e){this.list=ej.buildTag("div."+comboBoxClasses.content,"",{},{tabindex:"0"})[0],c(this.list).addClass("e-dropdownbase");var t=this.element[0].querySelector("select>optgroup");!this.model.fields.groupBy&&ej.isNullOrUndefined(t)||this._on(c(this.list),"scroll",this.setFloatingHeader),this.setEnableRtl(),this.setEnable(),e||this.initialize()},t.prototype.initialize=function(){var e;this.bindEvent=!0,"SELECT"===this.element[0].tagName?(e=void 0,this.model.dataSource instanceof Array&&(e=this.model.dataSource),(this.model.dataSource instanceof Array?0<e.length:!ej.isNullOrUndefined(this.model.dataSource))||this.renderItemsBySelect()):this.setListData(this.model.dataSource,this.model.fields,this.model.query)},t.prototype.renderItemsBySelect=function(){var e=this.element[0],t={value:"value",text:"text"},i=[],s=e.querySelectorAll("select>optgroup"),n=e.querySelectorAll("select>option");if(this.getJSONfromOption(i,n,t),s.length){for(var a=0;a<s.length;a++){var r=s[a],o={};o[t.text]=r.label,o.isHeader=!0;r=r.querySelectorAll("option");i.push(o),this.getJSONfromOption(i,r,t)}e.querySelectorAll("select>option")}this.model.fields.text=t.text,this.model.fields.value=t.value,this.resetList(i,t)},t.prototype.getJSONfromOption=function(e,t,i){for(var s=0,n=t;s<n.length;s++){var a=n[s],r={};r[i.text]=a.innerText,r[i.value]=a.getAttribute(i.value)?a.getAttribute(i.value):a.innerText,e.push(r)}},t.prototype.setFloatingHeader=function(e){ej.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=ej.buildTag("div."+comboBoxClasses.fixedHead)[0],-1==this.list.querySelector("li").className.indexOf(comboBoxClasses.group)&&(this.fixedHeaderElement.style.display="none"),c(this.list).prepend(this.fixedHeaderElement),this.setFixedHeader()),this.scrollStop(e)},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=this.liCollections[0].offsetWidth;this.fixedHeaderElement.style.width=e.toString()+"px",c(this.fixedHeaderElement).css({zIndex:10});e=this.ulElement.querySelector("."+comboBoxClasses.group);this.fixedHeaderElement.innerHTML=e.innerHTML},t.prototype.scrollStop=function(e){for(var t=e.target,e=parseInt("undefined"!=typeof getComputedStyle?getComputedStyle(this.liCollections[0],null).getPropertyValue("height"):this.liCollections[0].currentStyle.height,10),e=Math.round(t.scrollTop/e),i=this.ulElement.querySelectorAll("li"),s=e;-1<s;s--){if(!ej.isNullOrUndefined(i[s])&&-1<i[s].className.indexOf(comboBoxClasses.group)){var n=i[s];this.fixedHeaderElement.innerHTML=n.innerHTML,this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none"}},t.prototype.getFormattedValue=function(e){return this.listData&&this.listData.length&&("number"==typeof this.listData[0][this.model.fields.value||"value"]||"number"==typeof this.listData[0])?parseInt(e,10):e},t.prototype.baseonActionComplete=function(e,t,i){this.listData=t,this.list.innerHTML="",this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+comboBoxClasses.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,t,this.bindEvent)},t.prototype.getIndexByValue=function(e){for(var t,i=this.getItems(),s=0;s<i.length;s++)if(i[s].getAttribute("data-value")===e.toString()){t=s;break}return t},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+comboBoxClasses.li)},t.prototype.postRender=function(e,t,i){var s=e.querySelector("."+comboBoxClasses.li),n=e.querySelector("."+comboBoxClasses.selected);s&&!n&&c(s).addClass(comboBoxClasses.focus),t.length<=0?(this.l10nUpdate(),c(e).addClass(comboBoxClasses.noData)):c(e).removeClass(comboBoxClasses.noData),this.model.groupTemplate&&this.renderGroupTemplate(e)},t.prototype.renderGroupTemplate=function(e){if(null!==this.model.fields.groupBy&&this.model.dataSource||this.element[0].querySelector("."+comboBoxClasses.group))for(var t=this.model.dataSource,i={},t=(e.querySelectorAll("."+comboBoxClasses.group),this.listGroupDataSource(t,this.model.fields)),s=0,n=e.querySelectorAll("."+comboBoxClasses.group);s<n.length;s++){var a=n[s];i[this.model.fields.groupBy]=a.textContent,a.innerHTML="",c(a).append(this.getTemplatedString(this.model.groupTemplate,i))}},t.prototype.getTemplatedString=function(e,t){for(var i=e,s=i.indexOf("${"),n=i.indexOf("}");-1!=s&&-1!=n;)var a=i.substring(s,n+1),r=a.replace("${","").replace("}",""),s=(i=i.replace(a,ej.getObject(r,t).toString())).indexOf("${"),n=i.indexOf("}");return i},t.prototype.listGroupDataSource=function(e,t){var i=new ej.DataManager(e).executeLocal((new ej.Query).group(t.groupBy));e=[];for(var s=0;s<i.length;s++){var n=i[s].items,a={};a[t.text]=i[s].key,a.isHeader=!0,a.items=n,e.push(a);for(var r=0;r<n.length;r++)e.push(n[r])}return e},t.prototype.updateLocalConstant=function(){this.localizedLabels=ej.getLocalizedConstants("ej.ComboBox",this.model.locale)},t.prototype.getLocalizedLabels=function(e){return(void 0===this.localizedLabels[e]?ej.ComboBox.Locale["en-US"]:this.localizedLabels)[e]},t.prototype.l10nUpdate=function(e){var t;this.updateLocalConstant(),"No Records Found"!==this.model.noRecordsTemplate||"The Request Failed"!==this.model.actionFailureTemplate?(t=e?this.model.actionFailureTemplate:this.model.noRecordsTemplate,this.list.innerHTML=t):this.list.innerHTML=e?this.getLocalizedLabels("actionFailureTemplate"):this.getLocalizedLabels("noRecordsTemplate")},t.prototype.getTextByValue=function(t){var i,e=this.listData,s=this.getFields();if("string"==typeof e[0]||"number"==typeof e[0])for(var n=0,a=e;n<a.length;n++){var r=a[n];if(r.toString()===t.toString()){i=r.toString();break}}else e.filter(function(e){if(!ej.isNullOrUndefined(e[s.value])&&e[s.value].toString()===t.toString())return i=e[s.text],!0});return i},t.prototype.getFields=function(){var e=this.model.fields.text||"text";return{value:(this.model.fields.value||e).toString(),text:e}},t.prototype.resetList=function(e,t,i){this.list&&this.setListData(e,t,i)},t.prototype.setListData=function(e,i,t){var s,n=this;i=i||this.model.fields,this.isActive=!0,e instanceof ej.DataManager?(this.isRequested=!0,this._trigger("actionBegin"),e.executeQuery(t||this.model.query||new ej.Query).done(function(e){var t;n._trigger("actionComplete",e),e.cancel||(t=e.result,s=n.renderItems(t,i),n.onActionComplete(s,t,e),n.isRequested=!1,n._trigger("dataBound",{items:t,e:e}))}).fail(function(e){n.isRequested=!1,n.onActionFailure(e)})):(t={cancel:!1,result:e=new ej.DataManager(e).executeLocal(t||this.model.query||new ej.Query)},this._trigger("actionComplete",t),t.cancel||(s=this.renderItems(e,i),this.onActionComplete(s,e),this._trigger("dataBound",{items:e})))},t.prototype.onActionFailure=function(e){this.liCollections=[],this._trigger("actionFailure",e),this.l10nUpdate(!0),c(this.list).addClass(comboBoxClasses.noData),this.renderPopup()},t.prototype.renderItems=function(e,t){var i=e;return t.value=ej.isNullOrUndefined(t.value)?t.text:t.value,this.model.fields=t,this.model.itemTemplate&&e?(i&&t.groupBy?(i=this.listgroupDataSource(i,t),c(this.list).addClass("e-combobox-group")):i&&"None"!==this.model.sortOrder&&(i=new ej.DataManager(i).executeLocal("descending"==this.model.sortOrder.toLowerCase()?(new ej.Query).sortByDesc(this.model.fields.text):(new ej.Query).sortBy(this.model.fields.text))),this.model.fields.value&&!t.text?t.text=t.value:!t.value&&t.text&&(t.value=t.text),this.listrenderContentTemplate(this.model.itemTemplate,i,t)):(i&&"None"!==this.model.sortOrder&&(e=new ej.DataManager(i).executeLocal("descending"==this.model.sortOrder.toLowerCase()?(new ej.Query).sortByDesc(this.model.fields.text):(new ej.Query).sortBy(this.model.fields.text))),i&&t.groupBy&&(e=this.listGroupDataSource(i,t),c(this.list).addClass("e-combobox-group")),this.createListItems(e,null!==t.text||null!==t.value?{fields:t,showIcon:!ej.isNullOrUndefined(t.iconCss)}:{fields:{value:"text"}}))},t.prototype.listgroupDataSource=function(e,t){var i=new ej.DataManager(e).executeLocal((new ej.Query).group(t.groupBy));e=[];for(var s=0;s<i.length;s++){var n=i[s].items,a={};a[t.text]=i[s].key,a.isHeader=!0,a.items=n,e.push(a);for(var r=0;r<n.length;r++)e.push(n[r])}return e},t.prototype.listrenderContentTemplate=function(e,t,i){for(var s=ej.buildTag("ul."+comboBoxClasses.ul,"",{},{role:"presentation"})[0],n=[],a=0,r=t;a<r.length;a++){var o=r[a],l=o.isHeader,d=ej.buildTag("li."+(l?comboBoxClasses.group:comboBoxClasses.li),"",{},{role:"presentation"})[0];l?d.innerText=o[i.text]:(c(d).append(this.getTemplatedString(e,o)),o=o[i.value],d.setAttribute("data-value",o),d.setAttribute("role","option")),n.push(d)}return c(s).append(n),s},t.prototype.createListItems=function(e,t){if("string"==typeof e[0]){for(var i=[],s=0;s<e.length;s++)i.push(this.generateSingleLevelListItem(e[s],e[s]));return ej.buildTag("ul."+comboBoxClasses.ul,"",{},{role:"presentation"}).append(i)[0]}for(var n=c.extend({},defaultListBaseOptions,t),a=c.extend({},defaultMappedFields,n.fields),r=[],s=0;s<e.length;s++){var o=e[s],l=[];n.showIcon&&l.push(ej.buildTag("span.e-list-icon "+o[a.iconCss])[0]),r.push(this.generateSingleLevelListItem(o[a.text],o[a.value],n.itemClass,l,!(!o.hasOwnProperty("isHeader")||!o.isHeader)))}return ej.buildTag("ul."+comboBoxClasses.ul+" "+n.listClass,"",{},{role:"presentation"}).append(r)[0]},t.prototype.generateSingleLevelListItem=function(e,t,i,s,n){i=ej.buildTag("li."+(!0===n?comboBoxClasses.group:comboBoxClasses.li)+" "+i,"",{role:!0===n?"group":"presentation"})[0];return n?i.innerText=e:(i.setAttribute("data-value",t),i.setAttribute("role","option"),s&&c(i).append(s),i.appendChild(document.createTextNode(e))),i},t.prototype.getDataByValue=function(e){if("string"==typeof this.listData[0]||"number"==typeof this.listData[0]){for(var t=0,i=this.listData;t<i.length;t++)if((s=i[t])===e)return s}else for(var s,n=0,a=this.listData;n<a.length;n++)if((s=a[n])[this.model.fields.value||"value"]===e)return s;return null},t.prototype.search=function(e,t,i,s){s=null==s||s;var n={item:null,index:null};if(e.length){for(var a=e.length,r=s?e.toLowerCase():e,o=0,l=t;o<l.length;o++){var d=l[o],h=(s?c(d).text().toLowerCase():c(d).text()).replace(/^\s+|\s+$/g,"");if("Equal"===i&&h===r||"StartsWith"===i&&h.substr(0,a)===r)return{item:n.item=d,index:n.index=o}}return n}return n},t.prototype.setInputValue=function(e,t,i){ej.isNullOrUndefined(e)||(t.value=e),!ej.isNullOrUndefined(i)&&i&&(e=c(t).parent()[0],i=c(e).find("."+comboBoxClasses.clearIcon)[0],t.value&&-1<e.className.indexOf("e-input-focus")?c(i).removeClass(comboBoxClasses.clearIconHide):c(i).addClass(comboBoxClasses.clearIconHide))},t.prototype.addItem=function(e,t){this.list&&this.list.textContent!==this.model.noRecordsTemplate||this.renderList();for(var i=this.getItems().length,s=(this.list.querySelector("."+comboBoxClasses.selected),((e=e instanceof Array?e:[e])instanceof Array?e:[e]).length),n=ej.isNullOrUndefined(t)||t<0||i-1<t?i:t,a=this.getFields(),r=[],o=0;o<s;o++){var l=e[o],d=ej.buildTag("li#option-add-"+o+"."+comboBoxClasses.li)[0];d.setAttribute("data-value",l[a.value]),d.setAttribute("role","option"),d.appendChild(document.createTextNode(l[a.text])),r.push(d),this.listData.push(l)}if(0===i&&ej.isNullOrUndefined(this.list.querySelector("ul")))this.list.innerHTML="",this.list.appendChild(this.ulElement),c(this.ulElement).append(r);else for(o=0;o<s;o++){this.liCollections[n]?this.liCollections[n].parentNode.insertBefore(r[o],this.liCollections[n]):this.ulElement.appendChild(r[o]);var h=[].slice.call(this.liCollections);h.splice(n,0,r[o]),this.liCollections=h,n+=1}},t);function t(e,t){if(i.call(this),this._rootCSS="e-combobox",this._setFirst=!1,this.PluginName="ejComboBox",this.validTags=["input"],this.type="editor",this._requiresID=!0,this.angular={require:["?ngModel","^?form","^?ngModelOptions"]},this.boolean=!0,this.isPreventBlur=!1,this.isDocumentClick=!1,this.isPopupOpen=!1,this.popupObj=null,this.beforePopupOpen=!1,this.preventFocus=!1,this.isDropDownClick=!1,this.isInteracted=!1,this.isValidKey=!1,this.isSelectCustom=!1,this.preventAutoFill=!1,this.isTyped=!1,this.isSelected=!1,this.prevSelectPoints={},this.initial=!0,this.typedString="",this.actionCompleteData={isUpdated:!1},this.isEscapeKey=!1,this.isFilterFocus=!1,this.isRequested=!1,this.isNotSearchList=!1,this.initRemoteRender=!1,this.searchKeyEvent=null,this.preventAltUp=!1,this.isTabKey=!1,this.model=null,this.defaults={autofill:!1,allowCustom:!0,htmlAttributes:{},allowFiltering:!1,query:null,showClearButton:!0,valueTemplate:null,readonly:!1,text:null,value:null,index:null,headerTemplate:null,footerTemplate:null,fields:{text:null,value:null,iconCss:null,groupBy:null},groupTemplate:null,itemTemplate:null,noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed",sortOrder:"None",dataSource:[],popupHeight:"300px",placeholder:null,cssClass:null,enabled:!0,enableRtl:!1,width:"100%",popupWidth:"100%",locale:"en-US",customValueSpecifier:null,filtering:null,actionBegin:null,actionComplete:null,actionFailure:null,select:null,focus:null,change:null,blur:null,close:null,dataBound:null},this.dataTypes={autofill:"boolean",allowCustom:"boolean",htmlAttributes:"object",allowFiltering:"boolean",showClearButton:"boolean",valueTemplate:"string",readonly:"boolean",text:"string",index:"number",headerTemplate:"string",footerTemplate:"string",dataSource:"data",query:"data",fields:"data",groupTemplate:"string",itemTemplate:"string",noRecordsTemplate:"string",actionFailureTemplate:"string",sortOrder:"enum",placeholder:"string",cssClass:"string",enabled:"boolean",enableRtl:"boolean",locale:"string"},this.observables=["value"],this.value=ej.util.valueFunction("value"),e&&(e.jquery||(e=c("#"+e)),e.length))return c(e).ejComboBox(t).data(this.PluginName)}window.ej.widget("ejComboBox","ej.ComboBox",new e),window.ejComboBox=null}(jQuery),ej.ComboBox.Locale=ej.ComboBox.Locale||{},ej.ComboBox.Locale.default=ej.ComboBox.Locale["en-US"]={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"};var defaultMappedFields={id:"id",text:"text",value:"value",isChecked:"isChecked",enabled:"enabled",iconCss:"icon",tooltip:null,htmlAttributes:null,imageAttributes:null,imageUrl:"imageUrl",groupBy:null},defaultListBaseOptions={showIcon:!1,fields:defaultMappedFields,listClass:"",itemClass:"",sortOrder:"None",template:null,groupTemplate:null},comboBoxClasses={input:"e-input-group",mobileFilter:"e-ddl-device-filter",disable:"e-disabled",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:"e-list-item",focus:"e-item-focus",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",filterInput:"e-input-filter",group:"e-list-group-item",ul:"e-list-parent e-ul",noData:"e-nodata",fixedHead:"e-fixed-head",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",footer:"e-ddl-footer",header:"e-ddl-header",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterParent:"e-filter-parent",content:"e-content"},inputObject={container:null,buttons:[]};window.ej=window.Syncfusion=window.Syncfusion||{},function(v,b,e,g){"use strict";b.DataManager=function(e,t,i){if(!(this instanceof b.DataManager))return new b.DataManager(e,t,i);e=e||[],"string"==typeof(i=i||e.adaptor)&&(i=new b[i]);var s=[],n=this;return e instanceof Array?s={json:e,offline:!0}:"object"==typeof e?v.isPlainObject(e)?(e.json||(e.json=[]),e.table&&(e.json=this._getJsonFromElement(e.table,e.headerOption)),s={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,async:e.async,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,antiForgery:e.antiForgery,jsonp:e.jsonp,dataType:e.dataType,enableAjaxCache:e.enableAjaxCache,offline:e.offline!==g?e.offline:!("remoteSaveAdaptor"==e.adaptor||e.adaptor instanceof b.remoteSaveAdaptor)&&!e.url,requiresFormat:e.requiresFormat}):(e.jquery||A(e))&&(s={json:this._getJsonFromElement(e),offline:!0,table:e}):"string"==typeof e&&(s={url:e,offline:!1,dataType:"json",json:[]}),s.requiresFormat!==g||b.support.cors||(s.requiresFormat=!!V(s.crossDomain)||s.crossDomain),s.antiForgery&&this.antiForgeryToken(),s.dataType===g&&(s.dataType="json"),this.dataSource=s,this.defaultQuery=t,s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=i||new b.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(t||b.Query()).done(function(e){n.dataSource.offline=!0,n.isDataAvailable=!0,s.json=e.result,n.adaptor=new b.JsonAdaptor})):this.adaptor=new(s.offline?b.JsonAdaptor:b.ODataAdaptor),!s.jsonp&&this.adaptor instanceof b.ODataAdaptor&&(s.jsonp="callback"),this.adaptor=i||this.adaptor,s.enableCaching&&(this.adaptor=new b.CacheAdaptor(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this},b.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(e,t,i,s){"function"==typeof e&&(s=i,i=t,t=e,e=null),(e=e||this.defaultQuery)instanceof b.Query||B("DataManager - executeQuery() : A query is required to execute");var n=v.Deferred();n.then(t,i,s);var a,r={query:e};return this.dataSource.offline||this.dataSource.url==g?b.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?k(function(){this._localQueryProcess(e,r,n)},this):this._localQueryProcess(e,r,n):(a=this.adaptor.processQuery(this,e),b.isNullOrUndefined(a.url)?k(function(){r=this._getDeferedArgs(e,a,r),n.resolveWith(this,[r])},this):this._makeRequest(a,n,r,e)),n.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=P(e._fromTable,i.result,this),i.getKnockoutModel=M(i.result),i},executeLocal:function(e){this.defaultQuery||e instanceof b.Query||B("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||B("DataManager - executeLocal() : Json data is required to execute"),e=e||this.defaultQuery;var t=this.adaptor.processQuery(this,e);if(e._subQuery){var i=e._subQuery._fromTable,s=e._subQuery._lookup,n=e._requiresCount?t.result:t;s&&s instanceof Array&&r(e._subQuery._fKey,i,n,s,e._subQuery._key);for(var a=0;a<n.length;a++)n[a][i]instanceof Array&&(n[a]=v.extend({},n[a]),n[a][i]=this.adaptor.processResponse(e._subQuery.using(b.DataManager(n[a][i].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(t,this,e)},_makeRequest:function(e,o,l,d){var h=!!d._subQuerySelector,n=z(function(e){l.error=e,o.rejectWith(this,[l])},this),c=z(function(e,t,i,s,n,a,r){h||(l.xhr=i,l.count=parseInt(t,10),l.result=e,l.request=s,l.aggregates=a,l.getTableModel=P(d._fromTable,e,this),l.getKnockoutModel=M(e),l.actual=n,l.virtualSelectRecords=r,o.resolveWith(this,[l]))},this),u=z(function(t,e){var i=v.Deferred(),s={parent:l};d._subQuery._isChild=!0;e=this.adaptor.processQuery(this,d._subQuery,t?this.adaptor.processResponse(t):e),s=this._makeRequest(e,i,s,d._subQuery);return h||i.then(function(e){t&&(r(d._subQuery._fKey,d._subQuery._fromTable,t,e,d._subQuery._key),c(t))},n),s},this),t=N(function(e,t,i,s){-1==i.getResponseHeader("Content-Type").indexOf("xml")&&b.dateParse&&(e=b.parseJSON(e));var n=this.adaptor.processResponse(e,this,d,i,s),a=0,r=null,o=e.virtualSelectRecords;d._requiresCount&&(a=n.count,r=n.aggregates,n=n.result),d._subQuery?h||u(n):c(n,a,i,s,e,r,o)},this),t=v.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!!b.isNullOrUndefined(this.dataSource.enableAjaxCache)||this.dataSource.enableAjaxCache,beforeSend:z(this._beforeSend,this),processData:!1,success:t,error:n},e);return"async"in this.dataSource&&(t.async=this.dataSource.async),t=v.ajax(t),h&&((e=d._subQuerySelector.call(this,{query:d._subQuery,parent:d}))&&e.length?(t=v.when(t,u(null,e))).then(N(function(e,t,i){var s=this.adaptor.processResponse(e[0],this,d,e[2],i[0]),n=0;d._requiresCount&&(n=s.count,s=s.result);i=this.adaptor.processResponse(t[0],this,d._subQuery,t[2],i[1]),n=0;d._subQuery._requiresCount&&(n=i.count,i=i.result),r(d._subQuery._fKey,d._subQuery._fromTable,s,i,d._subQuery._key),h=!1,c(s,n,e[2])},this),n):h=!1),t},_beforeSend:function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,s=this.dataSource.headers,n=0;s&&n<s.length;n++)for(var a in i=[],s[n])i.push(a),e.setRequestHeader(a,s[n][a])},saveChanges:function(n,a,e,t){e instanceof b.Query&&(t=e,e=null);e={url:e,key:a||this.dataSource.key},t=this.adaptor.batchRequest(this,n,e,t);if(this.dataSource.offline)return t;var r=v.Deferred();return v.ajax(v.extend({beforeSend:z(this._beforeSend,this),success:N(function(e,t,i,s){r.resolveWith(this,[this.adaptor.processResponse(e,this,null,i,s,n,a)])},this),error:function(e){r.rejectWith(this,[{error:e}])}},t)),r.promise()},insert:function(e,t,i){e=x.replacer(e,!0),t instanceof b.Query&&(i=t,t=null);i=this.adaptor.insert(this,e,t,i);if(this.dataSource.offline)return i;var n=v.Deferred();return v.ajax(v.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},i)),n.promise()},antiForgeryToken:function(){return b.isNullOrUndefined(v("input[name='_ejRequestVerifyToken']").val())?b.buildTag("input","","",{type:"hidden",name:"_ejRequestVerifyToken",value:b.getGuid()}).appendTo("body"):v("input[name='_ejRequestVerifyToken']").val(b.getGuid()),b.cookie.set("_ejRequestVerifyToken",v("input[name='_ejRequestVerifyToken']").val()),{name:"_ejRequestVerifyToken",value:v("input[name='_ejRequestVerifyToken']").val()}},remove:function(e,t,i,s){"object"==typeof t&&(t=t[e]),i instanceof b.Query&&(s=i,i=null);s=this.adaptor.remove(this,e,t,i,s);if(this.dataSource.offline)return s;var n=v.Deferred();return v.ajax(v.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},s)),n.promise()},update:function(e,t,i,s){t=x.replacer(t,!0),i instanceof b.Query&&(s=i,i=null);s=this.adaptor.update(this,e,t,i,s);if(this.dataSource.offline)return s;var n=v.Deferred();return v.ajax(v.extend({contentType:"application/json; charset=utf-8",beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},s)),n.promise()},_getJsonFromElement:function(e){"string"==typeof e&&(e=v(v(e).html()));var t=(e=e.jquery?e[0]:e).tagName.toLowerCase();return"table"!==t&&B("ej.DataManager : Unsupported htmlElement : "+t),b.parseTable(e)}};var r=function(e,t,i,s,n){var a,r={};for(s.result&&(s=s.result),s.GROUPGUID&&B("ej.DataManager: Do not have support Grouping in hierarchy"),a=0;a<s.length;a++){var o=b.getObject(e,s[a]);(r[o]||(r[o]=[])).push(s[a])}for(a=0;a<i.length;a++)i[a][t]=r[b.getObject(n||e,i[a])]},a="application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",s="multipart/mixed",o="--changeset_",l="batch_",d="Content-Type: application/http\nContent-Transfer-Encoding: binary ",h="Content-Type: application/json; charset=utf-8 ",x={parseJson:function(e){var t=typeof e;return"string"==t?e=JSON.parse(e,x.jsonReviver):e instanceof Array?x.iterateAndReviveArray(e):"object"==t&&x.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?x.iterateAndReviveJson(e[t]):"string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?e[t]=x.parseJson(e[t]):e[t]=x.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t,i;for(i in e)i.startsWith("__")||("object"==typeof(t=e[i])?t instanceof Array?x.iterateAndReviveArray(t):x.iterateAndReviveJson(t):e[i]=x.jsonReviver(i,t))},jsonReviver:function(e,t){var i=t,s=/[\-,/,\,.,:,]+/;if("string"==typeof t){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(n)return b.parseDateInUTC?x.isValidDate(n[0]):x.replacer(new Date(parseInt(n[1])));(b.dateParse?/^(?:(\d{4}\-\d\d\-\d\d)|(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?)$/:/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/).test(t)&&(i=i.split(/[^0-9]/),/^(\d{4}\-\d\d\-\d\d)$/.test(t)?t=new Date(i[b.dateFormat.split(s).indexOf("yyyy")],i[b.dateFormat.split(s).indexOf("MM")]-1,i[b.dateFormat.split(s).indexOf("dd")]):(t=b.parseDateInUTC?x.isValidDate(t):x.replacer(new Date(t)),isNaN(t)&&(t=x.replacer(new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5])))))}return t},isValidDate:function(e){var t=e;return"string"==typeof t&&0==t.indexOf("/Date(")&&(e=t.replace(/\d+/,function(e){var t=6e4*new Date(parseInt(e)).getTimezoneOffset(),t=parseInt(e)+t;return x.replacer(new Date(parseInt(t)))})),"string"!=typeof e?e:(e=(e=e.replace("/Date(",function(){return""})).replace(")/",function(){return""}),new Date(e)instanceof Date?new Date(e):e)},isJson:function(e){return"string"==typeof e[0]?e:b.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e,t){return b.isPlainObject(e)?x.jsonReplacer(e,t):e instanceof Array?x.arrayReplacer(e):e instanceof Date?x.jsonReplacer({val:e},t).val:e},jsonReplacer:function(e,t){var i,s,n;for(i in e)(n=e[i])instanceof Date&&(s=60*b.serverTimezoneOffset*60*1e3*(b.isNullOrUndefined(t)||!1===t?1:-1),e[i]=new Date(+n+s));return e},arrayReplacer:function(e){for(var t=0;t<e.length;t++)b.isPlainObject(e[t])?e[t]=x.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=x.jsonReplacer({date:e[t]}).date);return e}};b.isJSON=x.isJson,b.parseJSON=x.parseJson,b.dateParse=!0,b.dateFormat="yyyy-MM-dd",b.isGUID=x.isGuid,b.Query=function(e){return this instanceof b.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new b.Query(e)},b.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof b.DataManager?(this.dataManagar=e,this):B("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,t,i,s){return(e=e||this.dataManagar)&&e instanceof b.DataManager?e.executeQuery(this,t,i,s):B("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return(e=e||this.dataManagar)&&e instanceof b.DataManager?e.executeLocal(this):B("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new b.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,t){return"function"==typeof t||b.isPlainObject(t)?"function"==typeof t&&this._params.push({key:e,fn:t}):this._params.push({key:e,value:t}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,t,i,s,n){t=(t||b.FilterOperators.equal).toLowerCase();var a=null;return"string"==typeof e?a=new b.Predicate(e,t,i,s,n):e instanceof b.Predicate?a=e:B("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:a}),this},search:function(e,t,i,s,n){t&&"boolean"!=typeof t?"string"==typeof t&&(t=[t]):s=t=[],"boolean"==typeof i&&(s=i,i=null),(i=i||b.FilterOperators.contains).length<3&&(i=b.data.operatorSymbols[i]);var a=b.data.fnOperators[i]||b.data.fnOperators.processSymbols(i);return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:s,ignoreAccent:n,comparer:a}}),this},sortBy:function(e,t,i){var s,n,a=b.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),t=b.sortOrder.Descending),e instanceof Array){for(var r=0;r<e.length;r++)this.sortBy(e[r],t,i);return this}if("boolean"==typeof t?t=t?b.sortOrder.Descending:b.sortOrder.Ascending:"function"==typeof t&&(a="custom"),t&&"string"!=typeof t||(a=t?t.toLowerCase():b.sortOrder.Ascending,t=b.pvt.fnSort(t)),i){s=y(this.queries,"onSortBy");for(r=0;r<s.length;r++)if("string"==typeof(n=s[r].e.fieldName)){if(n===e)return this}else if(n instanceof Array)for(var o=0;o<n.length;o++)if(n[o]===e||e.toLowerCase()===n[o]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:t,direction:a}}),this},sortByDesc:function(e){return this.sortBy(e,b.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return"number"==typeof e&&"number"==typeof t||B("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&B("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&B("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||B("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,t){return e&&e instanceof b.Query||B("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof t&&(this._subQuerySelector=t),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},b.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},b.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",antiForgery:"antiForgery"},init:function(){},extend:function(e){function t(e){this.dataSource=e,this.options&&(this.options=v.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}}var i,s=((t.prototype=new this.type).type=t).prototype.base={};for(i in e)t.prototype[i]&&(s[i]=t.prototype[i]);return v.extend(!0,t.prototype,e),t},processQuery:function(e,t){},processResponse:function(e,t,i,s){return e.d||e},convertToQueryString:function(e,t,i){return v.param(e)},type:b.Adaptor},b.UrlAdaptor=(new b.Adaptor).extend({processQuery:function(e,t,i){var s,n,a=y(t.queries,"onSortBy"),r=y(t.queries,"onGroup"),o=y(t.queries,"onWhere"),l=y(t.queries,"onSearch"),d=y(t.queries,"onAggregates"),h=w(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),c=t._params,u=e.dataSource.url,p=null,m=this.options,g={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};h.onPage?(s=h.onPage,n=((n=S(s.pageIndex,t))-1)*(p=S(s.pageSize,t))):h.onRange&&(n=(s=h.onRange).start,p=s.end-s.start);for(var f=0;f<a.length;f++)s=S(a[f].e.fieldName,t),g.sorted.push(C(this,"onEachSort",{name:s,direction:a[f].e.direction},t));i&&(s=this.getFiltersFrom(i,t))&&g.filters.push(C(this,"onEachWhere",s.toJSON(),t));for(f=0;f<o.length;f++)for(var _ in g.filters.push(C(this,"onEachWhere",o[f].e.toJSON(),t)),g.filters[f])V(g[_])&&delete g[_];for(f=0;f<l.length;f++)s=l[f].e,g.searches.push(C(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(f=0;f<r.length;f++)g.grouped.push(S(r[f].e.fieldName,t));for(f=0;f<d.length;f++)s=d[f].e,g.aggregates.push({type:s.type,field:S(s.field,t)});var v={};for(_ in v[m.from]=t._fromTable,m.expand&&(v[m.expand]=t._expands),v[m.select]=h.onSelect?C(this,"onSelect",S(h.onSelect.fieldNames,t),t):"",v[m.count]=t._requiresCount?C(this,"onCount",t._requiresCount,t):"",v[m.search]=g.searches.length?C(this,"onSearch",g.searches,t):"",v[m.skip]=h.onSkip?C(this,"onSkip",S(h.onSkip.nos,t),t):"",v[m.take]=h.onTake?C(this,"onTake",S(h.onTake.nos,t),t):"",v[m.antiForgery]=e.dataSource.antiForgery?e.antiForgeryToken().value:"",v[m.where]=g.filters.length||g.searches.length?C(this,"onWhere",g.filters,t):"",v[m.sortBy]=g.sorted.length?C(this,"onSortBy",g.sorted,t):"",v[m.group]=g.grouped.length?C(this,"onGroup",g.grouped,t):"",v[m.aggregates]=g.aggregates.length?C(this,"onAggregates",g.aggregates,t):"",v.param=[],C(this,"addParams",{dm:e,query:t,params:c,reqParams:v}),v)!V(v[_])&&""!==v[_]&&0!==v[_].length&&"params"!==_||delete v[_];m.skip in v&&m.take in v||null===p||(v[m.skip]=C(this,"onSkip",n,t),v[m.take]=C(this,"onTake",p,t));p=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(v),url:u,ejPvtData:p,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(v,t,e),{type:"GET",url:(s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s).length?u.replace(/\/*$/,s):u,ejPvtData:p})},convertToQueryString:function(e,t,i){return i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")?v.param(e):"?"+v.param(e)},processResponse:function(e,t,i,s,n,a){var r=n.ejPvtData||{},o=e.groupDs;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];n=JSON.parse(n.data);if(n&&"batch"===n.action&&e.added)return a.added=e.added,a;if(e.d&&(e=e.d),r&&r.aggregates&&r.aggregates.length){var l,d=r.aggregates,h={},c={};"count"in e&&(h.count=e.count),e.result&&(h.result=e.result),e.aggregate&&(e=e.aggregate);for(var u=0;u<d.length;u++)(l=b.aggregates[d[u].type])&&(c[d[u].field+" - "+d[u].type]=l(e,d[u].field));h.aggregates=c,e=h}if(r&&r.groups&&r.groups.length){var p=r.groups,h={};"count"in e&&(h.count=e.count),e.aggregates&&(h.aggregates=e.aggregates),e.result&&(e=e.result);for(u=0;u<p.length;u++){var m=D(p[u],i.queries);b.isNullOrUndefined(o)||(o=b.group(o,p[u],null,m)),e=b.group(e,p[u],r.aggregates,m,null,o)}return h.count!=g?h.result=e:h=e,h}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){i={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i)}},beforeSend:function(e,t){},insert:function(e,t,i,s){i={value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(i)}},remove:function(e,t,i,s,n){s={key:i,keyColumn:t,table:s,action:"remove",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:s}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(s)}},update:function(e,t,i,s,n){s={value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:s}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(s)}},getFiltersFrom:function(e,t){e instanceof Array&&e.length||B("ej.SubQuery: Array of key values required");var i,s=t._fKey,n=s,a=t._key,r=[],o="object"!=typeof e[0];"object"!=typeof e[0]&&(n=null);for(var l=0;l<e.length;l++)i=o?e[l]:b.pvt.getObject(a||n,e[l]),r.push(new b.Predicate(s,"==",i));return b.Predicate.or(r)},addParams:function(e){var t=e.dm,i=e.query,s=e.params,n=e.reqParams;n.params={};for(var a,r=0;a=s[r];r++)n[a.key]&&B("ej.Query: Custom Param is conflicting other request arguments"),n[a.key]=a.value,a.fn&&(n[a.key]=a.fn.call(i,a.key,i,t)),n.params[a.key]=n[a.key]}}),b.WebMethodAdaptor=(new b.UrlAdaptor).extend({processQuery:function(e,t,i){var s=b.UrlAdaptor.prototype.processQuery(e,t,i),n=b.parseJSON(s.data),i={};return i.value=n,C(this,"addParams",{dm:e,query:t,params:t._params,reqParams:i}),{data:JSON.stringify(i),url:s.url,ejPvtData:s.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t=e.dm,i=e.query,s=e.params,n=e.reqParams;n.params={};for(var a,r=0;a=s[r];r++){n[a.key]&&B("ej.Query: Custom Param is conflicting other request arguments");var o=a.key,l=a.value;a.fn&&(l=a.fn.call(i,a.key,i,t)),n[o]=l,n.params[o]=n[o]}}}),b.CacheAdaptor=(new b.UrlAdaptor).extend({init:function(e,s,t){b.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=t,this.guidId=b.getGuid("cacheAdaptor");window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}));var n=this.guidId;b.isNullOrUndefined(s)||setInterval(function(){for(var e=b.parseJSON(window.localStorage.getItem(n)),t=[],i=0;i<e.results.length;i++)e.results[i].timeStamp=new Date-new Date(e.results[i].timeStamp),new Date-new Date(e.results[i].timeStamp)>s&&t.push(i);for(i=0;i<t.length;i++)e.results.splice(t[i],1),e.keys.splice(t[i],1);window.localStorage.removeItem(n),window.localStorage.setItem(n,JSON.stringify(e))},s)},generateKey:function(e,t){var i=y(t.queries,"onSortBy"),s=y(t.queries,"onGroup"),n=y(t.queries,"onWhere"),a=y(t.queries,"onSearch"),r=(y(t.queries,"onPage"),w(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),o=(t._params,e);r.onPage&&(o+=r.onPage.pageIndex),i.forEach(function(e){o+=e.e.direction+e.e.fieldName}),s.forEach(function(e){o+=e.e.fieldName}),a.forEach(function(e){o+=e.e.searchKey});for(var l=0;l<n.length;l++){var d=n[l];if(d.e.isComplex){var h=t.clone();h.queries=[];for(var c=0;c<d.e.predicates.length;c++)h.queries.push({fn:"onWhere",e:d.e.predicates[c],filter:t.queries.filter});o+=d.e.condition+this.generateKey(e,h)}else o+=d.e.field+d.e.operator+d.e.value}return o},processQuery:function(e,t,i){var s,t=this.generateKey(e.dataSource.url,t);window.localStorage&&(s=b.parseJSON(window.localStorage.getItem(this.guidId)));t=s?s.results[s.keys.indexOf(t)]:null;return null==t||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):t},processResponse:function(e,t,i,s,n,a){if(this._insertAction||n&&this.cacheAdaptor.options.batch&&n.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,s,n,a);var e=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),t=this.generateKey(t.dataSource.url,i),r={};window.localStorage&&(r=b.parseJSON(window.localStorage.getItem(this.guidId)));i=v.inArray(t,r.keys);for(-1!=i&&(r.results.splice(i,1),r.keys.splice(i,1)),r.results[r.keys.push(t)-1]={keys:t,result:e.result,timeStamp:new Date,count:e.count};r.results.length>this.pageSize;)r.results.splice(0,1),r.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(r)),e},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var y=function(e,t){return e.filter(function(e){return e.fn===t})||[]},w=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},n=0;n<i.length;n++)s[i[n].fn]||(s[i[n].fn]=i[n].e);return s},C=function(e,t,i,s){return e[t]&&(s=e[t](i,s),V(s)||(i=s)),i};b.ODataAdaptor=(new b.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},_typeStringQuery:function(e,t,i,s,n){-1!=i.indexOf("'")&&(i=i.replace(new RegExp(/'/g),"''"));return/[ !@@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(i)&&(i=encodeURIComponent(i)),i="'"+i+"'",t&&(s="cast("+s+", 'Edm.String')"),b.isGUID(i)&&(n="guid"),e.ignoreCase&&(n||(s="tolower("+s+")"),i=i.toLowerCase()),{val:i,guid:n,field:s}},onPredicate:function(e,t,i){var s,n,a,r="",o=e.value,l=typeof o,d=this._p(e.field);if(o instanceof Date&&(o="datetime'"+x.replacer(o).toJSON()+"'"),"string"==l&&(o=(h=this._typeStringQuery(e,i,o,d,n)).val,d=h.field,n=h.guid),s=b.data.odBiOperator[e.operator],""!=e.anyCondition&&s)return r+=o.table,r+="/"+e.anyCondition,r+="(d:d/",r+=d,r+=s,r+=o.value,r+=")";if("in"!=e.operator&&"notin"!=e.operator)return s?this.onOperation(r,s,d,o,n):(s=b.data.odUniOperator[e.operator])&&"string"==l?("substringof"===s&&(l=o,o=d,d=l),r+=s+"(",r+=d+",",n&&(r+=n),r+=o+")","notcontains"==e.operator&&(r+=" eq false"),""!=e.anyCondition&&s?(a+=o.table,a+="/"+e.anyCondition,a+="(d:d/",r+=r,a+=")"):r):"";r+="(";for(var h,c=0;c<o.length;c++)o[c]instanceof Date&&(o[c]="datetime'"+x.replacer(o[c]).toJSON()+"'"),"string"==typeof o[c]&&(h=this._typeStringQuery(e,i,o[c],d,n),o[c]=h.val,d=h.field,n=h.guid),r+=d,r+=s,r+=o[c],c!=o.length-1&&(r+="in"==e.operator?" or ":" and ");return r+=")"},onOperation:function(e,t,i,s,n){return e+=i,e+=t,n&&(e+=n),e+s},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){0===e.fields.length&&B("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.searches||[],i=0;i<e.fields.length;i++)t.push(new b.Predicate(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.searches=t},onSearch:function(e){return this.pvt.searches=b.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)t.push(this._p(e.name[i]));else t.push(this._p(e.name)+("descending"===e.direction?" desc":""));return t.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",s),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(e,t,i,s,n,a){if(!b.isNullOrUndefined(e.d)){var r=i&&i._requiresCount?e.d.results:e.d;if(!b.isNullOrUndefined(r))for(var o=0;o<r.length;o++)b.isNullOrUndefined(r[o].__metadata)||delete r[o].__metadata}var l=n&&n.ejPvtData;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];if(n&&this.options.batch&&n.url.endsWith(this.options.batch)&&"post"===n.type.toLowerCase()){var d,h,c=(c=s.getResponseHeader("Content-Type")).substring(c.indexOf("=batchresponse")+1);if((e=e.split(c)).length<2)return;e=e[1];var u=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(e);e.replace(u[0],"");for(c=u[1],o=(e=e.split(c)).length;-1<o;o--)/\bContent-ID:/i.test(e[o])&&/\bHTTP.+201/.test(e[o])&&(d=parseInt(/\bContent-ID: (\d+)/i.exec(e[o])[1]),a.added[d]&&(h=x.parseJson(/^\{.+\}/m.exec(e[o])[0]),v.extend(a.added[d],this.processResponse(h))));return a}u=null,c={},s=(s=s&&s.getResponseHeader("DataServiceVersion"))&&parseInt(s,10)||2;if(i&&i._requiresCount&&((e.__count||e["odata.count"])&&(u=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(u=e.__count||e["odata.count"])),3===s&&e.value&&(e=e.value),e.d&&(e=e.d),s<3&&e.results&&(e=e.results),l&&l.aggregates&&l.aggregates.length){for(var p,m=l.aggregates,g={},o=0;o<m.length;o++)(p=b.aggregates[m[o].type])&&(g[m[o].field+" - "+m[o].type]=p(e,m[o].field));c=g}if(l&&l.groups&&l.groups.length)for(var f=l.groups,o=0;o<f.length;o++){var _=D(f[o],i.queries);e=b.group(e,f[o],l.aggregates,_)}return V(u)?e:{result:e,count:u,aggregates:c}},convertToQueryString:function(e,t,i){var s,n=[],a=e.table||"";for(s in delete e.table,i.dataSource.requiresFormat&&(e.$format="json"),e)n.push(s+"="+e[s]);return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!a?n:n.length?a+"?"+n:a||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,t,i,s){return"string"==typeof i?{type:"DELETE",url:b.isGUID(i)?e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")":e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"('"+i+"')"}:{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")"}},update:function(e,t,i,s){t="string"!=typeof i[t]||b.isGUID(i[t])?e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i[t]+")":e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"('"+i[t]+"')";return{type:"PUT",url:t,data:JSON.stringify(i),accept:this.options.accept}},batchRequest:function(e,t,i){var s=i.guid=b.getGuid(l),n=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),e={url:i.url,key:i.key,cid:1,cSet:b.getGuid(o)},i="--"+s+"\n";return i+="Content-Type: multipart/mixed; boundary="+e.cSet.replace("--","")+"\n",this.pvt.changeSet=0,i+=this.generateInsertRequest(t.added,e),i+=this.generateUpdateRequest(t.changed,e),i+=this.generateDeleteRequest(t.deleted,e),i+=e.cSet+"--\n",{type:"POST",url:n,contentType:"multipart/mixed; charset=UTF-8;boundary="+s,data:i+="--"+s+"--"}},generateDeleteRequest:function(e,t){if(!e)return"";for(var i,s="",n=0;n<e.length;n++)s+="\n"+t.cSet+"\n",s+=d+"\n\n",s+="DELETE ",i="string"==typeof e[n][t.key]?"'"+e[n][t.key]+"'":e[n][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+a+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=h+"\n";return s+"\n"},generateInsertRequest:function(e,t){if(!e)return"";for(var i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=d+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+a+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=h+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){if(!e)return"";for(var i,s="",n=0;n<e.length;n++)s+="\n"+t.cSet+"\n",s+=d+"\n\n",s+="PUT ",i="string"==typeof e[n][t.key]?"'"+e[n][t.key]+"'":e[n][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+a+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=h+"\n\n",s+=JSON.stringify(e[n])+"\n\n";return s},_p:function(e){return e.replace(/\./g,"/")}}),b.ODataV4Adaptor=(new b.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,t,i){var s="",n=e.value instanceof Date;return b.data.odUniOperator.contains="contains",s=b.ODataAdaptor.prototype.onPredicate.call(this,e,t,i),b.data.odUniOperator.contains="substringof",n&&(s=s.replace(/datetime'(.*)'$/,"$1")),s},onOperation:function(e,t,i,s,n){return n?(e+="("+i,e+=t,e+=s.replace(/["']/g,"")+")"):(e+=i,e+=t,e+=s),e},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(e){return this.pvt.search.join(" OR ")},beforeSend:function(e,t,i){},processQuery:function(e,t){for(var i=/\/[\d*\/]*/g,s="",n=t._expands.length-1;0<n;n--)if(0<=s.indexOf(t._expands[n]))t._expands.pop();else if(i.test(t._expands[n])){for(var a=(s=t._expands.pop()).replace(i,"($expand="),r=0;r<s.split(i).length-1;r++)a+=")";t._expands.unshift(a),n++}return b.ODataAdaptor.prototype.processQuery.apply(this,[e,t])},processResponse:function(e,t,i,s,n,a){var r=n&&n.ejPvtData;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];if(n&&this.options.batch&&n.url.endsWith(this.options.batch)&&"post"===n.type.toLowerCase()){var o,l,d=(d=s.getResponseHeader("Content-Type")).substring(d.indexOf("=batchresponse")+1);if((e=e.split(d)).length<2)return;e=e[1];var h=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(e);e.replace(h[0],"");for(var d=h[1],c=(e=e.split(d)).length;-1<c;c--)/\bContent-ID:/i.test(e[c])&&/\bHTTP.+201/.test(e[c])&&(o=parseInt(/\bContent-ID: (\d+)/i.exec(e[c])[1]),a.added[o]&&(l=x.parseJson(/^\{.+\}/m.exec(e[c])[0]),v.extend(a.added[o],this.processResponse(l))));return a}h=null,d={};if(i&&i._requiresCount&&"@odata.count"in e&&(h=e["@odata.count"]),e=b.isNullOrUndefined(e.value)?e:e.value,r&&r.aggregates&&r.aggregates.length){for(var u,p=r.aggregates,m={},c=0;c<p.length;c++)(u=b.aggregates[p[c].type])&&(m[p[c].field+" - "+p[c].type]=u(e,p[c].field));d=m}if(r&&r.groups&&r.groups.length)for(var g=r.groups,c=0;c<g.length;c++){var f=D(g[c],i.queries);e=b.group(e,g[c],r.aggregates,f)}return V(h)?e:{result:e,count:h,aggregates:d}}}),b.JsonAdaptor=(new b.Adaptor).extend({processQuery:function(e,t){for(var i,s,n=e.dataSource.json.slice(0),a=n.length,r=!0,o={},l=0;l<t.queries.length;l++)i=this[(s=t.queries[l]).fn].call(this,n,s.e,t),"onAggregates"==s.fn?o[s.e.field+" - "+s.e.type]=i:n=i!==g?i:n,"onPage"!==s.fn&&"onSkip"!==s.fn&&"onTake"!==s.fn&&"onRange"!==s.fn||(r=!1),r&&(a=n.length);return t._requiresCount&&(n={result:n,count:a,aggregates:o}),n},batchRequest:function(e,t,i){for(var s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e&&e.filter(function(e){return t.validate(e)})},onAggregates:function(e,t){var i=b.aggregates[t.type];return e&&i&&0!=e.length?i(e,t.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&b.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var t=0;t<i.fieldNames.length;t++)if(i.comparer.call(e,b.pvt.getObject(i.fieldNames[t],e),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},onSortBy:function(e,t,i){if(!e)return e;var s,n=S(t.fieldName,i);if(!n)return e.sort(t.comparer);if(n instanceof Array){for(var a=(n=n.slice(0)).length-1;0<=a;a--)n[a]&&(s=t.comparer,n[a].endsWith(" desc")&&(s=b.pvt.fnSort(b.sortOrder.Descending),n[a]=n[a].replace(" desc","")),e=O(e,n[a],s,[]));return e}return O(e,n,t.comparer,i?i.queries:[])},onGroup:function(e,t,i){if(!e)return e;var s=y(i.queries,"onAggregates"),n=[];if(s.length)for(var a,r=0;r<s.length;r++)a=s[r].e,n.push({type:a.type,field:S(a.field,i)});var o=D(t.fieldName,i.queries);return b.group(e,S(t.fieldName,i),n,o)},onPage:function(e,t,i){var s=S(t.pageSize,i),i=(S(t.pageIndex,i)-1)*s,s=i+s;return e&&e.slice(i,s)},onRange:function(e,t){return e&&e.slice(S(t.start),S(t.end))},onTake:function(e,t){return e&&e.slice(0,S(t.nos))},onSkip:function(e,t){return e&&e.slice(S(t.nos))},onSelect:function(e,t){return e&&b.select(e,S(t.fieldNames))},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,t,i,s){var n,a=e.dataSource.json;for("object"==typeof i&&(i=b.getObject(t,i)),n=0;n<a.length&&b.getObject(t,a[n])!==i;n++);return n!==a.length?a.splice(n,1):null},update:function(e,t,i,s){for(var n=e.dataSource.json,a=b.getObject(t,i),r=0;r<n.length&&b.getObject(t,n[r])!==a;r++);return r<n.length?v.extend(n[r],i):null}}),b.ForeignKeyAdaptor=function(i,s){var e=(new b[s||"JsonAdaptor"]).extend({init:function(){this.foreignData=[],this.key=[],this.adaptorType=s,this.value=[],this.fValue=[],this.keyField=[];for(var e=i,t=0;t<e.length;t++)this.foreignData[t]=e[t].dataSource,this.key[t]=e[t].foreignKeyField,this.fValue[t]=b.isNullOrUndefined(e[t].field)?e[t].foreignKeyValue:e[t].field+"_"+e[t].foreignKeyValue,this.value[t]=e[t].foreignKeyValue,this.keyField[t]=e[t].field||e[t].foreignKeyField,this.initial=!0},processQuery:function(e,t){var i=e.dataSource.json;if(this.initial){for(var s=0;s<i.length;s++)for(var n=this,a=0;a<this.foreignData.length;a++)this.foreignData[a].filter(function(e){b.getObject(n.key[a],e)==b.getObject(n.keyField[a],i[s])&&(i[s][n.fValue[a]]=b.getObject(n.value[a],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,t])},setValue:function(e){for(var t=0;t<this.foreignData.length;t++){var i=this,s=e[this.fValue[t]];"string"!=typeof s||isNaN(s)||(s=b.parseFloat(s));var n=v.grep(i.foreignData[t],function(e){return e[i.value[t]]==s})[0];b.isNullOrUndefined(n)&&(n=v.grep(i.foreignData[t],function(e){return e[i.key[t]]==s})[0],b.getObject(this.value[t],n)!=g&&b.createObject(i.value[t],b.getObject(this.value[t],n),e)),b.getObject(this.value[t],n)!=g&&b.createObject(this.keyField[t],b.getObject(this.key[t],n),e)}},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}},update:function(e,t,i,s){return this.setValue(i),b.JsonAdaptor.prototype.update(e,t,i,s),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}}});return v.extend(this,new e),this},b.remoteSaveAdaptor=(new b.JsonAdaptor).extend({beforeSend:b.UrlAdaptor.prototype.beforeSend,insert:b.UrlAdaptor.prototype.insert,update:b.UrlAdaptor.prototype.update,remove:b.UrlAdaptor.prototype.remove,addParams:b.UrlAdaptor.prototype.addParams,batchRequest:function(e,t,i,s){i={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i)}},processResponse:function(e,t,i,s,n,a,r){if(b.isNullOrUndefined(a))return e.d||e;var o;for(e.d&&(e=e.d),e.added&&(a.added=b.parseJSON(e.added)),e.changed&&(a.changed=b.parseJSON(e.changed)),e.deleted&&(a.deleted=b.parseJSON(e.deleted)),o=0;o<a.added.length;o++)b.JsonAdaptor.prototype.insert(t,a.added[o]);for(o=0;o<a.changed.length;o++)b.JsonAdaptor.prototype.update(t,r,a.changed[o]);for(o=0;o<a.deleted.length;o++)b.JsonAdaptor.prototype.remove(t,r,a.deleted[o]);return e}}),b.WebApiAdaptor=(new b.ODataAdaptor).extend({insert:function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},batchRequest:function(i,e,s){var n=s.guid=b.getGuid(l),a=[];return v.each(e.added,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("POST "+i.dataSource.insertUrl+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),v.each(e.changed,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("PUT "+i.dataSource.updateUrl+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),v.each(e.deleted,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("DELETE "+i.dataSource.removeUrl+"/"+t[s.key]+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),a.push("--"+n+"--",""),{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,data:a.join("\r\n"),contentType:'multipart/mixed; boundary="'+n+'"'}},processResponse:function(e,t,i,s,n,a){var r=n&&n.ejPvtData;if(n&&"post"!=n.type.toLowerCase()){var o=null,n={},s=(s=s&&s.getResponseHeader("DataServiceVersion"))&&parseInt(s,10)||2;if(i&&i._requiresCount&&(V(e.Count)||(o=e.Count)),s<3&&e.Items&&(e=e.Items),r&&r.aggregates&&r.aggregates.length){for(var l,d=r.aggregates,h={},c=0;c<d.length;c++)(l=b.aggregates[d[c].type])&&(h[d[c].field+" - "+d[c].type]=l(e,d[c].field));n=h}if(r&&r.groups&&r.groups.length)for(var u=r.groups,c=0;c<u.length;c++){var p=D(u[c],i.queries);e=b.group(e,u[c],r.aggregates,p)}return V(o)?e:{result:e,count:o,aggregates:n}}}});var S=function(e,t){return"function"==typeof e?e.call(t||{}):e};b.TableModel=function(e,t,i,s){if(!E(this,b.TableModel))return new b.TableModel(t);E(t,Array)||B("ej.TableModel - Json Array is required");for(var n,a=[],r=z(m,this),o=0;o<t.length;o++)(n=new b.Model(t[o],this)).state="unchanged",n.on("stateChange",r),s&&n.computes(s),a.push(n);return this.name=e||"table1",this.rows=b.NotifierArray(a),this._deleted=[],this._events=v({}),this.dataManager=i,this._isDirty=!1,this},b.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){var e;this.dataManager&&E(this.dataManager,b.DataManager)||B("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()&&((e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name)).done(z(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(z(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1)},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){e=new b.Model(e);e._isDirty=this._isDirty=!0,this.rows.push(e),this._events.triggerHandler({type:"insert",model:e,table:this})},update:function(e){this.key||B("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=e,s=this.key,n=i[s],a=this.rows.array.filter(function(e){return e.get(s)===n});for(t in a=a[0],i)a.set(t,i[t]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:a,table:this})},remove:function(e){this.key||B("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=this.key,s=-1;e&&"object"==typeof e&&(e=e[i]!==g?e[i]:e.get(i));for(var n=0;n<this.rows.length();n++)if(this.rows.array[n].get(i)===e){s=n;break}-1<s&&((t=this.rows.removeAt(s)).markDelete(),this._deleted.push({model:t,position:s}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:t,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},t=this.toArray(),i=0;i<t.length;i++)e[t[i].state]&&e[t[i].state].push(t[i].json);return e.deleted=b.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(e){var t,i=c,s=v(e.html()),n=this.toArray();v.inArray(e.prop("tagName").toLowerCase(),["table","tbody"])&&(i=u),i.insertBefore(e),e.detach().empty();for(var a=0;a<n.length;a++)t=s.clone(),n[a].bindTo(t),e.append(t);e.insertAfter(i),i.remove()}};var c=e?v(document.createElement("div")):{},u=e?v(document.createElement("tr")):{};b.Model=function(e,t,i){"string"==typeof t&&(i=t,t=null),this.$id=F("m"),this.json=e,this.table=t instanceof b.TableModel?t:null,this.name=i||this.table&&this.table.name,this.dataManager=t instanceof b.DataManager?t:t.dataManagar,this.actual={},this._events=v({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},b.Model.prototype={computes:function(e){v.extend(this.computed,e)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,s=this.json,n=e;e=e.split(".");for(var a=0;a<e.length-1;a++)s=s[(e=e[0])[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=s[e],this.actual[e]!==g||e in this.actual||(this.actual[e]=t),s[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:n,current:t,previous:i,model:this})},get:function(e){return b.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(e,t){return e=e||this.dataManagar,t=t||e.dataSource.key,e||B("ej.Model - DataManager is required to commit the changes"),"added"===this.state?e.insert(this.json,this.name).done(b.proxy(function(e){v.extend(this.json,e.record)},this)):"changed"===this.state?e.update(t,this.json,this.name):"deleted"===this.state?e.remove(t,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(e,t){if(this.state!==e){if("added"===this.state){if("deleted"!==e)return;e="unchanged"}var i=e;t=t||{},this.state=e,this._events.triggerHandler(v.extend({type:"stateChange",current:e,previous:i,model:this},t))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(e){var t,i,e=v(e),s=e.find("[ej-observe], [ej-computed], [ej-prop]"),n=s.length;e.data("ejModel",this);for(var a={fields:[],props:[],computes:[]},r=0;r<n;r++)(i=(t=s.eq(r)).attr("ej-prop"))&&this._processAttrib(i,t,a),(i=t.attr("ej-observe"))&&-1!==this._props.indexOf(i)?this._processField(t,i,a):(i=t.attr("ej-computed"))&&this._processComputed(i,t,a);e.data("ejModelBinding"+this.$id,a)},unbind:function(e){var t,i,s={props:this._attrEls,computes:this._computeEls},n=!1;for(i in e&&(s=v(e).removeData("ejModel").data("ejModelBinding"+this.$id)||s,n=!0),this.computed)t=s.computes[i],i=this.computed[i],t&&i.deps&&(this.off(i.deps.join(" "),t.handle),n&&delete this._computeEls[i]);for(i in n||(this._computeEls={}),s.props)(t=s.props[i])&&(this.off(t.deps.join(" "),t.handle),delete s.props[i],n&&delete this._attrEls[i]);if(n||(this._attrEls={}),s.fields&&s.fields.length)for(var a,r,o=s.fields.length,l=0;l<o;l++)a=s.fields[l],v(a).off("change",null,this._changeHandler),r=-1!==this.formElements.indexOf(a.tagName.toLowerCase())?"input":"read",-1!==(a=this._updates[r].indexOf(a))&&this._updates[r].splice(a,1)},_processComputed:function(e,t,i){var s,n,a;e&&(n=p(e),a=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html",this.computed[e]&&this.computed[n]||(this.computed[n]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=n),(s=this.computed[e]).get||(s.get=function(){s.value.call(this.json)}),n=s.deps,s=s.value,this._updateDeps(n),this._updateElement(t,a,s),s={el:t,handle:z(this._computeHandle,this,{value:e,type:a})},this._computeEls[e]=s,i.computes[e]=s,this.on(n.join(" "),s.handle))},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(e,t,i){e[t](i.call(v.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var t=0;t<e.length;t++)!(e[t]in this.json)&&e[t]in this.computed&&b.merge(e,this.computed[e[t]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],n=0;n<i.length;n++)i[n].startsWith("#ej.#")&&(t=i[n].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t);return s},_processAttrib:function(e,t,i){var s,n,a={};e=e.replace(/^ +| +$/g,"").split(";");for(var r=0;r<e.length;r++)e[r]=e[r].split(":"),e[r].length<2||(a[s=e[r][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,"")]=e[r][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));var o=[];for(s in e=a)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),a=F("emak"),n={el:t,handle:z(this._attrHandle,this,a),value:e,deps:o},t.prop("ejmodelattrkey",a),i.props[a]=n,this._attrEls[a]=n,this.on(o.join(" "),n.handle)},_attrHandle:function(e){e=this._attrEls[e];e&&this._updateProps(e.el,e.value)},_updateProps:function(e,t){var i,s,n=this.json,a=this.computed;for(s in t)(i=t[s])in n?i=n[i]:i in a&&(i=(i=a[i])&&i.value.call(v.extend({},this.json,a))),V(i)||e.prop(s,i)},_updateValues:function(e,t){e=this._updates[e];e&&(e.read||e.input)&&(this._ensureItems(e.read,"html",t),this._ensureItems(e.input,"val",t))},_ensureItems:function(e,t,i){if(e)for(var s=e.length-1;-1<s;s--)e[s].offsetParent?v(e[s])[t](i):e.splice(s,1)},_changeHandler:function(e){e.data.self.set(e.data.prop,v(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},n=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(n),this._updates[t].read.push(e[0])):(e.val(n).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var t=/[^\w]+/g,p=function(e){return e.replace(t,"_")},m=function(e){this.setDirty(!0,e.model)};b.Predicate=function(e,t,i,s,n){return this instanceof b.Predicate?(this.ignoreAccent=!1,"string"==typeof e?(a="",-1!=t.toLowerCase().indexOf(" any")?(t=t.replace(" any",""),a="any"):-1!=t.toLowerCase().indexOf(" all")&&(t=t.replace(" all",""),a="all"),this.field=e,this.operator=t,this.value=i,this.ignoreCase=s,this.ignoreAccent=n,this.isComplex=!1,this.anyCondition=a,this._comparer=b.data.fnOperators.processOperator(""!=a?a:this.operator)):(e instanceof b.Predicate&&i instanceof b.Predicate||i instanceof Array)&&(this.isComplex=!0,this.condition=t.toLowerCase(),this.predicates=[e],i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this):new b.Predicate(e,t,i,s,n);var a},b.Predicate.and=function(){return R._combinePredicates([].slice.call(arguments,0),"and")},b.Predicate.or=function(){return R._combinePredicates([].slice.call(arguments,0),"or")},b.Predicate.fromJSON=function(e){if(E(e,Array)){for(var t=[],i=0,s=e.length;i<s;i++)t.push(R._fromJSON(e[i]));return t}return R._fromJSON(e)};var n,f,_,T,R={_combinePredicates:function(e,t){if(!e.length)return g;if(1===e.length){if(!E(e[0],Array))return e[0];e=e[0]}return new b.Predicate(e[0],t,e.slice(1))},_combine:function(e,t,i,s,n,a,r){return t instanceof b.Predicate?b.Predicate[n](e,t):"string"==typeof t?b.Predicate[n](e,new b.Predicate(t,i,s,a,r)):B("Predicate - "+n+" : invalid arguments")},_fromJSON:function(e){if(!e||E(e,b.Predicate))return e;for(var t=e.predicates||[],i=t.length,s=[],n=0;n<i;n++)s.push(R._fromJSON(t[n]));return e.isComplex?new b.Predicate(s[0],e.condition,s.slice(1)):new b.Predicate(e.field,e.operator,b.parseJSON({val:e.value}).val,e.ignoreCase,e.ignoreAccent)}};b.Predicate.prototype={and:function(e,t,i,s,n){return R._combine(this,e,t,i,"and",s,n)},or:function(e,t,i,s,n){return R._combine(this,e,t,i,"or",s,n)},validate:function(e){var t,i,s=this.predicates;if(!this.isComplex)return this._comparer.call(this,b.pvt.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var n=0;n<s.length;n++)if(i=s[n].validate(e),t){if(!i)return!1}else if(i)return!0;return t},toJSON:function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJSON())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,anyCondition:this.anyCondition}}},b.dataUtil={swap:function(e,t,i){var s;t!=i&&(s=e[t],e[t]=e[i],e[i]=s)},mergeSort:function(e,t,i){return i&&"string"!=typeof i||(i=b.pvt.fnSort(i,!0)),"function"==typeof t&&(i=t,t=null),b.pvt.mergeSort(e,t,i)},max:function(e,t,i){return"function"==typeof t&&(i=t,t=null),b.pvt.getItemFromComparer(e,t,i||b.pvt.fnDescending)},min:function(e,t,i){return"function"==typeof t&&(i=t,t=null),b.pvt.getItemFromComparer(e,t,i||b.pvt.fnAscending)},distinct:function(e,t,i){for(var s,n=[],a={},r=0;r<e.length;r++)(s=L(e,t,r))in a||(n.push(i?e[r]:s),a[s]=1);return n},sum:function(e,t){for(var i,s=0,n="number"!=typeof L(e,t,0),a=0;a<e.length;a++)i=L(e,t,a),isNaN(i)||null===i||(n&&(i=+i),s+=i);return s},avg:function(e,t){return b.sum(e,t)/e.length},select:function(e,t){for(var i=[],s=0;s<e.length;s++)i.push(b.pvt.extractFields(e[s],t));return i},group:function(t,e,i,s,n,a){if(n=n||1,t.GROUPGUID==b.pvt.consts.GROUPGUID){for(var r,o=0;o<t.length;o++)b.isNullOrUndefined(a)?(t[o].items=b.group(t[o].items,e,i,s,t.level+1),t[o].count=t[o].items.length):(r=-1,m=v.grep(a,function(e){return e.key==t[o].key}),r=a.indexOf(m[0]),t[o].items=b.group(t[o].items,e,i,s,t.level+1,a[r].items),t[o].count=a[r].count);return t.childLevels+=1,t}var l={},d=[];d.GROUPGUID=b.pvt.consts.GROUPGUID,d.level=n,d.childLevels=0,d.records=t;for(var h=0;h<t.length;h++){var c,u=L(t,e,h);b.isNullOrUndefined(s)||(u=s(u,e)),l[u]||(l[u]={key:u,count:0,items:[],aggregates:{},field:e},d.push(l[u]),b.isNullOrUndefined(a)||(c=v.grep(a,function(e){return e.key==l[u].key}),l[u].count=c[0].count)),l[u].count=b.isNullOrUndefined(a)?l[u].count+=1:l[u].count,l[u].items.push(t[h])}if(i&&i.length)for(h=0;h<d.length;h++){for(var p={},o=0;o<i.length;o++){var m,g=b.aggregates[i[o].type];b.isNullOrUndefined(a)?g&&(p[i[o].field+" - "+i[o].type]=g(d[h].items,i[o].field)):(m=v.grep(a,function(e){return e.key==d[h].key}),g&&(p[i[o].field+" - "+i[o].type]=g(m[0].items,i[o].field)))}d[h].aggregates=p}return d},parseTable:function(e,t,i){var s,n=e.rows,a=[],r=[];if(!n.length)return[];switch(i=i||0,(t||"").toLowerCase()){case b.headerOption.tHead:s=e.tHead.rows[i];break;case b.headerOption.row:default:s=e.rows[i]}for(var o=s.cells,l=0;l<o.length;l++)a.push(v.trim(o[l].innerHTML));for(l=i+1;l<n.length;l++){for(var d={},h=n[l].cells,c=0;c<h.length;c++){var u=h[c].innerHTML;"string"==typeof u&&v.isNumeric(u)?d[a[c]]=Number(u):d[a[c]]=u}r.push(d)}return r}},b.headerOption={tHead:"thead",row:"row"},b.aggregates={sum:function(e,t){return b.sum(e,t)},average:function(e,t){return b.avg(e,t)},minimum:function(e,t){return b.getObject(t,b.min(e,t))},maximum:function(e,t){return b.getObject(t,b.max(e,t))},truecount:function(e,t){t=b.Predicate(t,"equal",!0);return b.DataManager(e).executeLocal(b.Query().where(t)).length},falsecount:function(e,t){t=b.Predicate(t,"equal",!1);return b.DataManager(e).executeLocal(b.Query().where(t)).length},count:function(e,t){return e.length}},b.pvt={filterQueries:y,mergeSort:function(e,t,i){if(e.length<=1)return e;var s=parseInt(e.length/2,10),n=e.slice(0,s),s=e.slice(s),n=b.pvt.mergeSort(n,t,i),s=b.pvt.mergeSort(s,t,i);return b.pvt.merge(n,s,t,i)},getItemFromComparer:function(e,t,i){var s,n,a,r=0,o="string"==typeof L(e,t,0);if(e.length)for(;b.isNullOrUndefined(s)&&r<e.length;)s=L(e,t,r),a=e[r++];for(;r<e.length;r++)n=L(e,t,r),b.isNullOrUndefined(n)||(o&&(s=+s,n=+n),0<i(s,n)&&(s=n,a=e[r]));return a},quickSelect:function(e,t,i,s,n,a){if(i==s)return e[i];var r=b.pvt.partition(e,t,i,s,a),o=r-i+1;return o==n?e[r]:n<o?b.pvt.quickSelect(e,t,i,r-1,n,a):b.pvt.quickSelect(e,t,r+1,s,n-o,a)},extractFields:function(e,t){var i={};if(1==t.length)return b.pvt.getObject(t[0],e);for(var s=0;s<t.length;s++)i[t[s].replace(".",b.pvt.consts.complexPropertyMerge)]=b.pvt.getObject(t[s],e);return i},partition:function(e,t,i,s,n){var a=parseInt((i+s)/2,10),r=L(e,t,a);b.swap(e,a,s);for(var o=a=i;o<s;o++)n(L(e,t,o),r)&&(b.swap(e,o,a),a++);return b.swap(e,a,s),a},fnSort:function(e){return(e=e?e.toLowerCase():b.sortOrder.Ascending)==b.sortOrder.Ascending?b.pvt.fnAscending:b.pvt.fnDescending},fnGetComparer:function(i,s){return function(e,t){return s(b.pvt.getObject(i,e),b.pvt.getObject(i,t))}},fnAscending:function(e,t){return b.isNullOrUndefined(t)&&b.isNullOrUndefined(e)||null===t||t===g?-1:"string"==typeof e?e.localeCompare(t):null===e||e===g?1:e-t},fnDescending:function(e,t){return b.isNullOrUndefined(t)&&b.isNullOrUndefined(e)?-1:null===t||t===g?1:"string"==typeof e?-1*e.localeCompare(t):null===e||e===g?-1:t-e},merge:function(e,t,i,s){for(var n,a=[];0<e.length||0<t.length;)n=0<e.length&&0<t.length?s?s(L(e,i,0),L(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:0<e.length?e:t,a.push(n.shift());return a},getObject:function(e,t){if(!t)return g;if(!e)return t;if(-1===e.indexOf("."))return t[e];for(var i=t,s=e.split("."),n=0;n<s.length&&null!=i;n++)i=i[s[n]];return i},createObject:function(e,t,i){for(var s=e.split("."),i=i||window,n=i,a=0;a<s.length;a++)a+1==s.length?n[s[a]]=t===g?{}:t:null==n[s[a]]&&(n[s[a]]={}),n=n[s[a]];return i},ignoreDiacritics:function(e){return"string"!=typeof e?e:e.split("").map(function(e){return e in b.data.diacritics?b.data.diacritics[e]:e}).join("")},getFieldList:function(e,t,i){if(i===g&&(i=""),t===g||null===t)return b.pvt.getFieldList(e,[],i);for(var s in e)"object"!=typeof e[s]||e[s]instanceof Array?t.push(i+s):b.pvt.getFieldList(e[s],t,i+s+".");return t}},b.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},b.data={},b.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},b.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne ",in:" eq ",notin:" ne "},b.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",notcontains:"substringof"},b.data.diacritics={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"},b.data.fnOperators={equal:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?j(e)==j(t):e==t},notequal:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),!b.data.fnOperators.equal(e,t,i)},notin:function(e,t,i){for(var s=0;s<t.length;s++)if(0==b.data.fnOperators.notequal(e,t[s],i))return!1;return!0},lessthan:function(e,t,i){return i?j(e)<j(t):e<t},greaterthan:function(e,t,i){return i?j(e)>j(t):t<e},lessthanorequal:function(e,t,i){return i?j(e)<=j(t):e<=t},greaterthanorequal:function(e,t,i){return i?j(e)>=j(t):t<=e},contains:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?!V(e)&&!V(t)&&-1!=j(e).indexOf(j(t)):!V(e)&&!V(t)&&-1!=e.toString().indexOf(t)},notcontains:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),!b.data.fnOperators.contains(e,t,i)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?e&&t&&j(e).startsWith(j(t)):e&&t&&e.startsWith(t)},endswith:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?e&&t&&j(e).endsWith(j(t)):e&&t&&e.endsWith(t)},all:function(e,t,i){for(var s=0;s<t.length;s++)if(0==b.data.fnOperators[this.operator](e,t[s],i))return!1;return!0},any:function(e,t,i){for(var s=0;s<t.length;s++)if(1==b.data.fnOperators[this.operator](e,t[s],i))return!0;return!1},processSymbols:function(e){e=b.data.operatorSymbols[e];if(e){e=b.data.fnOperators[e];if(e)return e}return B("Query - Process Operator : Invalid operator")},processOperator:function(e){var t=b.data.fnOperators[e];return t||b.data.fnOperators.processSymbols(e)}},b.data.fnOperators.in=function(e,t,i){for(var s=0;s<t.length;s++)if(1==b.data.fnOperators.equal(e,t[s],i))return!0;return!1},b.NotifierArray=function(e){return E(this,b.NotifierArray)?(this.array=e,this._events=v({}),this._isDirty=!1,this):new b.NotifierArray(e)},b.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t=E(e,Array)?[].push.apply(this.array,e):this.array.push(e);return this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return-1<t&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(e,t){this._events.triggerHandler(v.extend({type:e},t)),this._events.triggerHandler({type:"all",name:e,args:t})},toArray:function(){return this.array}},v.extend(b,b.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},Array.prototype.filter=Array.prototype.filter||function(e){if("function"!=typeof e)throw new TypeError;for(var t=[],i=arguments[1]||this,s=0;s<this.length;s++){var n=this[s];e.call(i,n,s,this)&&t.push(n)}return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},b.support||(b.support={}),b.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),b.support.cors=v.support.cors,!v.support.cors&&window.XDomainRequest&&(n=/^https?:\/\//i,f=/^get|post$/i,_=new RegExp("^"+location.protocol,"i"),T=/\/xml/i,v.ajaxTransport("text html xml json",function(t,i,e){if(t.crossDomain&&t.async&&f.test(t.type)&&n.test(i.url)&&_.test(i.url)){var a=null,r=(i.dataType||"").toLowerCase();return{send:function(e,n){a=new XDomainRequest,/^\d+$/.test(i.timeout)&&(a.timeout=i.timeout),a.ontimeout=function(){n(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,t={code:200,message:"success"},i={text:a.responseText};try{if("json"===r)try{i.json=JSON.parse(a.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===r||"text"!==r&&T.test(a.contentType)){var s=new ActiveXObject("Microsoft.XMLDOM");s.async=!1;try{s.loadXML(a.responseText)}catch(e){s=g}if(!s||!s.documentElement||s.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+a.responseText;i.xml=s}}catch(e){throw e}finally{n(t.code,t.message,i,e)}},a.onerror=function(){n(500,"error",{text:a.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(a.onprogress=function(){}),a.open(t.type,t.url),a.send(i.data)},abort:function(){a&&a.abort()}}}})),v.support.cors=!0,b.sortOrder={Ascending:"ascending",Descending:"descending"},b.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};var k=function(e,t){t&&(e=z(e,t)),(window.setImmediate||window.setTimeout)(e,0)};b.support.enableLocalizedSort=!1;var O=function(e,t,i,s){return b.support.stableSort?b.support.enableLocalizedSort||"string"!=typeof b.pvt.getObject(t,e[0]||{})||i!==b.pvt.fnAscending&&i!==b.pvt.fnDescending||1!==s.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(b.pvt.fnGetComparer(t,i)):I(e,t,i===b.pvt.fnDescending):b.mergeSort(e,t,i)},D=function(e,t){for(var i=v.grep(t,function(e){return"onGroup"==e.fn}),s=0;s<i.length;s++)if(b.getObject("fieldName",i[s].e)==e)return b.getObject("fn",i[s].e)},I=function(e,t,i){var s=Object.prototype.toString;Object.prototype.toString=-1===t.indexOf(".")?function(){return this[t]}:function(){return b.pvt.getObject(t,this)},e=e.sort(),Object.prototype.toString=s,i&&e.reverse()},j=function(e){return e?(e.toLowerCase?e:e.toString()).toLowerCase():0===e||!1===e?e.toString():""},L=function(e,t,i){return t?b.pvt.getObject(t,e[i]):e[i]},A=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},E=function(e,t){return e instanceof t},P=function(t,i,s,n){return function(e){return"object"==typeof e&&(n=e,e=null),new b.TableModel(e||t,i,s,n)}},M=function(o){return function(e,t){(t=t||window.ko)||B("Knockout is undefined");for(var i,s,n,a=[],r=0;r<o.length;r++){for(s in i={},o[r])s.startsWith("_")||(i[s]=t.observable(o[r][s]));for(s in e)n=e[s],n=v.isPlainObject(n)?(n.owner||(n.owner=i),t.computed(n)):t.computed(n,i),i[s]=n;a.push(i)}return t.observableArray(a)}},i=0,F=function(e){return e+(i+=1)};b.getGuid=function(e){var s;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,t){var i;return s="crypto"in window&&"getRandomValues"in crypto?(i=new Uint8Array(1),window.crypto.getRandomValues(i),i[0]%16|0):16*Math.random()|0,"0123456789abcdef"[19===t?3&s|8:s]})};var N=function(t,i){return function(){var e=[].slice.call(arguments,0);return e.push(this),t.apply(i||this,e)}},z=function(t,i,s){return"bind"in t?s?t.bind(i,s):t.bind(i):function(){var e=s?[s]:[];return e.push.apply(e,arguments),t.apply(i||this,e)}};b.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)};var V=function(e){return e===g||null===e},B=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document);var __extends=this&&this.__extends||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);function s(){this.constructor=e}e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},ejSparkline;!function(y){(e=y.Type||(y.Type={}))[e.Line="line"]="Line",e[e.Column="column"]="Column",e[e.Area="area"]="Area",e[e.WinLoss="winloss"]="WinLoss",e[e.Pie="pie"]="Pie";var k=y.Type;(e=y.Themes||(y.Themes={}))[e.flatlight="flatlight"]="flatlight",e[e.azurelight="azurelight"]="azurelight",e[e.limelight="limelight"]="limelight",e[e.saffronlight="saffronlight"]="saffronlight",e[e.gradientlight="gradientlight"]="gradientlight",e[e.flatdark="flatdark"]="flatdark",e[e.azuredark="azuredark"]="azuredark",e[e.limedark="limedark"]="limedark",e[e.saffrondark="saffrondark"]="saffrondark",e[e.gradientdark="gradientdark"]="gradientdark";var i,e,s=y.Themes;function t(e,t){i.call(this),this.defaults={locale:null,enableGroupSeparator:!1,enableCanvasRendering:!1,padding:8,palette:["#8A2BE2","#ff1a75","#99cc00","#4d4dff","#660066","#FFA500","#FFD700","#FF00FF","#808000","#990000"],isResponsive:!0,dataSource:null,xName:"",yName:"",type:k.Line,width:1,stroke:null,opacity:1,fill:"#33ccff",border:{color:"transparent",width:1},rangeBandSettings:{startRange:null,endRange:null,opacity:.4,color:"transparent"},highPointColor:null,lowPointColor:null,negativePointColor:null,startPointColor:null,endPointColor:null,tooltip:{visible:!1,template:null,fill:"white",border:{width:1,color:null},font:{fontFamily:"Segoe UI",fontStyle:"Normal",fontWeight:"Regular",color:"#111111",opacity:1,size:"8px"}},markerSettings:{visible:!1,fill:null,width:2,opacity:1,border:{color:"white",width:1}},background:"transparent",size:{height:"",width:""},axisLineSettings:{visible:!1,color:"#111111",width:1,dashArray:""},theme:s.flatlight,load:null,loaded:null,doubleClick:null,rightClick:null,click:null,sparklineMouseMove:null,sparklineMouseLeave:null,seriesRendering:null,pointRegionMouseMove:null,pointRegionMouseClick:null,tooltipInitialize:null},this.dataTypes={dataSource:"data",palette:"array",type:"enum",theme:"enum"},this.model=null,this.svgLink="http://www.w3.org/2000/svg",this._id=null,this.negativePointIndexes=[],this.validTags=["div"],this._id=e,t&&(this.model=y.compareExtend({},t,this.defaults))}jQuery,i=ej.WidgetBase,__extends(t,i),t.prototype.isTouch=function(e){e=e.originalEvent||e;return"touch"==e.pointerType||2==e.pointerType||-1<e.type.indexOf("touch")},t.prototype.browserInfo=function(){var e,t={},i=[],s={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie) ([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(e in s)if(s.hasOwnProperty(e)&&(i=navigator.userAgent.match(s[e]))){t.name=i[1].toLowerCase(),t.version=i[2],navigator.userAgent.match(/Trident\/7\./)&&(t.name="msie");break}return t.isMSPointerEnabled="msie"==t.name&&9<t.version&&window.navigator.msPointerEnabled,t.pointerEnabled=window.navigator.pointerEnabled,t},t.prototype.fadeOut=function(e){var t=1,i=setInterval(function(){t<=.1&&(clearInterval(i),e.parentNode&&e.parentNode.removeChild(e)),e.style.opacity=t,e.style.filter="alpha(opacity="+100*t+")",t-=.1*t},50)},t.prototype._setModel=function(e){for(var t in e)y.deepExtend(!0,this.model,{},e[t]);this.redraw()},t.prototype.unBindEvents=function(){var e=document.getElementById(this.rootId),t="",i=this.browserInfo(),s=i.isMSPointerEnabled,i=i.pointerEnabled;t=(t=(s?i?"pointerup":"MSPointerUp":"touchend mouseup")+" "+(s?i?"pointermove":"MSPointerMove":"touchmove mousemove")).split(" ");for(var n=0;n<t.length;n++)e.removeEventListener(t[n],this.sparkMouseMove);e.removeEventListener("mouseout",this.sparkMouseLeave)},t.prototype.bindClickEvents=function(e){this.sparkClick=this.sparkClick.bind(this),ej.isTouchDevice()?(this.sparkTouchStart=this.sparkTouchStart.bind(this),e.addEventListener("touchend",this.sparkClick),e.addEventListener("touchstart",this.sparkTouchStart)):(this.sparkDoubleClick=this.sparkDoubleClick.bind(this),this.sparkRightClick=this.sparkRightClick.bind(this),e.addEventListener("click",this.sparkClick),e.addEventListener("dblclick",this.sparkDoubleClick),e.addEventListener("contextmenu",this.sparkRightClick))},t.prototype.unBindClickEvents=function(e){ej.isTouchDevice()?(e.removeEventListener("touchend",this.sparkClick),e.removeEventListener("touchstart",this.sparkTouchStart)):(e.removeEventListener("click",this.sparkClick),e.removeEventListener("dblclick",this.sparkDoubleClick),e.removeEventListener("contextmenu",this.sparkRightClick))},t.prototype.bindEvents=function(e){this.sparkMouseMove=this.sparkMouseMove.bind(this),this.sparkMouseLeave=this.sparkMouseLeave.bind(this);var t="",i=this.browserInfo(),s=i.isMSPointerEnabled,i=i.pointerEnabled;t=(t=(s?i?"pointerup":"MSPointerUp":"touchend mouseup")+" "+(s?i?"pointermove":"MSPointerMove":"touchmove mousemove")).split(" ");for(var n=0;n<t.length;n++)e.addEventListener(t[n],this.sparkMouseMove);e.addEventListener("mouseout",this.sparkMouseLeave)},t.prototype.sparkTouchStart=function(e){this._longPressTimer=new Date},t.prototype.sparkClick=function(e){var t=new Date;null!=this.model.click&&this._trigger("click",{data:{event:e}}),ej.isTouchDevice()&&"click"!=e.type&&(null!=this._doubleTapTimer&&t-this._doubleTapTimer<300&&this.sparkDoubleClick(e),this._doubleTapTimer=t,null!=this._longPressTimer&&1e3<t-this._longPressTimer&&this.sparkRightClick(e))},t.prototype.sparkDoubleClick=function(e){null!=this.model.doubleClick&&this._trigger("doubleClick",{data:{event:e}})},t.prototype.sparkRightClick=function(e){null!=this.model.rightClick&&this._trigger("rightClick",{data:{event:e}})},t.prototype.sparkMouseMove=function(e){var t=this.isTouch(e);if(!(t&&-1<e.type.toString().toLowerCase().indexOf("move"))){for(var i,s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D=this.model,I=this,j=D.locale,L=j&&D.enableGroupSeparator,A=this.visiblePoints,E=this.container.id+"_markerExplode",P=D.enableCanvasRendering?0:3,M="",F=parseInt(D.size.height),N=parseInt(D.size.width),z=D.tooltip.font,V=this.container.id+"_tooltip",B=document.getElementById(V),H=D.tooltip.border.color,Y=document.getElementById(this.container.id),U=(Y.clientHeight,Y.parentNode),W=Y.getClientRects()[0],X=W.top,G=W.left,$=e.clientX||(e.changedTouches?e.changedTouches[0].clientX:e.touches?e.touches[0].clientX:0),q=e.clientY||(e.changedTouches?e.changedTouches[0].clientY:e.touches?e.touches[0].clientY:0),Q=A.map(function(e){return e.location.X+W.left}),K=(A.map(function(e){return e.location.markerPos+W.top}),1/0),Z=this.measureText,J=this.model.markerSettings,e=document.getElementById(this.container.id+"_canvasTracker"),ee=0,te=Q.length;ee<te;ee++)(m=Math.abs($-Q[ee]))<K&&(K=m,c=Q[ee],this.pointIndex=ee);G<$&&$<G+W.width&&X<q&&q<X+W.height&&(K=A[this.pointIndex].location,A=function(e){h=e.length/2;e=Z(e,z);o=e.height+4,l=e.width+h,f=K.X,(g=K.markerPos)-o/2<0?g+=o/2:F<g+o/2&&(g-=o/2),M=f+l+l/10>N-D.padding?"M "+(f=K.X-Number(D.markerSettings.width)-Number(D.markerSettings.border.width)-4)+" "+K.markerPos+" L "+(f-l/10)+" "+(g-4)+" L "+(f-l/10)+" "+(g-o/2)+" L "+(f-l-l/10)+" "+(g-o/2)+" L "+(f-l-l/10)+" "+(g+o/2)+" L "+(f-l/10)+" "+(g+o/2)+" L "+(f-l/10)+" "+(g+4)+" Z":"M "+(f=K.X+Number(D.markerSettings.width)+Number(D.markerSettings.border.width)+4)+" "+K.markerPos+" L "+(f+l/10)+" "+(g-4)+" L "+(f+l/10)+" "+(g-o/2)+" L "+(f+l+l/10)+" "+(g-o/2)+" L "+(f+l+l/10)+" "+(g+o/2)+" L "+(f+l/10)+" "+(g+o/2)+" L "+(f+l/10)+" "+(g+4)+" Z"},null!=D.tooltip.template&&""!=D.tooltip.template||A(s=" X : "+(L&&K.Xval?K.Xval.toLocaleString(j):K.Xval)+" Y : "+(L&&K.Yval?K.Yval.toLocaleString(j):K.Yval)+" "),L=this.pointIndex,null==this.prevMousePos&&(this.prevMousePos=c),j=function(e){var t=I.highPointIndex,i=I.lowPointIndex,s=I.negativePointIndexes,n=I.startPointIndex,a=I.endPointIndex,e=e==t?D.highPointColor:e==i?D.lowPointColor:e==n&&null!=D.startPointColor?D.startPointColor:e==a&&null!=D.endPointColor?D.endPointColor:0<=s.indexOf(e)&&null!=D.negativePointColor?D.negativePointColor:J.fill||D.fill;return e},B||e?this.prevMousePos!=c&&(_={data:{pointIndex:L,currentText:s,location:K}},null!=this.model.tooltipInitialize&&this._trigger("tooltipInitialize",_),K.X,D.width,s!=_.data.currentText&&A(s=_.data.currentText),this.prevMousePos=c,d=j(L),n={id:E,cx:K.X,cy:K.markerPos,r:Number(J.width),fill:J.border.color,stroke:d,"stroke-width":Number(J.border.width)},null==D.tooltip.template||""==D.tooltip.template?(a={id:V,fill:D.tooltip.fill,stroke:null!=H?H:d,"stroke-width":D.tooltip.border.width,d:M},r={x:K.X+l+l/10>N-D.padding?f+P-l-l/10:f+P+l/10,y:g+o/4,fill:z.color,"font-size":z.size,"font-family":z.fontFamily,"font-weight":z.fontWeight,"font-style":z.fontStyle}):(y=(v=document.getElementById(D.tooltip.template)).innerHTML,"object"==typeof D.dataSource[L]?((b=D.dataSource[L]).x=K.Xval,b.y=K.Yval):b={x:K.Xval,y:K.Yval},x={point:b},y=this.parseTemplate(v,x),C=v.innerText,w=Number(D.markerSettings.width),C=this.parseTemplate(v,x),S=Z(C,z),T=K.X+Number(J.width)+Number(J.border.width)+w,g=X+K.markerPos-S.height/2,f=G+T,K.markerPos-S.height/2<D.padding?g+=S.height/2:K.markerPos+S.height/2>F-D.padding&&(g-=S.height/2),T+S.width>N-D.padding&&(f=f-S.width-2*(Number(J.width)+Number(J.border.width)+w)),a={background:D.tooltip.fill,border:D.tooltip.border.width+"px solid "+(null!=H?H:d),left:f+"px",top:g+"px"},(p=document.getElementById(V)).innerHTML=y,this.setStyles(a,p)),D.enableCanvasRendering?((u=(R=document.getElementById(this.container.id+"_canvasTracker")).getContext("2d")).clearRect(0,0,N,F),this.canvasDrawCircle(n,u),null!=D.tooltip.template&&""!=D.tooltip.template||(this.canvasDrawPath(a,u),r.font=z.size+" "+z.fontFamily,this.canvasDrawText(r,s,u))):(e=document.getElementById(V+"_g"),this.drawCircle(n,e),null==D.tooltip.template&&(this.drawPath(a,e),(i=Y.getElementsByTagName("text")[0]).textContent=s,this.setAttributes(r,i),e.appendChild(i)))):(_={data:{pointIndex:L,currentText:s,location:K}},null!=this.model.tooltipInitialize&&this._trigger("tooltipInitialize",_),K.X,D.width,s!=_.data.currentText&&A(s=_.data.currentText),(_=document.getElementsByClassName("ej-sparkline-tooltip"))[0]&&_[0].parentNode.removeChild(_[0]),d=j(L),n={id:E,cx:K.X,cy:K.markerPos,r:Number(J.width),fill:J.border.color,stroke:d,"stroke-width":Number(J.border.width)},null==D.tooltip.template||""==D.tooltip.template?(a={id:V,fill:D.tooltip.fill,stroke:null!=H?H:d,"stroke-width":D.tooltip.border.width,d:M},r={x:K.X+l+l/10>N-D.padding?f+P-l-l/10:f+P+l/10,y:g+o/4,fill:z.color,opacity:z.opacity,"font-size":z.size,"font-family":z.fontFamily,"font-weight":z.fontWeight,"font-style":z.fontStyle}):(y=(v=document.getElementById(D.tooltip.template)).innerHTML,"object"==typeof D.dataSource[L]?((b=D.dataSource[L]).x=K.Xval,b.y=K.Yval):b={x:K.Xval,y:K.Yval},x={point:b},y=this.parseTemplate(v,x),C=v.innerText,w=Number(D.markerSettings.width),C=this.parseTemplate(v,x),S=Z(C,z),T=K.X+Number(J.width)+Number(J.border.width)+w,g=X+K.markerPos-S.height/2,f=G+T,K.markerPos-S.height/2<D.padding?g+=S.height/2:K.markerPos+S.height/2>F-D.padding&&(g-=S.height/2),T+S.width>N-D.padding&&(f=f-S.width-2*(Number(J.width)+Number(J.border.width)+w)),a={background:D.tooltip.fill,border:D.tooltip.border.width+"px solid "+(null!=H?H:d),left:f+"px",top:g+"px",position:"fixed",height:"auto",width:"auto",display:"block",opacity:z.opacity,font:z.size+" "+z.fontFamily},p=document.createElement("div"),this.setAttributes({id:V,class:"ej-sparkline-tooltip"},p),this.setStyles(a,p),p.innerHTML=y,U.appendChild(p)),D.enableCanvasRendering?(R=document.createElement("canvas"),p={id:this.container.id+"_canvasTracker",fill:"transparent",class:"ej-sparkline-tooltip",height:D.size.height,width:D.size.width},this.setAttributes(p,R),this.setStyles({left:G+"px",top:X+"px",position:"fixed"},R),u=R.getContext("2d"),this.canvasDrawCircle(n,u),null!=D.tooltip.template&&""!=D.tooltip.template||(this.canvasDrawPath(a,u),r.font=z.size+" "+z.fontFamily,this.canvasDrawText(r,s,u)),this.container.parentNode.appendChild(R)):(R=document.createElementNS(this.svgLink,"g"),this.setAttributes({id:V+"_g",class:"ej-sparkline-tooltip"},R),this.container.appendChild(R),this.drawCircle(n,R),null==D.tooltip.template&&(this.drawPath(a,R),i=this.createText(r,s),R.appendChild(i))))),t&&(V=null==D.tooltip.template||""==D.tooltip.template?D.enableCanvasRendering?this.container.id+"_canvasTracker":V+"_g":V,k=document.getElementById(V),O=this,setTimeout(function(){O.fadeOut(k)},1e3))}},t.prototype.sparkMouseLeave=function(e){var t,i=e.clientX||(e.touches[0]?e.touches:e.changedTouches)[0].clientX,s=e.clientY||(e.touches[0]?e.touches:e.changedTouches)[0].clientY,n=this.container,a=(n.clientHeight,n.getClientRects()[0]),r=a.top,o=a.left,e=this.model,n=this.container.id+"_tooltip";(i<o||i>o+a.width||s<r||s>r+a.height||this.touchEnd)&&(null==e.tooltip.template||""==e.tooltip.template||(t=document.getElementById(n))&&t.parentNode.removeChild(t),this.model.enableCanvasRendering?(t=document.getElementById(this.container.id+"_canvasTracker"))&&t.parentNode.removeChild(t):(n=n+"_g",(n=document.getElementById(n))&&this.container.removeChild(n)))},t.prototype.bindPieEvents=function(e){this.pieTooltip=this.pieTooltip.bind(this),this.pieTooltipHide=this.pieTooltipHide.bind(this);var t="",i=this.browserInfo(),s=i.isMSPointerEnabled,i=i.pointerEnabled;t=(t=(s?i?"pointerup":"MSPointerUp":"touchend mouseup")+" "+(s?i?"pointermove":"MSPointerMove":"touchmove mousemove")).split(" ");for(var n=0;n<t.length;n++)e.addEventListener(t[n],this.pieTooltip);e.addEventListener("mouseout",this.pieTooltipHide),null!=this.model.pointRegionMouseClick&&(e.addEventListener("click",this.pieTooltip),e.addEventListener("touchstart",this.pieTooltip))},t.prototype.unbindPieEvents=function(){var e="",t=this.browserInfo(),i=t.isMSPointerEnabled,s=t.pointerEnabled,t=i?s?"pointerup":"MSPointerUp":"touchend mouseup",s=i?s?"pointermove":"MSPointerMove":"touchmove mousemove",n=document.getElementById(this.rootId);e=(e=t+" "+s).split(" ");for(var a=0;a<e.length;a++)n.removeEventListener(e[a],this.pieTooltip);n.removeEventListener("mouseout",this.pieTooltipHide)},t.prototype.pieTooltip=function(e){var t=this.isTouch(e);if(t&&e.stopImmediatePropagation(),!(t&&-1<e.type.toString().toLowerCase().indexOf("move"))){null!=this.model.sparklineMouseMove&&this._trigger("sparklineMouseMove");var i,s,n,a,r,o,l,d=this.model,h=e.clientX||(e.changedTouches?e.changedTouches[0].clientX:e.touches?e.touches[0].clientX:0),c=(parseInt(d.size.height),parseInt(d.size.width),d.tooltip.font),u=e.clientY||(e.changedTouches?e.changedTouches[0].clientY:e.touches?e.touches[0].clientY:0),p=document.getElementById(this.container.id),m=(p.parentNode,p.getClientRects()[0]),g=m.top,f=m.left,_=(this.visiblePoints.map(function(e){return e.coordinates}),this.visiblePoints.map(function(e){return e.location})),v=this.visiblePoints.radius,b=this.visiblePoints.centerPos,x=this.visiblePoints,y=h-(b.X+f),w=u-(b.Y+g),C=Math.atan2(w,y),p=this.container.id+"_pieTooltip",m=document.getElementById(p),f=d.tooltip.border.color,b=Math.sqrt(y*y+w*w),S=null!=d.pointRegionMouseClick?"pointRegionMouseClick":null!=d.pointRegionMouseMove?"pointRegionMouseMove":null,g=d.palette,y=d.locale,w=d.enableGroupSeparator;if(Math.abs(b)<=v)for(var T=0,R=x.length;T<R;T++)i=x[T].stAng,(C=C<0?6.283+C:C)<=x[T].endAng&&i<=C&&(s=T,("pointRegionMouseClick"!=S||"click"!=e.type&&"touchstart"!=e.type)&&"pointRegionMouseMove"!=S||this._trigger(S,{data:{pointIndex:T,seriesType:"Pie",locationX:h,locationY:u}}));else m&&m.parentNode.removeChild(m);m&&null!=s?(a=_[s].Percent.toFixed(2),a=w?"&nbsp"+parseFloat(a).toLocaleString(y):a+"&nbsp%&nbsp",r=this.measureText(a,c),n={left:h+12+"px",top:u+"px",border:d.tooltip.border.width+"px solid "+(null!=f?f:g[s%g.length]),"background-color":d.tooltip.fill,height:r.height+"px",width:r.width+"px"},this.setStyles(n,m),m.innerHTML=a):null!=s&&(m=document.createElement("div"),a=_[s].Percent.toFixed(2),a=w?"&nbsp"+parseFloat(a).toLocaleString(y):a+"&nbsp%&nbsp",r=this.measureText(a,c),n={left:h+12+"px",top:u+"px","background-color":d.tooltip.fill,color:c.color,border:d.tooltip.border.width+"px solid "+(null!=f?f:g[s%g.length]),height:r.height+"px",width:r.width+"px","font-size":c.size,opacity:c.opacity,"font-weight":c.fontWeight,"font-family":c.fontFamily,"font-style":c.fontStyle,"z-index":"100000",position:"fixed"},m.setAttribute("id",p),this.setStyles(n,m),m.innerHTML=a,document.body.appendChild(m)),t&&(this.touchEnd=!0,o=document.getElementById(this.container.id+"_pieTooltip"),l=this,setTimeout(function(){l.fadeOut(o)},500))}},t.prototype.pieTooltipHide=function(e){var t;this.touchEnd||(null!=this.model.sparklineMouseLeave&&this._trigger("sparklineMouseLeave"),t=this.container.id+"_pieTooltip",(t=document.getElementById(t))&&document.body.removeChild(t))},t.prototype.bindRegionEvents=function(e){this.sparklineEvent=this.sparklineEvent.bind(this);var t=this.findBrowser();"IE"!=t&&"firefox"!=t||(e.style["touch-action"]="none"),null!=this.model.pointRegionMouseMove&&(e.addEventListener("mousemove",this.sparklineEvent,!0),e.addEventListener("touchmove",this.sparklineEvent,!0)),null!=this.model.pointRegionMouseClick&&(e.addEventListener("click",this.sparklineEvent,!0),e.addEventListener("touchstart",this.sparklineEvent,!0)),null!=this.model.sparklineMouseMove&&(e.addEventListener("mousemove",this.sparklineEvent,!0),e.addEventListener("touchmove",this.sparklineEvent,!0)),null!=this.model.sparklineMouseLeave&&(this.sparklineLeave=this.sparklineLeave.bind(this),e.addEventListener("mouseout",this.sparklineLeave,!0),"firefox"==t&&e.addEventListener("mouseup",this.sparklineLeave,!0),e.addEventListener("touchend",this.sparklineLeave,!0))},t.prototype.sparklineLeave=function(){null!=this.model.sparklineMouseLeave&&this._trigger("sparklineMouseLeave")},t.prototype.sparklineEvent=function(e){null!=this.model.sparklineMouseMove&&this._trigger("sparklineMouseMove");var t,i,s,n,a,r,o=this.model,l=e.clientX||e.touches[0].clientX,d=e.clientY||e.touches[0].clientY,h=o.type,c=this.visiblePoints,e=document.getElementById(this.container.id),e=(e.parentNode,e.getClientRects()[0]),u=e.top,p=e.left,m=null!=o.pointRegionMouseClick?"pointRegionMouseClick":null!=o.pointRegionMouseMove?"pointRegionMouseMove":null;if(h==k.Line||h==k.Area){r=a=2*(o.markerSettings.width+o.markerSettings.border.width);for(var g=0,f=c.length;g<f;g++)s=(t=p+c[g].location.X-a/2)+a,n=(i=u+c[g].location.Y-r/2)+r,t<=l&&l<=s&&i<=d&&d<=n&&null!=m&&this._trigger(m,{data:{pointIndex:g,seriesType:h,locationX:c[g].location.X,locationY:c[g].location.Y}})}else if(h==k.Column||h==k.WinLoss){a=c[0].location.width;for(g=0,f=c.length;g<f;g++)r=c[g].location.height,s=(t=p+c[g].location.X-a/2)+a,n=(i=u+c[g].location.Y)+r,t<=l&&l<=s&&i<=d&&d<=n&&null!=m&&this._trigger(m,{data:{pointIndex:g,seriesType:h,locationX:c[g].location.X,locationY:c[g].location.Y}})}},t.prototype.findBrowser=function(){var e=-1!=navigator.userAgent.indexOf("Firefox")?"firefox":-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"IE":null;return e},t.prototype.resize=function(e){var t=document.getElementById(this.rootId);null!=t||null!=t?(window.removeEventListener("resize",this.resize),this.isResized=!0,this._destroy(),this.createSvg(),this.renderSparkline(),this.isResized=!1):window.removeEventListener("resize",this.resize)},t.prototype.supportsSvg=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg")},t.prototype._init=function(e){this.supportsSvg()&&(this.rootId=null!=this.rootId?this.rootId:this._id,this.parentElement=null!=this.parentElement?this.parentElement:document.getElementById(this.rootId),null!=this.model.load&&this._trigger("load"),this.setTheme(this.model),this.height=parseInt(this.model.size.height),this.width=parseInt(this.model.size.width),this.createSvg(),this.renderSparkline(),null!=this.model.loaded&&this._trigger("loaded"))},t.prototype.redraw=function(){this.emptyContainer(),this.renderSparkline()},t.prototype.touchCheck=function(e){this.touchEnd=!0,"pie"!=this.model.type.toString().toLocaleLowerCase()?this.sparkMouseLeave(e):this.pieTooltipHide(e)},t.prototype.emptyContainer=function(){if(this.model.enableCanvasRendering)this.ctx.clearRect(0,0,this.height,this.width);else for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)},t.prototype._destroy=function(){var e=document.getElementById(this.container.id);null!=e?(this.unBindEvents(),this.unbindPieEvents(),window.removeEventListener("resize",this.resize),e.parentNode.removeChild(e)):window.removeEventListener("resize",this.resize)},t.prototype.renderSparkline=function(){this.setStyles({background:this.model.background},this.container),this.calculatePoints(),this.seriesRender(),this.resize=this.resize.bind(this),this.model.isResponsive?window.addEventListener("resize",this.resize):window.removeEventListener("resize",this.resize),this.model.type!=k.WinLoss&&this.model.type!=k.Pie&&this.model.tooltip.visible?this.bindEvents(this.parentElement):this.unBindEvents(),this.model.type==k.Pie&&this.model.tooltip.visible?this.bindPieEvents(this.parentElement):this.unbindPieEvents(),this.bindRegionEvents(this.parentElement),this.unBindClickEvents(this.parentElement),this.bindClickEvents(this.parentElement)},t.prototype.animateSparkline=function(){var e,t,i,s,n,a,r,o,l,d,h,c,u,p,m,g,f,_,v,b=this.model,x=this,y=b.type,w=b.padding,C=this.axisHeight,S=parseInt(b.size.width),T=parseInt(b.size.height),R=document.createElementNS(this.svgLink,"defs"),b=document.createElementNS(this.svgLink,"clipPath");s=y==k.Pie?document.createElementNS(this.svgLink,"path"):document.createElementNS(this.svgLink,"rect"),y==k.Line||y==k.Area?(i={id:"clipRectSparkline",x:0,y:0,width:0,height:T},t=S/10,n=setInterval(function(){a<=S?s.setAttribute("width",a.toString()):(clearInterval(n),x._trigger("animationComplete"));a+=t},120),a=t):y==k.Column||y==k.WinLoss?C==w?(i={id:"clipRectSparkline",x:0,y:0,width:S,height:0},a=t=T/10,r=setInterval(function(){a<=T?s.setAttribute("height",a.toString()):(clearInterval(r),x._trigger("animationComplete"));a+=t},120)):C==T-w?(i={id:"clipRectSparkline",x:0,y:T,width:S,height:0},t=T/10,a=T,o=setInterval(function(){e=T-a,0<=a?(s.setAttribute("y",a.toString()),s.setAttribute("height",e)):(clearInterval(o),x._trigger("animationComplete"));a-=t},120)):(i={id:"clipRectSparkline",x:0,y:C,width:S,height:0},t=T/10,a=C,l=setInterval(function(){e=2*(C-a),-t<=a?(s.setAttribute("y",a<0?0:a.toString()),s.setAttribute("height",e)):(clearInterval(l),x._trigger("animationComplete"));a-=t},120)):(d=this.visiblePoints,h=d.centerPos,c=d.radius,f=90,a=_=0,i={id:"clipRectSparkline",d:g=""},v=setInterval(function(){a<=d.length-1?(f=90,u=d[a].location.Degree,_+=u+(0==a?f:0),p=(f-90)*Math.PI/180,m=(_-90)*Math.PI/180,a==d.length-1&&(m-=1e-4),e={sX:h.X+c*Math.cos(p),sY:h.Y+c*Math.sin(p),eX:h.X+c*Math.cos(m),eY:h.Y+c*Math.sin(m)},g="M "+h.X+" "+h.Y+" L "+e.eX+" "+e.eY+" A "+c+" "+c+" 0 1,0 "+e.sX+" "+e.sY+" Z",s.setAttribute("d",g)):(clearInterval(v),x._trigger("animationComplete"));a+=1},120)),w={id:this.container.id+"_sparklineRect"},this.setAttributes(i,s),this.setAttributes(w,b),b.appendChild(s),R.appendChild(b),this.container.appendChild(R)},t.prototype.setTheme=function(e){var t=e.theme,i=this.defaults;t==s.flatdark?(e.background=e.background==i.background?"#111111":e.background,e.fill=e.fill==i.fill?"#B5B5B5":e.fill,e.stroke=e.stroke==i.stroke?"#F6D321":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==i.axisLineSettings.color?"#AAAAAA":e.axisLineSettings.color):t==s.gradientlight?(e.background=e.background==i.background?"transparent":e.background,e.fill=e.fill==i.fill?"#F34649":e.fill,e.stroke=e.stroke==i.stroke?"#597B15":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==i.axisLineSettings.color?"#8E8E8E":e.axisLineSettings.color):t==s.gradientdark?(e.background=e.background==i.background?"#111111":e.background,e.fill=e.fill==i.fill?"#005378":e.fill,e.stroke=e.stroke==i.stroke?"#6A9319":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==i.axisLineSettings.color?"#AAAAAA":e.axisLineSettings.color):t==s.azuredark?(e.background=e.background==i.background?"#111111":e.background,e.fill=e.fill==i.fill?"#007fff":e.fill,e.stroke=e.stroke==i.stroke?"#f0ffff":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==i.axisLineSettings.color?"#336699":e.axisLineSettings.color):t==s.azurelight?(e.background=e.background==i.background?"transparent":e.background,e.fill=e.fill==i.fill?"#336699":e.fill,e.stroke=e.stroke==i.stroke?"#007fff":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==i.axisLineSettings.color?"#336699":e.axisLineSettings.color):t==s.limedark?(e.background=e.background==i.background?"#111111":e.background,e.fill=e.fill==i.fill?"#238f23":e.fill,e.stroke=e.stroke==i.stroke?"#32CD32":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==i.axisLineSettings.color?"#43da21":e.axisLineSettings.color):t==s.limelight?(e.background=e.background==i.background?"transparent":e.background,e.fill=e.fill==i.fill?"#238f23":e.fill,e.stroke=e.stroke==i.stroke?"#32CD32":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==i.axisLineSettings.color?"#43da21":e.axisLineSettings.color):t==s.saffrondark?(e.background=e.background==i.background?"#111111":e.background,e.fill=e.fill==i.fill?"#ffaa33":e.fill,e.stroke=e.stroke==i.stroke?"#ffdba9":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==i.axisLineSettings.color?"#ffc26e":e.axisLineSettings.color):t==s.saffronlight?(e.background=e.background==i.background?"transparent":e.background,e.fill=e.fill==i.fill?"#ffaa33":e.fill,e.stroke=e.stroke==i.stroke?"#ffdba9":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==i.axisLineSettings.color?"#ffc26e":e.axisLineSettings.color):null!=t&&t!=s.flatlight||(e.background=e.background==i.background?"transparent":e.background,e.fill=e.fill==i.fill?"#33ccff":e.fill,e.stroke=e.stroke==i.stroke?"#33ccff":e.stroke,e.axisLineSettings.color=e.axisLineSettings.color==i.axisLineSettings.color?"#FF0000":e.axisLineSettings.color)},t.prototype.createSvg=function(){var e=this.model,t=(0<this.parentElement.clientWidth?this:this.parentElement).parentElement,i=parseInt(t.style.height)>t.clientHeight?parseInt(t.style.height):t.clientHeight,s=parseInt(t.style.width)>t.clientWidth?parseInt(t.style.width):t.clientWidth,n=""==e.size.width?s:parseInt(e.size.width),t=0<(t=""==e.size.height?i:parseInt(e.size.height))?t:0<i?i:30;n=(n=this.model.isResponsive&&this.isResized&&0<s?s:n)<=0?50:n,e.size.height=t.toString(),e.size.width=n.toString(),this.height=t,this.width=n,t={id:this.rootId+"_sparkline_svg",width:n,height:t},e.enableCanvasRendering?(this.container=document.createElement("canvas"),this.ctx=this.container.getContext("2d")):this.container=document.createElementNS(this.svgLink,"svg"),this.setAttributes(t,this.container),this.parentElement.appendChild(this.container)},t.prototype.setStyles=function(t,e){for(var i,s=Object.keys(t),n=s.map(function(e){return t[e]}),a=0,r=s.length;a<r;a++)i=s[a],e.style[i]=n[a]},t.prototype.setAttributes=function(t,e){for(var i=Object.keys(t),s=i.map(function(e){return t[e]}),n=0,a=i.length;n<a;n++)e.setAttribute(i[n],s[n])},t.prototype.getDefaultPoints=function(e){for(var t=[],i=1;i<=e;i++)5<10*Math.random()&&t.push(-Math.round(100*Math.random())),t.push(Math.round(100*Math.random()));return t},t.prototype.calculatePoints=function(){var e,t,i,s,n,a,r,o,l,d,h,c,u=this.model,p=u.type,m=null!=u.dataSource?u.dataSource:this.getDefaultPoints(12),g=[],f=m.length,_=0;if(Array.isArray(m)&&"object"!=typeof m[0])if(u.type==k.Pie)for(var v=0;v<f;v++)_+=Math.abs(m[v]);else s=Math.max.apply(null,m),n=Math.min.apply(null,m),e=0,t=f-1;else if(u.type==k.Pie)for(v=0;v<f;v++)_+=Math.abs(m[v][u.yName]);else n=m[0][u.xName]?(s=(l=(l=m).sort(function(e,t){return e[u.yName]-t[u.yName]}))[l.length-1][u.yName],l[0][u.yName]):(i=m.map(function(e){return e[u.yName]}),s=Math.max.apply(null,i),Math.min.apply(null,i)),m[0][u.xName]?(t=(l=l.sort(function(e,t){return e[u.xName]-t[u.xName]}))[l.length-1][u.xName],e=l[0][u.xName]):(e=0,t=f-1);u.type!=k.Pie&&(this.maxLength=f,a=Number(u.padding),r=parseInt(u.size.height)-2*a,o=parseInt(u.size.width)-2*a,l=0==(l=t-e)?1:l,d=0==(d=s-n)?1:d,this.min=n,this.unitX=l,this.minX=e,this.unitY=d,this.max=s,this.maxX=t,h=r-r/d*-n,h=n<(w=0)&&s<=0?0:n<0&&0<s?h:r,this.axisHeight=h+a,p!=k.WinLoss&&u.axisLineSettings.visible&&this.drawAxis());for(v=0;v<f;v++){var b,x,y,w,C=m[v][u.xName]||m[v][u.yName]||0==m[v][u.yName]?m[v][u.xName]?(i=m[v][u.xName],m[v][u.yName]):m[i=v][u.yName]:m[i=v];p==k.Line||p==k.Area?(x=1!=f?r-Math.round(r*((C-n)/d)):0,c={X:1!=f?Math.round(o*((i-e)/600)):o/2,Y:x,markerPos:x}):p==k.Column||p==k.WinLoss?(b=o/f,w=v*(1+--b)+.5,c=p==k.WinLoss?{X:w,Y:x=0<C?r/4:C<0?.5*r:.5*r-r/40,height:0!=C?r/4:r/20,width:b}:(y=C==n&&0<C?1!=f&&1!=d?r/d*(n/2):r/d:C==s&&C<0&&1!=f&&1!=d?r/d*(-s/2):r/d*(C-n),{X:w,Y:h<(x=Math.abs(r-y))?h:x,height:Math.abs(x-h),width:b,markerPos:h<x?h+Math.abs(x-h):x})):p==k.Pie&&(c={Percent:Math.abs(C)/_*100,Degree:Math.abs(C)/_*360}),p!=k.Pie&&(c.X+=a,c.Y+=a),p!=k.WinLoss&&(c.markerPos+=a),c.Xval=i,c.Yval=C,g.push({location:c})}this.visiblePoints=g.splice(2)},t.prototype.seriesRender=function(){var e=this.model,t=this.visiblePoints,i=t.length,s=e.type,i={data:{minX:this.minX,minY:this.min,maxX:this.maxX,maxY:this.max,xName:e.xName,yName:e.yName,pointsCount:i,seriesType:s,visiblePoints:this.visiblePoints}};null!=this.model.seriesRendering&&this._trigger("seriesRendering",i),s==k.Line?this.drawLineSeries(t):s==k.Area?this.drawAreaSeries(t):s==k.Column?this.drawColumnSeries(t):s==k.WinLoss?this.drawWinlossSeries(t):s==k.Pie&&this.drawPieSeries(),e.markerSettings.visible&&s!=k.WinLoss&&s!=k.Pie&&this.drawMarker(t),null!=e.rangeBandSettings.startRange&&null!=e.rangeBandSettings.endRange&&s!=k.WinLoss&&s!=k.Pie&&this.drawRangeBand()},t.prototype.drawPieSeries=function(){var e=this.model,t=this.visiblePoints;e.padding=e.padding==this.defaults.padding?2:e.padding;t.length;var i,s,n=parseInt(e.size.height)-2*e.padding,a=parseInt(e.size.width)-2*e.padding,r=n<=a?n/2:a/2,o={X:a/2,Y:n/2},l=e.palette,d=0,h=e.border.color,c=e.opacity,u=e.border.width;t.centerPos=o,t.radius=r;for(var p,m,g=0,f=90;g<t.length;g++)p=(f+=d)+(d=t[g].location.Degree),s=(f-90)*Math.PI/180,i=(p-90)*Math.PI/180,t[g].stAng=s,t[g].endAng=i,m=d<180?"0":"1",p=t[g].coordinates={sX:o.X+r*Math.cos(s),sY:o.Y+r*Math.sin(s),eX:o.X+r*Math.cos(i),eY:o.Y+r*Math.sin(i)},p="M "+o.X+" "+o.Y+" L "+p.eX+" "+p.eY+" A "+r+" "+r+" 0 "+m+",0 "+p.sX+" "+p.sY+" Z",s={id:this.container.id+"_pieBase"+g,fill:l[g%l.length],stroke:h,opacity:c,"stroke-width":u,d:p,start:i,end:s,x:o.X,y:o.Y,counterClockWise:m,radius:r},e.enableCanvasRendering?this.canvasDrawPath(s):(m=this.createGroup({id:"sparkpieSeries"}),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},m),this.container.appendChild(m),this.drawPath(s,m))},t.prototype.drawRangeBand=function(){var e=this.model,t=parseInt(e.size.height)-2*e.padding,i=parseInt(e.size.width)-2*e.padding,s=e.rangeBandSettings.startRange,n=e.rangeBandSettings.endRange,s=Number(t-t/this.unitY*(s-this.min))+e.padding,n=(n=Number(t-t/this.unitY*(n-this.min))+e.padding)>Number(t+e.padding)?Number(t+e.padding):n<0+e.padding?0+e.padding:n,s=s>Number(t+e.padding)?Number(t+e.padding):s<0+e.padding?0+e.padding:s,n="M "+e.padding+" "+s+" L "+(i+Number(e.padding))+" "+s+" L "+(i+Number(e.padding))+" "+n+" L "+e.padding+" "+n+" Z",n={id:this.container.id+"_rangeBand",fill:e.rangeBandSettings.color,opacity:e.rangeBandSettings.opacity,stroke:"transparent","stroke-width":e.border.width,d:n};e.enableCanvasRendering?this.canvasDrawPath(n):this.drawPath(n)},t.prototype.drawAxis=function(){var e=this.model,t=this.axisHeight,i=e.axisLineSettings.color,s=e.type;s!=k.WinLoss&&s!=k.Pie&&(e.axisLineSettings.visible||(i="transparent"),i={id:this.container.id+"_Sparkline_XAxis",x1:0+e.padding,y1:t,x2:parseInt(e.size.width)-e.padding,y2:t,stroke:i,"stroke-dasharray":e.axisLineSettings.dashArray,"stroke-width":e.axisLineSettings.width},e.enableCanvasRendering?this.canvasDrawLine(i):this.drawLine(i))},t.prototype.drawColumnSeries=function(e){var t,i,s,n,a,r=this.model,o=e.length,l=y.compareExtend({},[],e),d=r.border.width,h=r.opacity,c=r.fill,u=r.border.color,p=r.highPointColor,m=r.lowPointColor,g=r.startPointColor,f=r.endPointColor,_=r.negativePointColor;(p||m)&&(l=l.map(function(e){return e.location.markerPos}),n=Math.min.apply(null,l),a=Math.max.apply(null,l)),0==r.enableCanvasRendering&&(s=this.createGroup({id:this.container.id+"sparkcolumnSeries"}),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},s),this.container.appendChild(s));for(var v=0;v<o;v++)i=e[v].location,t={id:this.container.id+"_column_series_"+v,x:i.X,y:i.Y,height:i.height,width:i.width,fill:c,stroke:u,opacity:h,"stroke-width":d},i.markerPos==n&&p?(t.fill=p,this.highPointIndex=v):i.markerPos==a&&m?(t.fill=m,this.lowPointIndex=v):0==v&&g?(t.fill=g,this.startPointIndex=v):v==o-1&&f?(t.fill=f,this.endPointIndex=v):i.markerPos>=this.axisHeight&&_&&(t.fill=_,this.negativePointIndexes.push(v)),r.enableCanvasRendering?this.canvasDrawRectangle(t):this.drawRect(t,s),i.X+=i.width/2},t.prototype.drawWinlossSeries=function(e){var t,i,s=this.model,n=s.border.width,a=s.padding,r=s.border.color,o=s.opacity,l=e.length,d=parseInt(s.size.height)-2*a;0==s.enableCanvasRendering&&(i=this.createGroup({id:this.container.id+"sparkwinlossSeries"}),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},i),this.container.appendChild(i));for(var h=0;h<l;h++)t=e[h].location,t={id:this.container.id+"_winloss_series_"+h,x:t.X,y:t.Y,height:t.height,width:t.width,fill:t.Y<d/2+a?t.Y>d/4+a?"#EE82EE":s.fill:s.negativePointColor||"#FF0000",stroke:r,opacity:o,"stroke-width":n},s.enableCanvasRendering?this.canvasDrawRectangle(t):this.drawRect(t,i)},t.prototype.drawAreaSeries=function(e){for(var t,i="",s=this.axisHeight,n=this.model,a=0,r=e.length;a<r;a++)0==a&&(i="M "+e[0].location.X+" "+s+" "),i+="L "+e[a].location.X+" "+e[a].location.Y+" ",a==r-1&&(i+="L "+e[a].location.X+" "+s+" Z");t={id:this.container.id+"_area_series_fill",fill:n.fill,stroke:n.stroke||n.fill,"fill-opacity":n.opacity,"stroke-width":n.width,d:i},n.enableCanvasRendering?this.canvasDrawPath(t):(n=this.createGroup({id:"sparkAreaSeries"}),this.container.appendChild(n),this.drawPath(t,n),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},n))},t.prototype.drawLineSeries=function(e){for(var t="",i=this.model,s=0,n=e.length;s<n;s++)0==s&&(t="M "+e[0].location.X+" "+e[s].location.Y+" "),t+="L "+e[s].location.X+" "+e[s].location.Y+" ";var a={id:this.container.id+"_Line_series",fill:"transparent",stroke:i.stroke||i.fill,opacity:i.opacity,"stroke-width":i.width,d:t};i.enableCanvasRendering?this.canvasDrawPath(a):(i=this.createGroup({id:"sparklineSeries"}),this.container.appendChild(i),this.drawPath(a,i),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},i))},t.prototype.drawMarker=function(e){var t,i,s,n,a,r=e.length,o=this.model.markerSettings,l=this.model,d=y.compareExtend({},[],e),h=o.fill||l.fill,c=o.border.color,u=o.width,p=o.opacity,m=o.border.width,g=l.highPointColor,f=l.lowPointColor,_=l.startPointColor,v=l.endPointColor,b=l.negativePointColor;0==l.enableCanvasRendering&&(s=this.createGroup({id:this.container.id+"sparkmarkers"}),this.setStyles({"clip-path":"url(#"+this.container.id+"_sparklineRect)"},s),this.container.appendChild(s)),0!=o.visible&&l.type!=k.Pie&&l.type!=k.WinLoss||(m=u=0),(g||f)&&(d=d.map(function(e){return e.location.markerPos}),n=Math.min.apply(null,d),a=Math.max.apply(null,d));for(var x=0;x<r;x++)null!=(i=e[x].location).width&&i.width,t={id:this.container.id+"_marker_"+x,cx:i.X,cy:i.markerPos,r:u,fill:h,stroke:c,opacity:p,"stroke-width":m},i.markerPos==n&&g?(t.fill=g,this.highPointIndex=x):i.markerPos==a&&f?(t.fill=f,this.lowPointIndex=x):0==x&&_?(t.fill=_,this.startPointIndex=x):x==r-1&&v?(t.fill=v,this.endPointIndex=x):i.markerPos>this.axisHeight&&b&&(t.fill=b,this.negativePointIndexes.push(x)),this.model.enableCanvasRendering?this.canvasDrawCircle(t):this.drawCircle(t,s)},t.prototype.drawLine=function(e){var t=(t=document.getElementById(e.id))||document.createElementNS(this.svgLink,"line");this.setAttributes(e,t),this.container.appendChild(t)},t.prototype.drawCircle=function(e,t){t=t||this.container;var i=(i=document.getElementById(e.id))||document.createElementNS(this.svgLink,"circle");this.setAttributes(e,i),t.appendChild(i)},t.prototype.drawPolyLine=function(e){var t=(t=document.getElementById(e.id))||document.createElementNS(this.svgLink,"polyline");this.setAttributes(e,t),this.container.appendChild(t)},t.prototype.drawPath=function(e,t){t=t||this.container;var i=(i=document.getElementById(e.id))||document.createElementNS(this.svgLink,"path");this.setAttributes(e,i),t.appendChild(i)},t.prototype.drawRect=function(e,t){t=t||this.container;var i=(i=document.getElementById(e.id))||document.createElementNS(this.svgLink,"rect");this.setAttributes(e,i),t.appendChild(i)},t.prototype.createGroup=function(e){var t=document.createElementNS(this.svgLink,"g");return this.setAttributes(e,t),t},t.prototype.createText=function(e,t){var i=document.createElementNS(this.svgLink,"text");return this.setAttributes(e,i),t&&(i.textContent=t),i},t.prototype.canvasDrawLine=function(e,t){t=t||this.ctx;t.save(),t.beginPath(),t.lineWidth=e["stroke-width"],t.strokeStyle=e.stroke,t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.stroke(),t.restore(),this.dataURL=this.container.toDataURL()},t.prototype.canvasDrawRectangle=function(e,t){var i=t||this.ctx,s=t||this.ctx;i.save(),i.beginPath(),i.globalAlpha=e.opacity,i.lineWidth=e["stroke-width"];t=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(",");t&&this.ctx.setLineDash(t),i.strokeStyle=e.stroke,i.rect(e.x,e.y,e.width,e.height),"none"==e.fill&&(e.fill="transparent"),i.fillStyle=e.fill,i.fillRect(e.x,e.y,e.width,e.height),i.stroke(),i.restore(),i=s,this.dataURL=this.container.toDataURL()},t.prototype.canvasDrawPath=function(e,t){var i=e.d.split(" "),s=e["stroke-width"],n=t||this.ctx,a=t||this.ctx;n.save(),n.beginPath(),n.globalAlpha=e.opacity||e["fill-opacity"];var r=!0;n.lineWidth=s;t=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(",");t&&n.setLineDash(t),n.strokeStyle=e.stroke;for(var o=0;o<i.length;o+=3){var l=parseFloat(i[o+1]),d=parseFloat(i[o+2]);switch(i[o]){case"M":e.innerR||e.cx||n.moveTo(l,d);break;case"L":e.innerR||n.lineTo(l,d);break;case"C":n.bezierCurveTo(l,d,parseFloat(i[o+3]),parseFloat(i[o+4]),parseFloat(i[o+5]),parseFloat(i[o+6])),o+=4;break;case"A":e.innerR?r&&(n.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),n.arc(e.x,e.y,e.innerR,e.end,e.start,!e.counterClockWise),r=!1):e.cx?n.arc(e.cx,e.cy,e.radius,0,2*Math.PI,e.counterClockWise):(n.moveTo(e.x,e.y),n.arc(e.x,e.y,e.radius,e.start,e.end,e.counterClockWise),n.lineTo(e.x,e.y)),o+=5;break;case"Z":n.closePath()}}"none"!=e.fill&&null!=e.fill&&(n.fillStyle=e.fill,n.fill()),0<s&&n.stroke(),n.restore(),n=a,this.dataURL=this.container.toDataURL()},t.prototype.canvasDrawCircle=function(e,t){var i=t||this.ctx,s=t||this.ctx;i.save(),i.beginPath(),i.arc(e.cx,e.cy,e.r,0,2*Math.PI),i.fillStyle=e.fill,i.globalAlpha=e.opacity,i.fill(),i.lineWidth=e["stroke-width"],(t=!!e["stroke-dasharray"]&&e["stroke-dasharray"].split(","))&&i.setLineDash(t),i.strokeStyle=e.stroke,i.stroke(),i.restore(),i=s,this.dataURL=this.container.toDataURL()},t.prototype.canvasDrawPolyline=function(e,t){var i=t||this.ctx;i.save(),i.beginPath();for(var s=e.points.split(" "),n=0;n<s.length-1;n++){var a=s[n].split(","),r=a[0],a=a[1];0==n?i.moveTo(r,a):i.lineTo(r,a)}i.lineWidth=e["stroke-width"],i.strokeStyle=e.stroke,i.stroke(),i.restore(),this.dataURL=this.container.toDataURL()},t.prototype.canvasDrawText=function(e,t,i){var s=e.font,n=e["text-anchor"],a=void 0!==e.opacity?e.opacity:1;"middle"==n&&(n="center");i=i||this.ctx;i.save(),i.fillStyle=e.fill,i.font=s,i.textAlign=n,i.globalAlpha=a,e.baseline&&(i.textBaseline=e.baseline);a=0;90==e.labelRotation&&-1!=e.id.indexOf("XLabel")&&(a=i.measureText(t).width),i.translate(e.x+a/2,e.y),i.rotate(e.labelRotation*Math.PI/180),i.fillText(t,0,0),i.restore(),this.dataURL=this.container.toDataURL()},t.prototype.parseTemplate=function(e,t){for(var i=e.innerHTML,t=Object.values(t)[0],s=0,n=Object.entries(t);s<n.length;s++){var a=n[s],r=a[0],a=a[1],r="#point."+r+"#";-1!=i.search(r)&&(i=i.replace(r,a))}return i},t.prototype.measureText=function(e,t){var i,s=document.getElementById("measureTex");s&&0!=s.clientHeight?i=s:((i=document.createElement("text")).setAttribute("id","measureTex"),document.body.appendChild(i));var n=null,a=null,r=null,s=null;if("string"==typeof e&&(-1<e.indexOf("<")||-1<e.indexOf(">"))){for(var o=e.split(" "),l=0;l<o.length;l++)-1==o[l].indexOf("<br/>")&&(o[l]=o[l].replace(/[<>]/g,"&"));e=o.join(" ")}return i.innerHTML=e,null!=t&&null==t.size&&(n=(e=(e=t).split(" "))[0],a=e[1],r=e[2],s=e[3]),null!=t&&(i.style.fontSize=0<t.size?t.size+"px":t.size||a,i.style.fontStyle&&(i.style.fontStyle=t.fontStyle||n),i.style.fontFamily=t.fontFamily||r,-1==window.navigator.userAgent.indexOf("MSIE 8.0")&&(i.style.fontWeight=t.fontWeight||s)),i.style.backgroundColor="white",i.style.position="absolute",i.style.top="-100px",i.style.left="0px",i.style.visibility="hidden",i.style.whiteSpace="nowrap",{width:i.offsetWidth,height:i.offsetHeight}},e=t,y.Sparkline=e,ej.widget("ejSparkline","ej.Sparkline",new e),y.deepExtend=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var i=arguments[t];if(i)for(var s in i)i.hasOwnProperty(s)&&("object"==typeof i[s]?e[s]=y.deepExtend(e[s],i[s]):e[s]=i[s])}return e},y.compareExtend=function(e,t,i){if("object"==typeof i&&null!==i)for(var s,n=Object.keys(i),a=n.length,r=0;r<a;r++)s=n[r],t.hasOwnProperty(s)&&null!=t[s]?(Array.isArray(t[s])||"object"==typeof t[s]&&null!==t[s])&&y.compareExtend({},t[s],i[s]):t[s]=i[s];return t}}(ejSparkline=ejSparkline||{}),function(y,w){w.widget("ejSplitter","ej.Splitter",{element:null,model:null,validTags:["div","span"],_rootCSS:"e-splitter",_setFirst:!1,angular:{terminal:!1},defaults:{cssClass:"",orientation:"horizontal",enableAnimation:!0,properties:[],height:null,width:null,enableAutoResize:!1,isResponsive:!1,enableRTL:!1,allowKeyboardNavigation:!0,htmlAttributes:{},expanderTemplate:null,animationSpeed:300,beforeExpandCollapse:null,clickOnExpander:null,expandCollapse:null,resize:null,create:null,destroy:null},dataTypes:{cssClass:"string",orientation:"enum",properties:"data",enableAutoResize:"boolean",expanderTemplate:"string",isResponsive:"boolean",enableRTL:"boolean",allowKeyboardNavigation:"boolean",animationSpeed:"number",enableAnimation:"boolean",htmlAttributes:"data"},_init:function(){this._initialize(),this._render(),this.model.isResponsive||this.model.enableAutoResize?this._wireEvents(!0):this._wireEvents(!1)},_setModel:function(e){for(var t in e)switch(t){case"cssClass":this._changeSkin(e[t]);break;case"enableAutoResize":case"isResponsive":this._windowResizing(e[t]);break;case"enableRTL":this._rtl(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"orientation":this._refreshSplitter("orientation",e[t]);break;case"properties":this._refreshSplitter("properties",e[t]);break;case"width":this.model.width=e[t],this._setHeightWidth();break;case"height":this.model.height=e[t],this._setHeightWidth()}},refresh:function(){this._setPanesSize(),this._getPanesPercent()},collapse:function(e){this._clickArrow(e,!0,!0)},expand:function(e){this._clickArrow(e,!1,!0)},_clickArrow:function(e,t,i){if(this._inMovement||e<0||e>this.panes.length||this.panes.length<=1)return!1;var s,n=t?"e-collapse":"e-expand",a=this.element.children(".e-splitbar:not(.e-shadowbar)");if(w.isNullOrUndefined(this.model.expanderTemplate)?s=e==a.length?this._clickArrow(e-1,!t,!1):y(a[e]).children("."+n):(s=y(a[e]).children(".e-splitter-"+this.model.orientation.substr(0,1)+"-template"),t?this._collapseArrowClick(this.templateargs):this._expandArrowClick(this.templateargs)),w.isNullOrUndefined(this.model.expanderTemplate)||this._templateIconPositioning(!0),!i)return s;"none"==s.css("display")&&w.isNullOrUndefined(this.model.expanderTemplate)||(w.isDevice()?s.tap():s.mouseup())},addItem:function(e,t,i){var s=this.panes.length;i=this._getNumber(i);var n=this.element[this.containerCss]();if(w.isNullOrUndefined(i)&&(i=s),i<0||s<i)return"";var a,r,t=this._getPaneProperty(t);t=this._checkMinMaxSize(t),a=w.buildTag("div.e-pane e-"+this.model.orientation.substr(0,1)+"-pane"),this.element.append(a[this.containerCss](t.paneSize)),r=t.paneSize=a[this.containerCss](),0==s&&this.panes.push(a),a.remove();for(var o,l,d,h,c=i,u=0<s?s:this.panes.length,p={},m=0,g=!1,f=r+this._bar,_=0;_<2;_++){for(o=c;o<u;o++){var v=y(this.panes[o])[this.containerCss](),b=(w.isNullOrUndefined(this.model.properties[o])?t:this.model.properties[o]).minSize,x=v-b;if(f-m<=x){p[o]=v-(f-m),g=!0;break}0==s&&0<=x?(p[o]=b,m+=x,g=!0):0<x&&(p[o]=b,m+=x)}if(g)break;u=c,c=0}if(!g)return"";for(h in p)y(this.panes[h])[this.containerCss](p[h]);return s<=0?a.append(y(this.panes[i])):i==s?(l="insertBefore",d=1,a.insertAfter(y(this.panes[i-1]))):(l="insertAfter",d=0,a.insertBefore(y(this.panes[i]))),this.model.properties.splice(i,0,t),0==s&&this.element.append(a[this.containerCss](n)),0<s&&(this.panes.splice(i,0,a),this._createSplitBar(i-d)[l](a)),a.append(e),this._updateModel(),a},removeItem:function(e){var t,i,s,n=this.panes.length-1;if(e=this._getNumber(e),w.isNullOrUndefined(e)&&(e=n),e<0||n<e||n<0)return null;s=(i=y(this.panes[e]))[this.containerCss]()+this._bar,i.remove(),i=this.element.children(".e-splitbar:not(.e-shadowbar)"),e==n?(t=y(this.panes[e-1]),y(i[e-1]).remove()):(t=y(this.panes[e+1]),y(i[e]).remove()),t[this.containerCss](t[this.containerCss]()+s),this._removeArrays(e),this._updateModel()},_checkMinMaxSize:function(e){return!w.isNullOrUndefined(e.minSize)&&e.paneSize<e.minSize&&(e.paneSize=e.minSize),!w.isNullOrUndefined(e.maxSize)&&e.paneSize>e.maxSize&&(e.paneSize=e.maxSize),e},_removeArrays:function(e){this.model.properties.splice(e,1),this.panes.splice(e,1),this.oldPaneSize.splice(e,1),this.oldPanePercent.splice(e,1),this._sizePercent.splice(e,1)},_getNumber:function(e){return e=parseFloat(e),isNaN(e)?null:e},_updateModel:function(){for(var e=0;e<this.panes.length;e++)this.model.properties[e].paneSize=y(this.panes[e])[this.containerCss]();this._getPanesPercent()},_getPaneProperty:function(e){return y.extend({paneSize:10,minSize:10,maxSize:null,collapsible:!0,resizable:!0,expandable:!0},e)},_changeSkin:function(e){this.element.removeClass(this.model.cssClass).addClass(e)},_windowResizing:function(e){e?this._wireEvents(e):this._unWireEvents()},_refreshSplitter:function(e,t){this._unWireEvents(),this._refreshDestroy(),this.model[e]=t,this._init()},_destroy:function(){this.element.removeClass("e-splitter"),this._refreshDestroy(),this._unWireEvents()},_refreshDestroy:function(){this.element.removeClass("e-widget e-box e-rtl"+this.model.cssClass+" e-"+this.model.orientation),this.element.children(".e-splitbar").remove(),this.element.children(".e-pane").removeClass("e-pane e-"+this.model.orientation.substr(0,1)+"-pane").height("").width("")},_initialize:function(){this.panes=[],this.oldPaneSize=[],this.oldPanePercent=[],this._initialPropertiesValue=[],this._updateHeightWidth=!1,this.shadowBar=null,this._inMovement=!1,this.containerCss="horizontal"==this.model.orientation?"width":"height",this.displayCss="horizontal"==this.model.orientation?"left":"top",this.borderCss="horizontal"==this.model.orientation?"right":"bottom",this._bar=9},_render:function(){this.element.addClass("e-widget e-box "+this.model.cssClass+" e-"+this.model.orientation).attr("data-role","splitter");for(var e=this.element[0],t=0;t<e.children.length;t++)y(e.children[t]).addClass("e-pane"),this.panes.push(e.children[t]);this._setPanesProperty(),this._insertSplitBar(),this._setDimentions(),w.isNullOrUndefined(this.model.expanderTemplate)||this.element.find(".e-splitter-"+this.model.orientation.substr(0,1)+"-template").css("z-index",w.getMaxZindex()+1),this._setPanesSize(),this._getPanesPercent(),this._addAttr(this.model.htmlAttributes),this._checkProperties(),this.element.find(".e-pane").addClass("e-"+this.model.orientation.substr(0,1)+"-pane"),this.model.isResponsive&&(isNaN(this.model.height)&&0<this.model.height.indexOf("%")&&this.element.css("height",this.model.height),isNaN(this.model.width)&&0<this.model.width.indexOf("%")&&this.element.css("width",this.model.width))},_templateClick:function(e){e=this.templateargs={cancel:!1,targetElement:y(e.target),event:e.type,model:this.model,currentTarget:y(e.currentTarget)};this._trigger("clickOnExpander",e)},_templateIconPositioning:function(e){var t=this;"webkit"==w.browserInfo().name&&e&&(t.element.find(".e-splitter-"+t.model.orientation.substr(0,1)+"-template").css("display","none"),setTimeout(function(e){t.element.find(".e-splitter-"+t.model.orientation.substr(0,1)+"-template").css("display","block")},t._isMouseMove?10:t.model.animationSpeed),t._isMouseMove=!1),e||setTimeout(function(e){t.element.find(".e-splitter-"+t.model.orientation.substr(0,1)+"-template").css("display","inline-block")},100)},_setPanesProperty:function(){for(var e=0;e<this.panes.length;e++)null!=this.model.properties[e]?(this.model.properties[e].paneSize=null==this.model.properties[e].paneSize?"0px":this.model.properties[e].paneSize,this.model.properties[e].minSize=isNaN(parseFloat(this.model.properties[e].minSize))?10:parseFloat(this.model.properties[e].minSize),this.model.properties[e].maxSize=isNaN(parseFloat(this.model.properties[e].maxSize))?null:parseFloat(this.model.properties[e].maxSize),this.model.properties[e].collapsible=0!=this.model.properties[e].collapsible,this.model.properties[e].resizable=0!=this.model.properties[e].resizable,this.model.properties[e].expandable=0!=this.model.properties[e].expandable):this.model.properties.push({paneSize:"0px",minSize:10,maxSize:null,collapsible:!0,resizable:!0,expandable:!0}),this._initialPropertiesValue[e]=this.model.properties[e].paneSize},_addAttr:function(e){var i=this;y.map(e,function(e,t){"class"==t?i.element.addClass(e):i.element.attr(t,e)})},_insertSplitBar:function(){if(1<this.panes.length)for(var e=0;e<this.panes.length-1;e++)this._createSplitBar(e).insertAfter(this.panes[e])},_createSplitBar:function(e){var t,i,s,n=this.model.orientation.substr(0,1),a=!1,r=w.buildTag("span.e-box e-splitbar e-split-divider e-"+n+"-bar").attr("aria-expanded",!0);return"msie"==w.browserInfo().name&&r.addClass("e-pinch"),w.isNullOrUndefined(this.model.expanderTemplate)?(t=w.buildTag("span.e-icon e-collapse e-"+n+"-arrow "+("h"==n?"e-arrow-sans-left":"e-arrow-sans-up")),r.append(t),i=w.buildTag("span.e-activebar e-"+n+"-arrow "),r.append(i),s=w.buildTag("span.e-icon e-expand e-"+n+"-arrow "+("h"==n?"e-arrow-sans-right":"e-arrow-sans-down")),r.append(s),a=!0,this._on(t,w.isDevice()?"tap":"mouseup",this._collapseArrowClick),this._on(s,w.isDevice()?"tap":"mouseup",this._expandArrowClick),this.model.properties[e].collapsible||t.css("display","none"),this.model.properties[e].expandable||s.css("display","none"),this.model.properties[e+1].collapsible&&s.css("display","block")):(document.getElementsByClassName("e-split-divider")[0],s=document.createElement("span"),y(s).append(this.model.expanderTemplate),y(s).attr("class","e-splitter-"+this.model.orientation.substr(0,1)+"-template e-resize"),y(s).on(w.isTouchDevice()?"tap":"click",y.proxy(this._templateClick,this)),r.append(s),this._templateIconPositioning(!1)),this.model.properties[e].resizable&&this.model.properties[e+1].resizable&&(r.addClass("e-resize").removeClass("e-icon-hide"),a=!0,this._on(r,w.eventType.mouseDown,this._mouseDownOnDivider),w.isNullOrUndefined(this.model.expanderTemplate)&&this._on(i,w.eventType.mouseDown,this._mouseDownOnDivider)),a?(r.attr({role:"separator",tabindex:"0"}),this._on(r,"focus focusout",this._focusOnDivider)):r.attr({role:"presentation"}),r},_getTemplatedString:function(e){for(var t=this.model.expanderTemplate,i=t.indexOf("${"),s=t.indexOf("}");-1!=i&&-1!=s;)var n=t.substring(i,s+1);return n},_getPanesPercent:function(){this._sizePercent=[];for(var e=this.element[this.containerCss]()-(this.panes.length-1)*this._bar,t=0;t<this.panes.length;t++)y(this.panes[t]).hasClass("collapsed")||(this.oldPaneSize[t]=y(this.panes[t])[this.containerCss]()),this.oldPanePercent[t]=this._convertToPercent(e,this.oldPaneSize[t]),this._sizePercent.push(this._convertToPercent(e,y(this.panes[t])[this.containerCss]()))},_setDimentions:function(){var e=this._getParentObj(),t=parseInt(this.model.width),i=parseInt(this.model.height);isNaN(this.model.width)&&0<this.model.width.indexOf("%")&&(t=this.model.isResponsive?this._convertToPixel(e.innerWidth(),t):this.model.width),isNaN(this.model.height)&&0<this.model.height.indexOf("%")&&(i=this.model.isResponsive?this._convertToPixel(e.innerHeight(),i):this.model.height),this.model.height&&this.element.css("height",i),this.model.width&&this.element.css("width",t)},_setHeightWidth:function(){this._updateHeightWidth=!0,this._setDimentions(),this._setPanesSize(),this._getPanesPercent()},_getParentObj:function(){return this.element.parent()},_checkProperties:function(){this.model.enableRTL&&this._rtl(this.model.enableRTL),this._prevSize=this.element[this.containerCss]()},_getExactInnerWidth:function(){var e=w.browserInfo(),e="msie"==e.name?8==e.version||9==e.version?y(this.element)[this.containerCss]():parseFloat(window.getComputedStyle(this.element[0])[this.containerCss]):parseFloat(window.getComputedStyle(this.element[0])[this.containerCss])-(parseFloat(this.element.css("border-"+this.displayCss+"-width"))+parseFloat(this.element.css("border-"+this.borderCss+"-width"))+parseFloat(this.element.css("padding-"+this.displayCss))+parseFloat(this.element.css("padding-"+this.borderCss)));return e},_rtl:function(e){e?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_setPanesSize:function(){var e,t,i,s=this.containerCss,n=0,a=0,r=this.element[s](),o=!1,l=this._bar=0<y(this.element).find(">.e-splitbar").length?parseFloat(y(this.element).find(">.e-splitbar").css(s)):this._bar,d=[],h=this.panes.length;if(1<h)for(t=0;t<h;t++)y(this.panes[t]).css(s,1==this._updateHeightWidth?this._initialPropertiesValue[t]:this.model.properties[t].paneSize),this._updateHeightWidth=!1,l=t==h-1?0:l,e=parseFloat(y(this.panes[t])[s]()),w.isNullOrUndefined(this.model.properties[t].maxSize)||(e=e>this.model.properties[t].maxSize?this.model.properties[t].maxSize:e),y(this.panes[t]).css(s,e),e<=0?(n++,d.push(t),a+=l):o?(y(this.panes[t]).css(s,0),a+=e+l,this.model.properties[t].paneSize=0):(r<(a+=e+l)&&(i=a-r+l,i+=(h-t-1)*l,y(this.panes[t]).css(s,i),o=!0,a+=i+l),this.model.properties[t].paneSize=e);else 1==h&&(y(this.panes[0]).css(s,"100%"),a=r);if(1<h&&a!=r){var c,u=y(this.panes[h-1]);if(r<a)c=a-r,u.css(s,c);else if(a<r)if(c=r-a,0<n)for(var p=parseFloat(c/n),m=0;m<n;m++)y(this.panes[d[m]]).css(s,p),this.model.properties[d[m]].paneSize=p;else{for(var g=h;0<g;g--)if(w.isNullOrUndefined(this.model.properties[g-1].maxSize)){u=y(this.panes[g-1]);break}u.css(s,parseFloat(u[s]()+c)),this.model.properties[h-1].paneSize=u[s]()}}1<h&&this._checkPaneSize()},_getUnit:function(e){return"px"==e?"px":"pt"==e?"pt":"%"==e.substr(1)?"%":"px"},_getNormalValue:function(e){var t,e="vertical"==this.model.orientation?(t=(e.y-this.element.offset().top)/this.element.outerHeight(),this.element.height()):(t=(e.x-this.element.offset().left)/this.element.outerWidth(),this.element.width());return 1<t&&(t=1),t<0&&(t=0),e=t*e,this._trimValue(e)},_trimValue:function(e){var t=e%1,e=e-t;return 1<=2*Math.abs(t)&&(e+=0<t?1:-1),parseFloat(e.toFixed(5))},_getSplitbarIndex:function(){return this.element.children(".e-splitbar:not(.e-shadowbar)").index(this.currentSplitBar)},_paneResize:function(){if(null==this.shadowBar)return!1;this.currentSplitBar=this.shadowBar.next();var e=this._getSplitbarIndex(),t=this.shadowBar.prev(),i=this.currentSplitBar.next(),s=e,n=e+1,a=this.shadowBar.offset()[this.displayCss];a-=this.currentSplitBar.offset()[this.displayCss],y(t).css(this.containerCss,a+y(t)[this.containerCss]()+"px"),y(i).css(this.containerCss,y(i)[this.containerCss]()-a+"px"),this.oldPaneSize[s]=y(t)[this.containerCss](),this.oldPaneSize[n]=y(i)[this.containerCss](),this.shadowBar.remove(),this._checkPaneSize();s={item:t,index:s,size:this.oldPaneSize[s]},n={item:i,index:n,size:this.oldPaneSize[n]};this._updateModelValue(s,n),this._trigger("resize",{prevPane:s,nextPane:n,splitbarIndex:e})},_checkPaneSize:function(){for(var e,t=0,i=this.panes.length,s=0;s<i;s++)t+=("width"==this.containerCss?y(this.panes[s]).outerWidth():y(this.panes[s]).outerHeight())+this._bar;if((t-=this._bar)!=(e=this._getExactInnerWidth())){var n=e-t,a=y(this.panes[i-1])[this.containerCss]();if(0==a){for(s=i-1;0<=s;s--)if(y(this.panes[s]).hasClass("expanded")&&!y(this.panes[s]).hasClass("collapsed")){a=y(this.panes[s])[this.containerCss](),y(this.panes[s]).css(this.containerCss,parseFloat(a+n));break}}else y(this.panes[i-1]).css(this.containerCss,parseFloat(a+n))}},_maxminDraggableRange:function(e){var t,i,s,n,a,r=this.shadowBar.prev();this.currentSplitBar=this.shadowBar.next(),n=this.currentSplitBar.next(),a=r[this.containerCss](),i=n[this.containerCss](),t=(s="left"==this.displayCss?this.currentSplitBar[0].offsetLeft:this.currentSplitBar[0].offsetTop)-a,r=i+s,a=(n=this._getSplitbarIndex())+1,i=this.model.properties[n].maxSize,s=this.model.properties[a].maxSize,i=null!=i?parseInt(i,10):null,s=null!=s?parseInt(s,10):null,this.model.properties[n].minSize=parseInt(this.model.properties[n].minSize,10),this.model.properties[a].minSize=parseInt(this.model.properties[a].minSize,10),n=this.model.properties[n].minSize,a=this.model.properties[a].minSize,this.shadowBar.removeClass("e-end-indicaton"),r-a<e?(this.resizedPosition=r-a,this.shadowBar.addClass("e-end-indicaton")):e<t+n&&(this.resizedPosition=t+n,this.shadowBar.addClass("e-end-indicaton")),null!=i?t+i<e&&(this.resizedPosition=t+i,this.shadowBar.addClass("e-end-indicaton")):null!=s&&e<r-s&&(this.resizedPosition=r-s,this.shadowBar.addClass("e-end-indicaton"))},_collapseArrowClick:function(e){if(null==this.shadowBar){var t=w.isNullOrUndefined(e.target)?y(e.currentTarget):y(e.target);this._inMovement=!0,this.currentSplitBar=t.parent();var i={},s=this.panes.length,n=this._getSplitbarIndex(),a=this.currentSplitBar.prev(),r=this.currentSplitBar.next(),o=n,l=n+1,d=a[this.containerCss](),e=r[this.containerCss](),h=this,c={item:a,index:o,size:d},u={item:r,index:l,size:e};if(this._raiseEvent("beforeExpandCollapse",c,u,n,"beforeCollapse"))return!1;if(r.hasClass("collapsed")){if(d<this.oldPaneSize[l])return t.addClass("e-end-indicaton"),this._inMovement=!1,y(document).on("mouseup",y.proxy(this._mouseUpOnArrow,this)),!1;a.removeClass("expanded"),r.removeClass("collapsed"),t.parent().addClass("e-resize").removeClass("e-icon-hide"),y(t.siblings()).not(".e-activebar").css("display","block"),this.model.properties[o].collapsible||t.css("display","none"),l!=s-1&&(s=r.next(),this.model.properties[l+1].collapsible||s.find(".e-expand").css("display","none"),s.find(".e-collapse").css("display","block"),s.next().hasClass("collapsed")||(s.addClass("e-resize").removeClass("e-icon-hide"),s.attr("aria-expanded",!0))),i[this.containerCss]=this.oldPaneSize[l],r.animate(i,this.model.enableAnimation?this.model.animationSpeed:0),i[this.containerCss]=d-this.oldPaneSize[l],a.animate(i,this.model.enableAnimation?this.model.animationSpeed:0,function(){h._raiseEvent("expandCollapse",c,u,n,"collapsed")})}else this.oldPaneSize[o]=d,a.addClass("collapsed"),r.addClass("expanded"),this.currentSplitBar.attr("aria-expanded",!1),t.parent().removeClass("e-resize").addClass("e-icon-hide"),w.isNullOrUndefined(this.model.expanderTemplate)&&t.css("display","none"),this.model.properties[l].collapsible||y(t.siblings()).not(".e-activebar").css("display","block"),0!=o&&((t=a.prev()).find(".e-expand").css("display","none"),!this.model.properties[o-1].collapsible&&y(a.prev().prev()[0]).hasClass("expanded")&&t.find(".e-collapse").css("display","block"),t.removeClass("e-resize").addClass("e-icon-hide")),i[this.containerCss]=0,a.animate(i,this.model.enableAnimation?this.model.animationSpeed:0),i[this.containerCss]=d+e,r.animate(i,this.model.enableAnimation?this.model.animationSpeed:0,function(){h._raiseEvent("expandCollapse",c,u,n,"collapsed")})}},_expandArrowClick:function(e){if(null==this.shadowBar){var t=w.isNullOrUndefined(e.target)?y(e.currentTarget):y(e.target);this._inMovement=!0,this.currentSplitBar=t.parent();var i={},s=this.panes.length,n=this._getSplitbarIndex(),a=this.currentSplitBar.prev(),r=this.currentSplitBar.next(),o=n,l=n+1,d=a[this.containerCss](),h=r[this.containerCss](),c=this,u={item:r,index:l,size:h},p={item:a,index:o,size:d};if(this._raiseEvent("beforeExpandCollapse",u,p,n,"beforeExpand"))return!1;if(a.hasClass("collapsed")){if(h<this.oldPaneSize[o])return t.addClass("e-end-indicaton"),this._inMovement=!1,y(document).on("mouseup",y.proxy(this._mouseUpOnArrow,this)),!1;a.removeClass("collapsed"),r.removeClass("expanded"),this.currentSplitBar.attr("aria-expanded",!0),t.parent().addClass("e-resize").removeClass("e-icon-hide"),y(t.siblings()).not(".e-activebar").css("display","block"),this.model.properties[l].collapsible||t.css("display","none"),0!=o&&(e=a.prev(),this.model.properties[n-1].collapsible||e.find(".e-collapse").css("display","none"),e.find(".e-expand").css("display","block"),e.prev().hasClass("collapsed")||e.addClass("e-resize").removeClass("e-icon-hide")),i[this.containerCss]=this.oldPaneSize[o],a.animate(i,this.model.enableAnimation?this.model.animationSpeed:0),i[this.containerCss]=h-this.oldPaneSize[o],r.animate(i,this.model.enableAnimation?this.model.animationSpeed:0,function(){c._raiseEvent("expandCollapse",u,p,n,"expanded")})}else this.oldPaneSize[l]=h,a.addClass("expanded"),r.addClass("collapsed"),t.parent().removeClass("e-resize").addClass("e-icon-hide"),w.isNullOrUndefined(this.model.expanderTemplate)&&t.css("display","none"),this.model.properties[o].collapsible||y(t.siblings()).not(".e-activebar").css("display","block"),l!=s-1&&((s=r.next()).find(".e-collapse").css("display","none"),!this.model.properties[l+1].collapsible&&y(r.next().next()[0]).hasClass("collapsed")&&s.find(".e-expand").css("display","block"),s.removeClass("e-resize").addClass("e-icon-hide"),s.attr("aria-expanded",!1)),i[this.containerCss]=d+h,a.animate(i,this.model.enableAnimation?this.model.animationSpeed:0),i[this.containerCss]=0,r.animate(i,this.model.enableAnimation?this.model.animationSpeed:0,function(){c._raiseEvent("expandCollapse",u,p,n,"expanded")})}},_raiseEvent:function(e,t,i,s,n){return"expandCollapse"==e&&(this._inMovement=!1,this._updateModelValue(t,i)),this._trigger(e,{collapsed:t,expanded:i,splitbarIndex:s,action:n})},_updateModelValue:function(e,t){this.model.properties[e.index].paneSize=e.item[this.containerCss](),this.model.properties[t.index].paneSize=t.item[this.containerCss](),this._getPanesPercent()},_mouseUpOnArrow:function(e){this.element.find(".e-end-indicaton").removeClass("e-end-indicaton"),y(document).off("mouseup",y.proxy(this._mouseUpOnArrow,this))},_keydownOnDivider:function(e){var t,i,s=e.keyCode;37==s||38==s||39==s||40==s?(e.preventDefault(),i=y(e.data.target),e.ctrlKey?null==this.shadowBar&&(this.currentSplitBar=i,t=this._getSplitbarIndex(),"vertical"==this.model.orientation?38==e.keyCode?this.collapse(t):40==e.keyCode&&this.expand(t):37==e.keyCode?this.collapse(t):39==e.keyCode&&this.expand(t)):i.hasClass("e-resize")&&(i={pageX:(i=(null!=this.shadowBar?this.shadowBar:i).offset()).left,pageY:i.top},y.extend(!0,e,i),("vertical"!=this.model.orientation||38!=e.keyCode&&40!=e.keyCode)&&("horizontal"!=this.model.orientation||37!=e.keyCode&&39!=e.keyCode)||(38==e.keyCode?e.pageY-=5:40==e.keyCode?e.pageY+=5:37==e.keyCode?e.pageX-=5:39==e.keyCode&&(e.pageX+=5),this._mouseMoveOnDivider(e)))):13==s?(e.preventDefault(),this._mouseUpOnDivider()):27==s&&(e.preventDefault(),null!=this.shadowBar&&this.shadowBar.remove(),this.shadowBar=null,this._mouseUpOnDivider(),this.element.children(".e-splitbar.e-hover").focusout())},_focusOnDivider:function(e){"focus"==e.type?y(e.target).hasClass("e-hover")||(y(e.target).addClass("e-hover"),this.model.allowKeyboardNavigation&&y(document).on("keydown",{target:e.target},y.proxy(this._keydownOnDivider,this))):(this.element.children(".e-splitbar.e-hover").removeClass("e-hover"),this._mouseUpOnDivider(),y(document).off("keydown",y.proxy(this._keydownOnDivider,this)))},_mouseDownOnDivider:function(e){var t;e.preventDefault(),(t=y(e.target).hasClass("e-activebar")?y(e.target.parentElement):!w.isNullOrUndefined(this.model.expanderTemplate)&&0<y(e.target).parents(".e-splitbar").length?y(e.target).parents(".e-splitbar"):y(e.target)).hasClass("e-splitbar")&&t.hasClass("e-resize")?(this._overlayElement=w.buildTag("div.e-pane-overlay"),t.hasClass("e-hover")||t.focus(),this.element.find(".e-pane").not(".e-splitter").append(this._overlayElement),y(document).on(w.eventType.mouseMove,{target:y(e.target).hasClass("e-activebar")?e.target.parentElement:e.target},y.proxy(this._mouseMoveOnDivider,this)),y(document).on(w.eventType.mouseUp,y.proxy(this._mouseUpOnDivider,this)),y(document).on("mouseleave",y.proxy(this._mouseUpOnDivider,this))):(t.hasClass("e-expand")||t.hasClass("e-collapse"))&&t.parent().focus()},_mouseMoveOnDivider:function(e){var t=e.data;e="touchmove"==e.type?e.originalEvent.changedTouches[0]:e,this._isMouseMove=!0;var i={x:e.pageX,y:e.pageY};this.resizedPosition=this._getNormalValue(i),null==this.shadowBar&&(t=y(t.target).hasClass("e-activebar")?y(t.target.parentElement):!w.isNullOrUndefined(this.model.expanderTemplate)&&0<y(e.target).parents(".e-splitbar").length?y(t.target).parents(".e-splitbar"):y(t.target),this.shadowBar=t.clone().addClass("e-shadowbar").removeClass("e-hover").removeClass("e-split-divider").insertBefore(t),this.shadowBar.children().remove()),this._maxminDraggableRange(this.resizedPosition),this.shadowBar.css(this.displayCss,this.resizedPosition)},_mouseUpOnDivider:function(e){this._paneResize(),w.isNullOrUndefined(this.model.expanderTemplate)||this._templateIconPositioning(!0),this.element.find(".e-pane").not(".e-splitter").find(".e-pane-overlay").remove(),y(document).off(w.eventType.mouseMove,y.proxy(this._mouseMoveOnDivider,this)),y(document).off(w.eventType.mouseUp,y.proxy(this._mouseUpOnDivider,this)),y(document).off("mouseleave",y.proxy(this._mouseUpOnDivider,this)),this.shadowBar=null},_windowResized:function(e){var t=this._getExactInnerWidth();if(this._prevSize==t)return!1;var i,s,n=this.panes.length,a=t-(n-1)*this._bar;for(this._prevSize=t,i=0;i<n;i++)s=this._convertToPixel(a,this._sizePercent[i]),y(this.panes[i]).css(this.containerCss,s+"px");for(i=0;i<this.oldPaneSize.length;i++)this.oldPaneSize[i]=this._convertToPixel(a,this.oldPanePercent[i]);0==y(this.panes[this.panes.length-1])[this.containerCss]()&&this._checkPaneSize()},_convertToPercent:function(e,t){return 100*t/e},_convertToPixel:function(e,t){return parseFloat(e*t/100)},_wireEvents:function(e){e&&y(window).on("resize",y.proxy(this._windowResized,this))},_unWireEvents:function(){y(window).off("resize",y.proxy(this._windowResized,this))}})}(jQuery,Syncfusion),window.ej=window.Syncfusion=window.Syncfusion||{},function(g,f,d){"use strict";function e(e){e=String(e);return 1===e.length&&(e="0"+e),e}f.version="17.4.0.39",f.consts={NamespaceJoin:"-"},f.TextAlign={Center:"center",Justify:"justify",Left:"left",Right:"right"},f.Orientation={Horizontal:"horizontal",Vertical:"vertical"},f.serverTimezoneOffset=0,f.parseDateInUTC=!1,f.persistStateVersion=null,f.locales=f.locales||[],Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(e,t){return e[t]!==d}),Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}),String.format=function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace(new RegExp("\\{"+t+"\\}","gm"),arguments[t+1]);return e=e.replace(/\{[0-9]\}/g,"")},jQuery.uaMatch=function(e){e=e.toLowerCase();e=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:e[1]||"",version:e[2]||"0"}},f.defineClass=function(e,t,i,s){if(!e||!i)return d;for(var n=e.split("."),a=window,r=0;r<n.length-1;r++)f.isNullOrUndefined(a[n[r]])&&(a[n[r]]={}),a=a[n[r]];return(s||f.isNullOrUndefined(a[n[r]]))&&(t="function"==typeof t?t:function(){},a[n[r]]=t,a[n[r]].prototype=i),a[n[r]]},f.util={getNameSpace:function(e){e=e.toLowerCase().split(".");return"ej"===e[0]&&(e[0]="e"),e.join(f.consts.NamespaceJoin)},getObject:function(e,t){if(!t||!e)return d;"string"!=typeof e&&(e=JSON.stringify(e));for(var i=t,s=e.split("."),n=0;n<s.length&&!f.util.isNullOrUndefined(i);n++)i=i[s[n]];return i},createObject:function(e,t,i){for(var s,n=e.split("."),i=i||window,a=i,r=n.length,o=0;o<r;o++)s=n[o],o+1==r?a[s]=t:f.isNullOrUndefined(a[s])&&(a[s]={}),a=a[s];return i},isNullOrUndefined:function(e){return e===d||null===e},exportAll:function(e,t){var i=[],s=[],e={action:e,method:"post","data-ajax":"false"},n=f.buildTag("form","",null,e);if(0!=t.length){for(var a=0;a<t.length;a++){var r=a,o=g("#"+t[a]),l=g("#"+t[a]).data().ejWidgets,d=g(o).data(l[0]);s.push({id:d._id,locale:d.model.locale}),f.isNullOrUndefined(d)||(o=d._getExportModel(d.model),i.push({name:l[0],type:"hidden",value:d.stringify(o)}),r=f.buildTag("input","",null,i[r]),n.append(r))}g("body").append(n),n.submit(),setTimeout(function(){var e;if(s.length)for(var t=0;t<s.length;t++)f.isNullOrUndefined(s[t].locale)||(e=g("#"+s[t].id).data(),l=e.ejWidgets,g("#"+s[t].id).data(l[0]).model.locale=s[t].locale)},0),n.remove()}return!0},print:function(e,t){var i=f.buildTag("div"),e=e.clone();i.append(e),(t=t||window.open("","print","height=452,width=1024,tabbar=no")).document.write("<!DOCTYPE html>");var s,e=g("head").find("link").add("style");"msie"===f.browserInfo().name?(s="",e.each(function(e,t){"LINK"==t.tagName&&g(t).attr("href",t.href),s+=t.outerHTML}),t.document.write("<html><head></head><body>"+s+i[0].innerHTML+"</body></html>")):(s="",t.document.write("<html><head>"),e.each(function(e,t){"LINK"==t.tagName&&g(t).attr("href",t.href),s+=t.outerHTML}),t.document.writeln(s+"</head><body>"),t.document.writeln(i[0].innerHTML+"</body></html>")),t.document.close(),t.focus(),setTimeout(function(){f.isNullOrUndefined(t.window)||(t.print(),setTimeout(function(){t.close()},1e3))},1e3)},ieClearRemover:function(e){var t=g(e).height();e.style.paddingTop=parseFloat(t/2)+"px",e.style.paddingBottom=parseFloat(t/2)+"px",e.style.height="1px",e.style.lineHeight="1px"},sendAjaxRequest:function(e){g.ajax({type:e.type,cache:e.cache,url:e.url,dataType:e.dataType,data:e.data,contentType:e.contentType,async:e.async,success:e.successHandler,error:e.errorHandler,beforeSend:e.beforeSendHandler,complete:e.completeHandler})},buildTag:function(e,t,i,s){var n=/^[a-z]*[0-9a-z]+/gi.exec(e)[0],a=(a=/#([_a-z0-9-&@\/\\,+()$~%:*?<>{}\[\]]+\S)/gi.exec(e))?a[a.length-1].replace(/[&@\/\\,+()$~%.:*?<>{}\[\]]/g,""):d,e=(e=/\.([a-z]+[-_0-9a-z ]+)/gi.exec(e))?e[e.length-1]:d;return g(document.createElement(n)).attr(a?{id:a}:{}).addClass(e||"").css(i||{}).attr(s||{}).html(t||"")},_preventDefaultException:function(e,t){if(e)for(var i in t)if(t[i].test(e[i]))return!0;return!1},getMaxZindex:function(){var e=1;return(e=Math.max.apply(null,g.map(g("body *"),function(e,t){if("absolute"==g(e).css("position")||"fixed"==g(e).css("position"))return parseInt(g(e).css("z-index"))||1})))!=d&&null!=e||(e=1),e},blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},getDimension:function(e,t){var i,s,n,a=g(e).parents().andSelf().filter(":hidden");return a&&(s={visibility:"hidden",display:"block"},n=[],a.each(function(){var e,t={};for(e in s)t[e]=this.style[e],this.style[e]=s[e];n.push(t)}),i=/(outer)/g.test(t)?g(e)[t](!0):g(e)[t](),a.each(function(e){var t,i=n[e];for(t in s)this.style[t]=i[t]})),i},transitionEndEvent:function(){return{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"}[f.userAgent()]},animationEndEvent:function(){return{"":"animationend",webkit:"webkitAnimationEnd",Moz:"animationend",O:"webkitAnimationEnd",ms:"animationend"}[f.userAgent()]},startEvent:function(){return f.isTouchDevice()||g.support.hasPointer?"touchstart":"mousedown"},endEvent:function(){return f.isTouchDevice()||g.support.hasPointer?"touchend":"mouseup"},moveEvent:function(){return f.isTouchDevice()||g.support.hasPointer?g.support.hasPointer&&!f.isMobile()?"ejtouchmove":"touchmove":"mousemove"},cancelEvent:function(){return f.isTouchDevice()||g.support.hasPointer?"touchcancel":"mousecancel"},tapEvent:function(){return f.isTouchDevice()||g.support.hasPointer?"tap":"click"},tapHoldEvent:function(){return f.isTouchDevice()||g.support.hasPointer?"taphold":"click"},isDevice:function(){return f.getBooleanVal(g("head"),"data-ej-forceset",!1)?f.getBooleanVal(g("head"),"data-ej-device",this._device()):this._device()},isPortrait:function(){var e=document.documentElement;return e&&e.clientWidth/e.clientHeight<1.1},isLowerResolution:function(){return window.innerWidth<=640&&f.isPortrait()&&f.isDevice()||window.innerWidth<=800&&!f.isDevice()||window.innerWidth<=800&&!f.isPortrait()&&f.isWindows()&&f.isDevice()||f.isMobile()},isIOSWebView:function(){return/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent)},isAndroidWebView:function(){return!("undefined"==typeof Android)},isWindowsWebView:function(){return-1!=location.href.indexOf("x-wmapp")},_device:function(){return/Android|BlackBerry|iPhone|iPad|iPod|IEMobile|kindle|windows\sce|palm|smartphone|iemobile|mobile|pad|xoom|sch-i800|playbook/i.test(navigator.userAgent.toLowerCase())},isMobile:function(){return/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())&&/mobile/i.test(navigator.userAgent.toLowerCase())||!0===f.getBooleanVal(g("head"),"data-ej-mobile",!1)},isTablet:function(){return/ipad|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())||!0===f.getBooleanVal(g("head"),"data-ej-tablet",!1)||!f.isMobile()&&f.isDevice()},isTouchDevice:function(){return("ontouchstart"in window||window.navigator.msPointerEnabled&&f.isMobile())&&this.isDevice()},getClearString:function(e){return g.trim(e.replace(/\s+/g," ").replace(/(\r\n|\n|\r)/gm,"").replace(new RegExp(">[\n\t ]+<","g"),"><"))},getBooleanVal:function(e,t,i){t=g(e).attr(t);return null!=t?"true"==t.toLowerCase():i},_getSkewClass:function(e,t,i){var s=e.width(),n=e.height(),a=e.offset().left,r=e.offset().left+s,o=e.offset().top,e=e.offset().top+n,s=.3*s,n=.3*n;return t<a+s&&i<o+n?"e-m-skew-topleft":r-s<t&&i<o+n?"e-m-skew-topright":r-s<t&&e-n<i?"e-m-skew-bottomright":t<a+s&&e-n<i?"e-m-skew-bottomleft":a+s<t&&i<o+n&&t<r-s?"e-m-skew-top":t<a+s?"e-m-skew-left":r-s<t?"e-m-skew-right":e-n<i?"e-m-skew-bottom":"e-m-skew-center"},_removeSkewClass:function(e){g(e).removeClass("e-m-skew-top e-m-skew-bottom e-m-skew-left e-m-skew-right e-m-skew-topleft e-m-skew-topright e-m-skew-bottomleft e-m-skew-bottomright e-m-skew-center e-skew-top e-skew-bottom e-skew-left e-skew-right e-skew-topleft e-skew-topright e-skew-bottomleft e-skew-bottomright e-skew-center")},_getObjectKeys:function(e){var t,i=[];if(e=Object.prototype.toString.call(e)===Object.prototype.toString()?e:{},!Object.keys){for(t in e)e.hasOwnProperty(t)&&i.push(t);return i}if(Object.keys)return Object.keys(e)},_touchStartPoints:function(e,t){e&&(e=e.touches?e.touches[0]:e,t._distX=0,t._distY=0,t._moved=!1,t._pointX=e.pageX,t._pointY=e.pageY)},_isTouchMoved:function(e,t){if(e){var i=e.touches?e.touches[0]:e,s=i.pageX-t._pointX,e=i.pageY-t._pointY;Date.now();return t._pointX=i.pageX,t._pointY=i.pageY,t._distX+=s,t._distY+=e,e=Math.abs(t._distX),t=Math.abs(t._distY),!(e<5&&t<5)}},listenEvents:function(e,t,i,s,n,a){for(var r=0;r<e.length;r++)f.listenTouchEvent(e[r],t[r],i[r],s,n,a)},listenTouchEvent:function(e,t,i,s,n,a){for(var r=s?"removeEventListener":"addEventListener",o=s?"off":"on",l=g(e),d=0;d<l.length;d++){var h=l[d];switch(t){case"touchstart":f._bindEvent(h,r,t,i,"mousedown","MSPointerDown","pointerdown",a);break;case"touchmove":f._bindEvent(h,r,t,i,"mousemove","MSPointerMove","pointermove",a);break;case"touchend":f._bindEvent(h,r,t,i,"mouseup","MSPointerUp","pointerup",a);break;case"touchcancel":f._bindEvent(h,r,t,i,"mousecancel","MSPointerCancel","pointercancel",a);break;case"tap":case"taphold":case"ejtouchmove":case"click":g(h)[o](t,i);break;default:"msie"==f.browserInfo().name&&f.browserInfo().version<9?n._on(g(h),t,i):h[r](t,i,!0)}}},_bindEvent:function(e,t,i,s,n,a,r,o){g.support.hasPointer?e[t](window.navigator.pointerEnabled?r:a,s,!0):e[t](i,s,!0)},_browser:function(){return/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":""},styles:document.createElement("div").style,userAgent:function(){for(var e="webkitT,t,MozT,msT,OT".split(","),t=0,i=e.length;t<i;t++)if(e[t]+"ransform"in f.styles)return e[t].substr(0,e[t].length-1);return!1},addPrefix:function(e){return""===f.userAgent()?e:(e=e.charAt(0).toUpperCase()+e.substr(1),f.userAgent()+e)},destroyWidgets:function(e){g(e).find("[data-role *= ejm]").each(function(e,t){var i=g(t),t=i.data("ejWidgets");t&&i[t]("destroy")})},getAttrVal:function(e,t,i){t=g(e).attr(t);return null!=t?t:i},getOffset:function(e){var t={},e=e.offset()||{left:0,top:0};return g.extend(!0,t,e),"static"!=g("body").css("position")&&(e=g("body").offset(),t.left-=e.left,t.top-=e.top),t},getZindexPartial:function(e,t){if(!f.isNullOrUndefined(e)&&0<e.length){var i=e.parents(),s=g("body").children();!f.isNullOrUndefined(e)&&0<e.length&&s.splice(s.index(t),1),g(s).each(function(e,t){i.push(t)});var n=Math.max.apply(n,g.map(i,function(e,t){if("static"!=g(e).css("position"))return parseInt(g(e).css("z-index"))||1}));return!n||n<1e4?n=1e4:n+=1,n}},isValidAttr:function(e,t){if(void 0!==(e=g(e)[0])[t])return!0;var i=!1;return g.each(e,function(e){if(e.toLowerCase()==t.toLowerCase())return!(i=!0)}),i}},g.extend(f,f.util),f.widgetBase={droppables:{default:[]},resizables:{default:[]},_renderEjTemplate:function(e,t,i,s,n){var a=null;if(("object"==typeof e||e.startsWith("#")||e.startsWith("."))&&(a=g(e).attr("type")),a){if(a=a.toLowerCase(),f.template[a])return f.template[a](this,e,t,i,s)}else if(!f.isNullOrUndefined(n))return f.template["text/x-"+n](this,e,t,i,s);return f.template.render(this,e,t,i,s)},destroy:function(){if(!this._trigger("destroy")){this.model.enablePersistence&&(this.persistState(),g(window).off("unload",this._persistHandler));try{this._destroy()}catch(e){}for(var e=this.element.data("ejWidgets")||[],t=0;t<e.length;t++)e[t]==this.pluginName&&e.splice(t,1);for(e.length||this.element.removeData("ejWidgets");this._events;){var i=this._events.pop(),s=[];if(!i)break;for(t=0;t<i[1].length;t++)g.isPlainObject(i[1][t])||s.push(i[1][t]);g.fn.off.apply(i[0],s)}this._events=null,this.element.removeClass(f.util.getNameSpace(this.sfType)).removeClass("e-js").removeData(this.pluginName),this.element=null,this.model=null}},_on:function(e){this._events||(this._events=[]);for(var t=[].splice.call(arguments,1,arguments.length-1),i={},s=t.length;i&&"function"!=typeof i;)i=t[--s];return t[s]=f.proxy(t[s],this),this._events.push([e,t,i,t[s]]),g.fn.on.apply(e,t),this},_off:function(e,t,i,s){var n,a=this._events;if(!a||!a.length)return this;"function"==typeof i&&(n=s,s=i,i=n);for(var r=t.match(/\S+/g)||[""],o=0;o<a.length;o++){var l=a[o];if(l[0].length&&(!s||l[2]===s)&&(l[1][0]===t||r[0])&&(!i||l[1][1]===i)&&-1<g.inArray(e[0],l[0])){g.fn.off.apply(e,s?[t,i,l[3]]:[t,i]),a.splice(o,1);break}}return this},_trigger:function(e,t){var i,s=null,n={};if(g.extend(n,t),e in this.model&&(s=this.model[e]),s&&("string"==typeof s&&(s=f.util.getObject(s,window)),g.isFunction(s)&&(i=f.event(e,this.model,t),a=s.call(this,i),t&&g.extend(t,i),i.cancel||!f.isNullOrUndefined(a))))return!1===a||i.cancel;var a=Boolean(t);return(t=t||{}).originalEventType=e,t.type=this.pluginName+e,i=g.Event(t.type,f.event(t.type,this.model,t)),this.element&&this.element.trigger(i),a&&g.extend(t,i),f.isOnWebForms&&0==i.cancel&&this.model.serverEvents&&this.model.serverEvents.length&&f.raiseWebFormsServerEvents(e,t,n),i.cancel},setModel:function(e,t){if(!this._trigger("modelChange",{changes:e})){for(var i in e){if(!t){if(this.model[i]===e[i]){delete e[i];continue}if(g.isPlainObject(e[i])&&(a(this.model[i],e[i]),g.isEmptyObject(e[i]))){delete e[i];continue}}if(this.dataTypes){var s=this._isValidModelValue(i,this.dataTypes,e);if(!0!==s)throw"setModel - Invalid input for property :"+i+" - "+s}this.model.notifyOnEachPropertyChanges&&this.model[i]!==e[i]&&(s={oldValue:this.model[i],newValue:e[i]},e[i]=this._trigger(i+"Change",s)?this.model[i]:s.newValue)}var n;g.isEmptyObject(e)||(this._setFirst?((n=e.dataSource)&&delete e.dataSource,g.extend(!0,this.model,e),n&&(this.model.dataSource=n instanceof Array?n.slice():n,e.dataSource=this.model.dataSource),this._setModel&&this._setModel(e)):this._setModel&&!1===this._setModel(e)||g.extend(!0,this.model,e),"enablePersistence"in e&&this._setState(e.enablePersistence))}},option:function(e,t,i){if(!e)return this.model;if(g.isPlainObject(e))return this.setModel(e,i);if("string"==typeof e){e=e.replace(/^model\./,"");var s=f.getObject(e,this.model);if(t===d&&!i)return s;if("enablePersistence"===e)return this._setState(t);if(i&&t===f.extensions.modelGUID)return this._setModel(f.createObject(e,f.getObject(e,this.model),{}));if(i||f.getObject(e,this.model)!==t)return this.setModel(f.createObject(e,t,{}),i)}return d},_isValidModelValue:function(e,t,i){var s,n,a=t[e],r=i[e];if(!a)return!0;if("string"==typeof a){if("enum"==a&&(i[e]=r&&r.toString().toLowerCase(),a="string"),"array"===a){if("[object Array]"===Object.prototype.toString.call(r))return!0}else{if("data"===a)return!0;if("parent"===a)return!0;if(typeof r===a)return!0}return"Expected type - "+a}if(r instanceof Array){for(var o=0;o<r.length;o++)if(!0!==(s=this._isValidModelValue(e,t,r[o])))return" ["+o+"] - "+s;return!0}for(n in r)if(!0!==(s=this._isValidModelValue(n,a,r)))return n+" : "+s;return!0},_returnFn:function(e,t){-1!=t.indexOf(".")?this._returnFn(e[t.split(".")[0]],t.split(".").slice(1).join(".")):e[t]=e[t].call(e.propName)},_removeCircularRef:function(e){var a=[];return function e(t,i,s){if("object"==typeof t)if(Array.prototype.indexOf||(Array.prototype.indexOf=function(e){return jQuery.inArray(e,this)}),0<=a.indexOf(t))delete s[i];else{for(var n in a.push(t),t)t.hasOwnProperty(n)&&e(t[n],n,t);a.pop()}}(e,"obj",null),e},stringify:function(e,t){for(var i=this.observables,s=0;s<i.length;s++){var n=f.getObject(i[s],e);f.isNullOrUndefined(n)||"function"!=typeof n||this._returnFn(e,i[s])}return t&&(e=this._removeCircularRef(e)),JSON.stringify(e)},_setState:function(e){!0===e?(this._persistHandler=f.proxy(this.persistState,this),g(window).on("unload",this._persistHandler)):(this.deleteState(),g(window).off("unload",this._persistHandler))},_removeProp:function(e,t){f.isNullOrUndefined(e)||(-1!=t.indexOf(".")?this._removeProp(e[t.split(".")[0]],t.split(".").slice(1).join(".")):delete e[t])},persistState:function(){var e;if(this._ignoreOnPersist){e=v({},this.model);for(var t=0;t<this._ignoreOnPersist.length;t++)this._removeProp(e,this._ignoreOnPersist[t]);e.ignoreOnPersist=this._ignoreOnPersist}else if(this._addToPersist){e={};for(t=0;t<this._addToPersist.length;t++)f.createObject(this._addToPersist[t],f.getObject(this._addToPersist[t],this.model),e);e.addToPersist=this._addToPersist}else e=v({},this.model);this._persistState&&(e.customPersists={},this._persistState(e.customPersists)),window.localStorage?(f.isNullOrUndefined(f.persistStateVersion)||null!=window.localStorage.getItem("persistKey")||window.localStorage.setItem("persistKey",f.persistStateVersion),window.localStorage.setItem("$ej$"+this.pluginName+this._id,JSON.stringify(e))):document.cookie&&(f.isNullOrUndefined(f.persistStateVersion)||null!=f.cookie.get("persistKey")||f.cookie.set("persistKey",f.persistStateVersion),f.cookie.set("$ej$"+this.pluginName+this._id,e))},deleteState:function(){window.localStorage?window.localStorage.removeItem("$ej$"+this.pluginName+this._id):document.cookie&&f.cookie.set("$ej$"+this.pluginName+this._id,void 0,new Date)},restoreState:function(e){var t,i=null;if(window.localStorage?i=window.localStorage.getItem("$ej$"+this.pluginName+this._id):document.cookie&&(i=f.cookie.get("$ej$"+this.pluginName+this._id)),i&&(t=JSON.parse(i),this._restoreState&&(this._restoreState(t.customPersists),delete t.customPersists),!1===f.isNullOrUndefined(t)&&(f.isNullOrUndefined(t.ignoreOnPersist)?f.isNullOrUndefined(t.addToPersist)||(this._addToPersist=t.addToPersist,delete t.addToPersist):(this._ignoreOnPersist=t.ignoreOnPersist,delete t.ignoreOnPersist))),f.isNullOrUndefined(t)||f.isNullOrUndefined(this._ignoreOnPersist))this.model=g.extend(!0,this.model,t);else{for(var s=0,n=this._ignoreOnPersist.length;s<n;s++)-1!==this._ignoreOnPersist[s].indexOf(".")?f.createObject(this._ignoreOnPersist[s],f.getObject(this._ignoreOnPersist[s],this.model),t):t[this._ignoreOnPersist[s]]=this.model[this._ignoreOnPersist[s]];this.model=t}!e&&i&&this._setModel&&this._setModel(this.model)},ignoreOnPersist:function(e){var t=[];if("object"==typeof e?t=e:"string"==typeof e&&t.push(e),this._addToPersist===d){this._ignoreOnPersist=this._ignoreOnPersist||[];for(var i=0;i<t.length;i++)this._ignoreOnPersist.push(t[i])}else for(i=0;i<t.length;i++){var s=this._addToPersist.indexOf(t[i]);this._addToPersist.splice(s,1)}},addToPersist:function(e){var t=[];if("object"==typeof e?t=e:"string"==typeof e&&t.push(e),this._addToPersist===d){this._ignoreOnPersist=this._ignoreOnPersist||[];for(var i=0;i<t.length;i++){var s=this._ignoreOnPersist.indexOf(t[i]);this._ignoreOnPersist.splice(s,1)}}else for(i=0;i<t.length;i++)-1===g.inArray(t[i],this._addToPersist)&&this._addToPersist.push(t[i])},formatting:function(e,t,i){e=e.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),i=f.preferredCulture(i)?i:"en-US";var s=e,n=e.split("{0:"),a=e.split("}"),n=n[0],a=a[1];if("string"==typeof t&&g.isNumeric(t)&&(t=Number(t)),-1!=e.indexOf("{0:")){e=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(e);return null!=e&&null!=t?t=null!=n&&null!=a?n+f.format(t,e[2],i)+a:f.format(t,e[2],i):null!=t||(t=""),t}if(!s.startsWith("{")||s.startsWith("{0:"))return null!=this.data&&null==this.data.Value?(g.each(this.data,function(e,t){s=s.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),s):this.data.Value;for(var r=s.split(""),t=(t=(t||"")+"").split(""),o=/[0aA\*CN<>\?]/gm,l=0,d=0;l<r.length;l++)r[l]=o.test(r[l])?"{"+d+++"}":r[l];return String.format.apply(String,[r.join("")].concat(t)).replace("{","").replace("}","")}},f.WidgetBase=function(){};var s,n,a=function(e,t){if(e instanceof Array)for(var i=0,s=e.length;i<s;i++)(n=e[i])===t[n]&&delete t[n],g.isPlainObject(t[n])&&g.isPlainObject(n)&&a(n,t[n]);else for(var n in e)e[n]===t[n]&&delete t[n],g.isPlainObject(t[n])&&g.isPlainObject(e[n])&&a(e[n],t[n])};f.widget=function(c,u,p){if("object"!=typeof c){var m=p._rootCSS||f.getNameSpace(u);p=f.defineClass(u,function(e,t){if(this.sfType=u,this.pluginName=c,this.instance=b,f.isNullOrUndefined(this._setFirst)&&(this._setFirst=!0),this["ob.values"]={},g.extend(this,f.widgetBase),this.dataTypes)for(var i in t){var s=this._isValidModelValue(i,this.dataTypes,t);if(!0!==s)throw"setModel - Invalid input for property :"+i+" - "+s}var n=e.data("ejWidgets")||[];n.push(c),e.data("ejWidgets",n);for(var a,r=0;f.widget.observables&&this.observables&&r<this.observables.length;r++){var o=f.getObject(this.observables[r],t);o&&f.createObject(this.observables[r],f.widget.observables.register(o,this.observables[r],this,e),t)}if(this.element=e.jquery?e:g(e),this.model=v(!0,{},p.prototype.defaults,t),this.model.keyConfigs=v(this.keyConfigs),this.element.addClass(m+" e-js").data(c,this),this._id=e[0].id,this.model.enablePersistence){if(window.localStorage&&!f.isNullOrUndefined(f.persistStateVersion)&&window.localStorage.getItem("persistKey")!=f.persistStateVersion)for(var r in window.localStorage)-1!=r.indexOf("$ej$")&&(window.localStorage.removeItem(r),window.localStorage.setItem("persistKey",f.persistStateVersion));else if(document.cookie&&!f.isNullOrUndefined(f.persistStateVersion)&&f.cookie.get("persistKey")!=f.persistStateVersion)for(a in document.cookie.split(/; */))-1!=a.indexOf("$ej$")&&(f.cookie.set(a.split("=")[0],void 0,new Date),f.cookie.set("persistKey",f.persistStateVersion));this._persistHandler=f.proxy(this.persistState,this),g(window).on("unload",this._persistHandler),this.restoreState(!0)}if(this._init(t),"object"==typeof this.model.keyConfigs&&!(this.model.keyConfigs instanceof Array)){var l,d,h=!1;for(l in this.model.keyConfigs.focus&&this.element.attr("accesskey",this.model.keyConfigs.focus),this.model.keyConfigs)if("focus"!==l){h=!0;break}h&&this._keyPressed&&(d=e,n="keydown",this.keySettings&&(d=this.keySettings.getElement&&this.keySettings.getElement()||d,n=this.keySettings.event||n),this._on(d,n,function(e){var t,i;this.model.keyConfigs&&(t=_.getActionFromCode(this.model.keyConfigs,e.which,e.ctrlKey,e.shiftKey,e.altKey),i={code:e.which,ctrl:e.ctrlKey,alt:e.altKey,shift:e.shiftKey},t&&!1===this._keyPressed(t,e.target,i,e)&&e.preventDefault())}))}this._trigger("create")},p),g.fn[c]=function(e){for(var t=e,i=0;i<this.length;i++){var s=g(this[i]),n=s.data(c),a=n&&s.hasClass(m),r=null;if(0<this.length&&g.isPlainObject(t)&&(e=f.copyObject({},t)),a){if(e)if(a=[].slice.call(arguments,1),0<this.length&&a[0]&&"option"===t&&g.isPlainObject(a[0])&&(a[0]=f.copyObject({},a[0])),g.isPlainObject(e))n.setModel(e);else if(0!==e.indexOf("_")&&!f.isNullOrUndefined(r=f.getObject(e,n))||0===e.indexOf("model."))if(r&&g.isFunction(r)){a=r.apply(n,a);if(a!==d)return a}else{if(1==arguments.length)return r;n.option(e,arguments[1])}else l(u+": function/property - "+e+" does not exist")}else!0!==p.prototype._requiresID||g(this[i]).attr("id")||s.attr("id",o("ejControl_")),e&&"object"!=typeof e?l(c+": methods/properties can be accessed only after plugin creation"):(p.prototype.defaults&&!f.isNullOrUndefined(f.setCulture)&&"locale"in p.prototype.defaults&&"ejChart"!=c&&(!e||"locale"in e?f.isNullOrUndefined(e)&&((e={}).locale=f.setCulture().name):e.locale=f.setCulture().name),new p(s,e))}return-1!=c.indexOf("ejm")&&f.widget.registerInstance(s,c,u,p.prototype),this},f.widget.register(c,u,p.prototype),f.loadLocale(c)}else for(var e in p=u,c){var t=c[e];t instanceof Array&&(p._rootCSS=t[1],t=t[0]),f.widget(e,t,p),c[e]instanceof Array&&(p._rootCSS="")}},f.loadLocale=function(e){for(var t=f.locales,i=0,s=t.length;i<s;i++)g.fn["Locale_"+t[i]](e)},g.extend(f.widget,{register:function(e,t,i){f.isNullOrUndefined(s[e])||l("ej.widget : The widget named "+e+" is trying to register twice."),s[e]={name:e,className:t,proto:i},f.widget.extensions&&f.widget.extensions.registerWidget(e)},registerInstance:function(e,t,i,s){n.push({element:e,pluginName:t,className:i,proto:s})},registeredWidgets:s={},registeredInstances:n=[]}),f.widget.destroyAll=function(e){if(e&&e.length)for(var t=0;t<e.length;t++){var i=e.eq(t).data(),s=i.ejWidgets;if(s&&s.length)for(var n=0;n<s.length;n++)i[s[n]]&&i[s[n]].destroy&&i[s[n]].destroy()}},f.cookie={get:function(e){e=RegExp(e+"=([^;]+)").exec(document.cookie);return e&&1<e.length?e[1]:d},set:function(e,t,i){"object"==typeof t&&(t=JSON.stringify(t)),t=escape(t)+(null==i?"":"; expires="+i.toUTCString()),document.cookie=e+"="+t}};var _={getActionFromCode:function(e,t,i,s,n){for(var a in i=i||!1,s=s||!1,n=n||!1,e)if("focus"!==a)for(var r=_.getKeyObject(e[a]),o=0;o<r.length;o++)if(t===r[o].code&&i==r[o].isCtrl&&s==r[o].isShift&&n==r[o].isAlt)return a;return null},getKeyObject:function(e){for(var t={isCtrl:!1,isShift:!1,isAlt:!1},i=g.extend(!0,{},t),s=e.split(","),n=[],a=0;a<s.length;a++){var r=null;if(-1!=s[a].indexOf("+"))for(var o=s[a].split("+"),l=0;l<o.length;l++)r=_.getResult(g.trim(o[l]),t);else r=_.getResult(g.trim(s[a]),g.extend(!0,{},i));n.push(r)}return n},getResult:function(e,t){return"ctrl"===e?t.isCtrl=!0:"shift"===e?t.isShift=!0:"alt"===e?t.isAlt=!0:t.code=parseInt(e,10),t}};f.getScrollableParents=function(e){return g(e).parentsUntil("html").filter(function(){return"visible"!=g(this).css("overflow")}).add(g(window))},f.browserInfo=function(){var e,t={},i=[],s={opera:/(opera|opr)(?:.*version|)[ \/]([\w.]+)/i,edge:/(edge)(?:.*version|)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,msie:/(msie|trident) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(e in s)if(s.hasOwnProperty(e)&&(i=navigator.userAgent.match(s[e]))){if(t.name="opr"==i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.version=i[2],t.culture={},t.culture.name=t.culture.language=navigator.language||navigator.userLanguage,void 0!==f.globalize){for(var n=f.preferredCulture().name,a=navigator.language||navigator.userLanguage?f.preferredCulture(navigator.language||navigator.userLanguage):f.preferredCulture("en-US"),r=0;navigator.languages&&r<navigator.languages.length&&(a=f.preferredCulture(navigator.languages[r])).language!=navigator.languages[r];r++);f.preferredCulture(n),g.extend(!0,t.culture,a)}navigator.userAgent.match(/Trident\/7\./)&&(t.name="msie");break}return t.isMSPointerEnabled="msie"==t.name&&9<t.version&&window.navigator.msPointerEnabled,t.pointerEnabled=window.navigator.pointerEnabled,t},f.eventType={mouseDown:"mousedown touchstart",mouseMove:"mousemove touchmove",mouseUp:"mouseup touchend",mouseLeave:"mouseleave touchcancel",click:"click touchend"},f.event=function(e,t,i){return g.extend(i||{},{type:e,model:t,cancel:!1})},f.proxy=function(t,i,s){return t&&"function"==typeof t?"on"in t&&i?s?t.on(i,s):t.on(i):function(){var e=s?[s]:[];return e.push.apply(e,arguments),t.apply(i||this,e)}:null},f.hasStyle=function(e){var t=document.documentElement.style;if(e in t)return!0;var i=["ms","Moz","Webkit","O","Khtml"];e=e[0].toUpperCase()+e.slice(1);for(var s=0;s<i.length;s++)if(i[s]+e in t)return!0;return!1},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e};var v=f.copyObject=function(e,t){var i,s,n=2;"boolean"!=typeof e&&(n=1);var a=[].slice.call(arguments,n);1===n&&(t=e,e=d);for(var r=0;r<a.length;r++)for(var o in a[r])if(i=t[o],(s=a[r][o])!==d&&i!==s&&a[r]!==s&&t!==s)if(s instanceof Array)if(0===r&&e)if("dataSource"===o||"data"===o||"predicates"===o)t[o]=s.slice();else{t[o]=new Array;for(var l=0;l<s.length;l++)v(!0,t[o],s)}else t[o]=s.slice();else f.isPlainObject(s)?(t[o]=i||{},e?v(e,t[o],s):v(t[o],s)):t[o]=s;return t},b=function(){return this},t=0,o=function(e){return e+t++};f.template={},f.template.render=f.template["text/x-jsrender"]=function(e,t,i,s,n){"#"!==t.slice(0,1)&&(t=["<div>",t,"</div>"].join(""));s={prop:n,index:s};return g(t).render(i,s)};var r=!(f.isPlainObject=function(e){if(!e)return!1;if(f.DataManager!==d&&e instanceof f.DataManager)return!1;if("object"!=typeof e||e.nodeType||jQuery.isWindow(e))return!1;try{if(e.constructor&&!e.constructor.prototype.hasOwnProperty("isPrototypeOf"))return!1}catch(e){return!1}var t,i=f.support.isOwnLast;for(t in e)if(i)break;return t===d||e.hasOwnProperty(t)});f.util.valueFunction=function(s){return function(e,t){var i=f.getObject(s,this.model);if(!1===r&&(r=f.getObject("observables.getValue",f.widget)),e===d)return f.isNullOrUndefined(r)?"function"==typeof i?i.call(this):i:r(i,t);"function"==typeof i?(this["ob.values"][s]=e,i.call(this,e)):f.createObject(s,e,this.model)}},f.util.getVal=function(e){return"function"==typeof e?e():e},f.support={isOwnLast:function(){function e(){this.a=1}for(var t in e.prototype.b=1,new e)return"b"===t}(),outerHTML:document.createElement("div").outerHTML!==d};var l=f.throwError=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}};f.getRandomValue=function(e,t){if(e===d||t===d)return f.throwError("Min and Max values are required for generating a random number");var i,e="crypto"in window&&"getRandomValues"in crypto?(i=new Uint16Array(1),window.crypto.getRandomValues(i),i[0]%(t-e)+e):Math.random()*(t-e)+e;return 0|e},f.extensions={},f.extensions.modelGUID="{0B1051BA-1CCB-42C2-A3B5-635389B92A50}"}(window.jQuery,window.Syncfusion),function(){$.fn.addEleAttrs=function(e){var i=$(this);$.each(e,function(e,t){t&&t.specified&&i.attr(t.name,t.value)})},$.fn.removeEleAttrs=function(s){return this.each(function(){var i=$(this),e=$(this.attributes).clone();$.each(e,function(e,t){t&&t.specified&&s.test(t.name)&&i.removeAttr(t.name)})})},$.fn.attrNotStartsWith=function(e){var t,i=[];this.each(function(){t=$(this.attributes).clone()});for(var s=0;s<t.length;s++)t[s]&&t[s].specified&&e.test(t[s].name)||i.push(t[s]);return i},$.fn.removeEleEmptyAttrs=function(){return this.each(function(){var i=$(this),e=$(this.attributes).clone();$.each(e,function(e,t){t&&t.specified&&""===t.value&&i.removeAttr(t.name)})})},$.extend($.support,{has3d:ej.addPrefix("perspective")in ej.styles,hasTouch:"ontouchstart"in window,hasPointer:navigator.msPointerEnabled,hasTransform:!1!==ej.userAgent(),pushstate:"pushState"in history&&"replaceState"in history,hasTransition:ej.addPrefix("transition")in ej.styles}),$.extend($.expr[":"],{attrNotStartsWith:function(e,t,i){for(var s=e.attributes,n=0;n<s.length;n++)if(0===s[n].nodeName.indexOf(i[3]))return!1;return!0}});var e=$.fn.andSelf||$.fn.addBack;$.fn.andSelf=$.fn.addBack=function(){return e.apply(this,arguments)}}(),function(x,y){ej.globalize={},ej.cultures={},ej.cultures.default=ej.cultures["en-US"]=x.extend(!0,{name:"en-US",englishName:"English",nativeName:"English",language:"en",isRTL:!1,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{"/":"/",":":":",firstDay:0,week:{name:"Week",nameAbbr:"Wek",nameShort:"Wk"},days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}}},ej.cultures["en-US"]),ej.cultures["en-US"].calendar=ej.cultures["en-US"].calendar||ej.cultures["en-US"].calendars.standard;var t=/^\s+|\s+$/g,h=/^[+-]?infinity$/i,c=/^0x[a-f0-9]+$/i,u=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,A={9:"[0-9 ]",0:"[0-9 ]",a:"[A-Za-z0-9 ]",A:"[A-Za-z0-9]",N:"[0-9]","#":"[0-9]","&":"[^]+","<":"",">":"",C:"[A-Za-z ]","?":"[A-Za-z]"};function p(e,t,i){if(ej.isNullOrUndefined(e)||"string"==typeof e||!t)throw"Bad Number Format Exception";var s,n=t,a=function(e,t){var i=e||"",s=A,n=-1<(t=t.toString()).indexOf(".")||-1<e.indexOf("."),a=0,r=0,o="",l="",d=e.split(","),h="0",c=e.toLowerCase().indexOf("e"),u=i.indexOf("#");if(-1<e.indexOf("\\")&&(l=e.substr(0,e.lastIndexOf("\\")+1),u=(e=e.substr(e.lastIndexOf("\\")+1,e.length)).indexOf("#")),-1<c){for(var p="",i="",m=e.toLowerCase().split("e"),g=((-1<e.indexOf("+")?e.split("+"):e.split("-"))[1],(t=parseInt(t).toExponential()).split("e")),a=m[1].length-g[1].length,f=m[1].length-1;0<f;f--)"0"!=m[1][f]?i+=m[1][f]:1<a?(i+="#",a--):i+="0";i=(-1<e.indexOf("+")?"+":"")+i.split("").reverse().join("");for(f=0;f<g[0].length;f++)p="."!=g[0][f]?p.concat("#"):p.concat(".");p.length>m[0].length&&(p=m[0]),i=l+p+"e"+i}else if(n){if(m=e.split("."),g=t.split("."),m[1]=m[1].replace(/[,.]/g,""),(a=m[0].replace(/[,.]/g,"").length-g[0].replace(/[,.]/g,"").length)<0&&ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){d=m[0].split(","),o=m[0].split(",");for(var _=d.length-1;0<=_;_--)if(d[_])for(var v=d[_].length,f=0,b=Math.abs(a);f<b&&3!==v;f++)o[_]="0"+o[_],v++,a++;if(o=o.join(),a<0){ej.isNullOrUndefined(v)||3==v||(o=","+o);for(f=0,b=Math.abs(a);f<b;f++)3===v&&(o=","+o,v=0),o="0"+o,v++}a=0,i=l+o+"."+m[1]}else if(ej.isNullOrUndefined(e.match(/[\[\(\)\]]/g))){for(var x="",v=0,y=(o=m[0].replace(/[,.]/g,"")).length-1;0<=y;y--)3===v?(x=","+x,v=0):v++,x=o[y]+x;i=l+x+"."+m[1]}}else{var w=0,C=d.splice(1,d.length);if(a=e.replace(/[,.\[\(\]\)]/g,"").length-t.replace(/[,.]/g,"").length,-1<u){for(var S=0,b=e.length;S<b;S++)"#"===e[S]&&w++;(1===w||d[1]&&2===w)&&(h="#"),1===w&&(C=d[0])}if(a<0){o=(m=i.split(",")).splice(1,m.length);for(_=d.length-1;0<=_;_--)if(C[_]){v=C[_].length;o[_]||(o[_]="");for(f=0,b=Math.abs(a)+1;f<b;f++){if(1!=w&&3===v){v=0;break}o[_]=o[_].concat(h),v++,a++}}if(o=o.join(),a<0){ej.isNullOrUndefined(v)||3==v||(o=","+o);for(f=0,b=Math.abs(a)+1;f<b;f++)1!=w&&3===v&&(o=","+o,v=0),o=h+o,v++}a=0,i=l+o}r=0}for(var T,R,k=[],O=i.split(""),D=0,y=0,I=!1,j=!1,L=e.indexOf("\\");y<i.length;y++)if("e"===(T=O[y])&&(j=!0),"0"===T&&u<0?0<a&&r<=y?(a--,r++):0<a?a--:R=s[T]:"0"==T&&(j||"0"!=T)||(R=s[T]),"0"===T&&-1<L&&(R=s[T]),y===i.lastIndexOf("\\")&&(I=!1),R&&!I)k[D]={rule:R},D+=1;else{"\\"===T&&(T="",y!==i.lastIndexOf("\\")&&(I=!0)),T=T.split("");for(_=0;_<T.length;_++)k[D]=T[_],D+=1}return{rules:s=k,format:i}}(t,e),r=a.rules;return 0<=(t=a.format).indexOf("\\")?(s=t.lastIndexOf("\\"),s=(t.slice(0,s)+t.slice(s+1,t.length).replace(/[9?CANa#&]/g,"_")).replace(/[\\]/g,""),t=t.replace(/[\\]/g,"")):s=t.replace(/[9?CANa#&]/g,"_"),function(e,t,i,s,n,a){if(ej.isNullOrUndefined(e))return;-1<t.toLowerCase().indexOf("e")&&((-1<a.indexOf("+")?a.split("+"):a.split("-"))[1],e=e.toExponential(),-1<a.indexOf("-")&&(e=e.replace("+","")));var r,o,l,d,h,c,u,p,m=r=o=e.toString(),g=i,f=l=0,a=t.match(/[\(\[\]\)]/g);m=0<=!t.indexOf("\\")?e=o.replace(/[\(\)-]/g,""):void 0;var _=s.length-1,v=r.length-1;if(ej.isNullOrUndefined(a)){for(;f<s.length&&(d=r[l],h=s[f],d!=y);)if(d===h||"_"===d||"e"===d&&d===h.toLowerCase()?(c=g.substring(0,f),u=g.substring(f),d=w(d,n),g=c+d+u.substr(1,u.length),l+=1,f+=1):s[f].rule!=y?(b=r.charCodeAt(l),C(t,b,f)?(c=g.substring(0,f),u=g.substring(f),p=S(r,l,f,t,i),g=c+p+u.substr(1,u.length),f++,l++):f++):("e"===h&&(l=r.indexOf("e")+1),f++),l>m.length||_<0)break}else for(;0<=_&&(d=r[v],h=s[_],d!=y);){var b;if(d===h||"_"===d||"e"===d&&d===h.toLowerCase()?(c=g.substring(0,_+1),u=g.substring(_+1),d=w(d,n),g=c.substr(0,c.length-1)+d+u,_--,v--):s[_].rule!=y?(b=r.charCodeAt(v),C(t,b,_)?(c=g.substring(0,_+1),u=g.substring(_+1),p=S(r,v,_,t,i),g=c.substr(0,c.length-1)+p+u,_--,v--):_--):_--,l>m.length||_<0)break}if(e)return g.indexOf("_")-g.indexOf(",")!=1&&g.indexOf("_")-g.indexOf(".")!=1||(g=g.slice(0,g.indexOf("_")-1)),""==x.trim(g.replace(/[_]/g,""))?null:g.replace(/[_]/g,"")}(e,t,s=w(s,i),r,i,n)}function w(e,t){if(0!=e.length){for(var t=ej.preferredCulture(t),i="",s=t.numberFormat[","],n=t.numberFormat.currency.symbol,a=t.numberFormat["."],r=0;r<e.length;r++)","==e[r]?i+=s:"."==e[r]?i+=a:"$"==e[r]?i+=n:i+=e[r];e=i}return e}function C(e,t,i){var s=A,n=!1,a=e.substr(i,1),r=String.fromCharCode(t);return x.each(s,function(e,t){a==e&&(n=!!r.match(new RegExp(t)))}),n}function S(e,t,i,s,n){var a=!1;return-1<s.indexOf(".")&&i===n.length-1&&5<e[t+1]&&(a=!0),a?(parseInt(e[t])+1).toString():e[t]}function E(e,t){return 0===e.indexOf(t)}function a(e,t){return e.substr(e.length-t.length)===t}function P(e){return(e+"").replace(t,"")}function m(e,t,i){for(var s=e.length;s<t;s++)e=i?"0"+e:e+"0";return e}function g(e,t,i){var s,n=t["-"],t=t["+"];switch(i){case"n -":n=" "+n,t=" "+t;case"n-":a(e,n)?s=["-",e.substr(0,e.length-n.length)]:a(e,t)&&(s=["+",e.substr(0,e.length-t.length)]);break;case"- n":n+=" ",t+=" ";case"-n":E(e,n)?s=["-",e.substr(n.length)]:E(e,t)&&(s=["+",e.substr(t.length)]);break;case"(n)":E(e,"(")&&a(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]}function s(e,t,i){if(!t||"i"===t)return i.name.length?e.toLocaleString():e.toString();t=t||"D";var s,n=i.numberFormat,a=Math.abs(e),r=-1;1<t.length&&(r=parseInt(t.slice(1),10));var o,l,d=t.charAt(0).toUpperCase();switch(d){case"D":s="n",l=a,a=isNaN(l)?NaN:Math[l<0?"ceil":"floor"](l),-1!==r&&(a=m(""+a,r,!0)),e<0&&(a=-a);break;case"N":(o=n).pattern=o.pattern||["-n"];case"C":(o=o||n.currency).pattern=o.pattern||["-$n","$n"];case"P":(o=o||n.percent).pattern=o.pattern||["-n %","n %"],s=e<0?o.pattern[0]||"-n":o.pattern[1]||"n",-1===r&&(r=o.decimals),a=function(e,t,i){var s=i.groupSizes||[3],n=s[0],a=1,r=ej._round(e,t);isFinite(r)||(r=e);var o=(e=r)+"",l="",e=1<(r=o.split(/e/i)).length?parseInt(r[1],10):0;o=(r=(o=r[0]).split("."))[0],l=1<r.length?r[1]:"",0<e?(o+=(l=m(l,e,!1)).slice(0,e),l=l.substr(e)):e<0&&(l=(o=m(o,(e=-e)+1,!0)).slice(-e,o.length)+l,o=o.slice(0,-e));for(var e=i["."]||".",l=0<t?e+(l.length>t?l.slice(0,t):m(l,t)):"",d=o.length-1,h=i[","]||",",c="";0<=d;){if(0===n||d<n)return o.slice(0,d+1)+(c.length?h+c+l:l);c=o.slice(d-n+1,d+1)+(c.length?h+c:""),d-=n,a<s.length&&(n=s[a],a++)}return o.slice(0,d+1)+h+c+l}(a*("P"===d?100:1),r,o);break;default:return p(e,t,i)}return function(e,t,i){for(var s=/n|\$|-|%/g,n="";;){var a=s.lastIndex,r=s.exec(t);if(n+=t.slice(a,r?r.index:t.length),!r)break;switch(r[0]){case"n":n+=e;break;case"$":n+=i.currency.symbol||"$";break;case"-":/[1-9]/.test(e)&&(n+=i["-"]||"-");break;case"%":n+=i.percent.symbol||"%"}}return n}(a,s,n)}function n(e,t,i){"string"==typeof i&&(t=i,i=10);var s,n,a,r,o=NaN,l=(t=ej.globalize.findCulture(t)).numberFormat,d=t.numberFormat.pattern[0];return-1<(e=e.replace(/ /g,"")).indexOf(t.numberFormat.currency.symbol)?(e=(e=e.replace(t.numberFormat.currency.symbol||"$","")).replace(t.numberFormat.currency["."]||".",t.numberFormat["."]||"."),d=P(t.numberFormat.currency.pattern[0].replace("$",""))):-1<e.indexOf(t.numberFormat.percent.symbol)&&(e=(e=e.replace(t.numberFormat.percent.symbol||"%","")).replace(t.numberFormat.percent["."]||".",t.numberFormat["."]||"."),d=P(t.numberFormat.percent.pattern[0].replace("%",""))),e=P(e),h.test(e)?o=parseFloat(e,"",i):c.test(e)?o=parseInt(e,16):(s=(n=g(e,l,d))[0],t=n[1],""===s&&"-n"!==l.pattern[0]&&(s=(n=g(e,l,"-n"))[0],t=n[1]),s=s||"+",(e=t.indexOf("e"))<0&&(e=t.indexOf("E")),n=e<0?(a=t,null):(a=t.substr(0,e),t.substr(e+1)),t=l["."]||".",a=(e=a.indexOf(t))<0?(r=a,null):(r=a.substr(0,e),a.substr(e+t.length)),e=l[","]||",",r=r.split(e).join(""),t=e.replace(/\u00A0/g," "),e!==t&&(r=r.split(t).join("")),r=s+r,null!==a&&(r+="."+a),null!==n&&(r+="e"+((d=g(n,l,d))[0]||"+")+d[1]),!i&&u.test(r)?o=parseFloat(r):i&&(o=parseInt(r,i))),o}var M={DAY_OF_WEEK_THREE_LETTER:"ddd",DAY_OF_WEEK_FULL_NAME:"dddd",DAY_OF_MONTH_SINGLE_DIGIT:"d",DAY_OF_MONTH_DOUBLE_DIGIT:"dd",MONTH_THREE_LETTER:"MMM",MONTH_FULL_NAME:"MMMM",MONTH_SINGLE_DIGIT:"M",MONTH_DOUBLE_DIGIT:"MM",YEAR_SINGLE_DIGIT:"y",YEAR_DOUBLE_DIGIT:"yy",YEAR_FULL:"yyyy",HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:"h",HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:"hh",HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:"H",HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:"HH",MINUTES_SINGLE_DIGIT:"m",MINUTES_DOUBLE_DIGIT:"mm",SECONDS_SINGLE_DIGIT:"s",SECONDS_DOUBLE_DIGIT:"ss",MERIDIAN_INDICATOR_SINGLE:"t",MERIDIAN_INDICATOR_FULL:"tt",DECISECONDS:"f",CENTISECONDS:"ff",MILLISECONDS:"fff",TIME_ZONE_OFFSET_SINGLE_DIGIT:"z",TIME_ZONE_OFFSET_DOUBLE_DIGIT:"zz",TIME_ZONE_OFFSET_FULL:"zzz",DATE_SEPARATOR:"/"};function F(e,t,i){return e<t||i<e}function N(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function z(e){return e.split("Â ").join(" ").toUpperCase()}function V(e){for(var t=[],i=0,s=e.length;i<s;i++)t[i]=z(e[i]);return t}function T(e,t){for(var i=0,s=!1,n=0,a=e.length;n<a;n++)var r=e.charAt(n),s="'"==r?(s?t.push("'"):i++,!1):"\\"==r?(s&&t.push("\\"),!s):(t.push(r),!1);return i}function R(e,t){t=t||"F";var i=e.patterns,e=t.length;if(1===e){if(!(i=i[t]))throw"Invalid date format string '"+t+"'.";t=i}else 2===e&&"%"===t.charAt(0)&&(t=t.charAt(1));return t}function d(e,t,i){e=P(e),t=P(t);var s=i.calendar,n=ej.globalize._getDateParseRegExp(s,t),a=new RegExp(n.regExp).exec(e);if(null===a)return null;for(var r,o,l,d,h,c,u,p,m,g,f=n.groups,_=null,v=null,b=null,x=0,y=0,w=0,C=0,S=null,T=!1,R=0,k=f.length;R<k;R++){var O=a[R+1];if(O){var D=f[R],I=D.length,j=parseInt(O,10);switch(D){case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:if(F(b=j,1,31))return null;break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:if(h=O,c=3===I,g=m=p=u=void 0,u=(D=s).months,p=D.monthsGenitive||D.months,m=D._upperMonths,g=D._upperMonthsGen,m||(D._upperMonths=m=[V(u.names),V(u.namesAbbr)],D._upperMonthsGen=g=[V(p.names),V(p.namesAbbr)]),h=z(h),(m=N(c?m[1]:m[0],h))<0&&(m=N(c?g[1]:g[0],h)),F(v=m,0,11))return null;break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:if(F(v=j-1,0,11))return null;break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:if(F(_=I<4?(o=s,l=j,d=void 0,d=new Date,l<100&&((o="string"==typeof(o=o.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(o,10):o)<(l+=(d=d.getFullYear())-d%100)&&(l-=100)),l):j,0,9999))return null;break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:if(12===(x=j)&&(x=0),F(x,0,11))return null;break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:if(F(x=j,0,23))return null;break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:if(F(y=j,0,59))return null;break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:if(F(w=j,0,59))return null;break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:if(!(T=s.PM&&(O===s.PM[0]||O===s.PM[1]||O===s.PM[2]))&&(!s.AM||O!==s.AM[0]&&O!==s.AM[1]&&O!==s.AM[2]))return null;break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:if(F(C=j*Math.pow(10,3-I),0,999))return null;break;case M.DAY_OF_WEEK_THREE_LETTER:b=function(o,i,e){if(!o)return null;for(var t,s,n,a=0,l=0,r=null,d=(i=i.split("")).length;a<d;a++)"d"===i[a]&&(t=function(e){for(var t=0;i[a]===e;)t++,a++;return 0<t&&--a,t}("d"),e._lowerDays||(e._lowerDays=function(e){var t,i={};for(t in e)i[t]=function(e){for(var t=0,i=e.length,s=[];t<i;t++)s[t]=(e[t]+"").toLowerCase();return s}(e[t]);return i}(e.days)),r=t<3?(s=2,n=n=void 0,n=new RegExp("^\\d{1,"+s+"}"),(n=o.substr(l,s).match(n))?(n=n[0],l+=n.length,parseInt(n,10)):null):function(e,t){for(var i,s,n,a=0,r=e.length;a<r;a++)if(s=(i=e[a]).length,n=o.substr(l,s),t&&(n=n.toLowerCase()),n==i)return l+=s,a+1;return null}(e._lowerDays[3==t?"namesAbbr":"names"],!0));return r}(e,t,s);break;case M.DAY_OF_WEEK_FULL_NAME:L=O,o=3===I,l=d=void 0,d=(I=s).days,(l=I._upperDays)||(I._upperDays=l=[V(d.names),V(d.namesAbbr),V(d.namesShort)]),L=z(L),o?-1===N(l[1],L)&&N(l[2],L):N(l[0],L);break;case M.TIME_ZONE_OFFSET_FULL:var L=O.split(/:/);if(2!==L.length)return null;if(F(r=parseInt(L[0],10),-12,13))return null;L=parseInt(L[1],10);if(F(L,0,59))return null;S=60*r+(E(O,"-")?-L:L);break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:if(F(r=j,-12,13))return null;S=60*r}}}var A=new Date,i=s.convert,n=i?i.fromGregorian(A)[0]:A.getFullYear();if(null===_&&(_=n),null===v&&(v=0),null===b&&(b=1),i){if(null===(A=i.toGregorian(_,v,b)))return null}else{if(A.setFullYear(_,v,b),A.getDate()!==b)return null;0}return T&&x<12&&(x+=12),A.setHours(x,y,w,C),null!==S&&(i=A.getMinutes()-(S+A.getTimezoneOffset()),A.setHours(A.getHours()+parseInt(i/60,10),i%60)),A}ej.globalize._getDateParseRegExp=function(e,t){var i=e._parseRegExp;if(i){var s=i[t];if(s)return s}else e._parseRegExp=i={};for(var n,a=R(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],o=[],l=0,d=0,h=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;null!==(n=h.exec(a));){var c=a.slice(l,n.index),l=h.lastIndex;if((d+=T(c,r))%2)r.push(n[0]);else{var u,p=n[0],c=p.length;switch(p){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:case M.MONTH_FULL_NAME:case M.MONTH_THREE_LETTER:u="(\\D+)";break;case M.MERIDIAN_INDICATOR_FULL:case M.MERIDIAN_INDICATOR_SINGLE:u="(\\D*)";break;case M.YEAR_FULL:case M.MILLISECONDS:case M.CENTISECONDS:case M.DECISECONDS:u="(\\d{"+c+"})";break;case M.DAY_OF_MONTH_DOUBLE_DIGIT:case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:case M.MONTH_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_SINGLE_DIGIT:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.MINUTES_DOUBLE_DIGIT:case M.MINUTES_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:case M.SECONDS_SINGLE_DIGIT:u="(\\d\\d?)";break;case M.TIME_ZONE_OFFSET_FULL:u="([+-]?\\d\\d?:\\d{2})";break;case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:u="([+-]?\\d\\d?)";break;case M.DATE_SEPARATOR:u="(\\"+e["/"]+")";break;default:throw"Invalid date format pattern '"+p+"'."}u&&r.push(u),o.push(n[0])}}T(a.slice(l),r),r.push("$");s={regExp:r.join("").replace(/\s+/g,"\\s+"),groups:o};return i[t]=s},ej.globalize.addCulture=function(e,t){ej.cultures[e]=x.extend(!0,x.extend(!0,{},ej.cultures.default,t),ej.cultures[e]),ej.cultures[e].calendar=ej.cultures[e].calendars.standard},ej.globalize.preferredCulture=function(e){return e=void 0!==e&&typeof e==typeof this.cultureObject?e.name:e,this.cultureObject=ej.globalize.findCulture(e),this.cultureObject},ej.globalize.setCulture=function(e){return ej.isNullOrUndefined(this.globalCultureObject)&&(this.globalCultureObject=ej.globalize.findCulture(e)),(e=void 0!==e&&typeof e==typeof this.globalCultureObject?e.name:e)&&(this.globalCultureObject=ej.globalize.findCulture(e)),ej.cultures.current=this.globalCultureObject,this.globalCultureObject},ej.globalize.culture=function(e){ej.cultures.current=ej.globalize.findCulture(e)},ej.globalize.findCulture=function(e){var t;if(e){if(x.isPlainObject(e)&&e.numberFormat&&(t=e),"string"==typeof e){var i=ej.cultures;if(i[e])return i[e];if(-1<e.indexOf("-")){var s=e.split("-")[0];if(i[s])return i[s]}else for(var n=x.map(i,function(e){return e}),a=0;a<n.length;a++)if(n[a].name.split("-")[0]===e)return n[a];return ej.cultures.default}}else t=ej.cultures.current||ej.cultures.default;return t},ej.globalize.format=function(e,t,i){i=ej.globalize.findCulture(i);return"number"==typeof e?e=s(e,t,i):e instanceof Date&&(e=function e(t,i,s){var n=s.calendar,a=n.convert;if(!i||!i.length||"i"===i){var r=s&&s.name.length?a?e(t,n.patterns.F,s):t.toLocaleString():t.toString();return r}s="s"===i;i=R(n,i),r=[];var o,l,d,h,c=["0","00","000"],u=/([^d]|^)(d|dd)([^d]|$)/g,p=0,m=/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g;function g(e,t){var i,e=e+"";return 1<t&&e.length<t?(i=c[t-2]+e).substr(i.length-t,t):i=e}for(!s&&a&&(h=a.fromGregorian(t));;){var f=m.lastIndex,_=m.exec(i);if(p+=T(i.slice(f,_?_.index:i.length),r),!_)break;if(p%2)r.push(_[0]);else{var v=_[0],f=v.length;switch(v){case M.DAY_OF_WEEK_THREE_LETTER:case M.DAY_OF_WEEK_FULL_NAME:_=3===f?n.days.namesAbbr:n.days.names,r.push(_[t.getDay()]);break;case M.DAY_OF_MONTH_SINGLE_DIGIT:case M.DAY_OF_MONTH_DOUBLE_DIGIT:l=!0,r.push(g(h?h[2]:t.getDate(),f));break;case M.MONTH_THREE_LETTER:case M.MONTH_FULL_NAME:var b=h?h[1]:t.getMonth();r.push((n.monthsGenitive&&(l||d||(l=u.test(i),d=!0),l)?n.monthsGenitive:n.months)[3===f?"namesAbbr":"names"][b]);break;case M.MONTH_SINGLE_DIGIT:case M.MONTH_DOUBLE_DIGIT:r.push(g((h?h[1]:t.getMonth())+1,f));break;case M.YEAR_SINGLE_DIGIT:case M.YEAR_DOUBLE_DIGIT:case M.YEAR_FULL:b=h?h[0]:t.getFullYear(),f<4&&(b%=100),r.push(g(b,f));break;case M.HOURS_SINGLE_DIGIT_12_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_12_HOUR_CLOCK:0==(o=t.getHours()%12)&&(o=12),r.push(g(o,f));break;case M.HOURS_SINGLE_DIGIT_24_HOUR_CLOCK:case M.HOURS_DOUBLE_DIGIT_24_HOUR_CLOCK:r.push(g(t.getHours(),f));break;case M.MINUTES_SINGLE_DIGIT:case M.MINUTES_DOUBLE_DIGIT:r.push(g(t.getMinutes(),f));break;case M.SECONDS_SINGLE_DIGIT:case M.SECONDS_DOUBLE_DIGIT:r.push(g(t.getSeconds(),f));break;case M.MERIDIAN_INDICATOR_SINGLE:case M.MERIDIAN_INDICATOR_FULL:b=t.getHours()<12?n.AM?n.AM[0]:" ":n.PM?n.PM[0]:" ",r.push(1===f?b.charAt(0):b);break;case M.DECISECONDS:case M.CENTISECONDS:case M.MILLISECONDS:r.push(g(t.getMilliseconds(),3).substr(0,f));break;case M.TIME_ZONE_OFFSET_SINGLE_DIGIT:case M.TIME_ZONE_OFFSET_DOUBLE_DIGIT:o=t.getTimezoneOffset()/60,r.push((o<=0?"+":"-")+g(Math.floor(Math.abs(o)),f));break;case M.TIME_ZONE_OFFSET_FULL:o=t.getTimezoneOffset()/60,r.push((o<=0?"+":"-")+g(Math.floor(Math.abs(o)),2)+":"+g(Math.abs(t.getTimezoneOffset()%60),2));break;case M.DATE_SEPARATOR:r.push(n["/"]||"/");break;default:throw"Invalid date format pattern '"+v+"'."}}}return r.join("")}(e,t,i)),e},ej.globalize._round=function(e,t){t=Math.pow(10,t);return Math.round(e*t)/t},ej.globalize.parseInt=function(e,t,i){return t=t||10,Math.floor(n(e,i,t))},ej.globalize.getISODate=function(e){if(e instanceof Date)return e.toISOString()},ej.globalize.parseFloat=function(e,t,i){return"string"==typeof t&&(i=t,t=10),n(e,i)},ej.globalize.parseDate=function(e,t,i){var s,n,a;if(i=ej.globalize.findCulture(i),t){if("string"==typeof t&&(t=[t]),t.length)for(var r=0,o=t.length;r<o;r++){var l=t[r];if(l&&(s=d(e,l,i)))break}}else for(n in a=i.calendar.patterns)if(s=d(e,a[n],i))break;return s||null},ej.globalize.getLocalizedConstants=function(e,t){var e=e.replace("ej.","").split("."),e=function e(t,i){return i.length?e(t[i[0]],i.slice(1)):t}(ej,e);return x.extend(!0,{},e.Locale.default,e.Locale[t||this.cultureObject.name])},x.extend(ej,ej.globalize)}(jQuery),function(t,i){i.widget("ejButton","ej.Button",{element:null,model:null,validTags:["button","input"],_setFirst:!1,_rootCSS:"e-button",_requiresID:!0,defaults:{size:"normal",type:"submit",height:"",width:"",enabled:!0,htmlAttributes:{},text:null,contentType:"textonly",imagePosition:"imageleft",showRoundedCorner:!1,cssClass:"",prefixIcon:null,suffixIcon:null,enableRTL:!1,repeatButton:!1,timeInterval:"150",create:null,click:null,destroy:null},dataTypes:{size:"enum",enabled:"boolean",type:"enum",showRoundedCorner:"boolean",text:"string",contentType:"enum",imagePosition:"enum",prefixIcon:"string",suffixIcon:"string",cssClass:"string",repeatButton:"boolean",enableRTL:"boolean",timeInterval:"string",htmlAttributes:"data"},disable:function(){this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.enabled=!1},enable:function(){this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.enabled=!0},_init:function(){this._cloneElement=this.element.clone(),this._initialize(),this._render(),this._controlStatus(this.model.enabled),this._wireEvents(this.model.repeatButton),this._addAttr(this.model.htmlAttributes)},_addAttr:function(e){var i=this;t.map(e,function(e,t){"class"==t?i.element.addClass(e):i.element.attr(t,e),"disabled"==t&&"disabled"==e&&i.disable()})},_destroy:function(){this._off(this.element,"blur",this._btnBlur),this.element.removeClass(this.model.cssClass+"e-ntouch e-btn e-txt e-select e-disable e-corner e-widget").removeAttr("role aria-describedby aria-disabled"),!this._cloneElement.attr("type")&&this.element.attr("type")&&this.element.removeAttr("type"),this.element.removeClass("e-btn-"+this.model.size),!this.model.contentType||"textonly"==this.model.contentType||this.element.append(this._cloneElement.text())&&this.imgtxtwrap[0].remove()},_setModel:function(e){for(var t in e)switch(t){case"size":this._setSize(e[t]);break;case"height":this._setHeight(e[t]);break;case"width":this._setWidth(e[t]);break;case"contentType":this._setContentType(e[t]);break;case"imagePosition":this._setImagePosition(e[t]);break;case"text":this._setText(e[t]);break;case"prefixIcon":this.element.is("input")||this._setMajorIcon(e[t]);break;case"suffixIcon":this.element.is("input")||this._setMinorIcon(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"timeInterval":this.model.timeInterval=e[t];break;case"htmlAttributes":this._addAttr(e[t])}},_setSize:function(e){this.element.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal"),this.element.addClass("e-btn-"+e)},_setType:function(e){this.element.prop({type:e})},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(e){this.element.css("width",e)},_setText:function(e){"inputButton"==this.buttonType?this.element.val(e):(this.model.contentType==i.ContentType.TextOnly?this.element:this.textspan).html(e),this.model.text=e},_setMajorIcon:function(e){this.majorimgtag.removeClass(this.model.prefixIcon),this.majorimgtag.addClass(e),this.model.prefixIcon=e},_setMinorIcon:function(e){this.minorimgtag.removeClass(this.model.suffixIcon),this.minorimgtag.addClass(e),this.model.suffixIcon=e},_setContentType:function(e){e!=this.model.contentType&&(this.element.empty(),this.model.contentType=e,this.element.is("input")||this._renderButtonNormal())},_setImagePosition:function(e){this.model.contentType==i.ContentType.TextAndImage&&e!=this.model.imagePosition&&(this.element.empty(),this.model.imagePosition=e,this.element.is("input")||this._renderButtonNormal())},_setRTL:function(e){e?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_controlStatus:function(e){e?this.enable():this.disable()},_setSkin:function(e){this.model.cssClass!=e&&(this.element.removeClass(this.model.cssClass),this.element.addClass(e))},_initialize:function(){i.isTouchDevice()||this.element.addClass("e-ntouch"),this.element.is("input")?this.buttonType="inputButton":this.element.is("a")||this.element.is("button")?this.buttonType="tagButton":this.element.removeClass("e-button"),this.element.attr("type")?this.model.type=this.element.attr("type"):this._setType(this.model.type),this._timeout=null},_render:function(){this._setSize(this.model.size),this._setHeight(this.model.height),this._setWidth(this.model.width),this._setRTL(this.model.enableRTL),this.element.addClass(this.model.cssClass+" e-btn e-select e-widget").attr("role","button"),"inputButton"==this.buttonType?(this.element.addClass("e-txt"),null!=this.model.text&&""!=this.model.text?this.element.val(this.model.text):this.model.text=this.element.val()):this._renderButtonNormal(),this._roundedCorner(this.model.showRoundedCorner),this.element[0].id&&this.element.attr("aria-describedby",this.element[0].id)},_renderButtonNormal:function(){if(null!=this.model.text&&""!=this.model.text||(this.model.text=this.element.html()),this.element.empty(),this.textspan=i.buildTag("span.e-btntxt",this.model.text),-1<this.model.contentType.indexOf("image")&&(this.majorimgtag=i.buildTag("span").addClass(this.model.prefixIcon),this.minorimgtag=i.buildTag("span").addClass(this.model.suffixIcon),this.imgtxtwrap=i.buildTag("span").addClass("e-btn-span")),this.model.contentType==i.ContentType.TextAndImage){switch(this.model.imagePosition){case i.ImagePosition.ImageRight:this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case i.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.majorimgtag,this.textspan);break;case i.ImagePosition.ImageBottom:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case i.ImagePosition.ImageTop:this.majorimgtag.attr("style","display:inherit"),this.imgtxtwrap.append(this.majorimgtag,this.textspan)}this.element.append(this.imgtxtwrap)}else this.model.contentType==i.ContentType.ImageTextImage?(this.imgtxtwrap.append(this.majorimgtag,this.textspan,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==i.ContentType.ImageBoth?(this.imgtxtwrap.append(this.majorimgtag,this.minorimgtag),this.element.append(this.imgtxtwrap)):this.model.contentType==i.ContentType.ImageOnly?(this.imgtxtwrap.append(this.majorimgtag),this.element.append(this.imgtxtwrap)):(this.element.addClass("e-txt"),this.element.html(this.model.text))},_roundedCorner:function(e){1==e?this.element.addClass("e-corner"):this.element.removeClass("e-corner")},_wireEvents:function(e){e&&(this._on(this.element,"mousedown",this._btnRepatMouseClickEvent),this._on(t(document),"mouseup",this._mouseUpClick),this._on(this.element,"keyup",this._btnRepatKeyUpEvent),this._on(t(document),"keypress",this._btnRepatKeyDownEvent)),this._on(this.element,"click",this._btnMouseClickEvent),this._on(this.element,"blur",this._btnBlur)},_btnBlur:function(e){this.element.removeClass("e-animate")},_btnMouseClickEvent:function(e){if(this.element.addClass("e-animate"),!this.model.enabled)return!1;this.element.hasClass("e-disable")||(e={target:e.currentTarget,e:e,status:this.model.enabled},this._trigger("_click",e),this._trigger("click",e))},_btnRepatMouseClickEvent:function(e){var t=this;if(!t.model.enabled)return!1;t.element.hasClass("e-disable")||(t.model.enabled,0!=e.button&&1!=e.which||(t._timeout=setInterval(function(){t._trigger("click",{target:e.currentTarget,status:t.model.enabled})},this.model.timeInterval)))},_mouseUpClick:function(e){clearTimeout(this._timeout)},_btnRepatKeyDownEvent:function(e){var t;this.element.hasClass("e-disable")||(t={status:this.model.enabled},32!=e.keyCode&&13!=e.keyCode||this._trigger("click",t))},_btnRepatKeyUpEvent:function(e){32!=e.keyCode&&13!=e.keyCode||clearTimeout(this._timeout)}}),i.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"},i.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"},i.ButtonSize={Normal:"normal",Mini:"mini",Small:"small",Medium:"medium",Large:"large"},i.ButtonType={Button:"button",Reset:"reset",Submit:"submit"}}(jQuery,Syncfusion),function(d,c,s){c.widget("ejSlider","ej.Slider",{element:null,model:null,validTags:["div","span"],_addToPersist:["value","values"],_rootCSS:"e-slider",_setFirst:!1,_requiresID:!0,defaults:{orientation:"horizontal",enableAnimation:!0,animationSpeed:500,showTooltip:!0,cssClass:"",showRoundedCorner:!1,readOnly:!1,enableRTL:!1,htmlAttributes:{},minValue:0,maxValue:100,sliderType:"default",value:null,values:null,incrementStep:1,height:null,width:null,enabled:!0,showScale:!1,largeStep:10,smallStep:1,showSmallTicks:!0,showButtons:!1,enablePersistence:!1,allowMouseWheel:!1,start:null,stop:null,slide:null,change:null,create:null,destroy:null,tooltipChange:null,renderingTicks:null},dataTypes:{orientation:"enum",enableAnimation:"boolean",animationSpeed:"number",cssClass:"string",showRoundedCorner:"boolean",readOnly:"boolean",enableRTL:"boolean",minValue:"number",maxValue:"number",sliderType:"enum",incrementStep:"number",enabled:"boolean",showButtons:"boolean",showScale:"boolean",largeStep:"number",smallStep:"number",showSmallTicks:"boolean",enablePersistence:"boolean",htmlAttributes:"data",allowMouseWheel:"boolean"},observables:["value","values"],value:c.util.valueFunction("value"),values:c.util.valueFunction("values"),enable:function(){this.model.enabled||(this.model.enabled=!0,this.wrapper&&this.wrapper.removeClass("e-disable"),this.element.removeClass("e-disable"),this.model.showButtons&&this.element.siblings(".e-sliderbtn").ejButton("model.enabled",this.model.enabled),this._wireEvents())},disable:function(){this.model.enabled&&(this.model.enabled=!1,this.wrapper&&this.wrapper.addClass("e-disable"),this.element.addClass("e-disable"),this.model.showButtons&&this.element.siblings(".e-sliderbtn").ejButton("model.enabled",this.model.enabled),this._unWireEvents())},_validateValue:function(e,t){t=void 0!==t&&t,null==e||""===e?e=this.model.minValue:"string"==typeof e&&(e=parseFloat(e)),this._isNumber(e)?(this._hidden.val(e),this.value(e)):this._isNumber(this.value())||(this._hidden.val(this.model.minValue),this.value(this.model.minValue)),"range"!=this.model.sliderType&&this._setValue(t)},_validateRangeValue:function(e,t){var i;t=void 0!==t&&t,null==e?e=new Array(this.model.minValue,this.model.maxValue):"string"!=typeof e||1<(i=e.split(",")).length&&(e=new Array(parseFloat(i[0]),parseFloat(i[1]))),"object"==typeof e&&this._isNumber(e[0])&&this._isNumber(e[1])?(this._hidden.val(new Array(e[0],e[1])),this.values(new Array(e[0],e[1]))):"object"==typeof this.values()&&this._isNumber(this.values()[0])&&this._isNumber(this.values()[1])||(this._hidden.val(new Array(this.model.minValue,this.model.maxValue)),this.values(new Array(this.model.minValue,this.model.maxValue))),"range"==this.model.sliderType&&this._setRangeValue(t)},_validateStartEnd:function(){isNaN(this.model.minValue)&&(this.model.minValue=0),isNaN(this.model.maxValue)&&(this.model.maxValue=100)},_isNumber:function(e){return"number"==typeof e&&!isNaN(e)},_outerCorner:function(e){e?this._roundedCorner():this._sharpedCorner()},_changeSkin:function(e){this.element.removeClass(this.model.cssClass).addClass(e),this.model.showScale&&this.ul.removeClass(this.model.cssClass).addClass(e)},getValue:function(){return this._getHandleValue()},setValue:function(e,t){this._isInteraction=!1,"range"==this.model.sliderType?this._validateRangeValue(e,t):this._validateValue(e,t),this._isInteraction=!0},_getTransition:function(){var e=(document.body||document.documentElement).style;return e.transition!==s||e.WebkitTransition!==s||e.MozTransition!==s||e.MsTransition!==s||e.OTransition!==s},_init:function(){this._isInteraction=!0,this._isTransition=this._getTransition(),this._initialize(),this._render()},_setModel:function(e){for(var t in this._isInteraction=!1,c.isNullOrUndefined(e.minValue)&&c.isNullOrUndefined(e.maxValue)||(this._isNumber(e.minValue)?this.model.minValue=e.minValue:e.minValue=this.model.minValue,this._isNumber(e.maxValue)?this.model.maxValue=e.maxValue:e.maxValue=this.model.maxValue,"range"==this.model.sliderType&&e.values==s?this._setRangeValue():"range"!=this.model.sliderType&&e.value==s&&this._setValue()),e)switch(t){case"value":this._validateValue(c.util.getVal(e[t])),e[t]=this.model.value;break;case"values":var i="function"==typeof e.values?e.values():e.values;if(!c.isNullOrUndefined(i)&&!c.isNullOrUndefined(i.length)&&"string"!=typeof i)if(!isNaN(i[0])&&!isNaN(i[1]))if(("function"==typeof this.values().join?i.join():i)==this._hidden.val())break;this._validateRangeValue(c.util.getVal(e[t])),e[t]=this.model.values;break;case"height":this.model.height=e[t],this._setDimension(),this.model.showScale&&this._scaleAlignment();break;case"width":this.model.width=e[t],this._setDimension(),this.model.showScale&&this._scaleAlignment();break;case"enabled":this._disabled(!e[t]);break;case"showRoundedCorner":this._outerCorner(e[t]);break;case"enableRTL":this.model.enableRTL=e[t],this.model.showButtons&&(this._valueChanged=!0),this._checkRTL(),e[t]=this.model.enableRTL;break;case"cssClass":this._changeSkin(e[t]),this.model.showButtons&&this.element.siblings(".e-sliderbtn").ejButton("model.cssClass",e[t]);break;case"showScale":this._renderScale(e[t]),this.model.enableRTL&&this._changeVerticalScaleDir(e[t]);break;case"orientation":i=this.model.height;this.model.height=this.model.width,this.model.width=i;case"sliderType":this._sliderOptions(t,e[t]);break;case"smallStep":case"largeStep":case"showSmallTicks":case"minValue":case"maxValue":this._scaleOptions(t,e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"tooltipChange":this.model.tooltipChange=e[t];break;case"allowMouseWheel":this.model.allowMouseWheel=e[t];break;case"renderingTicks":this.model.renderingTicks=e[t];break;case"showButtons":this.model.showButtons=e[t],this._renderButtons()}this._isInteraction=!0},_destroy:function(){this.model.showScale&&this._destroyScale(),this.element.insertAfter(this.wrapper),this.wrapper.remove(),this.element.removeClass("e-widget e-box e-corner "+this.model.cssClass).empty(),this.model.showButtons&&this.element.removeAttr("style")},_initialize:function(){this.target=this.element[0],this.horDir="left",this.verDir="bottom",this._isFocused=!1},_render:function(){this.initialRender=!0,this._isIE8="msie"==c.browserInfo().name&&"8.0"==c.browserInfo().version,this.wrapper=c.buildTag("div.e-slider-wrap e-widget"+this.model.cssClass+"#"+this.target.id+"_wrapper",{tabindex:"0",role:"slider"}).insertAfter(this.element),this.model.showButtons?this._showButtons():this.wrapper.append(this.element),this.element.addClass("e-widget e-box "+this.model.cssClass),"default"!=this.model.sliderType&&(this.header=c.buildTag("div.e-range"),this.element.append(this.header),"range"==this.model.sliderType&&(this.secondHandle=this._createHandle())),this.firstHandle=this._createHandle(),this._setOrientation(),this._setDimension(),this._insertHiddenField(),this._checkProperties(),this.model.showScale||this._alignButtons(),this._addAttr(this.model.htmlAttributes),this._setSliderValue()},_showButtons:function(){var t=this,e=c.buildTag("button.e-decreasebtn e-sliderbtn e-animate"),i=c.buildTag("button.e-increasebtn e-sliderbtn e-animate");e.ejButton({contentType:"imageonly",prefixIcon:"e-icon e-minus",type:"button",repeatButton:!0,enabled:t.model.enabled,cssClass:t.model.cssClass,click:function(e){t._clickButtons(e)}}),i.ejButton({contentType:"imageonly",prefixIcon:"e-icon e-plus",type:"button",repeatButton:!0,enabled:t.model.enabled,cssClass:t.model.cssClass,click:function(e){t._clickButtons(e)}}),(this.model.enableRTL&&"horizontal"==this.model.orientation||"vertical"==this.model.orientation&&!this.model.enableRTL?this.wrapper.append(d(i)).append(this.element).append(d(e)):this.wrapper.append(d(e)).append(this.element).append(d(i))).addClass("e-slider-buttons"),this.wrapper.find(".e-sliderbtn").attr("tabindex",-1)},_renderButtons:function(){this.model.showButtons?(this._showButtons(),this.model.showScale||this._alignButtons()):(this.element.siblings(".e-sliderbtn").remove(),this.element.removeAttr("style"),this.wrapper.removeClass("e-slider-buttons")),this.wrapper.find("ul").hasClass("e-scale")&&(this._destroyScale(),this._renderScale(!0))},_alignButtons:function(){var e;this.model.showButtons&&(e=this.wrapper.find(".e-sliderbtn"),"horizontal"==this.model.orientation?e.css("top",this.element.outerHeight()/2-parseFloat(e.outerHeight()/2)+parseFloat(this.wrapper.css("padding-top"))+"px"):e.css("left",this.element.outerWidth()/2-parseFloat(e.outerWidth()/2)+parseFloat(this.wrapper.css("padding-left"))+"px"))},_clickButtons:function(e){var t;d(e.target).hasClass("e-animate")&&d(e.target).removeClass("e-animate"),this.model.readOnly||c.isNullOrUndefined(e.target)||("range"==this.model.sliderType?(d(this.element).find(".e-handle.e-focus").is(this.firstHandle)&&!this.model.enableRTL?(this.firstHandle.focus().addClass("e-no-tab"),t=this.handleVal):this.model.enableRTL||(this.secondHandle.focus().addClass("e-no-tab"),t=this.handleVal2),d(this.element).find(".e-handle.e-focus").is(this.secondHandle)&&this.model.enableRTL?(this.secondHandle.focus().addClass("e-no-tab"),t=this.handleVal2):this.model.enableRTL&&(this.firstHandle.focus().addClass("e-no-tab"),t=this.handleVal)):(this.firstHandle.focus().addClass("e-no-tab"),t=this.handleVal),t=d(e.target).hasClass("e-decreasebtn")?this._add(t,this.model.incrementStep,!1):this._add(t,this.model.incrementStep,!0),this._changeHandleValue(t,!1))},_addAttr:function(e){var i=this;d.map(e,function(e,t){"class"==t?i.wrapper.addClass(e):"disabled"==t&&"disabled"==e?i._disabled(!0):i.element.attr(t,e)})},_renderScale:function(e){if(e){this.wrapper.addClass("e-scale-wrap");var t="width",i="h";"vertical"==this.model.orientation&&(t="height",i="v");var s=this.model.smallStep;this.model.showSmallTicks?s<=0&&(s=this.model.incrementStep):s=0<this.model.largeStep?this.model.largeStep:this.model.maxValue-this.model.minValue;var n=Math.abs(this.model.maxValue-this.model.minValue)/s;this.ul=c.buildTag("ul.e-scale e-"+i+"-scale "+this.model.cssClass),this._isIE8&&this.ul.addClass("e-ie8"),this.wrapper.append(this.ul);var a,r,o=this.model.minValue,l=100/n;"v"==i&&(o=this.model.maxValue);for(var d=0;d<=n;d++){a=c.buildTag("li.e-tick","",{},{title:o});var h=o%this.model.largeStep==0;h&&a.addClass("e-large"),a.css(t,l+"%"),this.model.renderingTicks&&(r={value:o,valueType:"tooltip",tick:a[0]},this._trigger("renderingTicks",r),a.attr("title",r.value)),h&&(h=this.model.renderingTicks?(r.valueType="label",r.value=o,this._trigger("renderingTicks",r),r.value):o,h=c.buildTag("span.e-tick-value",""+h),a.append(h)),this.ul.append(a),"h"==i?o+=s:o-=s,0}this.ul.children().first().addClass("e-first-tick").css(t,l/2+"%"),this.ul.children().last().addClass("e-last-tick").css(t,l/2+"%"),this._scaleAlignment()}else this._destroyScale();this._setWrapperHeight(),this._alignButtons()},_destroyScale:function(){this.wrapper.removeClass("e-scale-wrap"),this.ul.remove(),this.ul=null},_tickValuePosition:function(){var e="vertical"==this.model.orientation?"height":"width",t="vertical"==this.model.orientation?"top":"left",i=this.ul.find(".e-tick.e-first-tick"),s=i.find(".e-tick-value"),n=this.ul.find(".e-tick.e-large:not(.e-first-tick)").find(".e-tick-value"),i=2*i[e]();s.css(t,-s[e]()/2),n.css(t,(i-n[e]())/2)},_scaleAlignment:function(){this._tickValuePosition();var e="height",t="top",i="h";"vertical"==this.model.orientation?(e="width",t="right",i="v",this.element.width()<=15?this.wrapper.addClass("e-small-size"):this.wrapper.removeClass("e-small-size")):this.element.height()<=15?this.wrapper.addClass("e-small-size"):this.wrapper.removeClass("e-small-size"),this.ul.css(t,-(this.wrapper[e]()+10)),"v"==i&&this.ul.css("top",-this.wrapper.height()).css(t,10),this.ul[e](this.wrapper[e]()+20);var s=-4;null==this.model.largeStep&&"v"!=i&&(s=-s),this.ul.find(".e-tick:not(.e-large)").css(e,this.wrapper[e]()+12).css(t,s),"v"==i&&this.ul.children(".e-large").find(".e-tick-value").css("right",this.wrapper.width()+20+4)},_setWrapperHeight:function(){var e;"horizontal"==this.model.orientation?((e=((!this.ul||this.firstHandle.outerHeight()>this.ul.height()?this.firstHandle.outerHeight():this.ul.height())-this.element.outerHeight())/2)<0&&(e=0),this.wrapper.css({padding:e+"px 0px"})):((e=((!this.ul||this.firstHandle.outerWidth()>this.ul.width()?this.firstHandle.outerWidth():this.ul.width())-this.element.outerWidth())/2)<0&&(e=0),this.wrapper.css({padding:"0px "+e+"px"}))},_createHandle:function(){var e=c.buildTag("a.e-handle e-select","",{},{"aria-label":"drag",tabindex:0});return this.element.attr({role:"slider","aria-valuemin":this.model.minValue,"aria-valuemax":this.model.maxValue}),"msie"==c.browserInfo().name&&e.addClass("e-pinch"),this.element.append(e),e},_setDimension:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width),this._setHandleSize(),this._handleAlignment(this.model.enableRTL),this._alignButtons()},_insertHiddenField:function(){this._hidden=c.buildTag("input","",{},{type:"hidden",name:this.element[0].id}),this._hidden.val(this._getHandleValue()),this.element.append(this._hidden)},_checkProperties:function(){this.model.enabled?this._wireEvents():(this.wrapper||this.element).addClass("e-disable"),this.model.showScale?this._renderScale(!0):this._setWrapperHeight(),this.model.enableRTL&&this._checkRTL(),this.model.showRoundedCorner&&this._roundedCorner()},_roundedCorner:function(){this.element.addClass("e-corner")},_sharpedCorner:function(){this.element.removeClass("e-corner")},_handleAlignment:function(e){var t=-this.firstHandle.outerWidth()/2+"px",t="vertical"!=this.model.orientation?e?"0 "+t+" 0 0":"0 0 0 "+t:e?t+" 0 0 0":"0 0 "+t+" 0";this.element.children(".e-handle").css("margin",t)},_checkRTL:function(){this.model.showButtons&&this._valueChanged&&(this.element.siblings(".e-sliderbtn").remove(),this._renderButtons());var e=this.model.enableRTL,t="vertical"!=this.model.orientation?this.horDir:this.verDir;e?(this.wrapper.addClass("e-rtl"),"vertical"==this.model.orientation&&this.wrapper.addClass("e-top-to-bottom"),this.horDir="right",this.verDir="top"):(this.wrapper.removeClass("e-rtl e-top-to-bottom"),this.horDir="left",this.verDir="bottom"),(!this.model.showButtons||this.model.showButtons&&this.model.enableRTL)&&this._changeVerticalScaleDir(this.model.showScale);var i="vertical"!=this.model.orientation?this.horDir:this.verDir;t!=i&&(this.firstHandle.css(i,this.firstHandle[0].style[t]).css(t,"auto"),"default"!=this.model.sliderType&&(this.header.css(i,this.header[0].style[t]).css(t,"auto"),"range"==this.model.sliderType&&this.secondHandle.css(i,this.secondHandle[0].style[t]).css(t,"auto"))),this._handleAlignment(e)},_setOrientation:function(){"vertical"!=this.model.orientation?this.wrapper.addClass("e-horizontal"):(this.wrapper.addClass("e-vertical"),this.firstHandle.css(this.verDir,"0"))},_changeVerticalScaleDir:function(e){var t;!e||0<(t=this.wrapper.find(".e-v-scale li")).length&&(e=t.toArray().reverse(),t.remove(),this.wrapper.find(".e-v-scale").append(e))},_setHandleSize:function(){var e;null!=this.model.height&&"horizontal"==this.model.orientation||null!=this.model.width&&"vertical"==this.model.orientation?(e="vertical"!=this.model.orientation?this.wrapper.height()+2:this.wrapper.width()+2,this.element.find(".e-handle").height(e).width(e)):(this.wrapper.addClass("e-default-wrap"),this.element.find(".e-handle").addClass("e-default"))},_disabled:function(e){e?this.disable():this.enable()},_sliderOptions:function(e,t){this._unWireEvents(),this._destroy(),this.model[e]=t,this._init()},_scaleOptions:function(e,t){this.model.showScale&&(this._destroyScale(),this.model[e]=t,this._renderScale(!0),this.model.enableRTL&&this._changeVerticalScaleDir(!0))},_showTooltip:function(){var e;this.model.showTooltip&&(this._timeOut&&clearTimeout(this._timeOut),e=this.tooltip?d("body .e-tooltipbox").text().replace(/\s+/g,"").replace("-",","):"",this.tooltip&&this.tooltip.length&&"none"!=this.tooltip.css("display")&&this._getHandle()[0]==this._oldHandle&&e==this.preValue?this._getHandleValue().toString()!=this.preValue&&this._setTooltipPosition():(this._oldHandle=this._getHandle()[0],d("body .e-tooltipbox").remove(),this.tooltip=c.buildTag("div.e-tooltipbox "+this.model.cssClass+" e-corner",{role:"tooltip"}).css(this._getOffset(this._getHandle())),d("body").append(this.tooltip),"vertical"==this.model.orientation&&this.tooltip.addClass("e-vertical"),this._setTooltipPosition()))},_hideTooltip:function(){var e;this.model.showTooltip&&((e=this)._timeOut=setTimeout(function(){e.tooltip.fadeOut(800)},1500))},_showhideTooltip:function(e){this.model.showTooltip&&e&&(this._showTooltip(),this._timeOut&&clearTimeout(this._timeOut),this._hideTooltip())},_setTooltipPosition:function(){var e,t,i,s,n,a,r,o,l;this.model.showTooltip&&(this._updateTooltipValue(),a=this._getHandle(),r=this._getOffset(a),o=this._getOffset(this.tooltip),l=d(a).outerHeight()-d(a).height(),"vertical"==this.model.orientation?(i=(this.tooltip.outerHeight()-a.outerHeight())/2,n=a.outerWidth()+5,e=r.top-i,t=r.left+n,s=d(window).height(),0<window.pageYOffset&&(s+=window.pageYOffset),e<0?e=0:s<e+this.tooltip.outerHeight()&&(e=s-this.tooltip.outerHeight()-l),d(window).width()<t+this.tooltip.outerWidth()&&(t=r.left-this.tooltip.outerWidth()-l)):(o.left+this.tooltip.outerWidth()>d(window).width()&&this.tooltip.css({left:"0px"}),n=(this.tooltip.outerWidth()-a.outerWidth())/2,i=this.tooltip.outerHeight()+5,e=r.top-i,t=r.left-n,n=d(window).width(),0<window.pageXOffset&&(n+=window.pageXOffset),t<0?t=0:n<t+this.tooltip.outerWidth()&&(t=n-this.tooltip.outerWidth()-l),(e<0||r.top<i)&&(r.top+a.outerHeight()+l+this.tooltip.outerHeight()>d(window).height()?(e=r.top,t=r.left>this.tooltip.outerWidth()+5+l?r.left-(this.tooltip.outerWidth()+l):r.left+(a.outerWidth()+5+l)):e=r.top+a.outerHeight()+l)),l=this._maxZindex(),this.tooltip.css({top:e,left:t,zIndex:l+1}))},_getOffset:function(e){return c.util.getOffset(e)},_maxZindex:function(){return c.util.getZindexPartial(this.element,this.popup)},_updateTooltipValue:function(){var e,t=0,i=1;this.model.enableRTL&&(t=1,i=0),e=this.model.tooltipChange?this._raiseEvent("tooltipChange"):this._getHandleValue(),"range"!=this.model.sliderType?this.tooltip[0].innerHTML=e:this.tooltip[0].innerHTML=e[t]+" - "+e[i]},_increaseHeaderWidth:function(e){var t,i,s,n;"default"!=this.model.sliderType&&(t="width",i=this.horDir,s={},"vertical"==this.model.orientation&&(t="height",i=this.verDir),"range"==this.model.sliderType?(s[t]=this.handlePos-this.handlePos2+"%",s[i]=this.handlePos2+"%"):(s[t]=this.handlePos+"%",s[i]=0),n=this,e?this._isTransition?(this.header[0].style.transition="all "+this.model.animationSpeed+"ms",this.header[0].style["-webkit-transition"]="all "+this.model.animationSpeed+"ms",this.header.css(i,s[i]),this.header.css(t,s[t]),setTimeout(function(){n.header[0].style.transition="none",n.header[0].style["-webkit-transition"]="none"},this.model.animationSpeed)):this.header.animate(s,this.model.animationSpeed):this.header.css(s))},_setSliderValue:function(){this._validateStartEnd(),"range"==this.model.sliderType?this._validateRangeValue(this.values()):this._validateValue(this.value()),this.preValue=this.getValue().toString()},_hoverOnHandle:function(e){d(e.currentTarget).addClass("e-hover")},_leaveFromHandle:function(e){d(e.currentTarget).removeClass("e-hover")},_firstHandleClick:function(e){if(e.preventDefault(),this.firstHandle.focus().addClass("e-no-tab"),this._raiseEvent("start"))return!1;this.mouseDownPos=this.handlePos,this.model.readOnly||this._on(d(document),c.eventType.mouseMove,this._firstHandleMove),this._on(d(document),c.eventType.mouseUp,this._firstHandleUp),this._on(d(document),"mouseleave",this._firstHandleUp),this._showTooltip()},_firstHandleMove:function(e){e.preventDefault();e={x:(e="touchmove"==e.type?e.originalEvent.changedTouches[0]:e).pageX,y:e.pageY};this.handlePos=this._xyToPosition(e),"range"==this.model.sliderType&&this.handlePos<this.handlePos2&&(this.handlePos=this.handlePos2),this.handlePos!=this.preHandlePos&&(this.preHandlePos=this.handlePos,this.handleVal=this._positionToValue(this.handlePos),this._increaseHeaderWidth(!1),this._setHandlePosition(!1,!1,!1),this._setTooltipPosition(),this._updateModelValue(),this._raiseEvent("slide"))},_firstHandleUp:function(e){e.preventDefault(),this._off(d(document),c.eventType.mouseMove,this._firstHandleMove),this._off(d(document),c.eventType.mouseUp,this._firstHandleUp),this._off(d(document),"mouseleave",this._firstHandleUp),this._timeOut&&clearTimeout(this._timeOut),this._hideTooltip(),this.mouseDownPos!=this.handlePos&&this._raiseChangeEvent()},_secondHandleClick:function(e){if(e.preventDefault(),this.secondHandle.focus().addClass("e-no-tab"),this._raiseEvent("start"))return!1;this.mouseDownPos2=this.handlePos2,this.model.readOnly||this._on(d(document),c.eventType.mouseMove,this._secondHandleMove),this._on(d(document),c.eventType.mouseUp,this._secondHandleUp),this._on(d(document),"mouseleave",this._secondHandleUp),this._showTooltip()},_secondHandleMove:function(e){e.preventDefault();e={x:(e="touchmove"==e.type?e.originalEvent.changedTouches[0]:e).pageX,y:e.pageY};this.handlePos2=this._xyToPosition(e),this.handlePos2>this.handlePos&&(this.handlePos2=this.handlePos),this.handlePos2!=this.preHandlePos2&&(this.preHandlePos2=this.handlePos2,this.handleVal2=this._positionToValue(this.handlePos2),this._increaseHeaderWidth(!1),this._setHandlePosition(!1,!1,!1),this._setTooltipPosition(),this._updateModelValue(),this._raiseEvent("slide"))},_secondHandleUp:function(e){e.preventDefault(),this._off(d(document),c.eventType.mouseMove,this._secondHandleMove),this._off(d(document),c.eventType.mouseUp,this._secondHandleUp),this._off(d(document),"mouseleave",this._secondHandleUp),this._timeOut&&clearTimeout(this._timeOut),this._hideTooltip(),this.mouseDownPos2!=this.handlePos2&&this._raiseChangeEvent()},_focusInHandle:function(e){this._isFocused||(this._isFocused=!0,d(e.currentTarget).addClass("e-focus"),this.model.readOnly||this._on(d(document),"keydown",this._moveHandle),this.model.allowMouseWheel&&!this.model.readOnly&&this._on(this.element,"mousewheel DOMMouseScroll",this._moveHandle),this.activeHandle=d(e.currentTarget).is(this.firstHandle)?1:2,this._setZindex())},_focusOutHandle:function(e){d(e.relatedTarget).is("button")&&d(e.target).parent().siblings().is(e.relatedTarget)||c.isNullOrUndefined(e.relatedTarget)&&!c.isNullOrUndefined(e.originalEvent)&&!c.isNullOrUndefined(e.originalEvent.toElement)&&d(e.originalEvent.toElement).is("button")&&d(e.target).parent().siblings().is(e.originalEvent.toElement)||(this._isFocused=!1,this.model.showTooltip&&this.tooltip&&this.tooltip.fadeOut(800),this.element.find(".e-no-tab").removeClass("e-no-tab"),d(e.currentTarget).removeClass("e-focus"),this._off(d(document),"keydown",this._moveHandle),this._off(this.element,"mousewheel DOMMouseScroll",this._moveHandle))},_moveHandle:function(e){var t,i,s,n;switch("mousewheel"!=e.type&&"DOMMouseScroll"!=e.type||e.preventDefault(),i=this._getHandleIndex(this.activeHandle)-1,"mousewheel"!=e.type&&"DOMMouseScroll"!=e.type||((n=e.originalEvent).wheelDelta?s=n.wheelDelta/120:n.detail&&(s=-n.detail/3),s=0<s?"add":"sub"),e.keyCode||e.originalEvent.wheelDelta){case-120:case 37:case 40:this._getHandle().addClass("e-no-tab"),e.preventDefault(),s="sub";break;case 120:case 38:case 39:this._getHandle().addClass("e-no-tab"),e.preventDefault(),s="add";break;case 36:if(this._getHandle().addClass("e-no-tab"),e.preventDefault(),this._raiseEvent("start"))return!1;"range"!=this.model.sliderType&&this.value()!=this.model.minValue?this._changeHandleValue(this.model.minValue,this.model.enableAnimation):"range"==this.model.sliderType&&(t=2==this.activeHandle?this.model.minValue:this.handleVal2,this.values()[i]!=t&&this._changeHandleValue(t,this.model.enableAnimation));break;case 35:if(this._getHandle().addClass("e-no-tab"),e.preventDefault(),this._raiseEvent("start"))return!1;"range"!=this.model.sliderType&&this.value()!=this.model.maxValue?this._changeHandleValue(this.model.maxValue,this.model.enableAnimation):"range"==this.model.sliderType&&(t=1==this.activeHandle?this.model.maxValue:this.handleVal,this.values()[i]!=t&&this._changeHandleValue(t,this.model.enableAnimation));break;case 27:this._getHandle().addClass("e-no-tab"),e.preventDefault(),this._getHandle().focusout()}if("add"==s||"sub"==s){if(this._raiseEvent("start"))return!1;e=1==this.activeHandle?this.handleVal:this.handleVal2,e="add"==s?this._add(e,this.model.incrementStep,!0):this._add(e,this.model.incrementStep,!1);this._changeHandleValue(e,!1)}},_changeHandleValue:function(e,t){var i=null;1==this.activeHandle?(this.handleVal=this._checkHandleValue(e),this.handlePos=this._checkHandlePosition(this.handleVal),"range"==this.model.sliderType&&this.handlePos<this.handlePos2&&(this.handlePos=this.handlePos2,this.handleVal=this.handleVal2),this.handlePos!=this.preHandlePos&&(i=this.preHandlePos=this.handlePos)):(this.handleVal2=this._checkHandleValue(e),this.handlePos2=this._checkHandlePosition(this.handleVal2),"range"==this.model.sliderType&&this.handlePos<this.handlePos2&&(this.handlePos2=this.handlePos,this.handleVal2=this.handleVal),this.handlePos2!=this.preHandlePos2&&(i=this.preHandlePos2=this.handlePos2)),null!=i&&(this._increaseHeaderWidth(t),this._setHandlePosition(t,!0,!0))},_sliderBarClick:function(e){if(this.model.readOnly)return!1;if(e.target==this.target||"default"!=this.model.sliderType&&e.target==this.header[0]||d(e.target).hasClass("e-tick")||d(e.target).hasClass("e-scale")||e.target==this.wrapper[0]){if(e.preventDefault(),this._raiseEvent("start"))return!1;var t={x:e.pageX,y:e.pageY},e=this._xyToPosition(t),t=this._positionToValue(e);"range"==this.model.sliderType&&this.handlePos-e>e-this.handlePos2?(this.handlePos2=this.preHandlePos2=e,this.handleVal2=t,this.activeHandle=2):(this.handlePos=this.preHandlePos=e,this.handleVal=t,this.activeHandle=1),this._getHandle().focus().addClass("e-no-tab"),"default"!=this.model.sliderType&&this._increaseHeaderWidth(this.model.enableAnimation),this._setHandlePosition(this.model.enableAnimation,!0,!0)}},_setHandlePosition:function(e,t,i){var s=this._getHandle(),n=this,a={},r=1==this.activeHandle?this.handlePos:this.handlePos2,o=1==this.activeHandle?this.handleVal:this.handleVal2;s.attr("aria-label",o),a[o="vertical"==this.model.orientation?this.verDir:this.horDir]=r+"%",0==r?"range"!=this.model.sliderType&&this._getHandle().addClass("e-handle-start"):this._getHandle().removeClass("e-handle-start"),e?this._isTransition?(s[0].style.transition="all "+this.model.animationSpeed+"ms",s[0].style["-webkit-transition"]="all "+this.model.animationSpeed+"ms",s.css(o,r+"%"),setTimeout(function(){s[0].style.transition="none",s[0].style["-webkit-transition"]="none",n._showhideTooltip(t),i&&n._raiseChangeEvent()},this.model.animationSpeed)):s.animate(a,this.model.animationSpeed,function(){n._showhideTooltip(t),i&&n._raiseChangeEvent()}):(s.css(a),this._showhideTooltip(t),i&&this._raiseChangeEvent())},_xyToPosition:function(e){return this.model.minValue==this.model.maxValue?100:(e="vertical"!=this.model.orientation?(e.x-this.element.offset().left)/(this.element.width()/100):100-(e.y-this.element.offset().top)/(this.element.height()/100),(e=this._stepValueCalculation(e))<0?e=0:100<e&&(e=100),this.model.enableRTL?100-e:e)},_updateValue:function(){this.handleVal=this._checkHandleValue(this.value()),this.handlePos=this._checkHandlePosition(this.handleVal),this.preHandlePos=this.handlePos,this.activeHandle=1},_setValue:function(e){this._updateValue(),this._increaseHeaderWidth(e),this._setHandlePosition(e,!1,!0)},_updateRangeValue:function(){var e=this.values();this.handleVal=this._checkHandleValue(e[1]),this.handleVal2=this._checkHandleValue(e[0]),this.handlePos=this._checkHandlePosition(this.handleVal),this.handlePos2=this._checkHandlePosition(this.handleVal2),this.handlePos<this.handlePos2&&(this.handlePos=this.handlePos2,this.handleVal=this.handleVal2),this.preHandlePos=this.handlePos,this.preHandlePos2=this.handlePos2},_setRangeValue:function(e){this._updateRangeValue(),this._increaseHeaderWidth(e),this.activeHandle=1,this._setHandlePosition(e,!1,!1),this.activeHandle=2,this._setHandlePosition(e,!1,!0)},_checkHandlePosition:function(e){if(this.model.minValue==this.model.maxValue)return 100;var t=this._tempStartEnd();return e=e>=t.start&&e<=t.end?100*(e-this.model.minValue)/(this.model.maxValue-this.model.minValue):e<t.start?0:100},_checkHandleValue:function(e){if(this.model.minValue==this.model.maxValue)return this.model.minValue;var t=this._tempStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e},_tempStartEnd:function(){return this.model.minValue>this.model.maxValue?{start:this.model.maxValue,end:this.model.minValue}:{start:this.model.minValue,end:this.model.maxValue}},_positionToValue:function(e){var t=this.model.maxValue-this.model.minValue,e=this._round(t*e/100);return this._add(e,this.model.minValue,!0)},_getHandle:function(){return 1==this.activeHandle?this.firstHandle:this.secondHandle},_getHandleIndex:function(e){return"range"==this.model.sliderType&&1==e?2:1},_getHandleValue:function(){return"range"==this.model.sliderType?[this.handleVal2,this.handleVal]:this.handleVal},_updateModelValue:function(){var e=this._getHandleValue();this._hidden.val(e),"range"==this.model.sliderType?this.values(e):this.value(e)},_add:function(e,t,i,s){s=Math.pow(10,s||3),s=i?(Math.round(e*s)+Math.round(t*s))/s:(Math.round(e*s)-Math.round(t*s))/s;return s},_round:function(e){var t=this.model.incrementStep.toString().split(".");return t[1]?parseFloat(e.toFixed(t[1].length)):Math.round(e)},_raiseChangeEvent:function(){this._updateModelValue(),this.initialRender?this.initialRender=!1:this.getValue().toString()!=this.preValue.toString()&&(this._raiseEvent("change"),this._raiseEvent("stop"),this.preValue=this.getValue().toString())},_raiseEvent:function(e){var t={id:this.target.id,value:this._getHandleValue(),sliderIndex:this._getHandleIndex(this.activeHandle)};"change"==e&&(t={id:this.target.id,isInteraction:this._isInteraction,value:this._getHandleValue(),sliderIndex:this._getHandleIndex(this.activeHandle)}),"tooltipChange"==e&&(t={id:this.target.id,isInteraction:this._isInteraction,value:this._getHandleValue(),sliderIndex:this._getHandleIndex(this.activeHandle)});var i=this._trigger(e,t);return"tooltipChange"==e?t.value:i},_setZindex:function(){"range"==this.model.sliderType&&(1==this.activeHandle?(this.firstHandle.css("z-index",2),this.secondHandle.css("z-index",1)):(this.firstHandle.css("z-index",1),this.secondHandle.css("z-index",2)))},_stepValueCalculation:function(e){0==this.model.incrementStep&&(this.model.incrementStep=1);var t=this.model.incrementStep/((this.model.maxValue-this.model.minValue)/100),i=e%Math.abs(t);return 0!=i&&(i<t/2?e-=i:e+=Math.abs(t)-i),e},_wireEvents:function(){this._on(this.wrapper,"mousedown",this._sliderBarClick),this._on(this.firstHandle,c.eventType.mouseDown,this._firstHandleClick),this._on(this.firstHandle,"mouseenter",this._hoverOnHandle),this._on(this.firstHandle,"mouseleave",this._leaveFromHandle),this._on(this.firstHandle,"focusin",this._focusInHandle),this._on(this.firstHandle,"focusout",this._focusOutHandle),"range"==this.model.sliderType&&(this._on(this.secondHandle,c.eventType.mouseDown,this._secondHandleClick),this._on(this.secondHandle,"mouseenter",this._hoverOnHandle),this._on(this.secondHandle,"mouseleave",this._leaveFromHandle),this._on(this.secondHandle,"focusin",this._focusInHandle),this._on(this.secondHandle,"focusout",this._focusOutHandle))},_unWireEvents:function(){this._off(this.wrapper,"mousedown"),this._off(this.firstHandle,c.eventType.mouseDown),this._off(this.firstHandle,"mouseenter"),this._off(this.firstHandle,"mouseleave"),this._off(this.firstHandle,"focusin"),this._off(this.firstHandle,"focusout"),"range"==this.model.sliderType&&(this._off(this.secondHandle,c.eventType.mouseDown),this._off(this.secondHandle,"mouseenter"),this._off(this.secondHandle,"mouseleave"),this._off(this.secondHandle,"focusin"),this._off(this.secondHandle,"focusout"))}}),c.SliderType={Default:"default",MinRange:"minrange",Range:"range"}}(jQuery,Syncfusion),function(l,d){d.widget("ejSplitButton","ej.SplitButton",{element:null,model:null,validTags:["button"],_setFirst:!1,_rootCSS:"e-splitbutton",defaults:{size:"normal",width:"",height:"",enabled:!0,htmlAttributes:{},text:null,contentType:"textonly",imagePosition:"imageleft",buttonMode:"split",arrowPosition:"right",targetID:null,target:null,showRoundedCorner:!1,prefixIcon:null,suffixIcon:null,cssClass:"",enableRTL:!1,create:null,beforeOpen:null,click:null,itemMouseOver:null,itemMouseOut:null,itemSelected:null,open:null,close:null,destroy:null,popupPosition:"down"},dataTypes:{size:"string",enabled:"boolean",showRoundedCorner:"boolean",text:"string",contentType:"enum",imagePosition:"enum",buttonMode:"enum",arrowPosition:"enum",target:"string",targetID:"string",prefixIcon:"string",suffixIcon:"string",cssClass:"string",enableRTL:"boolean",htmlAttributes:"data"},disable:function(){this.element.addClass("e-disable"),this.wrapper.addClass("e-disable"),this.contstatus&&this._hidePopup(),this.model.buttonMode==d.ButtonMode.Split&&this.dropbutton.addClass("e-disable").attr("aria-disabled",!0),this.model.buttonMode==d.ButtonMode.Dropdown&&this.btnimgwrap.addClass("e-disable").attr("aria-disabled",!0),this.model.enabled=!1},visible:function(e){e?(this.wrapper.removeClass("e-split-btn-hide"),this.wrapper.find(".e-icon").css("visibility","")):(this.wrapper.addClass("e-split-btn-hide"),this.wrapper.find(".e-icon").css("visibility","hidden"))},enable:function(){this.element.removeClass("e-disable"),this.wrapper.removeClass("e-disable"),this.model.buttonMode==d.ButtonMode.Split&&this.dropbutton.removeClass("e-disable").attr("aria-disabled",!1),this.model.buttonMode==d.ButtonMode.Dropdown&&this.btnimgwrap.removeClass("e-disable").attr("aria-disabled",!1),this.model.enabled=!0},hide:function(){this.contstatus&&this._hidePopup()},show:function(){this.contstatus||(this.model.buttonMode==d.ButtonMode.Dropdown?this.element.click():this.model.buttonMode==d.ButtonMode.Split&&this.dropbutton.click())},setPopupPosition:function(e){this._setPosition=!0,this._val=e},_init:function(){this._cloneElement=this.element.clone(),this._setPosition=!1,this._initialize(),this._controlStatus(this.model.enabled),this._documentClickHandler=l.proxy(this._documentClick,this),this._wireEvents()},_createElement:function(e,t){e=document.createElement(e);return this._setAttributes(e,t),l(e)},_setAttributes:function(e,t){for(var i in t)e.setAttribute(i,t[i])},_destroy:function(){this.contstatus&&this._hide(),this.splitwrap.removeClass("e-drop"),this.splitwrap.removeClass("e-btn-"+this.model.size),this.innerWrap.removeClass("e-splitarrowright e-splitarrowleft e-splitarrowbottom e-splitarrowtop"),this.element.removeClass(this.model.cssClass+"e-ntouch e-select e-corner e-btn e-disable e-split-btn e-droparrowright e-droparrowleft e-droparrowbottom e-droparrowtop e-left-btn e-txt").empty(),this.element.append(this._cloneElement.text()),this.element.insertAfter(this.wrapper),this.wrapper.remove(),this._contextObj&&this._contextObj.model&&this._contextObj.destroy(),this._contextObj&&(this._contextObj=null),l(this.model.target).show(),l(this.model.target).insertAfter(this.element),this._off(this.element,"click",this._btnMouseClick)},_setModel:function(e){for(var t in e)switch(t){case"size":this._setSize(e[t]);break;case"width":this._splitbtnWidth(e[t]);break;case"height":this._splitbtnHeight(e[t]);break;case"contentType":this._setContentType(e[t]);break;case"imagePosition":this._setImagePosition(e[t]);break;case"buttonMode":this._setButtonMode(e[t]);break;case"arrowPosition":this._setArrowPosition(e[t]);break;case"text":this._setText(e[t]);break;case"prefixIcon":this._setMajorIcon(e[t]);break;case"suffixIcon":this._setMinorIcon(e[t]);break;case"enabled":this._controlStatus(e[t]);break;case"targetID":case"target":this._setTarget(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"popupPosition":this._setPopupPosition(e[t])}},_setText:function(e){this.model.contentType==d.ContentType.TextOnly?this.model.buttonMode==d.ButtonMode.Split?this.element.html(e):(this.element.empty(),this.imgtxtwrap=e,this.model.arrowPosition==d.ArrowPosition.Left||this.model.arrowPosition==d.ArrowPosition.Top?this.element.append(this.btnimgwrap,this.imgtxtwrap):this.element.append(this.imgtxtwrap,this.btnimgwrap)):this.textspan.html(e)},_setMajorIcon:function(e){this.majorimgtag.removeClass(this.model.prefixIcon),this.majorimgtag.addClass(e)},_setMinorIcon:function(e){this.minorimgtag.removeClass(this.model.suffixIcon),this.minorimgtag.addClass(e)},_setTarget:function(e){"."==e.substring(0,1)||"#"==e.substring(0,1)?this.model.target=e:(this.model.targetID=e,this.model.target="#"+e),this._renderContxtMenu()},_setContentType:function(e){e!=this.model.contentType&&(this.element.empty(),this.model.contentType=e,this._renderButtonContent())},_setImagePosition:function(e){e!=d.ImagePosition.ImageRight&&e!=d.ImagePosition.ImageLeft&&e!=d.ImagePosition.ImageBottom&&e!=d.ImagePosition.ImageTop||this.model.contentType==d.ContentType.TextAndImage&&e!=this.model.imagePosition&&(this.element.empty(),this.model.imagePosition=e,this._renderButtonContent())},_setButtonMode:function(e){e!=d.ButtonMode.Split&&e!=d.ButtonMode.Dropdown||e!=this.model.buttonMode&&(this._destroy(),this.model.buttonMode=e,this._init())},_setArrowPosition:function(e){e!=d.ArrowPosition.Right&&e!=d.ArrowPosition.Left&&e!=d.ArrowPosition.Bottom&&e!=d.ArrowPosition.Top||(this.model.buttonMode==d.ButtonMode.Dropdown&&e!=this.model.arrowPosition?(this.model.arrowPosition=e,this.element.empty(),this._setSize(this.model.size),this.element.removeClass("e-droparrowright e-droparrowleft e-droparrowbottom e-droparrowtop"),this._renderButtonContent()):this.model.buttonMode==d.ButtonMode.Split&&e!=this.model.arrowPosition&&(this.model.arrowPosition=e,this._setSize(this.model.size),this.innerWrap.removeClass("e-splitarrowright e-splitarrowleft e-splitarrowbottom e-splitarrowtop"),this._setRTL(this.model.enableRTL)))},_setPopupPosition:function(e){this.model.popupPosition=e,"down"==this.model.popupPosition&&this.dropdownimg.addClass("e-arrow-sans-down").removeClass("e-arrow-sans-up"),"up"==this.model.popupPosition&&this.dropdownimg.addClass("e-arrow-sans-up").removeClass("e-arrow-sans-down")},_setRTL:function(e){if(this.model.buttonMode==d.ButtonMode.Split){switch(this.dropdownimg.removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down"),this.model.arrowPosition){case d.ArrowPosition.Right:this.innerWrap.addClass("e-splitarrowright");break;case d.ArrowPosition.Left:this.innerWrap.addClass("e-splitarrowleft");break;case d.ArrowPosition.Bottom:this.innerWrap.addClass("e-splitarrowbottom");break;case d.ArrowPosition.Top:this.innerWrap.addClass("e-splitarrowtop"),this.dropdownimg.addClass("e-arrow-sans-up").removeClass("e-arrow-sans-down")}1==e?!this.innerWrap.hasClass("e-splitarrowleft")&&this.splitwrap.addClass("e-rtl e-btnrtl")&&this._contextObj&&this._contextObj.model&&this._contextObj.element.addClass("e-rtl"):this.splitwrap.removeClass("e-rtl e-btnrtl")&&this._contextObj&&this._contextObj.model&&this._contextObj.element.removeClass("e-rtl")}else 1==e?this.splitwrap.addClass("e-rtl")&&this._contextObj&&this._contextObj.model&&this._contextObj.element.addClass("e-rtl"):this.splitwrap.removeClass("e-rtl")&&this._contextObj&&this._contextObj.model&&this._contextObj.element.removeClass("e-rtl");this.model.enableRTL=e,this._roundedCorner(this.model.showRoundedCorner)},_roundedCorner:function(e){e?(this.element.addClass("e-corner"),0<l(this.model.target).length&&l(this.model.target).addClass("e-corner")):(this.element.removeClass("e-corner"),0<l(this.model.target).length&&l(this.model.target).removeClass("e-corner"))},_controlStatus:function(e){e?this.enable():this.disable()},_setSkin:function(e){this.element.removeClass(this.model.cssClass),this.model.buttonMode==d.ButtonMode.Split&&(this.dropbutton.removeClass(this.model.cssClass),this.dropbutton.addClass(e)),this.element.addClass(e),this._contextObj&&this._contextObj.model&&this._contextObj.option("cssClass",e)},_initialize:function(){this.element.is("button")||this.element.is("ej-splitbutton")?this._render():this.element.removeClass("e-splitbutton"),this._timeout=null},_addAttr:function(e){var i=this;l.map(e,function(e,t){"class"==t?i.wrapper.addClass(e):"disabled"==t&&"disabled"==e?i._controlStatus(!1):i.wrapper.attr(t,e)})},_render:function(){this.element.addClass(this.model.cssClass+" e-btn e-select e-split-btn "+(d.isTouchDevice()?"":"e-ntouch")),this._setAttributes(this.element[0]),null==this.model.text||""==this.model.text?this.model.text=this.element.text():this._setAttributes(this.element[0],{"aria-describedby":this.model.text}),this.model.buttonMode!=d.ButtonMode.Split&&this.model.buttonMode!=d.ButtonMode.Dropdown&&(this.model.buttonMode=d.ButtonMode.Split),this.model.arrowPosition!=d.ArrowPosition.Right&&this.model.arrowPosition!=d.ArrowPosition.Left&&this.model.arrowPosition!=d.ArrowPosition.Bottom&&this.model.arrowPosition!=d.ArrowPosition.Top&&(this.model.arrowPosition=d.ArrowPosition.Right),this.element.empty(),this.splitwrap=this.model.buttonMode==d.ButtonMode.Split?this._createElement("span",{class:"e-split e-widget"}):this._createElement("span",{class:"e-split e-drop e-widget"}),this.splitwrap.insertBefore(this.element),this.innerWrap=this._createElement("span",{class:"e-in-wrap e-box e-padding"}),this.splitwrap[0].appendChild(this.innerWrap[0]),this.wrapper=this.splitwrap,this.dropdownimg=this._createElement("span",{class:"e-icon e-arrow-sans-down"}),this.dropdownimage=this._createElement("span",{class:"e-icon e-arrow-sans-up"}),this.btnimgwrap=this._createElement("span",{class:"e-split-btn-div e-btn-span"}),"up"==this.model.popupPosition?this.btnimgwrap[0].appendChild(this.dropdownimage[0]):this.btnimgwrap[0].appendChild(this.dropdownimg[0]),this.model.buttonMode==d.ButtonMode.Split&&(this.dropbutton=d.buildTag("button.e-split-btn e-btn e-select "+this.model.cssClass+" e-drp-btn"+(d.isTouchDevice()?"":" e-ntouch"),"",{},{type:"button","data-role":"none",id:this.element[0].id+"drpbtn"}),this.dropbutton[0].appendChild(this.btnimgwrap[0]),this.dropbutton.insertAfter(this.element),this.model.contentType==d.ContentType.TextOnly?this.dropbutton.addClass("e-btn-txt"):this.dropbutton.addClass("e-rht-btn")),this._setSize(this.model.size),this.element.addClass("e-left-btn"),this._renderButtonContent(),this.model.buttonMode==d.ButtonMode.Dropdown?this.innerWrap[0].appendChild(this.element[0]):(this.innerWrap[0].appendChild(this.element[0]),this.innerWrap[0].appendChild(this.dropbutton[0])),null==this.model.target&&null!=this.model.targetID&&(this.model.target="#"+this.model.targetID),l(this.model.target).hide(),this._roundedCorner(this.model.showRoundedCorner),this._setRTL(this.model.enableRTL),this._addAttr(this.model.htmlAttributes)},_renderButtonContent:function(){if(this.textspan=d.buildTag("span.e-btntxt",this.model.text),this.majorimgtag=d.buildTag("span").addClass(this.model.prefixIcon),this.minorimgtag=d.buildTag("span").addClass(this.model.suffixIcon),this.imgtxtwrap=d.buildTag("span").addClass("e-btn-span"),this.model.contentType==d.ContentType.TextAndImage)switch(this.model.imagePosition){case d.ImagePosition.ImageRight:this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case d.ImagePosition.ImageLeft:this.imgtxtwrap.append(this.majorimgtag,this.textspan);break;case d.ImagePosition.ImageBottom:this.majorimgtag.css("display","inline-table"),this.imgtxtwrap.append(this.textspan,this.majorimgtag);break;case d.ImagePosition.ImageTop:this.majorimgtag.css("display","inline-table"),this.imgtxtwrap.append(this.majorimgtag,this.textspan)}else this.model.contentType==d.ContentType.ImageTextImage?this.imgtxtwrap.append(this.majorimgtag,this.textspan,this.minorimgtag):this.model.contentType==d.ContentType.ImageBoth?this.imgtxtwrap.append(this.majorimgtag,this.minorimgtag):this.model.contentType==d.ContentType.ImageOnly?this.imgtxtwrap.append(this.majorimgtag):(this.element.addClass("e-txt"),this.imgtxtwrap=this.model.text);this.model.buttonMode==d.ButtonMode.Dropdown?this._renderDropdownArrow():this.element.append(this.imgtxtwrap)},_renderDropdownArrow:function(){switch(this.btnimgwrap.css("position","absolute"),this.dropdownimg.removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down"),this.model.arrowPosition){case d.ArrowPosition.Right:this.element.addClass("e-droparrowright"),this.element.append(this.imgtxtwrap,this.btnimgwrap);break;case d.ArrowPosition.Left:this.element.addClass("e-droparrowleft"),this.element.append(this.btnimgwrap,this.imgtxtwrap);break;case d.ArrowPosition.Bottom:this.element.addClass("e-droparrowbottom"),this.element.append(this.imgtxtwrap,this.btnimgwrap);break;case d.ArrowPosition.Top:this.element.addClass("e-droparrowtop"),this.dropdownimg.addClass("e-arrow-sans-up").removeClass("e-arrow-sans-down"),this.element.append(this.btnimgwrap,this.imgtxtwrap)}},_setSize:function(e){switch(this.wrapper.css({height:"",width:""}),e){case"mini":case"small":case"medium":case"large":default:this._splitbtnSize(e)}this.model.arrowPosition!=d.ArrowPosition.Bottom&&this.model.arrowPosition!=d.ArrowPosition.Top||""!=this.model.height||this.splitwrap.addClass("e-btn-arrowsplit-"+e);var t,e=""===this.model.height?this.wrapper.outerHeight()+"px":this.model.height;this._splitbtnHeight(e),"normal"!==this.model.size?(t=""===this.model.width?this.wrapper.outerWidth()+"px":this.model.width,this._splitbtnWidth(t)):""!==this.model.width&&(t=this.model.width,this._splitbtnWidth(t))},_splitbtnSize:function(e){this.splitwrap.removeClass("e-btn-mini e-btn-medium e-btn-small e-btn-large e-btn-normal e-btn-arrowsplit-large e-btn-arrowsplit-small e-btn-arrowsplit-mini e-btn-arrowsplit-medium e-btn-arrowsplit-normal"),this.model.arrowPosition!=d.ArrowPosition.Left&&this.model.arrowPosition!=d.ArrowPosition.Right||this.splitwrap.addClass("e-btn-"+e)},_splitbtnHeight:function(e){""!=e&&null!=e||(e="30px"),this.splitwrap.css("height",e)},_splitbtnWidth:function(e){this.splitwrap.css("width",e)},_renderContxtMenu:function(){null!=this.model.target&&null==l(this.model.target).attr("id")&&"."==this.model.target.substring(0,1)&&l(this.model.target).attr("id",this.element.attr("id")+"_"+this.model.target.replace(".","")),l(this.model.target).ejMenu({menuType:d.MenuType.ContextMenu,openOnClick:!1,contextMenuTarget:"",fields:this.model.fields,showArrow:!0,cssClass:"e-split "+this.model.cssClass,enableRTL:this.model.enableRTL}).on("ejMenuclose",l.proxy(this._onKeyDown,this)),this._contextObj=l(this.model.target).ejMenu("instance")},_onKeyDown:function(e){27==e.keyCode&&this._hide()},_itemClick:function(e){e={status:this.model.enabled,ID:e.ID,text:e.text},this._trigger("itemSelected",e),l(e.element).hasClass("e-haschild")||this._hide()},_itemMouseOver:function(e){this._trigger("itemMouseOver",e)},_itemMouseOut:function(e){this._trigger("itemMouseOut",e)},_wireEvents:function(){this._on(this.element,"click",this._btnMouseClick),this._on(this.element,"mousedown",this._btnMouseDown),this.model.buttonMode==d.ButtonMode.Split&&this._on(this.dropbutton,"click",this._btnMouseClick),this._on(l(document),"mousedown",this._docrhtclk)},_btnMouseClick:function(e){var t;if(this._contextObj&&this._contextObj.model||this._renderContxtMenu(),!this.model.enabled)return!1;l(e.currentTarget).hasClass("e-disable")||(e.currentTarget.id!=this.element[0].id+"drpbtn"&&this.model.buttonMode==d.ButtonMode.Split?(t={status:this.model.enabled},this._trigger("click",t)):(this.contstatus||this._trigger("beforeOpen"),this.wrapper.addClass("e-active"),this.contstatus?this._hidecontext(e):(this._contextPosition(e),this._trigger("open"),this._on(l(window),"resize",this._OnWindowResize),this.contstatus=!0,this.element.on("click",l.proxy(this._hidecontext,this)),d.listenTouchEvent(l(document),d.startEvent(),this._documentClickHandler,!1,this),this._on(d.getScrollableParents(this.wrapper),"scroll",this._hidePopup))))},_OnWindowResize:function(e){this._contextPosition(e)},_contextPosition:function(e,t,i,s){var n,a,r,o;this._contextObj.model&&(n=this._setPosition?this._val:this._getXYpos(e),a=this.model.buttonMode==d.ButtonMode.Split?this.dropbutton:this.element,r=this._contextObj,o=n.x-(l(this.model.target).outerWidth()-(this.model.buttonMode==d.ButtonMode.Split?this.dropbutton:this.element).outerWidth()),this.model.enableRTL?n.x="left"==this.model.popupPosition||o<l(this.model.target).outerWidth()?n.x:o:n.x="left"==this.model.popupPosition||n.x+l(this.model.target).outerWidth()<l(window).width()?n.x:o,this._posright<0&&"left"==this.model.popupPosition&&(n.x=l(window).outerWidth()),r.option({click:l.proxy(this._itemClick,this),mouseover:l.proxy(this._itemMouseOver,this),mouseout:l.proxy(this._itemMouseOut,this)}),t?r.show(i,s,a,e):r.show(n.x,n.y,a,e))},_getXYpos:function(e){var t,i,s=this._getOffset(this.model.buttonMode==d.ButtonMode.Split?this.dropbutton:this.element),n="right"!=this.model.popupPosition||this.model.enableRTL||this.model.arrowPosition==d.ArrowPosition.Left||this.model.arrowPosition==d.ArrowPosition.Bottom||this.model.arrowPosition==d.ArrowPosition.Top?"left"!=this.model.popupPosition||!this.model.enableRTL&&this.model.arrowPosition==d.ArrowPosition.Right||this.model.arrowPosition==d.ArrowPosition.Bottom||this.model.arrowPosition==d.ArrowPosition.Top?s.left:s.left-l(this.model.target).outerWidth():this.model.buttonMode==d.ButtonMode.Split?s.left+this.dropbutton.outerWidth():s.left+this.element.outerWidth();return this._posright=l(window).width()-n-l(this.model.target).outerWidth(),this._posleft=n-l(this.model.target).outerHeight(),this._posrightht=l(window).height()-s.top-l(this.model.target).outerHeight(),t="right"==this.model.popupPosition&&this._posright<0||n<0?s.left:n,i=this.model.arrowPosition==d.ArrowPosition.Top||"up"==this.model.popupPosition?s.top-l(this.model.target).outerHeight()+1:this.model.arrowPosition!=d.ArrowPosition.Top&&this.model.arrowPosition!=d.ArrowPosition.Bottom&&((this.model.arrowPosition==d.ArrowPosition.Right!=("left"==this.model.popupPosition)||this.model.arrowPosition==d.ArrowPosition.Right&&this.model.enableRTL&&"left"==this.model.popupPosition)&&this.model.arrowPosition==d.ArrowPosition.Left!=("right"==this.model.popupPosition)||this.model.arrowPosition==d.ArrowPosition.Right&&this.model.enableRTL&&"left"==this.model.popupPosition)&&(!this.model.enableRTL&&"right"==this.model.popupPosition||"left"==this.model.popupPosition)?s.top:(this.model.buttonMode==d.ButtonMode.Split?s.top+this.dropbutton.outerHeight():s.top+this.element.outerHeight())-1,{x:t,y:"left"==this.model.popupPosition&&this._posrightht<0&&0<this._posright&&this._posleft<0?s.top-l(this.model.target).outerHeight():"left"==this.model.popupPosition&&this._posrightht<0&&0<this._posright?s.top+this.element.outerHeight()-l(this.model.target).outerHeight():("right"==this.model.popupPosition||"up"==this.model.popupPosition||this.model.popupPosition)&&this._posrightht<0&&this._posright<0?s.top-l(this.model.target).outerHeight():("right"==this.model.popupPosition||"left"==this.model.popupPosition)&&this._posrightht<0?s.top+this.element.outerHeight()-l(this.model.target).outerHeight():"right"==this.model.popupPosition&&this._posright<0&&0<this._posrightht?s.top+this.element.outerHeight():"down"==this.model.popupPosition&&this._posrightht<0&&0<this._posright?s.top-l(this.model.target).outerHeight():n<0||this._posright<0?s.top+this.element.outerHeight():i<0?this.model.buttonMode==d.ButtonMode.Split&&"up"==this.model.popupPosition&&this.model.arrowPosition!=d.ArrowPosition.Top?s.top+this.element.outerHeight()-1:s.top+(this.model.buttonMode==d.ButtonMode.Split?this.dropbutton.outerHeight()+this.element.outerHeight():this.element.outerHeight())-1:i}},_getOffset:function(e){var t=e.offset();return"static"!=l("body").css("position")&&(e=l("body").offset(),t.left-=e.left,t.top-=e.top),t},_btnMouseDown:function(e){l(e.currentTarget).hasClass("e-disable")||this._docrhtclk(e)},_hidePopup:function(e){this._contextObj&&this._contextObj.hide(e),this._hide(),this._off(d.getScrollableParents(this.wrapper),"scroll",this._hidePopup)},_hide:function(){this.contstatus=!1,this.wrapper.removeClass("e-active"),this.element.off("click",l.proxy(this._hidecontext,this)),d.listenTouchEvent(l(document),d.startEvent(),this._documentClickHandler,!0,this),this._off(l(window),"resize",this._OnWindowResize),this._off(d.getScrollableParents(this.wrapper),"scroll",this._hide),this._closeEvent()},_closeEvent:function(){this._trigger("close")},_hidecontext:function(e){(!(l(e.target).is(this.element)||l(e.target).is(this.dropbutton)||l(e.target).is(this.textspan)||l(e.target).is(this.dropdownimg)||l(e.target).is(this.btnimgwrap))&&l(e.target).is(this.majorimgtag)&&l(e.target).is(this.minorimgtag)||l(e.target).is(this.splitwrap)||l(e.target).parents().is(l(this.model.target)))&&!this.element.hasClass("e-txt")&&!l(e.target).is(this.imgtxtwrap)||this._hidePopup(e)},_documentClick:function(e){l(e.target).is(this.element)||l(e.target).is(this.dropbutton)||l(e.target).is(this.textspan)||l(e.target).is(this.dropdownimg)||l(e.target).is(this.btnimgwrap)||l(e.target).is(this.majorimgtag)||l(e.target).is(this.minorimgtag)||l(e.target).is(this.splitwrap)||l(e.target).parents().is(l(this.model.target))||!this.element.hasClass("e-txt")&&l(e.target).is(this.imgtxtwrap)||this._hidePopup(e)},_docrhtclk:function(e){var t=!1;e.button?t=2==e.button:e.which&&(t=3==e.which),e.target,t&&e.preventDefault()}}),d.ContentType={TextOnly:"textonly",ImageOnly:"imageonly",ImageBoth:"imageboth",TextAndImage:"textandimage",ImageTextImage:"imagetextimage"},d.ImagePosition={ImageRight:"imageright",ImageLeft:"imageleft",ImageTop:"imagetop",ImageBottom:"imagebottom"},d.ButtonSize={Mini:"mini",Small:"small",Medium:"medium",Large:"large"},d.ButtonMode={Split:"split",Dropdown:"dropdown"},d.ArrowPosition={Right:"right",Left:"left",Top:"top",Bottom:"bottom"}}(jQuery,Syncfusion),function(c,u,p){u.widget("ejMenu","ej.Menu",{element:null,model:null,validTags:["ul"],_setFirst:!1,_rootCss:"e-menu",angular:{terminal:!1},defaults:{height:"",width:"",animationType:"default",orientation:u.Orientation.Horizontal,menuType:"normalmenu",isResponsive:!0,contextMenuTarget:null,htmlAttributes:{},cssClass:"",openOnClick:!1,subMenuDirection:"none",enableCenterAlign:!1,showRootLevelArrows:!0,showSubLevelArrows:!0,enableAnimation:!0,container:null,enableSeparator:!0,enabled:!0,overflowHeight:"auto",overflowWidth:"auto",fields:{child:null,dataSource:null,query:null,tableName:null,id:"id",parentId:"parentId",text:"text",spriteCssClass:"spriteCssClass",url:"url",imageAttribute:"imageAttribute",htmlAttribute:"htmlAttribute",linkAttribute:"linkAttribute",imageUrl:"imageUrl"},enableRTL:!1,titleText:"Menu",locale:"en-US",excludeTarget:null,beforeOpen:null,open:null,close:null,mouseover:null,mouseout:null,click:null,keydown:null,overflowOpen:null,overflowClose:null,create:null,destroy:null},dataTypes:{animationType:"enum",cssClass:"string",titleText:"string",locale:"string",openOnClick:"boolean",enabled:"boolean",enableCenterAlign:"boolean",showArrow:"boolean",showRootLevelArrows:"boolean",showSubLevelArrows:"boolean",enableSeparator:"boolean",isResponsive:"boolean",enableRTL:"boolean",enableAnimation:"boolean",fields:{dataSource:"data",query:"data",child:"data"},excludeTarget:"string",htmlAttributes:"data"},_setModel:function(e){for(var t in e)switch(t){case"menuType":e[t]=this.model.menuType;break;case"fields":this._wireEvents("_off"),this.element.empty().insertBefore(this.wrapper),this.wrapper.remove(),c.extend(this.model.fields,e[t]),this._intializeData(),this.model.enabled||this._wireEvents("_off");break;case"orientation":this._setOrientation(e[t]);break;case"showRootLevelArrows":this._addArrow(e[t],this.model.showSubLevelArrows);break;case"showSubLevelArrows":this._addArrow(this.model.showRootLevelArrows,e[t]);break;case"enableSeparator":this._setSeparator(e[t]);break;case"height":this._setHeight(e[t]);break;case"width":this._setWidth(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"isResponsive":this.model.isResponsive?this._responsiveLayout():(c(this.resWrap).remove(),c(this.wrapper).removeClass("e-menu-responsive"),c(this.element).removeClass("e-menu-responsive"),this.resWrap=null);break;case"htmlAttributes":this._addAttr(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"enableCenterAlign":this._centerAlign(e[t]);break;case"excludeTarget":this.model.excludeTarget=e[t];break;case"enabled":this.model.enabled=e[t],this._controlStatus(e[t]);break;case"animationType":this._setAnimation(e[t]);break;case"enableAnimation":this.model.enableAnimation=e[t];break;case"openOnClick":this._hoverOpen=!e[t],this._hoverClose=!e[t];break;case"subMenuDirection":this._setSubMenuDirection(this.model.subMenuDirection);break;case"titleText":this._titleText(e[t]);break;case"locale":this.model.locale=e[t],this._updateLocalConstant(),this._setLocale();break;case"overflowHeight":this._setOverflowDimensions("height",e[t]);break;case"overflowWidth":this._setOverflowDimensions("width",e[t])}},_updateLocalConstant:function(){this._localizedLabels=u.getLocalizedConstants("ej.Menu",this.model.locale)},_setLocale:function(){this._titleText(this._localizedLabels.titleText)},_titleText:function(e){this.model.menuType!=u.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&c(this.label).text(e)},_destroy:function(){this.model.menuType==u.MenuType.ContextMenu?this._referenceElement.append(this._cloneElement):this._cloneElement.insertBefore(this.wrapper),this._cloneElement.removeClass("e-menu e-js"),this.wrapper.remove()},_init:function(){this._cloneElement=this.element.clone(),this.element.css("visibility","hidden"),this._setValues(),this._intializeData(),this.element.css("visibility","visible")},_setValues:function(){this._mouseOver=!0,this._hoverOpen=!0,this._hoverClose=!0,this._isMenuOpen=!1,this._hideSpeed=100,this._showSpeed=100,this._isSubMenuOpen=!1,this._isContextMenuOpen=!1,this._disabledMenuItems=new Array,this._hiddenMenuItems=new Array,this._delayMenuHover=0,this._delaySubMenuHover=0,this._delaySubMenuShow=0,this._preventContextOpen=!0,this._setAnimation(this.model.animationType),this._isFocused=!0,this._menuOverflowItems=new Array,this._menuHeaderItems=new Array,this._menuCloneItems=new Array,this._itemWidth=0},_intializeData:function(){u.isNullOrUndefined(this.model.fields)||null==this.model.fields.dataSource?(this._renderMenu(),this._wireEvents("_on"),this._calculateOverflowItems()):(this._generateTemplate(this.model.fields.dataSource),this._renderMenu())},_renderMenu:function(){this._renderControl(),this._addArrow(this.model.showRootLevelArrows,this.model.showSubLevelArrows),this._renderArrow(),this._intializeMenu(),this._itemWidth=this.element.width(),this.model.isResponsive&&this._ensureResponsiveClasses(c(window).width()<767),"horizontal"==this.model.orientation&&(this._on(this.element.parent().find("span.e-check-wrap.e-icon"),"click",this._mobileResponsiveMenu),null!=this.model.fields.dataSource&&this._calculateOverflowItems())},_renderControl:function(){"normalmenu"==this.model.menuType?(this.wrapper=u.buildTag("div"),this.wrapper.addClass(this.model.cssClass+" e-menu-wrap")):this.wrapper=u.buildTag("div.e-menu-wrap"),this.model.isResponsive&&this._responsiveLayout(),this.model.menuType!=u.MenuType.ContextMenu&&(this.wrapper.insertBefore(this.element),this.wrapper.append(this.element)),this.element.addClass("e-menu e-widget e-box").attr({role:"menu",tabindex:0}),this._addAttr(this.model.htmlAttributes),this.model.enableRTL&&this._setRTL(this.model.enableRTL),this._setSubMenuDirection(this.model.subMenuDirection),"normalmenu"==this.model.menuType?"horizontal"==this.model.orientation?this.element.addClass("e-horizontal"):this.element.addClass("e-vertical"):this._contextMenu_Template(),this._addClass(),this.model.enableCenterAlign&&this._centerAlign(this.model.enableCenterAlign),this.model.enableSeparator&&this._setSeparator(!0),this.model.enabled||this.disable()},_renderPopupWrapper:function(e){var t,i;this._ensureOverflowPopup()&&(this.popupWrapper=u.buildTag("div.e-menu-popwrap"),this.popupWrapper.insertAfter(this.element),t="number"==typeof value?this.model.overflowHeight+"px":this.model.overflowHeight,i="number"==typeof value?this.model.overflowWidth+"px":this.model.overflowWidth,this.popupWrapper.css({height:t,width:i}),this.popupWrapper.hide(),this._addOverflowItems())},_calculateOverflowItems:function(e){if(this._ensureOverflowPopup()){this.element.find("li.e-list").removeClass("e-menu-show"),c(this.lastelement).removeClass("e-last"),this._menuHeaderItems=[];var t=this.element.outerWidth();0<this.element.find("li.e-ham-wrap").length&&(this._itemWidth<=this.element.width()||this._itemWidth>=this.element.width()&&!this._isOverflowPopupOpen())&&(u.isNullOrUndefined(this.popupWrapper)||this.popupWrapper.hide()),this._renderHamburgerIcon(),this.element.find("li.e-ham-wrap").css({display:"list-item"});var i=this.element.find("li.e-ham-wrap").outerWidth(),s=0,n=!0;this.element.find("li.e-ham-wrap").hide(),this._menuHeaderItems=this.element.find(">li.e-list"),this._menuOverflowItems=[];for(var a=0;a<this._menuHeaderItems.length;a++){var r=c(this._menuHeaderItems[a]);(s+=r.outerWidth())<t?(r.removeClass("e-menu-hide"),this.element.find(">li.e-list.e-haschild>ul").find("li.e-haschild").find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right"),this.model.enableSeparator&&this._setSeparator(!0)):n?(n=!1,this.element.find("li.e-ham-wrap").css({display:"list-item"}),s=s-r.outerWidth()+i,1<a&&(s-=c(this._menuHeaderItems[a-1]).outerWidth(),a-=2)):(this._menuOverflowItems.push(c(r).clone(!0)),r.addClass("e-menu-hide"))}0<this._menuOverflowItems.length?(this._renderHamburgerIcon(),c(".e-menu-popwrap").length?this._addOverflowItems():this._renderPopupWrapper(),this.lastelement=this.element.find(">li.e-list:visible").last().addClass("e-last"),this.element.find(">li.e-list.e-haschild>ul").find("li.e-haschild").find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right")):0==this._menuOverflowItems.length&&0<c("li.e-ham-wrap").length&&this.element.find("li.e-ham-wrap").remove()}("vertical"==this.model.orientation||this.model.menuType==u.MenuType.ContextMenu&&768<=c(window).width()&&this.model.isResponsive)&&this.element.find("span.e-icon.e-arrowhead-down").removeClass("e-arrowhead-down").addClass("e-arrowhead-right")},_renderHamburgerIcon:function(){var e,t;this._ensureOverflowPopup()&&0==this.element.find("li.e-ham-wrap").length&&(e=u.buildTag("li.e-ham-wrap"),t=u.buildTag("div"),this.hamburgerspan=u.buildTag("span.e-hamburger"),t.append(this.hamburgerspan),e.append(t),this.element.append(e),0!=this.model.height?this._setHeight(this.model.height):c("li.e-ham-wrap").css({height:this.element.find("li.e-list").first().height()}),this._on(this.element.find("li.e-ham-wrap"),"click",this._overflowOpen))},_addOverflowItems:function(){if(this._ensureOverflowPopup()&&0<c(".e-menu-popwrap").length&&!u.isNullOrUndefined(this.popupWrapper)){this.popupWrapper.empty();for(var e=this._menuCloneItems.length=0;e<this._menuOverflowItems.length;e++)this._menuCloneItems.push(c(this._menuOverflowItems[e]).clone(!0));this.ulTag=u.buildTag("ul"),this.ulTag.addClass("e-menu e-js e-responsive e-widget e-box e-vertical"),this.popupWrapper.append(this.ulTag);for(var t,e=0;e<this._menuCloneItems.length;e++)c(this._menuCloneItems[e]).hasClass("e-haschild")&&(c(this._menuCloneItems[e]).find("span.e-icon").removeClass("e-arrowhead-down e-arrowhead-right").addClass("e-arrowhead-down"),c(this._menuCloneItems[e]).children("span.e-menu-arrow.e-menu-left").remove()),this.ulTag.append(this._menuCloneItems[e]);c(this.ulTag).children("li").removeClass("e-menu-hide"),0<Math.round(this.popupWrapper.width())&&(t=this.popupWrapper.innerWidth(),this.popupWrapper.find("ul.e-menu").css({width:t+"px"})),this.model.enableSeparator&&this._setSeparator(!0)}},_overflowOpen:function(e){var t,i,s;this._isOverflowPopupOpen()?(i=(t=u.util.getOffset(this.element)).left+(this.model.enableRTL?0:this.element.outerWidth()-this.popupWrapper.outerWidth()),s=t.top+this.element.outerHeight(),!this.wrapper.parent().length||"absolute"!=this.wrapper.parent().css("position")&&"relative"!=this.wrapper.parent().css("position")||(i-=(t=u.util.getOffset(this.wrapper.parent())).left,s-=t.top),this.popupWrapper.css({left:i,top:s}),this.popupWrapper.show(),this._trigger("overflowOpen",{e:e})):this._overflowClose(e)},_overflowClose:function(e){this._ensureOverflowPopup()&&!u.isNullOrUndefined(this.popupWrapper)&&(this.popupWrapper.find("li.e-list").removeClass(".e-mhover.e-active.e-mfocused"),this._hideAnimation(this.popupWrapper.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim),this.popupWrapper.hide(),this._trigger("overflowClose",{e:e}))},_isOverflowPopupOpen:function(){if(0<c(this.popupWrapper).length)return"none"==this.popupWrapper.css("display")},_removePopup:function(e){c(window).width()<767&&this.model.isResponsive&&(this._ensureResponsiveClasses(c(window).width()),0<this.element.find("li.e-ham-wrap").length&&0<this.popupWrapper.length&&(this.element.find("li.e-ham-wrap").remove(),c(".e-menu-popwrap").remove(),this.element.find("li.e-list").addClass("e-menu-show")))},_mobileResponsiveMenu:function(e){this.model.menuType!=u.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&"none"==this.element.css("display")?this.element.removeClass("e-res-hide").addClass("e-res-show"):this.model.menuType!=u.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&"none"!=this.element.css("display")&&this.element.removeClass("e-res-show").addClass("e-res-hide")},_ensureOverflowPopup:function(e){return this.model.menuType!=u.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&768<=c(window).width()&&this.model.isResponsive},_onResize:function(e){this.element.find("li.e-ham-wrap").hide(),768<=c(window).width()?this._calculateOverflowItems():this._removePopup()},_ensureResponsiveClasses:function(e){e&&this.element.find("span.e-icon").hasClass("e-arrowhead-right")&&this.element.find("span.e-icon.e-arrowhead-right").removeClass("e-arrowhead-right").addClass("e-arrowhead-down")},_responsiveLayout:function(){this.model.menuType!=u.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&(this.wrapper.addClass("e-menu-responsive"),this.element.addClass("e-menu-responsive"),this.resWrap=u.buildTag("span.e-menu-res-wrap e-menu-responsive"),this.inResWrap=u.buildTag("span.e-in-wrap e-box e-menu-res-in-wrap"),this.label=u.buildTag("span.e-res-title").html(("en-US"!=this.model.locale&&u.Menu.Locale[this.model.locale]&&u.Menu.Locale[this.model.locale].titleText?u.Menu.Locale[this.model.locale]:this.model).titleText),this.check=u.buildTag("span.e-check-wrap e-icon"),this.wrapper.append(this.resWrap),this.resWrap.append(this.inResWrap),this.inResWrap.append(this.label).append(this.check))},_addAttr:function(e){var i=this;c.map(e,function(e,t){"class"==t?i.wrapper.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_oncheck:function(e){var t=this.element.parents(".e-menu-wrap").children(".e-menu");e.isChecked?t.removeClass("e-res-hide").addClass("e-res-show"):t.removeClass("e-res-show").addClass("e-res-hide")},_addClass:function(){this.element.find('li:has("> ul")').find("> a,> span").addClass("aschild"),this.element.find(">li").addClass("e-list").attr({role:"menuitem"}),this.element.find("li").find(">a, >span").addClass("e-menulink");for(var e,t,i=this.element.find(".e-list a.aschild"),s=this.element.find(".e-list span.aschild"),n=0;n<i.length;n++)(e=c(i[n])).siblings().attr({"aria-hidden":!0}),e.parent().attr({"aria-haspopup":!0,role:"menuitem"}).addClass("e-haschild"),e.siblings("ul").children("li").addClass("e-list").attr("role","menuitem");for(n=0;n<s.length;n++)(t=c(s[n])).siblings().attr({"aria-hidden":!0}),t.parent().attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),t.siblings("ul").children("li").addClass("e-list").attr("role","menuitem")},_renderArrow:function(){var e;this.model.menuType!=u.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&0==c(c(this.element).find("span.e-menu-arrow")).length&&(e=u.buildTag("span.e-menu-arrow e-menu-left"),c(e).append("<span class='e-arrowMenuOuter'></span>").append("<span class='e-arrowMenuInner'></span>"),this.element.find(">li.e-list.e-haschild").append(e))},_generateTemplate:function(e){var t=this;e instanceof u.DataManager?e.executeQuery(this._columnToSelect(this.model.fields)).done(function(e){t._odataFlag=!0,t._generateItemTemplate(e.result),0!=t.model.height&&t._setHeight(t.model.height),t._wireEvents("_on")}):(t._odataFlag=!1,this._generateItemTemplate(t.model.fields.dataSource),this._wireEvents("_on"))},_generateItemTemplate:function(e){for(var t,i=0;i<e.length;i++)null!=e[i][this.model.fields.parentId]&&0!=e[i][this.model.fields.parentId]||(t=this._menuTemplate(e[i],e,this.model.fields),this.element.append(t))},_menuTemplate:function(e,t,a){var i,s,r=c(document.createElement("li"));if(r.attr("class","e-list"),e[a.htmlAttribute]&&this._setAttributes(e[a.htmlAttribute],r),(n=c(document.createElement("a"))).attr("class","e-menulink"),e[a.imageUrl]&&""!=e[a.imageUrl]?((i=c(document.createElement("img"))).attr("src",e[a.imageUrl]),e[a.imageAttribute]&&this._setAttributes(e[a.imageAttribute],i),n.append(i)):e[a.spriteCssClass]&&""!=e[a.spriteCssClass]&&((i=c(document.createElement("span"))).addClass(e[a.spriteCssClass]),n.append(i)),n.append(e[a.text]),e[a.linkAttribute]&&this._setAttributes(e[a.linkAttribute],n),e[a.url]&&n.attr("href",e[a.url]),r.append(n),e[a.id]&&r.prop("id",e[a.id]),u.isNullOrUndefined(a.child)){if(!this._odataFlag)if((s=u.DataManager(a.dataSource).executeLocal(u.Query().where(a.parentId,u.FilterOperators.equal,e[a.id])))&&0<s.length){for(l=u.buildTag("ul"),d=0;d<s.length;d++){h=this._menuTemplate(s[d],a.dataSource,a);l.append(h)}r.append(l)}}else if(this._odataFlag=!0,a.child.dataSource instanceof u.DataManager){var o=this,n=u.Query();c(r).attr({"aria-haspopup":!0,role:"menu"}).addClass("e-haschild"),(n=this._columnToSelect(a.child)).where(a.child.parentId,u.FilterOperators.equal,e[a.id]);n=a.child.dataSource.executeQuery(n);n.done(function(e){var t=e.result;if(t&&0<t.length){for(var i=c(document.createElement("ul")),s=0;s<t.length;s++){var n=o._menuTemplate(t[s],a.child.dataSource,a.child);i.append(n)}r.append(i),c(r).children("a").addClass("aschild"),c(r).parent().hasClass("e-menu")&&o.model.showRootLevelArrows?c(r).children("a.aschild").append(c("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):o.model.showSubLevelArrows&&c(r).children("a.aschild").append(c("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"),0!=o.model.height&&o._setHeight(o.model.height)}}),n.then(function(e){o._renderArrow()})}else if(u.isNullOrUndefined(e.child)||(u.isPlainObject(e.child)?s=u.DataManager(a.child.dataSource).executeLocal(u.Query().where(a.child.parentId,u.FilterOperators.equal,e[a.id])):e.child instanceof Array&&(s=e.child)),s&&0<s.length){for(var l=c(document.createElement("ul")),d=0;d<s.length;d++){var h=this._menuTemplate(s[d],a.child.dataSource,a.child);l.append(h)}r.append(l)}return r},_setAttributes:function(e,t){for(var i in e)"class"==i?t.addClass(e[i]):t.attr(i,e[i])},_addArrow:function(e,t){e?(e="horizontal"==this.model.orientation?"e-arrowhead-down":"e-arrowhead-right",this.element.find('>li.e-list:has("> ul")').children("a").append(c("<span>").addClass("e-icon "+e)).addClass("e-arrow-space")):this.element.find('>li.e-list:has("> ul")').children("a").removeClass("e-arrow-space").children("span.e-icon").remove(),t?this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a").append(c("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):this.element.find(">li.e-list > ul li.e-list:has(>ul)").children("a").removeClass("e-arrow-space").children("span.e-icon").remove()},_intializeMenu:function(){0!=this.model.height&&this._setHeight(this.model.height),0!=this.model.width&&this._setWidth(this.model.width),"contextmenu"==this.model.menuType&&(this.model.openOnClick=!1),this.model.openOnClick&&(this._hoverOpen=!1,this._hoverClose=!1)},_setOrientation:function(e){"horizontal"==e?this.element.removeClass("e-vertical e-horizontal").addClass("e-horizontal"):this.element.removeClass("e-horizontal e-vertical").addClass("e-vertical"),"vertical"==e&&this._removePopup()},_setHeight:function(e){"horizontal"==this.model.orientation&&"auto"!==e?(e="number"==typeof e?e+"px":e,this.element.find("> li").find(">a:first").css("line-height",e),this.model.showRootLevelArrows&&this.element.find("> li").find(">a:first").find("> span:first").css({"line-height":e,top:"0px"}),this.model.menuType!=u.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&0<c("li.e-ham-wrap").length&&(this.element.find("li.e-ham-wrap").children("div").css({"line-height":e}),this.element.find("li.e-ham-wrap").css({height:e}),this.popupWrapper&&this.popupWrapper.find("a.e-menulink").css({"line-height":e}))):this.element.height(e)},_setWidth:function(e){this.element.css("width",e),"horizontal"===this.model.orientation&&"auto"!==e&&this.model.isResponsive&&this.resWrap.css("width",e),"horizontal"==this.model.orientation&&this.model.menuType!=u.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&this._calculateOverflowItems()},_setOverflowDimensions:function(e,t){this.model.menuType!=u.MenuType.ContextMenu&&"vertical"!=this.model.orientation&&(t="number"==typeof t?t+"px":t),"height"==e?this.popupWrapper.css({height:t}):"width"==e&&this.popupWrapper.css({width:t}),this._addOverflowItems()},_setRTL:function(e){e?this.element.removeClass("e-rtl").addClass("e-rtl"):this.element.removeClass("e-rtl"),e&&"horizontal"===this.model.orientation?this.wrapper.removeClass("e-menu-rtl").addClass("e-menu-rtl"):this.wrapper.removeClass("e-menu-rtl"),this.model.subMenuDirection=e?"left":"right"},_setSubMenuDirection:function(e){"left"!=e&&"right"!=e&&(this.model.subMenuDirection=this.model.enableRTL?"left":"right")},_setAnimation:function(e){"none"===e?(this._showAnim="none",this._hideAnim="none"):(this._showAnim="slideDown",this._hideAnim="slideUp")},_controlStatus:function(e){1!=e?this.disable():this.enable()},_centerAlign:function(e){"horizontal"==this.model.orientation&&e?this.element.css("text-align","center"):this.element.css("text-align","inherit")},_columnToSelect:function(e){var t=[],i=u.Query();if(u.isNullOrUndefined(e.query)){for(var s in e)"tableName"!==s&&"child"!==s&&"dataSource"!==s&&e[s]&&t.push(e[s]);0<t.length&&i.select(t),this.model.fields.dataSource.dataSource.url.match(e.tableName+"$")||u.isNullOrUndefined(e.tableName)||i.from(e.tableName)}else i=e.query;return i},_max_zindex:function(){var i,e,t,s;return"contextmenu"==this.model.menuType?(i=c(this._targetElement).parents()).push(this._targetElement):i=c(this.element).parents(),s=(e=c("body").children()).index(this.popup),e.splice(s,1),c(e).each(function(e,t){i.push(t)}),!(t=Math.max.apply(t,c.map(i,function(e,t){if("static"!=c(e).css("position"))return parseInt(c(e).css("z-index"))||1})))||t<1e4?t=1e4:t+=1,t},_recursiveFunction:function(e,i){var s=this,n=!1;c.each(e,function(e,t){return t.Text==i?(s.selectedItem=t,!(n=!0)):(null!=t.ChildItems&&s._recursiveFunction(t.ChildItems,i),!n&&void 0)})},_contextMenu_Template:function(){var e;""!=this.element[0].id&&(e=c(".e-menu-wrap #"+this.element[0].id).get(0)),e&&c(e.parentElement).remove(),this.model.orientation="vertical",this.element.addClass(this.model.cssClass+" e-context"),this.element.css("display","none"),this._referenceElement=this.element.parent(),c("body").append(this.element),this.wrapper.insertBefore(this.element),this.wrapper.append(this.element)},_closeMenu:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim)},_onMenuIntent:function(i,s,n){s._delayMenuHover=window.setTimeout(function(){var e,t;1==s._mouseOver&&n&&(e=s._showAnim,t=s._hideAnim,s._showSpeed,s._hideSpeed,s._show(i,e,t))},this._showSpeed)},_onHide:function(e,t,i){t._delaySubMenuHover=window.setTimeout(function(){0==t._mouseOver&&i&&(t._id,t._hideAnim,t._hideSpeed,t._closeAll())},t._hideSpeed)},_subMenuPos:function(e,t){var i,s=c(e).offset(),n=s.left,a=c("ul:first",e),r=c(e).outerWidth();if(null==s||s==p)return!1;var o,l,d=a.outerWidth()+1,h=this.model.container?c(this.model.container).width()+c(document).scrollLeft():document.documentElement.clientWidth+c(document).scrollLeft();"normalmenu"==this.model.menuType?c(e.parentNode).is(this.element)?"horizontal"==this.model.orientation?(a.css("top",c(e).outerHeight()+"px"),this.model.enableRTL?(i=n+r-d<0?n+r-d:1,a.css({left:"auto",right:i+"px"})):(i=h<n+d?n+d-h:1,a.css("left",-1*i+"px"))):"left"==t&&d<n||"right"==t&&h<=s.left+r+d&&d<n?a.css("left",-(d+4)+"px"):a.css("left",c(e).outerWidth()+4+"px"):"left"==t&&d<n||"right"==t&&h<=s.left+r+d&&d<n?a.css("left",-(d+4)+"px"):(a.css("left",c(e).outerWidth()+4+"px"),l=a.outerHeight(),n=(r=c(window).height())-(s.top-c(window).scrollTop()),r<l?(o=s.top-c(window).scrollTop(),a.css("top",4-o+"px")):n<l?(o=n-l,a.css("top",o-2+"px")):a.css("top","")):((h-=s.left+2*d+4)<0?(h=null==d?"-206.5px":"-"+(d+5)+"px",a.css("left",h)):a.parent("li.e-list").parent("ul").width()&&"right"==t?a.css("left",a.parent("li.e-list").parent("ul").width()+4+"px"):s.left>d&&a.css("left",-(d+4)+"px"),l=a.outerHeight(),s.top+l>c(window).height()?(d=-l+c(e).outerHeight(),l>s.top+c(e).outerHeight()/2?a.css("top",-l/2+"px"):a.css("top",d+"px")):a.css("top","0px"))},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e+" e-menu-wrap")},_setSeparator:function(e){e?(this.element.addClass("e-separator"),0<c(".e-menu-popwrap").length&&!u.isNullOrUndefined(this.ulTag)&&this.ulTag.addClass("e-separator")):this.element.removeClass("e-separator")},_contextMenuEvents:function(e){this[e](c(this.model.contextMenuTarget),"mouseup taphold",this._ContextMenuHandler),this[e](this.element,"contextmenu",this._onDefaultPreventer),this[e](c(this.model.contextMenuTarget),"contextmenu",this._onDefaultPreventer),this[e](c(document),"mousedown",this._onContextClose)},_show:function(e,t,i){var s,n=c("> ul",e),a=this._max_zindex();n.attr({"aria-hidden":!1}),this._hideAnimation(c(e).siblings().find(" > ul:visible"),i),-1<c.inArray(this._disabledMenuItems,e)||("none"!=n.css("display")?(s=this.model.openOnClick?c(n):n.children().find("> ul"),this._hideAnimation(s,i)):c("> ul",e).children().find("> ul").hide(),this._subMenuPos(e,this.model.subMenuDirection),n.css({"z-index":a+1}),c(e).children("span.e-menu-arrow").css({"z-index":a+2}),"block"==c("> ul",e).css("display")||c(e).hasClass("e-disable-item")||(this._showAnimation(n,t),n.closest("li").addClass("e-active e-mfocused")),0<c(e).siblings("li.e-active").length&&c(e).siblings("li.e-active").removeClass("e-active e-mfocused"))},_closeAll:function(){this._hideAnimation(this.element.find('li.e-list:has("> ul")').find("> ul:visible"),this._hideAnim),this._hideAnimation(this.element.find("> ul:visible"),this._hideAnim)},_showAnimation:function(e,t){switch(t){case"slideDown":e.slideDown(this.model.enableAnimation?200:0);break;case"none":e.css("display","block")}},_hideAnimation:function(e,t){switch(t){case"slideUp":c(e).attr({"aria-hidden":!0}),e.slideUp(this.model.enableAnimation?100:0);break;case"none":e.css("display","none")}e.closest("li").removeClass("e-active e-mfocused")},_removeValue:function(e,t){for(var i=u.browserInfo(),s="8.0"===i.version&&"msie"===i.name?e[0].outerText:e[0].textContent,n=c(t).length,a=0,r=0==c(t).children("a").length?c(t).children("span"):c(t).children("a");a<=n;){if(c(r[a]).text()===s)return a;a++}},_createSubLevelItem:function(e,t){var i=c(document.createElement("ul"));i.append(t),e.append(i),e.attr({role:"menu","aria-haspopup":"true"}),e.addClass("e-haschild"),this.element.find('li:has("> ul")').find("> a,>span").addClass("aschild e-arrow-space"),this._insertArrows(i)},_insertArrows:function(e){this.model.showRootLevelArrows?e.find(">a,>span").append(c("<span>").addClass("e-icon e-arrowhead-down")).addClass("e-arrow-space"):e.find(">a,>span").removeClass("e-arrow-space").find(">span.e-icon").remove(),this.model.showSubLevelArrows?e.parent("li.e-list:has(>ul)").children("a,span").append(c("<span>").addClass("e-icon e-arrowhead-right")).addClass("e-arrow-space"):e.parent("li.e-list:has(>ul)").children("a,span").removeClass("e-arrow-space").find(">span.e-icon").remove()},_createMenuItem:function(e){var t,i,s=c(document.createElement("li"));return s.attr({class:"e-list",role:"menuitem"}),e.htmlAttribute&&this._setAttributes(e.htmlAttribute,s),e.text&&""!=e.text&&((t=c(document.createElement("a"))).attr({class:"e-menulink"}),e.imageUrl&&""!=e.imageUrl?((i=c(document.createElement("img"))).attr("src",e.imageUrl),e.imageAttribute&&this._setAttributes(e.imageAttribute,i),t.append(i)):e.spriteCssClass&&""!=e.spriteCssClass&&((i=c(document.createElement("span"))).addClass(e.spriteCssClass),t.append(i)),t.append(e.text),e.linkAttribute&&this._setAttributes(e.linkAttribute,t),e.url&&t.attr("href",e.url),s.append(t)),e.id&&s.prop("id",e.id),this.model.enabled||s.addClass("e-disable-item"),s},_insertNode:function(e,t,i){var s=0,n=0,a=0,r=[];for(c(t).is(this.element)?r.push(this.element):"string"==typeof t?r.push(this.element.find(t)):void 0===t?r.push(this.element):r.push(t),n=0;n<r.length;n++)for(a=0;a<r[n].length;a++)for(s=0;s<e.length&&!u.isNullOrUndefined(e[s]);s++)this._addItem(e[s],r[n][a],i)},_addItem:function(e,t,i){var s;switch(this._wireEvents("_off"),s=this._createMenuItem(e),t=c("default"===t?"#"+e.parentId:t),i){case"insert":0!=(i=c(t).is(this.element)?t:t.children("ul")).length?i.append(s):this._createSubLevelItem(t,s);break;case"insertBefore":c(t).is(this.element)?t.prepend(s):s.insertBefore(t);break;case"insertAfter":c(t).is(this.element)?t.append(s):s.insertAfter(t)}this._wireEvents("_on")},_removeItem:function(e){0==e.siblings("li").length?(e.closest("ul").siblings("a.aschild").removeClass("aschild e-arrow-space").children("span.e-icon").remove(),(e.closest("ul").hasClass("e-menu")?e:e.closest("ul")).remove()):e.remove()},_hiddenElement:function(e){0<e.length&&-1==c.inArray(e[0],this._hiddenMenuItems)&&(e.addClass("e-hidden-item"),this._hiddenMenuItems.push(e[0]))},_showElement:function(e){0<e.length&&-1<c.inArray(e[0],this._hiddenMenuItems)&&(e.removeClass("e-hidden-item"),this._hiddenMenuItems.splice(this._hiddenMenuItems.indexOf(e[0]),1))},_getNodeByID:function(e){return u.isNullOrUndefined(this.popupWrapper)?"object"!=typeof e&&""!=e&&(e=this.element.find(".e-list"+e)):"object"!=typeof e&&""!=e&&(e=this.popupWrapper.children().find(".e-list"+e)),c(e)},_processItems:function(e,t){for(var i=this._getNodeByID(e),s=0;s<i.length;s++)t?this._showElement(c(i[s])):this._hiddenElement(c(i[s]))},insert:function(e,t){this._insertNode(e,t,"insert")},insertBefore:function(e,t){this._insertNode(e,t,"insertBefore")},insertAfter:function(e,t){this._insertNode(e,t,"insertAfter")},remove:function(e){for(var t=0,i=0,t=0;t<e.length;t++)for(e[t]="string"==typeof e[t]?this.element.find(e[t]):e[t],i=0;i<e[t].length;i++)"LI"===e[t][i].tagName||"UL"===e[t][i].tagName?this._removeItem(c(e[t][i])):e[t][i].remove()},showContextMenu:function(e,t,i,s,n){if(this._closeMenu(),this._eventArgs=s,u.isNullOrUndefined(s)||!this._checkForExclusion(s.target))return this._trigger("beforeOpen",{target:i,events:s})||this._preventContextOpen&&(u.isNullOrUndefined(i)?u.isNullOrUndefined(target)?this._targetElement=this.element:this._targetElement=target:this._targetElement=i,n&&(e=(s=this._calculateContextMenuPosition(s)).X,t=s.Y),this.element.css({left:e,top:t}),this.element.css({"z-index":this._max_zindex()+1}),this._showAnimation(this.element,this._showAnim),this._isContextMenuOpen=!0,this.element.focus(),this._trigger("open",{target:i}),this._on(u.getScrollableParents(c(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)),!1},_checkForExclusion:function(e){if(!u.isNullOrUndefined(this.model.excludeTarget))for(var t=this.model.excludeTarget.split(","),i=0;i<t.length;i++)if(c(e).closest(this.model.excludeTarget).is(c.trim(t[i])))return!0},hideContextMenu:function(e){this._closeMenu(),this.element.find(".e-mhover").removeClass("e-mhover"),this.element.find(".e-mfocused").removeClass("e-mfocused"),this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",c.extend({events:e},e)),this._off(u.getScrollableParents(c(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)},disableItem:function(e){var t=c(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return c.trim(c(this).text())===e});0<t.length&&!(-1<c.inArray(t.parent()[0],this._disabledMenuItems))&&(t.parent().addClass("e-disable-item").attr({"aria-disabled":!0}),t.parent().find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(t.parent()[0]))},disableItemByID:function(e){e&&""!=e&&(!(e=this.element.find("#"+e)?this.element.find("#"+e)[0]:p)||-1<c.inArray(e,this._disabledMenuItems)||(c(e).addClass("e-disable-item").attr({"aria-disabled":!0}),c(e).find(">a.aschild span.e-icon").addClass("e-disable"),this._disabledMenuItems.push(e)))},getHiddenItems:function(){return this._hiddenMenuItems},hideItems:function(e){if("object"==typeof e&&e.length!==p)for(var t=0;t<e.length;t++)this._processItems(e[t],!1);else this._processItems(e,!1)},showItems:function(e){if("object"==typeof e&&e.length!==p)for(var t=0;t<e.length;t++)this._processItems(e[t],!0);else this._processItems(e,!0)},enableItem:function(e){var t=c(this.element.find("li.e-list >a ,li.e-list >span")).filter(function(){return c.trim(c(this).text())===e});0<t.length&&-1<c.inArray(t.parent()[0],this._disabledMenuItems)&&(t.parent().removeClass("e-disable-item").attr({"aria-disabled":!1}),t.parent().find(">a.aschild span.e-icon").removeClass("e-disable"),t=this._removeValue(t,this._disabledMenuItems),this._disabledMenuItems.splice(t,1))},enableItemByID:function(e){if(e&&""!=e){var t=this.element.find("#"+e)[0];if(t&&-1<c.inArray(t,this._disabledMenuItems)){c(t).removeClass("e-disable-item").attr({"aria-disabled":!1}),c(t).find(">a.aschild span.e-icon").removeClass("e-disable");for(var i=this._disabledMenuItems.length-1;0<=i;i--)this._disabledMenuItems[i].id==e&&this._disabledMenuItems.splice(i,1)}}},disable:function(){this.model.enabled=!1;var e=this.element.find(">li[class~=e-list]"),i=this;c.each(e,function(e,t){-1<c.inArray(t,i._disabledMenuItems)||(c(t).addClass("e-disable-item").attr({"aria-disabled":!0}),c(t).find(">a.aschild span.e-icon").addClass("e-disable"),i._disabledMenuItems.push(t))})},enable:function(){var i=this;this.model.enabled=!0;var e=this.element.find("li.e-disable-item");c.each(e,function(e,t){c(t).removeClass("e-disable-item").attr({"aria-disabled":!1}),c(t).find(">a.aschild span.e-icon").removeClass("e-disable"),i._disabledMenuItems.pop(t)})},show:function(e,t,i,s){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.showContextMenu(e,t,i,s,!1):this.element.css("display","block")},hide:function(e){if(!this.model.enabled)return!1;"contextmenu"==this.model.menuType?this.hideContextMenu(e):(this._closeMenu(),this.element.css("display","none"))},_wireEvents:function(e){this[e](this.element.find("li.e-list"),"mouseout",this._mouseOutHandler),this[e](this.element.find("li.e-list"),"mouseover",this._mouseOverHandler),this[e](this.element.children(),"click",this._onClickHandler),this[e](this.element,"keydown",this._onKeyDownHandler),this[e](this.element,"focus",this._OnFocusHandler),this[e](this.element,"blur",this._OnFocusOutHandler),"contextmenu"==this.model.menuType&&null!=c(this.model.contextMenuTarget)[0]&&this._contextMenuEvents(e),"contextmenu"!=this.model.menuType&&(this[e](c(document),"click",this._onDocumentClick),this[e](this.element,"mousedown",this._onMouseDownHandler)),this[e](c(window),"resize",c.proxy(this._onResize,this))},_mouseOverHandler:function(e){var t;if(this.element.find(".e-mhover").removeClass("e-mhover"),e.currentTarget=c(e.target).closest("li")[0],c(e.currentTarget).hasClass("e-disable-item")?this._isFocused=!1:c(e.currentTarget).addClass("e-mhover"),e.stopPropagation&&e.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!0,this._isMenuOpen=!0,c(e.currentTarget.parentNode.parentNode).is(this.element)?this._isSubMenuOpen=!1:this._isSubMenuOpen=!0,"LI"==e.currentTarget.nodeName)t=e.currentTarget;else{if(!e.currentTarget.parentNode)return e.preventDefault(),!1;if("LI"!=e.currentTarget.parentNode.nodeName)return!1;t=e.currentTarget.parentNode}c(e.currentTarget).hasClass("e-disable-item")||this._onMenuIntent(t,this,this._hoverOpen),-1<c.inArray(t,this._disabledMenuItems)||(t={text:c(t).children("a,span").text(),element:t,event:e,ID:u.isNullOrUndefined(t)?"":c(t)[0].id},this._trigger("mouseover",c.extend({events:t},t)))},_onMouseDownHandler:function(e){c(e.target).hasClass("e-menu")&&(this._isFocused=!1)},_mouseOutHandler:function(e){var t;if(c(e.currentTarget).removeClass("e-mhover"),e.stopPropagation&&e.stopPropagation(),void 0!==this._delaySubMenuHover&&clearTimeout(this._delaySubMenuHover),void 0!==this._delaySubMenuHover&&clearTimeout(this._delayMenuHover),this._mouseOver=!1,this._isMenuOpen=!1,"LI"==e.currentTarget.nodeName)t=e.currentTarget;else{if(!e.currentTarget.parentNode)return e.preventDefault(),!1;if("LI"!=e.currentTarget.parentNode.nodeName)return!1;t=e.currentTarget.parentNode}this._onHide(t,this,this._hoverClose),-1<c.inArray(t,this._disabledMenuItems)||(t={text:c(t).children("a,span").text(),element:t,event:e,ID:u.isNullOrUndefined(t)?"":c(t)[0].id},this._trigger("mouseout",c.extend({events:t},t)))},_onClickHandler:function(e){var t,i,s,n="",a=!(this._isFocused=!0);!c(e.target).closest("li.e-list").hasClass("e-disable-item")&&0<c(e.target).closest("li.e-list").length?(s=c(e.target).closest("li.e-list")[0],c(s).is(this.element.find(">li.e-list"))&&(this._activeElement=s),c(e.target).is("a")&&c(s).find(">a,>span").hasClass("aschild")&&this.model.openOnClick&&(this._isFocused=!1),!this._hoverOpen&&c(s).find(">a,>span").hasClass("aschild")&&(this._show(s,this._showAnim,this._hideAnim),a=!(this._hoverOpen=!1)),-1<c.inArray(s,this._disabledMenuItems)||("contextmenu"==this.model.menuType&&this._isContextMenuOpen&&!c(s).hasClass("e-haschild")&&(this._hideAnimation(this.element,this._hideAnim),this._isContextMenuOpen=!1,this._trigger("close",c.extend({events:e},e)),this._off(u.getScrollableParents(c(this.model.contextMenuTarget)),"scroll",this.hideContextMenu)),a||c(s).find(">a,>span").hasClass("aschild")||(this._closeMenu(),this.model.openOnClick&&(this._hoverOpen=!1)),i=c(s).children("a,span").text(),a=0!=(a=c(s).closest("ul").parent("li")).length?(t=u.isNullOrUndefined(a.attr("id"))?null:a.attr("id"),a.children("a,span").text()):t=null,n=u.isNullOrUndefined(s)?"":c(s)[0].id,a={text:i,element:s,event:e,selectedItem:this.selectedItem,ID:n,parentId:t,parentText:a},this._trigger("click",c.extend({events:a},a)),this.selectedItem=null,this.model.openOnClick&&"contextmenu"!=this.model.menuType&&this.element.focus())):c(e.target).is(this.element)&&(this._activeElement=this.element.find(">li:first"))},_onKeyDownHandler:function(e){if(e.target&&e.target.nodeName&&0<c(e.target).closest("input, textarea").length)return!0;if("contextmenu"!=this.model.menuType||this._isContextMenuOpen){var t,i,s,n,a,r,o,l="",d=this.element.find(".e-mhover"),h=this.element.find(".e-mfocused");if(0<!c(d).length&&0<c(this._activeElement).length&&(d=h=c(this._activeElement)),9==e.keyCode?(this._isFocused=!1,this._OnFocusOutHandler()):37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode||e.preventDefault(),40==e.keyCode&&("horizontal"==this.model.orientation?0<this.element.find(">li.e-mhover").children("ul").length||0<c(this._activeElement).length?("none"===c(d).children("ul").css("display")&&this._show(d[d.length-1],this._showAnim,this._hideAnim),d.removeClass("e-mhover e-mfocused").children("ul:first").find("li:first").addClass("e-mhover"),(null==this._activeElement?d:c(this._activeElement)).addClass("e-mfocused")):(n=d.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),c(d[d.length-1]).removeClass("e-mfocused e-mhover"),(i=0<c(n[n.index(d)+1]).length?c(n[n.index(d[d.length-1])+1]):n.first()).addClass("e-mhover")):"horizontal"!=this.model.orientation&&(n=(0==d.length?this.element:d.parent()).children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),d.removeClass("e-mfocused e-mfocused"),(i=0<d.length?(d.removeClass("e-mhover"),0<c(n[n.index(d[d.length-1])+1]).length?c(n[n.index(d[d.length-1])+1]):n.first()):n.first()).addClass("e-mhover"))),39==e.keyCode&&("horizontal"==this.model.orientation&&(this.element.find(">li.e-list").hasClass("e-mhover")||0<c(this._activeElement).length)?(d.removeClass("e-mfocused e-mhover"),n=this.element.children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(i=0<c(n[n.index(d[d.length-1])+1]).length?c(n[n.index(d[d.length-1])+1]):n.first()).addClass("e-mhover")):0<c(d).children("ul").length?(d.removeClass("e-mfocused e-mhover"),a=d.children("ul:first").find("li:first"),this._show(d[d.length-1],this._showAnim,this._hideAnim),n=d.addClass("e-mfocused").children("ul:first").children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(i=0<c(n[n.index(a)]).length?c(n[n.index(a)]):n.first()).addClass("e-mhover")):d.children("ul").length<=0&&"horizontal"==this.model.orientation&&d.parent().closest(".e-list").parent().hasClass("e-menu")&&(this._hideAnimation(d.parent(),this._hideAnim),d.removeClass("e-mfocused e-mhover"),c(h[h.length-1]).removeClass("e-mfocused"),n=d.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(i=0<c(n[n.index(h[h.length-1])+1]).length?c(n[n.index(h[h.length-1])+1]):c(n[n.index(h.first())])).addClass("e-mhover"))),38==e.keyCode&&("horizontal"==this.model.orientation?(n=d.parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),d.removeClass("e-mfocused e-mhover"),i=0<c(n[n.index(d[d.length-1])-1]).length?c(n[n.index(d[d.length-1])-1]):n.last()):"horizontal"!=this.model.orientation&&(n=(0==d.length?this.element:d.parent()).children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),i=0<d.length?(d.removeClass("e-mfocused e-mhover"),0<c(n[n.index(d[d.length-1])-1]).length?c(n[n.index(d[d.length-1])-1]):n.last()):n.last()),i.addClass("e-mhover")),37==e.keyCode&&("horizontal"==this.model.orientation?this.element.find(">li.e-list").hasClass("e-mhover")||0<c(this._activeElement).length?(d.removeClass("e-mfocused e-mhover"),n=this.element.find("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(i=0<c(n[n.index(d[d.length-1])-1]).length?c(n[n.index(d[d.length-1])-1]):n.last()).addClass("e-mhover")):(this._hideAnimation(d.parent(),this._hideAnim),d.removeClass("e-mfocused e-mhover"),c(h[h.length-1]).removeClass("e-mfocused e-active"),n=d.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(i=0<d.parent().closest(".e-list").parent(".e-menu").length?0<c(n[n.index(h[h.length-1])-1]).length?c(n[n.index(h[h.length-1])-1]):n.last():0<c(n[n.index(h[h.length-1])]).length?c(n[n.index(h[h.length-1])]):n.last()).addClass("e-mhover")):(0==d.parent(".e-menu").length||"contextmenu"==this.model.menuType&&0==d.parent("ul.e-context").length)&&(this._hideAnimation(d.parent(),this._hideAnim),d.removeClass("e-mfocused e-mhover"),c(h[h.length-1]).removeClass("e-mfocused"),n=d.parent().closest(".e-list").parent().children("li.e-list:visible:not(.e-hidden-item, .e-disable-item)"),(i=0<c(n[n.index(h[h.length-1])]).length?c(n[n.index(h[h.length-1])]):c(n[n.index(h.last())])).addClass("e-mhover"))),13==e.keyCode&&(r=c(d).children("a,span").text(),l=u.isNullOrUndefined(c(d)[0])?"":c(d)[0].id,o={menuId:this.element[0].id,text:r,selectedItem:h,ID:l},"contextmenu"==this.model.menuType?this._isContextMenuOpen&&0<d.length&&!h.hasClass("e-disable-item")&&(this.model.click&&this._trigger("click",c.extend({events:o},o)),this.selectedItem=null,this.hideContextMenu(e)):0<d.length&&!d.hasClass("e-disable-item")&&(c(d).find(">a,>span").hasClass("aschild")&&"none"===c(d).children("ul").css("display")?(this._show(d[0],this._showAnim,this._hideAnim),d.removeClass("e-mhover").children("ul:first").find("li:first").addClass("e-mhover")):(this.element.find(".e-mhover >a,.e-mhover >span ").focus(),this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),u.isNullOrUndefined(c(d).find(">a").attr("href"))&&this._trigger("click",c.extend({events:o},o)))),27==e.keyCode&&("contextmenu"==this.model.menuType?this.hideContextMenu(e):this.element.find("li.e-list").removeClass("e-mhover"),this.element.find('li.e-list:has("> ul")').find("> ul:visible").parents("li.e-list").addClass("e-mhover"),this._closeAll()),!c(e.target).is(this.element)||!e.target.parentNode)return!1;d.length&&(t=d),-1<c.inArray(t,this._disabledMenuItems)||(r=c(t).children("a,span").text(),l=u.isNullOrUndefined(t)?"":c(t)[0].id,!this.element.find("li.e-mfocused.e-mhover").length&&13!=e.keyCode||(s=13==e.keyCode?d:this.element.find("li.e-mfocused.e-mhover")),o={text:r,element:t,targetElement:s,event:e,ID:l},this._trigger("keydown",c.extend({events:o},o))),this._activeElement=null,h=this.element.find(".e-mfocused")}},_OnFocusHandler:function(e){"contextmenu"!=this.model.menuType&&!this.element.find(">li:first").hasClass("e-disable-item")&&this._isFocused&&0==this.element.find(".e-mhover").length&&0==c("li.e-ham-wrap").length?this.element.find(">li:first").addClass("e-mhover"):this._isFocused=!0,"contextmenu"!=this.model.menuType&&(this._activeElement=this.element.find(">li:first"))},_OnFocusOutHandler:function(){this._isFocused||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll()),this._isFocused=!1},_onDocumentClick:function(e){this.model.openOnClick&&(this._hoverOpen=!1),c(e.target).parents(".e-menu").is(this.element)||(this.element.find("li.e-list").removeClass("e-mhover e-mfocused"),this._closeAll(),this._isFocused=!0),c(e.target).parents("ul.e-menu").is(this.popupWrapper)||c(e.target).hasClass("e-ham-wrap")||c(e.target).parent().hasClass("e-ham-wrap")||c(e.target).hasClass("e-hamburger")||c(e.target).parent("li").hasClass("e-haschild")||c(e.target).is("span.e-icon.e-arrowhead-down")||this._isOverflowPopupOpen()||"contextmenu"==this.model.menuType||!(0<c("li.e-ham-wrap").length)||this._overflowClose()},_ContextMenuHandler:function(e){var t=!1;"taphold"==e.type&&0!=e.button?t=!0:e.button?t=2==e.button:e.which&&(t=3==e.which);var i,s=e.target;t?("taphold"==(i=e).type&&(i="touchstart"==e.options.type?e.options.touches[0]:e.options),this._showSpeed,this.showContextMenu(null,null,s,i,!0)):this._isContextMenuOpen&&(s=this._hideAnim,i=this._hideSpeed,this.hideContextMenu(e,s,i))},_calculateContextMenuPosition:function(e){var t,i;this.element.css({top:"",left:""}),t=e.clientX+this.element.width()<c(window).width()?e.pageX:e.pageX-this.element.width(),i=e.clientY+this.element.height()<c(window).height()?e.pageY:e.clientY>this.element.height()?e.pageY-this.element.height():c(window).height()-this.element.outerHeight();e="static"!=c("body").css("position")?c("body").offset():{left:0,top:0};return{X:t-=e.left,Y:i-=e.top}},_onDefaultPreventer:function(e){return e.preventDefault(),e.stopPropagation(),!1},_onContextClose:function(e){var t,i,s=this;this._isContextMenuOpen&&(i=!1,(c(e.target).is(this.element)||c(e.target).parents(".e-context").is(this.element))&&(i=!0),i||(t=this._hideAnim,i=this._hideSpeed,this.hideContextMenu(e,t,i),e=c(e.target).parents(),c.each(e,function(e,t){t.id,s._ContextTargetId})))}}),u.Menu.Locale=u.Menu.Locale||{},u.Menu.Locale.default=u.Menu.Locale["en-US"]={titleText:"Menu"},u.MenuType={NormalMenu:"normalmenu",ContextMenu:"contextmenu"},u.Direction={Left:"left",Right:"right",None:"none"},u.AnimationType={None:"none",Default:"default"}}(jQuery,Syncfusion),function(h,r){r.widget("ejColorPicker","ej.ColorPicker",{_rootCSS:"e-colorpicker",element:null,model:null,validTags:["input","div"],_addToPersist:["value","opacityValue"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{enableOpacity:!0,opacityValue:100,columns:10,palette:"basicpalette",htmlAttributes:{},buttonMode:"split",custom:[],presetType:"basic",modelType:"picker",locale:"en-US",showPreview:!0,showTooltip:!1,showClearButton:!1,showSwitcher:!0,value:null,displayInline:!1,buttonText:{apply:"Apply",cancel:"Cancel",swatches:"Swatches"},tooltipText:{switcher:"Switcher",addButton:"Add Color",basic:"Basic",monoChrome:"Mono Chrome",flatColors:"Flat Colors",seaWolf:"Sea Wolf",webColors:"Web Colors",sandy:"Sandy",pinkShades:"Pink Shades",misty:"Misty",citrus:"Citrus",vintage:"Vintage",moonLight:"Moon Light",candyCrush:"Candy Crush",currentColor:"Current Color",selectedColor:"Selected Color"},showApplyCancel:!0,showRecentColors:!1,toolIcon:null,cssClass:"",enabled:!0,change:null,select:null,open:null,close:null,create:null,destroy:null},dataTypes:{modelType:"enum",palette:"enum",presetType:"enum",cssClass:"string",displayInline:"boolean",locale:"string",showSwitcher:"boolean",showRecentColors:"boolean",enabled:"boolean",showPreview:"boolean",enableOpacity:"boolean",buttonText:"data",custom:"array",htmlAttributs:"data"},observables:["value","opacityValue"],value:r.util.valueFunction("value"),opacityValue:r.util.valueFunction("opacityValue"),_setModel:function(e){for(var t in e)switch(t){case"enableOpacity":this.model.enableOpacity=e[t],this.popupContainer&&(this._previewSlider(this.model.enableOpacity),this._valueOperation());break;case"opacityValue":if(this.model.enableOpacity){this.model.opacityValue=e[t],this._tempOpacity=parseFloat(r.util.getVal(e[t])),this.popupContainer&&(this._tempOpacity=parseFloat(r.util.getVal(e[t])),this._opacity.option("value",this._tempOpacity),this._switch||this._changeOpacity(),this._updateValue(),this.opacityValue(this._tempOpacity),"function"==typeof e[t]?e[t](this.opacityValue()):e[t]=this.opacityValue());break}return!1;case"custom":this.model.custom=e[t],this._reInitialize();break;case"palette":this.model.palette=e[t],this._reInitialize();break;case"columns":this.model.columns=parseFloat(e[t]),this._reInitialize(),e[t]=this.model.columns;break;case"presetType":if(this.model.presetType=e[t],r.isNullOrUndefined(i[this.model.presetType]))return!1;this._reInitialize();break;case"buttonMode":this._unBindIconClick(),this._buttonElement=r.ColorPicker.ButtonMode.Split==e[t]?this.dropdownbutton:this.wrapper,r.ColorPicker.ButtonMode.Split==e[t]?this.wrapper.addClass("e-split"):this.wrapper.removeClass("e-split"),this._bindIconClick();break;case"showTooltip":this.model.showTooltip=e[t],this.popupContainer&&(this._colorSlider.option("showTooltip",e[t]),this._opacity.option("showTooltip",e[t]));break;case"value":this._setValue(r.util.getVal(e[t]),!0),"function"==typeof e[t]?e[t](this.value()):e[t]=this.value();break;case"modelType":this.model.modelType=e[t],this._reInitialize();break;case"showSwitcher":this.model.showSwitcher=e[t],this.popupContainer&&this._showSwitcher();break;case"tooltipText":this.model.tooltipText=e[t],this.popupContainer&&this._toolTipText(e[t]);break;case"locale":this.model.locale=e[t],this.popupContainer&&this._localize(e[t]);break;case"showPreview":this.model.showPreview=e[t],this.popupContainer&&this._previewPane(this.model.showPreview);break;case"buttonText":this._setButtonText=!0,this.model.buttonText=e[t],this.popupContainer&&this._buttonText(this.model.buttonText);break;case"displayInline":this.model.displayInline=e[t],this._setDisplayInline(e[t]);break;case"cssClass":this._setSkin(e[t]),this.model.cssClass=e[t];break;case"enabled":this._enabled(e[t]);break;case"showRecentColors":this.model.showRecentColors=e[t],this.popupContainer&&this._previewColor(this.model.showRecentColors);break;case"htmlAttributes":this.model.htmlAttributes=e[t],this._addAttr(this.model.htmlAttributes);break;case"showClearButton":this.model.showClearButton=e[t],this.popupContainer&&this._showClearIcon(e[t]);break;case"showApplyCancel":this.model.showApplyCancel=e[t],this.popupContainer&&this._buttonContainer()}},_setSkin:function(e){(this.wrapper||this.element).removeClass(this.model.cssClass).addClass(e)},_showSwitcher:function(){this.model.showSwitcher?(this._changeTag.removeClass("e-hide"),"picker"==this.model.modelType?this._switcher.addClass("e-paletteModel").removeClass("e-pickerModel"):this._switcher.addClass("e-pickerModel").removeClass("e-paletteModel")):this._changeTag.addClass("e-hide")},_pickerType:function(){this._modelType="picker",this.PaletteWrapper.removeAttr("style"),this.PaletteWrapper.addClass("e-hide"),this._gradient.removeClass("e-hide"),this._gradient.fadeIn(200),this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this._switcher.removeAttr("class"),this._switcher.addClass("e-color-image e-paletteModel"),this._switch=!0,this._rgbValue(),this._hueGradient(),this._updateUI(),this._alphaGradient(this.RGBToHEX(this.rgb)),this._hsva.ejButton("enable"),this._switchEvents(),this._unSwitchEvents(),this._hideUnBindEvents(),this.isPopupOpen&&this._showBindEvents(),"default"==this.model.modelType?this._changeTag.removeClass("e-hide"):this._changeTag.addClass("e-hide"),this.popupList.prepend(this._gradient),this._showSwitcher()},_paletteType:function(){this._gradient.removeAttr("style"),this._presetTag.parents(".e-split.e-widget").removeClass("e-hide"),this.PaletteWrapper.removeClass("e-hide"),this.PaletteWrapper.fadeIn(200),this._switch=!1,this._disableHSVButton(),this._cellSelect(),this._switchEvents(),this._unSwitchEvents(),this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType),this.popupList.prepend(this.PaletteWrapper),this._showSwitcher()},_reInitialize:function(){this._destroyPalette(!1)},_destroyPalette:function(e){this.PaletteWrapper.remove(),(e||this._columns!=this.model.columns&&"custompalette"!==this.model.palette)&&(this.PaletteWrapper=this._presetType(this._presetsId)),this._temp!==this.model.presetType&&(this.PaletteWrapper=this._layoutType(this.model.palette)),"palette"==this.model.modelType&&(this._modelType="palette",this.PaletteWrapper=this._layoutType(this.model.palette),this._hideUnBindEvents(),this.isPopupOpen&&this._showBindEvents(),this._gradient.addClass("e-hide"),this._paletteType(),e||"custompalette"==this.model.palette||this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType)),"picker"==this.model.modelType&&(this._pickerType(),this.model.displayInline&&!this.element.is("input")&&this._footer.addClass("e-hide")),this._temp=this.model.presetType,this._columns=this.model.columns,"picker"==this._modelType?this._presetTag.parents(".e-split.e-widget").addClass("e-hide"):this._presetTag.parents(".e-split.e-widget").removeClass("e-hide"),this.refresh()},_previewColor:function(e){e?(this._swatchesArea.css("display","block"),this._bindRecentEvent()):(this._swatchesArea.css("display","none"),this._unBindRecentEvent())},_buttonText:function(e){this._setButtonText?this._setButtonText=!1:h.extend(this.model.buttonText,e),r.isNullOrUndefined(this._buttonTag)||this._buttonTag.html(this.model.buttonText.apply),r.isNullOrUndefined(this._cancelTag)||this._cancelTag.html(this.model.buttonText.cancel),this._spnTag.html(this.model.buttonText.swatches)},_toolTipText:function(e){h.extend(this.model.tooltipText,e),this._addTitleText()},_previewPane:function(e){e?this._previewTag.removeClass("e-hide"):this._previewTag.addClass("e-hide")},_previewSlider:function(e){e?this._opacity.enable():this._opacity.disable()},_getLocalizedLabels:function(){return r.getLocalizedConstants(this.sfType,this.model.locale)},_localize:function(){this._localizedLabels=this._getLocalizedLabels(),"en-US"==this._options.locale&&!r.isNullOrUndefined(this._options.buttonText)||!r.isNullOrUndefined(this._options.tooltipText)?(r.isNullOrUndefined(this._options.buttonText)||this._buttonText(this._options.buttonText),r.isNullOrUndefined(this._options.tooltipText)||this._toolTipText(this._options.tooltipText)):r.isNullOrUndefined(this._localizedLabels)||(r.isNullOrUndefined(this._localizedLabels.buttonText)||this._buttonText(this._localizedLabels.buttonText),r.isNullOrUndefined(this._localizedLabels.tooltipText)||this._toolTipText(this._localizedLabels.tooltipText))},_destroy:function(){this.model.displayInline&&h(window).off("resize",h.proxy(this._OnWindowResize,this)),this.isPopupOpen&&this.hide(),this.popupContainer&&this.popupContainer.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove(),this._presetContainer&&this._presetContainer.parent(".e-menu-wrap").remove()),this.element.removeClass("e-colorpicker e-input e-widget").removeAttr("style name").val(this.element.attr("value"))},_init:function(e){this._options=e,this._browser=r.browserInfo(),this._isFocused=!1,this.isPopupOpen=!1,this._dataBind=!1,this._modelType="picker",this._id&&h("#"+this._id+"_popup").remove(),this._id,h("#"+this._id+"_Presets").parent(".e-menu-wrap").remove(),"basicpalette"===this.model.palette&&(this._presetsId="e-presets30"),this._tempOpacity=this.opacityValue(),this._renderControl(),r.isNullOrUndefined(this.value())&&""!==this.element[0].value?this._tempValue=this.element[0].value:this._tempValue=this.value(),this._previousValue=this._previousColor=this._tempValue,this._tempValue&&this._setValue(this._tempValue),this._columns=this.model.columns,this._temp=this.model.presetType,this._tempValue||(this._previousValue=""),this.model.enabled||this._enabled(this.model.enabled)},_renderPopup:function(){this._renderPopupPanelWrapper(),this._selectedButton=this._groupTag.find(".e-click"),this._buttonContainer(),this._renderPopupElement(),this._previewPane(this.model.showPreview),this._previewColor(this.model.showRecentColors),this._localize(),this.popupContainer.css("display","none"),h("body").append(this.popupContainer),this._isOpen=!1,this._switch&&this._previewSlider(this.model.enableOpacity),this.element.is("input")&&(0==this.popupContainer.find("button.e-applyButton").length&&this._buttonContainer(),this._footer.css({display:"block"}),this.wrapper.removeClass("e-focus"),this._off(h(document),"mousedown",this._onDocumentClick)),this._isFocused=this.isPopupOpen=!1,this._wirePopupEvents(),this._switchEvents(),this._tempOpacity=this.opacityValue(),"custompalette"===this.model.palette&&this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this.popupContainer.find("button.e-presets").ejSplitButton({targetID:this._presetContainer.attr("id")}),this._tempValue&&(this._setValue(this._tempValue),this._switch&&this._rgbValue()),this._hsvValue(),this._hueGradient(),this._addTitleText(),this._showClearIcon(this.model.showClearButton),this._tempValue||(this._colorSlider.option("value",parseInt(this._hsv.h)),this._opacity.option("value",this._tempOpacity),this._alphaGradient("#fff")),this._addAttr(this.model.htmlAttributes)},_renderControl:function(){this._createWrapper(),this._buttonElement=r.ColorPicker.ButtonMode.Split==this.model.buttonMode?this.dropdownbutton:this.wrapper,this.model.buttonMode==r.ColorPicker.ButtonMode.Split&&this.element.is("input")&&this.wrapper.addClass("e-split"),this._addAttr(this.model.htmlAttributes),this._setDisplayInline(this.model.displayInline),this._wireEvents()},_createWrapper:function(){this.element.is("input")&&(this.element.addClass("e-input e-widget"),this.element.attr("aria-label","colorpicker"),this.spanElement=r.buildTag("span.e-selected-color"),this.wrapper=r.buildTag("span.e-colorwidget e-picker e-widget "+this.model.cssClass).attr({tabindex:"0","aria-expanded":!1,"aria-haspopup":!0,"aria-owns":"popup"}),this._id&&this.wrapper.attr("id",this._id+"Wrapper"),this.container=r.buildTag("span.e-in-wrap e-box e-splitarrowright"),this.drpbtnspan=r.buildTag("span.e-icon e-arrow-sans-down","",{},{"aria-label":"select"}),this.dropdownbutton=r.buildTag("span.e-select","",{},{role:"button"}).append(this.drpbtnspan),this.iconWrapper=r.buildTag("span.e-tool-icon "+this.model.toolIcon),this.colorContainer=r.buildTag("span.e-color-container"),this.colorContainer.append(this.spanElement),this.container.insertAfter(this.element),r.isNullOrUndefined(this.model.toolIcon)||(this.colorContainer.prepend(this.iconWrapper),this.container.addClass("e-tool")),this.container.append(this.colorContainer),this.container.append(this.element,this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.element.css("display","none").val(this.value())),this._checkNameAttr()},_addTitleText:function(){this._switcher.attr("title",this.model.tooltipText.switcher),this._spanTag.attr("title",this.model.tooltipText.addButton),this._presetLi.find("#e-presets00").attr("title",this.model.tooltipText.webColors),this._presetLi.find("#e-presets01").attr("title",this.model.tooltipText.vintage),this._presetLi.find("#e-presets02").attr("title",this.model.tooltipText.seaWolf),this._presetLi.find("#e-presets10").attr("title",this.model.tooltipText.sandy),this._presetLi.find("#e-presets11").attr("title",this.model.tooltipText.pinkShades),this._presetLi.find("#e-presets12").attr("title",this.model.tooltipText.moonLight),this._presetLi.find("#e-presets20").attr("title",this.model.tooltipText.monoChrome),this._presetLi.find("#e-presets21").attr("title",this.model.tooltipText.misty),this._presetLi.find("#e-presets22").attr("title",this.model.tooltipText.flatColors),this._presetLi.find("#e-presets30").attr("title",this.model.tooltipText.basic),this._presetLi.find("#e-presets31").attr("title",this.model.tooltipText.candyCrush),this._presetLi.find("#e-presets32").attr("title",this.model.tooltipText.citrus),this._currentTag.attr("title",this.model.tooltipText.currentColor),this._previousTag.attr("title",this.model.tooltipText.selectedColor)},_renderPopupPanelWrapper:function(){this.popupContainer=r.buildTag("div.e-colorpicker e-box e-popup e-widget "+this.model.cssClass,"",{},{role:"grid","aria-readonly":"true",tabindex:"0",style:"visibility:hidden"}),this._id&&this.popupContainer.attr("id",this._id+"_popup"),h("body").append(this.popupContainer),this.popupList=r.buildTag("div.e-popupWrapper"),this._gradient=r.buildTag("div.e-container"),this._colorArea=r.buildTag("div.e-hsv-color"),this._gradientArea=r.buildTag("div.e-hsv-gradient"),this._handleArea=r.buildTag("div.e-draghandle e-color-image"),"msie"==this._browser&&this._handleArea.addClass("e-pinch"),this._colorArea.append(this._gradientArea,this._handleArea),this._picker=r.buildTag("div.e-gradient"),this._hueSlider=r.buildTag("div.e-widget e-hue e-state-default"),this._alphaSlider=r.buildTag("div.e-widget e-opacity e-state-default"),this._picker.append(this._hueSlider,this._alphaSlider),this._gradient.append(this._colorArea,this._picker),this.popupList.append(this._gradient),this._footerBlock=r.buildTag("div.e-footerContainer"),this._templateWrapper=r.buildTag("div.e-buttons"),this._groupTag=r.buildTag("div.e-grpbtn"),this._formEle=r.buildTag("div.e-form"),this._rgb=r.buildTag("button.e-rgbButton e-click","",{},{type:"button"}),this._hexCode=r.buildTag("button.e-hexButton","",{},{type:"button"}),this._hsva=r.buildTag("button.e-hsvButton","",{},{type:"button"}),this._groupTag.append(this._rgb,this._hexCode,this._hsva),this._codeEditor=r.buildTag("div.e-codeeditor"),this._inputTag=r.buildTag("input.e-color-code","",{},{type:"text",tabindex:"0",maxLength:"22"}),this._codeEditor.append(this._inputTag),this._inputTag.attr("aria-label","color-code"),this._formEle.append(this._groupTag,this._codeEditor),this._previewTag=r.buildTag("div.e-preview").attr({tabindex:"0"}),this._currentTag=r.buildTag("div.e-current"),this._previousTag=r.buildTag("div.e-previous"),this._previewTag.append(this._currentTag,this._previousTag),this._templateWrapper.append(this._formEle,this._previewTag),this._swatchesArea=r.buildTag("div.e-color-labels");this._divTag=r.buildTag("div.e-recent-color"),this._addTag=r.buildTag("div.e-colorblock e-block"),this._spanTag=r.buildTag("div.e-color e-color-image e-add"),this._addTag.append(this._spanTag),this._divTag.append(this._addTag);for(var e=0;e<11;e++){this._liTag=r.buildTag("div.e-colorblock e-block");var t=r.buildTag("div.e-color e-color-image e-empty");this._liTag.append(t),this._divTag.prepend(this._liTag)}this._swatchesArea.append(this._divTag),this._footer=r.buildTag("div.e-footer"),this._swatches=r.buildTag("div.e-element"),this._changeTag=r.buildTag("div.e-switcher").attr("tabindex","0"),this._switcher=r.buildTag("div.e-color-image"),this._presetTag=r.buildTag("button.e-presets e-colorSplit"),this._presets=r.buildTag("div"),this._changeTag.append(this._switcher),this._presetTag.append(this._presets),this._swatches.append(this._changeTag,this._presetTag),this._footer.append(this._swatches),this._footerBlock.append(this._templateWrapper,this._swatchesArea,this._footer),this.PaletteWrapper=this._layoutType(this.model.palette),this.popupList.append(this.PaletteWrapper,this._footerBlock);var i=h("#"+this._id+"_Presets").get(0);i&&(h(i).parent().hasClass("e-menu-wrap")?h(i).parent():h(i)).remove(),this._presetContainer=h("<ul id='"+this._id+"_Presets' class='e-presetWrapper' style= top:87px ></ul>"),this._presetLi=r.buildTag("li.e-item"),this._presetLi.append(this._renderPresets()),this._presetContainer.append(this._presetLi),this.popupList.append(this._presetContainer),this.popupContainer.append(this.popupList),(this._browser.name="9.0"==this._browser.version||"8.0"==this._browser.version)?this._hueSlider.addClass("e-color-image e-filter"):this._hueSlider.addClass("e-common"),this._width=this._gradientArea.width(),this._height=this._gradientArea.height()},_buttonContainer:function(){this.model.showApplyCancel?(this._buttonTag=r.buildTag("button.e-applyButton","",{},{type:"button"}),this._cancelTag=r.buildTag("button.e-cancelButton","",{},{type:"button"}),this._footer.append(this._buttonTag,this._cancelTag),this._applyObj=this.popupContainer.find("button.e-applyButton").ejButton({text:this.model.buttonText.apply,type:"button",cssClass:"e-flat"}).data("ejButton"),this._cancelObj=this.popupContainer.find("button.e-cancelButton").ejButton({text:this.model.buttonText.cancel,type:"button",cssClass:"e-flat"}).data("ejButton"),this._on(this._cancelTag,"click",this._hidePopup),this._on(this._buttonTag,"click",this._buttonClick)):void 0!==this._buttonTag&&void 0!==this._cancelTag&&(this._buttonTag.remove(),this._cancelTag.remove(),this._off(this._cancelTag,"click",this._hidePopup),this._off(this._buttonTag,"click",this._buttonClick))},_addAttr:function(e){var i=this;h.map(e,function(e,t){"class"==t?i.wrapper.addClass(e):"required"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._enabled(!1):i.wrapper.attr(t,e)})},_showClearIcon:function(e){e?(this._clearIcon=r.buildTag("div",{},{},{class:"e-icon e-close_01"}).hide(),this._codeEditor.append(this._clearIcon),this._on(this._clearIcon,"mousedown",this._clearColor),this._on(this._clearIcon,"click",this._clearColor)):(this._clearIcon&&this._clearIcon.remove(),this._off(this._clearIcon,"mousedown",this._clearColor),this._off(this._clearIcon,"click",this._clearColor))},_colorPresetsClick:function(e){this._presetsId=e.currentTarget.id,"e-presets00"===this._presetsId?this.model.presetType="webcolors":"e-presets01"===this._presetsId?this.model.presetType="vintage":"e-presets02"===this._presetsId?this.model.presetType="seawolf":"e-presets10"===this._presetsId?this.model.presetType="sandy":"e-presets11"===this._presetsId?this.model.presetType="pinkshades":"e-presets12"===this._presetsId?this.model.presetType="moonlight":"e-presets20"===this._presetsId?this.model.presetType="monochrome":"e-presets21"===this._presetsId?this.model.presetType="misty":"e-presets22"===this._presetsId?this.model.presetType="flatcolors":"e-presets30"===this._presetsId?this.model.presetType="basic":"e-presets31"===this._presetsId?this.model.presetType="candycrush":"e-presets32"===this._presetsId&&(this.model.presetType="citrus"),this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType),h("#"+this._id+"_Presets").find("li.e-preset-row").removeClass("e-presetsactive"),h("#"+this._presetsId).addClass("e-presetsactive"),this.PaletteWrapper.remove(),"palette"==this._modelType&&(this.PaletteWrapper=this._layoutType(this.model.palette),this._gradient.addClass("e-hide"),this._paletteType(),this._switcher.addClass("e-pickerModel").removeClass("e-paletteModel"))},_renderPresets:function(){var e=r.buildTag("div.e-presets-table");this._spnTag=r.buildTag("span.e-presetHeader"),this._spnTag.html(this.model.buttonText.swatches),e.append(this._spnTag);for(var t,i=0;i<4;i++){t=r.buildTag("ul.e-tablerow");for(var s=0;s<3;s++)r.buildTag("li.e-color-image e-preset-row#e-presets"+[i]+[s]).appendTo(t);t.appendTo(e)}return e},_renderPopupElement:function(){var t=this;this._hsv={h:360,s:0,v:100},this._rgb.ejButton({text:"RGBA",type:"button"}),this._hexCode.ejButton({text:"HEX",type:"button"}),this._hsva.ejButton({text:"HSVA",type:"button"}),this._splitObj=this._presetTag.ejSplitButton({size:"normal",showRoundedCorner:!0,contentType:"imageonly"}).data("ejSplitButton"),this._splitObj.element.attr("aria-label","Presets"),this._splitObj.dropbutton.attr("aria-label","Select"),this._splitObj.option("beforeOpen",function(e){t._bindClickOperation(e)}),this._presetTag.parents(".e-split.e-widget").css({height:"27px"}),0==this.model.custom.length&&this._splitObj.option("prefixIcon","e-icon e-color-image e-"+this.model.presetType),h("#"+this._presetsId).addClass("e-presetsactive"),this._splitObj._getXYpos=function(e){h("#"+this.model.targetID).ejMenu({animationType:"none"});var t=this.dropbutton.offset();return{x:t.left-this.dropbutton.prev().outerWidth()-1,y:t.top-h("#"+this.model.targetID).outerHeight()-1}},this._colorSlider=this._hueSlider.ejSlider({orientation:"Vertical",showTooltip:this.model.showTooltip,minValue:0,maxValue:360,change:function(e){t._changeHue(e)},slide:function(e){t._changeHue(e)}}).data("ejSlider"),this._opacity=this._alphaSlider.ejSlider({value:this.opacityValue(),showTooltip:this.model.showTooltip,orientation:"Vertical",incrementStep:5,value:100,change:function(e){t._changeAlpha(e)},slide:function(e){t._changeAlpha(e)}}).data("ejSlider"),(this._browser.name="8.0"==this._browser.version)&&(this._handleTag=r.buildTag("div.e-handle-wrapper"),this._handleTag.appendTo(this._opacity.element.find("a.e-handle"))),this._colorSlider.firstHandle.css({height:"13px",width:"13px"}),this._opacity.firstHandle.css({height:"13px",width:"13px"}),this.popupContainer.css({visibility:"visible",display:"none"}),"picker"==this.model.modelType?(this._modelType="picker",this._gradient.removeClass("e-hide"),this.PaletteWrapper.addClass("e-hide"),this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this._showSwitcher(),this._switch=!0):"palette"==this.model.modelType&&(this._modelType="palette",this._presetTag.parents(".e-split.e-widget").removeClass("e-hide"),this.PaletteWrapper.removeClass("e-hide"),this._gradient.addClass("e-hide"),this._hsva.ejButton("disable"),this._showSwitcher(),this._switch=!1)},_layoutType:function(e){return"string"==typeof e&&"basicpalette"==e?this._collection=this._paletteGenerate(i[this.model.presetType],this.model.columns):"string"==typeof e&&"custompalette"==e&&"palette"==this.model.modelType&&(this._collection=this._paletteGenerate(this.model.custom,this.model.columns)),"custompalette"==e&&this._collection.addClass("e-custom"),this._collection},_presetType:function(e){return"e-presets00"===e?this._collection=this._paletteGenerate(i.webcolors,this.model.columns):"e-presets01"===e?this._collection=this._paletteGenerate(i.vintage,this.model.columns):"e-presets02"===e?this._collection=this._paletteGenerate(i.seawolf,this.model.columns):"e-presets10"===e?this._collection=this._paletteGenerate(i.sandy,this.model.columns):"e-presets11"===e?this._collection=this._paletteGenerate(i.pinkshades,this.model.columns):"e-presets12"===e?this._collection=this._paletteGenerate(i.moonlight,this.model.columns):"e-presets20"===e?this._collection=this._paletteGenerate(i.monochrome,this.model.columns):"e-presets21"===e?this._collection=this._paletteGenerate(i.misty,this.model.columns):"e-presets22"===e?this._collection=this._paletteGenerate(i.flatcolors,this.model.columns):"e-presets30"===e?this._collection=this._paletteGenerate(i.basic,this.model.columns):"e-presets31"===e?this._collection=this._paletteGenerate(i.candycrush,this.model.columns):"e-presets32"===e&&(this._collection=this._paletteGenerate(i.citrus,this.model.columns)),this._collection},_paletteGenerate:function(e,t){var i;for(this._PresetTable=r.buildTag("div.e-palette-color").attr({role:"presentation"}),this._tag=r.buildTag("div.e-row").attr({role:"row"}),i=0;i<e.length;i++)i&&i%t==0&&(this._tag=r.buildTag("div.e-row").attr({role:"row"})),this._td=r.buildTag("div.e-item").attr({role:"gridcell","aria-label":"#"+h.trim(e[i]),"data-value":"#"+h.trim(e[i]),style:"background-color:#"+h.trim(e[i])}),this._tag.append(this._td),this._PresetTable.append(this._tag);return this._PresetTable},_checkNameAttr:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id})},_enabled:function(e){e?this.enable():(this.model.enabled=!0,this.disable())},_setDisplayInline:function(e){!this.popupContainer&&this.model.displayInline&&this._renderPopup(),(this.model.displayInline=e)&&this.element.is("input")?(this.popupContainer.insertAfter(this.wrapper),this._footer.css({display:"none"}),this._setPopupPosition()):e?(this.element.append(this.popupContainer),this.popupContainer.find("button.e-applyButton").css({display:"none"}),this.popupContainer.find("button.e-cancelButton").css({display:"none"}),this._footer.css({display:"none"})):(this.popupContainer&&(this.popupContainer.css("display","none"),h("body").append(this.popupContainer),this._isOpen=!1),this.element.is("input")&&(this._bindIconClick(),this.wrapper.removeClass("e-focus"),this.popupContainer&&(0==this.popupContainer.find("button.e-applyButton").length&&this._buttonContainer(),this._footer.css({display:"block"}),this._off(h(document),"mousedown",this._onDocumentClick))),this._isFocused=this.isPopupOpen=!1),e&&(this.show(),this.element.is("input")&&this._off(h(this._buttonElement),"mousedown",this._iconClick),this._off(r.getScrollableParents(this.wrapper),"scroll",this.hide))},_bindIconClick:function(){var e=h._data(h(this._buttonElement)[0],"events");(r.isNullOrUndefined(e)||r.isNullOrUndefined(e.mousedown)||0==e.mousedown.length)&&this._on(this._buttonElement,"mousedown",this._iconClick)},_unBindIconClick:function(){this._off(this._buttonElement,"mousedown",this._iconClick)},_setPopupPosition:function(){var e=this.element.is("input")?this.wrapper:this.element,t=this._getOffset(e),i=h(document).scrollTop()+h(window).height()-(t.top+h(e).outerHeight()),s=t.top-h(document).scrollTop(),n=this.popupContainer.outerHeight(),a=this.popupContainer.outerWidth(),r=t.left,o=e.outerHeight(),l=(o-e.height())/2,d=this._getZindexPartial(),l=(n<i||s<n?t.top+o+3:t.top-n-3)-l;h(document).scrollLeft()+h(window).width()-r<a&&a<r+e.outerWidth()&&(r-=this.popupContainer.outerWidth()-e.outerWidth()),a+e.offset().left>h(window).width()&&(r=Math.abs(a-h(window).width())),this.popupContainer.css({left:r+"px",position:"absolute",top:l+"px","z-index":d})},_getOffset:function(e){return r.util.getOffset(e)},_getZindexPartial:function(){return r.util.getZindexPartial(this.element,this.popupContainer)},_setValue:function(e,t){"object"!=typeof e&&"number"!=typeof e&&!r.isNullOrUndefined(e.match("^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$"))||(e=null),this.value(e),this._tempValue=e,r.isNullOrUndefined(e)?this._setEmptyValue():this._renderModelValue(e),this._changeEvent(!1,t),this._selectEvent(),this.element.is("input")&&this._updateValue()},_renderModelValue:function(e){e&&"string"==typeof e&&(this._HexToHSV(e),this._oldValue=this.rgb,this.isPopupOpen?(this._switch&&(this._valueOperation(),this._colorSlider.option("value",parseInt(this._hsv.h))),this._inputTagValue(this._selectedButton),this._switch||(this._updateUI(),this.element.val(this.value())),this._hueGradient()):this.element.val(this.value()))},setValue:function(e){this._setValue(e)},enable:function(){if(this.model.enabled)return!1;var e;this.wrapper&&this.wrapper.hasClass("e-disable")?(this.wrapper.removeClass("e-disable"),this.element.prop("disabled",!1),this.container.hasClass("e-disable")&&this.container.removeClass("e-disable"),this.popupContainer&&this.popupList.removeClass("e-disable"),this.dropdownbutton.removeClass("e-disable")):this.model.displayInline&&this.element.removeClass("e-disable"),this.popupContainer&&(e=this._switch,this._switch=!0,this._cancelObj.enable(),this._colorSlider.enable(),this.model.enableOpacity?this._opacity.enable():this._opacity.disable(),this._splitObj.enable(),this._applyObj.enable(),this._switchEvents(),this._switch=e,h(this._inputTag).prop("readonly",!1)),this._wireEvents(),this._buttonElement&&this._on(this._buttonElement,"mousedown",this._iconClick),this.model.enabled=!0},disable:function(){if(!this.model.enabled)return!1;var e;this.wrapper&&!this.wrapper.hasClass("e-disable")?(this.wrapper.addClass("e-disable"),this.element.attr("disabled","disabled"),this.container.hasClass("e-disable")||this.container.addClass("e-disable"),this.popupContainer&&this.popupList.addClass("e-disable"),this.dropdownbutton.addClass("e-disable")):this.model.displayInline&&this.element.addClass("e-disable"),this.popupContainer&&(e=this._switch,this._switch=!1,this._cancelObj.disable(),this._colorSlider.disable(),this._opacity.disable(),this._splitObj.disable(),this._applyObj.disable(),this._unSwitchEvents(),this._switch=e,h(this._inputTag).attr("readonly","readonly")),this._unWireEvents(),this._unBindIconClick(),this.isPopupOpen&&!this.model.displayInline&&this.hide(),this.model.enabled=!1},getColor:function(){return this.rgb},getValue:function(){return this.value()},_alphaGradient:function(e){var t=r.browserInfo(),e=r.isNullOrUndefined(e)?"#000000":e;"mozilla"==t.name?this._alphaSlider.attr({style:"background:-moz-linear-gradient(center top,"+e+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):"msie"==t.name||"edge"==t.name?this._alphaSlider.attr({style:"background:-ms-linear-gradient(top,"+e+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):"opera"==t.name&&t.version<="11.61"?this._alphaSlider.attr({style:"background:-o-linear-gradient(top,"+e+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}):"chrome"!=t.name&&"safari"!=t.name&&"opera"!=t.name||this._alphaSlider.attr({style:"background:-webkit-linear-gradient(top,"+e+",#fff) repeat scroll 0 0 rgba(0, 0, 0, 0);"}),"msie"!=t.name||"8.0"!=t.version&&"9.0"!=t.version||this._alphaSlider.attr({style:"progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+e+", endColorstr=#ffffff)"}),"msie"==t.name&&"8.0"==t.version&&this._handleTag.css({background:this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"})},_hueGradient:function(){var e=this._hsv,t={h:this._hsv.h,s:100,v:100};this._hueSlider.children(".e-handle").css({background:this._formRGB(this.HSVToRGB(t))}),this._hsv=e},_updateColor:function(){!this.model.displayInline&&this.model.showApplyCancel||(this.value(this._tempValue),this.element.is("input")&&this._updateValue(),this._trigger("select",{value:this.value()}),this._previousColor=this._tempValue)},_changeEvent:function(e,t){this._change&&this._previousValue!==this._tempValue?(this.popupContainer&&this._alphaGradient(this._tempValue),this._previousValue=this._tempValue,this._trigger("change",{value:this._tempValue,changeFrom:e?"slider":"picker",isInteraction:!t}),this._updateColor(e)):this.popupContainer&&this._alphaGradient(this._tempValue)},_selectEvent:function(){this._previousColor===this._tempValue&&this._tempOpacity===this.opacityValue()||(this.value(this._tempValue),this.element.is("input")&&this._updateValue(),this.element.val(this.value()),this._trigger("select",{value:this.value()}),this._previousColor=this._tempValue)},_changeHue:function(e){this._handleArea.css("visibility","visible"),parseInt(this._hsv.h)!==parseInt(e.value)&&this._switch&&(this._hsv.h=Math.round(e.value),this._hueGradient(),this._hsvValue(),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!0))},_changeAlpha:function(e){this._handleArea.css("visibility","visible"),this._switch&&(this.rgb.a=e.value/100,this._tempOpacity=parseInt(100*this.rgb.a),this._changeOpacity(e))},_changeOpacity:function(e){this.rgb.a=this._tempOpacity/100,(this._browser.name="8.0"==this._browser.version)?(this._currentTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"}),this._handleTag.css({background:this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"})):(this._currentTag.css("background-color",this._formRGBA(this.rgb)),this._alphaSlider.children(".e-handle").css({background:this._formRGBA(this.rgb)})),this._inputTagValue(this._selectedButton),this.model.displayInline?(this._trigger("change",{value:this._tempValue,changeFrom:"slider",isInteraction:!r.isNullOrUndefined(e)&&e.isInteraction}),this._trigger("select",{value:this.value()})):this._trigger("change",{value:this._tempValue,changeFrom:"slider",isInteraction:!r.isNullOrUndefined(e)&&e.isInteraction})},_updateValue:function(){this.value()?(this._browser.name="8.0"==this._browser.version)?this.spanElement.css({"background-color":this._formRGB(this._HexToRGB(this.value())),filter:"alpha(opacity="+100*this.rgb.a+")"}):this.spanElement.css({"background-color":this._formRGBA(this._HexToRGB(this.value()))}):this.spanElement.removeAttr("style")},_bindClickOperation:function(e){var t=this;t._on(h("#"+this._id+"_Presets").find("li.e-preset-row"),"mousedown",t._colorPresetsClick),h("#"+t._presetContainer.attr("id")).ejMenu("instance").model.close=function(){t._splitObj.contstatus=!1,t._off(h("#"+this._id+"_Presets").find("li.e-preset-row"),"mousedown",t._colorPresetsClick)}},_wirePopupEvents:function(){this._on(this._changeTag,"click",this._switchModel),this._on(this._groupTag,"click",this._groupButton),this._on(this._addTag,"click",this._addColor),this._on(this._codeEditor,"mouseenter",this._inputEvent),this._on(this._codeEditor,"mouseleave",this._inputEvent),this._on(this._inputTag,"blur",this._inputEvent),this._on(this._inputTag,"focus",this._inputEvent),this._on(this._inputTag,"keyup",this._inputEvent),this._on(this.popupContainer,"focus",this._targetFocus),this._on(this.popupContainer,"blur",this._targetBlur)},_wireEvents:function(){this.element.is("input")&&(this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"keydown",this._popupShown),this._on(this.colorContainer,"click",this._containerClick))},_unWireEvents:function(){!this.model.displayInline&&this.element.is("input")&&(this._off(this.wrapper,"blur",this._targetBlur),this._off(this.wrapper,"focus",this._targetFocus),this._off(this.wrapper,"keydown",this._popupShown),this._off(this.colorContainer,"click",this._containerClick)),this._off(this._changeTag,"click",this._switchModel),this._off(this._groupTag,"click",this._groupButton),this._off(this._addTag,"click",this._addColor),this._off(this._codeEditor,"mouseenter",this._inputEvent),this._off(this._codeEditor,"mouseleave",this._inputEvent),this._off(this._inputTag,"blur",this._inputEvent),this._off(this._inputTag,"focus",this._inputEvent),this._off(this._inputTag,"keyup",this._inputEvent),this._off(this.popupContainer,"focus",this._targetFocus),this._off(this.popupContainer,"blur",this._targetBlur)},_inputEvent:function(e){"focus"===e.type&&-1<e.target.className.indexOf("e-color-code")&&this._codeEditor.addClass("e-focus"),"blur"===e.type&&-1<e.target.className.indexOf("e-color-code")&&this._codeEditor.removeClass("e-focus"),this._clearIcon&&("focus"===e.type&&this._off(this._codeEditor,"mouseleave",this._inputEvent),"blur"===e.type&&this._on(this._codeEditor,"mouseleave",this._inputEvent),"keyup"===e.type&&(""!==this._inputTag.val()?(this._clearIcon.show(),this._handleArea.css("visibility","visible")):(this._clearIcon.hide(),this._handleArea.css("visibility","hidden"))),"mouseleave"===e.type||"blur"===e.type||""==this._inputTag.val()?this._clearIcon.hide():this._clearIcon.show())},_clearColor:function(e){this._tempValue="",this._inputTag.val(""),this._setEmptyValue(),"click"==e.type&&(this._clearIcon.hide(),this._inputTag.focus())},_containerClick:function(){"split"==this.model.buttonMode&&this._trigger("select",{value:this.value()})},_popupShown:function(e){if(13==e.keyCode)return this._showHidePopup(),this.isPopupOpen||this._buttonClick(e),!1},_recentColor:function(e){this._divTag.find(".e-select").removeClass("e-select").addClass("e-block");var t=e.target.attributes.getNamedItem("data-value"),i=e.target.attributes.style;if(r.isNullOrUndefined(t)||r.isNullOrUndefined(i))return this._change=!1;h(e.target.parentNode).addClass("e-select").removeClass("e-block");e=i.value.replace(/^(background-color:rgb|background-color:rgba)\(/,"").replace(/\)$/,"").replace(/\s/g,"").split(",");r.isNullOrUndefined(e[3])?(this._browser.name="8.0"==this._browser.version)?(i=parseInt(i.nodeValue.replace(/^(FILTER: alpha)\(/,"").split("=")[1].split(")")[0]),this._opacity.option("value",i),this.rgb.a=i/100):(this._opacity.option("value",100),this.rgb.a=1):(this._opacity.option("value",parseInt((100*parseFloat(e[3])).toFixed(2))),this.rgb.a=parseFloat(parseFloat(e[3]).toFixed(2))),this._HexToHSV(t.value),this._inputTagValue(this._selectedButton),this._tempValue=this.RGBToHEX(this.rgb),this._valueOperation(),this._colorSlider.option("value",parseInt(this._hsv.h)),this._hueGradient(),this._changeEvent(!1),this.model.displayInline&&!this.element.is("input")||this.wrapper.focus()},_handleClick:function(e){e.preventDefault(),this._width=this._gradientArea.width(),this._height=this._gradientArea.height(),this.model.displayInline&&(this._isFocused=!0),this._handleArea.css("visibility","visible"),this.mouseDownPos=this._handlePos,h(document).on("mousemove touchmove",h.proxy(this._handleMovement,this)),h(document).on("mouseup touchend",h.proxy(this._handleUp,this))},_handleMove:function(e){this._handleArea.css("visibility","visible"),this._handleMovement(e),this._focusWrapper(e)},_handleMovement:function(e){if(!this.model.enabled)return!1;var t=e.pageX,i=e.pageY;this.element.is("input")&&this.wrapper.focus(),"touchstart"!=e.type&&"touchmove"!=e.type||(t=e.originalEvent.changedTouches[0].pageX,i=e.originalEvent.changedTouches[0].pageY),this._hsv.v=parseInt(100*(this._gradientArea.height()-Math.max(0,Math.min(this._gradientArea.height(),i-this._gradientArea.offset().top)))/this._gradientArea.height(),10),this._hsv.s=parseInt(100*Math.max(0,Math.min(this._gradientArea.width(),t-this._gradientArea.offset().left))/this._gradientArea.width(),10),this._hsvValue(),this._tempValue=this.RGBToHEX(this.rgb),this._change=!0,this._changeEvent(!1)},_handleUp:function(e){return h(document).off("mouseup touchend",this._handleUp),h(document).off("mousemove touchmove",this._handleMovement),this._focusWrapper(e),!1},_handlePosition:function(){this._handlePos=this._handleArea?{left:parseInt(parseInt(this._width)*this._hsv.s/100,10)+"px",top:parseInt(parseInt(this._height)*(100-this._hsv.v)/100,10)+"px"}:"",this._handleArea.css({left:this._handlePos.left,top:this._handlePos.top})},_addColor:function(){var e=this._divTag.find("> div");""!==("HSVA"!=this._selectedButton.html()?this._inputTag.val():this._formRGBA(this.HSVToRGB(this._hsv)))&&this._change&&this.model.showRecentColors&&e.length<=12&&(h(h(e)[e.length-2]).remove(),this._generateLi()),this.model.displayInline&&!this.element.is("input")||this.wrapper.focus()},_buttonClick:function(e){this._change=!0;this._inputTag.val(),this._divTag.find("div");if(this._opacity.option("value",this._tempOpacity),this._tempValue=this.RGBToHEX(this.rgb),this._updatePreviewColor(),""===this._inputTag.val()){if(this._tempValue="",!this.model.showClearButton)return this._inputTag.addClass("e-error"),!1;this._setValue("")}this._selectEvent(),this.element.is("input")&&(this._updateValue(),this.wrapper.focus()),this.model.displayInline||this.hide(),this._tempOpacity!==this.opacityValue()&&this.opacityValue(this._tempOpacity)},_generateLi:function(){this._liTag=r.buildTag("div.e-colorblock e-block e-colorset").attr({"data-value":this.RGBToHEX(this.rgb),tabindex:"0"});var e=r.buildTag("div.e-color e-set").attr({"data-value":this.RGBToHEX(this.rgb),title:this.RGBToHEX(this.rgb)});(this._browser.name="8.0"==this._browser.version)?e.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"}):e.css({"background-color":this._formRGBA(this.rgb)}),this._liTag.append(e),this._divTag.prepend(this._liTag)},_colorCodeValue:function(e){var t,i="",s=this._inputTag.val(),s=h.trim(s);if(5==s.length&&this._inputTag.removeClass("e-error"),e.shiftKey&&35<=e.keyCode&&e.keyCode<=40||65<=e.keyCode&&e.keyCode<71||51==e.keyCode||e.ctrlKey&&(88==e.keyCode||86==e.keyCode)||190==e.keyCode||!e.crtlKey&&!e.shiftKey&&(65<=e.keyCode&&e.keyCode<71||35<=e.keyCode&&e.keyCode<=40||96<=e.keyCode&&e.keyCode<=105||48<=e.keyCode&&e.keyCode<=57||13==e.keyCode||8==e.keyCode||46==e.keyCode||"blur"===e.type)||"#"==e.key||"("==e.key||")"==e.key||","==e.key?this._keyPressFlag=1:this._keyPressFlag=0,(this.model.enableOpacity&&(188==e.keyCode||71==e.keyCode||72==e.keyCode||82==e.keyCode||83==e.keyCode||86==e.keyCode)||e.shiftKey&&(57==e.keyCode||48==e.keyCode))&&(this._keyPressFlag=1),1==this._keyPressFlag){if(this._inputTag.removeClass("e-error"),13===e.keyCode||"blur"===e.type){""===s&&(this.model.showClearButton?this._setEmptyValue():this._inputTag.addClass("e-error"));if(n=s.match(/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/),r.isNullOrUndefined(n))if(n=s.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),r.isNullOrUndefined(n)){var n=s.match(/^hsva?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(r.isNullOrUndefined(n))return""!=s&&this._inputTag.addClass("e-error"),this._change=!1;this._hsvColor(n)}else this._rgbaColor(n);else{if(3===n[1].length)for(t=0;t<n[1].length;t++)i+=n[1][t]+n[1][t];else 6===n[1].length&&(i=n[1]);s=this.hexCodeToRGB("#"+i),this._inputTag.val("#"+i),this.rgb=this.HSVToRGB(this.RGBToHSV(s)),this._tempValue=this.RGBToHEX(this.rgb),this._change=!0}this._change&&(this._valueOperation(),this._colorSlider.option("value",parseInt(this._hsv.h)),this._hueGradient(),this._changeEvent(!1),this.element.is("input")||this._selectEvent(),""!==this._inputTag.val()&&this._inputTag.removeClass("e-error"))}}else 9!=e.keyCode&&e.preventDefault(),e.shiftKey||e.ctrlKey||27===e.keyCode||20==e.keyCode||this._inputTag.addClass("e-error")},_setEmptyValue:function(){this.popupContainer&&(this._handleArea.css("visibility","hidden"),this._currentTag.css({"background-color":""}),this._removeClass(),this._inputTag.val(null)),this._tempValue=null,this._previousValue!==this._tempValue&&(this._trigger("change",{value:null}),this._previousValue=this._tempValue)},_rgbaColor:function(e){var t={};if("rgba"!=e[0].split("(")[0]||r.isNullOrUndefined(e[4])){if("rgb"!=e[0].split("(")[0]||!r.isNullOrUndefined(e[4]))return this._inputTag.addClass("e-error"),this._change=!1;t.r=e[1],t.g=e[2],t.b=e[3],t.a=this.rgb.a,this._inputTag.val("rgba("+t.r+","+t.g+","+t.b+","+t.a+")")}else t.r=e[1],t.g=e[2],t.b=e[3],t.a=e[4];this.rgb.a=parseFloat(t.a),this._tempOpacity=100*this.rgb.a,this._opacity.option("value",this._tempOpacity),this.opacityValue(this._tempOpacity),this._tempValue=this.RGBToHEX(t),this._HexToHSV(this._tempValue),this._inputTag.removeClass("e-error"),this._change=!0},_hsvColor:function(e){var t={};if(r.isNullOrUndefined(e[4]))return this._inputTag.addClass("e-error"),this._change=!1;t.h=e[1],t.s=e[2],t.v=e[3],t.a=e[4],this.rgb.a=parseFloat(t.a),this._tempOpacity=100*this.rgb.a,this._opacity.option("value",this._tempOpacity),this.opacityValue(this._tempOpacity),this.rgb=this.HSVToRGB(t),this._tempValue=this.RGBToHEX(this.rgb),this._inputTag.removeClass("e-error"),this._change=!0},_iconClick:function(e){e.preventDefault(),this._showHidePopup(),this.wrapper.focus()},_showHidePopup:function(){if(this.model.displayInline)return!1;this.isPopupOpen?(this.hide(),this.wrapper.focus()):this.show()},hide:function(){var e=this;if(!this.isPopupOpen||this.model.displayInline)return!1;this.isPopupOpen=this._dataBind=!1,this.element.is("input")&&(this.wrapper.focus(),this.wrapper.removeClass("e-active")),this._width=this._gradientArea.width(),this._height=this._gradientArea.height(),this.popupContainer.slideUp(200,function(){e.model&&(e._tempOpacity=e.opacityValue(),e.rgb.a=e._tempOpacity/100,e._tempValue=e.value(),e._renderModelValue(e.value()),e._opacity.option("value",parseInt(e.opacityValue())),e.model.displayInline||e._off(h(document),"mousedown",e._onDocumentClick),e._trigger("close"))}),this.model.displayInline||this._off(h(document),"mousedown",this._onDocumentClick),this._off(this._inputTag,"keydown",this._colorCodeValue),this._off(this._inputTag,"blur",this._colorCodeValue),"palette"==this._modelType?this._off(h(document),"keydown",this._keyDown):this._off(h(document),"keydown",this._onKeyDown),this._off(r.getScrollableParents(this.wrapper),"scroll",this.hide),h(window).off("resize",h.proxy(this._OnWindowResize,this))},_hidePopup:function(){this.model.displayInline||this.hide()},show:function(){if(this.popupContainer||this._renderPopup(),this.element.is("input")&&(this.wrapper.focus(),this.wrapper.addClass("e-active")),this.isPopupOpen||!this.model.enabled)return!1;this.isPopupOpen=!0,"palette"==this.model.modelType&&this._cellSelect(),this.model.displayInline||""!==this.value()&&!r.isNullOrUndefined(this.value())?this._handleArea.css("visibility","visible"):this._setEmptyValue(),this._previousColor=this._previousValue=this.value(),this.popupContainer.children().find(".e-focus").removeClass("e-focus"),this.model.displayInline||this._setPopupPosition();var e=this;this.popupContainer.slideDown(200,function(){e.isFocused=!0,e._on(h(document),"mousedown",e._onDocumentClick),e._trigger("open")}),this._dataBind||("palette"==this._modelType?this._on(h(document),"keydown",this._keyDown):this._on(h(document),"keydown",this._onKeyDown)),this._on(this._inputTag,"keydown",this._colorCodeValue),this._on(this._inputTag,"blur",this._colorCodeValue),this._dataBind=!0,h(window).on("resize",h.proxy(this._OnWindowResize,this)),this.model.displayInline||this._on(r.getScrollableParents(this.wrapper),"scroll",this.hide),this._prevSize!==h(window).width()&&this.refresh()},_showBindEvents:function(){"palette"==this._modelType?this._on(h(document),"keydown",this._keyDown):this._on(h(document),"keydown",this._onKeyDown)},_hideUnBindEvents:function(){"palette"==this._modelType?this._off(h(document),"keydown",this._onKeyDown):this._off(h(document),"keydown",this._keyDown)},_switchEvents:function(){this._switch?(this._on(this._gradientArea,"mousedown touchstart",this._handleMove),this._on(this._handleArea,"mousedown touchstart",this._handleClick),this._on(this._gradientArea,"mousedown touchstart",this._handleClick)):this._on(this._collection,"mousedown",this._onSelect)},_unSwitchEvents:function(){this._switch?this._off(this._collection,"mousedown",this._onSelect):(this._off(this._gradientArea,"mousedown touchstart",this._handleMove),this._off(this._handleArea,"mousedown touchstart",this._handleClick),this._off(this._gradientArea,"mousedown touchstart",this._handleClick))},_groupButton:function(e){if(h(e.target).hasClass("e-disable"))return!1;h(e.target).hasClass("e-button")&&(this._groupTag.find(".e-btn.e-select"),""!==this._inputTag.val()?this._inputTagValue(h(e.target)):this._selectedButton=h(e.target),"HEX"!==this._selectedButton.html()?this._inputTag.attr("maxLength","22"):this._inputTag.attr("maxLength","7"),this._groupTag.find(".e-click").removeClass("e-click"),h(e.target).addClass("e-click"),this._inputTag.removeClass("e-error"))},_inputTagValue:function(e){"RGBA"==e.html()?this._inputTag.val(this._formRGBA(this.rgb)):"HEX"==e.html()?this._inputTag.val(this.RGBToHEX(this.rgb)):"HSVA"==e.html()&&"palette"!=this._modelType&&this._inputTag.val("hsva("+Math.round(this._hsv.h)+","+Math.round(this._hsv.s)+","+Math.round(this._hsv.v)+","+this.rgb.a+")"),this._selectedButton=e},_bindRecentEvent:function(){this._on(this._divTag,"click",this._recentColor)},_unBindRecentEvent:function(){this._off(this._divTag,"click",this._recentColor)},_handlePlacement:function(e,t,i){this._handleArea.css("visibility","visible");var s=this._hsv;s[e]+=t*(i?1:3),s[e]<0&&(s[e]=0),"s"===e?this._hsv.s=s[e]:this._hsv.v=s[e],this._hsvValue(),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!1)},_onKeyDown:function(e){var t=e.keyCode;if(this.model.enabled&&(e.shiftKey&&9==t&&h(this._hueSlider).find(".e-handle").hasClass("e-focus")&&this._focusWrapper(e),(this._isFocused||9!=t||27===t)&&(this._change=!0,!e.altKey&&!e.shiftKey)))switch(t){case 39:this.element.is("input")&&h(e.target).is(this.wrapper)&&(e.preventDefault(),this._handlePlacement("s",1,e.ctrlKey));break;case 38:this.element.is("input")&&h(e.target).is(this.wrapper)&&(e.preventDefault(),this._handlePlacement("v",1,e.ctrlKey));break;case 37:this.element.is("input")&&h(e.target).is(this.wrapper)&&(e.preventDefault(),this._handlePlacement("s",-1,e.ctrlKey));break;case 40:this.element.is("input")&&h(e.target).is(this.wrapper)&&(e.preventDefault(),this._handlePlacement("v",-1,e.ctrlKey));break;case 13:e.preventDefault(),h(e.target).hasClass("e-switcher")?(this._switchModel(),h(e.target).focus()):h(e.target).hasClass("e-applyButton")&&this._buttonClick(e);break;case 27:e.preventDefault(),this.model.displayInline||this.hide(),this._tempValue=this.value();break;case 9:t=document.activeElement;h(t).is(this.wrapper)&&this._focusPopup(e)}},_focusPopup:function(e){h(this._hueSlider).find(".e-handle").focus(),e.preventDefault()},_focusWrapper:function(e){this.element.is("input")&&h(this.wrapper).focus(),e.preventDefault()},_onDocumentClick:function(e){h(e.target).is(this.popupContainer)||h(e.target).parents(".e-colorpicker").is(this.popupContainer)||h(e.target).is(this.wrapper)||h(e.target).parents(".e-colorpickerwidget").is(this.wrapper)||h(e.target).parents(".e-presetWrapper").is("#"+this._id+"_Presets")||(this.model.displayInline||(this.hide(),this.element.is("input")&&this.wrapper.removeClass("e-focus")),this._isFocused=!1)},_OnWindowResize:function(e){this.element.is("input")&&this._setPopupPosition(),this.refresh()},refresh:function(){var e,t=h(this._PresetTable.find(".e-item")[1]);this.isPopupOpen?"picker"==this._modelType&&this.PaletteWrapper.css({display:"block",visibility:"hidden"}):(this.popupContainer.css({display:"block",visibility:"hidden"}),"palette"==this._modelType&&this.PaletteWrapper.css({display:"block",visibility:"hidden"})),(parseFloat(this._tag.outerHeight())>t.outerHeight(!0)||h(this._tag).outerWidth()-10*h(t).outerWidth(!0)>t.outerWidth()||0==h(this._tag).outerWidth())&&(e=(parseFloat(h(this._tag).outerWidth())-36)/10-(t.outerWidth()-t.width()),this._PresetTable.find(".e-item").css("width",e),10*t.outerWidth(!0)>this._tag.outerWidth()&&this._PresetTable.find(".e-item").css("width",e-1)),this.isPopupOpen?"picker"==this._modelType&&this.PaletteWrapper.css({display:"none",visibility:"visible"}):(this.popupContainer.css({display:"none",visibility:"visible"}),"palette"==this._modelType&&this.PaletteWrapper.css({visibility:"visible"})),this._prevSize=h(window).width(),this._width=this._gradientArea.width(),this._height=this._gradientArea.height()},_range:function(e,t){return""===t?0:e<t?e:t},_hsvValue:function(){this._change=!0,this._hsv.v=100<=this._hsv.v?100:this._hsv.v,this._hsv.s=100<=this._hsv.s?100:this._hsv.s,this.hsv=this._hsv,this.rgb=this.HSVToRGB(this.hsv),this._valueOperation(),this._inputTagValue(this._selectedButton)},_formRGB:function(e){if(!r.isNullOrUndefined(e))return"rgb("+e.r+","+e.g+","+e.b+")"},_formRGBA:function(e){if(!r.isNullOrUndefined(e))return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},_rgbValue:function(e){var t=this._HexToRGB(this._tempValue);r.isNullOrUndefined(t)||(this.rgb=t,this._change=!0,this.HSVToRGB(this.RGBToHSV(this.rgb)),this._colorSlider.option("value",parseInt(this._hsv.h)),this._opacity.option("value",100*this.rgb.a)),this._valueOperation(),this._inputTagValue(this._selectedButton)},_valueOperation:function(){this._handlePosition(),this._alphaGradient(this._tempValue),this._inputTag.removeClass("e-error"),this._updateUI()},_HexToHSV:function(e){return this.HSVToRGB(this.RGBToHSV(this._HexToRGB(e)))},_HexToRGB:function(e){if(!r.isNullOrUndefined(e)){var t=e.match("^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$");if(r.isNullOrUndefined(t))return this._change=!1;3==t[1].length&&(e="#"+t[1][0]+t[1][0]+t[1][1]+t[1][1]+t[1][2]+t[1][2]),this._change=!0,e=parseInt(-1<e.indexOf("#")?e.substring(1):e,16);t=r.isNullOrUndefined(this.rgb)?parseFloat(this._tempOpacity)/100:this.rgb.a;return this.rgb={r:e>>16,g:(65280&e)>>8,b:255&e,a:t}}},RGBToHSV:function(e){var t={h:0,s:0,v:0},i=Math.min(e.r,e.g,e.b),s=Math.max(e.r,e.g,e.b),i=s-i;return t.v=s,t.v*=100/255,0==i||(t.s=0!=s?255*i/s:0,0!=t.s?e.r==s?t.h=(e.g-e.b)/i:e.g==s?t.h=2+(e.b-e.r)/i:t.h=4+(e.r-e.g)/i:t.h=-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255),this._hsv=t},HSVToRGB:function(e){var t,i={},s=parseFloat(e.h),n=parseFloat(255*e.s/100),a=parseFloat(255*e.v/100);0==n?i.r=i.g=i.b=a:(a=s%60*((t=a)-(n=(255-n)*a/255))/60,360==s&&(s=0),s<60?(i.r=t,i.b=n,i.g=n+a):s<120?(i.g=t,i.b=n,i.r=t-a):s<180?(i.g=t,i.r=n,i.b=n+a):s<240?(i.b=t,i.r=n,i.g=t-a):s<300?(i.b=t,i.g=n,i.r=n+a):s<360?(i.r=t,i.g=n,i.b=t-a):(i.r=0,i.g=0,i.b=0)),this._hsv=e;e=r.isNullOrUndefined(this.rgb)?parseFloat(this._tempOpacity)/100:this.rgb.a;return{r:Math.round(i.r),g:Math.round(i.g),b:Math.round(i.b),a:e}},_HSVToHex:function(e){return this.RGBToHEX(this.HSVToRGB(e))},_toHEX:function(e){return-1!==e.indexOf("#")?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+this._hex(e[1])+this._hex(e[2])+this._hex(e[3]))},RGBToHEX:function(e){if(!r.isNullOrUndefined(e))return"#"+this._hex(e.r)+this._hex(e.g)+this._hex(e.b)},_hex:function(e){return("0"+parseInt(e).toString(16)).slice(-2)},_colorValue:function(e){return this._color=-1!=e.indexOf("#")?this.hexCodeToRGB(e):"","rgb("+this._color.r+", "+this._color.g+", "+this._color.b+")"},hexCodeToRGB:function(e){e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:this.rgb.a}:null},_updatePreviewColor:function(){(this._browser.name="8.0"==this._browser.version)?this._previousTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"}):this._previousTag.css({"background-color":this._formRGBA(this.rgb)}),this._oldValue=this.rgb},_updateUI:function(){var e,t=this._hsv;this._switch?(e={h:this._hsv.h,s:100,v:100},this._gradientArea.css({"background-color":this._colorValue(this._HSVToHex(e))})):this._cellSelect(),(this._browser.name="8.0"==this._browser.version)?(this._currentTag.css({"background-color":this._formRGB(this.rgb),filter:"alpha(opacity="+100*this.rgb.a+")"}),this._previousTag.css({"background-color":this._formRGB(this._oldValue),filter:"alpha(opacity="+100*this.rgb.a+")"})):(this._currentTag.css({"background-color":this._formRGBA(this.rgb)}),this._previousTag.css({"background-color":this._formRGBA(this._oldValue)}),this._alphaSlider.children(".e-handle").css({background:this._formRGBA(this.rgb)})),this._hsv=t},_targetFocus:function(e){e.preventDefault(),this._isFocused||(this._isFocused=!0,this.element.is("input")&&this.wrapper.addClass("e-focus"))},_targetBlur:function(e){this._isFocused=!1,!this.isPopupOpen&&this.element.is("input")&&this.wrapper.removeClass("e-focus")},_switchModel:function(){this._tempValue=this.RGBToHEX(this.rgb),this.refresh();var e=this;this._off(this._changeTag,"click",this._switchModel),"palette"==this._modelType?(this._modelType="picker",this._switcher.removeClass("e-pickerModel").addClass("e-paletteModel"),this.PaletteWrapper.fadeOut(300,function(){e._presetTag.parents(".e-split.e-widget").addClass("e-hide"),e._gradient.fadeIn(300),e._on(e._changeTag,"click",e._switchModel)}),this._switch=!0,this._rgbValue(),this._hueGradient(),this._hsva.ejButton("enable")):(this.PaletteWrapper.remove(),this._modelType="palette",this.PaletteWrapper=this._layoutType(this.model.palette),this._gradient.addClass("e-hide"),this._paletteType(),this._switcher.removeClass("e-paletteModel").addClass("e-pickerModel"),this._gradient.fadeOut(300,function(){e._presetTag.parents(".e-split.e-widget").removeClass("e-hide"),r.isNullOrUndefined(e.PaletteWrapper)&&(e.PaletteWrapper=e._layoutType(e.model.palette),e._splitObj.option("prefixIcon","e-color-image e-"+e.model.presetType),e.popupList.prepend(e.PaletteWrapper)),e.PaletteWrapper.fadeIn(300),e._on(e._changeTag,"click",e._switchModel)}),""!==this.value()&&this._cellSelect(),this._disableHSVButton()),"custompalette"===this.model.palette&&this._presetTag.parents(".e-split.e-widget").addClass("e-hide"),this.model.displayInline&&!this.element.is(":input")||this.wrapper.focus(),this._switchEvents(),this._unSwitchEvents(),this.isPopupOpen&&(this._hideUnBindEvents(),this._showBindEvents())},_disableHSVButton:function(){h(this._groupTag.find(".e-click")).hasClass("e-hsvButton")&&(this._inputTagValue(this._rgb),this._rgb.addClass("e-click"),this._hsva.removeClass("e-click")),this._hsva.ejButton("disable")},_cellSelect:function(){var e,t,i=this;this._removeClass(),this._collection.find(".e-item").each(function(){e=h(this).css("background-color"),(i._browser.name="8.0"==i._browser.version)?e&&e.replace(/ /g,"")===i.RGBToHEX(i.rgb)&&h(t=this).addClass("e-filter"):e&&e.replace(/ /g,"")===i._formRGB(i.rgb)&&(t=this)}),h(t).addClass("e-state-selected").attr("aria-selected",!0)},_removeClass:function(){this._collection.find(".e-item").removeClass("e-state-selected").removeClass("e-filter").removeAttr("aria-selected")},_position:function(e,t,i){var s=(e=Array.prototype.slice.call(e)).length,t=e.indexOf(t);return t<0?i<0?e[s-1]:e[0]:e[(t+=i)<0?t+=s:t%=s]},_onSelect:function(e){if(!this.model.enabled)return!1;this._isFocused=!0,this._handleArea.css("visibility","visible"),""!=e.target.style.backgroundColor&&(this._collection.find(".e-item").removeClass("e-state-selected").removeAttr("aria-selected"),this._HexToRGB(this._toHEX(e.target.style.backgroundColor)),this._updateUI(),this._inputTagValue(this._selectedButton),this.model.displayInline&&!this.element.is("input")||this.wrapper.focus(),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!1)),e.preventDefault()},_keyDown:function(e){if(this._isFocused){if(this._change=!0,!this.model.enabled)return!1;var t="",i=e.keyCode,s=this._collection.find(".e-item"),n=s.filter(".e-state-selected").get(0),a=this.model.columns;switch(e.altKey||37!=i&&38!=i&&39!=i&&40!=i||"e-color-code"===e.target.className||this._removeClass(),!e.altKey&&i){case 40:"e-color-code"!==e.target.className&&(e.preventDefault(),t=this._position(s,n,a));break;case 37:"e-color-code"!==e.target.className&&(e.preventDefault(),t=this._position(s,n,-1));break;case 38:"e-color-code"!==e.target.className&&(e.preventDefault(),t=this._position(s,n,-a));break;case 39:"e-color-code"!==e.target.className&&(e.preventDefault(),t=this._position(s,n,1));break;case 13:this._collection.find(".e-item").removeClass("e-state-selected").removeAttr("aria-selected"),h(e.target).hasClass("e-switcher")?(this._switchModel(),h(e.target).focus()):h(e.target).hasClass("e-applyButton")&&(this._buttonClick(e),this._updateUI(),this.model.displayInline||this.hide(),this.element.is("input")&&this.wrapper.focus());break;case 27:this.model.displayInline||this.hide(),h(this._presetContainer).hide(),this.element.is("input")&&this.wrapper.focus();break;case 9:n=document.activeElement;h(n).is(this.wrapper)&&this._focusPalettePopup(e,!0)}t&&(h(t).addClass("e-state-selected").attr("aria-selected",!0),this._currentTag.css({"background-color":this._formRGB(this._HexToRGB(h(t).attr("data-value")))}),this._inputTagValue(this._selectedButton),this._tempValue=this.RGBToHEX(this.rgb),this._changeEvent(!1))}else 27==e.keyCode&&(this.hide(),h(this._presetContainer).hide())},_focusPalettePopup:function(e,t){h(this.popupContainer).focus(),e.preventDefault()}}),r.ColorPicker.Locale=r.ColorPicker.Locale||{},r.ColorPicker.Locale.default=r.ColorPicker.Locale["en-US"]={buttonText:{apply:"Apply",cancel:"Cancel",swatches:"Swatches"},tooltipText:{switcher:"Switcher",addButton:"Add Color",basic:"Basic",monoChrome:"Mono Chrome",flatColors:"Flat Colors",seaWolf:"Sea Wolf",webColors:"Web Colors",sandy:"Sandy",pinkShades:"Pink Shades",misty:"Misty",citrus:"Citrus",vintage:"Vintage",moonLight:"Moon Light",candyCrush:"Candy Crush",currentColor:"Current Color",selectedColor:"Selected Color"}},r.ColorPicker.Palette={BasicPalette:"basicpalette",CustomPalette:"custompalette"},r.ColorPicker.ModelType={Palette:"palette",Picker:"picker"},r.ColorPicker.ButtonMode={Default:"dropdown",Split:"split"},r.ColorPicker.PresetType={Basic:"basic",MonoChrome:"monochrome",FlatColors:"flatcolors",SeaWolf:"seawolf",WebColors:"webcolors",Sandy:"sandy",PinkShades:"pinkshades",Misty:"misty",Citrus:"citrus",Vintage:"vintage",MoonLight:"moonlight",CandyCrush:"candycrush"};var i={basic:["ffffff","facbcb","fccb98","faf39a","fbf8cd","a6d38b","aadee8","d1ecf2","cdcae5","eecde1","cccbcb","f16667","f69668","f8ee6b","f7ec37","89c987","75cddd","8bd3e1","7f7fcc","9494c8","b3b2b3","ec2024","f7971d","ffcb67","f5ea14","74bf44","69c8c9","46c7f4","6666ad","b76cab","676767","971b1e","ca6828","ca9732","979937","0d9948","339898","4857a6","62449a","973794","000000","2f1110","973620","663433","343416","183319","023334","22205f","3b2f8d","310e31"],monochrome:["ffffff","e3e3e3","c6c6c6","aaaaaa","8e8e8e","717171","555555","393939","1c1c1c","000000","f9e6e7","f4d0d2","efbabc","e9a4a7","e48e92","df787c","da6267","d44c52","cf363c","ca2027","fff4ca","ffeb9e","fff0b4","ffefb1","ffe788","ffe272","ffd947","ffd531","ffd01b","ffcc05","e4f4eb","ccead9","b4e0c7","9cd6b5","84cca3","6dc190","55b77e","3dad6c","25a35a","0d9948","e8f4f4","d6e3eb","c4d1e3","b3c0da","a1aed1","8f9dc9","7d8bc0","6c7ab7","5a68af","4857a6"],flatcolors:["7477b8","488bca","18b1d4","1db369","78c162","acc063","ffe84e","f6b757","f79853","ed6346","E87F3D","E4C45D","B7A575","999999","67809F","002228","00A578","F9A41F","F3770B","D7401B","FFCB36","82CC2C","36B595","6370AD","D4264E","004D8E","22A04B","F3A414","C77405","F3420B","1ABC9C","3498DB","9B59B6","E67E22","E74C3C","3A738A","EBD9A7","89AD78","FF766D","C76160","BF3542","CDC5BA","EBE3D6","3C3C3C","2E2E2E","77A7FB","E57368","FBCB43","34B67A","FFFFFF"],seawolf:["0EEAFF","15A9FA","1B76FF","1C3FFD","2C1DFF","0B3C4C","0E5066","13647F","127899","1A8BB2","74B8E8","659EBB","3C9FFF","26466F","2472FF","0069A4","009BF2","004165","49A0B4","274C5F","000000","7A5848","E0A088","F9DEC6","3A2A22","DC3522","D9CB9E","374140","2A2C2B","1E1E20","CB3937","FE6B2C","654E44","6DD16F","70FE2C","275673","4681A6","FDDEC9","F22816","400101","071C2F","388494","E6A934","F3DB5F","534329","206956","47683B","E1BFA6","BF7950","903932"],webcolors:["0066aa","00bbdd","338800","77bb00","ffcc99","990c0c","0303c9","336699","669933","cccccc","EEEEEE","E7C36F","F7B230","E35B20","000033","7D7A74","BD524A","FCB200","8CFCC2","2ACD6B","666666","666553","FFFEEC","B2B2A4","AAA4B2","9CA5E3","5A668C","BBA469","CFC295","FFFFFF","DBBF56","2E94B3","808080","E96656","14A168","DE185B","D8806F","DBE186","D8CC63","DCC527","4E6C89","E2BDAD","EC6053","81BBAD","DFCDA5","453394","66398A","313E7D","336694","788E91"],sandy:["c0a986","ecd9c3","dfc79b","f6d58e","ecdaad","fff3e0","7f6b4a","ffd694","7f7a70","ccac76","E6E2AF","A79A71","EFECCA","806F4C","2F2F2E","997F1A","CCB65F","FFD291","6B674A","635F3A","7F693A","FFEBC1","FFD275","7F7561","CCA85E","D29854","4A4034","C9AD8D","4A351D","968169","E6E39F","9A9757","FFFDC9","94909A","E2E0E6","960010","EB1517","CD7C29","9A571C","1F7A94","7F6826","7F724C","FFE499","FFD04C","CCA63D","FFA669","92FFB6","FFF352","E8C269","D7E8CB"],pinkshades:["F6B1C3","F0788C","DE264C","BC0D35","A20D1E","E12256","BB1C48","7B132F","3B0917","FA2660","FFB7B5","9A423F","FF6D68","BB5855","CC5753","E88161","D66C60","C2646E","996072","705262","FFA1BD","FF8FB7","FF82AE","E9719B","CC6882","F250C7","BF1774","BF2696","AC60AA","BB90C5","BF1553","F20775","F2F2F2","e5566d","f2afc1","f43fa5","fc8c99","FF6887","7F3443","CC536C","D06AA9","E65F41","650017","BC1620","FA427E","3B1132","84476E","B83D65","E6E0E8","FF6EE8"],misty:["5C7A84","3D5372","7C9196","50748A","ADBFBF","010735","052159","194073","376B8C","FFFFFF","985999","C811CC","892EFF","FF6852","DBA211","0A0D0C","85A67C","46593E","BBD9AD","202616","BF8E63","734327","A66C4B","593A2F","BFBFBF","8DB0B6","1B778A","F46C1B","881801","192129","81808C","ABAABF","0C0E09","6A7366","37402F","5D6663","84867B","A4A66A","BABBB1","20211C","6B9695","646E8C","6B8196","61787F","648C80","8E9FBA","89A8C8","799ED1","7FAEE7","849EBD"],citrus:["FAEA41","E7F03E","E3C647","FAC541","F0AB3E","CCCA1F","FFF300","FFCB0D","FF9500","804A00","6A692A","FFFCA0","FFFFFF","CF664E","EFAC66","EFF299","F2DC6D","F29727","F2600C","592202","214001","4F7302","1A2601","BCD97E","C0D904","AAFEFF","359D6D","E5FF45","65FCCF","ABDC4B","42B200","C6FF00","F2E304","FFB200","FF8600","52EC04","04E206","94D507","ECE404","E2C904","DA321C","FF7913","FBD028","C0D725","9FC131","547312","ADBF26","DEB329","F1DB47","E08214"],vintage:["684132","fdbe30","eaac21","87783c","3e4028","ffc706","cd5648","5bafa9","828282","363636","424862","fb9a63","bfc4d5","f6fbf4","febc98","657050","FCF082","D8D98B","A2AB80","4D584A","5ADED4","4DAAAB","26596A","163342","6C98A1","010A26","28403B","557359","AEBF8A","C7D9AD","AFFCCB","CB4243","D2997E","36857E","4AC6BB","28394B","191313","AF0A18","DC373D","122438","43734A","A6A26D","D9B448","BF8C2C","734002","26010F","866F53","ACBD91","7BAB87","546859"],moonlight:["241D37","2A233D","322B45","362F49","D4BA73","261225","592040","8C3063","A64985","73345D","A3C8FF","85B6FF","000040","213190","050859","FFFFFF","6AAED9","4184BF","224573","2e4154","bcad7e","955351","c36a57","9a8556","7e6029","dbd78e","beae3b","c3a04c","58504d","967644","CFC496","B3B391","889486","61797B","366577","123340","436E73","7B8C61","D7D996","F0EBB4","341F36","D9B5E0","9889AB","4D4E66","1B2129","5CBBE3","FCF1BC","5C8182","383A47","B4F257"],candycrush:["0779f4","30da00","fb8006","f9d802","a71df7","f70200","fd49ae","682e07","9b2424","5e7693","F9AB3B","EF5627","FF0000","00A398","803C2C","DE5711","FFF026","FF0048","14A0CC","00B229","FFFFBE","F7CD99","FF77A1","9886E8","97CACB","EAEDE5","FFD127","FF870C","EC4610","9A1900","993460","CC1464","C300FF","FFFFBC","CCB914","FFFEE2","B24C5F","FF274F","0A94CC","679DB2","C2FFE6","16B271","5FFFBC","B2442F","FFA190","E89359","FFFB75","F36EFF","5999E8","73EB86"]}}(jQuery,Syncfusion),window.ej=window.Syncfusion=window.Syncfusion||{},function(v,b,e,g){"use strict";b.DataManager=function(e,t,i){if(!(this instanceof b.DataManager))return new b.DataManager(e,t,i);e=e||[],"string"==typeof(i=i||e.adaptor)&&(i=new b[i]);var s=[],n=this;return e instanceof Array?s={json:e,offline:!0}:"object"==typeof e?v.isPlainObject(e)?(e.json||(e.json=[]),e.table&&(e.json=this._getJsonFromElement(e.table,e.headerOption)),s={url:e.url,insertUrl:e.insertUrl,removeUrl:e.removeUrl,updateUrl:e.updateUrl,crudUrl:e.crudUrl,batchUrl:e.batchUrl,json:e.json,headers:e.headers,accept:e.accept,data:e.data,async:e.async,timeTillExpiration:e.timeTillExpiration,cachingPageSize:e.cachingPageSize,enableCaching:e.enableCaching,requestType:e.requestType,key:e.key,crossDomain:e.crossDomain,antiForgery:e.antiForgery,jsonp:e.jsonp,dataType:e.dataType,enableAjaxCache:e.enableAjaxCache,offline:e.offline!==g?e.offline:!("remoteSaveAdaptor"==e.adaptor||e.adaptor instanceof b.remoteSaveAdaptor)&&!e.url,requiresFormat:e.requiresFormat}):(e.jquery||A(e))&&(s={json:this._getJsonFromElement(e),offline:!0,table:e}):"string"==typeof e&&(s={url:e,offline:!1,dataType:"json",json:[]}),s.requiresFormat!==g||b.support.cors||(s.requiresFormat=!!V(s.crossDomain)||s.crossDomain),s.antiForgery&&this.antiForgeryToken(),s.dataType===g&&(s.dataType="json"),this.dataSource=s,this.defaultQuery=t,s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=i||new b.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(t||b.Query()).done(function(e){n.dataSource.offline=!0,n.isDataAvailable=!0,s.json=e.result,n.adaptor=new b.JsonAdaptor})):this.adaptor=new(s.offline?b.JsonAdaptor:b.ODataAdaptor),!s.jsonp&&this.adaptor instanceof b.ODataAdaptor&&(s.jsonp="callback"),this.adaptor=i||this.adaptor,s.enableCaching&&(this.adaptor=new b.CacheAdaptor(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this},b.DataManager.prototype={setDefaultQuery:function(e){this.defaultQuery=e},executeQuery:function(e,t,i,s){"function"==typeof e&&(s=i,i=t,t=e,e=null),(e=e||this.defaultQuery)instanceof b.Query||B("DataManager - executeQuery() : A query is required to execute");var n=v.Deferred();n.then(t,i,s);var a,r={query:e};return this.dataSource.offline||this.dataSource.url==g?b.isNullOrUndefined(this.dataSource.async)||0!=this.dataSource.async?k(function(){this._localQueryProcess(e,r,n)},this):this._localQueryProcess(e,r,n):(a=this.adaptor.processQuery(this,e),b.isNullOrUndefined(a.url)?k(function(){r=this._getDeferedArgs(e,a,r),n.resolveWith(this,[r])},this):this._makeRequest(a,n,r,e)),n.promise()},_localQueryProcess:function(e,t,i){var s=this.executeLocal(e);t=this._getDeferedArgs(e,s,t),i.resolveWith(this,[t])},_getDeferedArgs:function(e,t,i){return e._requiresCount?(i.result=t.result,i.count=t.count):i.result=t,i.getTableModel=P(e._fromTable,i.result,this),i.getKnockoutModel=M(i.result),i},executeLocal:function(e){this.defaultQuery||e instanceof b.Query||B("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||B("DataManager - executeLocal() : Json data is required to execute"),e=e||this.defaultQuery;var t=this.adaptor.processQuery(this,e);if(e._subQuery){var i=e._subQuery._fromTable,s=e._subQuery._lookup,n=e._requiresCount?t.result:t;s&&s instanceof Array&&r(e._subQuery._fKey,i,n,s,e._subQuery._key);for(var a=0;a<n.length;a++)n[a][i]instanceof Array&&(n[a]=v.extend({},n[a]),n[a][i]=this.adaptor.processResponse(e._subQuery.using(b.DataManager(n[a][i].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(t,this,e)},_makeRequest:function(e,o,l,d){var h=!!d._subQuerySelector,n=z(function(e){l.error=e,o.rejectWith(this,[l])},this),c=z(function(e,t,i,s,n,a,r){h||(l.xhr=i,l.count=parseInt(t,10),l.result=e,l.request=s,l.aggregates=a,l.getTableModel=P(d._fromTable,e,this),l.getKnockoutModel=M(e),l.actual=n,l.virtualSelectRecords=r,o.resolveWith(this,[l]))},this),u=z(function(t,e){var i=v.Deferred(),s={parent:l};d._subQuery._isChild=!0;e=this.adaptor.processQuery(this,d._subQuery,t?this.adaptor.processResponse(t):e),s=this._makeRequest(e,i,s,d._subQuery);return h||i.then(function(e){t&&(r(d._subQuery._fKey,d._subQuery._fromTable,t,e,d._subQuery._key),c(t))},n),s},this),t=N(function(e,t,i,s){-1==i.getResponseHeader("Content-Type").indexOf("xml")&&b.dateParse&&(e=b.parseJSON(e));var n=this.adaptor.processResponse(e,this,d,i,s),a=0,r=null,o=e.virtualSelectRecords;d._requiresCount&&(a=n.count,r=n.aggregates,n=n.result),d._subQuery?h||u(n):c(n,a,i,s,e,r,o)},this),t=v.extend({type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!!b.isNullOrUndefined(this.dataSource.enableAjaxCache)||this.dataSource.enableAjaxCache,beforeSend:z(this._beforeSend,this),processData:!1,success:t,error:n},e);return"async"in this.dataSource&&(t.async=this.dataSource.async),t=v.ajax(t),h&&((e=d._subQuerySelector.call(this,{query:d._subQuery,parent:d}))&&e.length?(t=v.when(t,u(null,e))).then(N(function(e,t,i){var s=this.adaptor.processResponse(e[0],this,d,e[2],i[0]),n=0;d._requiresCount&&(n=s.count,s=s.result);i=this.adaptor.processResponse(t[0],this,d._subQuery,t[2],i[1]),n=0;d._subQuery._requiresCount&&(n=i.count,i=i.result),r(d._subQuery._fKey,d._subQuery._fromTable,s,i,d._subQuery._key),h=!1,c(s,n,e[2])},this),n):h=!1),t},_beforeSend:function(e,t){this.adaptor.beforeSend(this,e,t);for(var i,s=this.dataSource.headers,n=0;s&&n<s.length;n++)for(var a in i=[],s[n])i.push(a),e.setRequestHeader(a,s[n][a])},saveChanges:function(n,a,e,t){e instanceof b.Query&&(t=e,e=null);e={url:e,key:a||this.dataSource.key},t=this.adaptor.batchRequest(this,n,e,t);if(this.dataSource.offline)return t;var r=v.Deferred();return v.ajax(v.extend({beforeSend:z(this._beforeSend,this),success:N(function(e,t,i,s){r.resolveWith(this,[this.adaptor.processResponse(e,this,null,i,s,n,a)])},this),error:function(e){r.rejectWith(this,[{error:e}])}},t)),r.promise()},insert:function(e,t,i){e=x.replacer(e,!0),t instanceof b.Query&&(i=t,t=null);i=this.adaptor.insert(this,e,t,i);if(this.dataSource.offline)return i;var n=v.Deferred();return v.ajax(v.extend({type:"POST",contentType:"application/json; charset=utf-8",processData:!1,beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},i)),n.promise()},antiForgeryToken:function(){return b.isNullOrUndefined(v("input[name='_ejRequestVerifyToken']").val())?b.buildTag("input","","",{type:"hidden",name:"_ejRequestVerifyToken",value:b.getGuid()}).appendTo("body"):v("input[name='_ejRequestVerifyToken']").val(b.getGuid()),b.cookie.set("_ejRequestVerifyToken",v("input[name='_ejRequestVerifyToken']").val()),{name:"_ejRequestVerifyToken",value:v("input[name='_ejRequestVerifyToken']").val()}},remove:function(e,t,i,s){"object"==typeof t&&(t=t[e]),i instanceof b.Query&&(s=i,i=null);s=this.adaptor.remove(this,e,t,i,s);if(this.dataSource.offline)return s;var n=v.Deferred();return v.ajax(v.extend({type:"POST",contentType:"application/json; charset=utf-8",beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},s)),n.promise()},update:function(e,t,i,s){t=x.replacer(t,!0),i instanceof b.Query&&(s=i,i=null);s=this.adaptor.update(this,e,t,i,s);if(this.dataSource.offline)return s;var n=v.Deferred();return v.ajax(v.extend({contentType:"application/json; charset=utf-8",beforeSend:z(this._beforeSend,this),success:N(function(t,e,i,s){try{b.isNullOrUndefined(t)?t=[]:x.parseJson(t)}catch(e){t=[]}t=this.adaptor.processResponse(x.parseJson(t),this,null,i,s),n.resolveWith(this,[{record:t,dataManager:this}])},this),error:function(e){n.rejectWith(this,[{error:e,dataManager:this}])}},s)),n.promise()},_getJsonFromElement:function(e){"string"==typeof e&&(e=v(v(e).html()));var t=(e=e.jquery?e[0]:e).tagName.toLowerCase();return"table"!==t&&B("ej.DataManager : Unsupported htmlElement : "+t),b.parseTable(e)}};var r=function(e,t,i,s,n){var a,r={};for(s.result&&(s=s.result),s.GROUPGUID&&B("ej.DataManager: Do not have support Grouping in hierarchy"),a=0;a<s.length;a++){var o=b.getObject(e,s[a]);(r[o]||(r[o]=[])).push(s[a])}for(a=0;a<i.length;a++)i[a][t]=r[b.getObject(n||e,i[a])]},a="application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",s="multipart/mixed",o="--changeset_",l="batch_",d="Content-Type: application/http\nContent-Transfer-Encoding: binary ",h="Content-Type: application/json; charset=utf-8 ",x={parseJson:function(e){var t=typeof e;return"string"==t?e=JSON.parse(e,x.jsonReviver):e instanceof Array?x.iterateAndReviveArray(e):"object"==t&&x.iterateAndReviveJson(e),e},iterateAndReviveArray:function(e){for(var t=0;t<e.length;t++)"object"==typeof e[t]?x.iterateAndReviveJson(e[t]):"string"!=typeof e[t]||/^[\s]*\[|^[\s]*\{|\"/g.test(e[t])?e[t]=x.parseJson(e[t]):e[t]=x.jsonReviver("",e[t])},iterateAndReviveJson:function(e){var t,i;for(i in e)i.startsWith("__")||("object"==typeof(t=e[i])?t instanceof Array?x.iterateAndReviveArray(t):x.iterateAndReviveJson(t):e[i]=x.jsonReviver(i,t))},jsonReviver:function(e,t){var i=t,s=/[\-,/,\,.,:,]+/;if("string"==typeof t){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(t);if(n)return b.parseDateInUTC?x.isValidDate(n[0]):x.replacer(new Date(parseInt(n[1])));(b.dateParse?/^(?:(\d{4}\-\d\d\-\d\d)|(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?)$/:/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/).test(t)&&(i=i.split(/[^0-9]/),/^(\d{4}\-\d\d\-\d\d)$/.test(t)?t=new Date(i[b.dateFormat.split(s).indexOf("yyyy")],i[b.dateFormat.split(s).indexOf("MM")]-1,i[b.dateFormat.split(s).indexOf("dd")]):(t=b.parseDateInUTC?x.isValidDate(t):x.replacer(new Date(t)),isNaN(t)&&(t=x.replacer(new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5])))))}return t},isValidDate:function(e){var t=e;return"string"==typeof t&&0==t.indexOf("/Date(")&&(e=t.replace(/\d+/,function(e){var t=6e4*new Date(parseInt(e)).getTimezoneOffset(),t=parseInt(e)+t;return x.replacer(new Date(parseInt(t)))})),"string"!=typeof e?e:(e=(e=e.replace("/Date(",function(){return""})).replace(")/",function(){return""}),new Date(e)instanceof Date?new Date(e):e)},isJson:function(e){return"string"==typeof e[0]?e:b.parseJSON(e)},isGuid:function(e){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e)},replacer:function(e,t){return b.isPlainObject(e)?x.jsonReplacer(e,t):e instanceof Array?x.arrayReplacer(e):e instanceof Date?x.jsonReplacer({val:e},t).val:e},jsonReplacer:function(e,t){var i,s,n;for(i in e)(n=e[i])instanceof Date&&(s=60*b.serverTimezoneOffset*60*1e3*(b.isNullOrUndefined(t)||!1===t?1:-1),e[i]=new Date(+n+s));return e},arrayReplacer:function(e){for(var t=0;t<e.length;t++)b.isPlainObject(e[t])?e[t]=x.jsonReplacer(e[t]):e[t]instanceof Date&&(e[t]=x.jsonReplacer({date:e[t]}).date);return e}};b.isJSON=x.isJson,b.parseJSON=x.parseJson,b.dateParse=!0,b.dateFormat="yyyy-MM-dd",b.isGUID=x.isGuid,b.Query=function(e){return this instanceof b.Query?(this.queries=[],this._key="",this._fKey="","string"==typeof e?this._fromTable=e||"":e&&e instanceof Array&&(this._lookup=e),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._subQuery=null,this._isChild=!1,this._params=[],this):new b.Query(e)},b.Query.prototype={key:function(e){return"string"==typeof e&&(this._key=e),this},using:function(e){return e instanceof b.DataManager?(this.dataManagar=e,this):B("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(e,t,i,s){return(e=e||this.dataManagar)&&e instanceof b.DataManager?e.executeQuery(this,t,i,s):B("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(e){return(e=e||this.dataManagar)&&e instanceof b.DataManager?e.executeLocal(this):B("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var e=new b.Query;return e.queries=this.queries.slice(0),e._key=this._key,e._isChild=this._isChild,e.dataManagar=this.dataManager,e._fromTable=this._fromTable,e._params=this._params.slice(0),e._expands=this._expands.slice(0),e._sortedColumns=this._sortedColumns.slice(0),e._groupedColumns=this._groupedColumns.slice(0),e._subQuerySelector=this._subQuerySelector,e._subQuery=this._subQuery,e._fKey=this._fKey,e._requiresCount=this._requiresCount,e},from:function(e){return"string"==typeof e&&(this._fromTable=e),this},addParams:function(e,t){return"function"==typeof t||b.isPlainObject(t)?"function"==typeof t&&this._params.push({key:e,fn:t}):this._params.push({key:e,value:t}),this},expand:function(e){return this._expands="string"==typeof e?[].slice.call(arguments,0):e.slice(0),this},where:function(e,t,i,s,n){t=(t||b.FilterOperators.equal).toLowerCase();var a=null;return"string"==typeof e?a=new b.Predicate(e,t,i,s,n):e instanceof b.Predicate?a=e:B("Query - where : Invalid arguments"),this.queries.push({fn:"onWhere",e:a}),this},search:function(e,t,i,s,n){t&&"boolean"!=typeof t?"string"==typeof t&&(t=[t]):s=t=[],"boolean"==typeof i&&(s=i,i=null),(i=i||b.FilterOperators.contains).length<3&&(i=b.data.operatorSymbols[i]);var a=b.data.fnOperators[i]||b.data.fnOperators.processSymbols(i);return this.queries.push({fn:"onSearch",e:{fieldNames:t,operator:i,searchKey:e,ignoreCase:s,ignoreAccent:n,comparer:a}}),this},sortBy:function(e,t,i){var s,n,a=b.sortOrder.Ascending;if("string"==typeof e&&e.toLowerCase().endsWith(" desc")&&(e=e.replace(/ desc$/i,""),t=b.sortOrder.Descending),e instanceof Array){for(var r=0;r<e.length;r++)this.sortBy(e[r],t,i);return this}if("boolean"==typeof t?t=t?b.sortOrder.Descending:b.sortOrder.Ascending:"function"==typeof t&&(a="custom"),t&&"string"!=typeof t||(a=t?t.toLowerCase():b.sortOrder.Ascending,t=b.pvt.fnSort(t)),i){s=y(this.queries,"onSortBy");for(r=0;r<s.length;r++)if("string"==typeof(n=s[r].e.fieldName)){if(n===e)return this}else if(n instanceof Array)for(var o=0;o<n.length;o++)if(n[o]===e||e.toLowerCase()===n[o]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:t,direction:a}}),this},sortByDesc:function(e){return this.sortBy(e,b.sortOrder.Descending)},group:function(e,t){return this.sortBy(e,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:e,fn:t}}),this},page:function(e,t){return this.queries.push({fn:"onPage",e:{pageIndex:e,pageSize:t}}),this},range:function(e,t){return"number"==typeof e&&"number"==typeof t||B("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:e,end:t}}),this},take:function(e){return"number"!=typeof e&&B("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:e}}),this},skip:function(e){return"number"!=typeof e&&B("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:e}}),this},select:function(e){return"string"==typeof e&&(e=[].slice.call(arguments,0)),e instanceof Array||B("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:e}}),this},hierarchy:function(e,t){return e&&e instanceof b.Query||B("Query() - hierarchy : query must be instance of ej.Query"),"function"==typeof t&&(this._subQuerySelector=t),this._subQuery=e,this},foreignKey:function(e){return"string"==typeof e&&(this._fKey=e),this},requiresCount:function(){return this._requiresCount=!0,this},aggregate:function(e,t){this.queries.push({fn:"onAggregates",e:{field:t,type:e}})}},b.Adaptor=function(e){this.dataSource=e,this.pvt={},this.init.apply(this,[].slice.call(arguments,1))},b.Adaptor.prototype={options:{from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",antiForgery:"antiForgery"},init:function(){},extend:function(e){function t(e){this.dataSource=e,this.options&&(this.options=v.extend({},this.options)),this.init.apply(this,[].slice.call(arguments,0)),this.pvt={}}var i,s=((t.prototype=new this.type).type=t).prototype.base={};for(i in e)t.prototype[i]&&(s[i]=t.prototype[i]);return v.extend(!0,t.prototype,e),t},processQuery:function(e,t){},processResponse:function(e,t,i,s){return e.d||e},convertToQueryString:function(e,t,i){return v.param(e)},type:b.Adaptor},b.UrlAdaptor=(new b.Adaptor).extend({processQuery:function(e,t,i){var s,n,a=y(t.queries,"onSortBy"),r=y(t.queries,"onGroup"),o=y(t.queries,"onWhere"),l=y(t.queries,"onSearch"),d=y(t.queries,"onAggregates"),h=w(t.queries,["onSelect","onPage","onSkip","onTake","onRange"]),c=t._params,u=e.dataSource.url,p=null,m=this.options,g={sorted:[],grouped:[],filters:[],searches:[],aggregates:[]};h.onPage?(s=h.onPage,n=((n=S(s.pageIndex,t))-1)*(p=S(s.pageSize,t))):h.onRange&&(n=(s=h.onRange).start,p=s.end-s.start);for(var f=0;f<a.length;f++)s=S(a[f].e.fieldName,t),g.sorted.push(C(this,"onEachSort",{name:s,direction:a[f].e.direction},t));i&&(s=this.getFiltersFrom(i,t))&&g.filters.push(C(this,"onEachWhere",s.toJSON(),t));for(f=0;f<o.length;f++)for(var _ in g.filters.push(C(this,"onEachWhere",o[f].e.toJSON(),t)),g.filters[f])V(g[_])&&delete g[_];for(f=0;f<l.length;f++)s=l[f].e,g.searches.push(C(this,"onEachSearch",{fields:s.fieldNames,operator:s.operator,key:s.searchKey,ignoreCase:s.ignoreCase},t));for(f=0;f<r.length;f++)g.grouped.push(S(r[f].e.fieldName,t));for(f=0;f<d.length;f++)s=d[f].e,g.aggregates.push({type:s.type,field:S(s.field,t)});var v={};for(_ in v[m.from]=t._fromTable,m.expand&&(v[m.expand]=t._expands),v[m.select]=h.onSelect?C(this,"onSelect",S(h.onSelect.fieldNames,t),t):"",v[m.count]=t._requiresCount?C(this,"onCount",t._requiresCount,t):"",v[m.search]=g.searches.length?C(this,"onSearch",g.searches,t):"",v[m.skip]=h.onSkip?C(this,"onSkip",S(h.onSkip.nos,t),t):"",v[m.take]=h.onTake?C(this,"onTake",S(h.onTake.nos,t),t):"",v[m.antiForgery]=e.dataSource.antiForgery?e.antiForgeryToken().value:"",v[m.where]=g.filters.length||g.searches.length?C(this,"onWhere",g.filters,t):"",v[m.sortBy]=g.sorted.length?C(this,"onSortBy",g.sorted,t):"",v[m.group]=g.grouped.length?C(this,"onGroup",g.grouped,t):"",v[m.aggregates]=g.aggregates.length?C(this,"onAggregates",g.aggregates,t):"",v.param=[],C(this,"addParams",{dm:e,query:t,params:c,reqParams:v}),v)!V(v[_])&&""!==v[_]&&0!==v[_].length&&"params"!==_||delete v[_];m.skip in v&&m.take in v||null===p||(v[m.skip]=C(this,"onSkip",n,t),v[m.take]=C(this,"onTake",p,t));p=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(v),url:u,ejPvtData:p,type:"POST",contentType:"application/json; charset=utf-8"}:(s=this.convertToQueryString(v,t,e),{type:"GET",url:(s=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+s).length?u.replace(/\/*$/,s):u,ejPvtData:p})},convertToQueryString:function(e,t,i){return i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")?v.param(e):"?"+v.param(e)},processResponse:function(e,t,i,s,n,a){var r=n.ejPvtData||{},o=e.groupDs;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];n=JSON.parse(n.data);if(n&&"batch"===n.action&&e.added)return a.added=e.added,a;if(e.d&&(e=e.d),r&&r.aggregates&&r.aggregates.length){var l,d=r.aggregates,h={},c={};"count"in e&&(h.count=e.count),e.result&&(h.result=e.result),e.aggregate&&(e=e.aggregate);for(var u=0;u<d.length;u++)(l=b.aggregates[d[u].type])&&(c[d[u].field+" - "+d[u].type]=l(e,d[u].field));h.aggregates=c,e=h}if(r&&r.groups&&r.groups.length){var p=r.groups,h={};"count"in e&&(h.count=e.count),e.aggregates&&(h.aggregates=e.aggregates),e.result&&(e=e.result);for(u=0;u<p.length;u++){var m=D(p[u],i.queries);b.isNullOrUndefined(o)||(o=b.group(o,p[u],null,m)),e=b.group(e,p[u],r.aggregates,m,null,o)}return h.count!=g?h.result=e:h=e,h}return e},onGroup:function(e){this.pvt.groups=e},onAggregates:function(e){this.pvt.aggregates=e},batchRequest:function(e,t,i,s){i={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i)}},beforeSend:function(e,t){},insert:function(e,t,i,s){i={value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(i)}},remove:function(e,t,i,s,n){s={key:i,keyColumn:t,table:s,action:"remove",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:s}),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(s)}},update:function(e,t,i,s,n){s={value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return n&&this.addParams({dm:e,query:n,params:n._params,reqParams:s}),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(s)}},getFiltersFrom:function(e,t){e instanceof Array&&e.length||B("ej.SubQuery: Array of key values required");var i,s=t._fKey,n=s,a=t._key,r=[],o="object"!=typeof e[0];"object"!=typeof e[0]&&(n=null);for(var l=0;l<e.length;l++)i=o?e[l]:b.pvt.getObject(a||n,e[l]),r.push(new b.Predicate(s,"==",i));return b.Predicate.or(r)},addParams:function(e){var t=e.dm,i=e.query,s=e.params,n=e.reqParams;n.params={};for(var a,r=0;a=s[r];r++)n[a.key]&&B("ej.Query: Custom Param is conflicting other request arguments"),n[a.key]=a.value,a.fn&&(n[a.key]=a.fn.call(i,a.key,i,t)),n.params[a.key]=n[a.key]}}),b.WebMethodAdaptor=(new b.UrlAdaptor).extend({processQuery:function(e,t,i){var s=b.UrlAdaptor.prototype.processQuery(e,t,i),n=b.parseJSON(s.data),i={};return i.value=n,C(this,"addParams",{dm:e,query:t,params:t._params,reqParams:i}),{data:JSON.stringify(i),url:s.url,ejPvtData:s.ejPvtData,type:"POST",contentType:"application/json; charset=utf-8"}},addParams:function(e){var t=e.dm,i=e.query,s=e.params,n=e.reqParams;n.params={};for(var a,r=0;a=s[r];r++){n[a.key]&&B("ej.Query: Custom Param is conflicting other request arguments");var o=a.key,l=a.value;a.fn&&(l=a.fn.call(i,a.key,i,t)),n[o]=l,n.params[o]=n[o]}}}),b.CacheAdaptor=(new b.UrlAdaptor).extend({init:function(e,s,t){b.isNullOrUndefined(e)||(this.cacheAdaptor=e),this.pageSize=t,this.guidId=b.getGuid("cacheAdaptor");window.localStorage&&window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}));var n=this.guidId;b.isNullOrUndefined(s)||setInterval(function(){for(var e=b.parseJSON(window.localStorage.getItem(n)),t=[],i=0;i<e.results.length;i++)e.results[i].timeStamp=new Date-new Date(e.results[i].timeStamp),new Date-new Date(e.results[i].timeStamp)>s&&t.push(i);for(i=0;i<t.length;i++)e.results.splice(t[i],1),e.keys.splice(t[i],1);window.localStorage.removeItem(n),window.localStorage.setItem(n,JSON.stringify(e))},s)},generateKey:function(e,t){var i=y(t.queries,"onSortBy"),s=y(t.queries,"onGroup"),n=y(t.queries,"onWhere"),a=y(t.queries,"onSearch"),r=(y(t.queries,"onPage"),w(t.queries,["onSelect","onPage","onSkip","onTake","onRange"])),o=(t._params,e);r.onPage&&(o+=r.onPage.pageIndex),i.forEach(function(e){o+=e.e.direction+e.e.fieldName}),s.forEach(function(e){o+=e.e.fieldName}),a.forEach(function(e){o+=e.e.searchKey});for(var l=0;l<n.length;l++){var d=n[l];if(d.e.isComplex){var h=t.clone();h.queries=[];for(var c=0;c<d.e.predicates.length;c++)h.queries.push({fn:"onWhere",e:d.e.predicates[c],filter:t.queries.filter});o+=d.e.condition+this.generateKey(e,h)}else o+=d.e.field+d.e.operator+d.e.value}return o},processQuery:function(e,t,i){var s,t=this.generateKey(e.dataSource.url,t);window.localStorage&&(s=b.parseJSON(window.localStorage.getItem(this.guidId)));t=s?s.results[s.keys.indexOf(t)]:null;return null==t||this._crudAction||this._insertAction?(this._crudAction=null,this._insertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):t},processResponse:function(e,t,i,s,n,a){if(this._insertAction||n&&this.cacheAdaptor.options.batch&&n.url.endsWith(this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase())return this.cacheAdaptor.processResponse(e,t,i,s,n,a);var e=this.cacheAdaptor.processResponse.apply(this,[].slice.call(arguments,0)),t=this.generateKey(t.dataSource.url,i),r={};window.localStorage&&(r=b.parseJSON(window.localStorage.getItem(this.guidId)));i=v.inArray(t,r.keys);for(-1!=i&&(r.results.splice(i,1),r.keys.splice(i,1)),r.results[r.keys.push(t)-1]={keys:t,result:e.result,timeStamp:new Date,count:e.count};r.results.length>this.pageSize;)r.results.splice(0,1),r.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(r)),e},update:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.update(e,t,i,s)},insert:function(e,t,i){return this._insertAction=!0,this.cacheAdaptor.insert(e,t,i)},remove:function(e,t,i,s){return this._crudAction=!0,this.cacheAdaptor.remove(e,t,i,s)},batchRequest:function(e,t,i){return this.cacheAdaptor.batchRequest(e,t,i)}});var y=function(e,t){return e.filter(function(e){return e.fn===t})||[]},w=function(e,t){for(var i=e.filter(function(e){return-1!==t.indexOf(e.fn)}),s={},n=0;n<i.length;n++)s[i[n].fn]||(s[i[n].fn]=i[n].e);return s},C=function(e,t,i,s){return e[t]&&(s=e[t](i,s),V(s)||(i=s)),i};b.ODataAdaptor=(new b.UrlAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onEachWhere:function(e,t){return e.isComplex?this.onComplexPredicate(e,t):this.onPredicate(e,t)},_typeStringQuery:function(e,t,i,s,n){-1!=i.indexOf("'")&&(i=i.replace(new RegExp(/'/g),"''"));return/[ !@@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(i)&&(i=encodeURIComponent(i)),i="'"+i+"'",t&&(s="cast("+s+", 'Edm.String')"),b.isGUID(i)&&(n="guid"),e.ignoreCase&&(n||(s="tolower("+s+")"),i=i.toLowerCase()),{val:i,guid:n,field:s}},onPredicate:function(e,t,i){var s,n,a,r="",o=e.value,l=typeof o,d=this._p(e.field);if(o instanceof Date&&(o="datetime'"+x.replacer(o).toJSON()+"'"),"string"==l&&(o=(h=this._typeStringQuery(e,i,o,d,n)).val,d=h.field,n=h.guid),s=b.data.odBiOperator[e.operator],""!=e.anyCondition&&s)return r+=o.table,r+="/"+e.anyCondition,r+="(d:d/",r+=d,r+=s,r+=o.value,r+=")";if("in"!=e.operator&&"notin"!=e.operator)return s?this.onOperation(r,s,d,o,n):(s=b.data.odUniOperator[e.operator])&&"string"==l?("substringof"===s&&(l=o,o=d,d=l),r+=s+"(",r+=d+",",n&&(r+=n),r+=o+")","notcontains"==e.operator&&(r+=" eq false"),""!=e.anyCondition&&s?(a+=o.table,a+="/"+e.anyCondition,a+="(d:d/",r+=r,a+=")"):r):"";r+="(";for(var h,c=0;c<o.length;c++)o[c]instanceof Date&&(o[c]="datetime'"+x.replacer(o[c]).toJSON()+"'"),"string"==typeof o[c]&&(h=this._typeStringQuery(e,i,o[c],d,n),o[c]=h.val,d=h.field,n=h.guid),r+=d,r+=s,r+=o[c],c!=o.length-1&&(r+="in"==e.operator?" or ":" and ");return r+=")"},onOperation:function(e,t,i,s,n){return e+=i,e+=t,n&&(e+=n),e+s},onComplexPredicate:function(e,t){for(var i=[],s=0;s<e.predicates.length;s++)i.push("("+this.onEachWhere(e.predicates[s],t)+")");return i.join(" "+e.condition+" ")},onWhere:function(e){return this.pvt.searches&&e.push(this.onEachWhere(this.pvt.searches,null,!0)),e.join(" and ")},onEachSearch:function(e){0===e.fields.length&&B("Query() - Search : oData search requires list of field names to search");for(var t=this.pvt.searches||[],i=0;i<e.fields.length;i++)t.push(new b.Predicate(e.fields[i],e.operator,e.key,e.ignoreCase));this.pvt.searches=t},onSearch:function(e){return this.pvt.searches=b.Predicate.or(this.pvt.searches),""},onEachSort:function(e){var t=[];if(e.name instanceof Array)for(var i=0;i<e.name.length;i++)t.push(this._p(e.name[i]));else t.push(this._p(e.name)+("descending"===e.direction?" desc":""));return t.join(",")},onSortBy:function(e){return e.reverse().join(",")},onGroup:function(e){return this.pvt.groups=e,""},onSelect:function(e){for(var t=0;t<e.length;t++)e[t]=this._p(e[t]);return e.join(",")},onAggregates:function(e){return this.pvt.aggregates=e,""},onCount:function(e){return!0===e?"allpages":""},beforeSend:function(e,t,i){i.url.endsWith(this.options.batch)&&"post"===i.type.toLowerCase()&&(t.setRequestHeader("Accept",s),t.setRequestHeader("DataServiceVersion","2.0"),t.overrideMimeType("text/plain; charset=x-user-defined")),e.dataSource.crossDomain||(t.setRequestHeader("DataServiceVersion","2.0"),t.setRequestHeader("MaxDataServiceVersion","2.0"))},processResponse:function(e,t,i,s,n,a){if(!b.isNullOrUndefined(e.d)){var r=i&&i._requiresCount?e.d.results:e.d;if(!b.isNullOrUndefined(r))for(var o=0;o<r.length;o++)b.isNullOrUndefined(r[o].__metadata)||delete r[o].__metadata}var l=n&&n.ejPvtData;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];if(n&&this.options.batch&&n.url.endsWith(this.options.batch)&&"post"===n.type.toLowerCase()){var d,h,c=(c=s.getResponseHeader("Content-Type")).substring(c.indexOf("=batchresponse")+1);if((e=e.split(c)).length<2)return;e=e[1];var u=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(e);e.replace(u[0],"");for(c=u[1],o=(e=e.split(c)).length;-1<o;o--)/\bContent-ID:/i.test(e[o])&&/\bHTTP.+201/.test(e[o])&&(d=parseInt(/\bContent-ID: (\d+)/i.exec(e[o])[1]),a.added[d]&&(h=x.parseJson(/^\{.+\}/m.exec(e[o])[0]),v.extend(a.added[d],this.processResponse(h))));return a}u=null,c={},s=(s=s&&s.getResponseHeader("DataServiceVersion"))&&parseInt(s,10)||2;if(i&&i._requiresCount&&((e.__count||e["odata.count"])&&(u=e.__count||e["odata.count"]),e.d&&(e=e.d),(e.__count||e["odata.count"])&&(u=e.__count||e["odata.count"])),3===s&&e.value&&(e=e.value),e.d&&(e=e.d),s<3&&e.results&&(e=e.results),l&&l.aggregates&&l.aggregates.length){for(var p,m=l.aggregates,g={},o=0;o<m.length;o++)(p=b.aggregates[m[o].type])&&(g[m[o].field+" - "+m[o].type]=p(e,m[o].field));c=g}if(l&&l.groups&&l.groups.length)for(var f=l.groups,o=0;o<f.length;o++){var _=D(f[o],i.queries);e=b.group(e,f[o],l.aggregates,_)}return V(u)?e:{result:e,count:u,aggregates:c}},convertToQueryString:function(e,t,i){var s,n=[],a=e.table||"";for(s in delete e.table,i.dataSource.requiresFormat&&(e.$format="json"),e)n.push(s+"="+e[s]);return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!a?n:n.length?a+"?"+n:a||""},insert:function(e,t,i){return{url:e.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t)}},remove:function(e,t,i,s){return"string"==typeof i?{type:"DELETE",url:b.isGUID(i)?e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")":e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"('"+i+"')"}:{type:"DELETE",url:e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i+")"}},update:function(e,t,i,s){t="string"!=typeof i[t]||b.isGUID(i[t])?e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"("+i[t]+")":e.dataSource.url.replace(/\/*$/,s?"/"+s:"")+"('"+i[t]+"')";return{type:"PUT",url:t,data:JSON.stringify(i),accept:this.options.accept}},batchRequest:function(e,t,i){var s=i.guid=b.getGuid(l),n=e.dataSource.url.replace(/\/*$/,"/"+this.options.batch),e={url:i.url,key:i.key,cid:1,cSet:b.getGuid(o)},i="--"+s+"\n";return i+="Content-Type: multipart/mixed; boundary="+e.cSet.replace("--","")+"\n",this.pvt.changeSet=0,i+=this.generateInsertRequest(t.added,e),i+=this.generateUpdateRequest(t.changed,e),i+=this.generateDeleteRequest(t.deleted,e),i+=e.cSet+"--\n",{type:"POST",url:n,contentType:"multipart/mixed; charset=UTF-8;boundary="+s,data:i+="--"+s+"--"}},generateDeleteRequest:function(e,t){if(!e)return"";for(var i,s="",n=0;n<e.length;n++)s+="\n"+t.cSet+"\n",s+=d+"\n\n",s+="DELETE ",i="string"==typeof e[n][t.key]?"'"+e[n][t.key]+"'":e[n][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+a+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=h+"\n";return s+"\n"},generateInsertRequest:function(e,t){if(!e)return"";for(var i="",s=0;s<e.length;s++)i+="\n"+t.cSet+"\n",i+=d+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+a+"\n",i+="Content-Id: "+this.pvt.changeSet+++"\n",i+=h+"\n\n",i+=JSON.stringify(e[s])+"\n";return i},generateUpdateRequest:function(e,t){if(!e)return"";for(var i,s="",n=0;n<e.length;n++)s+="\n"+t.cSet+"\n",s+=d+"\n\n",s+="PUT ",i="string"==typeof e[n][t.key]?"'"+e[n][t.key]+"'":e[n][t.key],s+=t.url+"("+i+") HTTP/1.1\n",s+="If-Match : * \n",s+="Accept: "+a+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=h+"\n\n",s+=JSON.stringify(e[n])+"\n\n";return s},_p:function(e){return e.replace(/\./g,"/")}}),b.ODataV4Adaptor=(new b.ODataAdaptor).extend({options:{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},onCount:function(e){return!0===e?"true":""},onPredicate:function(e,t,i){var s="",n=e.value instanceof Date;return b.data.odUniOperator.contains="contains",s=b.ODataAdaptor.prototype.onPredicate.call(this,e,t,i),b.data.odUniOperator.contains="substringof",n&&(s=s.replace(/datetime'(.*)'$/,"$1")),s},onOperation:function(e,t,i,s,n){return n?(e+="("+i,e+=t,e+=s.replace(/["']/g,"")+")"):(e+=i,e+=t,e+=s),e},onEachSearch:function(e){var t=this.pvt.search||[];t.push(e.key),this.pvt.search=t},onSearch:function(e){return this.pvt.search.join(" OR ")},beforeSend:function(e,t,i){},processQuery:function(e,t){for(var i=/\/[\d*\/]*/g,s="",n=t._expands.length-1;0<n;n--)if(0<=s.indexOf(t._expands[n]))t._expands.pop();else if(i.test(t._expands[n])){for(var a=(s=t._expands.pop()).replace(i,"($expand="),r=0;r<s.split(i).length-1;r++)a+=")";t._expands.unshift(a),n++}return b.ODataAdaptor.prototype.processQuery.apply(this,[e,t])},processResponse:function(e,t,i,s,n,a){var r=n&&n.ejPvtData;if(s&&s.getResponseHeader("Content-Type")&&-1!=s.getResponseHeader("Content-Type").indexOf("xml")&&9==e.nodeType)return i._requiresCount?{result:[],count:0}:[];if(n&&this.options.batch&&n.url.endsWith(this.options.batch)&&"post"===n.type.toLowerCase()){var o,l,d=(d=s.getResponseHeader("Content-Type")).substring(d.indexOf("=batchresponse")+1);if((e=e.split(d)).length<2)return;e=e[1];var h=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(e);e.replace(h[0],"");for(var d=h[1],c=(e=e.split(d)).length;-1<c;c--)/\bContent-ID:/i.test(e[c])&&/\bHTTP.+201/.test(e[c])&&(o=parseInt(/\bContent-ID: (\d+)/i.exec(e[c])[1]),a.added[o]&&(l=x.parseJson(/^\{.+\}/m.exec(e[c])[0]),v.extend(a.added[o],this.processResponse(l))));return a}h=null,d={};if(i&&i._requiresCount&&"@odata.count"in e&&(h=e["@odata.count"]),e=b.isNullOrUndefined(e.value)?e:e.value,r&&r.aggregates&&r.aggregates.length){for(var u,p=r.aggregates,m={},c=0;c<p.length;c++)(u=b.aggregates[p[c].type])&&(m[p[c].field+" - "+p[c].type]=u(e,p[c].field));d=m}if(r&&r.groups&&r.groups.length)for(var g=r.groups,c=0;c<g.length;c++){var f=D(g[c],i.queries);e=b.group(e,g[c],r.aggregates,f)}return V(h)?e:{result:e,count:h,aggregates:d}}}),b.JsonAdaptor=(new b.Adaptor).extend({processQuery:function(e,t){for(var i,s,n=e.dataSource.json.slice(0),a=n.length,r=!0,o={},l=0;l<t.queries.length;l++)i=this[(s=t.queries[l]).fn].call(this,n,s.e,t),"onAggregates"==s.fn?o[s.e.field+" - "+s.e.type]=i:n=i!==g?i:n,"onPage"!==s.fn&&"onSkip"!==s.fn&&"onTake"!==s.fn&&"onRange"!==s.fn||(r=!1),r&&(a=n.length);return t._requiresCount&&(n={result:n,count:a,aggregates:o}),n},batchRequest:function(e,t,i){for(var s=0;s<t.added.length;s++)this.insert(e,t.added[s]);for(s=0;s<t.changed.length;s++)this.update(e,i.key,t.changed[s]);for(s=0;s<t.deleted.length;s++)this.remove(e,i.key,t.deleted[s]);return t},onWhere:function(e,t){return e&&e.filter(function(e){return t.validate(e)})},onAggregates:function(e,t){var i=b.aggregates[t.type];return e&&i&&0!=e.length?i(e,t.field):null},onSearch:function(e,i){return e&&e.length?(0===i.fieldNames.length&&b.pvt.getFieldList(e[0],i.fieldNames),e.filter(function(e){for(var t=0;t<i.fieldNames.length;t++)if(i.comparer.call(e,b.pvt.getObject(i.fieldNames[t],e),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},onSortBy:function(e,t,i){if(!e)return e;var s,n=S(t.fieldName,i);if(!n)return e.sort(t.comparer);if(n instanceof Array){for(var a=(n=n.slice(0)).length-1;0<=a;a--)n[a]&&(s=t.comparer,n[a].endsWith(" desc")&&(s=b.pvt.fnSort(b.sortOrder.Descending),n[a]=n[a].replace(" desc","")),e=O(e,n[a],s,[]));return e}return O(e,n,t.comparer,i?i.queries:[])},onGroup:function(e,t,i){if(!e)return e;var s=y(i.queries,"onAggregates"),n=[];if(s.length)for(var a,r=0;r<s.length;r++)a=s[r].e,n.push({type:a.type,field:S(a.field,i)});var o=D(t.fieldName,i.queries);return b.group(e,S(t.fieldName,i),n,o)},onPage:function(e,t,i){var s=S(t.pageSize,i),i=(S(t.pageIndex,i)-1)*s,s=i+s;return e&&e.slice(i,s)},onRange:function(e,t){return e&&e.slice(S(t.start),S(t.end))},onTake:function(e,t){return e&&e.slice(0,S(t.nos))},onSkip:function(e,t){return e&&e.slice(S(t.nos))},onSelect:function(e,t){return e&&b.select(e,S(t.fieldNames))},insert:function(e,t){return e.dataSource.json.push(t)},remove:function(e,t,i,s){var n,a=e.dataSource.json;for("object"==typeof i&&(i=b.getObject(t,i)),n=0;n<a.length&&b.getObject(t,a[n])!==i;n++);return n!==a.length?a.splice(n,1):null},update:function(e,t,i,s){for(var n=e.dataSource.json,a=b.getObject(t,i),r=0;r<n.length&&b.getObject(t,n[r])!==a;r++);return r<n.length?v.extend(n[r],i):null}}),b.ForeignKeyAdaptor=function(i,s){var e=(new b[s||"JsonAdaptor"]).extend({init:function(){this.foreignData=[],this.key=[],this.adaptorType=s,this.value=[],this.fValue=[],this.keyField=[];for(var e=i,t=0;t<e.length;t++)this.foreignData[t]=e[t].dataSource,this.key[t]=e[t].foreignKeyField,this.fValue[t]=b.isNullOrUndefined(e[t].field)?e[t].foreignKeyValue:e[t].field+"_"+e[t].foreignKeyValue,this.value[t]=e[t].foreignKeyValue,this.keyField[t]=e[t].field||e[t].foreignKeyField,this.initial=!0},processQuery:function(e,t){var i=e.dataSource.json;if(this.initial){for(var s=0;s<i.length;s++)for(var n=this,a=0;a<this.foreignData.length;a++)this.foreignData[a].filter(function(e){b.getObject(n.key[a],e)==b.getObject(n.keyField[a],i[s])&&(i[s][n.fValue[a]]=b.getObject(n.value[a],e))});this.initial=!1}return this.base.processQuery.apply(this,[e,t])},setValue:function(e){for(var t=0;t<this.foreignData.length;t++){var i=this,s=e[this.fValue[t]];"string"!=typeof s||isNaN(s)||(s=b.parseFloat(s));var n=v.grep(i.foreignData[t],function(e){return e[i.value[t]]==s})[0];b.isNullOrUndefined(n)&&(n=v.grep(i.foreignData[t],function(e){return e[i.key[t]]==s})[0],b.getObject(this.value[t],n)!=g&&b.createObject(i.value[t],b.getObject(this.value[t],n),e)),b.getObject(this.value[t],n)!=g&&b.createObject(this.keyField[t],b.getObject(this.key[t],n),e)}},insert:function(e,t,i){return this.setValue(t),{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:t,table:i,action:"insert",antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}},update:function(e,t,i,s){return this.setValue(i),b.JsonAdaptor.prototype.update(e,t,i,s),{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify({value:i,action:"update",keyColumn:t,key:i[t],table:s,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""})}}});return v.extend(this,new e),this},b.remoteSaveAdaptor=(new b.JsonAdaptor).extend({beforeSend:b.UrlAdaptor.prototype.beforeSend,insert:b.UrlAdaptor.prototype.insert,update:b.UrlAdaptor.prototype.update,remove:b.UrlAdaptor.prototype.remove,addParams:b.UrlAdaptor.prototype.addParams,batchRequest:function(e,t,i,s){i={changed:t.changed,added:t.added,deleted:t.deleted,action:"batch",table:i.url,key:i.key,antiForgery:e.dataSource.antiForgery?e.antiForgeryToken().value:""};return s&&this.addParams({dm:e,query:s,params:s._params,reqParams:i}),{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(i)}},processResponse:function(e,t,i,s,n,a,r){if(b.isNullOrUndefined(a))return e.d||e;var o;for(e.d&&(e=e.d),e.added&&(a.added=b.parseJSON(e.added)),e.changed&&(a.changed=b.parseJSON(e.changed)),e.deleted&&(a.deleted=b.parseJSON(e.deleted)),o=0;o<a.added.length;o++)b.JsonAdaptor.prototype.insert(t,a.added[o]);for(o=0;o<a.changed.length;o++)b.JsonAdaptor.prototype.update(t,r,a.changed[o]);for(o=0;o<a.deleted.length;o++)b.JsonAdaptor.prototype.remove(t,r,a.deleted[o]);return e}}),b.WebApiAdaptor=(new b.ODataAdaptor).extend({insert:function(e,t,i){return{type:"POST",url:e.dataSource.url,data:JSON.stringify(t)}},remove:function(e,t,i,s){return{type:"DELETE",url:e.dataSource.url+"/"+i,data:JSON.stringify(i)}},update:function(e,t,i,s){return{type:"PUT",url:e.dataSource.url,data:JSON.stringify(i)}},batchRequest:function(i,e,s){var n=s.guid=b.getGuid(l),a=[];return v.each(e.added,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("POST "+i.dataSource.insertUrl+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),v.each(e.changed,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("PUT "+i.dataSource.updateUrl+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),v.each(e.deleted,function(e,t){a.push("--"+n),a.push("Content-Type: application/http; msgtype=request",""),a.push("DELETE "+i.dataSource.removeUrl+"/"+t[s.key]+" HTTP/1.1"),a.push("Content-Type: application/json; charset=utf-8"),a.push("Host: "+location.host),a.push("",t?JSON.stringify(t):"")}),a.push("--"+n+"--",""),{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,data:a.join("\r\n"),contentType:'multipart/mixed; boundary="'+n+'"'}},processResponse:function(e,t,i,s,n,a){var r=n&&n.ejPvtData;if(n&&"post"!=n.type.toLowerCase()){var o=null,n={},s=(s=s&&s.getResponseHeader("DataServiceVersion"))&&parseInt(s,10)||2;if(i&&i._requiresCount&&(V(e.Count)||(o=e.Count)),s<3&&e.Items&&(e=e.Items),r&&r.aggregates&&r.aggregates.length){for(var l,d=r.aggregates,h={},c=0;c<d.length;c++)(l=b.aggregates[d[c].type])&&(h[d[c].field+" - "+d[c].type]=l(e,d[c].field));n=h}if(r&&r.groups&&r.groups.length)for(var u=r.groups,c=0;c<u.length;c++){var p=D(u[c],i.queries);e=b.group(e,u[c],r.aggregates,p)}return V(o)?e:{result:e,count:o,aggregates:n}}}});var S=function(e,t){return"function"==typeof e?e.call(t||{}):e};b.TableModel=function(e,t,i,s){if(!E(this,b.TableModel))return new b.TableModel(t);E(t,Array)||B("ej.TableModel - Json Array is required");for(var n,a=[],r=z(m,this),o=0;o<t.length;o++)(n=new b.Model(t[o],this)).state="unchanged",n.on("stateChange",r),s&&n.computes(s),a.push(n);return this.name=e||"table1",this.rows=b.NotifierArray(a),this._deleted=[],this._events=v({}),this.dataManager=i,this._isDirty=!1,this},b.TableModel.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},setDataManager:function(e){this.dataManagar=e},saveChanges:function(){var e;this.dataManager&&E(this.dataManager,b.DataManager)||B("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()&&((e=this.dataManager.saveChanges(this.getChanges(),this.key,this.name)).done(z(function(e){for(var t=this.toArray(),i=0;i<t.length;i++)"added"===t.state&&t.set(this.key,e.added.filter(function(e){return e[this.key]===t.get(this.key)})[0][this.key]),t[i].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),e.fail(z(function(e){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:e})},this)),this._isDirty=!1)},rejectChanges:function(){for(var e=this.toArray(),t=0;t<e.length;t++)e[t].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(e){e=new b.Model(e);e._isDirty=this._isDirty=!0,this.rows.push(e),this._events.triggerHandler({type:"insert",model:e,table:this})},update:function(e){this.key||B("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=e,s=this.key,n=i[s],a=this.rows.array.filter(function(e){return e.get(s)===n});for(t in a=a[0],i)a.set(t,i[t]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:a,table:this})},remove:function(e){this.key||B("TableModel - update : Primary key should be assigned to TableModel.key");var t,i=this.key,s=-1;e&&"object"==typeof e&&(e=e[i]!==g?e[i]:e.get(i));for(var n=0;n<this.rows.length();n++)if(this.rows.array[n].get(i)===e){s=n;break}-1<s&&((t=this.rows.removeAt(s)).markDelete(),this._deleted.push({model:t,position:s}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:t,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var e={added:[],changed:[]},t=this.toArray(),i=0;i<t.length;i++)e[t[i].state]&&e[t[i].state].push(t[i].json);return e.deleted=b.select(this._deleted,["model"]),e},toArray:function(){return this.rows.toArray()},setDirty:function(e,t){this._isDirty!==!!e&&(this._isDirty=!!e,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(e){return this.rows.array[e]},length:function(){return this.rows.array.length},bindTo:function(e){var t,i=c,s=v(e.html()),n=this.toArray();v.inArray(e.prop("tagName").toLowerCase(),["table","tbody"])&&(i=u),i.insertBefore(e),e.detach().empty();for(var a=0;a<n.length;a++)t=s.clone(),n[a].bindTo(t),e.append(t);e.insertAfter(i),i.remove()}};var c=e?v(document.createElement("div")):{},u=e?v(document.createElement("tr")):{};b.Model=function(e,t,i){"string"==typeof t&&(i=t,t=null),this.$id=F("m"),this.json=e,this.table=t instanceof b.TableModel?t:null,this.name=i||this.table&&this.table.name,this.dataManager=t instanceof b.DataManager?t:t.dataManagar,this.actual={},this._events=v({}),this.isDirty=!1,this.state="added",this._props=[],this._computeEls={},this._fields={},this._attrEls={},this._updates={},this.computed={}},b.Model.prototype={computes:function(e){v.extend(this.computed,e)},on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},set:function(e,t){var i,s=this.json,n=e;e=e.split(".");for(var a=0;a<e.length-1;a++)s=s[(e=e[0])[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),i=s[e],this.actual[e]!==g||e in this.actual||(this.actual[e]=t),s[e]=t,this._updateValues(e,t),this._events.triggerHandler({type:n,current:t,previous:i,model:this})},get:function(e){return b.pvt.getObject(e,this.json)},revert:function(e){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,e?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},save:function(e,t){return e=e||this.dataManagar,t=t||e.dataSource.key,e||B("ej.Model - DataManager is required to commit the changes"),"added"===this.state?e.insert(this.json,this.name).done(b.proxy(function(e){v.extend(this.json,e.record)},this)):"changed"===this.state?e.update(t,this.json,this.name):"deleted"===this.state?e.remove(t,this.json,this.name):void 0},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(e,t){if(this.state!==e){if("added"===this.state){if("deleted"!==e)return;e="unchanged"}var i=e;t=t||{},this.state=e,this._events.triggerHandler(v.extend({type:"stateChange",current:e,previous:i,model:this},t))}},properties:function(){if(this._props.length)return this._props;for(var e in this.json)this._props.push(e),this._updates[e]={read:[],input:[]};return this._props},bindTo:function(e){var t,i,e=v(e),s=e.find("[ej-observe], [ej-computed], [ej-prop]"),n=s.length;e.data("ejModel",this);for(var a={fields:[],props:[],computes:[]},r=0;r<n;r++)(i=(t=s.eq(r)).attr("ej-prop"))&&this._processAttrib(i,t,a),(i=t.attr("ej-observe"))&&-1!==this._props.indexOf(i)?this._processField(t,i,a):(i=t.attr("ej-computed"))&&this._processComputed(i,t,a);e.data("ejModelBinding"+this.$id,a)},unbind:function(e){var t,i,s={props:this._attrEls,computes:this._computeEls},n=!1;for(i in e&&(s=v(e).removeData("ejModel").data("ejModelBinding"+this.$id)||s,n=!0),this.computed)t=s.computes[i],i=this.computed[i],t&&i.deps&&(this.off(i.deps.join(" "),t.handle),n&&delete this._computeEls[i]);for(i in n||(this._computeEls={}),s.props)(t=s.props[i])&&(this.off(t.deps.join(" "),t.handle),delete s.props[i],n&&delete this._attrEls[i]);if(n||(this._attrEls={}),s.fields&&s.fields.length)for(var a,r,o=s.fields.length,l=0;l<o;l++)a=s.fields[l],v(a).off("change",null,this._changeHandler),r=-1!==this.formElements.indexOf(a.tagName.toLowerCase())?"input":"read",-1!==(a=this._updates[r].indexOf(a))&&this._updates[r].splice(a,1)},_processComputed:function(e,t,i){var s,n,a;e&&(n=p(e),a=-1!==this.formElements.indexOf(t[0].tagName.toLowerCase())?"val":"html",this.computed[e]&&this.computed[n]||(this.computed[n]={value:new Function("var e = this; return "+e),deps:this._generateDeps(e)},e=n),(s=this.computed[e]).get||(s.get=function(){s.value.call(this.json)}),n=s.deps,s=s.value,this._updateDeps(n),this._updateElement(t,a,s),s={el:t,handle:z(this._computeHandle,this,{value:e,type:a})},this._computeEls[e]=s,i.computes[e]=s,this.on(n.join(" "),s.handle))},_computeHandle:function(e){var t=this._computeEls[e.value];t&&this.computed[e.value]&&this._updateElement(t.el,e.type,this.computed[e.value].value)},_updateElement:function(e,t,i){e[t](i.call(v.extend({},this.json,this.computed)))},_updateDeps:function(e){for(var t=0;t<e.length;t++)!(e[t]in this.json)&&e[t]in this.computed&&b.merge(e,this.computed[e[t]].deps)},_generateDeps:function(e){for(var t,i=e.replace(/(^e\.)|( e\.)/g,"#%^*##ej.#").split("#%^*#"),s=[],n=0;n<i.length;n++)i[n].startsWith("#ej.#")&&(t=i[n].replace("#ej.#","").split(" ")[0])&&-1!==this._props.indexOf(t)&&s.push(t);return s},_processAttrib:function(e,t,i){var s,n,a={};e=e.replace(/^ +| +$/g,"").split(";");for(var r=0;r<e.length;r++)e[r]=e[r].split(":"),e[r].length<2||(a[s=e[r][0].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,"")]=e[r][1].replace(/^ +| +$/g,"").replace(/^'|^"|'$|"$/g,""));var o=[];for(s in e=a)o.push(e[s]);this._updateDeps(o),this._updateProps(t,e),a=F("emak"),n={el:t,handle:z(this._attrHandle,this,a),value:e,deps:o},t.prop("ejmodelattrkey",a),i.props[a]=n,this._attrEls[a]=n,this.on(o.join(" "),n.handle)},_attrHandle:function(e){e=this._attrEls[e];e&&this._updateProps(e.el,e.value)},_updateProps:function(e,t){var i,s,n=this.json,a=this.computed;for(s in t)(i=t[s])in n?i=n[i]:i in a&&(i=(i=a[i])&&i.value.call(v.extend({},this.json,a))),V(i)||e.prop(s,i)},_updateValues:function(e,t){e=this._updates[e];e&&(e.read||e.input)&&(this._ensureItems(e.read,"html",t),this._ensureItems(e.input,"val",t))},_ensureItems:function(e,t,i){if(e)for(var s=e.length-1;-1<s;s--)e[s].offsetParent?v(e[s])[t](i):e.splice(s,1)},_changeHandler:function(e){e.data.self.set(e.data.prop,v(this).val())},_processField:function(e,t,i){var s={self:this,prop:t},n=this.get(t);return i.fields.push(e[0]),-1===this.formElements.indexOf(e[0].tagName.toLowerCase())?(e.html(n),this._updates[t].read.push(e[0])):(e.val(n).off("change",null,this._changeHandler).on("change",null,s,this._changeHandler),this._updates[t].input.push(e[0]))},formElements:["input","select","textarea"]};var t=/[^\w]+/g,p=function(e){return e.replace(t,"_")},m=function(e){this.setDirty(!0,e.model)};b.Predicate=function(e,t,i,s,n){return this instanceof b.Predicate?(this.ignoreAccent=!1,"string"==typeof e?(a="",-1!=t.toLowerCase().indexOf(" any")?(t=t.replace(" any",""),a="any"):-1!=t.toLowerCase().indexOf(" all")&&(t=t.replace(" all",""),a="all"),this.field=e,this.operator=t,this.value=i,this.ignoreCase=s,this.ignoreAccent=n,this.isComplex=!1,this.anyCondition=a,this._comparer=b.data.fnOperators.processOperator(""!=a?a:this.operator)):(e instanceof b.Predicate&&i instanceof b.Predicate||i instanceof Array)&&(this.isComplex=!0,this.condition=t.toLowerCase(),this.predicates=[e],i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this):new b.Predicate(e,t,i,s,n);var a},b.Predicate.and=function(){return R._combinePredicates([].slice.call(arguments,0),"and")},b.Predicate.or=function(){return R._combinePredicates([].slice.call(arguments,0),"or")},b.Predicate.fromJSON=function(e){if(E(e,Array)){for(var t=[],i=0,s=e.length;i<s;i++)t.push(R._fromJSON(e[i]));return t}return R._fromJSON(e)};var n,f,_,T,R={_combinePredicates:function(e,t){if(!e.length)return g;if(1===e.length){if(!E(e[0],Array))return e[0];e=e[0]}return new b.Predicate(e[0],t,e.slice(1))},_combine:function(e,t,i,s,n,a,r){return t instanceof b.Predicate?b.Predicate[n](e,t):"string"==typeof t?b.Predicate[n](e,new b.Predicate(t,i,s,a,r)):B("Predicate - "+n+" : invalid arguments")},_fromJSON:function(e){if(!e||E(e,b.Predicate))return e;for(var t=e.predicates||[],i=t.length,s=[],n=0;n<i;n++)s.push(R._fromJSON(t[n]));return e.isComplex?new b.Predicate(s[0],e.condition,s.slice(1)):new b.Predicate(e.field,e.operator,b.parseJSON({val:e.value}).val,e.ignoreCase,e.ignoreAccent)}};b.Predicate.prototype={and:function(e,t,i,s,n){return R._combine(this,e,t,i,"and",s,n)},or:function(e,t,i,s,n){return R._combine(this,e,t,i,"or",s,n)},validate:function(e){var t,i,s=this.predicates;if(!this.isComplex)return this._comparer.call(this,b.pvt.getObject(this.field,e),this.value,this.ignoreCase,this.ignoreAccent);t="and"===this.condition;for(var n=0;n<s.length;n++)if(i=s[n].validate(e),t){if(!i)return!1}else if(i)return!0;return t},toJSON:function(){var e,t;if(this.isComplex){e=[],t=this.predicates;for(var i=0;i<t.length;i++)e.push(t[i].toJSON())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:e,anyCondition:this.anyCondition}}},b.dataUtil={swap:function(e,t,i){var s;t!=i&&(s=e[t],e[t]=e[i],e[i]=s)},mergeSort:function(e,t,i){return i&&"string"!=typeof i||(i=b.pvt.fnSort(i,!0)),"function"==typeof t&&(i=t,t=null),b.pvt.mergeSort(e,t,i)},max:function(e,t,i){return"function"==typeof t&&(i=t,t=null),b.pvt.getItemFromComparer(e,t,i||b.pvt.fnDescending)},min:function(e,t,i){return"function"==typeof t&&(i=t,t=null),b.pvt.getItemFromComparer(e,t,i||b.pvt.fnAscending)},distinct:function(e,t,i){for(var s,n=[],a={},r=0;r<e.length;r++)(s=L(e,t,r))in a||(n.push(i?e[r]:s),a[s]=1);return n},sum:function(e,t){for(var i,s=0,n="number"!=typeof L(e,t,0),a=0;a<e.length;a++)i=L(e,t,a),isNaN(i)||null===i||(n&&(i=+i),s+=i);return s},avg:function(e,t){return b.sum(e,t)/e.length},select:function(e,t){for(var i=[],s=0;s<e.length;s++)i.push(b.pvt.extractFields(e[s],t));return i},group:function(t,e,i,s,n,a){if(n=n||1,t.GROUPGUID==b.pvt.consts.GROUPGUID){for(var r,o=0;o<t.length;o++)b.isNullOrUndefined(a)?(t[o].items=b.group(t[o].items,e,i,s,t.level+1),t[o].count=t[o].items.length):(r=-1,m=v.grep(a,function(e){return e.key==t[o].key}),r=a.indexOf(m[0]),t[o].items=b.group(t[o].items,e,i,s,t.level+1,a[r].items),t[o].count=a[r].count);return t.childLevels+=1,t}var l={},d=[];d.GROUPGUID=b.pvt.consts.GROUPGUID,d.level=n,d.childLevels=0,d.records=t;for(var h=0;h<t.length;h++){var c,u=L(t,e,h);b.isNullOrUndefined(s)||(u=s(u,e)),l[u]||(l[u]={key:u,count:0,items:[],aggregates:{},field:e},d.push(l[u]),b.isNullOrUndefined(a)||(c=v.grep(a,function(e){return e.key==l[u].key}),l[u].count=c[0].count)),l[u].count=b.isNullOrUndefined(a)?l[u].count+=1:l[u].count,l[u].items.push(t[h])}if(i&&i.length)for(h=0;h<d.length;h++){for(var p={},o=0;o<i.length;o++){var m,g=b.aggregates[i[o].type];b.isNullOrUndefined(a)?g&&(p[i[o].field+" - "+i[o].type]=g(d[h].items,i[o].field)):(m=v.grep(a,function(e){return e.key==d[h].key}),g&&(p[i[o].field+" - "+i[o].type]=g(m[0].items,i[o].field)))}d[h].aggregates=p}return d},parseTable:function(e,t,i){var s,n=e.rows,a=[],r=[];if(!n.length)return[];switch(i=i||0,(t||"").toLowerCase()){case b.headerOption.tHead:s=e.tHead.rows[i];break;case b.headerOption.row:default:s=e.rows[i]}for(var o=s.cells,l=0;l<o.length;l++)a.push(v.trim(o[l].innerHTML));for(l=i+1;l<n.length;l++){for(var d={},h=n[l].cells,c=0;c<h.length;c++){var u=h[c].innerHTML;"string"==typeof u&&v.isNumeric(u)?d[a[c]]=Number(u):d[a[c]]=u}r.push(d)}return r}},b.headerOption={tHead:"thead",row:"row"},b.aggregates={sum:function(e,t){return b.sum(e,t)},average:function(e,t){return b.avg(e,t)},minimum:function(e,t){return b.getObject(t,b.min(e,t))},maximum:function(e,t){return b.getObject(t,b.max(e,t))},truecount:function(e,t){t=b.Predicate(t,"equal",!0);return b.DataManager(e).executeLocal(b.Query().where(t)).length},falsecount:function(e,t){t=b.Predicate(t,"equal",!1);return b.DataManager(e).executeLocal(b.Query().where(t)).length},count:function(e,t){return e.length}},b.pvt={filterQueries:y,mergeSort:function(e,t,i){if(e.length<=1)return e;var s=parseInt(e.length/2,10),n=e.slice(0,s),s=e.slice(s),n=b.pvt.mergeSort(n,t,i),s=b.pvt.mergeSort(s,t,i);return b.pvt.merge(n,s,t,i)},getItemFromComparer:function(e,t,i){var s,n,a,r=0,o="string"==typeof L(e,t,0);if(e.length)for(;b.isNullOrUndefined(s)&&r<e.length;)s=L(e,t,r),a=e[r++];for(;r<e.length;r++)n=L(e,t,r),b.isNullOrUndefined(n)||(o&&(s=+s,n=+n),0<i(s,n)&&(s=n,a=e[r]));return a},quickSelect:function(e,t,i,s,n,a){if(i==s)return e[i];var r=b.pvt.partition(e,t,i,s,a),o=r-i+1;return o==n?e[r]:n<o?b.pvt.quickSelect(e,t,i,r-1,n,a):b.pvt.quickSelect(e,t,r+1,s,n-o,a)},extractFields:function(e,t){var i={};if(1==t.length)return b.pvt.getObject(t[0],e);for(var s=0;s<t.length;s++)i[t[s].replace(".",b.pvt.consts.complexPropertyMerge)]=b.pvt.getObject(t[s],e);return i},partition:function(e,t,i,s,n){var a=parseInt((i+s)/2,10),r=L(e,t,a);b.swap(e,a,s);for(var o=a=i;o<s;o++)n(L(e,t,o),r)&&(b.swap(e,o,a),a++);return b.swap(e,a,s),a},fnSort:function(e){return(e=e?e.toLowerCase():b.sortOrder.Ascending)==b.sortOrder.Ascending?b.pvt.fnAscending:b.pvt.fnDescending},fnGetComparer:function(i,s){return function(e,t){return s(b.pvt.getObject(i,e),b.pvt.getObject(i,t))}},fnAscending:function(e,t){return b.isNullOrUndefined(t)&&b.isNullOrUndefined(e)||null===t||t===g?-1:"string"==typeof e?e.localeCompare(t):null===e||e===g?1:e-t},fnDescending:function(e,t){return b.isNullOrUndefined(t)&&b.isNullOrUndefined(e)?-1:null===t||t===g?1:"string"==typeof e?-1*e.localeCompare(t):null===e||e===g?-1:t-e},merge:function(e,t,i,s){for(var n,a=[];0<e.length||0<t.length;)n=0<e.length&&0<t.length?s?s(L(e,i,0),L(t,i,0))<=0?e:t:e[0][i]<e[0][i]?e:t:0<e.length?e:t,a.push(n.shift());return a},getObject:function(e,t){if(!t)return g;if(!e)return t;if(-1===e.indexOf("."))return t[e];for(var i=t,s=e.split("."),n=0;n<s.length&&null!=i;n++)i=i[s[n]];return i},createObject:function(e,t,i){for(var s=e.split("."),i=i||window,n=i,a=0;a<s.length;a++)a+1==s.length?n[s[a]]=t===g?{}:t:null==n[s[a]]&&(n[s[a]]={}),n=n[s[a]];return i},ignoreDiacritics:function(e){return"string"!=typeof e?e:e.split("").map(function(e){return e in b.data.diacritics?b.data.diacritics[e]:e}).join("")},getFieldList:function(e,t,i){if(i===g&&(i=""),t===g||null===t)return b.pvt.getFieldList(e,[],i);for(var s in e)"object"!=typeof e[s]||e[s]instanceof Array?t.push(i+s):b.pvt.getFieldList(e[s],t,i+s+".");return t}},b.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},b.data={},b.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},b.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne ",in:" eq ",notin:" ne "},b.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",notcontains:"substringof"},b.data.diacritics={"â¶":"A","ï¼¡":"A","Ã":"A","Ã":"A","Ã":"A","áº¦":"A","áº¤":"A","áºª":"A","áº¨":"A","Ã":"A","Ä":"A","Ä":"A","áº°":"A","áº®":"A","áº´":"A","áº²":"A","È¦":"A","Ç ":"A","Ã":"A","Ç":"A","áº¢":"A","Ã":"A","Çº":"A","Ç":"A","È":"A","È":"A","áº ":"A","áº¬":"A","áº¶":"A","á¸":"A","Ä":"A","Èº":"A","â±¯":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","â·":"B","ï¼¢":"B","á¸":"B","á¸":"B","á¸":"B","É":"B","Æ":"B","Æ":"B","â¸":"C","ï¼£":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Æ":"C","È»":"C","ê¾":"C","â¹":"D","ï¼¤":"D","á¸":"D","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Ä":"D","Æ":"D","Æ":"D","Æ":"D","ê¹":"D","Ç±":"DZ","Ç":"DZ","Ç²":"Dz","Ç":"Dz","âº":"E","ï¼¥":"E","Ã":"E","Ã":"E","Ã":"E","á»":"E","áº¾":"E","á»":"E","á»":"E","áº¼":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","Ä":"E","Ã":"E","áºº":"E","Ä":"E","È":"E","È":"E","áº¸":"E","á»":"E","È¨":"E","á¸":"E","Ä":"E","á¸":"E","á¸":"E","Æ":"E","Æ":"E","â»":"F","ï¼¦":"F","á¸":"F","Æ":"F","ê»":"F","â¼":"G","ï¼§":"G","Ç´":"G","Ä":"G","á¸ ":"G","Ä":"G","Ä ":"G","Ç¦":"G","Ä¢":"G","Ç¤":"G","Æ":"G","ê ":"G","ê½":"G","ê¾":"G","â½":"H","ï¼¨":"H","Ä¤":"H","á¸¢":"H","á¸¦":"H","È":"H","á¸¤":"H","á¸¨":"H","á¸ª":"H","Ä¦":"H","â±§":"H","â±µ":"H","ê":"H","â¾":"I","ï¼©":"I","Ã":"I","Ã":"I","Ã":"I","Ä¨":"I","Äª":"I","Ä¬":"I","Ä°":"I","Ã":"I","á¸®":"I","á»":"I","Ç":"I","È":"I","È":"I","á»":"I","Ä®":"I","á¸¬":"I","Æ":"I","â¿":"J","ï¼ª":"J","Ä´":"J","É":"J","â":"K","ï¼«":"K","á¸°":"K","Ç¨":"K","á¸²":"K","Ä¶":"K","á¸´":"K","Æ":"K","â±©":"K","ê":"K","ê":"K","ê":"K","ê¢":"K","â":"L","ï¼¬":"L","Ä¿":"L","Ä¹":"L","Ä½":"L","á¸¶":"L","á¸¸":"L","Ä»":"L","á¸¼":"L","á¸º":"L","Å":"L","È½":"L","â±¢":"L","â± ":"L","ê":"L","ê":"L","ê":"L","Ç":"LJ","Ç":"Lj","â":"M","ï¼­":"M","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Æ":"M","â":"N","ï¼®":"N","Ç¸":"N","Å":"N","Ã":"N","á¹":"N","Å":"N","á¹":"N","Å":"N","á¹":"N","á¹":"N","È ":"N","Æ":"N","ê":"N","ê¤":"N","Ç":"NJ","Ç":"Nj","â":"O","ï¼¯":"O","Ã":"O","Ã":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","á¹":"O","È¬":"O","á¹":"O","Å":"O","á¹":"O","á¹":"O","Å":"O","È®":"O","È°":"O","Ã":"O","Èª":"O","á»":"O","Å":"O","Ç":"O","È":"O","È":"O","Æ ":"O","á»":"O","á»":"O","á» ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Æ":"O","Æ":"O","ê":"O","ê":"O","Æ¢":"OI","ê":"OO","È¢":"OU","â":"P","ï¼°":"P","á¹":"P","á¹":"P","Æ¤":"P","â±£":"P","ê":"P","ê":"P","ê":"P","â":"Q","ï¼±":"Q","ê":"Q","ê":"Q","É":"Q","â":"R","ï¼²":"R","Å":"R","á¹":"R","Å":"R","È":"R","È":"R","á¹":"R","á¹":"R","Å":"R","á¹":"R","É":"R","â±¤":"R","ê":"R","ê¦":"R","ê":"R","â":"S","ï¼³":"S","áº":"S","Å":"S","á¹¤":"S","Å":"S","á¹ ":"S","Å ":"S","á¹¦":"S","á¹¢":"S","á¹¨":"S","È":"S","Å":"S","â±¾":"S","ê¨":"S","ê":"S","â":"T","ï¼´":"T","á¹ª":"T","Å¤":"T","á¹¬":"T","È":"T","Å¢":"T","á¹°":"T","á¹®":"T","Å¦":"T","Æ¬":"T","Æ®":"T","È¾":"T","ê":"T","ê¨":"TZ","â":"U","ï¼µ":"U","Ã":"U","Ã":"U","Ã":"U","Å¨":"U","á¹¸":"U","Åª":"U","á¹º":"U","Å¬":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á»¦":"U","Å®":"U","Å°":"U","Ç":"U","È":"U","È":"U","Æ¯":"U","á»ª":"U","á»¨":"U","á»®":"U","á»¬":"U","á»°":"U","á»¤":"U","á¹²":"U","Å²":"U","á¹¶":"U","á¹´":"U","É":"U","â":"V","ï¼¶":"V","á¹¼":"V","á¹¾":"V","Æ²":"V","ê":"V","É":"V","ê ":"VY","â":"W","ï¼·":"W","áº":"W","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","â±²":"W","â":"X","ï¼¸":"X","áº":"X","áº":"X","â":"Y","ï¼¹":"Y","á»²":"Y","Ã":"Y","Å¶":"Y","á»¸":"Y","È²":"Y","áº":"Y","Å¸":"Y","á»¶":"Y","á»´":"Y","Æ³":"Y","É":"Y","á»¾":"Y","â":"Z","ï¼º":"Z","Å¹":"Z","áº":"Z","Å»":"Z","Å½":"Z","áº":"Z","áº":"Z","Æµ":"Z","È¤":"Z","â±¿":"Z","â±«":"Z","ê¢":"Z","â":"a","ï½":"a","áº":"a","Ã ":"a","Ã¡":"a","Ã¢":"a","áº§":"a","áº¥":"a","áº«":"a","áº©":"a","Ã£":"a","Ä":"a","Ä":"a","áº±":"a","áº¯":"a","áºµ":"a","áº³":"a","È§":"a","Ç¡":"a","Ã¤":"a","Ç":"a","áº£":"a","Ã¥":"a","Ç»":"a","Ç":"a","È":"a","È":"a","áº¡":"a","áº­":"a","áº·":"a","á¸":"a","Ä":"a","â±¥":"a","É":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","â":"b","ï½":"b","á¸":"b","á¸":"b","á¸":"b","Æ":"b","Æ":"b","É":"b","â":"c","ï½":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Æ":"c","È¼":"c","ê¿":"c","â":"c","â":"d","ï½":"d","á¸":"d","Ä":"d","á¸":"d","á¸":"d","á¸":"d","á¸":"d","Ä":"d","Æ":"d","É":"d","É":"d","êº":"d","Ç³":"dz","Ç":"dz","â":"e","ï½":"e","Ã¨":"e","Ã©":"e","Ãª":"e","á»":"e","áº¿":"e","á»":"e","á»":"e","áº½":"e","Ä":"e","á¸":"e","á¸":"e","Ä":"e","Ä":"e","Ã«":"e","áº»":"e","Ä":"e","È":"e","È":"e","áº¹":"e","á»":"e","È©":"e","á¸":"e","Ä":"e","á¸":"e","á¸":"e","É":"e","É":"e","Ç":"e","â":"f","ï½":"f","á¸":"f","Æ":"f","ê¼":"f","â":"g","ï½":"g","Çµ":"g","Ä":"g","á¸¡":"g","Ä":"g","Ä¡":"g","Ç§":"g","Ä£":"g","Ç¥":"g","É ":"g","ê¡":"g","áµ¹":"g","ê¿":"g","â":"h","ï½":"h","Ä¥":"h","á¸£":"h","á¸§":"h","È":"h","á¸¥":"h","á¸©":"h","á¸«":"h","áº":"h","Ä§":"h","â±¨":"h","â±¶":"h","É¥":"h","Æ":"hv","â":"i","ï½":"i","Ã¬":"i","Ã­":"i","Ã®":"i","Ä©":"i","Ä«":"i","Ä­":"i","Ã¯":"i","á¸¯":"i","á»":"i","Ç":"i","È":"i","È":"i","á»":"i","Ä¯":"i","á¸­":"i","É¨":"i","Ä±":"i","â":"j","ï½":"j","Äµ":"j","Ç°":"j","É":"j","â":"k","ï½":"k","á¸±":"k","Ç©":"k","á¸³":"k","Ä·":"k","á¸µ":"k","Æ":"k","â±ª":"k","ê":"k","ê":"k","ê":"k","ê£":"k","â":"l","ï½":"l","Å":"l","Äº":"l","Ä¾":"l","á¸·":"l","á¸¹":"l","Ä¼":"l","á¸½":"l","á¸»":"l","Å¿":"l","Å":"l","Æ":"l","É«":"l","â±¡":"l","ê":"l","ê":"l","ê":"l","Ç":"lj","â":"m","ï½":"m","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","É¯":"m","â":"n","ï½":"n","Ç¹":"n","Å":"n","Ã±":"n","á¹":"n","Å":"n","á¹":"n","Å":"n","á¹":"n","á¹":"n","Æ":"n","É²":"n","Å":"n","ê":"n","ê¥":"n","Ç":"nj","â":"o","ï½":"o","Ã²":"o","Ã³":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ãµ":"o","á¹":"o","È­":"o","á¹":"o","Å":"o","á¹":"o","á¹":"o","Å":"o","È¯":"o","È±":"o","Ã¶":"o","È«":"o","á»":"o","Å":"o","Ç":"o","È":"o","È":"o","Æ¡":"o","á»":"o","á»":"o","á»¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","É":"o","ê":"o","ê":"o","Éµ":"o","Æ£":"oi","È£":"ou","ê":"oo","â":"p","ï½":"p","á¹":"p","á¹":"p","Æ¥":"p","áµ½":"p","ê":"p","ê":"p","ê":"p","â ":"q","ï½":"q","É":"q","ê":"q","ê":"q","â¡":"r","ï½":"r","Å":"r","á¹":"r","Å":"r","È":"r","È":"r","á¹":"r","á¹":"r","Å":"r","á¹":"r","É":"r","É½":"r","ê":"r","ê§":"r","ê":"r","â¢":"s","ï½":"s","Ã":"s","Å":"s","á¹¥":"s","Å":"s","á¹¡":"s","Å¡":"s","á¹§":"s","á¹£":"s","á¹©":"s","È":"s","Å":"s","È¿":"s","ê©":"s","ê":"s","áº":"s","â£":"t","ï½":"t","á¹«":"t","áº":"t","Å¥":"t","á¹­":"t","È":"t","Å£":"t","á¹±":"t","á¹¯":"t","Å§":"t","Æ­":"t","Ê":"t","â±¦":"t","ê":"t","ê©":"tz","â¤":"u","ï½":"u","Ã¹":"u","Ãº":"u","Ã»":"u","Å©":"u","á¹¹":"u","Å«":"u","á¹»":"u","Å­":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á»§":"u","Å¯":"u","Å±":"u","Ç":"u","È":"u","È":"u","Æ°":"u","á»«":"u","á»©":"u","á»¯":"u","á»­":"u","á»±":"u","á»¥":"u","á¹³":"u","Å³":"u","á¹·":"u","á¹µ":"u","Ê":"u","â¥":"v","ï½":"v","á¹½":"v","á¹¿":"v","Ê":"v","ê":"v","Ê":"v","ê¡":"vy","â¦":"w","ï½":"w","áº":"w","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","â§":"x","ï½":"x","áº":"x","áº":"x","â¨":"y","ï½":"y","á»³":"y","Ã½":"y","Å·":"y","á»¹":"y","È³":"y","áº":"y","Ã¿":"y","á»·":"y","áº":"y","á»µ":"y","Æ´":"y","É":"y","á»¿":"y","â©":"z","ï½":"z","Åº":"z","áº":"z","Å¼":"z","Å¾":"z","áº":"z","áº":"z","Æ¶":"z","È¥":"z","É":"z","â±¬":"z","ê£":"z","Î":"Î","Î":"Î","Î":"Î","Î":"Î","Îª":"Î","Î":"Î","Î":"Î¥","Î«":"Î¥","Î":"Î©","Î¬":"Î±","Î­":"Îµ","Î®":"Î·","Î¯":"Î¹","Ï":"Î¹","Î":"Î¹","Ï":"Î¿","Ï":"Ï","Ï":"Ï","Î°":"Ï","Ï":"Ï","Ï":"Ï"},b.data.fnOperators={equal:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?j(e)==j(t):e==t},notequal:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),!b.data.fnOperators.equal(e,t,i)},notin:function(e,t,i){for(var s=0;s<t.length;s++)if(0==b.data.fnOperators.notequal(e,t[s],i))return!1;return!0},lessthan:function(e,t,i){return i?j(e)<j(t):e<t},greaterthan:function(e,t,i){return i?j(e)>j(t):t<e},lessthanorequal:function(e,t,i){return i?j(e)<=j(t):e<=t},greaterthanorequal:function(e,t,i){return i?j(e)>=j(t):t<=e},contains:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?!V(e)&&!V(t)&&-1!=j(e).indexOf(j(t)):!V(e)&&!V(t)&&-1!=e.toString().indexOf(t)},notcontains:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),!b.data.fnOperators.contains(e,t,i)},notnull:function(e){return null!==e},isnull:function(e){return null===e},startswith:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?e&&t&&j(e).startsWith(j(t)):e&&t&&e.startsWith(t)},endswith:function(e,t,i,s){return s&&(e=b.pvt.ignoreDiacritics(e),t=b.pvt.ignoreDiacritics(t)),i?e&&t&&j(e).endsWith(j(t)):e&&t&&e.endsWith(t)},all:function(e,t,i){for(var s=0;s<t.length;s++)if(0==b.data.fnOperators[this.operator](e,t[s],i))return!1;return!0},any:function(e,t,i){for(var s=0;s<t.length;s++)if(1==b.data.fnOperators[this.operator](e,t[s],i))return!0;return!1},processSymbols:function(e){e=b.data.operatorSymbols[e];if(e){e=b.data.fnOperators[e];if(e)return e}return B("Query - Process Operator : Invalid operator")},processOperator:function(e){var t=b.data.fnOperators[e];return t||b.data.fnOperators.processSymbols(e)}},b.data.fnOperators.in=function(e,t,i){for(var s=0;s<t.length;s++)if(1==b.data.fnOperators.equal(e,t[s],i))return!0;return!1},b.NotifierArray=function(e){return E(this,b.NotifierArray)?(this.array=e,this._events=v({}),this._isDirty=!1,this):new b.NotifierArray(e)},b.NotifierArray.prototype={on:function(e,t){this._events.on(e,t)},off:function(e,t){this._events.off(e,t)},push:function(e){var t=E(e,Array)?[].push.apply(this.array,e):this.array.push(e);return this._raise("add",{item:e,index:this.length()-1}),t},pop:function(){var e=this.array.pop();return this._raise("remove",{item:e,index:this.length()-1}),e},addAt:function(e,t){return this.array.splice(e,0,t),this._raise("add",{item:t,index:e}),t},removeAt:function(e){var t=this.array.splice(e,1)[0];return this._raise("remove",{item:t,index:e}),t},remove:function(e){var t=this.array.indexOf(e);return-1<t&&(this.array.splice(t,1),this._raise("remove",{item:e,index:t})),t},length:function(){return this.array.length},_raise:function(e,t){this._events.triggerHandler(v.extend({type:e},t)),this._events.triggerHandler({type:"all",name:e,args:t})},toArray:function(){return this.array}},v.extend(b,b.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=0,s=this.length;i<s;++i)e.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(e){var t=this.length;if(0===t)return-1;for(var i=0;i<t;i++)if(i in this&&this[i]===e)return i;return-1},Array.prototype.filter=Array.prototype.filter||function(e){if("function"!=typeof e)throw new TypeError;for(var t=[],i=arguments[1]||this,s=0;s<this.length;s++){var n=this[s];e.call(i,n,s,this)&&t.push(n)}return t},String.prototype.endsWith=String.prototype.endsWith||function(e){return this.slice(-e.length)===e},String.prototype.startsWith=String.prototype.startsWith||function(e){return this.slice(0,e.length)===e},b.support||(b.support={}),b.support.stableSort=function(){for(var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16].sort(function(){return 0}),t=0;t<17;t++)if(t!==e[t])return!1;return!0}(),b.support.cors=v.support.cors,!v.support.cors&&window.XDomainRequest&&(n=/^https?:\/\//i,f=/^get|post$/i,_=new RegExp("^"+location.protocol,"i"),T=/\/xml/i,v.ajaxTransport("text html xml json",function(t,i,e){if(t.crossDomain&&t.async&&f.test(t.type)&&n.test(i.url)&&_.test(i.url)){var a=null,r=(i.dataType||"").toLowerCase();return{send:function(e,n){a=new XDomainRequest,/^\d+$/.test(i.timeout)&&(a.timeout=i.timeout),a.ontimeout=function(){n(500,"timeout")},a.onload=function(){var e="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,t={code:200,message:"success"},i={text:a.responseText};try{if("json"===r)try{i.json=JSON.parse(a.responseText)}catch(e){t.code=500,t.message="parseerror"}else if("xml"===r||"text"!==r&&T.test(a.contentType)){var s=new ActiveXObject("Microsoft.XMLDOM");s.async=!1;try{s.loadXML(a.responseText)}catch(e){s=g}if(!s||!s.documentElement||s.getElementsByTagName("parsererror").length)throw t.code=500,t.message="parseerror","Invalid XML: "+a.responseText;i.xml=s}}catch(e){throw e}finally{n(t.code,t.message,i,e)}},a.onerror=function(){n(500,"error",{text:a.responseText})},-1!=navigator.userAgent.indexOf("MSIE 9.0")&&(a.onprogress=function(){}),a.open(t.type,t.url),a.send(i.data)},abort:function(){a&&a.abort()}}}})),v.support.cors=!0,b.sortOrder={Ascending:"ascending",Descending:"descending"},b.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};var k=function(e,t){t&&(e=z(e,t)),(window.setImmediate||window.setTimeout)(e,0)};b.support.enableLocalizedSort=!1;var O=function(e,t,i,s){return b.support.stableSort?b.support.enableLocalizedSort||"string"!=typeof b.pvt.getObject(t,e[0]||{})||i!==b.pvt.fnAscending&&i!==b.pvt.fnDescending||1!==s.filter(function(e){return"onSortBy"===e.fn}).length?e.sort(b.pvt.fnGetComparer(t,i)):I(e,t,i===b.pvt.fnDescending):b.mergeSort(e,t,i)},D=function(e,t){for(var i=v.grep(t,function(e){return"onGroup"==e.fn}),s=0;s<i.length;s++)if(b.getObject("fieldName",i[s].e)==e)return b.getObject("fn",i[s].e)},I=function(e,t,i){var s=Object.prototype.toString;Object.prototype.toString=-1===t.indexOf(".")?function(){return this[t]}:function(){return b.pvt.getObject(t,this)},e=e.sort(),Object.prototype.toString=s,i&&e.reverse()},j=function(e){return e?(e.toLowerCase?e:e.toString()).toLowerCase():0===e||!1===e?e.toString():""},L=function(e,t,i){return t?b.pvt.getObject(t,e[i]):e[i]},A=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&1===e.nodeType&&"object"==typeof e&&"string"==typeof e.nodeName},E=function(e,t){return e instanceof t},P=function(t,i,s,n){return function(e){return"object"==typeof e&&(n=e,e=null),new b.TableModel(e||t,i,s,n)}},M=function(o){return function(e,t){(t=t||window.ko)||B("Knockout is undefined");for(var i,s,n,a=[],r=0;r<o.length;r++){for(s in i={},o[r])s.startsWith("_")||(i[s]=t.observable(o[r][s]));for(s in e)n=e[s],n=v.isPlainObject(n)?(n.owner||(n.owner=i),t.computed(n)):t.computed(n,i),i[s]=n;a.push(i)}return t.observableArray(a)}},i=0,F=function(e){return e+(i+=1)};b.getGuid=function(e){var s;return(e||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(e,t){var i;return s="crypto"in window&&"getRandomValues"in crypto?(i=new Uint8Array(1),window.crypto.getRandomValues(i),i[0]%16|0):16*Math.random()|0,"0123456789abcdef"[19===t?3&s|8:s]})};var N=function(t,i){return function(){var e=[].slice.call(arguments,0);return e.push(this),t.apply(i||this,e)}},z=function(t,i,s){return"bind"in t?s?t.bind(i,s):t.bind(i):function(){var e=s?[s]:[];return e.push.apply(e,arguments),t.apply(i||this,e)}};b.merge=function(e,t){e&&t&&Array.prototype.push.apply(e,t)};var V=function(e){return e===g||null===e},B=function(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}}(window.jQuery,window.Syncfusion,window.document),function(x,y,w){y.widget("ejDatePicker","ej.DatePicker",{element:null,_rootCss:"e-datepicker",model:null,validTags:["input","div","span"],_setFirst:!1,_addToPersist:["value"],_cancelValue:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{dayHeaderFormat:"min",showPopupButton:!0,enableAnimation:!0,showFooter:!0,displayInline:!1,htmlAttributes:{},dateFormat:"",watermarkText:"Select date",value:null,minDate:new Date("01/01/1900"),maxDate:new Date("12/31/2099"),startLevel:"month",depthLevel:"",cssClass:"",startDay:-1,stepMonths:1,locale:"en-US",showOtherMonths:!0,enableStrictMode:!1,enablePersistence:!1,enabled:!0,width:"",height:"",enableRTL:!1,showRoundedCorner:!1,headerFormat:"MMMM yyyy",buttonText:"Today",readOnly:!1,specialDates:null,fields:{date:"date",tooltip:"tooltip",iconClass:"iconClass",cssClass:"cssClass"},showTooltip:!0,showDisabledRange:!0,highlightSection:"none",highlightWeekend:!1,validationRules:null,validationMessage:null,validationMessages:null,allowEdit:!0,tooltipFormat:"ddd MMM dd yyyy",allowDrillDown:!0,blackoutDates:[],beforeDateCreate:null,open:null,close:null,select:null,change:null,focusIn:null,focusOut:null,beforeOpen:null,beforeClose:null,navigate:null,create:null,destroy:null,weekNumber:!1,timeZone:!0},dataTypes:{startDay:"number",stepMonths:"number",showOtherMonths:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",displayInline:"boolean",showPopupButton:"boolean",locale:"string",readOnly:"boolean",cssClass:"string",dateFormat:"string",watermarkText:"string",headerFormat:"string",buttonText:"string",specialDates:"data",showTooltip:"boolean",highlightSection:"enum",highlightWeekend:"boolean",enableAnimation:"boolean",validationRules:"data",validationMessage:"data",validationMessages:"data",htmlAttributes:"data",tooltipFormat:"string",allowEdit:"boolean",allowDrillDown:"boolean",weekNumber:"boolean"},_renderPopup:function(){this.sfCalendar=y.buildTag("div.e-datepicker e-popup e-widget "+this.model.cssClass+" e-calendar "+(this.model.specialDates&&this.model.specialDates[0][this._mapField._icon]?"e-icons ":""),"",{},{id:this._id?"e-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}).insertBefore(this.element),this.model.displayInline&&!this.element.is("input")&&this.sfCalendar.addClass("e-inline"),this.popup=this.sfCalendar,y.isTouchDevice()||this.sfCalendar.addClass("e-ntouch"),this._setRestrictDateState(this.model.showDisabledRange),this._createCalender(),this._setDisplayInline(this.model.displayInline),this._resizeCalender(),this._setRTL(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this._wireCalendarEvents()},_setModel:function(e){var t,i=!1,s=!1,n=!1;for(t in e)switch("showPopupButton"!=t&&"width"!=t&&"dateFormat"!=t&&"height"!=t&&"readOnly"!=t&&"allowEdit"!=t&&"enabled"!=t&&"watermarkText"!=t&&"htmlAttributes"!=t&&"validationMessages"!=t&&"validationRules"!=t&&y.isNullOrUndefined(this.sfCalendar)&&this._renderPopup(),t){case"dayHeaderFormat":this.model.dayHeaderFormat=e[t],i=s=!0;break;case"weekNumber":this.model.weekNumber=e[t],this._refreshDatepicker();break;case"showPopupButton":this._renderDateIcon(e[t],!0);break;case"displayInline":e[t]||this._bindDateButton(),this._setDisplayInline(e[t]),this.model.allowEdit||e[t]||!this._isInputBox||this.element.on("mousedown",x.proxy(this._showDatePopUp,this));break;case"value":y.isPlainObject(e[t])&&(e[t]=null),y.isNullOrUndefined(e.minDate)&&y.isNullOrUndefined(e.maxDate)?(this._setDateValue(e[t]),this._specificFormat()&&(this._stopRefresh=!0),e[t]=this.model.value):this._updateDateValue(e[t]),this.model.value&&this.sfCalendar?x(this.element).attr("aria-activedescendant",x(this.sfCalendar.find(".e-active")).attr("id")):x(this.element).removeAttr("aria-activedescendant"),n=i=s=!0;break;case"specialDates":this.model.specialDates=e[t],this._createSpecialDateObject(),i=s=!0;break;case"fields":this.model.fields=e[t],this._mapField=this._getMapper(),i=s=!0;break;case"showTooltip":this.model.showTooltip=e[t],i=s=!0;break;case"highlightWeekend":this.model.highlightWeekend=e[t],i=s=!0;break;case"highlightSection":this.model.highlightSection=e[t],i=s=!0;break;case"dateFormat":this.model.dateFormat=e[t],this._ensureValue();break;case"minDate":this._setMinDate(e[t]),e[t]=this.model.minDate,this._ensureValue(),n=i=s=!0;break;case"maxDate":this._setMaxDate(e[t]),e[t]=this.model.maxDate,this._ensureValue(),n=i=s=!0;break;case"locale":this.model.locale=e[t],this.model.startDay=y.isNullOrUndefined(this._options.startDay)&&this.model.startDay===this.culture.calendar.firstDay||this._options.startDay===this.defaults.startDay?-1:this.model.startDay,this.model.dateFormat=y.isNullOrUndefined(this._options.dateFormat)&&this.model.dateFormat===this.culture.calendar.patterns.d?"":this.model.dateFormat,this._setCulture(e[t]),this.model.value&&this._setDateValue(this.model.value),e[t]=this.model.locale,i=s=!0;break;case"showOtherMonths":this.model.showOtherMonths=e[t],this._otherMonthsVisibility();break;case"enableStrictMode":this.model.enableStrictMode=e[t],n=i=s=!0;break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessages":case"validationMessage":this.model.validationMessages=e[t],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initValidator(),this._setValidation());break;case"readOnly":this.model.readOnly=e[t],this._disbleMaualInput();break;case"width":this._setWidth(e[t]);break;case"height":this._setHeight(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"enabled":e[t]?this.enable():this.disable();break;case"buttonText":y.isNullOrUndefined(this._options)&&(this._options={}),this._options.buttonText=this.model.buttonText=e[t],this._localizedLabels.buttonText=this.model.buttonText,this._setFooterText(e[t]);break;case"showFooter":this._enableFooter(e[t]);break;case"watermarkText":y.isNullOrUndefined(this._options)&&(this._options={}),this._options.watermarkText=this.model.watermarkText=e[t],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"startDay":var a=e[t];(parseInt(e[t])<0||6<parseInt(e[t]))&&(e[t]=this.culture.calendar.firstDay,a=-1),this.model.startDay=e[t],y.isNullOrUndefined(this._options)&&(this._options={}),this._options.startDay=a,i=s=!0;break;case"startLevel":this.model.startLevel=e[t],i=s=!0;break;case"headerFormat":this.model.headerFormat=e[t],i=s=!0;break;case"depthLevel":this.model.depthLevel=e[t],i=s=!0;break;case"htmlAttributes":this._addAttr(e[t]);break;case"allowEdit":this._changeEditable(e[t]);break;case"tooltipFormat":this.model.tooltipFormat=e[t],i=s=!0;break;case"allowDrillDown":this._allowQuickPick(e[t]),i=s=!0;break;case"showDisabledRange":this._setRestrictDateState(e[t]);break;case"blackoutDates":this.model.blackoutDates=e[t],this._initDisableObj(this.model.blackoutDates),i=s=!0}n&&(this._validateMinMaxDate(),e.value=this.model.value,e.maxDate=this.model.maxDate,e.minDate=this.model.minDate),this._setWaterMark(),i&&(this.isValidState||this.model.displayInline)&&this._refreshDatepicker(),s&&!this._startNavigate&&this._startLevel(this.model.startLevel),this._triggerChangeEvent(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.model.displayInline&&x(window).off("resize",x.proxy(this._OnWindowResize,this)),this._isOpen&&this.hide(),this.sfCalendar&&this.sfCalendar.remove(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this.element.removeClass("e-datepicker e-input"),this.element.removeAttr("aria-atomic aria-live aria-activedescendant aria-expanded role placeholder tabindex"),this._cloneElement.hasAttribute("name")||this.element.removeAttr("name")},_init:function(e){this._options=e,this._cloneElement=this.element.clone(),this._dt_drilldown=!1,this._ISORegex(),this._initDisableObj(this.model.blackoutDates),this.animation={open:{duration:200},close:{duration:100}},this._animating=!1,this._isInputBox=this._isInputBox(),this._startNavigate=!1,this._keyboardInteraction=!1,this._isSupport=document.createElement("input").placeholder!=w,this._checkAttribute(),this._setValues(),this._createDatePicker(),y.isNullOrUndefined(e)||y.isNullOrUndefined(e.validationMessage)||(this.model.validationMessages=this.model.validationMessage),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&e.value!=w&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._isISODate=/[T]/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){this.element.rules("add",this.model.validationRules);var e,t=(t=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),i=this.element.attr("name");for(e in t.settings.messages[i]={},this.model.validationRules){var s=null;if(!y.isNullOrUndefined(this.model.validationRules[e])){if(y.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[e]))for(var n in t.settings.messages[i][e]=x.validator.messages[e],this.model.validationMessages)e==n&&(s=this.model.validationMessages[e]);else s=this.model.validationRules.messages[e];t.settings.messages[i][e]=null!=s?s:x.validator.messages[e]}}},setValue:function(e){"string"==typeof e&&(e=new Date(e));var t=this.model.value;this._setDateValue(e),this._checkErrorClass(),t!=this.model.value&&this._triggerChangeEvent()},_checkAttribute:function(){for(var e,t,i=["min","max","readonly","disabled"],s=["minDate","maxDate","readOnly","enabled"],n=0;n<i.length;n++)e=this.element.attr(i[n]),t=s[n],y.isNullOrUndefined(e)||(y.isNullOrUndefined(this._options)||y.isNullOrUndefined(this._options[t]))&&(this.model[t]="enabled"!=t&&"readOnly"!=t?new Date(e):"readOnly"==t?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_updateDateValue:function(e){var t=this._checkDateObject(e);null!=t?(this.isValidState=!0,""==t?(this.element.val(""),this.model.value=null):(this.model.value=t,this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat)))):("string"==typeof t&&this.model.enableStrictMode?this.element.val(e):this.element.val(""),this.model.value=null,this.isValidState=""==this.element.val()),this._removeWatermark()},_ensureValue:function(){var e=this._parseDate(this.element.val(),this.model.dateFormat);this.model.value?this._setDateValue(this.model.value):e&&this._setDateValue(e)},_changeEditable:function(e){var t=e?"_on":"_off";this.element.is(":input")&&(e?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",x.proxy(this._showDatePopUp,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.model.displayInline||this.element.on("mousedown",x.proxy(this._showDatePopUp,this))),this[t](this.element,"blur",this._onFocusOut),this[t](this.element,"focus",this._onFocusIn),this[t](this.element,"keydown",this._onKeyDown))},_allowQuickPick:function(e){x(".e-datepicker-headertext",this.sfCalendar)[e?"on":"off"]("click",x.proxy(this._forwardNavHandler,this))},_setRestrictDateState:function(e){e=e?"addClass":"removeClass";this.sfCalendar[e]("e-dp-restrict-show")},_setValues:function(){this.Date=new Date,this._id=this.element[0].id,this.isValidState=!0,this._setCulture(this.model.locale),this._setMinDate(this.model.minDate),this._setMaxDate(this.model.maxDate),this._calendarDate=this._zeroTime(new Date),(this.model.startDay<0||6<this.model.startDay)&&(this.model.startDay=0),this.Date.firstDayOfWeek=this.model.startDay,this.Date.fullYearStart="20",this._showHeader=!0,y.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._validateMinMaxDate(),this._dateValue=new Date(this._calendarDate.toString()),this._isIE7=this._checkIE7(),this._isIE8="msie"==y.browserInfo().name&&"8.0"==y.browserInfo().version,this._isIE9="msie"==y.browserInfo().name&&"9.0"==y.browserInfo().version,this._getInternalEvents=!1,this._flag=!0,this._ejHLWeekEnd=!1,this._isOpen=!1,this._prevDate=null,this._preValue=null,this._isFocused=!1},_addAttr:function(e){var s=this;x.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"disabled"==i?s.disable():"readOnly"==i?s.model.readOnly=!0:"style"==i?s.wrapper.attr(t,e):"id"==i?(s.wrapper.attr(t,e+"_wrapper"),s.element.attr(t,e)):(y.isValidAttr(s.element[0],t)?s.element:s.wrapper).attr(t,e)})},_createDatePicker:function(){this._createWrapper(),this._wireEvents(),this.model.displayInline&&this.show(),this.model.enableRTL&&this._setRTL(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0)},_checkNameAttr:function(){!this.element.attr("name")&&this._isInputBox&&this.element.attr("name",this.element[0].id),this.model.displayInline&&!this._isInputBox&&this._hiddenInput.attr("name",this.element[0].id)},_createWrapper:function(){var e;this._getMapper(),this.model.specialDates&&this._createSpecialDateObject(),this.element[0].hasAttribute("tabindex")||this.element.attr("tabindex","0"),this._isInputBox&&(this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive","aria-expanded":"false",role:"combobox"}),this.wrapper=y.buildTag("span.e-datewidget e-widget "+this.model.cssClass),this.wrapper.attr("style",this.element.attr("style")),this.element.removeAttr("style"),y.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.innerWrapper=y.buildTag("span.e-in-wrap e-box e-padding"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this.dateIcon=y.buildTag("span.e-select#"+this._id+"-img","",{},this._isIE8?{unselectable:"on"}:{}).append(y.buildTag("span.e-icon e-calendar","",{},{"aria-label":"Select"}).attr(this._isIE8?{unselectable:"on"}:{})).insertAfter(this.element)),this._isSupport&&(!this.model.displayInline||this._isInputBox)||(this._hiddenInput=y.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._isInputBox&&this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block"),x((e=this)._hiddenInput).focus(function(){e.element.focus()})),this._checkNameAttr(),this.model.height||(this.model.height=this.element.attr("height")),this.model.width||(this.model.width=this.element.attr("width")),this._setHeight(this.model.height),this._setWidth(this.model.width),this._id&&x("#e-"+this._id).remove(),this._setDateValue(this.model.value),this._preValue=this._parseDate(this.element.val(),this.model.dateFormat),this._setWaterMark(),this._dateValue=new Date(this._calendarDate.toString()),this.model.displayInline?this._renderPopup():this._isInputBox&&this._renderDateIcon(this.model.showPopupButton,!1),this.model.readOnly&&this._disbleMaualInput(),this.model.enabled?this.model.enabled&&x(this.element).hasClass("e-disable")&&this.enable():this.disable(),this._layoutChanged(),this._checkErrorClass(),this._addAttr(this.model.htmlAttributes)},_isInputBox:function(){return this.element.is("input[type=date]")&&this.element.attr("type","text"),this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))},_renderDateIcon:function(e,t){t&&this.model.showPopupButton==e||(!e&&this.dateIcon?(this._bindInputEvent(),this.dateIcon.css("display","none"),this.innerWrapper.removeClass("e-padding")):(this.innerWrapper&&(this.innerWrapper.addClass("e-padding"),this.dateIcon.css("display","block")),this.model.displayInline||this._bindDateButton()),this.model.showPopupButton=e)},_resizeCalender:function(){"short"==this.model.dayHeaderFormat||"min"==this.model.dayHeaderFormat||"none"==this.model.dayHeaderFormat?this.sfCalendar.removeClass("e-headerlong"):"long"==this.model.dayHeaderFormat&&this.sfCalendar.addClass("e-headerlong")},_setWidth:function(e){e?(this.wrapper||this.element).width(e):this.model.width=this.wrapper?this.wrapper.outerWidth():this.element.width()},_setHeight:function(e){e?(this.wrapper||this.element).height(e):this.model.height=this.wrapper?this.wrapper.outerHeight():this.element.height(),this._isIE7&&this.element.height(this.innerWrapper.height())},_setRTL:function(e){e?(this.wrapper&&this.wrapper.addClass("e-rtl"),this.sfCalendar&&this.sfCalendar.addClass("e-rtl")):(this.wrapper&&this.wrapper.removeClass("e-rtl"),this.sfCalendar&&this.sfCalendar.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.innerWrapper&&this.innerWrapper.addClass("e-corner"),this.sfCalendar&&this.sfCalendar.addClass("e-corner")):(this.innerWrapper&&this.innerWrapper.removeClass("e-corner"),this.sfCalendar&&this.sfCalendar.removeClass("e-corner"))},_refreshDatepicker:function(){if(this._stopRefresh)this._stopRefresh=!1;else{var e=this.element.val(),t=!1;if(null!==this.model.navigate&&this.sfCalendar.find("table")[0]!==w){var i=this.sfCalendar.find("table")[0].className;if("e-dp-viewdays"===i&&+this._dateValue!=+this._calendarDate)this._calendarDate=this._dateValue,t=!0;else if("e-dp-viewdays"!==i)return void("e-dp-viewmonths"!==i&&"e-dp-viewyears"!==i&&"e-dp-viewallyears"!==i||(this._startNavigate=!0))}i=this._specificFormat()&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=e?this._parseDate(e,!0):this._parseDate(e),i=this._validateYearValue(i),null!==this.model.navigate&&null!==i&&i!==this._calendarDate&&(i=this._calendarDate),this._setDateValue(i),this._specificFormat()&&this._compareDate(this.model.value,this._calendarDate)&&this.element.val(e),x(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._calendarDate,this.model.headerFormat)),this._resizeCalender(),this._dateValue=new Date(this._calendarDate.toString()),this._hoverDate=this._calendarDate.getDate()-1,this._renderCalendar(this,this._dateValue),t&&""===e&&this._addFocus("day",this._hoverDate),this._setFooterText(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter),this._layoutChanged()}},_removeCurrentMonthFromHideDate:function(){for(var e=this.sfCalendar.find("tbody.e-datepicker-days tr").length,t=0;t<e;t++)for(var i=this.sfCalendar.find("tbody.e-datepicker-days tr")[t].cells.length,s=0;s<i;s++){var n=x(this.sfCalendar.find("tbody.e-datepicker-days tr")[t].cells[s]);n.hasClass("e-hidedate")&&n.hasClass("current-month")&&n.removeClass("current-month")}},_validateYearValue:function(e){var t;return null!=e&&(t="string"==typeof(t=y.preferredCulture(this.model.locale).calendars.standard.twoDigitYearMax)?(new Date).getFullYear()%100+parseInt(t,10):t,this._calendarDate.getFullYear()-e.getFullYear()==100&&this._calendarDate.getFullYear()>t&&e.setFullYear(this._calendarDate.getFullYear())),e},_setFooterText:function(e){x(".e-footer-text",this.sfCalendar).html(e)},_setSkin:function(e){this.wrapper?(this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)):(this.element.removeClass(this.model.cssClass),this.element.addClass(e)),this.sfCalendar.removeClass(this.model.cssClass),this.sfCalendar.addClass(e)},_setDisplayInline:function(e){(this.model.displayInline=e)&&this._isInputBox?(this.sfCalendar.insertAfter(this.wrapper),this._setDatePickerPosition()):e?(this.element.append(this.sfCalendar),this._isSupport&&this._isInputBox||this._hiddenInput.css("display","none")):(this.sfCalendar.css("display","none"),x("body").append(this.sfCalendar),this._isOpen=!1),e&&(this.show(),this._off(this.dateIcon,"mousedown",this._showDatePopUp),this.element.off("mousedown",x.proxy(this._showDatePopUp,this)))},_disbleMaualInput:function(){this.model.readOnly?(x(this.element).attr("readonly","readonly"),this.model.displayInline||this.hide()):this.model.allowEdit&&x(this.element).prop("readonly",!1)},_checkDateObject:function(e,t){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?null:(e instanceof Date||(e=(t=this._specificFormat()?this._parseDate(e,!0):this._parseDate(e,t))||((t=this._checkJSONString(e))?t:null)),!isNaN(Date.parse(e))&&(this._dateValue=this._calendarDate=this._zeroTime(e),this._validateDate(e))?this._dateValue:null)},_checkJSONString:function(e){return isNaN(Date.parse(e))?this.model.enableStrictMode&&null==y.parseDate(e,this.model.value,this.model.locale)?null:this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._dateFromISO(e):void 0:new Date(e).toJSON()===e||new Date(e).toDateString()===e||new Date(e).toGMTString()===e||new Date(e).toISOString()===e||new Date(e).toLocaleString()===e||new Date(e).toString()===e||new Date(e).toUTCString()===e?this.model.timeZone?new Date(new Date(e).getTime()+60*y.serverTimezoneOffset*60*1e3):e.match(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i)&&0<e.match(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i).length?(e=(e=e.split("T"))[0],y.parseDate(e,"yyyy-MM-dd",this.model.locale)):void 0:"string"==typeof e?this._dateFromISO(e):void 0},_dateFromISO:function(e){var t=this._isISODate.test(e)&&(this._extISORegex.exec(e)||this._basicISORegex.exec(e)),i="",s="",n="";if(t){for(var a=0;a<this._dates.length;a++)if(this._dates[a][1].exec(t[1])){i=this._dates[a][0];break}if(t[3])for(var r=0;r<this._times.length;r++)if(this._times[r][1].exec(t[3])){s=(t[2]||" ")+this._times[r][0];break}t[4]&&this._zeroRegex.exec(t[4])&&(n="Z");for(var o=(i+s+n).match(this._tokens),l=[],d=0;d<o.length;d++){var h=o[d],c=this._checkLiteral(o[d]),h=this._numberRegex[c?o[d].toLowerCase():h.length]||new RegExp("^\\d{1,"+h.length+"}");(h=e.match(h))&&(0<=e.substr(0,e.indexOf(h))&&!c&&(0<=o[d].indexOf("M")?l.push(parseInt(h[0])-1):l.push(parseInt(h[0]))),e=e.slice(e.indexOf(h[0])+h[0].length))}return"Z"==t[4]?new Date(Date.UTC.apply(null,l)):new Date(l[0],l[1],l[2],l[3],l[4],l[5])}return new Date(e+"")},_checkLiteral:function(e){e=e.toLowerCase();return"t"==e||"z"==e||":"==e||"-"==e},_checkInstanceType:function(e){return(e=this._stringToObject(e))?(e instanceof Date||(e=this._parseDate(e)),isNaN(Date.parse(e))?null:this._zeroTime(e)):null},_stringToObject:function(e){var t;return"string"==typeof e&&(e=null!=(t=y.parseDate(e,this.model.dateFormat,this.model.locale))?t:new Date(e)),e},_validateMinMaxDate:function(){var e=!1,t=!1;this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode?this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.minDate,t=!(this.isValidState=!1)):this.model.value>this.model.maxDate?(this._calendarDate=this.model.maxDate,t=!(this.isValidState=!1)):this.isValidState=!0:this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate):(this.model.value?this.model.value<this.model.minDate?(this._calendarDate=this.model.value=this.model.minDate,e=!0):this.model.value>this.model.maxDate&&(this._calendarDate=this.model.value=this.model.maxDate,e=!0):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),e&&this.element.val(this._formatter(this.model.value,this.model.dateFormat)),t&&this._getInternalEvents&&this._trigger("outOfRange")},_setCulture:function(e){this.culture=y.preferredCulture(e),this.culture&&(this.model.locale="en"==this.culture.name?"en-US":this.culture.name,this.Date.dayNames=this.culture.calendar.days.names,this.Date.dayNamesMin=this.culture.calendar.days.namesShort,this.Date.abbrDayNames=this.culture.calendar.days.namesAbbr,this.Date.monthNames=this.culture.calendar.months.names,this.Date.abbrMonthNames=this.culture.calendar.months.namesAbbr,this.Date.format=this.culture.calendar.patterns.d,""==this.model.dateFormat&&(this.model.dateFormat=this.culture.calendar.patterns.d),-1==this.model.startDay&&(this.model.startDay=this.culture.calendar.firstDay)),this._separator=this._getSeparator(),this._localizedLabels=this._getLocalizedLabels(),y.isNullOrUndefined(this._options)||(y.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),y.isNullOrUndefined(this._options.buttonText)||(this._localizedLabels.buttonText=this._options.buttonText)),this._localizedLabelToModel()},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?x(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_setDatePickerPosition:function(){var e,t,i,s,n,a,r,o,l;this.model.displayInline&&!this._isInputBox||(e=this.element.is("input")?this.wrapper:this.element,t=this._getOffset(e),i=x(document).scrollTop()+x(window).height()-(t.top+x(e).outerHeight()),r=t.top-x(document).scrollTop(),l=this.sfCalendar.outerHeight(),s=this.sfCalendar.outerWidth(),n=t.left,o=e.outerHeight(),e.height(),a=this._getZindexPartial(),r=l<i||r<l?t.top+o+3:t.top-l-3,o=x(document).scrollLeft()+x(window).width()-n,l=x(document).scrollLeft()+n+e.width(),(this.model.enableRTL||o<s&&s<n+e.outerWidth()&&!y.isNullOrUndefined(this.wrapper))&&(n+=this.wrapper.width()-this.sfCalendar.width()),l<s&&(n=t.left),this.sfCalendar.css({left:n+"px",top:r+"px","z-index":a}))},_getOffset:function(e){return y.util.getOffset(e)},_getZindexPartial:function(){return y.util.getZindexPartial(this.element,this.sfCalendar)},_setMinDate:function(e){this.model.minDate=this._checkInstanceType(e),this.model.minDate||(this.model.minDate=new Date("11/31/1899"))},_setMaxDate:function(e){this.model.maxDate=this._checkInstanceType(e),this.model.maxDate||(this.model.maxDate=new Date("12/31/2099"))},_setDateValue:function(e,t){t=this._checkDateObject(e,t);null!=t?(this.isValidState=!0,this.model.value=new Date(t),this.model.displayInline||this.wrapper.addClass("e-valid"),this._validateMinMaxDate(),this._preTxtValue=this.element.val(this._formatter(this.model.value,this.model.dateFormat))):(e instanceof Date&&(this._validateMinMaxDate(),e=this._formatter(e,this.model.dateFormat)),this.model.enableStrictMode?this.element.val(e):this.element.val(null),this.model.value=null,this.model.displayInline||this.wrapper.removeClass("e-valid"),this._triggerChangeEvent(),this.isValidState=!(""!=this.element.val()&&!y.isNullOrUndefined(this.element.val()))),this._removeWatermark()},_updateInputVal:function(){null==this._validateValue()&&this.model.enableStrictMode||!this.sfCalendar||!this.sfCalendar.find(".e-datepicker-days").is(":visible")||this._refreshDatepicker()},_validateInputVal:function(){var e=this._validateValue();null!=e&&(this.model.enableStrictMode||(e<=this.model.maxDate&&e>=this.model.minDate||(this.model.value=null),this.isValidState=!0))},_validateValue:function(){var e;return e=this._specificFormat()&&this.element.val()!=this._formatter(this._preValue,this.model.dateFormat,this.model.locale)?this._parseDate(this.element.val(),!0):this._parseDate(this.element.val()),this._validateYearValue(e)},_getSeparator:function(){for(var e=this.culture?this.culture.calendar.patterns.d:this.model.dateFormat,t=new RegExp("^[a-zA-Z0-9]+$"),i=0;i<e.length;i++)if(!t.test(e[i]))return e[i]},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),7<=e&&e<8)return!0}return!1},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_formatter:function(e,t){t=this._checkFormat(t);return y.format(e,t,this.model.locale)},_parseDate:function(e,t){var i=this._checkFormat(this.model.dateFormat),s=e;return this._specificFormat()&&s!=w&&""!=e&&1!=t&&y.format(y.parseDate(s,i,this.model.locale),this.model.dateFormat,this.model.locale)!=s?this._dateValue:y.parseDate(e,i,this.model.locale)},_checkFormat:function(e){var t=this,i=this._regExp();return e.replace(i,function(e){return e="/"===e&&"/"!==y.preferredCulture(t.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},_zeroTime:function(e){e="string"==typeof e?this._parseDate(e):new Date(e);return e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e},_getDaysInMonth:function(e){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][e.getMonth()]},_addDays:function(e,t){return e.setDate(e.getDate()+t),e},_addYears:function(e,t){return e.setFullYear(e.getFullYear()+t),e},_addMonths:function(e,t){var i=e.getDate();return e.setMonth(e.getMonth()+t),i>e.getDate()&&this._addDays(e,-e.getDate()),e},_isWeekend:function(e){return 0==e.getDay()||6==e.getDay()},_isSpecialDates:function(e){if(this.model.specialDates)for(var t=0;t<this.model.specialDates.length;t++)if(this.model.specialDates[t]&&this.model.specialDates[t][this._mapField._date]&&e.getDate()==this.model.specialDates[t][this._mapField._date].getDate()&&e.getMonth()==this.model.specialDates[t][this._mapField._date].getMonth()&&e.getFullYear()==this.model.specialDates[t][this._mapField._date].getFullYear())return this._getIndex=t,!0;return!1},_getMapper:function(){var e=this.model.fields;this._mapField={},this._mapField._date=e&&e.date?e.date:"date",this._mapField._tooltip=e&&e.tooltip?e.tooltip:"tooltip",this._mapField._icon=e&&e.iconClass?e.iconClass:"iconClass",this._mapField._custom=e&&e.cssClass?e.cssClass:"cssClass"},_createSpecialDateObject:function(){for(var e=0;e<this.model.specialDates.length;e++)this.model.specialDates[e][this._mapField._date]=this._checkInstanceType(this.model.specialDates[e][this._mapField._date])},_getMonthName:function(e,t){return(e?this.Date.abbrMonthNames:this.Date.monthNames)[t.getMonth()]},_displayNewMonth:function(e,t){return this._setDisplayedMonth(this.displayedMonth+e,this.displayedYear+t,!0),!1},_setDisplayedMonth:function(e,t,i){var s,n,a;this.model.minDate!=w&&this.model.maxDate!=w&&((s=new Date(this.model.minDate.getTime())).setDate(1),(n=new Date(this.model.maxDate.getTime())).setDate(1),!e&&!t||isNaN(e)&&isNaN(t)?(a=this._zeroTime(new Date)).setDate(1):a=isNaN(e)?new Date(t,this.displayedMonth,1):isNaN(t)?new Date(this.displayedYear,e,1):new Date(t,e,1),a.getTime()<s.getTime()?a=s:a.getTime()>n.getTime()&&(a=n),s=this.displayedMonth,n=this.displayedYear,this.displayedMonth=a.getMonth(),this.displayedYear=a.getFullYear(),a=a,!i||this.displayedMonth==s&&this.displayedYear==n||(this._renderCalendar(this,a),this._dateValue=a,this._trigger("monthChanged",[this.displayedMonth,this.displayedYear])))},_clearSelected:function(){this.numSelected=0,y.isNullOrUndefined(this.sfCalendar)||("week"==this.model.highlightSection?x("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-selected-week"):"month"==this.model.highlightSection?x("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().parent().removeClass("e-selected-month"):"workdays"==this.model.highlightSection?x("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1).parent().removeClass("e-work-week"):x("td.e-active",this.sfCalendar).removeClass("e-active").addClass("e-state-hover").attr("aria-selected",!1))},_addSelected:function(){"week"==this.model.highlightSection?x("td.e-active",this.sfCalendar).parent().addClass("e-selected-week"):"month"==this.model.highlightSection?x("td.e-active, this.sfCalendar").parent().parent().addClass("e-selected-month"):"workdays"==this.model.highlightSection&&x("td.e-active",this.sfCalendar).parent().addClass("e-work-week")},_hideOtherMonths:function(e){x("td.other-month",e).css("visibility","hidden")},_showOtherMonths:function(e){x("td.other-month",e).css({visibility:"visible"})},_otherMonthsVisibility:function(){this.model.showOtherMonths?this._showOtherMonths(this.sfCalendar):this._hideOtherMonths(this.sfCalendar)},_createCalender:function(){y.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(y.buildTag("span.e-prev").append(y.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(y.buildTag("span.e-text").append(y.buildTag("span.e-datepicker-headertext").text(this._formatter(this._calendarDate,this.model.headerFormat)).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(y.buildTag("span.e-next").append(y.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this.sfCalendar),this._enableHeader(this._showHeader);var e=y.buildTag("table.e-dp-viewdays","",{}).data("e-table","data").attr({role:"grid"}).attr(this._isIE8?{unselectable:"on"}:{});this.sfCalendar.append(e),this._renderCalendar(this),this._startLevel(this.model.startLevel),y.buildTag("div.e-footer").append(y.buildTag("span.e-footer-icon")).append(y.buildTag("span.e-footer-text")).appendTo(this.sfCalendar),x(".e-footer-text",this.sfCalendar).html(this._localizedLabels.buttonText),this._enableFooter(this.model.showFooter)},_enableHeader:function(e){e?x(".e-header",this.sfCalendar).show():x(".e-header",this.sfCalendar).hide()},_enableFooter:function(e){e?x(".e-footer",this.sfCalendar).show():x(".e-footer",this.sfCalendar).hide(),this._todayBtnDisable()},_todayBtnDisable:function(){var e=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),0,0,0);+this.model.minDate<=+e&&+this.model.maxDate>=+e?x(".e-footer",this.sfCalendar).removeClass("e-footer-disable"):x(".e-footer",this.sfCalendar).addClass("e-footer-disable")},_checkArrows:function(e,t){this._preArrowCondition(e,this.model.minDate.getFullYear()),this._nextArrowCondition(t,this.model.maxDate.getFullYear())},_checkDateArrows:function(){this._preArrowCondition(this._tempMinDate,this.model.minDate),this._nextArrowCondition(this._tempMaxDate,this.model.maxDate)},_preArrowCondition:function(e,t){e<=t?this.sfCalendar.find(".e-prev").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-prev").removeClass("e-disable").attr({"aria-disabled":!1})},_nextArrowCondition:function(e,t){t<=e?this.sfCalendar.find(".e-next").addClass("e-disable").attr({"aria-disabled":!0}):this.sfCalendar.find(".e-next").removeClass("e-disable").attr({"aria-disabled":!1})},_previousNextHandler:function(e){if(this.model.readOnly||!this.model.enabled||x(e.target).hasClass("e-disable")||x(e.currentTarget).hasClass("e-disable"))return!1;e.preventDefault(),this._keyboardInteraction=!1;var t,i=x("table",this.sfCalendar),i=this._navigateFrom(i),e=!!(x(e.target).is("a")?x(e.target.parentNode):x(e.target)).hasClass("e-prev");switch(this._processNextPrevDate(e),x("table",this.sfCalendar).get(0).className){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:t,navigateFrom:i})},_processNextPrevDate:function(e){if(this._DRPdisableFade&&(i=new Date(this.sfCalendar.find("td.current-month").attr("data-date")),this._dateValue=i),e&&this.sfCalendar.find(".e-arrow-sans-left").hasClass("e-disable"))return!1;if(!e&&this.sfCalendar.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;var t=x("table",this.sfCalendar);switch(t.get(0).className){case"e-dp-viewdays":var i=this.model.stepMonths;if(e){if(this._dateValue<=this.model.minDate)return this._flag=!1}else if(this._dateValue>=this.model.maxDate)return this._flag=!1;this._flag=!0,this._addMonths(this._dateValue,e?-i:i),this._clickedDate&&(this._calendarDate=this._clickedDate),this._dateValue=this._dateValue<this.model.minDate?new Date(this.model.minDate.toString()):this._dateValue,this._dateValue=this._dateValue>this.model.maxDate?new Date(this.model.maxDate.toString()):this._dateValue,this._renderCalendar(this,this._dateValue),this._keyboardInteraction&&(this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat)}),this._removeCurrentMonthFromHideDate(),this._keyboardInteraction=!1),x(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),this._addFocus("day",this._hoverDate);i=this._findFirstLastDay(new Date(this._dateValue.toString()));this._preArrowCondition(i.firstDay,this.model.minDate),this._nextArrowCondition(i.lastDay,this.model.maxDate);break;case"e-dp-viewmonths":var s=this._dateValue;if(s.setFullYear(x(".e-datepicker-headertext",this.sfCalendar).text()),e){if(s.getFullYear()<=this.model.minDate.getFullYear())return this._flag=!1}else if(s.getFullYear()>=this.model.maxDate.getFullYear())return this._flag=!1;this._flag=!0,this._addYears(s,e?-1:1),this._renderCalendar(this,s),s=s.getFullYear(),x(".e-datepicker-headertext",this.sfCalendar).text(s),x("tbody,tr.e-week-header",t).not(".e-datepicker-months").hide(),x(x(t).find(".e-datepicker-months")).show(),this._addFocus("month",this._hoverMonth),this._checkArrows(s,s);break;case"e-dp-viewyears":var n=this._dateValue;if(n.setFullYear(x(t).find(".e-state-hover").text()),e){if(parseInt(this.popup.find("td.e-year-first:first").text())<=this.model.minDate.getFullYear())return this._flag=!1}else if(parseInt(x("td.e-year-last:first").prev().text())>=this.model.maxDate.getFullYear())return this._flag=!1;this._flag=!0,x(t).find(".e-state-hover").hasClass("e-year-first")&&e||x(t).find(".e-state-hover").hasClass("e-year-last")&&!e?this._dateValue.setFullYear(n.getFullYear()):x(t).find(".e-state-hover").hasClass("e-year-first")&&!e?this._dateValue.setFullYear(n.getFullYear()+11):x(t).find(".e-state-hover").hasClass("e-year-last")&&e?this._dateValue.setFullYear(n.getFullYear()-11):this._dateValue.setFullYear(n.getFullYear()+(e?-10:10)),this._renderCalendar(this,this._dateValue);n=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1);x(".e-datepicker-headertext",this.sfCalendar).text(n+1+" - "+(n+10)),x("tbody,tr.e-week-header",t).not(".e-datepicker-years").hide(),x(x(t).find(".e-datepicker-years")).show(),this._addFocus("year",this._hoverYear+(x(".e-year-first.e-hidedate").length?-1:0)),this._checkArrows(n+1,n+10);break;case"e-dp-viewallyears":if(e){if(parseFloat(x("td.e-allyear-first",t.get(0)).text().split("-")[1])<=this.model.minDate.getFullYear())return this._flag=!1;this._flag=!0}else{if(parseFloat(x("td.e-allyear-last",t.get(0)).prev().text().split("-")[1])>=this.model.maxDate.getFullYear())return this._flag=!1;this._flag=!0}this._dateValue.setFullYear((this._lastHoveredYear||this._dateValue.getFullYear())+(e?-100:100)),this._lastHoveredYear=this._dateValue.getFullYear(),this._renderCalendar(this,this._dateValue);n=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%100+1),s=parseFloat(x("td.e-allyear-last",t.get(0)).prev().text().split("-")[1]);x(".e-datepicker-headertext",this.sfCalendar).text(n+1+" - "+s),x("tbody,tr.e-week-header",t).not(".e-datepicker-allyears").hide(),x(x(t).find(".e-datepicker-allyears")).show(),this._addFocus("allyear",this._hoverAllYear+(x(".e-allyear-first.e-hidedate").length?-1:0)),this._checkArrows(n+1,s)}this._layoutChanged()},_addFocus:function(e,i){var t="e-current-"+e;"day"==e&&(t="current-month");var s=this.sfCalendar.find("tbody tr td."+t);"month"==e&&x(s).each(function(e,t){parseInt(x(t).attr("data-index"))==parseInt(i)&&(i=e)});t=(t=s[i])||s.last();return this.sfCalendar.find("table td").removeClass("e-state-hover"),x(t).hasClass("e-hidedate")||x(t).addClass("e-state-hover"),this._setActiveState(e),i},_setActiveState:function(e){if(this.model.value instanceof Date){var t=this.sfCalendar.find("tbody tr td.e-current-"+e),i=this,s=-1;switch(e){case"month":this.model.value.getFullYear()===parseInt(x(".e-text",this.sfCalendar).text())&&x(t).each(function(e,t){parseInt(x(t).attr("data-index"))==parseInt(i.model.value.getMonth())&&(s=e)});break;case"year":var n=this.model.value.getFullYear();x(t).each(function(e,t){parseInt(t.innerHTML)==parseInt(n)&&(s=e)});break;case"allyear":var e=parseInt(this.model.value.getFullYear())-(parseInt(this.model.value.getFullYear())%10+1),a=1+e+" - "+(10+e);x(t).each(function(e,t){parseInt(t.innerHTML)==parseInt(a)&&(s=e)})}(t=t[s])&&(this.sfCalendar.find("table td").removeClass("e-active"),x(t).hasClass("e-hidedate")||x(t).addClass("e-active"))}},_setFocusByName:function(e,i){var s,t,n=this.sfCalendar.find("tbody tr td.e-current-"+e);return x(n).each(function(e,t){parseInt(t.innerHTML)==parseInt(i)&&(s=e)}),t=(t=n[s])||n.last(),this.sfCalendar.find("table td").removeClass("e-state-hover"),x(t).addClass("e-state-hover"),this._setActiveState(e),s},_getHeaderTxt:function(){return this.sfCalendar.find(".e-datepicker-headertext").text()},_findFirstLastDay:function(e){var t=e.getFullYear(),e=e.getMonth();return{firstDay:new Date(t,e,1),lastDay:new Date(t,e+1,0)}},_forwardNavHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault();var t,i,s=x("table",this.sfCalendar),n=x("table",this.sfCalendar).get(0).className,e=this._navigateFrom(s);switch(n){case"e-dp-viewdays":this._hoverMonth=this._getDateObj(s.find(".e-state-hover")).getMonth()||this._getDateObj(s.find(".e-active")).getMonth()||0,this._DRPdisableFade&&(this._renderCalendar(this,this._calendarDate),x(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat))),this._startLevel("year"),i="year",this._addFocus("month",this._hoverMonth);break;case"e-dp-viewmonths":t=this._getHeaderTxt(),this._startLevel("decade"),i="decade",this._hoverYear=this._setFocusByName("year",t);break;case"e-dp-viewyears":t=this._getHeaderTxt(),this._startLevel("century"),i="century",this._hoverAllYear=this._setFocusByName("allyear",t)}"century"!=e&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:i,navigateFrom:e}),this._layoutChanged()},_cellSelection:function(){x("table",this.sfCalendar);switch(x("table",this.sfCalendar).get(0).className){case"e-dp-viewmonths":this._hoverMonth=this._addFocus("month",this._dateValue.getMonth());break;case"e-dp-viewyears":var e=new Date(this._dateValue.toString());this._navigationToPrevNext("year"),this._dateValue=e,this._hoverYear=this._setFocusByName("year",this._dateValue.getFullYear());break;case"e-dp-viewallyears":e=new Date(this._dateValue.toString());this._navigationToPrevNext("allyear"),this._dateValue=e;e=parseInt(this._dateValue.getFullYear())-(parseInt(this._dateValue.getFullYear())%10+1);this._hoverAllYear=this._setFocusByName("allyear",1+e+" - "+e+10)}this._layoutChanged()},_navigationToPrevNext:function(e){var i,t=this.sfCalendar.find("tbody tr td.e-current-"+e),s=this._dateValue.getFullYear();x(t).each(function(e,t){parseInt(t.innerHTML)==parseInt(s)&&(i=e)}),(t=t[i])&&(x(t).hasClass("e-"+e+"-last")?this._processNextPrevDate(!1):x(t).hasClass("e-"+e+"-first")&&this._processNextPrevDate(!0))},_navigateFrom:function(e){var t;switch(e.get(0).className){case"e-dp-viewdays":t="month";break;case"e-dp-viewmonths":t="year";break;case"e-dp-viewyears":t="decade";break;case"e-dp-viewallyears":t="century"}return t},_backwardNavHandler:function(e){if(this._animating=!0,this.model.readOnly||!this.model.enabled)return!1;var t,i=e.type?(e.preventDefault(),x(e.currentTarget)):e,s=x("table",this.sfCalendar),n=x("table",this.sfCalendar).get(0).className,a=this,r=this._navigateFrom(s);switch(n){case"e-dp-viewmonths":s.removeClass("e-dp-viewmonths").addClass("e-dp-viewdays"),this._lastHoveredMonth=parseInt(x(i).attr("data-index")),this._dateValue=new Date(this._dateValue.getFullYear(),this._lastHoveredMonth,1),this._DRPdisableFade&&this._trigger("_month_Loaded",{currentTarget:e.currentTarget}),this._renderCalendar(this,this._dateValue),x("tbody",s).not(".e-datepicker-days,.e-week-header").hide(),x(x(s).find(".e-datepicker-days,.e-week-header")).fadeIn("fast",function(){a._addFocus("day",a._hoverDate||0),a._animating=!1}),x(".e-datepicker-headertext",this.sfCalendar).text(this._formatter(this._dateValue,this.model.headerFormat)),t="month";break;case"e-dp-viewyears":s.removeClass("e-dp-viewyears").addClass("e-dp-viewmonths"),this._lastHoveredYear=parseInt(i.text()),this._dateValue.setFullYear(this._lastHoveredYear),this._renderCalendar(this,this._dateValue),x("tbody,tr.e-week-header",s).not(".e-datepicker-months").hide(),y.isNullOrUndefined(this._hoverMonth)&&!y.isNullOrUndefined(this._dateValue)&&(this._hoverMonth=this._dateValue.getMonth()),x(x(s).find(".e-datepicker-months")).fadeIn("fast",function(){a._addFocus("month",a._hoverMonth||0),a._animating=!1}),o=i.text(),x(".e-datepicker-headertext",this.sfCalendar).text(o),this._checkArrows(o,o),t="year";break;case"e-dp-viewallyears":var o=i.text().split("-");s.removeClass("e-dp-viewallyears").addClass("e-dp-viewyears"),o[0]<this.model.minDate.getFullYear()?o[0]=this.model.minDate.getFullYear().toString():o[0]>this.model.maxDate.getFullYear()&&(o[0]=this.model.maxDate.getFullYear().toString()),this._renderCalendar(this,new Date(o[0],0,1)),x("tbody,tr.e-week-header",s).not(".e-datepicker-years").hide(),x(x(s).find(".e-datepicker-years")).fadeIn("fast",function(){a._addFocus("year",a._hoverYear||0),a._animating=!1}),x(".e-datepicker-headertext",this.sfCalendar).text(o[0]+" - "+o[1]),this._checkArrows(o[0],o[1]),t="decade",this._dateValue=new Date(this._dateValue.setFullYear(parseInt(x.trim(o[0]))+(this._lastHoveredYear?this._lastHoveredYear%10:this._dateValue.getFullYear()%10)));break;default:this._clearSelected(),this.sfCalendar.find("table td").removeClass("e-state-hover"),i.not("td.e-hidedate").addClass("e-active").attr("aria-selected",!0),this._addSelected(),this._hoverDate=this._getDateObj(i).getDate()-1,this._dateValue=new Date(i.attr("data-date")),this._clickedDate=new Date(i.attr("data-date")),this._animating=!1}"month"!=r&&this._trigger("navigate",{date:this._dateValue,value:this._formatter(this._dateValue,this.model.dateFormat),navigateTo:t,navigateFrom:r}),this._layoutChanged()},_startLevel:function(e){var t=x("table",this.sfCalendar),i=x(".e-datepicker-headertext",this.sfCalendar),s=this._dateValue;switch(e){case"decade":t.removeClass("e-dp-viewallyears e-dp-viewmonths e-dp-viewdays").addClass("e-dp-viewyears"),x("tbody,tr.e-week-header",t).not(".e-datepicker-years").hide(),x(x(t).find(".e-datepicker-years")).show(),this.model.enableStrictMode&&this._calendarDate<this._dateValue&&(s=this._calendarDate);var n=(r=parseInt(s.getFullYear())-(parseInt(s.getFullYear())%10+1))+1,a=r+10;i.text(n+" - "+a),this._checkArrows(n,a),this._hoverYear=this._setFocusByName("year",s.getFullYear());break;case"century":this._calendarDate<this._dateValue||this._renderCalendar(this,s),t.removeClass("e-dp-viewyears e-dp-viewdays e-dp-viewmonths").addClass("e-dp-viewallyears"),x("tbody,tr.e-week-header",t).not(".e-datepicker-allyears").hide(),x(x(t).find(".e-datepicker-allyears")).show();e=(n=parseFloat(x("td.e-allyear-first",t.get(0)).text().split("-")[1])+1)+" - "+(a=parseFloat(x("td.e-allyear-last",t.get(0)).prev().text().split("-")[1]));i.text(e),this._checkArrows(n,a);var r=parseInt(s.getFullYear())-(parseInt(s.getFullYear())%10+1);this._hoverAllYear=this._setFocusByName("allyear",r+1+" - "+(r+10));break;case"year":t.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewdays").addClass("e-dp-viewmonths"),x("tbody,tr.e-week-header",t).hide(),x(x(t).find(".e-datepicker-months")).show(),n=(this.model.enableStrictMode&&this._calendarDate<this._dateValue?this._calendarDate:s).getFullYear(),i.text(n),this._checkArrows(n,n),this._hoverMonth=s.getMonth(),this._addFocus("month",this._hoverMonth);break;case"month":t.removeClass("e-dp-viewyears e-dp-viewallyears e-dp-viewmonths").addClass("e-dp-viewdays ")}},_depthLevel:function(e){var t=this.sfCalendar;switch(e){case"year":x(t.find(".e-current-year,.e-current-allyear")).on("click",x.proxy(this._backwardNavHandler,this)),this._on(x(".e-current-month",this.sfCalendar),"click",x.proxy(this._onDepthSelectHandler,this));break;case"decade":x(t.find(".e-current-allyear")).on("click",x.proxy(this._backwardNavHandler,this)),x(".e-current-year",this.sfCalendar).on("click",x.proxy(this._onDepthSelectHandler,this));break;case"century":x(t.find(".e-current-allyear")).on("click",x.proxy(this._onDepthSelectHandler,this));break;case"month":this._on(t.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",x.proxy(this._backwardNavHandler,this)),this._on(t.find(".current-month , .other-month"),"click",x.proxy(this._onSetCancelDateHandler,this))}},_onDepthSelectHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;x(e.target).hasClass("e-current-month")?this._dateValue=new Date(this._dateValue.setMonth(parseInt(e.target.attributes["data-index"].value))):(x(e.target).hasClass("e-current-year")||x(e.target).hasClass("e-current-allyear"))&&(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(e.target.innerHTML)))),this._onSetCancelDateHandler(e)},_datepickerMonths:function(e,t,i){function s(e){return document.createElement(e)}for(var n=0,a=0;a<3;a++){for(var r=x(s("tr")),o=0;o<4;o++){var l=x(s("td")).addClass("e-current-month e-state-default").attr({"data-index":n}).attr(this._isIE8?{unselectable:"on"}:{}).html(this.Date.abbrMonthNames[n++]);(i.getFullYear()<this.model.minDate.getFullYear()||i.getFullYear()>this.model.maxDate.getFullYear()||i.getFullYear()<=this.model.minDate.getFullYear()&&n<this.model.minDate.getMonth()+1||i.getFullYear()>=this.model.maxDate.getFullYear()&&n>this.model.maxDate.getMonth()+1)&&(l.addClass("e-hidedate"),l.removeClass("e-current-month")),r.append(l)}e.append(r)}t.append(e);t=i.getFullYear();this._checkArrows(t,t)},_datepickerYears:function(e,t,i){function s(e){return document.createElement(e)}for(var n=parseInt(i)-(parseInt(i)%10+1),a=[],r=0;r<12;r++)a.push(n+r);for(var o=0,l=0;l<3;l++){for(var d=x(s("tr")),r=0;r<4;r++){var h=x(s("td"));h.attr(this._isIE8?{unselectable:"on"}:{}),0==o?h.addClass("e-year-first e-current-year "):11==o?h.addClass("e-year-last e-current-year "):h.addClass("e-current-year e-state-default"),(a[o]<this.model.minDate.getFullYear()||a[o]>this.model.maxDate.getFullYear())&&(h.addClass("e-hidedate"),h.removeClass("e-current-year")),h.html(a[o++]),d.append(h)}e.append(d)}t.append(e),this._checkArrows(a[0],a[a.length])},_datepickerAllYears:function(e,t,i){for(var s=parseInt(i)-(parseInt(i)%100+10),n=[],a=this._isIE8||this._isIE9?"":"\n",r=0;r<12;r++)n.push(parseInt(s)+" -"+a+parseInt(s+9)),s+=10;for(var o=0,l=0;l<3;l++){for(var d=x(document.createElement("tr")),r=0;r<4;r++){var h=x(document.createElement("td"));h.attr(this._isIE8?{unselectable:"on"}:{}),0==o?h.addClass("e-allyear-first e-current-allyear "):11==o?h.addClass("e-allyear-last e-current-allyear "):h.addClass("e-current-allyear e-state-default"),(parseInt(n[o].split("-\n")[1])<this.model.minDate.getFullYear()||parseInt(n[o].split("-\n")[0])>this.model.maxDate.getFullYear())&&(h.addClass("e-hidedate"),h.removeClass("e-current-allyear")),h.html(n[o++]),d.append(h)}e.append(d)}t.append(e)},_renderHeader:function(e){var t=x(document.createElement("thead")),i=y.preferredCulture(this.model.locale).calendars.standard.days;if("none"!=e.model.dayHeaderFormat){var s,n=y.buildTag("tr.e-week-header").attr({role:"row"}).attr(this._isIE8?{unselectable:"on"}:{});1==this.model.weekNumber&&(l=(s=y.preferredCulture(this.model.locale).calendars.standard.week).name,r="short"==e.model.dayHeaderFormat?s.nameAbbr:"long"==e.model.dayHeaderFormat?week:s.nameShort,s=y.buildTag("th","",{},{scope:"col",abbr:l,"data-date":l,title:this._formatter(l,"dddd")}).attr(this._isIE8?{unselectable:"on"}:{}).html(r),n.append(s));for(var a=this.Date.firstDayOfWeek;a<this.Date.firstDayOfWeek+7;a++){var r,o=a%7,l=i.names[o];r="short"==e.model.dayHeaderFormat?i.namesAbbr[o]:"long"==e.model.dayHeaderFormat?l:i.namesShort[o];o=y.buildTag("th","",{},{scope:"col",abbr:l,"data-date":l,title:this._formatter(l,"dddd"),class:0==o||6==o?"e-week-end":"e-week-day"}).attr(this._isIE8?{unselectable:"on"}:{}).html(r);n.append(o)}}return t.append(n)},_renderCalendar:function(e,t){var i;e=x.extend({},y.DatePicker.prototype.defaults,e),this.Date.firstDayOfWeek=this.model.startDay,i=t||this._calendarDate||this._zeroTime(new Date);t=x("table",this.sfCalendar);t.empty(),t.append(this._renderHeader(e));var s=y.buildTag("tbody.e-datepicker-allyears","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});this._datepickerAllYears(s,t,i.getFullYear()),s=y.buildTag("tbody.e-datepicker-years","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{}),this._datepickerYears(s,t,i.getFullYear());var n=e.model.month==w?i.getMonth():e.model.month,e=e.model.year||i.getFullYear(),a=new Date(e,n,1,0,0,0),e=this.Date.firstDayOfWeek-a.getDay()+1;1<e&&(e-=7);var r=Math.ceil((-1*e+1+this._getDaysInMonth(a))/7);this._addDays(a,e-1);var o=this._zeroTime(new Date),l=this._calendarDate,s=y.buildTag("tbody.e-datepicker-months","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});this._datepickerMonths(s,t,i),s=y.buildTag("tbody.e-datepicker-days","",{display:"none"}).attr(this._isIE8?{unselectable:"on"}:{});for(var d=0,h=!0,c=!0;d++<r;){var u,p=jQuery(document.createElement("tr")).attr({role:"row"});1==this.model.weekNumber&&(u=this._weekDate(a),u=x(document.createElement("td")).attr({}).addClass("e-weeknumber").html(u),p.append(u));for(var m=0;m<7;m++){var g=a.getMonth()==n,f=this._isSpecialDates(a),_=this._checkDisableRange(a),v=this._getIndex,b=x(document.createElement("td")).html(f?"<span></span>"+a.getDate():a.getDate()+"").attr({"data-date":a.toDateString(),title:this.model.showTooltip?f&&this.model.specialDates[v][this._mapField._tooltip]?this.model.specialDates[v][this._mapField._tooltip]:this._formatter(a,this.model.tooltipFormat):"","aria-selected":!1,role:"gridcell",id:this._formatter(a,"yyyyddMM")}).attr(this._isIE8?{unselectable:"on"}:{}).addClass((g?"current-month e-state-default ":"other-month e-state-default ")+(this._isWeekend(a)?this._ejHLWeekEnd?"e-dp-weekend e-week-end ":this.model.highlightWeekend?"e-week-end ":"":"e-week-day ")+(g&&a.getTime()==o.getTime()?"today ":""));b.find("span:first-of-type").addClass(f?this.model.specialDates[v][this._mapField._icon]?"e-special-date-icon "+this.model.specialDates[v][this._mapField._icon]+" ":"e-special-day":""),b.addClass(f&&this.model.specialDates[v][this._mapField._custom]||""),_&&this._disableDates({date:a,element:b}),l.getTime()==a.getTime()&&g&&(b.hasClass("e-hidedate")||(this.model.value?(b.addClass("e-active").attr({"aria-selected":!0}),"week"==this.model.highlightSection&&p.addClass("e-selected-week"),"month"==this.model.highlightSection&&s.addClass("e-selected-month"),"workdays"==this.model.highlightSection&&p.addClass("e-work-week")):null!=this.model.value&&b.addClass("e-state-hover").attr({"aria-selected":!1})),this._hoverDate||(b.hasClass("e-hidedate")||b.addClass("e-state-hover"),this._hoverDate=a.getDate()-1));_=!0;(a<this.model.minDate||a>this.model.maxDate)&&(b.addClass("e-hidedate"),b.removeClass("current-month"),this.model.showOtherMonths&&b.removeClass("other-month"),_=c=!1),g&&(_&&h&&(this._tempMinDate=a,c=!(h=!1)),c&&(this._tempMaxDate=a)),this._trigger("beforeDateCreate",{date:a,value:this._formatter(a,this.model.dateFormat),element:b}),p.append(b),a=new Date(a.getFullYear(),a.getMonth(),a.getDate()+1,0,0,0)}s.append(p)}t.append(s),this._DRPdisableFade?(x(s).css("display","block"),x(s).css({display:"table-row-group","vertical-align":"middle","border-color":"inherit"})):this._isIE8||this._isIE7?x(s).css("display","table-row-group"):x(s).fadeIn("fast"),this.model.startLevel===this.model.depthLevel||"month"!=this.model.depthLevel&&""!=this.model.depthLevel&&("century"==this.model.startLevel||"decade"==this.model.startLevel&&"century"!=this.model.depthLevel||"year"==this.model.startLevel&&"decade"!=this.model.depthLevel&&"century"!=this.model.depthLevel)?this._depthLevel(this.model.depthLevel):(this._on(t.find(".current-month,.other-month,.e-current-month,.e-current-year,.e-current-allyear"),"click",x.proxy(this._backwardNavHandler,this)),this._on(t.find(".current-month , .other-month"),"click",x.proxy(this._onSetCancelDateHandler,this))),this._otherMonthsVisibility(),this._checkDateArrows()},_checkDisableRange:function(e){return!y.isNullOrUndefined(this._disableCollection[e.getFullYear()])&&-1!==jQuery.inArray(e.getMonth(),this._disableCollection[e.getFullYear()])},_initDisableObj:function(e){this._disableCollection={};for(var t=0;t<this.model.blackoutDates.length;t++){var i,s=this._checkInstanceType(this.model.blackoutDates[t]);s&&(i=s.getFullYear(),s=s.getMonth(),y.isNullOrUndefined(this._disableCollection[i])&&(this._disableCollection[i]=[]),-1==jQuery.inArray(s,this._disableCollection[i])&&this._disableCollection[i].push(s))}},_disableDates:function(e){for(var t=0;t<this.model.blackoutDates.length;t++){var i=this._checkInstanceType(this.model.blackoutDates[t]);i&&+e.date==+i&&e.element.addClass("e-hidedate")}},_keyboardNavigation:function(e){if(this._keyboardInteraction=!0,this._animating)return!1;if(!this._isOpen||37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode)if(this.model.displayInline||27!=e.keyCode&&9!=e.keyCode){if(e.altKey&&40==e.keyCode)return this.show(),!1}else this.hide();else{if(e.preventDefault&&e.preventDefault(),e.altKey)return 13==e.keyCode?(this._setCurrDate(e),!1):void 0;var t={row:null,col:null};t.col=this.sfCalendar.find("tbody tr td.e-state-hover").index(),t.row=this.sfCalendar.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this.sfCalendar.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this.sfCalendar.find("tbody tr td.e-active").parent().index()+1;var i,s=3,n=4;switch(this.sfCalendar.find("table")[0].className){case"e-dp-viewallyears":i=this._changeRowCol(t,e.keyCode,s,n,"yearall",e.ctrlKey),e.ctrlKey||(this._hoverAllYear=this.sfCalendar.find("tbody.e-datepicker-allyears tr td").index(i));break;case"e-dp-viewyears":i=this._changeRowCol(t,e.keyCode,s,n,"year",e.ctrlKey),e.ctrlKey||(this._hoverYear=this.sfCalendar.find("tbody.e-datepicker-years tr td").index(i));break;case"e-dp-viewmonths":i=this._changeRowCol(t,e.keyCode,s,n,"month",e.ctrlKey),e.ctrlKey||(this._hoverMonth=this.sfCalendar.find("tbody.e-datepicker-months tr td").index(i));break;case"e-dp-viewdays":s=this.sfCalendar.find("tbody.e-datepicker-days tr").length,n=7,i=this._changeRowCol(t,e.keyCode,s,n,"day",e.ctrlKey),e.ctrlKey||(this._hoverDate=this._getDateObj(i).getDate()-1)}e.ctrlKey||(this.sfCalendar.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover"),this._setAriaAttributes(i))}},_setAriaAttributes:function(e){this._popupOpen&&(this.sfCalendar.find("[aria-selected=true]").attr("aria-selected",!1),this.sfCalendar.find("[aria-label]").removeAttr("aria-label"),x(this.element).attr("aria-activedescendant",e.attr("id")),x(e).attr("aria-selected",!0),x(e).attr("aria-label","The current focused date is "+this._formatter(this._getDateObj(e),"dddd, dd MMMM, yyyy")))},_changeRowCol:function(e,t,i,s,n,a){var r={parent:null,child:null};switch(n){case"day":o="tbody.e-datepicker-days tr td.current-month",r.parent=".e-datepicker-days",r.child=".current-month";break;case"month":o="tbody.e-datepicker-months tr td.e-current-month",r.parent=".e-datepicker-months",r.child=".e-current-month";break;case"year":o="tbody.e-datepicker-years tr td.e-current-year",r.parent=".e-datepicker-years",r.child=".e-current-year";break;case"yearall":o="tbody.e-datepicker-allyears tr td.e-current-allyear",r.parent=".e-datepicker-allyears",r.child=".e-current-allyear"}if(e.row<=0&&e.col<=0)return this._removeCurrentMonthFromHideDate(),this.sfCalendar.find(o+":first");switch(t){case 36:return this.sfCalendar.find(o+":first");case 35:return this.sfCalendar.find(o+":last");case 38:if(a&&this.model.allowDrillDown)this._forwardNavHandler();else{if(!(1<e.row))return this._processNextPrevDate(!0),l=this.sfCalendar.find(o+":nth-child("+e.col+"):last");--e.row}if((l=this._getCell(e,r)).length<=1){if(null!==(l=this._findVisible(e,r,"up")))return l;this._processNextPrevDate(!0),l=this.sfCalendar.find(o+":nth-child("+e.col+"):last")}return l;case 37:if(a)return this._processNextPrevDate(!0),this.sfCalendar.find("tbody tr td.e-state-hover");if(1<e.col)--e.col;else{if(!(1<e.row))return this._processNextPrevDate(!0),l=this.sfCalendar.find(o+":last");e={row:e.row-1,col:s}}if((l=this._getCell(e,r)).length<=1){if(null!==(l=this._findVisible(e,r,"left")))return l;this._processNextPrevDate(!0),l=this.sfCalendar.find(o+":last")}return l;case 39:if(a)return this._processNextPrevDate(!1),this.sfCalendar.find("tbody tr td.e-state-hover");if(e.col<s)e.col+=1;else{if(!(e.row<i))return this._processNextPrevDate(!1),l=this.sfCalendar.find(o+":first");e={row:e.row+1,col:1}}if((l=this._getCell(e,r)).length<=1){if(null!==(l=this._findVisible(e,r,"right")))return l;this._processNextPrevDate(!1),l=this.sfCalendar.find(o+":first")}return l;case 40:if(!a){if(!(e.row<i))return this._processNextPrevDate(!1),l=this.sfCalendar.find(o+":nth-child("+e.col+"):first");if(e.row+=1,(l=this._getCell(e,r)).length<=1){if(null!==(l=this._findVisible(e,r,"down")))return l;this._processNextPrevDate(!1),l=this.sfCalendar.find(o+":nth-child("+e.col+"):first")}return l}case 13:var i=x("table",this.sfCalendar).get(0).className,o=this._getCell(e,r),l=x(o)[0];"e-dp-viewmonths"==i&&"year"==this.model.startLevel&&"year"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setMonth(parseInt(l.attributes["data-index"].value))),this._onSetCancelDateHandler({type:null,target:o})):"e-dp-viewyears"==i&&"decade"==this.model.startLevel&&"decade"==this.model.depthLevel||"e-dp-viewallyears"==i&&"century"==this.model.startLevel&&"century"==this.model.depthLevel?(this._dateValue=new Date(this._dateValue.setFullYear(parseInt(l.innerHTML))),this._onSetCancelDateHandler({type:null,target:o})):"e-dp-viewdays"==i?(this._backwardNavHandler(o),this._onSetCancelDateHandler({type:null,target:o})):this._backwardNavHandler(o)}return this._getCell(e,r)},_findVisible:function(e,t,i){for(var s=e.col,n=e.row,a=t.child.slice(1,t.child.length),r=0;0<=r;r++){var o=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td:nth-child("+s+")");if(o.length<=0)return null;if(o.hasClass("e-hidedate")||!o.is(":visible")){if("right"==i||"left"==i?"right"==i?s++:s--:"down"==i?n++:n--,n<=0||n>this.sfCalendar.find("tbody"+t.parent+" tr").length)return null;if(s>this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length&&(n++,s=1),s<=0&&(n--,s=this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+n+") td").length),n<=0||n>this.sfCalendar.find("tbody"+t.parent+" tr").length)return null}else{if(o.hasClass("other-month"))return null;if(o.hasClass(a))return e.col=s,e.row=n,o}}},_getCell:function(e,t){return this.sfCalendar.find("tbody"+t.parent+" tr:nth-child("+e.row+") td"+t.child+":nth-child("+e.col+")")},_getDateObj:function(e){return new Date(e.attr("data-date"))},_touchCalendar:function(e){var t=this.sfCalendar.find("table")[0].className;switch(e.type){case"pinchin":"e-dp-viewdays"!=t&&this._keyboardNavigation({keyCode:13});break;case"pinchout":"e-dp-viewallyears"!=t&&this.model.allowDrillDown&&this._forwardNavHandler();break;case"swipeleft":this._processNextPrevDate(!1);break;case"swiperight":this._processNextPrevDate(!0)}},show:function(e){if(y.isNullOrUndefined(this.sfCalendar)&&this._renderPopup(),this._isOpen)return!1;var t=this;this._popupOpen=!0,x(this.element).attr("aria-expanded",!0);var i=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;if(this.model.enabled){if(this.model.displayInline||this._setDatePickerPosition(),this._trigger("beforeOpen",{element:this.sfCalendar,events:e}))return!1;this.sfCalendar.attr({"aria-hidden":"false"}),t._isOpen=!0,this.sfCalendar.slideDown(this.model.enableAnimation?this.animation.open.duration:0,function(){t.model&&!t.model.displayInline&&x(document).on("mousedown",x.proxy(t._onDocumentClick,t))}),(!this._isIE8||this.element.val()&&this._compareDate(new Date(this.element.val()),i))&&this._updateInputVal(),this._refreshLevel(i),this._trigger("open",{prevDate:i,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),x(window).on("resize",x.proxy(this._OnWindowResize,this)),this.model.displayInline||(this._on(y.getScrollableParents(this.wrapper),"scroll",this.hide),this._on(y.getScrollableParents(this.wrapper),"touchmove",this.hide)),this._isInputBox&&this.wrapper.addClass("e-active"),null!=this.model.value?x(this.element).attr("aria-activedescendant",x(this.sfCalendar.find(".e-active")).attr("id")):x(this.element).attr("aria-activedescendant",x(this.sfCalendar.find(".today")).attr("id"))}},hide:function(e){if(!this._isOpen||this._getInternalEvents)return!1;if(this._trigger("beforeClose",{element:this.sfCalendar,events:e}))return!1;var t=this;this._popupOpen=!1,x(this.element).attr("aria-expanded",!1),this.sfCalendar.attr({"aria-hidden":"true"}),this._popClose&&e!=w&&"click"!=e.type||(this.sfCalendar.slideUp(this.model.enableAnimation?this.animation.close.duration:0,function(){t._isOpen=!1,x(document).off("mousedown",x.proxy(t._onDocumentClick,t)),t._setWaterMark()}),""!=this.element.val()&&this._validateInputVal(),this._trigger("close",{prevDate:this._prevDate,date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}),x(window).off("resize",x.proxy(this._OnWindowResize,this)),this._off(y.getScrollableParents(this.wrapper),"scroll",this.hide),this._off(y.getScrollableParents(this.wrapper),"touchmove",this.hide),this._isInputBox&&this.wrapper.removeClass("e-active"),this.model.value?x(this.element).attr("aria-activedescendant",x(this.sfCalendar.find(".e-active")).attr("id")):x(this.element).removeAttr("aria-activedescendant"))},enable:function(){this.model.enabled=!0,this.wrapper&&this.wrapper.removeClass("e-disable"),this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.dateIcon&&this.dateIcon.removeClass("e-disable").attr({"aria-disabled":!1}),this._isIE8&&this.dateIcon&&this.dateIcon.children().removeClass("e-disable"),this.element.prop("disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.sfCalendar&&this.sfCalendar.removeClass("e-disable").attr({"aria-disabled":!1})},disable:function(){this.model.enabled=!1,this.wrapper&&this.wrapper.addClass("e-disable"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.attr("disabled","disabled"),this.dateIcon&&this.dateIcon.addClass("e-disable").attr({"aria-disabled":!0}),this._isIE8&&this.dateIcon&&this.dateIcon.children().addClass("e-disable"),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.sfCalendar&&this.sfCalendar.addClass("e-disable").attr({"aria-disabled":!0}),this._isOpen&&(this.element.is(":input")&&this.element.blur(),this.model.displayInline||this.hide())},getValue:function(){return this._formatter(this.model.value,this.model.dateFormat)},_wireCalendarEvents:function(){this._allowQuickPick(this.model.allowDrillDown),this._on(x(".e-next",this.sfCalendar),"click",x.proxy(this._previousNextHandler,this)),this._on(x(".e-prev",this.sfCalendar),"click",x.proxy(this._previousNextHandler,this)),this.model.displayInline||(this.sfCalendar.on("mouseenter touchstart",x.proxy(function(){this._popClose=!0},this)),this.sfCalendar.on("mouseleave touchend",x.proxy(function(){this._popClose=!1},this))),this.model.showFooter&&this._on(x(".e-footer",this.sfCalendar),"click",this._setCurrDate),this.sfCalendar&&this._on(this.sfCalendar,"pinchin pinchout swipeleft swiperight",x.proxy(this._touchCalendar,this))},_wireEvents:function(){this.element.is(":input")&&this.model.allowEdit&&(this._on(this.element,"blur",this._onFocusOut),this._on(this.element,"focus",this._onFocusIn),this._on(this.element,"keydown",this._onKeyDown)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",x.proxy(this._showDatePopUp,this)))},_bindDateButton:function(){this._on(this.dateIcon,"mousedown",this._showDatePopUp),this.model.allowEdit&&this.element.off("mousedown",x.proxy(this._showDatePopUp,this))},_bindInputEvent:function(){this._off(this.dateIcon,"mousedown",this._showDatePopUp)},_specificFormat:function(){var e=y.globalize._getDateParseRegExp(y.globalize.findCulture(this.model.locale).calendar,this.model.dateFormat);return-1<x.inArray("dddd",e.groups)||-1<x.inArray("ddd",e.groups)},_onFocusOut:function(e){this._isFocused=!1;var t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue;if(this.model.enableStrictMode&&this.element.val()&&!isNaN(+new Date(this.element.val()))){this._formatArray=this.model.dateFormat.split(this._getSeparator()),this._valArray=this.element.val().split(this._getSeparator());for(var i=0;i<this._formatArray.length;i++)this._formatArray[i].startsWith("y")&&1<this._valArray.length&&(4==this._formatArray[i].length&&2==this._valArray[i].length||2==this._formatArray[i].length&&2==this._valArray[i].length)&&(this._valArray[i]=(parseInt(this._valArray[i])+2e3).toString(),this.element.val(this._valArray.join(this._getSeparator())))}this._validateOnFocusOut(this._validateValue(),e),this.wrapper.removeClass("e-focus"),y.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid"),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),this._isOpen&&!this.model.displayInline||this._refreshLevel(t),""==this.element.val()||this._isOpen&&!this.model.displayInline||this._validateInputVal(),this.element.off("keydown",x.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick);e=this.element.val(),t={prevDate:this._prevDate,value:e};this._specificFormat()?this._prevDate!=e&&this._setDateValue(e,!0):this._setDateValue(e),this.model.value||this._clearSelected(),this._trigger("focusOut",t),this._checkErrorClass()},_onFocusIn:function(e){this._isSupport&&(e.preventDefault(),this._isFocused=!0),this.wrapper.removeClass("e-error"),this.isValidState=!0,this.wrapper.addClass("e-focus"),this.wrapper.addClass("e-valid"),this.model.readOnly||(this._isSupport||this._hiddenInput.css("display","none"),this.element.on("keydown",x.proxy(this._keyboardNavigation,this)),this.model.showPopupButton||this.model.readOnly||this.show(e),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),this._trigger("focusIn",{date:this.model.value,value:this._formatter(this.model.value,this.model.dateFormat)}))},_elementClick:function(e){this._popupOpen||this.show(e)},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_refreshPopup:function(){this._refreshDatepicker(),this._startLevel(this.model.startLevel)},_weekDate:function(e){var t=new Date(e.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),e=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1},_refreshLevel:function(e){var t;this.model.startLevel==this.model.depthLevel&&"month"!=this.model.startLevel&&(t=this._stringToObject(this.element.val()),(t=this._validateYearValue(t))&&(this._compareDate(e,t)||this._refreshPopup()))},_validateOnFocusOut:function(e,t){var i=null!=this._preValue?this._calendarDate:this._preValue,s=this._formatter(i,this.model.dateFormat);this._prevDate=this._formatter(this._preValue,this.model.dateFormat);var n={prevDate:this._prevDate,value:s,isInteraction:!!t};this._specificFormat()&&e>this.model.minDate&&e<this.model.maxDate?null==e?this.model.value=i:(this.model.value=e,this._formatter(e,this.model.dateFormat,this.model.locale)):this._formatter(this._parseDate(this._formatter(new Date,"MM/dd/yyyy")),this.model.dateFormat);var a=!1,i=!1;null==e||this.model.enableStrictMode?null!=e||this.model.enableStrictMode?e?(e<this.model.minDate||e>this.model.maxDate?(i=!(this.isValidState=!1),this._calendarDate=e<this.model.minDate?this.model.minDate:this.model.maxDate):this.isValidState=!0,this._triggerChangeEvent(t),i&&this._getInternalEvents&&this._trigger("outOfRange")):(this.isValidState=!1,this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)):(null==this._preTxtValue||""==this.element.val()?(this.element.val(""),this._isSupport||this._hiddenInput.css("display","block")):this.element.val(s),this._triggerChangeEvent(t),null!=this.model.value&&this._trigger("change",n)):(y.isNullOrUndefined(this.model.value)&&(this.model.value=this._parseDate(this.element.val())),this.model.maxDate<this.model.minDate&&(this.model.minDate=this.model.maxDate),this.model.enableStrictMode||(e?(e<this.model.minDate||e>this.model.maxDate)&&(a=!0,this._calendarDate=e=e<this.model.minDate?this.model.minDate:this.model.maxDate):(this.element.val(""),this._calendarDate<this.model.minDate?this._calendarDate=this.model.minDate:this._calendarDate>this.model.maxDate&&(this._calendarDate=this.model.maxDate)),this.isValidState=!0),a&&this.element.val(this._formatter(e,this.model.dateFormat)),this._compareDate(this._preValue,this._parseDate(this.element.val(),!0))||this._triggerChangeEvent(t))},_onKeyDown:function(e){var t;13===e.keyCode&&(t=null!=this._preValue?new Date(this._preValue.toString()):this._preValue,this._validateOnFocusOut(this._validateValue(),e),this._isOpen&&!this.model.displayInline||this._setWaterMark()||this._compareDate(this._preValue,this._parseDate(this.element.val(),this.model.dateFormat))||this._updateInputVal(),this._isOpen&&!this.model.displayInline||this._refreshLevel(t),""==this.element.val()||this._isOpen&&!this.model.displayInline||this._validateInputVal(),this._checkErrorClass())},_showhidePopup:function(e){if(!this.model.enabled)return!1;this._isOpen?(this._isFocused||!this.element.is(":input")||y.isTouchDevice()||this.element.focus(),this._cancelValue||this.hide(e)):(this._isFocused||!this.element.is(":input")||y.isTouchDevice()||this.element.focus(),this.show(e))},_compareDate:function(e,t){return+e==+t},_validateDate:function(e){var t=!0;if(null!=e){for(var i=0;i<this.model.blackoutDates.length;i++){var s=this._checkInstanceType(this.model.blackoutDates[i]);s&&+e==+s&&(t=!1)}(e<this.model.minDate||e>this.model.maxDate)&&this.model.enableStrictMode&&(t=!1,this.isValidState=!1)}return t},_triggerChangeEvent:function(e){var t=""==this.element.val()?null:this.element.val();this._prevDate=this._formatter(this._preValue,this.model.dateFormat);var i={prevDate:this._prevDate,value:t,isInteraction:!!e},e=this._specificFormat()&&e!=w&&"keydown"==e.type&&this._formatter(this._preValue,this.model.dateFormat,this.model.locale)!=this.element.val()?this._parseDate(this.element.val(),!0):this._specificFormat()&&e!=w&&"blur"==e.type?this.model.value:this._parseDate(t);e=this._validateYearValue(e),this._validateDate(e)||(e=null),this._compareDate(this._preValue,e)?""==this.element.val()&&null==this._prevDate||this.element.val()==this._prevDate||(i.value=this.element.val(),this._trigger("_change",i)):(this._preValue=this.model.value=e,i.value=this._formatter(this.model.value,this.model.dateFormat),this.model.value&&(this._clickedDate=this._calendarDate=this.model.value),this.model.displayInline&&!this._isInputBox&&this._hiddenInput.attr("value",t),this.model.value||this.model.enableStrictMode||this._setDateValue(this.model.value),i.value=t,this._trigger("_change",i),i.value=this._formatter(this.model.value,this.model.dateFormat),this._trigger("change",i),this._checkErrorClass())},_triggerSelectEvent:function(e){var t,i=this.element.val();this._parseDate(i)&&(t={prevDate:this._prevDate,date:this.model.value,value:i,isSpecialDay:this._isSpecialDates(this.model.value)},this._prevDate!=i&&this._parseDate(t.value)&&this.model.value>=this.model.minDate&&this.model.value<=this.model.maxDate&&(this._cancelValue=this._trigger("select",t)),this._dt_drilldown&&this._trigger("dt_drilldown",t)),this.model.value&&x(this.element).attr("aria-activedescendant",x(this.sfCalendar.find(".e-active")).attr("id"))},_onDocumentClick:function(e){this.model&&(x(e.target).is(this.popup)||x(e.target).parents(".e-popup").is(this.popup)||x(e.target).is(this.wrapper)||x(e.target).parents(".e-datewidget").is(this.wrapper)?(x(e.target).is(this.popup)||x(e.target).parents(".e-popup").is(this.popup))&&e.preventDefault():this.hide(e))},_OnWindowResize:function(e){this.sfCalendar&&this._setDatePickerPosition()},_showDatePopUp:function(e){var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t&&(this._isSupport||this.model.showPopupButton||(e.preventDefault(),this._onFocusIn()),!this.model.readOnly)){if(e.preventDefault(),!this.model.enabled&&this.model.displayInline)return!1;this._showhidePopup(e)}},_layoutChanged:function(e){this._getInternalEvents&&this._trigger("layoutChange")},_setCurrDate:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e&&e.preventDefault();this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._dateValue=this._zeroTime(new Date),this.model.value=this._calendarDate=new Date(this._dateValue.toString()),this._setDateValue(this.model.value),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._refreshDatepicker(),this._changeDayClass(),this._startLevel(this.model.startLevel),this._onSetCancelDateHandler(e),this._layoutChanged()},_changeDayClass:function(){var e=this.popup.children("table")[0].className;"e-dp-viewdays"!=e&&this.popup.children("table").removeClass(e).addClass("e-dp-viewdays")},_onSetCancelDateHandler:function(e){return!(this.model.readOnly||!this.model.enabled)&&((!e||!x(e.target).hasClass("e-disable")&&!x(e.target).hasClass("e-hidedate"))&&(e&&e.type&&e.preventDefault(),this._specificFormat()?this._prevDate=this.element.val():this.model.value=this._parseDate(this.element.val()),this._prevDate=this._formatter(this.model.value,this.model.dateFormat),this._setDateValue(this._dateValue),this._triggerSelectEvent(e),this._triggerChangeEvent(e),this._dateValue=null==this.model.value?null:new Date(this.model.value.toString()),this.element.is(":input")&&!this.model.displayInline&&this._showhidePopup(e),e&&x(e.currentTarget).hasClass("other-month")&&this._refreshDatepicker(),void this._cellSelection()))},_closeCalendar:function(e){e&&e!=this.element||this.sfCalendar.empty().remove()},_checkErrorClass:function(){this.wrapper&&(this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error"))},_getLocalizedLabels:function(){return y.getLocalizedConstants(this.sfType,this.model.locale)}}),y.DatePicker.Locale=y.DatePicker.Locale||{},y.DatePicker.Locale.default=y.DatePicker.Locale["en-US"]={watermarkText:"Select date",buttonText:"Today"},y.DatePicker.Header={None:"none",Short:"short",Min:"min",Long:"long"},y.DatePicker.HighlightSection={Month:"month",Week:"week",WorkDays:"workdays",None:"none"},y.DatePicker.Level={Month:"month",Year:"year",Decade:"decade",Century:"century"}}(jQuery,Syncfusion),function(a,r){r.widget("ejCheckBox","ej.CheckBox",{_rootCSS:"e-checkbox",element:null,model:null,validTags:["input"],_addToPersist:["checked","checkState"],_setFirst:!1,angular:{require:["?ngModel","^?form","^?ngModelOptions"]},defaults:{id:null,name:null,value:null,htmlAttributes:{},checked:!1,enabled:!0,enableTriState:!1,showRoundedCorner:!1,enablePersistence:!1,cssClass:"",text:"",enableRTL:!1,idPrefix:"ej",size:"small",checkState:"uncheck",validationRules:null,validationMessage:null,validationMessages:null,beforeChange:null,change:null,create:null,destroy:null},dataTypes:{id:"string",name:"string",enablePersistence:"boolean",enableTriState:"boolean",size:"enum",enabled:"boolean",idPrefix:"string",validationRules:"data",validationMessage:"data",validationMessages:"data",htmlAttributes:"data"},observables:["checked","checkState"],checked:r.util.valueFunction("checked"),checkState:r.util.valueFunction("checkState"),_init:function(e){this._cloneElement=this.element.clone();var t=r.browserInfo();this._isIE8="msie"==t.name&&"8.0"==t.version,this._isIE9="msie"==t.name&&"9.0"==t.version,this._isDevice=this._checkDevice(),this._setValue(),this._renderControl(),this.model.enableRTL&&this._setRTL(),this.model.enabled&&this._wireEvents(),this._setEnabled(this.model.enabled),r.isNullOrUndefined(e)||r.isNullOrUndefined(e.validationMessage)||(this.model.validationMessages=this.model.validationMessage),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._addAttr(this.model.htmlAttributes),(this._isIE9||this._isIE8)&&this.wrapper.addClass("e-tb-cell")},_checkDevice:function(){return r.isDevice()&&r.isTouchDevice()},_setRTL:function(){a(this.maindiv).addClass("e-rtl")},_initValidator:function(){this.wrapper.closest("form").data("validator")||this.wrapper.closest("form").validate()},_setValidation:function(){this.wrapper.find("input").rules("add",this.model.validationRules);var e,t=(t=this.wrapper.closest("form").data("validator"))||this.wrapper.closest("form").validate(),i=this.wrapper.find("input").attr("name");for(e in t.settings.messages[i]={},this.model.validationRules){var s=null;if(!r.isNullOrUndefined(this.model.validationRules[e])){if(r.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[e]))for(var n in t.settings.messages[i][e]=a.validator.messages[e],this.model.validationMessages)e==n&&(s=this.model.validationMessages[e]);else s=this.model.validationRules.messages[e];t.settings.messages[i][e]=null!=s?s:a.validator.messages[e]}}},_addAttr:function(e){var i=this;a.map(e,function(e,t){"class"==t?i.wrapper.addClass(e):"name"==t||"required"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._setEnabled(!1):"checked"==t&&"checked"==e?i.checked()instanceof Array?i._updateCheckedItem():i._checked(!0):i.wrapper.attr(t,e)})},_triggerBeforeChange:function(){var e={isChecked:this._isChecked,isInteraction:!1};if(1==this._trigger("beforeChange",e))return!1},_triggerChange:function(){var e={isChecked:this._isChecked,checkState:this.checkState(),isInteraction:!1};this._trigger("change",e)},_setModel:function(e){for(var t in e)switch(t){case"checked":var i;a(this.maindiv).removeClass("e-material-animate"),this.model.beforeChange&&this._triggerBeforeChange(),this.checked()instanceof Array?(i=(i=r.util.getVal(e[t]))[i.length-1],this.model.value==i&&(this._isChecked=!0)):(this._isChecked=r.util.getVal(e[t]),this.checked(this._isChecked)),this._isChecked?this._checked():this._unChecked(),this.model.change&&this._triggerChange();break;case"enableTriState":e[t]&&(this.model.enableTriState=e[t],this._indeterminateState=e[t]);break;case"checkState":this.model.enableTriState&&(this.model.beforeChange&&this._triggerBeforeChange(),this._isChecked=r.util.getVal(e[t]),this.checkState(this._isChecked),this._changeState(this._isChecked),this._setCheckBoxState(),this.checked(this._isChecked),"indeterminate"==this.model.checkState&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array?this._updateCheckedItem():"check"==e[t]?this._hiddenInput.removeAttribute("name"):this._hiddenInput.setAttribute("name",this.model.name),this.model.change&&(this.checked()instanceof Array||(this._isChecked="uncheck"!=this.checkState()),this._triggerChange()));break;case"cssClass":this._changeSkin(e[t]);break;case"enableRTL":e[t]?this._setRTL():a(this.maindiv).removeClass("e-rtl");break;case"text":this._setText(e[t]);break;case"validationRules":null!=this.model.validationRules&&(this.wrapper.find("input").rules("remove"),this.model.validationMessages=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":case"validationMessages":this.model.validationMessages=e[t],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initValidator(),this._setValidation());break;case"id":this._setIdAttr(e[t]);break;case"name":this.element.attr("name",e[t]),this._isChecked&&!this.spanImg.hasClass("e-chk-indeter")||this._hiddenInput.setAttribute("name",e[t]),this.model.name=e[t];break;case"value":this.element.attr("value",e[t]);break;case"size":this._setSize(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"enabled":this._setEnabled(e[t]);break;case"htmlAttributes":this._addAttr(e[t])}},_destroy:function(){this.element.removeClass("e-checkbox e-input"),!this._cloneElement.attr("name")&&this.element.attr("name")&&this.element.removeAttr("name"),!this._cloneElement.attr("value")&&this.element.attr("value")&&this.element.removeAttr("value"),this.element.insertBefore(this.wrapper),this.wrapper.remove()},_changeSkin:function(e){this.model.cssClass!=e&&(this.wrapper.removeClass(this.model.cssClass).addClass(e),a("#"+this.model.idPrefix+this.model.id+"_wrapper").removeClass(this.model.cssClass).addClass(e))},_setValue:function(){this._indeterminateState=!1,this._isChecked=!1;var e=this.element[0].getAttribute("id"),t=this.element[0].getAttribute("name"),i=this.element[0].getAttribute("value");r.isNullOrUndefined(e)||(this.model.id=e),r.isNullOrUndefined(t)||(this.model.name=t),r.isNullOrUndefined(i)||""==i||(this.model.value=i),this.checked()||r.isNullOrUndefined(this.element.attr("checked"))||(this._isChecked=!0),r.isNullOrUndefined(this.model.name)&&(this.model.name=this.model.id),this.model.enabled=this.model.enabled&&!this.element.attr("disabled")},_setSize:function(e){e==r.CheckboxSize.Medium?(a(this.innerdiv).removeClass("e-chkbox-small").addClass("e-chkbox-medium"),a(this.maindiv).removeClass("e-check-small").addClass("e-check-medium")):(a(this.innerdiv).removeClass("e-chkbox-medium").addClass("e-chkbox-small"),a(this.maindiv).removeClass("e-check-medium").addClass("e-check-small"))},_setRoundedCorner:function(e){e?this.span.addClass("e-corner"):this.span.removeClass("e-corner")},_setEnabled:function(e){e?this.enable():this.disable()},_setCheckBoxState:function(){this.model.enableTriState?"indeterminate"==this.checkState()?this._indeterminateState=!0:"check"==this.checkState()?this._isChecked=!0:"uncheck"==this.checkState()&&(this._isChecked=!1):"indeterminate"==this.checkState()&&this.checkState("uncheck")},_createElement:function(e,t){e=document.createElement(e);return this._setAttributes(e,t),e},_setAttributes:function(e,t){for(var i in t)e.setAttribute(i,t[i])},_renderControl:function(){this._setCheckBoxState(),this.maindiv=this._createElement("span",{class:"e-chkbox-wrap e-widget "+this.model.cssClass,role:"checkbox",tabindex:0}),this._isValid(this.model.id)&&(this.maindiv.setAttribute("id",this.model.idPrefix+this.model.id),this.element[0].setAttribute("id",this.model.id)),this.innerdiv=document.createElement("div"),this._setSize(this.model.size),this.span=document.createElement("span"),this.span=a(this.span),this.spanImg=this._createElement("span",{class:"e-chk-image e-icon",role:"presentation"}),this.spanImg=a(this.spanImg),this.element.addClass("e-input"),this.model.name=r.isNullOrUndefined(this.model.name)?this.model.id:this.model.name,this.model.value=!!r.isNullOrUndefined(this.model.value)||this.model.value,this._setAttributes(this.element[0],{name:this.model.name,value:this.model.value});var e=a("#"+this._id+"_hidden");this._hiddenInput=e.length?e[0]:this._createElement("input",{type:"checkbox",value:!1,style:"display:none"}),"hidden"==this.element.attr("data-type")&&this._hiddenInput.setAttribute("type","hidden"),this._isValid(this.model.name)&&this._hiddenInput.setAttribute("id",this.model.name+"_hidden"),this._setRoundedCorner(this.model.showRoundedCorner),this.checked()&&this._setCheckedItem(this.checked()),this._isChecked?(this.spanImg.addClass("e-checkmark"),this.span.addClass("e-chk-act"),this.maindiv.setAttribute("aria-checked",!0),this.element.attr("checked","checked")):(this.span.addClass("e-chk-inact"),this.maindiv.setAttribute("aria-checked",!1),this._hiddenInput.setAttribute("name",this.model.name)),this.checked()instanceof Array||this.checked(this._isChecked),this.span[0].appendChild(this.spanImg[0]),this.innerdiv.appendChild(this.span[0]),this.element[0].parentNode&&this.element[0].parentNode.insertBefore(this.maindiv,this.element[0]),this.maindiv.appendChild(this.element[0]),this.maindiv.appendChild(this._hiddenInput),this.maindiv.appendChild(this.innerdiv),this.wrapper=a(this.maindiv),this._setTextWrapper(this.model.text),this.chkbx=this.element,1==this.model.enableTriState&&1==this._indeterminateState&&this._setIndeterminate(this._indeterminateState),this.checked()instanceof Array&&this._updateCheckedItem()},_changeState:function(e){"indeterminate"==e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checked()instanceof Array||this.checked(null)):"check"==e?(this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.span.removeClass("e-chk-act e-chk-inact e-chk-indeter").addClass("e-chk-act"),this.wrapper[0].setAttribute("aria-checked",!0)):"uncheck"==e&&(this.spanImg.removeClass("e-checkmark e-stop"),this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1))},_setIndeterminate:function(e){e?(this.spanImg.removeClass("e-checkmark").addClass("e-stop"),this.span.removeClass("e-chk-act e-chk-inact").addClass("e-chk-indeter"),this.wrapper[0].setAttribute("aria-checked","mixed"),this.wrapper.find("input").prop("enableTriState",!0),this.checkState("indeterminate"),this.checked()instanceof Array||this.checked(null),this._hiddenInput.setAttribute("name",this.model.name)):(this.span.removeClass("e-chk-indeter"),this.spanImg.removeClass("e-stop"),this.wrapper.find("input").removeAttr("enableTriState"),this.wrapper.find("input").prop("enableTriState",!1),this.checked()?this._checked():this._unChecked())},_setTextWrapper:function(e){""!=e&&(this.txtSpan=r.buildTag("div.e-text",e),this.wrapper.append(this.txtSpan),this.model.enableRTL&&this._setRTL())},_setText:function(e){""==this.model.text&&""!=e?this._setTextWrapper(e):this.txtSpan.html(e)},_setIdAttr:function(e){a("#"+this.model.idPrefix+this.model.id+"_wrapper").attr("id",this.model.idPrefix+e+"_wrapper"),this.element[0].setAttribute("id",e)},_isValid:function(e){return!r.isNullOrUndefined(e)&&""!=e},_wireEvents:function(){this._on(this.wrapper,"click",this._checkedHandler),this._isIE8&&this._isValid(this.model.id)&&this._on(a("label[for="+this.model.id+"]"),"click",function(){this.wrapper.click()}),this._on(this.wrapper,"focus",this._focusIn),this._on(this.wrapper,"focusout",this._focusOut)},_unWireEvents:function(){this._off(this.wrapper,this._isDevice&&a.isFunction(a.fn.tap)?"tap":"click"),this._isIE8&&this._isValid(this.model.id)&&this._off(a("label[for="+this.model.id+"]"),"click"),this._off(this.wrapper,"focus"),this._off(this.wrapper,"focusout")},_focusIn:function(e){a(this.wrapper).addClass("e-focus"),a(this.wrapper).on("keydown",a.proxy(this._checkUnCheck,this))},_focusOut:function(e){a(this.wrapper).removeClass("e-focus"),a(this.wrapper).off("keydown",a.proxy(this._checkUnCheck,this))},_checkUnCheck:function(e){32==e.keyCode&&(e.preventDefault(),this._checkedHandler())},_checkedHandler:function(e){var t={isChecked:this._isChecked,isInteraction:!0,event:e};if(1==this._trigger("beforeChange",t))return!1;this.span.hasClass("e-chk-inact")?(this._checked(),this.checked()instanceof Array||this.checked(!0),this.model.enableTriState&&(this._indeterminateState=!0,this.checkState("check"))):this.span.hasClass("e-chk-act")?1==this.model.enableTriState&&"check"==this.model.checkState&&1==this.model.checked?(this._setIndeterminate(!0),this.checked()instanceof Array||(this.checked(!0),this.checkState("indeterminate"))):(this._unChecked(),this.checked()instanceof Array||(this.checked(!1),this.checkState("uncheck"))):this.span.hasClass("e-chk-indeter")&&(this.checked()instanceof Array?this._isChecked=!1:this.checked(!1),this._setIndeterminate(!1),this._indeterminateState=!1),this.checked()instanceof Array?this._updateCheckedItem():this._isChecked=this.checked(),a(this.maindiv).addClass("e-material-animate");t={isChecked:this._isChecked,checkState:this.checkState(),isInteraction:!0,event:e};return this._trigger("change",t),!0},_checked:function(){this.span.removeClass("e-chk-inact").addClass("e-chk-act"),this.spanImg.removeClass("e-stop").addClass("e-checkmark"),this.wrapper[0].setAttribute("aria-checked",!0),this.wrapper.find("input[type=checkbox]").prop("checked",!0),this.checkState("check"),this._hiddenInput.removeAttribute("name")},_unChecked:function(){this.span.removeClass("e-chk-act e-chk-indeter").addClass("e-chk-inact"),this.wrapper[0].setAttribute("aria-checked",!1),this.spanImg.removeClass("e-checkmark e-stop"),this.wrapper.find("input[type=checkbox]").prop("checked",!1),this.checkState("uncheck"),this._hiddenInput.setAttribute("name",this.model.name)},_setCheckedItem:function(e){if("boolean"!=typeof e||e instanceof Array){if(e instanceof Array&&!r.isNullOrUndefined(this.model.value)&&""!=this.model.value)for(var t=0;t<e.length;t++)e[t]==this.model.value&&(this._isChecked=!0)}else this._isChecked=!0},_updateCheckedItem:function(){var e=void 0===this.model.checked.splice?this.model.checked():this.model.checked;r.isNullOrUndefined(this.model.value)||""==this.model.value||this.wrapper.find("span:first").hasClass("e-chk-indeter")||(a.inArray(this.model.value,this.checked())<0&&this.wrapper.find("span:first").hasClass("e-chk-act")?(e.push(this.model.value),this._isChecked=!0,this._hiddenInput.removeAttribute("name")):-1<a.inArray(this.model.value,this.checked())&&this.wrapper.find("span:first").hasClass("e-chk-inact")&&(this._isChecked=!1,e.splice(a.inArray(this.model.value,this.model.checked()),1),this._hiddenInput.setAttribute("name",this.model.name)))},disable:function(){this.wrapper.hasClass("e-disable")||(this.wrapper.addClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!0),this.element[0].setAttribute("disabled","disabled"),this._isIE8&&this.span.addClass("e-disable"),this._unWireEvents(),this.model.enabled=!1)},enable:function(){this.wrapper.hasClass("e-disable")&&(this.wrapper.removeClass("e-disable"),this.wrapper[0].setAttribute("aria-disabled",!1),this.element.prop("disabled",!1),this._isIE8&&this.span.removeClass("e-disable"),this._wireEvents(),this.model.enabled=!0)},isChecked:function(){if(null!=this._isChecked&&null!=this._isChecked)return this._isChecked}}),r.CheckboxSize={Small:"small",Medium:"medium"},r.CheckState={Check:"check",Uncheck:"uncheck",Indeterminate:"indeterminate"}}(jQuery,Syncfusion),function(d,h,i){h.widget("ejPager","ej.Pager",{_rootCSS:"e-pager",validTags:["div"],defaults:{pageSize:12,pageSizeList:null,pageCount:10,currentPage:1,enableExternalMessage:!1,externalMessage:"",pageSizeMessage:"",enableQueryString:!1,locale:"en-US",masterObject:null,pageSizeSelected:null,enableRTL:!1,totalRecordsCount:null,totalPages:null,customText:"",showPageInfo:!0,cssClass:"",enabled:!0,showGoToPage:!1,isResponsive:!1,change:null,click:null,template:""},_init:function(){this._index=-1,this.element.attr("role","navigation"),this.element.attr("tabindex","0"),this.element.attr("aria-label","pager"),this._initPrivateProperties(),this.model.enableQueryString&&this._queryStringValue(),this.renderPager(),this.model.isResponsive&&this._reSizeHandler(),this._wireResizing(),this._wireEvents(),this.refreshPager()},_initPrivateProperties:function(){"string"==typeof this.model.pageSizeList&&(this.model.pageSizeList=JSON.parse(this.model.pageSizeList)),this._pageSize=this.model.pageSize,this._links=[],this._$prev=null,this._$first=null,this._$PP=null,this._$NP=null,this._lastNP=!1,this._lastpageCount=null,this._$last=null,this._$next=null,this._prevPageNo=1,this.localizedLabels=this._getLocalizedLabels(),this._intervalWid=0,this._msgWidth=0,this._gotoWid=0,this._temp=this.model.template},_wireEvents:function(){this._on(this.element,"click",this._pagerClickHandler),d(document).on("click",d.proxy(this._hidedrop,this)),this._pagerContainer&&(this._touchPrev=!1,this._pagerContainer.on("touchstart",this._touchHandler),this._pagerContainer.on("keydown",this._pagerClickHandler.bind(this)),this._pagerContainer.on("mouseover",this._mouseOverHandler),this._pagerContainer.on("mouseout",this._mouseOutHandler))},_touchHandler:function(e){this._touchPrev=!0},_mouseOverHandler:function(e){0==this._touchPrev&&(!(e=d(e.target)).hasClass("e-icon")&&!e.hasClass("e-link")||e.hasClass("e-hover")||e.addClass("e-hover")),this._touchPrev=!1},_mouseOutHandler:function(e){e=d(e.target);(e.hasClass("e-icon")||e.hasClass("e-link"))&&e.hasClass("e-hover")&&e.removeClass("e-hover")},_hidedrop:function(e){d(e.target.parentElement).hasClass("e-drpdwndiv")||d(e.target).hasClass("e-drpdwndiv")||this.$dropItem&&"none"!=this.$dropItem.css("display")&&this.$dropItem.hide()},_wireResizing:function(){this._refreshDropandTextItems(),d(window).bind("resize",this.model.isResponsive?d.proxy(this._reSizeHandler,this):d.proxy(this._unWireResizing,this))},_unWireResizing:function(){this._refreshDropandTextItems(),this.$dropItem&&"none"!=this.$dropItem.css("display")&&this.$dropItem.hide(),d(window).unbind("resize",d.proxy(this._reSizeHandler,this))},_reSizeHandler:function(){this.$dropItem&&"none"!=this.$dropItem.css("display")&&this.$dropItem.hide(),this._intervalWid+this._gotoWid+this.element.find(".e-pagercontainer").outerWidth()+this._msgWidth>this.element.outerWidth()-20?0<this._msgWidth&&this.element.find(".e-parentmsgbar").addClass("e-msg-res"):0<this._msgWidth&&this.element.find(".e-parentmsgbar").removeClass("e-msg-res"),this.element.outerWidth()-d(this.element.find(".e-pagercontainer")).outerWidth()<40&&(this._flag=!0,this._fillScreen()),40<this.element.outerWidth()-d(this.element.find(".e-pagercontainer")).outerWidth()&&(0<!d(this._templateElement).find(".e-textbox-paging").length&&(this._maxPageCount||(this._maxPageCount=this.model.pageCount)),this.option("pageCount",this._maxPageCount),this.element.outerWidth()-d(this.element.find(".e-pagercontainer")).outerWidth()<40&&(this._flag=!0,this._fillScreen())),this._refreshDropandTextItems()},_refreshDropandTextItems:function(){this.numTextbox&&!this.model.template&&(this.element.find(".e-pagercontainer").position().top!=this.element.find(".e-parentmsgbar").position().top?this.numTextbox.addClass("e-pager-goto-res"):this.numTextbox.removeClass("e-pager-goto-res")),this.pageInterval_wrap&&!this.model.template&&(this.element.find(".e-pagercontainer").position().top!=this.element.find(".e-pager-itemsinterval").position().top?this.element.find(".e-pager-itemsinterval").addClass("e-pager-goto-res"):this.element.find(".e-pager-itemsinterval").removeClass("e-pager-goto-res"))},renderPager:function(){var e,t,i,s,n,a,r,o,l;this.model.template?(this._templateElement=h.buildTag("div.e-template","",{}),(this.model.template.startsWith(".")||this.model.template.startsWith("#")?d(d(this.model.template).html()):d(this.model.template)).appendTo(this._templateElement),0<d(this._templateElement).find(".e-default-paging").length&&(l=h.buildTag("div.e-pagercontainer","",{}),this._renderPagerContainer(l),l.appendTo(d(this._templateElement).find(".e-default-paging"))),0<d(this._templateElement).find(".e-textbox-paging").length&&((t=d((e=this)._templateElement).find(".e-textbox-paging")).addClass("e-pagercontainer"),i=h.buildTag("div.e-firstpage e-icon e-mediaback  e-firstpagedisabled e-disable","",{},{title:e.localizedLabels.firstPageTooltip,"aria-label":e.localizedLabels.firstPageTooltip,role:"link"}),s=h.buildTag("div.e-prevpage e-icon e-arrowheadleft-2x  e-prevpagedisabled e-disable","",{},{title:e.localizedLabels.previousPageTooltip,"aria-label":e.localizedLabels.previousPageTooltip,role:"link"}),n=h.buildTag("input.e-gototextbox",{},{type:"textbox"}),a=h.buildTag("div.e-nextpage e-icon e-arrowheadright-2x  e-default","",{},{title:e.localizedLabels.nextPageTooltip,"aria-label":e.localizedLabels.nextPageTooltip,role:"link"}),r=h.buildTag("div.e-lastpage e-icon e-mediaforward  e-default","",{},{title:e.localizedLabels.lastPageTooltip,"aria-label":e.localizedLabels.lastPageTooltip,role:"link"}),o=h.buildTag("div.e-newrecord e-icon e-plus e-default","",{},{title:"Add New Record","aria-label":"Add New Record",role:"button"}),t.append(i),t.append(s),t.append(n),t.append(a),t.append(r),t.append(o),n.focus(function(){n.val(e.model.currentPage)})),o=this.element,d(this._templateElement).addClass("e-template"),this._pagerContainer=l=d(this._templateElement).find(".e-pagercontainer")?d(this._templateElement).find(".e-pagercontainer"):d(this._templateElement),o.append(d(this._templateElement)),0<d(this._templateElement).find(".e-prevpage").length&&(this._$prev=d(this._templateElement).find(".e-prevpage")),0<d(this._templateElement).find(".e-nextpage").length&&(this._$next=d(this._templateElement).find(".e-nextpage")),0<d(this._templateElement).find(".e-firstpage").length&&(this._$first=d(this._templateElement).find(".e-firstpage")),0<d(this._templateElement).find(".e-lastpage").length&&(this._$last=d(this._templateElement).find(".e-lastpage")),0<d(this._templateElement).find(".e-gototextbox").length&&(this.numTextbox=d(this._templateElement).find(".e-gototextbox").addClass("e-pager-goto-res e-textbox").attr("type","textbox"),0<!d(this._templateElement).find(".e-textbox-paging").length&&this.numTextbox.width(35),this._on(d(this.numTextbox),"keydown",this._mouseScroll),this._on(this.numTextbox,"focusout",this._onTextboxBlur)),this._$prev&&this._$prev.hasClass("e-prevpagedisabled")&&this._$prev.removeClass("e-prevpage"),this._$last&&this._$last.hasClass("e-lastpagedisabled")&&this._$prev.removeClass("e-lastpage"),this._$first&&this._$first.hasClass("e-firstpagedisabled")&&this._$prev.removeClass("e-firstpage"),this._$next&&this._$next.hasClass("e-nextpagedisabled")&&this._$prev.removeClass("e-nextpage"),0<d(this._templateElement).find(".e-drpdwndiv").length&&this.model.pageSizeList&&this._renderDropdownlist(),this._templatePageCount=d(this._templateElement).find(".e-pagenumbers").length,1<this._templatePageCount&&(0<d((e=this)._templateElement).find(".e-previouspager").length&&(this._$PP=d(this._templateElement).find(".e-previouspager").addClass("e-nextprevitemdisabled e-disable e-spacing e-PP")),0<d(this._templateElement).find(".e-nextpager").length&&(this._$NP=d(this._templateElement).find(".e-nextpager").addClass("e-NP e-spacing e-nextprevitemdisabled e-disable")),d(this._templateElement).find(".e-pagenumbers").each(function(e){d(this).attr("role","link").addClass("e-numericitem e-spacing e-default").data("index",e)}),e._links=d(this._templateElement).find(".e-numericitem[role=link]"))):(l=h.buildTag("div.e-pagercontainer","",{}),this._pagerContainer=l,this._renderPagerContainer(l),this.element[0].appendChild(l[0])),this.model.enabled||this._disable(),this.model.pageSizeList&&0<this.model.pageSizeList.length&&this._renderDropdownlist(),this._pageInfo(),this.model.enableExternalMessage&&this._renderPagerMessage(),this.model.showGoToPage&&this._renderTextboxItem(),this.model.enableRTL&&this.element.addClass("e-rtl"),this._cssClass=this.model.cssClass,this.element.addClass(this.model.cssClass)},_onTextboxBlur:function(e){var t=this;e.currentTarget.value=parseInt(e.currentTarget.value);if(!/^[0-9]*$/.test(parseInt(e.currentTarget.value)))return t.numTextbox.val(t.model.currentPage),!1;t.model.currentPage!=parseInt(e.currentTarget.value)&&(1<=parseInt(e.currentTarget.value)&&parseInt(e.currentTarget.value)<=t.model.totalPages?(t.model.currentPage=parseInt(e.currentTarget.value),t.refreshPager(),t._prevPageNo!=t.model.currentPage&&t._trigger("change",{currentPage:t.model.currentPage,isInteraction:!0,event:e})):t.numTextbox.val(this.model.currentPage)),0<d(this._templateElement).find(".e-textbox-paging").length&&this.numTextbox.val(this.model.currentPage+" of "+this.model.totalPages)},_removeDropdownlist:function(){this.pageInterval_wrap.remove(),this.pageInterval_wrap=null,this.$textspan=null,this.$dropItem=null},_renderDropdownlist:function(){var t,e,i=this;this.pageInterval_wrap=h.buildTag("div.e-pager-itemsinterval","",{},{tabindex:"0","aria-label":"PageSizeList Dropdown",role:"listbox","aria-expanded":!1,"aria-haspopup":!0,"aria-owns":i.element[0].id+"_pagelist"}),t=this.model.template&&0<d(this._templateElement).find(".e-drpdwndiv").length?d(this._templateElement).find(".e-drpdwndiv").addClass("e-icon e-arrow-sans-down"):h.buildTag("div.e-drpdwndiv e-icon e-arrow-sans-down","",{}),null!=i.model.totalRecordsCount&&0!=i.model.totalRecordsCount||t.addClass("e-disable"),this.$textspan=h.buildTag("span.e-text"),this.sizeIntervals=this.model.pageSizeList,i.model.template&&(e=0<d(i._templateElement).find(".e-drpdwndiv").prev().length?d(i._templateElement).find(".e-drpdwndiv").prev():d(i._templateElement)),t.appendTo(this.pageInterval_wrap),i.model.template?e.after(this.pageInterval_wrap):this.pageInterval_wrap.appendTo(this.element),this.pageInterval_wrap.insertBefore(this._parentMsgBar),this.$textspan.appendTo(t),i.$textspan.text(this.model.pageSize||this.model.pageSizeList[0]),this.$dropItem=h.buildTag("ul.e-drpdwn e-ul","",{},{role:"list",id:i.element[0].id+"_pagelist",tabindex:"-1"}),this._renderItems(),this.$dropItem.appendTo(t),this._renderPageSizeMessage(),t.on("click",function(){i._showPageDropdown(i,t)}),i.pageInterval_wrap.on("keydown",function(e){e.altKey&&40==e.keyCode?i._showPageDropdown(i,t):e.altKey||40!=e.keyCode||"none"==i.$dropItem.css("display")?e.altKey||38!=e.keyCode||"none"==i.$dropItem.css("display")?e.altKey||13!=e.keyCode||"none"==i.$dropItem.css("display")||(d(i.$dropItem).find("li.e-active").removeClass("e-active"),d(i.$dropItem.find("li")[i._index]).addClass("e-active").removeClass("e-hover"),i._pageSize=parseInt(d(i.$dropItem.find("li")[i._index]).text()),i.$textspan.text(d(i.$dropItem.find("li")[i._index]).text()),i._updatedFromDropDown(i),i.$dropItem.hide(),i.pageInterval_wrap.focus()):(i._index=i._index-1,i._index<0&&(i._index=0),d(i.$dropItem).find("li.e-hover").removeClass("e-hover"),d(i.$dropItem.find("li")[i._index]).addClass("e-hover"),d(i.$dropItem.find("li")[i._index]).focus()):(i._index=i._index+1,i._index>=d(i.$dropItem.find("li")).length&&(i._index=d(i.$dropItem.find("li")).length-1),d(i.$dropItem).find("li.e-hover").removeClass("e-hover"),d(i.$dropItem.find("li")[i._index]).addClass("e-hover"),d(i.$dropItem.find("li")[i._index]).focus())}),this.$dropItem.hide(),this._intervalWid=this.element.find(".e-pager-itemsinterval").outerWidth()},_getOffset:function(e){return h.util.getOffset(e)},_showPageDropdown:function(e,t){"none"!=e.$dropItem.css("display")?(e.$dropItem.hide(),this.pageInterval_wrap.attr("aria-expanded",!1)):e.model.enabled&&!t.hasClass("e-disable")&&(this.pageInterval_wrap.attr("aria-expanded",!0),e.$dropItem.show(),e._setListPosition())},_getZindexPartial:function(){return h.util.getZindexPartial(this.pageInterval_wrap,this.$dropItem)},_setListPosition:function(){var e=this.pageInterval_wrap,t=this._getOffset(e),i=d(document).scrollTop()+d(window).height()-(t.top+d(e).outerHeight()),s=t.top-d(document).scrollTop(),n=this.$dropItem.outerHeight(),t=(this.$dropItem.outerWidth(),e.outerHeight()-e.height()),e=this._getZindexPartial(),t=n<i||s<n?this.$dropItem.position().top:-(n+t+3);this.$dropItem.css({top:t+"px","z-index":e})},_renderPageSizeMessage:function(){this.pageInterval_wrap.children().hasClass("e-interval-msg")||(this._msgwrapper=h.buildTag("div.e-interval-msg")),this._msgwrapper.appendTo(this.pageInterval_wrap),this.model.pageSizeMessage.toString().length?(this._msgwrapper.html(this.model.pageSizeMessage),"none"==this._msgwrapper.css("display")&&this._msgwrapper.show()):this._msgwrapper.remove()},_renderItems:function(){var t=this;d(this.model.pageSizeList).each(function(){var e=h.buildTag("li");e.text(this),e.attr("aria-label",this.toString()),e.attr("role","listitem"),e.attr("tabindex","-1"),t.$dropItem.append(e),t.model.pageSize==this&&e.addClass("e-active")}),this.$dropItem.find("li").on("click",function(e){t.$dropItem.find("li.e-active").removeClass("e-active"),d(this).addClass("e-active"),t._pageSize=parseInt(d(this).text()),t.$textspan.text(d(this).text()),t._updatedFromDropDown(t)})},_updatedFromDropDown:function(t){t.refreshPager(),t._trigger("pageSizeSelected",{pageSize:t._pageSize}),t._prevPageNo!=t.model.currentPage&&t._trigger("change",{currentPage:t.model.currentPage,isInteraction:!0,event:e})},_queryStringValue:function(){var e=new RegExp("[\\?&]page=([^&#]*)").exec(window.location.href);this.model.currentPage=e?parseInt(e[1]||1):1},_renderPagerMessage:function(){this.element.find("e-pagermessage").length<=1&&(this._messageDiv=h.buildTag("div.e-pagermessage")),this.model.externalMessage.toString().length?(this._messageDiv.html(this.model.externalMessage),"none"==this._messageDiv.css("display")&&this._messageDiv.show()):this._messageDiv.hide(),this.element.append(this._messageDiv)},_removePagerMessage:function(){this.element.find("div.e-pagermessage").remove()},_mouseScroll:function(e){this.model.enabled&&("38"==e.keyCode?this._updateField("increment"):"40"==e.keyCode?this._updateField("decrement"):"13"==e.keyCode&&this._onTextboxBlur(e))},_updateField:function(e){var t=this.model.currentPage;""==this.numTextbox.val()?this.numTextbox.val(1):1<=this.numTextbox.val().indexOf(" ")&&this.numTextbox.val(this.numTextbox.val().replace(" ","")),this.model.currentPage=h.parseInt(this.numTextbox.val(),this.model.locale),isNaN(this.model.currentPage)&&!this.model.currentPage&&(this.model.currentPage=1),1<=this.model.currentPage&&this.model.currentPage>this.model.totalPages?(this.model.currentPage=this.model.totalPages,this.numTextbox.val(this.model.currentPage)):this.model.currentPage<1&&this.model.currentPage<=this.model.totalPages?(this.model.currentPage=1,this.numTextbox.val(this.model.currentPage)):1<=this.model.currentPage&&this.model.currentPage<=this.model.totalPages&&(1<=(e="increment"==e?this.model.currentPage+1:this.model.currentPage-1)&&e<=this.model.totalPages&&(this.numTextbox.val(e),this.model.currentPage=e)),this.refreshPager(),t!=this.model.currentPage&&this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!0,event:event})},_renderTextboxItem:function(){var e=h.buildTag("input#"+this.element[0].id+"_numtext","",{},{type:"textbox",role:"textbox","aria-label":"Go to Textbox"});d(e).appendTo(this._parentMsgBar).insertBefore(d(this._parentMsgBar).find("span")),this.numTextbox=e,this.numTextbox.height(this.element.find(".e-pagercontainer .e-numericcontainer a").outerHeight()),this.numTextbox.width(35),this.numTextbox.addClass("e-gototextbox e-textbox"),this.model.showGoToPage||this.numTextbox.hide(),this._gotoWid=d(this.numTextbox).outerWidth(),this._on(d(this.numTextbox),"keydown",this._mouseScroll),this._on(this.numTextbox,"focusout",this._onTextboxBlur)},_renderPagerContainer:function(e){this._renderBackwardButton(e),this._renderpreviousPager(e),this._renderNumericItem(e),this._renderForwardPager(e),this._renderForwardButton(e)},_renderMsgBar:function(){var e=h.buildTag("span.e-pagermsg",String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0));this._parentMsgBar.appendChild(e[0]),this._parentMsgBar.style.textAlign=h.TextAlign.Right},_renderpreviousPager:function(e){this._$PP=h.buildTag("a.e-link e-nextprevitemdisabled e-disable e-spacing e-PP","...",{},{title:this.localizedLabels.previousPagerTooltip,"aria-label":this.localizedLabels.previousPagerTooltip}),this._$PP.attr("tabindex","0"),e.append(this._$PP)},_renderForwardPager:function(e){this._$NP=h.buildTag("a.e-link e-NP e-numericitem e-spacing e-default","...",{},{title:this.localizedLabels.nextPagerTooltip,"aria-label":this.localizedLabels.nextPagerTooltip}),this._$NP.attr("tabindex","0"),e.append(this._$NP)},_renderBackwardButton:function(e){this._$first=h.buildTag("div.e-firstpage e-icon e-mediaback  e-firstpagedisabled e-disable","",{},{title:this.localizedLabels.firstPageTooltip,"aria-label":this.localizedLabels.firstPageTooltip,role:"link"}),this._$prev=h.buildTag("div.e-prevpage e-icon e-arrowheadleft-2x  e-prevpagedisabled e-disable","",{},{title:this.localizedLabels.previousPageTooltip,"aria-label":this.localizedLabels.previousPageTooltip,role:"link"}),this._$first.attr("tabindex","0"),this._$prev.attr("tabindex","0"),e.append(this._$first),e.append(this._$prev)},_renderNumericItem:function(e){var t=h.buildTag("div.e-numericcontainer e-default","",{});this._renderNumericLinks(t,this.model.pageCount),e.append(t),this._maxPageCount=this.model.pageCount},_renderNumericLinks:function(e){e.empty(),this.model.pageCount=Math.round(this.model.pageCount),""!=this.model.customText?e.addClass("e-customtext"):e.removeClass("e-customtext");for(var t=1;t<=this.model.pageCount;t++){var i=h.buildTag("a.e-link",this.model.customText+t,{},{role:"link","aria-label":"Go To page "+t.toString()}).addClass("e-numericitem e-spacing e-default").data("index",t);i.attr("tabindex","0"),t==this.model.currentPage&&i.removeClass("e-default").addClass("e-currentitem e-active"),e.append(i)}this._links=e.children()},_renderForwardButton:function(e){this._$next=h.buildTag("div.e-nextpage e-icon e-arrowheadright-2x  e-default","",{},{title:this.localizedLabels.nextPageTooltip,role:"link","aria-label":this.localizedLabels.nextPageTooltip}),this._$last=h.buildTag("div.e-lastpage e-icon e-mediaforward  e-default","",{},{title:this.localizedLabels.lastPageTooltip,role:"link","aria-label":this.localizedLabels.lastPageTooltip}),this._$next.attr("tabindex","0"),this._$last.attr("tabindex","0"),e.append(this._$next),e.append(this._$last)},_setLocale:function(){this.localizedLabels=this._getLocalizedLabels(),this._$first.attr("title",this.localizedLabels.firstPageTooltip),this._$prev.attr("title",this.localizedLabels.previousPageTooltip),this._$next.attr("title",this.localizedLabels.nextPageTooltip),this._$last.attr("title",this.localizedLabels.lastPageTooltip),this._$NP.attr("title",this.localizedLabels.nextPagerTooltip),this._$NP.attr("title",this.localizedLabels.previousPagerTooltip),this._$first.attr("aria-label",this.localizedLabels.firstPageTooltip),this._$prev.attr("aria-label",this.localizedLabels.previousPageTooltip),this._$next.attr("aria-label",this.localizedLabels.nextPageTooltip),this._$last.attr("aria-label",this.localizedLabels.lastPageTooltip),this._$NP.attr("aria-label",this.localizedLabels.nextPagerTooltip),this._$NP.attr("aria-label",this.localizedLabels.previousPagerTooltip)},_applyCss:function(){null==this.model.totalRecordsCount?(this._$prev&&this._$prev.addClass("e-prevpagedisabled e-disable").removeClass("e-prevpage").removeClass("e-default"),this._$first&&this._$first.addClass("e-firstpagedisabled e-disable").removeClass("e-firstpage").removeClass("e-default"),this._$last&&this._$last.addClass("e-lastpagedisabled e-disable").removeClass("e-lastpage").removeClass("e-default"),this._$next&&this._$next.addClass("e-nextpagedisabled e-disable").removeClass("e-nextpage").removeClass("e-default"),this._$NP&&this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this.model.pageSizeList&&this.element.find(".e-drpdwndiv").addClass("e-disable")):(0==this.model.totalRecordsCount&&this.model.pageSizeList?this.element.find(".e-drpdwndiv").addClass("e-disable"):0!=this.model.totalRecordsCount&&this.model.pageSizeList&&this.element.find(".e-drpdwndiv").hasClass("e-disable")&&this.element.find(".e-drpdwndiv").removeClass("e-disable"),1<this.model.currentPage&&this._$prev&&this._$first?(this._$prev.removeClass("e-prevpagedisabled").removeClass("e-disable").addClass("e-prevpage e-default"),this._$first.removeClass("e-firstpagedisabled").removeClass("e-disable").addClass("e-firstpage e-default")):(this._$prev&&this._$prev.addClass("e-prevpagedisabled e-disable").removeClass("e-prevpage").removeClass("e-default"),this._$first&&this._$first.addClass("e-firstpagedisabled e-disable").removeClass("e-firstpage").removeClass("e-default")),this._$PP&&(this.model.currentPage>this.model.pageCount?this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")),this._links.length&&parseInt(this._links[0].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>this.model.totalPages?this._lastNP=!0:this._lastNP=!1,0==this._lastNP&&(this._$NP?this._$NP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"):this._$NP&&this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")),this._lastpageCount=this.model.totalPages%this.model.pageCount,0==this._lastpageCount&&(this._lastpageCount=this.model.pageCount),this.model.currentPage>this.model.totalPages-this._LastpageCount&&(this._$PP&&this._$PP.removeClass("e-nextprevitemdisabled").removeClass("e-disable").addClass("e-numericitem e-default"),this._$NP&&this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")),this.model.currentPage==this.model.totalPages||0==this.model.totalRecordsCount?(this._$last&&this._$last.addClass("e-lastpagedisabled e-disable").removeClass("e-lastpage").removeClass("e-default"),this._$next&&this._$next.addClass("e-nextpagedisabled e-disable").removeClass("e-nextpage").removeClass("e-default"),this._$NP&&this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")):(this._$last&&this._$last.addClass("e-lastpage e-default").removeClass("e-lastpagedisabled").removeClass("e-disable"),this._$next&&this._$next.addClass("e-nextpage e-default").removeClass("e-nextpagedisabled").removeClass("e-disable")),this._links.length&&(this._links.removeClass("e-currentitem").removeClass("e-active").addClass("e-default"),d(this._links[(this.model.currentPage-1)%this.model.pageCount]).removeClass("e-default").addClass("e-currentitem e-active"),d(this._links[(this._prevPageNo-1)%this.model.pageCount]).removeClass("e-default").addClass("e-numericitem")),this._pageSize>=this.model.totalRecordsCount/this.model.pageCount&&null!=this._$PP&&0!=this._$PP.length&&(this._$PP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default"),this._$NP.addClass("e-nextprevitemdisabled e-disable").removeClass("e-numericitem").removeClass("e-default")))},_SetTotalPages:function(){this.model.totalPages=this.model.totalRecordsCount%this._pageSize==0?this.model.totalRecordsCount/this._pageSize:parseInt(this.model.totalRecordsCount/this._pageSize,10)+1},_refreshNumericItem:function(){if(0!=this._links.length&&null!=this._links){this.model.currentPage=1==this.model.totalPages?1:this.model.currentPage,this.model.currentPage>this.model.totalPages&&0!=this.model.totalPages&&(this.model.currentPage=this.model.totalPages);var e=parseInt(this.model.currentPage/this.model.pageCount,10);this.model.currentPage%this.model.pageCount==0&&0<e&&--e,this._links.css("display","none");for(var t=0;t<this.model.pageCount;t++){var i=e*this.model.pageCount+1+t;i<=this.model.totalPages&&(this._links[t].style.display="",d(this._links[t]).data("index",i),d(this._links[t]).html(this.model.customText+i),d(this._links[t]).attr("aria-label","Go to page "+i.toString()))}}},_refreshPagerInfo:function(){0==this.model.totalRecordsCount&&(this.model.currentPage=0),this.element.find(".e-pagermsg").text(String.format(this.localizedLabels.pagerInfo,this.model.currentPage,this.model.totalPages||0,this.model.totalRecordsCount||0))},_refreshExternalMessage:function(){this.model.externalMessage.toString().length?this.element.find(".e-pagermessage").empty().html(this.model.externalMessage).show():this.element.find(".e-pagermessage").hide()},refreshPager:function(){this._templateElement&&(this._links=d(this._templateElement).find(".e-numericitem[role=link]")),this._SetTotalPages(),this._refreshNumericItem(),this._refreshPagerInfo(),this._applyCss(),this.model.enableExternalMessage&&this._refreshExternalMessage(),this.model.enableRTL?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl"),this.numTextbox&&(0<d(this._templateElement).find(".e-textbox-paging").length?(this.model.currentPage>this.model.totalPages&&0!=this.model.totalPages&&(this.model.currentPage=this.model.totalPages),this.numTextbox.is(":focus")||this.numTextbox.val(String.format("{0} of {1}",this.model.currentPage,this.model.totalPages))):this.numTextbox.val(this.model.currentPage)),""===this._temp||h.isNullOrUndefined(this._temp)||(this._temp.startsWith(".")||this._temp.startsWith("#"))&&null!=d(this._temp)[0]&&d(this._temp)[0]!=i&&this.option("template",d(this._temp).render([this.model]))},_kDownHandler:function(e){var t=e.keyCode||e.which||e.charCode;if(e.target=null,this.model.masterObject.checkKey("firstPage",t,e))e.target=this._$first;else if(this.model.masterObject.checkKey("previousPager",t,e))e.target=this._$PP;else if(this.model.masterObject.checkKey("previousPage",t,e))e.target=this._$prev;else if(this.model.masterObject.checkKey("lastPage",t,e))e.target=this._$last;else if(this.model.masterObject.checkKey("nextPager",t,e))e.target=this._$NP;else{if(!this.model.masterObject.checkKey("nextPage",t,e))return!1;e.target=this._$next}this._pagerClickHandler(e)},_pageInfo:function(e){!this.model.showPageInfo&&!this.model.showGoToPage||this._parentMsgBar?this.model.showPageInfo||this.model.showGoToPage?d(this._parentMsgBar).find(".e-pagermsg").remove():(this._parentMsgBar&&this._parentMsgBar.remove(),this._parentMsgBar=null):(this._parentMsgBar=document.createElement("div"),this._parentMsgBar.className+="e-parentmsgbar",this.model.showPageInfo&&this._renderMsgBar(),this.element[0].appendChild(this._parentMsgBar),this.element[0].className+=this.model.enableRTL?" e-pager e-rtl":" e-pager"),this._msgWidth=d(this._parentMsgBar).outerWidth()},_doClickAnimation:function(e){var t=d(e.target);t!=i&&e.type!=i&&t.addClass("e-animate")},_pagerClickHandler:function(e){if(!this.model.enabled)return!1;var t;"keydown"==e.type&&13!=e.keyCode||(this._prevPageNo=this.model.currentPage,t=d(e.target),this.element.find(".e-animate").removeClass("e-animate"),this._doClickAnimation(e),-1!=d.inArray(e.target,this._links)?this.model.currentPage=parseInt(d(e.target).data("index"),10):t.hasClass("e-nextpage")&&1!=t.hasClass("e-nextpagedisabled")?this.model.currentPage%this.model.pageCount==0?(this.model.currentPage++,this._links!=i&&0!=this._links.length&&(this.model.currentPage=parseInt(d(this._links[0]).data("index"),10)+this.model.pageCount),this.model.currentPage+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0)):this.model.currentPage++:t.hasClass("e-prevpage")&&1!=t.hasClass("e-prevpagedisabled")?(this.model.currentPage%this.model.pageCount==1&&(this._lastNP=!1),this.model.currentPage--,this.model.currentPage<0&&(this.model.currentPage=0)):t.hasClass("e-lastpage")&&1!=t.hasClass("e-lastpagedisabled")?(this._LastpageCount=this.model.totalPages%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this.model.currentPage=this.model.totalPages,this._lastNP=!0):t.hasClass("e-firstpage")&&1!=t.hasClass("e-firstpagedisabled")?(this.model.currentPage=1,this._lastNP=!1):t.hasClass("e-NP")&&1!=t.hasClass("e-nextprevitemdisabled")?(this._links!=i&&(this.model.currentPage=parseInt(d(this._links[0]).data("index"),10)+this.model.pageCount),parseInt(this._links[this.model.pageCount-1].innerHTML.replace(this.model.customText,""),10)+this.model.pageCount>=this.model.totalPages&&(this._lastNP=!0,this.model.totalRecordsCount-this._pageSize<this._pageSize?this._LastpageCount=this.model.totalRecordsCount-this._pageSize:this._LastpageCount=this.model.totalRecordsCount/this._pageSize%this.model.pageCount,0==this._LastpageCount&&(this._LastpageCount=this.model.pageCount),this._links!=i&&(this.model.currentPage=parseInt(d(this._links[this.model.pageCount-1]).data("index"),10)+1))):t.hasClass("e-PP")&&1!=t.hasClass("e-nextprevitemdisabled")&&(this._links!=i&&(this.model.currentPage=parseInt(d(this._links[0]).data("index"),10)-this.model.pageCount),this._lastNP=!1),this._trigger("click",{currentPage:this.model.currentPage,event:e}),t.hasClass("e-newrecord")&&this._trigger("addRecord",{currentPage:this.model.currentPage,event:e}),this.goToPage(this.model.currentPage,e))},goToPage:function(e,t){e!=this.model.currentPage&&(this._prevPageNo=this.model.currentPage),this._prevPageNo!==e&&1<=e&&e<=this.model.totalPages&&(this.model.currentPage=e,this.model.enableQueryString&&this._updateQueryString(this.model.currentPage)),this._prevPageNo!=this.model.currentPage&&(this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!0,event:t}))},goToNextPage:function(){0!=this.model.totalRecordsCount&&1<=this.model.currentPage&&this.model.currentPage<this.model.totalPages&&(this.model.currentPage=this.model.currentPage+1,this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1}))},goToLastPage:function(){0!=this.model.totalRecordsCount&&1<=this.model.currentPage&&this.model.currentPage<this.model.totalPages&&(this.model.currentPage=this.model.totalPages,this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1}))},goToFirstPage:function(){0!=this.model.totalRecordsCount&&1<this.model.currentPage&&(this.model.currentPage=1,this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1}))},goToPrevPage:function(){0!=this.model.totalRecordsCount&&1<this.model.currentPage&&(this.model.currentPage=this.model.currentPage-1,this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1}))},_updateQueryString:function(e){e=this._getUpdatedURL(window.location.href,"page",e);history.pushState?window.history.pushState({path:e},"",e):window.location.href=e},_getUpdatedURL:function(e,t,i){var s=new RegExp("([?|&])"+t+"=.*?(&|#|$)","i");if(e.match(s))return e.replace(s,"$1"+t+"="+i+"$2");var n="",s=-1!==e.indexOf("?")?"&":"?";return-1!==e.indexOf("#")&&(n=e.replace(/.*#/,"#"),e=e.replace(/#.*/,"")),e+s+t+"="+i+n},_getLocalizedLabels:function(e){return h.getLocalizedConstants(this.sfType,this.model.locale)},_fillScreen:function(){var e;0<!d(this._templateElement).find(".e-textbox-paging").length&&(e=this.element.find(".e-pagercontainer").outerWidth()-(this._$first.outerWidth(!0)+this._$last.outerWidth(!0)+this._$next.outerWidth(!0)+this._$prev.outerWidth(!0)),e-=!this._$NP||this._$NP.hasClass("e-disable")?0:this._$NP.outerWidth(!0),e-=!this._$PP||this._$PP.hasClass("e-disable")?0:this._$PP.outerWidth(!0),this.model.template?this.element.outerWidth()-d(this.element.find(".e-pagercontainer")).outerWidth()<40&&(Math.floor(e/this.element.find(".e-numericitem.e-spacing.e-default").outerWidth(!0))-1<1?this._flag?this.option("pageCount",1):this.model.pageCount=1:this._flag?this.option("pageCount",Math.floor(e/this.element.find(".e-numericitem.e-spacing.e-default").outerWidth(!0))-1):this.model.pageCount=Math.floor(e/this.element.find(".e-numericitem.e-spacing.e-default").outerWidth(!0))-1):this.element.outerWidth()-d(this.element.contents()[0]).outerWidth()<40&&(Math.floor(e/this.element.find(".e-numericcontainer .e-numericitem.e-spacing.e-default").outerWidth(!0))-1<1?this._flag?this.option("pageCount",1):this.model.pageCount=1:this._flag?this.option("pageCount",Math.floor(e/this.element.find(".e-numericcontainer .e-numericitem.e-spacing.e-default").outerWidth(!0))-1):this.model.pageCount=Math.floor(e/this.element.find(".e-numericcontainer .e-numericitem.e-spacing.e-default").outerWidth(!0))-1))},_enable:function(){this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.prop("disabled",!1),this.numTextbox&&this.numTextbox.removeAttr("disabled")},_disable:function(){this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.element.prop("disabled","disabled"),this.numTextbox&&this.numTextbox.attr("disabled","disabled"),this.$dropItem&&"none"!=this.$dropItem.css("display")&&this.$dropItem.hide(),this.model.template&&d(this._templateElement).addClass(".e-disable")},_setFirst:!0,_setModel:function(e){for(var t in e)switch(this._preval=this.model.currentPage,t){case"pageCount":this._renderNumericLinks(this.element.find(".e-numericcontainer")),this.model.isResponsive&&!this._flag&&(this._maxPageCount=this.model.pageCount,this._fillScreen()),this._flag=!1;break;case"template":this.element.children().remove(),this.renderPager();break;case"enableExternalMessage":e[t]?this._renderPagerMessage():this._removePagerMessage();break;case"showPageInfo":this._pageInfo();break;case"pageSizeMessage":null!=e[t]&&this._renderPageSizeMessage();break;case"pageSize":var i;this._pageSize=this.model.pageSize,this.model.pageSizeList&&0<this.model.pageSizeList.length&&((i=this).$textspan.text(this.model.pageSize),this.$dropItem.find(".e-active").removeClass("e-active"),d(".e-drpdwn.e-ul").find("li").each(function(){d(this).text()==i.model.pageSize&&d(this).addClass("e-active")}));break;case"pageSizeList":this.model.pageSizeList=e[t],0<e[t].length?(this._pageSize=this.model.pageSize,this.$dropItem?(this.$dropItem.empty(),this._renderItems()):this._renderDropdownlist()):this.$dropItem&&this._removeDropdownlist();break;case"enabled":e[t]?this._enable():this._disable();break;case"cssClass":this.element.removeClass(this._cssClass).addClass(e[t]),this._cssClass=this.model.cssClass;case"isResponsive":this._wireResizing(),e[t]?this.model.isResponsive&&!this._flag&&(this._maxPageCount=this.model.pageCount,this._fillScreen()):this.option("pageCount",this._maxPageCount),this._flag=!1;break;case"showGoToPage":e[t]?this._renderTextboxItem():this.numTextbox&&(this.numTextbox.remove(),this.numTextbox=null);break;case"locale":this._setLocale();break;case"currentPage":this.refreshPager(),this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1})}"currentPage"!=t&&(this.refreshPager(),this._preval!=this.model.currentPage&&this._trigger("change",{currentPage:this.model.currentPage,isInteraction:!1}))},_destroy:function(){this.element.empty().removeClass("e-pager"),this._unWireResizing()}}),h.Pager.Locale=h.Pager.Locale||{},h.Pager.Locale.default=h.Pager.Locale["en-US"]={pagerInfo:"{0} of {1} pages ({2} items)",firstPageTooltip:"Go to first page",lastPageTooltip:"Go to last page",nextPageTooltip:"Go to next page",previousPageTooltip:"Go to previous page",nextPagerTooltip:"Go to next pager",previousPagerTooltip:"Go to previous pager"}}(jQuery,Syncfusion),function(p,m,i){m.widget("ejDropDownList","ej.DropDownList",{element:null,model:null,validTags:["select","input"],_addToPersist:["value","text","selectedIndex","selectedItemIndex","selectedItems","selectedIndices","popupWidth","popupHeight","itemValue"],_setFirst:!1,_rootCSS:"e-dropdownlist",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{cssClass:"",value:null,htmlAttributes:{},text:null,itemValue:"",itemsCount:0,dataSource:null,delimiterChar:",",query:null,fields:{id:null,text:null,value:null,category:null,groupBy:null,imageUrl:null,imageAttributes:null,spriteCssClass:null,htmlAttributes:null,selected:null,tableName:null},locale:"en-US",watermarkText:null,height:"",loadOnDemand:!1,width:"",popupHeight:"152px",popupWidth:"auto",maxPopupHeight:null,minPopupHeight:"20",maxPopupWidth:null,minPopupWidth:"0",targetID:null,template:null,headerTemplate:null,selectedItemIndex:-1,selectedIndex:-1,disableItemsByIndex:null,enableItemsByIndex:null,selectedItems:[],selectedIndices:[],cascadeTo:null,enablePopupResize:!1,allowVirtualScrolling:!1,virtualScrollMode:"normal",showRoundedCorner:!1,showPopupOnLoad:!1,enableRTL:!1,enabled:!0,filterType:"contains",sortOrder:"ascending",caseSensitiveSearch:!1,showCheckbox:!1,checkAll:!1,uncheckAll:!1,enablePersistence:!1,enableFilterSearch:!1,enableServerFiltering:!1,enableIncrementalSearch:!0,incrementalSearchDelay:500,readOnly:!1,enableAnimation:!1,multiSelectMode:"none",allowGrouping:!1,enableSorting:!1,validationRules:null,validationMessage:null,actionBegin:null,actionComplete:null,actionFailure:null,actionSuccess:null,create:null,popupHide:null,popupShown:null,beforePopupShown:null,beforePopupHide:null,popupResizeStart:null,popupResize:null,popupResizeStop:null,change:null,select:null,dataBound:null,search:null,checkChange:null,cascade:null,destroy:null},dataTypes:{cssClass:"string",itemsCount:"number",watermarkText:"string",template:"string",disableItemsByIndex:"string",enableItemsByIndex:"string",enableIncrementalSearch:"boolean",incrementalSearchDelay:"number",cascadeTo:"string",delimiterChar:"string",showRoundedCorner:"boolean",showPopupOnLoad:"boolean",enableRTL:"boolean",enablePersistence:"boolean",allowVirtualScrolling:"boolean",virtualScrollMode:"enum",enabled:"boolean",readOnly:"boolean",multiSelectMode:"enum",dataSource:"data",query:"data",fields:"data",selectedItems:"array",selectedIndices:"array",enableAnimation:"boolean",allowGrouping:"boolean",enableSorting:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",locale:"string"},observables:["value","selectedItemIndex","selectedIndex","dataSource"],value:m.util.valueFunction("value"),selectedItemIndex:m.util.valueFunction("selectedItemIndex"),selectedIndex:m.util.valueFunction("selectedIndex"),_dataSource:m.util.valueFunction("dataSource"),enable:function(){this._visibleInput.hasClass("e-disable")&&(this.target.disabled=!1,this.model.enabled=!0,this.container.removeClass("e-disable"),this._visibleInput.removeClass("e-disable"),this.dropdownbutton.removeClass("e-disable"),m.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.removeClass("e-disable"),this._isIE8&&this.drpbtnspan.removeClass("e-disable"),this.container.on("mousedown",p.proxy(this._OnDropdownClick,this)),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable"),this.wrapper.attr("tabindex","0")),this._wireEvents()},disable:function(){this._visibleInput.hasClass("e-disable")||(this.target.disabled=!0,this.model.enabled=!1,this.container.addClass("e-disable"),this._visibleInput.addClass("e-disable"),m.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.addClass("e-disable"),this.dropdownbutton.addClass("e-disable"),this._isIE8&&this.drpbtnspan.addClass("e-disable"),"visualmode"==this.model.multiSelectMode&&this._ulBox.addClass("e-disable"),this.container.off("mousedown",p.proxy(this._OnDropdownClick,this)),this._unwireEvents(),this.wrapper.removeAttr("tabindex"),this._isPopupShown()&&this._hideResult())},getValue:function(){return this._visibleInput.val()},_setValue:function(e){m.isNullOrUndefined(e)||(this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this._raiseEvents=!1,m.isNullOrUndefined(this.model.text)||this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.model.allowVirtualScrolling&&this._addValue(e),this.selectItemByValue(e))},_addValue:function(e){var t,i,s,n;0<this.model.itemsCount&&""!=e&&(this._checkValue=!0,t="number"==typeof e?e:e.split(this.model.delimiterChar),m.isNullOrUndefined(this._mapFields())||this._mapFields(),this.mapFld._value,m.isNullOrUndefined(this._rawList)||this._addListItems(t,this._rawList,"local"),this._checkValue&&(i=this._dataSource(),m.DataManager&&i instanceof m.DataManager?i.dataSource.offline&&i.dataSource.json&&0<i.dataSource.json.length?this._addListItems(t,i.dataSource.json,"remote"):(s=this,n=e,i.executeQuery(m.Query()).done(function(e){s._addListItems(t,e.result,"remote"),s.selectItemByValue(n)})):this._addListItems(t,i,"remote")))},_addListItems:function(e,t,i){for(var s=0;s<e.length;s++)for(var n=0;n<t.length;n++)"local"==i&&t[n][this.mapFld._value]==e[s]&&(this._checkValue=!1),"remote"==i&&t[n][this.mapFld._value]==e[s]&&this.addItem(t[n])},_setText:function(e){m.isNullOrUndefined(e)||(this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this._raiseEvents=!1,this.unselectItemByText(this.model.text),this._raiseEvents=!0,this.selectItemByText(e))},_setItemValue:function(e){this.model.itemValue=e},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.text(e)},hidePopup:function(){if(!this.model.enabled)return!1;0<this.ultag.find("li").length&&this._hideResult()},showPopup:function(){if(!this.model.enabled)return!1;(m.isNullOrUndefined(this.ultag)?!!this.model.loadOnDemand:0<this.ultag.find("li").length)&&this._showResult()},clearText:function(){this._clearTextboxValue(),this._isWatermark||this._setWatermark()},addItem:function(e){if(this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),!this.model.enabled||!e)return!1;this._mapFields();var t=p.isArray(e)?e:[e];if(t.length<1)return!1;var i=this.mapFld,e={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null,_category:null};e._id=t[0][i._id]?i._id:"id",e._imageUrl=t[0][i._imageUrl]?i._imageUrl:"imageUrl",e._imageAttributes=t[0][i._imageAttributes]?i._imageAttributes:"imageAttributes",e._spriteCSS=t[0][i._spriteCSS]?i._spriteCSS:"spriteCssClass",e._text=t[0][i._text]?i._text:"text",e._value=t[0][i._value]?i._value:"value",e._htmlAttributes=t[0][i._htmlAttributes]?i._htmlAttributes:"htmlAttributes",e._selected=t[0][i._selected]?i._selected:"selected",e._category=t[0][i._category]?i._category:"groupBy",this._generateLi(t,e);for(var e=this.dummyUl,s=0;s<t.length;s++)this._listItem(t[s],"add");this.model.showCheckbox?this._appendCheckbox(e,!0):this._isSingleSelect()||this._multiItemSelection(e,!0),this._virtualUl.append(p(this.dummyUl).clone(!0)),this.ultag.append(this.dummyUl),this._isPopupShown()&&(e=this.scrollerObj?this.scrollerObj.scrollTop():0,this._refreshScroller(),this.scrollerObj&&this.scrollerObj.option("scrollTop",e))},_toArray:function(e,t){var i;return"function"==typeof e&&(e=m.util.getVal(e)),p.isArray(e)?i=e:"string"==typeof e?t&&("visualmode"==this.model.multiSelectMode||"delimiter"==this.model.multiSelectMode||this.model.showCheckbox)?0==(i=this._getUpdatedListData(e)).length&&(i=[e]):!t&&0!=(i=this._getUpdatedListData(e)).length||(i=[e]):i=[e],i},_trim:function(e){return"string"==typeof e?p.trim(e):e},selectItemByIndex:function(e){this._selectItemByIndex(e)},selectItemsByIndices:function(e){this._selectItemByIndex(e)},_selectItemByIndex:function(e){if(this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this.listitems=this._getLi(),this._selectedIndices=p.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,-1==parseInt(e)&&0<this.model.selectedItems.length)this._clearTextboxValue(),this._trigger("change",{text:this._visibleInput[0].value,selectedText:"",selectedValue:"",value:""});else for(var t,i=this._toArray(e,!0),s=0;s<i.length;s++)if(null!=(t=parseInt(i[s]))&&0<=t){if(-1==p.inArray(t,this._selectedIndices))for(var n=0;n<this.listitems.length;n++)p(this.listitems[n]).hasClass("e-disable")||n==t&&(this.selectedIndexValue=n,this._activeItem=t,this._enterTextBoxValue())}else!this.model.showCheckbox&&"none"==this.model.multiSelectMode&&0<this.model.selectedItems.length&&(this._clearTextboxValue(),this._trigger("change",{text:this._visibleInput[0].value,selectedText:"",selectedValue:"",value:""}))},unselectItemsByIndices:function(e){this._unselectItemByIndex(e)},unselectItemByIndex:function(e){this._unselectItemByIndex(e)},_unselectItemByIndex:function(e){this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this._selectedIndices=p.map(this._selectedIndices,function(e){return parseInt(e)}),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices;var t,i,s=this._toArray(e,!0);this.listitems=this._getLi();for(var n=0;n<s.length;n++)for(i=parseInt(s[n]),t=0;t<this.listitems.length;t++)t==i&&(this.selectedIndexValue=t,this._activeItem=i,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue())},setSelectedValue:function(e){this.selectItemByValue(e)},selectItemByValue:function(e){if(this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this.listitems=this._getLi(),this.inputSearch&&""!=this.inputSearch.val()&&this.model.enableServerFiltering&&!m.isNullOrUndefined(this._searchresult)){for(var t=this.model.fields&&this.model.fields.value?this.model.fields.value:"value",i=0;i<this._searchresult.length;i++)for(var s=0;s<this.listitems.length;s++)p(this.listitems[s]).attr("data-value")==this._searchresult[i][t]&&(this._searchresult=null);this.addItem(this._searchresult)}m.isNullOrUndefined(e)?this._clearTextboxValue():this._selectUnSelectValue(e,"selectValue")},_selectUnSelectValue:function(e,t,i){for(var s=this._toArray(e,!0),n=0;n<s.length;n++)for(var a,r=0;r<this.listitems.length;r++)if(p(this.listitems[r]).hasClass("e-disable")||"selectValue"!=t&&"selectText"!=t){if(this._getAttributeValue(this.listitems[r])&&("unselectValue"==t&&(this._selectedValue=this._getAttributeValue(this.listitems[r]),this._selectedValue=this._selectedValue==s[n]),"unselectText"==t&&(this.unselectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[r]:this._getField(this.popupListItems[r],this.mapFld._text),this._selectedValue=this.unselectedTextValue==s[n]||i&&this.unselectedTextValue.toString().toLowerCase()==s[n].toString().toLowerCase()),this._selectedValue)){this._activeItem=r,this._activeItem==this._aselectedItem&&(this._aselectedItem=null),this._removeTextBoxValue();break}}else if("selectValue"==t&&(a=m.isNullOrUndefined(this._getAttributeValue(this.listitems[r]))?p(this.listitems[r]).text():this._getAttributeValue(this.listitems[r]),this._selectedValue=a==s[n]),"selectText"==t&&(this.selectedTextValue=this._isPlainType(this.popupListItems)?this.popupListItems[r]:this._getField(this.popupListItems[r],this.mapFld._text),this._selectedValue=this.selectedTextValue==s[n]||i&&this.selectedTextValue.toString().toLowerCase()==s[n].toString().toLowerCase()),this._selectedValue){this._activeItem=r,this._aselectedItem=this._activeItem,this._enterTextBoxValue();break}},unselectItemByValue:function(e){this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this.listitems=this._getLi(),this._selectUnSelectValue(e,"unselectValue")},setSelectedText:function(e){this.selectItemByText(e)},selectItemByText:function(e,t){this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList(),this.listitems=this._getLi(),this._mapFields(),m.isNullOrUndefined(e)?this._clearTextboxValue():this._selectUnSelectValue(e,"selectText",t)},unselectItemByText:function(e,t){this.listitems=this._getLi(),this._mapFields(),this._selectUnSelectValue(e,"unselectText",t)},getSelectedValue:function(){return this.element.val()},getSelectedItem:function(){var e,t=[];for(this.listitems=this._getLi(),e=0;e<this._selectedIndices.length;e++)t.push(this.listitems[this._selectedIndices[e]]);return t},getItemDataByValue:function(e){var t,i,s=this._toArray(e,!1),n=m.isNullOrUndefined(this.resultList)?this._rawList:this._rawList.concat(this.resultList),a=[],r=this.model.fields&&this.model.fields.value?this.model.fields.value:"value";if(0<s.length&&(-1<n.indexOf(s[0])||-1<n.indexOf(Number(s[0]))))for(t=0;t<s.length&&(-1<n.indexOf(s[t])||-1<n.indexOf(Number(s[t])));t++)a.push({text:s[t],value:s[t]});else for(0<n.length&&m.isNullOrUndefined(n[0][r])&&(e=this.model.fields&&this.model.fields.text?this.model.fields.text:"text",m.isNullOrUndefined(n[0][e])||(r=e)),t=0;t<s.length;t++)for(i=0;i<n.length;i++)n[i][r]!=s[t]&&n[i][r]!=Number(s[t])||a.push(n[i]);return a},getListData:function(){return this._rawList},getSelectedItemsID:function(){return this._selectedItemsID},disableItemsByIndices:function(e){0<this._getLi().length&&this._disableItemByIndex(e)},disableItemByIndex:function(e){0<this._getLi().length&&this._disableItemByIndex(e,!0)},_disableItemByIndex:function(e,t){if(this._isInteralCall||(this._initDisabledItems=t?this._initDisabledItems.push(e):e),!this.model.enabled)return!1;this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();for(var i=this._toArray(e,!1),s=0;s<i.length;s++)null==i[s]||isNaN(parseInt(i[s]))||0<i.length&&!(-1<p.inArray(parseInt(i[s]),this._disabledItems))&&(p.inArray(i[s],this._disabledItems),this._setClass(this._getLi()[parseInt(i[s])],"e-disable"),this._disabledItems.push(parseInt(i[s])),this.model.disableItemsByIndex=String(this._disabledItems.join(",")));this._prevDisabledItems=this._disabledItems},enableItemsByIndices:function(e){this._enableItemByIndex(e)},enableItemByIndex:function(e){this._enableItemByIndex(e)},_enableItemByIndex:function(e){this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();var t,i=this._toArray(e,!1);this.model.enableItemsByIndex=e;for(var s=0;s<i.length;s++)0<i.length&&-1<p.inArray(parseInt(i[s]),this._disabledItems)&&!isNaN(parseInt(i[s]))&&(t=p.inArray(parseInt(i[s]),this._disabledItems),this._removeClass(this._getLi()[parseInt(i[s])],"e-disable"),this._disabledItems.splice(t,1));this.model.enableItemsByIndex=null,this.model.disableItemsByIndex=this._disabledItems.join(this.model.delimiterChar)},_validateDelimiter:function(e){if(1==this._trim(e).length)if(!/^[a-zA-Z0-9]+$/.test(e))return e;return","},_removeText:function(e){this.removeVal=!this.checkChange||!this.model.fields.text&&!this.model.fields.value;var t=this._getUpdatedListData(this.element[0].value,!0);this.removeVal=this.checkChange&&(this.model.fields.text||this.model.fields.value);var i=this._getUpdatedListData(this._visibleInput[0].value,!1),s=this.getItemDataByValue(e)[0],n=this.model.fields&&this.model.fields.text?this.model.fields.text:"text";0<=p.inArray(e,t)&&t.splice(p.inArray(e,t),1),!m.isNullOrUndefined(s[n])&&0<=p.inArray(this._decode(s[n]).toString(),i)&&i.splice(p.inArray(this._decode(s[n]).toString(),i),1),0<=p.inArray(e,this._valueContainer)&&this._valueContainer.splice(p.inArray(e,this._valueContainer),1),!m.isNullOrUndefined(s[n])&&0<=p.inArray(s[n].toString(),this._textContainer)&&this._textContainer.splice(p.inArray(s[n].toString(),this._textContainer),1),this.element[0].value=t.join(this.model.delimiterChar),this._visibleInput[0].value=i.join(this.model.delimiterChar),this.removeVal=!1},_getUpdatedListData:function(e,t){var i,s,n=t?e.split(this.model.delimiterChar):e,a=this.getListData(),r=0,o=0,l=[],d=[];for((this.model.fields.value||this.model.fields.text)&&(i=this.model.fields.text,this.removeVal||(i=this.model.fields.value||i));r<a.length;){if(s=i?this._decode(a[r][i]):this._decode(a[r].text||a[r]),-1!==n.indexOf(s))t?n[n.indexOf(s)]=o:n=n.replace(s,o),l.push(s),o++;else if(!t&&""===n)break;r++}for(t||(n=n.split(this.model.delimiterChar)),r=0;r<o;)t?d[n.indexOf(r)]=l[r]:d[n.indexOf(""+r)]=l[r],r++;return d},_addText:function(e){if(this._checkContains(this._hiddenValue))return!1;for(var t,i=["element","_visibleInput"],s=0;s<i.length;s++){t="element"==i[s]?this._hiddenValue:e;var n,a="element"==i[s]?this._valueContainer:this._textContainer;this[i[s]][0].value&&""!=this[i[s]][0].value?(n=this[i[s]][0].value.split(this.model.delimiterChar),("element"==i[s]&&-1===p.inArray(t,n)||"_visibleInput"==i[s])&&n.push(t),this[i[s]][0].value=n.join(this.model.delimiterChar)):""==t?this[i[s]][0].value=t:""!=t&&""==this[i[s]][0].value&&(-1!=p.inArray("",a)?((n=this[i[s]][0].value.split(this.model.delimiterChar)).push(t),this[i[s]][0].value=n.join(this.model.delimiterChar)):this[i[s]][0].value=t),a.push(t)}},_checkContains:function(e){if(this.contains=!1,this._rawList!==i&&(null!==this.model.dataSource||this.selectOptions!==i||null!==this.model.targetID))for(var t=0;t<this._valueContainer.length;t++)if(this._parseValue(this._valueContainer[t])===this._parseValue(e)){this.contains=!0;break}return this.contains},_parseValue:function(e){return isNaN(parseInt(e))||this.mapFld&&"string"==typeof this._rawList[0][this.mapFld._value]?e:parseInt(e)},_updateLocalConstant:function(){this._localizedLabels=m.getLocalizedConstants("ej.DropDownList",this.model.locale)},_init:function(){var e=m.browserInfo();this._updateLocalConstant(),this._isIE8="msie"==e.name&&"8.0"==e.version,this._textContent=this._isIE8?"innerText":"textContent",(this.element.is("input")&&(this.element.is("input[type=text]")||!this.element.attr("type"))||this.element.is("select"))&&(this._isWatermark="placeholder"in p(document.createElement("input")).attr("placeholder","")[0],this._id=this.element[0].id,this._initialize(),this._render(),this._addAttr(this.model.htmlAttributes),this._enabled(this.model.enabled),this._initValue=!1,this._checkboxValue=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation()))},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){if(0!=this.element.closest("form").length){this.element.rules("add",this.model.validationRules);var e,t=(t=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),i=this.element.attr("name");for(e in t.settings.messages[i]={},this.model.validationRules){var s=null;if(!m.isNullOrUndefined(this.model.validationRules[e])){if(m.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[e]))for(var n in t.settings.messages[i][e]=p.validator.messages[e],this.model.validationMessage)e==n&&(s=this.model.validationMessage[e]);else s=this.model.validationRules.messages[e];t.settings.messages[i][e]=null!=s?s:p.validator.messages[e]}}}},_setInitialPopup:function(e){this.model.enabled&&!this.model.readOnly&&(0==e?this._hideResult():this._showResult())},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),m.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.removeClass(this.model.cssClass).addClass(e)},_setRTL:function(e){this.model.enableRTL!=e&&(this.model.enableRTL=e,this._RightToLeft(),m.isNullOrUndefined(this.popupListWrapper)||this._dropbtnRTL())},_changeHeight:function(e){this.wrapper.height(e),this._setListHeight()},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setModel:function(e){for(var t in e)switch(t){case"dataSource":this._isEqualDataSource(m.util.getVal(e[t]))||this._checkModelDataBinding(m.util.getVal(e[t]),this.model.query),this._refreshScroller();break;case"query":this._checkModelDataBinding(this._dataSource(),e[t]);break;case"fields":this.model.fields=p.extend(this.model.fields,e[t]),this._checkModelDataBinding(this._dataSource(),this.model.query);break;case"itemsCount":this.model.itemsCount=e[t],this._checkModelDataBinding(this._dataSource(),this.model.query);break;case"template":this.model.template=e[t],this._checkModelDataBinding(this._dataSource(),this.model.query);break;case"value":var i=m.util.getVal(e[t]);!m.isNullOrUndefined(i)&&""!==i||this._clearTextboxValue(),m.isNullOrUndefined(i)||""===i?this._clearTextboxValue():(this._setValue(m.util.getVal(e[t])),e[t]=this.model.value);break;case"incrementalSearchDelay":this.model.incrementalSearchDelay=e[t];break;case"delimiterChar":i=this.model.delimiterChar;e[t]=this._validateDelimiter(e[t]),this.model.delimiterChar=e[t],this._isSingleSelect()||(this.model.text&&(this.model.text=this.model.text.split(i).join(this.model.delimiterChar),this._visibleInput.val(this.model.text)),m.isNullOrUndefined(this.value())||(this.value(this.value().split(i).join(this.model.delimiterChar)),this.element.val(this.value())));break;case"text":m.isNullOrUndefined(e[t])||""===e[t]?this._clearTextboxValue():(this._setText(e[t]),e[t]=this.model.text);break;case"itemValue":this._setItemValue(e[t]);break;case"enableRTL":this._setRTL(e[t]);break;case"enabled":this._enabled(e[t]);break;case"height":this._changeHeight(e[t]);break;case"width":this._changeWidth(e[t]);break;case"popupHeight":this.model.popupHeight=e[t],this._setListHeight(e[t]);break;case"popupWidth":this.model.popupWidth=e[t],this._setListWidth();break;case"minPopupHeight":this.model.minPopupHeight=e[t],this._setListHeight(e[t]);break;case"minPopupWidth":this.model.minPopupWidth=e[t],this._setListWidth();break;case"maxPopupHeight":this.model.maxPopupHeight=e[t],this._setListHeight(e[t]);break;case"maxPopupWidth":this.model.maxPopupWidth=e[t],this._setListWidth();break;case"cssClass":this._changeSkin(e[t]);break;case"showCheckbox":this.model.showCheckbox=e[t];var s=this.model.text,n=this.model.text&&this.model.text.split(this.model.delimiterChar);this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this._checkboxHideShow(e[t]),this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(s)):n&&n.length&&this._setText(n[0]),this._isPopupShown()&&this._setListPosition();break;case"checkAll":return this._setCheckAll(e[t]),!1;case"uncheckAll":return this._setUncheckAll(e[t]),!1;case"watermarkText":this._changeWatermark(e[t]);break;case"validationRules":0!=this.element.closest("form").length&&(null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation()));break;case"locale":this.model.locale=e[t],this._updateLocalConstant();break;case"validationMessage":0!=this.element.closest("form").length&&(this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation()));break;case"showRoundedCorner":this._roundedCorner(e[t]),this.model.showRoundedCorner=e[t];break;case"showPopupOnLoad":this._setInitialPopup(e[t]);break;case"targetID":this.model.targetID=e[t],this._showFullList();break;case"selectedItemIndex":case"selectedIndex":this._selectItemByIndex(e[t]),this.model.selectedItemIndex=this.model.selectedIndex=e[t];break;case"unselectItemByIndex":this._unselectItemByIndex(e[t]);break;case"disableItemsByIndex":this._disableItemByIndex(e[t]);break;case"enableItemsByIndex":this._enableItemByIndex(e[t]);break;case"selectedItems":case"selectedIndices":this._selectCheckedItem(e[t]),e[t]=this.model.selectedItems=this.model.selectedIndices=this._selectedIndices;break;case"multiSelectMode":"visualmode"==this.model.multiSelectMode&&(this._swapUlandInput(!1),this._ulBox.remove(),this._ulBox=null),this.model.multiSelectMode=e[t];s=this.model.text,n=this.model.text&&this.model.text.split(this.model.delimiterChar);this._raiseEvents=!1,this._clearTextboxValue(),this._raiseEvents=!0,this.model.showCheckbox||"none"!=this.model.multiSelectMode?("visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),this._setText(s)):(this._setText(n[0]),this.wrapper.find("input[name="+this._name+"]").remove()),this._isPopupShown()&&this._setListPosition();break;case"allowGrouping":this._setGroupingAndSorting("allowGrouping",e[t]);break;case"enableSorting":this._setGroupingAndSorting("enableSorting",e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"enablePopupResize":this.model.enablePopupResize=e[t],e[t]?this._enablePopupResize():this.popupListWrapper.removeClass("e-resizable").find(".e-resizebar").remove()&&this._hideResult();break;case"enableFilterSearch":if(e[t]){this.model.enableFilterSearch=!0,this._enableSearch();break}this._removeSearch();case"enableServerFiltering":this._enableSearch()}},_clearTextboxValue:function(){this.element.val(""),this._visibleInput.val(""),this._updateValue(""),this._valueContainer=[],this._textContainer=[],this.selectedTextValue=this._selectedValue=this._hiddenValue=this.model.itemValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this._selectedIndices=[],this.model.selectedItems=[],this.model.selectedIndices=[],this.selectedIndex(null),m.isNullOrUndefined(this.ultag)||(this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.model.showCheckbox&&this._resetCheck()),0!=this.wrapper.find("ul.e-ul.e-boxes").length&&(this._ulBox.children("li").remove(),(""===this._name?this.wrapper.find("input:hidden[id^='#']"):this.wrapper.find("input:hidden[id^='#'][name="+this._name+"]")).remove(),p(this.element).attr("name",this._name))},_destroy:function(){this.selectOptions?((!this._dataSource()&&this.docbdy?this.docbdy.append(this.selectOptions.removeClass("e-dropdownlist e-js").show()):this.selectOptions.insertAfter(this.wrapper).removeClass("e-dropdownlist e-js")).show(),this.element.remove()):(this.element.insertAfter(this.wrapper),this.element.width(this.element.width()+this.dropdownbutton.outerWidth()),this._visibleInput.removeClass("e-input "),this._setAttr(this.element[0],{accesskey:this.wrapper.attr("accesskey"),type:"text"}),this._isWatermark&&this._visibleInput.removeAttr("placeholder"),this.element[0].value="",this.element.removeAttr("aria-expanded aria-autocomplete aria-haspopup aria-owns accesskey role").css({width:"",display:"block"}),!this._dataSource()&&this.docbdy&&this.ultag.find("li").removeClass("e-active")&&this.docbdy.append(this.ultag.html()).show()),this.wrapper.remove(),this.container.off("mousedown",p.proxy(this._OnDropdownClick,this)),this._hideResult(),this.popupPanelWrapper.remove(),this._unwireEvents()},_finalize:function(){""==this.value()&&""!==this._visibleInput[0].value&&this._updateValue(this.element[0].value),(m.isNullOrUndefined(this.value())||""!=this.value())&&this.value()===this.element.val()||this._setValue(this.value()),(m.isNullOrUndefined(this.model.text)||""!=this.model.text)&&this.model.text==this._visibleInput.val()||this._setText(this.model.text),this.selectedIndex(-1!=this.selectedIndex()?this.selectedIndex():this.selectedItemIndex()),-1!=this.selectedIndex()?this._selectItemByIndex(this.selectedIndex()):0<this._selectedIndices.length&&this._selectCheckedItem(this._selectedIndices),null!=this.model.disableItemsByIndex&&this._disableItemByIndex(this.model.disableItemsByIndex),null!=this.model.enableItemsByIndex&&this._enableItemByIndex(this.model.enableItemsByIndex)},_initialize:function(){this._selectedIndices=0<this.model.selectedIndices.length?this.model.selectedIndices:this.model.selectedItems,this.model.selectedItems=this.model.selectedIndices=this._selectedIndices,this.model.selectedIndex=-1!=this.model.selectedIndex?this.model.selectedIndex:this.model.selectedItemIndex,this.element.is("select")&&(this.selectelement=!0,this._renderSelectToDropdown()),this._initDisabledItems=[],this._isInteralCall=!1,this._prevSearchValue="",this._selectedItemsID=[],this._hiddenInputElement=[],this._valueContainer=[],this._textContainer=[],this.target=this.element[0],this._disabledItems=new Array,this._queryString=null,this.suggLen=0,this._itemId=null,this.checkedStatus=!1,this._incqueryString="",this._activeItem=null,this.ddWidth=0,this._initValue=!0,this._virtualCount=0,this._raiseEvents=!0,this.popUpShow=!1,this._matchedListItems=[],this._prevQueryString=""},_renderSelectToDropdown:function(){var e,t,i,s;if(this.inputElement=m.buildTag("input.e-dropdownlist#"+this._id+"_input","",{},{type:"text","data-role":"none"}),this.inputElement.insertAfter(this.element),this.element.attr("name")&&(this.inputElement.attr("name",this.element.attr("name")),this.element.removeAttr("name")),this.selectOptions=this.element,this.selectOptions.attr("id",this._id),null==this._dataSource()){for(this.optionDiv=m.buildTag("div#"+this._id+"_list"),this.optionDiv.insertAfter(this.inputElement),this.optionUl=m.buildTag("ul"),this.optionDiv.append(this.optionUl),this.selectOptionItems=this.element.children("option"),t=this.selectOptionItems.length,this.optionDummyUl=p(),e=0;e<t;e++)s=this.selectOptionItems[e],null!=(i=p(s).attr("label")?p(s).attr("label"):s.innerHTML)&&(this.optionLi=m.buildTag("li",i,{},{"data-value":s.value,unselectable:"on"}),this.optionDummyUl.push(this.optionLi[0]),p(s).attr("selected")&&this.model.showCheckbox&&(-1==p.inArray(e,this._selectedIndices)?(this._selectedIndices.push(e),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices):m.isNullOrUndefined(this.selectedIndex())&&this.selectedIndex(e)));this.optionUl.append(this.optionDummyUl)}this.element.css("display","none"),this.element=this.inputElement},_render:function(){this._renderDropdown(),this._setWatermark(),this.model.loadOnDemand&&(!this._dataSource()||0!==this._dataSource().length&&this._dataSource().length<1)&&(e=this.element.parents().last(),this.docbdy=this.model.targetID?e.find("#"+this.model.targetID):this.optionDiv||null,this.itemsContainer="UL"==this.docbdy[0].nodeName?this.docbdy:this.docbdy.children("ol,ul"),this.itemsContainer.css("display","none")),this.model.loadOnDemand||(this._renderPopupPanelWrapper(),this._showFullList()),this._roundedCorner(this.model.showRoundedCorner);var e=this._dataSource();m.DataManager&&e instanceof m.DataManager?e.dataSource.offline&&e.dataSource.json&&0<e.dataSource.json.length&&this._finalize():this._finalize(),m.DataManager&&this._dataSource()instanceof m.DataManager||this._finalize(),this.model.loadOnDemand&&m.DataManager&&this._dataSource()instanceof m.DataManager&&!this._dataSource().dataSource.offline&&this._finalize(),this._setCheckAll(this.model.checkAll),(this.element.attr("disabled")||p(this.selectOptions).attr("disabled"))&&this.disable(),this.model.loadOnDemand&&this.model.showPopupOnLoad&&this._showResult()},_isEqualDataSource:function(e){if(!this._dataSource()||!e||this._rawList&&this._rawList.length!==e.length||m.DataManager&&e instanceof m.DataManager)return!1;if(m.isNullOrUndefined(this._rawList)||0===this._dataSource().length)return!1;for(var t=!0,i=0,s=this._dataSource().length;i<s;i++)if(this._dataSource()[i]!==e[i]){t=!1;break}return t},_checkModelDataBinding:function(e,t){this.element.val(""),this._visibleInput.val(""),null!==this.value()&&""!==this.value()&&this._updateValue(""),this.selectedTextValue=this._selectedValue=this._hiddenValue="",this._updateText(),this.selectedIndexValue=this._hiddenDelimiterIndex=this._activeItem=-1,this._selectedItemsID=[],this._textContainer=[],this._valueContainer=[],m.isNullOrUndefined(e)&&m.isNullOrUndefined(this.model.query)&&m.isNullOrUndefined(this.model.template)&&0==this.model.itemsCount&&(this._rawList=[],this.popupListItems=[],this.listitems=[],this.ultag=this.popupListWrapper.find(".e-ul")),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices=[],this.model.selectedIndex=this.model.selectedItemIndex=-1,"visualmode"==this.model.multiSelectMode&&this._destroyBoxModel(),JSON.stringify(this._dataSource())!=JSON.stringify(e)&&this._dataSource(e),this.model.query=t,m.isNullOrUndefined(this.ultag)||this.ultag.empty(),this._showFullList()},_initDataSource:function(e){var t=this;m.DataManager&&e instanceof m.DataManager&&(t._addLoadingClass(),t._trigger("actionBegin",{requestFrom:"default"})||e.executeQuery(this._getQuery()).done(function(e){t._trigger("actionSuccess",{e:e,requestFrom:"default"}),t._totalCount=e.count,t._listItem(e.result),t._removeLoadingClass(),t._renderPopupList(),t._finalize()}).fail(function(e){t._dataSource(null),t._addLoadingClass(),t._trigger("actionFailure",{e:e,requestFrom:"default"})}).always(function(e){t._trigger("actionComplete",{e:e,requestFrom:"default"})}))},_listItem:function(e,t){"add"==t?(this.popupListItems.push(e),this._rawList.push(e)):p.isArray(e)&&(this.popupListItems=e.slice(0),this._rawList=e.slice(0))},_getQuery:function(e){var t=this.model.fields,i=m.Query();if(!m.isNullOrUndefined(this.model.query)||this.model.template||e)this.model.query&&(i=this.model.query.clone());else{var s,n=[];for(s in t)"tableName"!==s&&t[s]&&n.push(t[s]);0<n.length&&i.select(n)}return this.model.allowVirtualScrolling&&i.requiresCount(),0<this.model.itemsCount&&i.take(this.model.itemsCount),e=this._dataSource().dataSource,t&&(e&&e.url&&!e.url.match(t.tableName+"$")||e&&!e.url||!e)&&(m.isNullOrUndefined(t.tableName)||i.from(t.tableName)),i},_addLoadingClass:function(){this._isPopupShown()?this.popupListWrapper.addClass("e-load"):(this.dropdownbutton.addClass("e-load"),this.drpbtnspan.removeClass("e-icon e-arrow-sans-down")),this._readOnly=!0},_removeLoadingClass:function(){this.dropdownbutton.removeClass("e-load"),this.drpbtnspan.addClass("e-icon e-arrow-sans-down"),this._readOnly=!1,m.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.removeClass("e-load")},_renderDropdown:function(){var e;this.wrapper=m.buildTag("span.e-ddl e-widget "+this.model.cssClass+"#"+this._id+"_wrapper","",{},{tabindex:"0",accesskey:this.element.attr("accesskey")}),this.container=m.buildTag("span.e-in-wrap e-box #"+this._id+"_container"),this.element.removeAttr("accesskey"),null==this.model.value&&null!=this.element.attr("value")&&(this.model.value=this.element.attr("value")),this.element.attr("value","").val(""),(this._isIE8?this._setAttr(this.element[0],{role:"combobox","aria-expanded":!1,"aria-autocomplete":"list","aria-haspopup":!0,"aria-owns":this._id+"_popup"}):this._setAttr(this.element[0],{type:"hidden",role:"combobox","aria-expanded":!1,"aria-autocomplete":"list","aria-haspopup":!0,"aria-owns":this._id+"_popup"})).element.hide(),this.drpbtnspan=m.buildTag("span.e-icon e-arrow-sans-down","",{},{"aria-label":"select",unselectable:"on"}),this.dropdownbutton=m.buildTag("span.e-select#"+this._id+"_dropdown","",{},{role:"button",unselectable:"on"}).append(this.drpbtnspan),this.container.insertAfter(this.element),this.container.append(this.element),this.container.append(this.dropdownbutton),this.wrapper.insertBefore(this.container),this.wrapper.append(this.container),this.selectelement&&this.selectOptions.insertBefore(this.element),this._visibleInput=m.buildTag("input#"+this._id+"_hidden","",{}).insertAfter(this.element),this._visibleInput.addClass("e-input "),this._setAttr(this._visibleInput[0],{readonly:"readonly",tabindex:-1,"data-role":"none"}),this._isWatermark||(e=(null!=this.model.watermarkText?this.model:this._localizedLabels).watermarkText,this._hiddenSpan=m.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(e),this._hiddenSpan.css("display","none"),this._hiddenSpan.on("mousedown",p.proxy(this._OnDropdownClick,this))),this._checkNameAttr(),this._setDimentions(),this._RightToLeft(),this.ddWidth=0<this.dropdownbutton.outerWidth()?this.dropdownbutton.outerWidth():24,this.container.on("mousedown",p.proxy(this._OnDropdownClick,this))},_checkNameAttr:function(){this._name=m.isNullOrUndefined(this.element.attr("name"))?this._id:this.element.attr("name"),this.element.attr("name",this._name)},_addAttr:function(e){var s=this;p.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"disabled"==i&&"disabled"==e?s.disable():"readOnly"==i&&"readOnly"==e?s.model.readOnly=!0:("style"==i?s.wrapper:"name"==i?p(s.element):m.isValidAttr(s._visibleInput[0],t)?p(s._visibleInput):s.wrapper).attr(t,e)})},_renderBoxModel:function(){if(!m.isNullOrUndefined(this._ulBox)||"visualmode"!=this.model.multiSelectMode)return!1;this._ulBox=m.buildTag("ul.e-ul e-boxes"),this.container.prepend(this._ulBox),this._ulBox.css("min-height","30px"),this._ulBox.css("display","none"),this._on(this.container,"click",function(e){if(!this.model.enabled)return!1;var t=p(e.target);t.hasClass("e-options")&&(!e.ctrlKey&&t.siblings().hasClass("e-active")&&this._removeActive(),t.hasClass("e-active")?t.removeClass("e-active"):t.addClass("e-active")),!e.ctrlKey&&t.hasClass("e-boxes")&&this._removeActive()})},_renderPopupPanelWrapper:function(){var e=p("#"+this.element[0].id+"_popup_wrapper").get(0);e&&p(e).remove(),this.popupPanelWrapper=m.buildTag("div#"+this._id+"_popup_wrapper"),p("body").append(this.popupPanelWrapper),this.popupListWrapper=m.buildTag("div.e-ddl-popup e-box e-widget  e-popup#"+this._id+"_popup_list_wrapper","",{display:"none",overflow:"hidden"}),this.popupList=m.buildTag("div#"+this._id+"_popup",{tabIndex:0}),this.popupListWrapper.addClass(this.model.cssClass),this.popup=this.popupList,this.popupScroller=m.buildTag("div"),m.isNullOrUndefined(this.ultag)&&(this.ultag=m.buildTag("ul.e-ul","",{},{role:"listbox"})),this.popupScroller.append(this.ultag),this.popupList.append(this.popupScroller),this.model.headerTemplate&&(this.headerTemplate=p("<div>").append(this.model.headerTemplate),this.popupListWrapper.append(this.headerTemplate)),this.popupListWrapper.append(this.popupList),this.popupPanelWrapper.append(this.popupListWrapper),this.ultag.on({mouseenter:p.proxy(this._OnMouseEnter,this),mouseleave:p.proxy(this._OnMouseLeave,this),click:p.proxy(this._OnMouseClick,this)},"li:not('.e-category')"),m.isTouchDevice()&&this.ultag.on({tap:p.proxy(this._OnMouseEnter,this)},"li:not('.e-category')"),p(window).on("resize",p.proxy(this._OnWindowResize,this))},_updateText:function(){var e=this._visibleInput.val();this.model.text=""==e?0==this._textContainer.length?null:"":e},_updateValue:function(e){this.value(""==e?0==this._valueContainer.length?null:"":e)},_setGroupingAndSorting:function(e,t){this.model[e]=t;t=this.model.text;if(this._updateValue(""),this._selectedIndices=[],this.ultag.empty(),this._showFullList(),this.model.showCheckbox&&t)for(var i=t.split(this.model.delimiterChar),s=0;s<i.length;s++)this.selectItemByText(i[s]);else this.selectItemByText(t)},_setSortingList:function(){var e,t,i=document.createElement("ul");if(p(i).append(this.itemsContainer.children()),this.model.allowGrouping||0<p(i).find(">.e-category").length)for(this.popupListWrapper.addClass("e-atc-popup"),e=0;e<p(i).find(">.e-category").length;e++)t=p(i).find(">.e-category").eq(0).first().nextUntil(".e-category").get(),this._setSortList(i,t);else p(i).children(">.e-category").remove(),t=p(i).children("li").get(),this._setSortList(i,t);this.itemsContainer=p(i)},_setSortList:function(i,e){e.sort(function(e,t){e=p(e).text().toUpperCase(),t=p(t).text().toUpperCase();return e<t?-1:t<e?1:0}),"descending"==this.model.sortOrder&&e.reverse(),(this.model.allowGrouping||0<p(i).find(">.e-category").length)&&(p(i).append(p("<li>").text(p(i).find(">.e-category").eq(0).text()).addClass("e-category")),p(i).find(">.e-category").eq(0).remove()),p.each(e,function(e,t){p(i).append(t)})},_renderPopupList:function(){this._doDataBind(),this.model.loadOnDemand&&m.DataManager&&this._dataSource()instanceof m.DataManager&&!this._dataSource().dataSource.offline&&this.model.showCheckbox&&this._checkboxHideShow(this.model.showCheckbox),!m.isNullOrUndefined(this.scrollerObj)&&null!=this._ulBox||this._renderRemaining(),this.model.loadOnDemand&&this.popUpShow&&m.DataManager&&this._dataSource()instanceof m.DataManager&&!this._dataSource().dataSource.offline&&(this._refreshPopup(),this._refreshScroller())},_renderRemaining:function(){var t=this;m.isNullOrUndefined(this.popupListWrapper)||this._dropbtnRTL(),this.model.enableFilterSearch&&this._enableSearch(),this.model.enablePopupResize&&this._enablePopupResize(),this.model.allowVirtualScrolling&&"normal"==this.model.virtualScrollMode&&this._totalCount&&0<this._totalCount&&(this._totalHeight=29*this._totalCount,this._totalPages=this._totalCount/(29*this.model.itemsCount),this._loadedItemHeight=29*this._getLi().length,this._getLi().attr("page",0),this._virtualPages=[0],this.ultag.append(p("<span>").addClass("e-virtual").css({height:this._totalHeight-this._loadedItemHeight,display:"block"}))),this._virtualUl=this.ultag.clone(!0),m.isNullOrUndefined(this.popupListWrapper)||(this._setListWidth(),this._setListHeight()),this._isSingleSelect()||(this.model.showCheckbox?this._checkboxHideShow(this.model.showCheckbox):this._multiItemSelection(this._getLi())),this._setUncheckAll(this.model.uncheckAll),m.isNullOrUndefined(this.popupListWrapper)||(this.popupScroller.css({height:"",width:""}),this.popupList.ejScroller({height:this._getPopupHeight(),width:0,scrollerSize:20,scroll:function(e){t.model.allowVirtualScrolling&&t._onScroll(e)},preventDefault:!0}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.find("div.e-scrollbar div").attr("unselectable","on"),this._setListPosition(),this.popUpShow||this.popupListWrapper.css({display:"none",visibility:"visible"}),this._changeSkin(this.model.cssClass)),this.model.loadOnDemand||this.model.showPopupOnLoad&&this._showResult()},_enableSearch:function(){var e;this.model.enableFilterSearch&&(m.isNullOrUndefined(this.popupListWrapper)||this.inputSearch||(this.inputSearch=m.buildTag("input#"+this._id+"_inputSearch.e-input","",{},{type:"text","data-role":"none"}),this.popupListWrapper.prepend(p("<span>").addClass("e-atc e-search").append(p("<span>").addClass("e-in-wrap ").append(this.inputSearch).append(p("<span>").addClass(" e-icon e-search")))),e=this.model.enableServerFiltering?this._debounce(this._OnSearchEnter,200):this._OnSearchEnter,this._on(this.inputSearch,"keyup",e)._on(this.inputSearch,"keydown",function(e){9==(e.keyCode||e.which)&&(e.preventDefault(),this.wrapper.focus(),this._hideResult())})))},_removeSearch:function(){this.model.enableFilterSearch=!1,this.popupListWrapper.find(".e-atc.e-search").remove(),this._isPopupShown()&&this.hidePopup(),this.inputSearch=null},_OnSearchEnter:function(e){var t;""!=this._prevSearchValue&&this._prevSearchValue==this.inputSearch.val()||(this._prevSearchValue=this.inputSearch.val(),8==e.keyCode&&this.model.enableFilterSearch&&(this._disabledItems=this._initDisabledItems,this._prevDisabledItems=this._disabledItems),-1!=p.inArray(e.keyCode,[38,40,13])&&this.ultag.find("li.e-nosuggestion").length<=0?13==e.keyCode?this._OnKeyUp(e):this._OnKeyDown(e):(this._activeItem=-1,this._queryString=this.inputSearch.val(),""==this._queryString&&this._virtualUl?(t={searchString:this._queryString,searchQuery:null,items:this._rawList},this._trigger("search",t),this._resetList(),this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition(),this._prevDisabledItems&&0<this._prevDisabledItems.length&&(this._disabledItems=[],this._isInteralCall=!0,this.disableItemsByIndices(this._prevDisabledItems),this._isInteralCall=!1,this._prevDisabledItems=this._disabledItems)):(this._mapFields(),e=this._addSearchQuery(m.Query(),!this._isPlainType(this._rawList)),t={searchString:this._queryString,items:this._rawList,searchQuery:e},this.popupListWrapper.find(".e-atc.e-search .e-search").addClass("e-cross-circle").removeClass("e-search"),this._on(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch),this._trigger("search",t)||this._onActionComplete(t))))},_debounce:function(t,i){var s,n=this;return function(){var e=arguments;clearTimeout(s),s=setTimeout(function(){return s=null,t.apply(n,e)},i)}},_onActionComplete:function(t){var i=this;this._queryString=this.inputSearch.val();var e=this._addSearchQuery(m.Query(),!this._isPlainType(this._rawList)),t={searchString:this._queryString,items:this._rawList,searchQuery:e};m.DataManager&&this._dataSource()instanceof m.DataManager&&this.model.enableServerFiltering&&("Caret"==window.getSelection().type||"msie"==m.browserInfo().name)?(e=t.searchQuery.clone(),i._dataSource().executeQuery(e).done(function(e){i._filterSearch(t.searchQuery,e)})):i._filterSearch(e,t)},_refreshSearch:function(){this._resetSearch(),this._refreshPopup(),0<this._initDisabledItems.length&&(this._disabledItems=[],this.disableItemsByIndices(this._initDisabledItems),this._prevDisabledItems=this._disabledItems)},_filterSearch:function(e,t){var i=!1;this.resultList=t.result||m.DataManager(this._rawList).executeLocal(e),0==this.resultList.length&&(i=!0,this.resultList.push(this._getLocalizedLabels("emptyResultText")));var s=[];this._initDisabledItems.forEach(function(t){this._rawList.forEach(function(e){this._rawList.indexOf(e)==t&&s.push(e)},this)},this);var n=[];0<s.length&&this.resultList.forEach(function(e){0<=s.indexOf(e)&&n.push(this.resultList.indexOf(e))},this),this.popupListItems=this.resultList,this.ultag.empty(),this._valueContainer=[],this._isPlainType(this.popupListItems)?this._plainArrayTypeBinding(this.resultList):this._objectArrayTypeBinding(this.resultList,"search"),i&&1==this.ultag.find("li").length&&this.ultag.find("li").eq(0).addClass("e-nosuggestion"),this.model.showCheckbox&&!i&&this._appendCheckbox(this._getLi()),this._onSearch=!0;e=this.value(),i=this._visibleInput[0].value;this._setValue(this.value()),("function"==typeof this.model.value?this.model.value():this.model.value)!=e&&(this.element[0].value=e,this._visibleInput[0].value=i,this.model.text=""==i?null:i,this.value()==e||null==this.value()&&""==e||this._updateValue(e)),this._onSearch=!1,this._updateSelectedIndexByValue(this.value()),this._refreshScroller(),this._setListPosition(),this._prevDisabledItems=this._disabledItems,this._disabledItems=[],0<n.length&&(this._isInteralCall=!0,this.disableItemsByIndices(n),this._isInteralCall=!1)},_updateSelectedIndexByValue:function(e){if(e&&this.model.enableFilterSearch){this._selectedIndices=this.model.selectedItems=this.model.selectedIndices=[],this._virtualList=this._virtualUl.children("li:not('.e-category')");for(var t=this._toArray(e),i=0;i<t.length;i++)for(var s=0;s<this._virtualList.length;s++)if(t[i]==this._getIndexedValue(this._virtualList[s])){this._selectedIndices.push(s);break}this.model.selectedItems=this.model.selectedIndices=this._selectedIndices}},_getIndexedValue:function(e){return this._getAttributeValue(e)?this._getAttributeValue(e):e.innerText},_resetSearch:function(){this.inputSearch&&this.model&&this.model.enableFilterSearch&&""!=this.inputSearch.val()&&this._virtualUl&&(this.inputSearch.val(""),this._resetList())},_resetList:function(){if(1==this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").length&&(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle").addClass("e-search").removeClass("e-cross-circle"),this._off(this.popupListWrapper.find(".e-atc.e-search .e-cross-circle"),"mousedown",this._refreshSearch)),this.model.enableServerFiltering){for(var e=this.model.fields&&this.model.fields.value?this.model.fields.value:"value",t=0;t<this._rawList.length;t++)this._rawList[t][e]==this._selectedValue&&(this._searchresult=null);m.isNullOrUndefined(this._searchresult)||this.model.allowVirtualScrolling&&"normal"==this.model.virtualScrollMode||this.addItem(this._searchresult)}var i;this._listItem(this._rawList),this.model.enableSorting&&(i=m.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0),this._rawList=m.DataManager(this._rawList).executeLocal(i),this.popupListItems=this._rawList),this.ultag.empty().append(this._virtualUl.children().clone(!0)),this._onSearch=!0,this._setValue(this.value()),this._onSearch=!1,this._searchresult=[]},_addSearchQuery:function(e,t){var i="";return t&&(i=(t=this.model.fields)&&t.text?t.text:"text"),this._queryString&&e.where(i,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch),0<this.model.itemsCount&&e.take(this.model.itemsCount),e},_targetElementBinding:function(){var e=this.element.parents().last();if(this.docbdy=this.model.targetID?e.find("#"+this.model.targetID):this.optionDiv||null,!this.docbdy)return!1;if(this.itemsContainer="UL"==this.docbdy[0].nodeName?this.docbdy:this.docbdy.children("ol,ul"),(this.model.allowGrouping||0<this.itemsContainer.find(">.e-category").length)&&!this.model.enableSorting){this.popupListWrapper.addClass("e-atc-popup");for(var t=0;t<this.itemsContainer.find(">.e-category").length;t++){var i=this.itemsContainer.find(">.e-category").eq(t);i.replaceWith(p("<li>").text(i.text()).addClass("e-category"))}}else this.model.enableSorting&&this._setSortingList();this.itemsContainer.children("ol,ul").remove(),this.model.loadOnDemand?this.items=0<this.itemsContainer.children().length?this.itemsContainer.children("li"):this.items:this.items=this.itemsContainer.children("li"),this.items.children("img,div").addClass("e-align"),this._listItem([]);for(var s=0;s<this.items.length;s++){var n=p(this.items[s]).text(),a=this._getAttributeValue(this.items[s]);p(this.items[s]).attr("data-value")||p(this.items[s]).attr("data-value",a||n),this._listItem({text:n,value:a||n},"add")}this.model.loadOnDemand?this.ultag.empty().append(this.items):this.ultag.empty().append(this.itemsContainer.children()),this.ultag.children("li").attr("role","option").attr("unselectable","on"),this.docbdy.css({display:"none"}).children("ol,ul").remove()},_plainArrayTypeBinding:function(e){if(this.dummyUl=p(),this.model.enableSorting&&(e.sort(),"descending"==this.model.sortOrder&&e.reverse()),0<e.length){for(var t,i=0;i<e.length;i++)m.isNullOrUndefined(e[i])||(t=m.buildTag("li",e[i],{},{"data-value":e[i],unselectable:"on"}),this.dummyUl.push(t[0]));this.ultag.append(this.dummyUl),this._trigger("dataBound",{data:e})}},_mapFields:function(){this.model.fields.groupBy=this.model.fields.groupBy||this.model.fields.category;var e=this.model.fields;this.mapFld={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null},this.mapFld._id=e&&e.id?e.id:"id",this.mapFld._imageUrl=e&&e.imageUrl?e.imageUrl:"imageUrl",this.mapFld._imageAttributes=e&&e.imageAttributes?e.imageAttributes:"imageAttributes",this.mapFld._spriteCSS=e&&e.spriteCssClass?e.spriteCssClass:"spriteCssClass",this.mapFld._text=e&&e.text?e.text:"text",this.mapFld._value=e&&e.value?e.value:"value",this.mapFld._htmlAttributes=e&&e.htmlAttributes?e.htmlAttributes:"htmlAttributes",this.mapFld._selected=e&&e.selected?e.selected:"selected",this.mapFld._category=e&&e.groupBy?e.groupBy:"groupBy"},_doDataBind:function(){var e=this._dataSource(),t=this.popupListItems;!e||!t||!t.length||t.length<1?this._targetElementBinding():this._isPlainType(t)?this._plainArrayTypeBinding(t):this._objectArrayTypeBinding(t)},_isPlainType:function(e){return"object"!=typeof e[0]},_objectArrayTypeBinding:function(e,t){if(this.dummyUl=p(),this._mapFields(),this.model.enableSorting&&(s=m.Query().sortBy(this.mapFld._text,this.model.sortOrder,!0),e=m.DataManager(e).executeLocal(s),this.popupListItems=e),this.model.allowGrouping||this.model.fields.groupBy){m.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.addClass("e-atc-popup");var i,s=this.mapFld._category,s=m.Query().group(s);this.model.enableSorting||s.queries.splice(0,1),i=m.DataManager(e).executeLocal(s),this._swapUnCategorized(i),"search"==t?this.popupListItems=[]:this._listItem([]);for(var n=0;n<i.length;n++){i[n].key&&this.ultag.append(m.buildTag("li.e-category",i[n].key).attr("role","option")[0]),this._generateLi(i[n].items,this.mapFld),this.ultag.append(this.dummyUl);for(var a=0;a<i[n].items.length;a++)"search"==t?this.popupListItems.push(i[n].items[a]):this._listItem(i[n].items[a],"add")}}else this._generateLi(e,this.mapFld),this.ultag.append(this.dummyUl);this._trigger("dataBound",{data:e})},_onScroll:function(e){var t,i,s,n;e.scrollTop&&(t=e.scrollTop,s=(i=this)._dataSource(),i.model.allowVirtualScrolling&&"continuous"==i.model.virtualScrollMode?(n=m.Query().skip(i._rawList.length).take(i.model.itemsCount).clone(),t>=Math.round(p(i.popupList).find("ul,ol").height()-p(i.popupList).height())&&i._rawList.length<i._totalCount&&(i._addLoadingClass(),m.DataManager&&i._dataSource()instanceof m.DataManager&&!m.isNullOrUndefined(i._dataSource().dataSource.url)?(n=(i.inputSearch&&""!=i.inputSearch.val()&&this.model.enableServerFiltering?i._addSearchQuery(m.Query(),!i._isPlainType(i._rawList)).skip(i._getLi().length):i._getQuery().skip(i._rawList.length).take(i.model.itemsCount)).clone(),i._trigger("actionBegin",{requestFrom:"scroll"})||i._dataSource().executeQuery(n).done(function(e){!m.isNullOrUndefined(i.model.value)&&i.model.enableServerFiltering&&(e.result=i._removeSelectedValue(e.result)),i.addItem(e.result),i._removeLoadingClass(),i._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(){i._dataSource(null),i._removeLoadingClass(),i._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){i._trigger("actionComplete",{e:e,requestFrom:"scroll"})})):m.DataManager&&s instanceof m.DataManager&&s.dataSource.offline&&s.dataSource.json&&0<s.dataSource.json.length?(i.addItem(this._localDataVirtualScroll()),window.setTimeout(function(){i._removeLoadingClass()},100)):(n=m.DataManager(i._dataSource()).executeLocal(n),i.addItem(i._removeSelectedValue(n)),i._removeLoadingClass()))):i.model.allowVirtualScrolling&&"normal"==i.model.virtualScrollMode&&window.setTimeout(function(){0==i._virtualCount&&i._loadList()},300))},_localDataVirtualScroll:function(){var e=this,t=m.isNullOrUndefined(e.value())?0:"number"==typeof e.value()?1:e.value().split(e.model.delimiterChar).length,t=e._checkValue?e._rawList.length-t:e._rawList.length,t=m.DataManager(e._dataSource().dataSource.json).executeLocal(m.Query().skip(t).take(e.model.itemsCount).clone());return e._removeSelectedValue(t)},_removeSelectedValue:function(e){if(m.isNullOrUndefined(this.value()))return e;for(var t="number"==typeof this.value()?this.value():this.value().split(this.model.delimiterChar),i=0;i<t.length;i++)for(var s=0;s<e.length;s++)e[s][this.mapFld._value]==t[i]&&e.splice(e.indexOf(e[s]),1);return e},_loadList:function(){this._virtualCount++;var t,e=this._dataSource(),i=this.scrollerObj.scrollTop(),s=this,n=0,a=null;if(this._currentPage=Math.round(i/(29*this.model.itemsCount)),this._virtualPages){if(-1!=p.inArray(this._currentPage,this._virtualPages.sort(function(e,t){return e-t})))if(0==this._currentPage){if(-1!=p.inArray(this._currentPage+1,this._virtualPages))return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else if(-1!=p.inArray(this._currentPage-1,this._virtualPages)){if(-1!=p.inArray(this._currentPage+1,this._virtualPages))return this._virtualCount--,!1;this._currentPage=this._currentPage+1}else this._currentPage=this._currentPage-1;t=!(-1!=p.inArray(this._currentPage-1,this._virtualPages)),this._addLoadingClass();for(var r=this._virtualPages.length-1;0<=r;r--)if(this._virtualPages[r]<this._currentPage){n=this._virtualPages[r],r+1!=this._virtualPages.length&&(a=this._virtualPages[r+1]);break}}var i=t?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount,o=m.Query().range(i,this._currentPage*this.model.itemsCount+this.model.itemsCount);if(m.DataManager&&s._dataSource()instanceof m.DataManager&&!m.isNullOrUndefined(s._dataSource().dataSource.url)){i=t?(this._currentPage-1)*this.model.itemsCount:this._currentPage*this.model.itemsCount;if(o=this._getQuery().skip(i),t){for(r=0;r<o.queries.length;r++)if("onTake"==o.queries[r].fn){o.queries.splice(r,1);break}o.take(2*this.model.itemsCount)}s._trigger("actionBegin",{requestFrom:"scroll"})||(s.inputSearch&&""!=s.inputSearch.val()&&this.model.enableServerFiltering&&(o=s._addSearchQuery(m.Query(),!s._isPlainType(s._rawList)).skip(s._getLi().length).clone()),s._dataSource().executeQuery(o).done(function(e){e.result=s._removeSelectedValue(e.result),s._appendVirtualList(e.result,n,s._currentPage,a,t),s._removeLoadingClass(),s._trigger("actionSuccess",{e:e,requestFrom:"scroll"})}).fail(function(e){s._virtualCount--,s._removeLoadingClass(),s._trigger("actionFailure",{e:e,requestFrom:"scroll"})}).always(function(e){s._trigger("actionComplete",{e:e,requestFrom:"scroll"})}))}else m.DataManager&&e instanceof m.DataManager&&e.dataSource.offline&&e.dataSource.json&&0<e.dataSource.json.length?(s._appendVirtualList(this._localDataVirtualScroll(),n,s._currentPage,a,t),window.setTimeout(function(){s._removeLoadingClass()},100)):(e=m.DataManager(s._dataSource()).executeLocal(o),s._appendVirtualList(s._removeSelectedValue(e),n,s._currentPage,a,t),s._removeLoadingClass())},_appendVirtualList:function(e,t,i,s,n){if(this._virtualPages){if(this._virtualCount--,this.ultag.find("span.e-virtual").remove(),m.isNullOrUndefined(this.activeItem)||this.activeItem.attr("page","0"),-1!=p.inArray(i,this._virtualPages.sort(function(e,t){return e-t})))return!1;n&&-1!=p.inArray(i-1,this._virtualPages.sort())&&(e.splice(0,this.model.itemsCount),n=!1);var a=this.model.itemsCount,r=p("<ul>"),o=n?(i-1)*a*29-29*(t*a+a):i*a*29-29*(t*a+a);0!=o&&r.append(p("<span>").addClass("e-virtual").css({display:"block",height:o})),this._mapFields(),this._generateLi(e,this.mapFld),p(this.dummyUl).attr("page",i),n&&p(this.dummyUl).slice(0,a).attr("page",i-1),this.model.showCheckbox&&this._appendCheckbox(this.dummyUl),r.append(this.dummyUl),o=29*(i*a+a),0!=(o=null!=s?s*a*29-o:this.ultag.height()-o)&&r.append(p("<span>").addClass("e-virtual").css({display:"block",height:o})),(t=(0<this.model.itemsCount&&""!=this.value()&&this._dataSource()instanceof m.DataManager&&this._dataSource().dataSource.offline?this.ultag.find("li"):this.ultag.find("li[page="+t+"]")).last()).next().remove(),r.children().insertAfter(t),this._virtualPages.push(i),n&&this._virtualPages.push(i-1);for(var l=0;l<e.length;l++)this._listItem(e[l],"add");this._virtualUl=this.ultag.clone(!0),this._renderBoxModel()}},_generateLi:function(e,t){if(this.mapFld=t,this.dummyUl=[],!e||!e.length||e.length<1)return!1;for(var i=0;i<e.length;i++){var s,n=this._getField(e[i],this.mapFld._id),a=this._getField(e[i],this.mapFld._imageUrl),r=this._getField(e[i],this.mapFld._imageAttributes),o=this._getField(e[i],this.mapFld._spriteCSS),l=this._getField(e[i],this.mapFld._text),d=this._getField(e[i],this.mapFld._value),h=this._getField(e[i],this.mapFld._htmlAttributes),c=this._getField(e[i],this.mapFld._selected),u=document.createElement("li");m.isNullOrUndefined(d)?u.setAttribute("data-value",l):u.setAttribute("data-value","object"==typeof d?JSON.stringify(d):d),m.isNullOrUndefined(n)||""===n||u.setAttribute("id",n),m.isNullOrUndefined(h)||""==h||this._setAttr(u,h),this.model.template?p(u).append(this._getTemplatedString(e[i])):(m.isNullOrUndefined(a)||""==a||(s=document.createElement("img"),this._setClass(s,"e-align")._setAttr(s,{src:a,alt:l}),r&&""!=r&&this._setAttr(s,r),u.appendChild(s)),m.isNullOrUndefined(o)||""==o||(s=document.createElement("div"),this._setClass(s,"div.e-align "+o+" sprite-image"),u.appendChild(s)),c&&this._setClass(u,"chkselect"),m.isNullOrUndefined(l)&&(l=String(l)),(c=document.createElement("span")).appendChild(document.createTextNode(l)),this._setClass(c,"e-ddltxt"),u.appendChild(c)),this._setAttr(u,{role:"option",unselectable:"on"}),this.dummyUl.push(u)}},_setAttr:function(e,t){if("string"==typeof t){var i=t.replace(/['"]/g,"").split("=");2==i.length&&(e.hasAttribute(i[0])&&"class"==i[0]?p(e).addClass(i[1]):e.setAttribute(i[0],i[1]))}else for(var s in t)if("styles"!=s&&"style"!=s||"object"!=typeof t[s])e.setAttribute(s,t[s]);else for(var n in t[s])e.style[n]=t[s][n];return this},_setClass:function(e,t){return e.className+=" "+t,this},_removeClass:function(e,t){var i=e.className.indexOf(t);return 0<=i&&(0!=i&&" "===e.className[i-1]?e.className=e.className.replace(" "+t,""):e.className=e.className.replace(t,"")),this},_hasClass:function(e,t){return 0<=e.className.indexOf(t)},_swapUnCategorized:function(s){p(s).each(function(e,t){if(!t.key){for(var i=e;0<i;i--)s[i]=s[i-1];return s[i]=t,!1}})},_getField:function(e,t){return m.pvt.getObject(t,e)},_getTemplatedString:function(e){for(var t=this.model.template,i=t.indexOf("${"),s=t.indexOf("}");-1!=i&&-1!=s;)var n=t.substring(i,s+1),a=n.replace("${","").replace("}",""),i=(t=t.replace(n,this._getField(e,a))).indexOf("${"),s=t.indexOf("}");return t},_setWatermark:function(){var e;""==this.element.val()&&""==this._trim(this._visibleInput.val())&&(e=(null!=this.model.watermarkText?this.model:this._localizedLabels).watermarkText,this._isWatermark?this._visibleInput.attr("placeholder",e):this._hiddenSpan.css("display","block").text(e),"visualmode"==this.model.multiSelectMode&&this._ulBox&&0==this._ulBox.find("li").length&&this._swapUlandInput(!1))},_checkboxHideShow:function(e){m.isNullOrUndefined(this.ultag)||(e?(this.listitems=this._getLi(),0==this.listitems.find("input[type=checkbox]").length&&this._appendCheckbox(this.listitems)):this._removeCheck(this.popupList),this.model.showCheckbox=e,this._virtualUl=this.ultag.clone(!0))},_setCheckAll:function(e){!this._isSingleSelect()&&e?this.checkAll():this.model.checkAll=!1},_setUncheckAll:function(e){!this._isSingleSelect()&&e?this.uncheckAll():this.model.uncheckAll=!1},checkAll:function(){this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();var e=this._selectedIndices,t=!1;if(this._mapFields(),this.listitems=this._getLi(),this._isWatermark||this._hiddenSpan.css("display","none"),!this._isSingleSelect()){for(var i,s=0;s<this.listitems.length;s++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[s]:this._decode(this._getField(this.popupListItems[s],this.mapFld._text)),this._hiddenValue=this._getAttributeValue(this.listitems[s])||this._currentText,this._checkContains(this._hiddenValue)?t=!0:this.model.showCheckbox?t=!((i=p(this.listitems[s]).children(".e-checkwrap")[0])&&!this._isChecked(i))||(this._setClass(i,"e-check-act"),this._setAttr(i,{"aria-checked":!0}),!(i.firstChild.checked=!0)):(t=!1,p(this.listitems[s]).addClass("e-active")),t||(this.checkedStatus=!0,this._itemID=p(this.listitems[s]).attr("id"),m.isNullOrUndefined(this._itemID)||""==this._itemID||this._selectedItemsID.push(this._itemID),this._createListHidden(this._hiddenValue),"visualmode"==this.model.multiSelectMode&&(this._ulBox.append(this._createBox(this._currentText,this._hiddenValue)),this._isPopupShown()&&this._setListPosition()),this._addText(this._currentText),-1==p.inArray(s,e)&&(this._selectedIndices.push(s),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[s])||"",this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),i={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:s,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._updateValue(this.element.val()),this._updateText(),this._initValue||this._trigger("change",i),this._activeItem=s,this.activeItem=this._getActiveItem(),this._cascadeAction());this.model.itemValue=this._selectedValue,this.model.uncheckAll=!1,this.model.checkAll=!0,this._activeItem=-1,this._setWatermark()}},_createListHidden:function(e){var t=document.createElement("input"),i=/'/;i.test(e)&&(e=e.replace(i,"&apos;")),this._setAttr(t,{type:"hidden",name:this._name,value:e,id:"#"+e}),-1==p.inArray(t.value,this._hiddenInputElement)&&(this._hiddenInputElement.push(t.value),this.container.append(t),p(this.element).attr("name","hiddenEle"))},_removeListHidden:function(e){var t=/'/;t.test(e)&&(e=e.replace(t,"&apos;"));e=this.container.find("[id='#"+e+"']");this._hiddenInputElement.splice(p.inArray(e.value,this._hiddenInputElement),1),p(e).remove(),this._isSingleSelect()||""!=this.element.val()||this.element.attr("name",this._name)},_getAttributeValue:function(e){var t;return m.isNullOrUndefined(e)||(t=m.isNullOrUndefined(e.getAttribute("data-value"))?e.getAttribute("value"):e.getAttribute("data-value")),e?t:null},_selectCheckedItem:function(e){this.model.loadOnDemand&&(m.isNullOrUndefined(this.ultag)||0==this.ultag.children().length)&&this._showFullList();for(var t=0;t<e.length;t++)this._activeItem=e[t],this._enterTextBoxValue()},unCheckAll:function(){this.uncheckAll()},uncheckAll:function(){if(this.listitems=this._getLi(),this._mapFields(),!this._isSingleSelect()){for(var e,t=0;t<this.listitems.length;t++)this._currentText=this._isPlainType(this.popupListItems)?this.popupListItems[t]:this._getField(this.popupListItems[t],this.mapFld._text),this._hiddenValue=this._getAttributeValue(this.listitems[t])||this._currentText,!!this._checkContains(this._hiddenValue)&&(this.model.showCheckbox?!(!(e=p(this.listitems[t]).children(".e-checkwrap")[0])||!this._isChecked(e))&&(this._removeClass(e,"e-check-act"),this._setAttr(e,{"aria-checked":!1}),!(e.firstChild.checked=!1)):(p(this.listitems[t]).removeClass("e-active"),!0))&&(this.checkedStatus=!1,this._activeItem=t,this.activeItem=this._getActiveItem(),this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),e=this._selectedIndices,-1<p.inArray(t,e)&&(this._selectedIndices.splice(p.inArray(t,e),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),this._selectedValue=this._getAttributeValue(this.listitems[t])||"",this._itemID=p(this.listitems[t]).attr("id"),m.isNullOrUndefined(this._itemID)||""==this._itemID||this._removeSelectedItemsID(),this._initValue||this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),e={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:t,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus},this._updateValue(this.element.val()),this._updateText(),this._initValue||this._trigger("change",e),this._cascadeAction(),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition()));this.model.itemValue=this._selectedValue,this.model.checkAll=!1,this.model.uncheckAll=!0,this._setWatermark(),this._activeItem=-1}},_removeSelectedItemsID:function(){var e=this._selectedItemsID.indexOf(this._itemID);this._selectedItemsID.splice(e,1),this._itemID=""},_refreshScroller:function(){var e;m.isNullOrUndefined(this.popupListWrapper)||(this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.popupList.find(".e-content, .e-vhandle").removeAttr("style"),this.popupList.find(".e-vhandle div").removeAttr("style"),this.popupList.children(".e-content").removeClass("e-content"),e=this._isPopupShown(),this.popupListWrapper.css("display","block"),this.popupList.css({display:"block"}),this.scrollerObj.model.height=Math.ceil(this._getPopupHeight()),this.scrollerObj.refresh(),this.model.enablePopupResize||(this.popupList.css("height","auto"),this.popupListWrapper.css("height","auto")),this.scrollerObj.option("scrollTop",0),e||this.popupListWrapper.css("display","none"))},_enablePopupResize:function(){this.model.enablePopupResize&&!m.isNullOrUndefined(this.popupListWrapper)&&(this.popupListWrapper.addClass("e-resizable").append(m.buildTag("div.e-resizebar").append(m.buildTag("div.e-icon e-resize-handle"))).find(".e-resize-handle").addClass(this.model.enableRTL?"e-rtl-resize":""),this._resizePopup())},_resizePopup:function(){var i=this,t=!1;this.popupListWrapper.find("div.e-resize-handle").ejResizable({minHeight:i._validatePixelData(i.model.minPopupHeight),minWidth:i._validatePixelData(i.model.minPopupWidth),maxHeight:i._validatePixelData(i.model.maxPopupHeight),maxWidth:i._validatePixelData(i.model.maxPopupWidth),handle:"e-ddl-popup",resizeStart:function(e){if(!i.model.enabled)return!1;t||i._trigger("popupResizeStart",{event:e}),t=!0},resize:function(e){var t=p(e.element).parents("div.e-ddl-popup");i._refreshPopupOnResize(p(t).outerHeight(),p(t).outerWidth()),i._trigger("popupResize",{event:e})},resizeStop:function(e){t&&(i._refreshPopupOnResize(i.model.popupHeight,i.model.popupWidth),t&&i._trigger("popupResizeStop",{event:e}),t=!1)},helper:function(e){e=p(e.element).parents("div.e-ddl-popup");return i._refreshPopupOnResize(p(e).outerHeight(),p(e).outerWidth()),p(i.popupListWrapper)}})},_refreshPopupOnResize:function(e,t){e&&(this.model.popupHeight=e),t&&(this.model.popupWidth=t),this.popupListWrapper.css({height:this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight)}),this._setListWidth(),this._refreshScroller()},_setListWidth:function(){var e;m.isNullOrUndefined(this.popupListWrapper)||("auto"!=(e=this.model.popupWidth)?this.popupListWrapper.css({width:e}):this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}),this.popupListWrapper.css({"max-width":this._validatePixelData(this.model.maxPopupWidth)}))},_setListHeight:function(){m.isNullOrUndefined(this.popupListWrapper)||(this.model.enablePopupResize&&this.model.enableFilterSearch&&this.model.minPopupHeight&&this.model.minPopupHeight.toString().indexOf("%")<0&&20==this._validatePixelData(this.model.minPopupHeight)&&(this.model.minPopupHeight="65"),this.model.enablePopupResize?this.popupListWrapper.css({"min-height":this._validatePixelData(this.model.minPopupHeight),"max-height":this._validatePixelData(this.model.maxPopupHeight),height:this._validatePixelData(this.model.popupHeight)}):this.popupListWrapper.css({"max-height":this._validatePixelData(this.model.popupHeight),"min-height":this._validatePixelData(this.model.minPopupHeight)}))},_validatePixelData:function(e){return e&&!isNaN(e)?Number(e):e},_getPopupHeight:function(){var e,t=this.popupListWrapper.height();return this.model.enablePopupResize&&(t-=this.popupListWrapper.find(">div.e-resizebar").height()),this.model.headerTemplate&&this.headerTemplate&&(t-=this.headerTemplate.height()),this.model.enableFilterSearch&&this.inputSearch&&(e=this.inputSearch.parent(".e-in-wrap"),t-=parseInt(e.css("height"))+parseInt(e.css("margin-top"))+parseInt(e.css("margin-bottom"))),t},_refreshPopup:function(){"auto"!=this.model.popupWidth||this._validatePixelData(this.model.minPopupWidth)?this._validatePixelData(this.model.minPopupWidth)&&this.popupListWrapper.css({"min-width":this._validatePixelData(this.model.minPopupWidth)}):this.popupListWrapper.css({"min-width":this.wrapper.width()}),this.scrollerObj!=i&&this._refreshScroller(),this._setListPosition()},_setListPosition:function(){var e=this.wrapper,t=this._getOffset(e),i=p(document).scrollTop()+p(window).height()-(t.top+p(e).outerHeight()),s=t.top-p(document).scrollTop(),n=this.popupListWrapper.outerHeight(),a=this.popupListWrapper.outerWidth(),r=t.left,o=e.outerHeight(),l=(o-e.height())/2,d=this._getZindexPartial(),n=(n<i||s<n?t.top+o+3:t.top-n-3)-l,l=p(document).scrollLeft()+p(window).width()-r;(this.model.enableRTL||l<a&&a<r+e.outerWidth())&&(r-=this.popupListWrapper.outerWidth()-e.outerWidth()),this.popupListWrapper.css({left:r+"px",top:n+"px","z-index":d})},_getOffset:function(e){return m.util.getOffset(e)},_getZindexPartial:function(){return m.util.getZindexPartial(this.element,this.popupListWrapper)},_showResult:function(){var e=this;this.popUpShow=!0,this.model.loadOnDemand&&(m.isNullOrUndefined(this.popupListWrapper)&&this._renderPopupPanelWrapper(),!m.isNullOrUndefined(this.ultag)&&0!=this.ultag.children().length||this._showFullList(),this._renderRemaining()),(this.model.allowGrouping||this.model.fields.groupBy)&&this.popupListWrapper.addClass("e-atc-popup");var t={text:this._visibleInput[0].value,value:this._selectedValue,refreshPopup:!0};this._trigger("beforePopupShown",t)||(t.refreshPopup&&this._refreshPopup(),p(this.popupListWrapper).slideDown(this.model.enableAnimation?200:1,function(){p(document).on("mousedown",p.proxy(e._OnDocumentClick,e)),m.isDevice()||e._on(m.getScrollableParents(e.wrapper),"scroll",e._hideResult)}),this.element[0].setAttribute("aria-expanded",!0),this._listSize=this._getLi().length,this.wrapper.addClass("e-popactive"),this._trigger("popupShown",{text:this._visibleInput[0].value,value:this._selectedValue}),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")}))},_OnWindowResize:function(e){!m.isNullOrUndefined(this.model)&&this._isPopupShown()&&this._refreshPopup()},_hideResult:function(e){if(this.model&&this._isPopupShown()){if(!m.isNullOrUndefined(e)&&!m.isNullOrUndefined(this.inputSearch)&&p(this.inputSearch).is(":focus")&&"scroll"==e.type&&m.isTouchDevice())return!1;var t=this;this._trigger("beforePopupHide",{text:this._visibleInput[0].value,value:this._selectedValue})||(p(this.popupListWrapper).slideUp(this.model.enableAnimation?100:0,function(){p(document).off("mousedown",p.proxy(t._OnDocumentClick,t))}),null!=this.element&&this.element.attr("aria-expanded",!1),m.isDevice()||this._off(m.getScrollableParents(this.wrapper),"scroll",this._hideResult),null!=this._visibleInput&&this.wrapper.removeClass("e-popactive"),this.popUpShow=!1,this._trigger("popupHide",{text:this._visibleInput[0].value,value:this._selectedValue}),setTimeout(function(){t._resetSearch()},100),this._getLi().find(".e-ddl-anim").removeClass("e-ddl-anim"))}},_isPopupShown:function(){if(!m.isNullOrUndefined(this.popupListWrapper))return"block"==this.popupListWrapper.css("display")},_enterTextBoxValue:function(){var e,t,i=!0;this.removeID=!1,this.checkedStatus=!1,this._isWatermark||this._hiddenSpan.css("display","none"),this._chooseSelectionType(),(0<=this._activeItem||null!=this._activeItem)&&(this.model.showCheckbox?(t=this.activeItem.find(".e-checkwrap")[0],p(t).removeClass("e-check-inact"),this.checkedStatus=this._isChecked(t)):this.checkedStatus=this.activeItem.hasClass("e-active")),e={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},this._initValue||this._onSearch||!this._raiseEvents||!this._trigger("select",e)?((0<=this._activeItem||null!=this._activeItem)&&(this._isSingleSelect()||this._checkContains(this._selectedValue)?this._isSingleSelect()?(this.ultag.children("li").removeClass("e-hover").removeClass("e-active"),this.activeItem.addClass("e-active"),this._maintainHiddenValue(),this._visibleInput.val(this._currentText),this.element.val(this._hiddenValue),this.selectedItemIndex(this.selectedIndexValue),this.selectedIndex(this.selectedIndexValue),this._selectedIndices[0]=this.selectedIndexValue):i=!1:(this.model.showCheckbox?(t=this.activeItem.find(".e-checkwrap")[0],this._isChecked(t)||(this._removeClass(t,"e-ddl-anim"),this._setClass(t,"e-check-act e-ddl-anim"),this._setAttr(t,{"aria-checked":!0}),p(t).find(".e-check-input")[0].checked=!0)):this.activeItem.addClass("e-active"),"visualmode"==this.model.multiSelectMode&&(t=this._createBox(this._currentText,this._selectedValue),this._ulBox.children()&&0<this._ulBox.children().length&&!this._checkForDuplicates(t)||this._ulBox.append(t),this._isPopupShown()&&this._setListPosition()),this._maintainHiddenValue(),this._addText(this._currentText),this._createListHidden(this._hiddenValue),-1==p.inArray(this.selectedIndexValue,this._selectedIndices)&&(this._selectedIndices.push(this.selectedIndexValue),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices)),i&&(this.checkedStatus=!0,this._onValueChange(),this._cascadeAction(),this.selectelement&&p("#"+this._id).children().length>this.selectedIndexValue&&(p("#"+this._id).children()[this.selectedIndexValue].selected=!0))),this.model.uncheckAll=!1,this._setWatermark(),this._uiInteract=!1):this._setWatermark()},_checkForDuplicates:function(t){var i=!0;return this._ulBox.children().toArray().forEach(function(e){if(t.attr("data-value")==p(e).attr("data-value"))return i=!1},this),i},_onValueChange:function(){var e;this.model.itemValue=this._selectedValue,this._updateText(),(this.value()!=this.element.val()||null==this.value()&&-1!=p.inArray("",this._valueContainer))&&(this._updateSelectedIndexByValue(this.element.val()),this._updateValue(this.element.val()),this.model.showCheckbox||"none"!=this.model.multiSelectMode||null!=this.model.value&&""!=this.model.value||(this.model.itemValue=""),e={text:this._visibleInput[0].value,selectedText:this._currentText,itemId:this.selectedIndexValue,selectedValue:this._selectedValue,value:this._selectedValue,isChecked:this.checkedStatus,isInteraction:!!this._uiInteract},this._initValue||this._onSearch||!this._raiseEvents||("function"==typeof this.model._change&&this._trigger("_change",{isChecked:this.checkedStatus,text:this._visibleInput.val(),itemId:this.selectedIndexValue,selectedText:this._currentText,selectedValue:this._selectedValue,value:this.value(),data:this.model,isInteraction:!!this._uiInteract}),this._trigger("change",e),this.model.showCheckbox&&this._trigger("checkChange",{isChecked:this.checkedStatus,text:this._visibleInput.val(),itemId:this.selectedIndexValue,selectedText:this._currentText,selectedValue:this._selectedValue,value:this._selectedValue,data:this.model})),this._uiInteract=!1,this.model.enableFilterSearch&&this.model.enableServerFiltering&&(this._searchresult=[],this._searchresult=this.getItemDataByValue(this.value())))},_decode:function(e){return p("<span>").html(e).text()},_chooseSelectionType:function(){this.activeItem=this._getActiveItem(),this.selectedIndexValue=this._activeItem,this._mapFields(),null==this._dataSource()||this._isPlainType(this._dataSource())&&this._isPlainType(this.popupListItems)?(this._currentText=this.activeItem.text(),this._getAttributeValue(this.activeItem[0])?this._selectedValue=this._getAttributeValue(this.activeItem[0]):null!=this._currentText?(m.isNullOrUndefined(this.activeItem[0])||this.activeItem[0].setAttribute("value",this._currentText),this._selectedValue=this._currentText):this._selectedValue="",this._itemID=p(this.activeItem).attr("id")):(this.model.enableFilterSearch?this._currentText=this._decode(this.ultag.children()[this._activeItem].textContent):this._currentText=this._decode(this._getField(this.popupListItems[this._activeItem],this.mapFld._text)),this._currentText=""===this._currentText||null==this._currentText?this.activeItem.text():this._currentText,this._selectedValue=this._getField(this.popupListItems[this._activeItem],this.mapFld._value),this._selectedValue=null!=this._selectedValue?this._selectedValue:this._currentText,this._itemID=this._getField(this.popupListItems[this._activeItem],this.mapFld._id)),m.isNullOrUndefined(this._itemID)||""==this._itemID||(this.model.showCheckbox?this.removeID?this._removeSelectedItemsID():this._selectedItemsID.push(this._itemID):(this._selectedItemsID=[],this.removeID||this._selectedItemsID.push(this._itemID))),this.selectedTextValue=this._currentText},_maintainHiddenValue:function(){var e=this._getAttributeValue(this.activeItem[0]);this._hiddenValue=m.isNullOrUndefined(e)?this._currentText:e},_removeTextBoxValue:function(e){if(this._uiInteract=!0,this.removeID=!0,this.checkedStatus=!0,this._isFilterInput())for(var t=0;t<this._getLi().length;t++)p(this._getLi()[t]).attr("data-value")==e&&(this._activeItem=t);this._chooseSelectionType(),(0<=this._activeItem||null!=this._activeItem)&&(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],p(i).removeClass("e-ddl-anim").addClass("e-check-inact e-ddl-anim"),this.checkedStatus=this._isChecked(i)):this.checkedStatus=this.activeItem.hasClass("e-active"));var i,s={text:this._currentText,selectedText:this._currentText,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus};!this._initValue&&!this._onSearch&&this._raiseEvents&&this._trigger("select",s)||(this._maintainHiddenValue(),this._hiddenValue=this._isFilterInput()&&!m.isNullOrUndefined(e)?e:this._hiddenValue,this._removeText(this._hiddenValue),this._removeListHidden(this._hiddenValue),this._isFilterInput()&&!this.activeItem.attr("data-value")==e&&this.activeItem.removeClass("e-active"),this._isSingleSelect()||(this.model.showCheckbox?(i=this.activeItem.find(".e-checkwrap")[0],this._isChecked(i)&&(this._removeClass(i,"e-check-act"),this._setAttr(i,{"aria-checked":!1}),p(i).find(".e-check-input")[0].checked=!0)):this.activeItem.removeClass("e-active"),-1<p.inArray(this.selectedIndexValue,this._selectedIndices)&&(this._selectedIndices.splice(p.inArray(this.selectedIndexValue,this._selectedIndices),1),this.model.selectedItems=this.model.selectedIndices=this._selectedIndices),"visualmode"==this.model.multiSelectMode&&(this._deleteBoxCheck(this._hiddenValue),this._isPopupShown()&&this._setListPosition())),this.checkedStatus=!1,this._onValueChange(),null==this.model.cascadeTo||this._isSingleSelect()||this._initValue||this._cascadeAction(),this.model.checkAll=!1),this._setWatermark()},_createBox:function(e,t){if(!this._checkContains(t)){"none"==this._ulBox.css("display")&&"none"!=this._visibleInput.css("display")&&this._swapUlandInput(!0);var i=m.buildTag("span.e-icon e-close","",{},{unselectable:"on"}),t=m.buildTag("li.e-options").text(e).attr("data-value",t).append(i);return this._on(i,"click",function(e){return!!this.model.enabled&&void this._deleteBox(p(e.target).parent())}),t}},_deleteBoxCheck:function(e){for(var t=this._ulBox.children("li"),i=0;i<t.length;i++)p(t[i]).attr("data-value")==e&&p(t[i]).remove()},_deleteLastBox:function(){var e=this._ulBox.children("li:not(.e-search-box)").last();e.hasClass("e-active")?this._deleteBox(e):(this._removeActive(),e.addClass("e-active"))},_deleteBox:function(e){for(var t=0;t<e.length;t++){var i=p(e[t]).attr("data-value");if(this._isFilterInput()){for(var s=this.getListData(),n=0;n<s.length;n++)if((this._getField(s[n],this.mapFld._value)?this._getField(s[n],this.mapFld._value):this._getField(s[n],this.mapFld._text))==i){this._removeTextBoxValue(i);break}}else for(var a=this._getLi(),n=0;n<a.length;n++)if(p(a[n]).attr("data-value")==i){this._activeItem=n,this._removeTextBoxValue();break}}this._isFocused||this._isPopupShown()||this._setWatermark()},_isFilterInput:function(){return!(!this.model.enableFilterSearch||!this.inputSearch)&&(""==!this.inputSearch.val()||void 0)},_swapUlandInput:function(e){e?(this._visibleInput.css("display","none"),this._ulBox.css("display","block"),this.wrapper.css({height:"auto"})):(this._visibleInput.css("display","block"),this._ulBox.css("display","none"),this.wrapper.css({height:this.model.height}))},_removeActive:function(){this._ulBox.children("li").removeClass("e-active")},_adjustWidth:function(){var e=m.buildTag("span",this._visibleInput.val());this.container.append(e),this._visibleInput.width(e.width()+30),e.remove()},_destroyBoxModel:function(){this._visibleInput.css("display","block"),this.wrapper.height(this.model.height),this._ulBox.remove(),this._ulBox=null,this._off(this.container,"click")},_removeListHover:function(){this.ultag.children("li").removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("hover")}),e.focus()},_getLi:function(){if(this.ultag)return this.ultag.children("li:not('.e-category'):not('.e-nosuggestion')")},_calcScrollTop:function(e){this.ultag.outerHeight();var t,i,s,n=this.ultag.find("li"),a=0;for(this._selectedIndices&&0<this._selectedIndices.length&&"active"==e?(i=this._getLi(),s=this._selectedIndices.length==i.length?0:this._selectedIndices[this._selectedIndices.length-1],(null!=this.model.fields.groupBy||0<this.ultag.find("li.e-category").length)&&(s=p.inArray(i.eq(s)[0],n))):s=this.ultag.find("li.e-"+e).index(),t=0;t<s;t++)a+=n.eq(t).outerHeight(!0);return(e=a-(this.popupList.outerHeight()-n.eq(s).outerHeight(!0))/2)<0?0:e},_getActiveItem:function(){return this._getLi().eq(this._activeItem)},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_roundedCorner:function(e){e?(this.container.addClass("e-corner"),m.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.addClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").addClass("e-corner")):(this.container.removeClass("e-corner"),m.isNullOrUndefined(this.popupListWrapper)||this.popupListWrapper.removeClass("e-corner"),this.inputSearch&&this.inputSearch.parent(".e-in-wrap").removeClass("e-corner"))},_enabled:function(e){e?this.enable():this.disable()},_RightToLeft:function(){this.model.enableRTL?this.wrapper.addClass("e-rtl"):this.wrapper.removeClass("e-rtl")},_dropbtnRTL:function(){this.model.enableRTL?(this.popupListWrapper.addClass("e-rtl").find(".e-resize-handle").addClass("e-rtl-resize"),this.popupList.addClass("e-rtl")):(this.popupListWrapper.removeClass("e-rtl").find(".e-resize-handle").removeClass("e-rtl-resize"),this.popupList.removeClass("e-rtl"))},_OnDropdownClick:function(e){return this._preventDefaultAction(e),!(p(e.target).is("li")&&p(e.target).parent().hasClass("e-boxes")||p(e.target).parents("ul").hasClass("e-boxes")&&p(e.target).hasClass("e-icon e-close"))&&(!this.model.readOnly&&!this._readOnly&&void((m.isNullOrUndefined(this.ultag)?!!(this.model.loadOnDemand&&!m.isNullOrUndefined(this.model.dataSource)&&0<this.model.dataSource.length):0<this.ultag.find("li").length)&&(e.which&&1==e.which||e.button&&0==e.button)&&this._OnPopupHideShow()))},_OnPopupHideShow:function(){var e;this._isPopupShown()?this._hideResult():(this._showResult(),this.model.enableFilterSearch?(0==this.getSelectedItem().length?this.ultag.find("li:first").addClass("e-hover"):(e=this.getSelectedItem().length,p(this.getSelectedItem()[e-1]).addClass("e-hover")),p(this.inputSearch).focus()):this.wrapper.focus())},_showFullList:function(){var e=this._dataSource();m.isNullOrUndefined(this.ultag)&&(this.ultag=m.buildTag("ul.e-ul","",{},{role:"listbox"})),m.DataManager&&e instanceof m.DataManager?e.dataSource.offline||e.dataSource.json&&0<e.dataSource.json.length?this._getFilteredList(e.dataSource.json):this._initDataSource(e):this._getFilteredList(e)},_getFilteredList:function(e){!e||!e.length||e.length<1?(this._targetElementBinding(),this._renderRemaining()):(e=m.DataManager(e).executeLocal(this._isPlainType(e)?m.Query():this._getQuery(!0)),this._totalCount=e.count,this._listItem(e.result||e),this._renderPopupList(),this._rawList=this.popupListItems.slice())},_cascadeAction:function(){if(this.model.cascadeTo)for(var e=this.model.cascadeTo.split(","),t=0;t<e.length;t++)p("#"+e[t]).hasClass("e-dropdownlist")?this._doCascadeAction(e[t],this,this.checkedStatus):p("#"+e[t]).on("ejDropDownListcreate",{Obj:this,status:this.checkedStatus},function(e){m.isNullOrUndefined(e.data.Obj.getValue())||""==e.data.Obj.getValue()||e.data.Obj._doCascadeAction(this.id,e.data.Obj,e.data.status)})},_doCascadeAction:function(e,t,i){t._currentValue=t._getField(t.popupListItems[t._activeItem],t.mapFld._value),t.selectDropObj=p("#"+e).ejDropDownList("instance");var s={cascadeModel:t.selectDropObj.model,cascadeValue:t._currentValue,setCascadeModel:{},requiresDefaultFilter:!0};this._trigger("cascade",s),t.selectDropObj._setCascadeModel=s.setCascadeModel,m.isNullOrUndefined(t[e])&&(t[e]=t.selectDropObj._dataSource()),m.DataManager&&t[e]instanceof m.DataManager?t._cascadeOdataInit(t[e],s.requiresDefaultFilter,i,s.cascadeQuery):t._cascadeJsonInit(t.selectDropObj,t[e],t.mapFld._value,s.requiresDefaultFilter,i,s.cascadeQuery)},_cascadeOdataInit:function(e,t,i,s){var n,a=this;a._dQuery=this.selectDropObj._getQuery().clone(),n=a._dQuery.clone(),t?n.where(a.mapFld._value,"equal",a._currentValue):n=s,a.selectDropObj._addLoadingClass(),a._trigger("actionBegin",{requestFrom:"cascade"})||e.executeQuery(n).fail(function(e){a._changedSource=null,a.selectDropObj.setModel({dataSource:a._changedSource,enabled:!1}),a._trigger("actionFailure",{e:e,requestFrom:"cascade"})}).done(function(e){a._trigger("actionSuccess",{e:e,requestFrom:"cascade"}),a._cascadeDataBind(a.selectDropObj,e.result,i),a.selectDropObj._removeLoadingClass()}).always(function(e){a._trigger("actionComplete",{e:e,requestFrom:"cascade"})})},_cascadeJsonInit:function(e,t,i,s,n,a){a=s?m.Query().where(i,"==",this._currentValue):a,a=m.DataManager(t).executeLocal(a);this._cascadeDataBind(e,a,n)},_cascadeDataBind:function(e,t,i){var s=e.value();if(this.model.showCheckbox&&i||"none"!=this.model.multiSelectMode&&this.activeItem.hasClass("e-active"))this._changedSource=m.isNullOrUndefined(this._changedSource)?t:this._changedSource.concat(t);else if(this.model.showCheckbox||"none"!=this.model.multiSelectMode){for(var n=0;n<t.length;n++)if(this._isPlainType(t)&&this._isPlainType(this._changedSource))this._changedSource.splice(this._changedSource.indexOf(t[n]),1);else for(var a=0;a<this._changedSource.length;a++)JSON.stringify(this._changedSource[a])==JSON.stringify(t[n])&&this._changedSource.splice(a,1);e.setModel({dataSource:null})}else this._changedSource=t;var i=e.model.value,r=JSON.parse(JSON.stringify(e.model));if(e.setModel({dataSource:this._changedSource,enabled:0<this._changedSource.length}),this._isSingleSelect()||e.selectItemByValue(s),!e.model.showCheckbox&&"none"==e.model.multiSelectMode||p("input:hidden[id^='#'][name="+e._id+"]").remove(),e._setSelectedItem)e.setModel(e._setCascadeModel);else{for(var o=["value","text","selectedIndex","selectedIndices"],l=0;l<o.length;l++)e.model[o[l]]=r[o[l]];e.model.value=i,e._finalize()}e._setSelectedItem=!0},_OnMouseEnter:function(e){if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;var t;this.ultag.children("li").removeClass("e-hover"),p(e.target).is("li:not('.e-category')")&&p(e.target).addClass("e-hover"),p(e.target).hasClass("e-disable")?p(e.target).removeClass("e-hover"):"li"!=e.target.tagName&&(e=p(e.target).parents("li:not('.e-category')"),p(e).addClass("e-hover")),this.ultag.children("li:not('.e-category')").each(function(e){if(p(this).hasClass("e-hover"))return t=e,!1}),this._activeItem=t},_OnMouseLeave:function(e){if(!this.model.enabled||this.model.readOnly||this._readOnly)return!1;this.ultag.children("li").removeClass("e-hover")},_OnMouseClick:function(e){return this._uiInteract=!0,!(!this.model.enabled||this.model.readOnly||this._readOnly)&&(!(this.model.enableFilterSearch&&p(e.target).is("li")&&p(e.target).hasClass("e-nosuggestion"))&&void((p(e.target).is("li")&&!p(e.target).hasClass("e-disable")||!p(e.target).is("li")&&!p(e.target).closest("li").hasClass("e-disable"))&&(this._isSingleSelect()?(this._enterTextBoxValue(),this._hideResult()):this.model.showCheckbox?(t="LI"===e.target.nodeName?e.target:p(e.target).parents("li.e-hover"),t=p(t).find(".e-checkwrap")[0],this._onCheckChange({target:t})):(e=p(e.target).is("li")?e.target:p(e.target).closest("li")[0],this._activeItem=p.inArray(e,this._getLi()),p(e).hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue()))));var t},_OnDocumentClick:function(e){if(this.model&&(!this.model.enabled||this.model.readOnly||this._readOnly))return!1;p(e.target).is(this.popupList)||p(e.target).parents(".e-ddl-popup").is(this.popupListWrapper)||p(e.target).is(this._visibleInput)||p(e.target).parents(".e-ddl").is(this.wrapper)?p(e.target).is(this.inputSearch)?this.inputSearch.focus():(p(e.target).is(this.popupList)||p(e.target).parents(".e-ddl-popup").is(this.popupListWrapper))&&this._preventDefaultAction(e):this._hideResult()},_OnKeyPress:function(e){this.model.enableIncrementalSearch&&13!=e.keyCode&&this._OnTextEnter("mozilla"==m.browserInfo().name?e.charCode:e.keyCode),32==e.keyCode&&this._preventDefaultAction(e)},_OnTextEnter:function(e){var t=this;this._incqueryString+=String.fromCharCode(e),0<this._incqueryString.length&&setTimeout(function(){t._incqueryString=""},this.model.incrementalSearchDelay);var i=this._getLi(),s=null,n=this.model.caseSensitiveSearch,a=this._incqueryString,r=this._incqueryString.length;if(n||(a=a.toLowerCase()),this._prevQueryString==a){for(var o=0;o<this._matchedListItems.length;o++)if(p(this._matchedListItems[o]).hasClass("e-active")||this.model.showCheckbox&&p(this._matchedListItems[o]).hasClass("e-hover")){s=o==this._matchedListItems.length-1?this._matchedListItems[0]:this._matchedListItems[o+1];break}}else if(!m.isNullOrUndefined(i)){this._matchedListItems=[];for(var l,d,h=this.selectedIndex(),o=0;o<i.length;o++)o!=h&&(o!=i.length&&-1!=o||(o=-1),-1==h&&(h=i.length,o=0),i[l=-1==o?0:o],d=p(i[l]).text(),(d=n?d:d.toLowerCase()).substr(0,r)==a&&this._matchedListItems.push(i[l]));this._prevQueryString=a,s=this._matchedListItems[0]}m.isNullOrUndefined(s)||(this._activeItem=p.inArray(s,i),this._isSingleSelect()&&!m.isNullOrUndefined(this.scrollerObj)?(this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this._calcScrollTop("active")})):this._isPopupShown()&&(this._removeListHover(),this._addListHover()))},_selectItem:function(e){this._isSingle||this._clearTextboxValue(),this._activeItem=e,this._addListHover(),this._enterTextBoxValue()},_focusItem:function(e){this._removeListHover(),this._activeItem=e,this._addListHover()},_selectFocusedItem:function(e){this._focusItem(e),this._enterTextBoxValue()},_selectShiftDown:function(e,t,i){i||this._clearTextboxValue();for(var s=e;s<=t;s++)p.inArray(s,this._disabledItems)<0&&p.inArray(s,this.model.selectedIndices)<0&&this._selectFocusedItem(s)},_selectShiftUp:function(e,t,i){i||this._clearTextboxValue();for(var s=t;e<=s;s--)p.inArray(s,this._disabledItems)<0&&p.inArray(s,this.model.selectedIndices)<0&&this._selectFocusedItem(s)},_selectShiftHome:function(e,t,i){if(i||this._clearTextboxValue(),0<=e&&e<=this._listSize-1){if(0==e)this._clearTextboxValue();else for(var s=e;t<=s;s--)p.inArray(s,this._disabledItems)<0&&p.inArray(s,this.model.selectedIndices)<0&&(this._activeItem=s,this._enterTextBoxValue());0==(this._activeItem=e)&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:0})}},_selectShiftEnd:function(e,t,i){if(i||this._clearTextboxValue(),e<=this._listSize-1){if(e==t)this._clearTextboxValue();else for(var s=e;s<=t;s++)p.inArray(s,this._disabledItems)<0&&p.inArray(s,this.model.selectedIndices)<0&&(this._activeItem=s,this._enterTextBoxValue());(this._activeItem=e)==t&&this._enterTextBoxValue(),this.scrollerObj.setModel({scrollTop:this.ultag.outerHeight()})}},_getLastFocusedLi:function(){return this._selectedIndices&&0<this._selectedIndices.length?this._selectedIndices[this._selectedIndices.length-1]:null},_getLastShiftFocusedLi:function(e,t){var i=t?e-1:e+1;return p.inArray(i,this._selectedIndices)<0?e:this._getLastShiftFocusedLi(i,t)},_shiftUp:function(e,t,i){if(null==e||e<0)this._checkDisableStep(0,t,!1,!1,!0);else if(0<e&&e<=this._listSize-1){var s=this._disableItemSelectUp(e-t);if(null!=s)if(null!=this._getLastFocusedLi())if(1<this._selectedIndices.length&&e-1==this._selectedIndices[this._selectedIndices.length-2])for(var n=1;n<=t&&e-n==this._selectedIndices[this._selectedIndices.length-2];n++)this._activeItem=e+1-n,this._removeTextBoxValue(),this._focusItem(e-n);else{var a=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!1);this._selectShiftUp(s,a,i)}else this._moveUp(e,t,!1)}},_shiftDown:function(e,t,i){if(null==e||e<0)this._checkDisableStep(-1,t,!0,!1,!0);else if(e<this._listSize-1){var s=this._disableItemSelectDown(e+t);if(null!=s)if(null!=this._getLastFocusedLi())if(1<this._selectedIndices.length&&e+1==this._selectedIndices[this._selectedIndices.length-2])for(var n=1;n<=t&&e+n==this._selectedIndices[this._selectedIndices.length-2];n++)this._activeItem=e-1+n,this._removeTextBoxValue(),this._focusItem(e+n);else{var a=this._getLastShiftFocusedLi(this._getLastFocusedLi(),!0);this._selectShiftDown(a,s,i)}else this._moveDown(e,t,!1)}},_moveUp:function(e,t,i){null==e||e<=0?this._checkDisableStep(0,t,!1,i):e>this._listSize-1?this._checkDisableStep(this._listSize-1,t,!1,i):0<e&&e<=this._listSize-1&&this._checkDisableStep(e,t,!1,i)},_moveDown:function(e,t,i){null==e||e<0?this._checkDisableStep(-1,t,!0,i):0==e?this._checkDisableStep(0,t,!0,i):e>=this._listSize-1?this._checkDisableStep(this._listSize-1,t,!0,i):e<this._listSize-1&&this._checkDisableStep(e,t,!0,i)},_checkDisableStep:function(e,t,i,s,n){var a=i?"_disableItemSelectDown":"_disableItemSelectUp",r=i?e+t:e-t,o=this[a](r);if(null==o)for(var l=t;0<=l&&(r=i?e+l:e-l,null==(o=this[a](r)));l--);null!=o&&(s?this._focusItem(o):this._selectItem(o),n&&s&&this._enterTextBoxValue())},_disableItemSelectDown:function(e){return(null==e||e<0)&&(e=0),e<this._listSize?p.inArray(e,this._disabledItems)<0?e:this._disableItemSelectDown(e+1):this._listSize-1},_disableItemSelectUp:function(e){if((null==e||e<0)&&(e=0),e<this._listSize)return p.inArray(e,this._disabledItems)<0?e:0<e?this._disableItemSelectUp(e-1):void 0},_preventDefaultAction:function(e,t){e.preventDefault?e.preventDefault():e.returnValue=!1,t&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},_OnKeyDown:function(e){if(this._uiInteract=!0,this.model.enabled&&!m.isNullOrUndefined(this.popupListWrapper)){this._itemId=null;var t,i=this._getLi();if(this._listSize=i.length,t=this.popupList.height(),i=this.ultag.children("li").outerHeight(),i=0!=Math.round(t/i)?Math.round(t/i):5,this._isSingle=this._isSingleSelect(),this._isSingle)switch(e.keyCode){case 38:if(e.altKey){0<this.ultag.find("li").length&&this._hideResult();break}case 33:var s=33==e.keyCode?i:1;this._moveUp(this._activeItem,s),this._preventDefaultAction(e,!0);break;case 8:this._preventDefaultAction(e);break;case 40:if(e.altKey){0<this.ultag.find("li").length&&this._showResult();break}case 34:s=34==e.keyCode?i:1;this._moveDown(this._activeItem,s),this._preventDefaultAction(e,!0);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1):this._moveUp(this._activeItem,1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1):this._moveDown(this._activeItem,1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:this._moveDown(this._listSize-1,0),this._preventDefaultAction(e);break;case 36:s=null!=this._activeItem?this._activeItem:this._listSize-1;this._moveUp(s,s),this._preventDefaultAction(e)}else switch(e.keyCode){case 38:e.altKey?0<this.ultag.find("li").length&&this._hideResult():e.shiftKey?this._shiftUp(this._activeItem,1,e.ctrlKey):this._moveUp(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 33:e.shiftKey?this._shiftUp(this._activeItem,i,e.ctrlKey):this._moveUp(this._activeItem,i,e.ctrlKey),this._preventDefaultAction(e);break;case 8:this._preventDefaultAction(e);break;case 40:e.altKey?0<this.ultag.find("li").length&&this._showResult():e.shiftKey?this._shiftDown(this._activeItem,1,e.ctrlKey):this._moveDown(this._activeItem,1,e.ctrlKey),this._preventDefaultAction(e);break;case 34:e.shiftKey?this._shiftDown(this._activeItem,i,e.ctrlKey):this._moveDown(this._activeItem,i,e.ctrlKey),this._preventDefaultAction(e);break;case 37:this.model.enableRTL?this._moveDown(this._activeItem,1,!1):this._moveUp(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 39:this.model.enableRTL?this._moveUp(this._activeItem,1,!1):this._moveDown(this._activeItem,1,!1),this._preventDefaultAction(e);break;case 9:case 27:this._isPopupShown()&&this._hideResult();break;case 35:e.shiftKey?this._selectShiftEnd(this._activeItem,this._listSize-1,e.ctrlKey):this._moveDown(this._activeItem,this._listSize,e.ctrlKey),this._preventDefaultAction(e);break;case 36:s=null!=this._activeItem?this._activeItem:this._listSize-1;e.shiftKey?this._selectShiftHome(this._activeItem,0,e.ctrlKey):this._moveUp(this._activeItem,s,e.ctrlKey),this._preventDefaultAction(e)}}},_OnKeyUp:function(e){if(this.model.enabled&&!m.isNullOrUndefined(this.popupListWrapper)){this._preventDefaultAction(e);var t;e.target;if(null==this._activeItem&&(this._activeItem=this._getLi().index(this.popupList.find("ol,ul").children("li.e-hover"))),""==this._trim(this._visibleInput.val())&&38==e.keyCode&&40==e.keyCode)return this._hideResult(),!1;switch(e.keyCode){case 38:case 40:case 37:case 39:case 20:case 16:case 17:case 18:case 35:case 36:case 144:case 27:case 9:break;case 13:!this._isSingle&&this._isPopupShown()&&(e.ctrlKey||e.shiftKey)&&0<=this._activeItem?this._selectAndUnselect():!this._isPopupShown()||e.ctrlKey||e.shiftKey?this._isPopupShown()&&this._hideResult():(m.isNullOrUndefined(this.inputSearch)||(0==this.getSelectedItem().length||!this.listitems[0].classList.contains("e-active")&&0<=this._activeItem?(this.selectItemByIndex(this._activeItem),p(this.listitems[this._activeItem]).removeClass("e-hover")):(t=this._getLastFocusedLi(),"none"==this.model.multiSelectMode&&!this.model.showCheckbox||(this.unselectItemByIndex(t),p(this.listitems[t]).removeClass("e-hover")))),this._hideResult()),this._preventDefaultAction(e);break;case 32:this._isPopupShown()&&this._isSingle&&this._hideResult(),!this._isSingle&&this._isPopupShown()&&0<=this._activeItem&&this._selectAndUnselect(),this._preventDefaultAction(e);break;case 8:"visualmode"==this.model.multiSelectMode&&this._deleteLastBox(),this._preventDefaultAction(e);break;case 46:if("visualmode"==this.model.multiSelectMode||this.model.showCheckbox){this._deleteBox(this._ulBox.children("li.e-active"));break}}}},_isSingleSelect:function(){return!this.model.showCheckbox&&"none"==this.model.multiSelectMode},_selectAndUnselect:function(){this.model.showCheckbox?this._isChecked(this._getActiveItem().find(".e-checkwrap")[0])?this._removeTextBoxValue():this._enterTextBoxValue():"none"!=this.model.MultiSelectMode&&(this._getActiveItem().hasClass("e-active")?this._removeTextBoxValue():this._enterTextBoxValue())},_targetFocus:function(){this.model.enabled&&!this._isFocused&&(this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus e-popactive"),this._isFocused=!0,this._trigger("focusIn"))},_targetBlur:function(){this.model.enabled&&(this._isFocused=!1,this.wrapper.removeClass("e-focus e-popactive"),this._setWatermark(),this._trigger("focusOut"))},_getLocalizedLabels:function(e){return(this._localizedLabels[e]===i?m.DropDownList.Locale["en-US"]:this._localizedLabels)[e]},_wireEvents:function(){this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"keydown",this._OnKeyDown),m.isNullOrUndefined(this.popupList)||this._on(this.popupList,"keydown",this._OnKeyDown),m.isNullOrUndefined(this.popupList)||this._on(this.popupList,"keyup",this._OnKeyUp),this._on(this.wrapper,"keyup",this._OnKeyUp),m.isNullOrUndefined(this.popupList)||this._on(this.popupList,"keypress",this._OnKeyPress),this._on(this.wrapper,"keypress",this._OnKeyPress)},_unwireEvents:function(){this._off(this.wrapper,"focus",this._targetFocus),this._off(this.wrapper,"blur",this._targetBlur),this._off(this.wrapper,"keydown",this._OnKeyDown),m.isNullOrUndefined(this.popupList)||this._off(this.popupList,"keydown",this._OnKeyDown),m.isNullOrUndefined(this.popupList)||this._off(this.popupList,"keyup",this._OnKeyUp),this._off(this.wrapper,"keyup",this._OnKeyUp),m.isNullOrUndefined(this.popupList)||this._off(this.popupList,"keypress",this._OnKeyPress),this._off(this.wrapper,"keypress",this._OnKeyPress),p(window).off("resize",p.proxy(this._OnWindowResize,this))},_multiItemSelection:function(e,t){this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel();for(var i=0;i<e.length;i++){var s=t?this._rawList.length-(e.length-i):i;this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"))}this._setWatermark()},_appendCheckbox:function(e,t){this._ulBox||"visualmode"!=this.model.multiSelectMode||this._renderBoxModel();for(var i=0;i<e.length;i++){var s=t?this._rawList.length-(e.length-i):i,n=document.createElement("input"),a=document.createElement("span");this._setAttr(n,{type:"checkbox",name:"list"+s,"data-role":"none",id:this._id+"_check"+s})._setClass(n,"e-check-input")._setAttr(a,{name:"list"+s+"_wrap","data-role":"none",id:this._id+"_check"+s+"wrap",unselectable:"on","aria-checked":!1})._setClass(a,"e-checkwrap e-icon "),a.appendChild(n),e[i].insertBefore(a,e[i].childNodes[0]),this._hasClass(e[i],"chkselect")&&(this._activeItem=s,this._enterTextBoxValue(),this._removeClass(e[i],"chkselect"))}this._setWatermark()},_onCheckChange:function(e){this.checkChange=!0;e="INPUT"===e.target.nodeName?e.target.parentElement:e.target;this._activeItem=p.inArray(p(e).parents("li")[0],this._getLi()),this._hasClass(e,"e-check-act")?this._removeTextBoxValue():this._enterTextBoxValue(),this.checkChange=!1},_isChecked:function(e){return this._hasClass(e,"e-check-act")&&1==p(e).children(".e-check-input")[0].checked},_removeCheck:function(){this._getLi().find(".e-checkwrap").remove()},_resetCheck:function(){var e,t=this._getLi();t.find(".e-check-act").removeClass("e-check-act").attr("aria-checked",!1),e=t.find(".e-check-input:checked");for(var i=0;i<e.length;i++)e[i].checked=!1}}),m.DropDownList.Locale=m.DropDownList.Locale||{},m.DropDownList.Locale.default=m.DropDownList.Locale["en-US"]={emptyResultText:"No suggestions",watermarkText:""},m.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},m.VirtualScrollMode={Normal:"normal",Continuous:"continuous"}}(jQuery,Syncfusion),function(m,g){g.widget({ejNumericTextbox:["ej.NumericTextbox","e-numerictextbox"],ejPercentageTextbox:["ej.PercentageTextbox","e-percentagetextbox"],ejCurrencyTextbox:["ej.CurrencyTextbox","e-currencytextbox"]},{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0,requireParser:!0},defaults:{width:"",height:"",value:null,name:null,htmlAttributes:{},minValue:-Number.MAX_VALUE,maxValue:Number.MAX_VALUE,incrementStep:1,decimalPlaces:0,validateOnType:!1,cssClass:"",enablePersistence:!1,showSpinButton:!0,locale:"en-US",enableStrictMode:!1,showRoundedCorner:!1,readOnly:!1,enabled:!0,enableRTL:!1,watermarkText:"Enter value",validationRules:null,validationMessage:null,groupSeparator:null,groupSize:null,positivePattern:null,currencySymbol:null,negativePattern:null,change:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{minValue:"number",maxValue:"number",incrementStep:"number",decimalPlaces:"number",showSpinButton:"boolean",enableStrictMode:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",locale:"string",watermarkText:"string",cssClass:"string",readOnly:"boolean",enabled:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data",validateOnType:"boolean",groupSeparator:"string"},observables:["value"],_setModel:function(e){var t,i=!1;for(t in e)switch(t){case"value":g.isNullOrUndefined(e.minValue)&&g.isNullOrUndefined(e.maxValue)?(this._setValue(e[t],!0),e[t]=this.model.value):(this.model.value=this._checkNumValue(e[t]),this._localizedFormat(),this._raiseChangeEvent(!0),i=!0);break;case"enableRTL":this._enableRTL(e[t]);break;case"width":this._setWidth(e[t]);break;case"height":this._setHeight(e[t]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"minValue":if(isNaN(e[t]))return;this.model.minValue=-1==this.model.decimalPlaces?e[t]:parseFloat(e[t].toFixed(this.model.decimalPlaces)),this._updateValueAttributes(this.model.minValue,this.model.maxValue,this.model.value),i=!0;break;case"maxValue":if(isNaN(e[t]))return;this.model.maxValue=-1==this.model.decimalPlaces?e[t]:parseFloat(e[t].toFixed(this.model.decimalPlaces)),this._updateValueAttributes(this.model.minValue,this.model.maxValue,this.model.value),i=!0;break;case"incrementStep":if(isNaN(e[t]))return;this.model.incrementStep=-1==this.model.decimalPlaces?e[t]:parseFloat(e[t].toFixed(this.model.decimalPlaces));break;case"enableStrictMode":this.model.enableStrictMode=e[t],i=!0;break;case"showSpinButton":this._showSpin(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"locale":this.model.decimalPlaces=g.isNullOrUndefined(this._options.decimalPlaces)&&this.model.decimalPlaces===this.culture.numberFormat.decimals||-1===this._options.decimalPlaces?-1:this.model.decimalPlaces,this._setLocalize(e[t]),this._options.decimalPlaces=this.model.decimalPlaces,e[t]=this.model.locale;break;case"decimalPlaces":this._setDecimal(e[t]),g.isNullOrUndefined(this._options)&&(this._options={}),this._options.decimalPlaces=e[t];break;case"cssClass":this._setSkin(e[t]);break;case"readOnly":this._setReadOnly(e[t]);break;case"enabled":e[t]?this.enable():this.disable();break;case"watermarkText":g.isNullOrUndefined(this._options)||(this._options=[]),this._options.watermarkText=this.model.watermarkText=e[t],this._localizedLabels.watermarkText=this.model.watermarkText,this._changeWatermark(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"groupSeparator":this._checkSeparator(e[t]),e[t]=this.model.groupSeparator;break;case"positivePattern":case"negativePattern":case"groupSize":case"currencySymbol":this.model[t]=e[t],this._options[t]=e[t],this._initCustomValue(),e[t]=this.model[t],this._setValue(this.model.value,!0)}i&&(this._validateMinMaxValue(!0,!0),e.value=this.model.value,e.maxValue=this.model.maxValue,e.minValue=this.model.minValue,this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),this._updateValueAttributes(this.model.minValue,this.model.maxValue,this.model.value)),this._checkSeparator(this.model.groupSeparator),this.element.val(this._removeSeparator(this.model.value)),this._updateSeparator(),this._checkErrorClass()},_destroy:function(){this.wrapper&&(this.element.insertBefore(this.wrapper),this.wrapper.remove()),this._isWatermark&&this.element.removeAttr("placeholder"),this.element.val("").removeClass("e-input e-disable e-no-spin").empty(),this.element.removeAttr("disabled aria-disabled"),this.wrapper.removeAttr("aria-valuemin aria-valuemax aria-valuenow aria-live"),this._cloneElement.attr("role")||this.element.removeAttr("role"),this.element.css("display","block")},_init:function(e){if(this._cloneElement=this.element.clone(),this._options=g.isNullOrUndefined(e)?{}:e,!this.element.is("input")||!this.element.is("input[type=text]")&&!this.element.is("input[type=number]")&&this.element.attr("type"))return this._destroy(),!1;0<this.model.decimalPlaces&&(this.element.is("input[type=number]")?this.element[0].type="tel":this.element[0].type="text"),this.element.is("input[type=number]")&&this.element.addClass("e-no-spin"),this._isWatermark="placeholder"in document.createElement("input"),this.model.locale="en"==g.preferredCulture(this.model.locale).name?"en-US":g.preferredCulture(this.model.locale).name,this._localizedLabels=this._getLocalizedLabels(),this.culture=g.preferredCulture(this.model.locale),this._browsername=g.browserInfo().name,this._initCustomValue(),this._prevSeparator=null,this._checkSeparator(this.model.groupSeparator),this._checkAttribute(),this._renderControl(),this._setValues(),this._wireEvents(),this._initObjects(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._updateSeparator(),e&&null!=e.value&&this._trigger("_change",{value:this.model.value})},_checkAttribute:function(){for(var e,t,i=["min","max","step","readonly","disabled","placeholder"],s=["minValue","maxValue","incrementStep","readOnly","enabled","watermarkText"],n=0;n<i.length;n++)e=this.element.attr(i[n]),t=s[n],g.isNullOrUndefined(e)||g.isNullOrUndefined(this._options)||!g.isNullOrUndefined(this._options[t])||("watermarkText"==t?this._options[t]=e:this.model[t]="disabled"!=t&&"readOnly"!=t?g.parseFloat(e,this.model.locale):"readOnly"==t?this.element.is("[readonly]"):!this.element.is("[disabled]"))},_addAttr:function(e){var s=this;m.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"accesskey"==i?s._hiddenInput.attr(t,e):"disabled"==i&&"disabled"==e?s.disable():"readonly"==i&&"readOnly"==e?s._setReadOnly(!0):"tabindex"==i?(s._hiddenInput.attr(t,e),s.element.attr(t,e)):("style"!=i&&"id"!=i&&("aria-label"==i||g.isValidAttr(s.element[0],t))?s.element:s.wrapper).attr(t,e)})},_setValues:function(){var e;this._id=this.element[0].id,this._textBox=this._hiddenInput[0],this._error=!1,this._timeout=null,this.isValidState=!0,this._allowkeyboard=!0,this._validateOnType=!1,this._focused=!1,this._startValue=0,"ej.CurrencyTextbox"===this.sfType&&this.model.minValue==-Number.MAX_VALUE&&(this.model.minValue=0),g.isNullOrUndefined(this.model.decimalPlaces)&&("ej.CurrencyTextbox"===this.sfType?this.model.decimalPlaces=g.preferredCulture(this.model.locale).numberFormat.currency.decimals:this.model.decimalPlaces=g.preferredCulture(this.model.locale).numberFormat.decimals),0<=this.model.decimalPlaces&&(this.model.minValue=parseFloat(this.model.minValue.toFixed(this.model.decimalPlaces)),this.model.maxValue=parseFloat(this.model.maxValue.toFixed(this.model.decimalPlaces))),this.model.minValue!=-Number.MAX_VALUE&&(this._startValue=this.model.minValue),g.isNullOrUndefined(this._options)||g.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this._localizedFormat(),this._validateMinMaxValue(!0),this._updateSymbol(this.model.locale),g.isNullOrUndefined(this.model.value)?(e=this.model.value,this.wrapper.removeClass("e-valid")):(e=-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.wrapper.addClass("e-valid")),this.element.val(e)},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){var e=this.model.validationRules;this.element.rules("add",e);var t,i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),s=this.element.attr("name");for(t in i.settings.messages[s]={},e){var n=null;if(!g.isNullOrUndefined(e[t])){if(g.isNullOrUndefined(e.messages&&e.messages[t]))for(var a in i.settings.messages[s][t]=m.validator.messages[t],this.model.validationMessage)t==a&&(n=this.model.validationMessage[t]);else n=e.messages[t];i.settings.messages[s][t]=null!=n?n:m.validator.messages[t]}}},_updateValueAttributes:function(e,t,i){e&&e!=-Number.MAX_VALUE&&this.wrapper.attr({"aria-valuemin":e}),t&&t!=Number.MAX_VALUE&&this.wrapper.attr({"aria-valuemax":t}),i&&this.wrapper.attr({"aria-valuenow":i})},_renderControl:function(){this.wrapper=g.buildTag("span.e-widget e-pinch"),this.innerWrap=g.buildTag("span.e-in-wrap e-box "),this.wrapper.attr("style",this.element.attr("style")),"ej.NumericTextbox"===this.sfType?this.wrapper.addClass("e-numeric"):"ej.PercentageTextbox"===this.sfType?this.wrapper.addClass("e-percent"):"ej.CurrencyTextbox"===this.sfType&&this.wrapper.addClass("e-currency"),this.wrapper.append(this.innerWrap).insertAfter(this.element),this.innerWrap.append(this.element),this._hiddenInput=g.buildTag("input","",{},{type:"text"}).insertBefore(this.element),this._hiddenInput.attr("data-role","none"),this._hiddenInput[0].tabIndex=this.element[0].tabIndex,this._hiddenInput.attr("accesskey",this.element[0].accessKey),this.element[0].accessKey="",this._hiddenInput.css("display","block"),this.element.css("display","none"),this._isWatermark||(this._hiddenSpan=g.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this._localizedLabels.watermarkText),this._hiddenSpan.css("display","none"),this._on(this._hiddenSpan,"mousedown",this._focusIn),this._on(this._hiddenSpan,"mousewheel",this._mouseWheel),this._on(this._hiddenSpan,"DOMMouseScroll",this._mouseWheel)),this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,null==this.element.attr("name")&&this.element.attr("name",this.model.name),this.element.addClass("e-input"),g.isNullOrUndefined(this.model.value)&&""!=this.element[0].value?("."==g.preferredCulture(this.model.locale).numberFormat[","]&&(this.element[0].value=this.element[0].value.replace(".",",")),this.model.value=this._checkNumValue(this.element[0].value)):("string"==typeof this.model.value&&"."==g.preferredCulture(this.model.locale).numberFormat[","]&&(this.model.value=this.model.value.replace(".",",")),this.model.value=this._checkNumValue(this.model.value)),this._hiddenInput.attr({value:this.model.value}).addClass("e-input"),this.wrapper.attr({role:"spinbutton"}),this._updateValueAttributes(this._options.minValue,this._options.maxVal,this.model.value),this.element.attr({"aria-live":"assertive",value:this.model.value});var e=m('<span class="e-select"><span class="e-spin e-spin-up " role="button" aria-label="Increase Value" unselectable="on" /><span class="e-spin e-spin-down" role="button" aria-label="Decrease Value" unselectable="on" /></span>');e.find(".e-spin-up").append(g.buildTag("span.e-icon e-arrow e-arrow-sans-up").attr({role:"presentation",unselectable:"on"})),e.find(".e-spin-down").append(g.buildTag("span.e-icon e-arrow e-arrow-sans-down").attr({role:"presentation",unselectable:"on"})),this.innerWrap.append(e),this.spin=this.wrapper.find(".e-select"),this.spinUp=this.wrapper.find(".e-spin-up"),this.spinDown=this.wrapper.find(".e-spin-down"),this._setWidth(this.model.width),this._setHeight(this.model.height),""!=this.model.cssClass&&this._setSkin(this.model.cssClass),this._showSpin(this.model.showSpinButton),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._enableRTL(this.model.enableRTL),this.model.readOnly&&this._setReadOnly(this.model.readOnly),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this.enable():this.disable()},_initObjects:function(){this._preVal=this.model.value,null===this.model.value?(this.isValidState=!0,this._hiddenInput.val(null)):(this.model.value<this.model.minValue||this.model.value>this.model.maxValue)&&(this.isValidState=!1),this._checkErrorClass(),this._setWaterMark()},_showSpin:function(e){e?(this.spin&&(this.spin.show(),this.innerWrap.addClass("e-padding")),this._spinEvents("_on")):(this.spin&&(this.spin.hide(),this.innerWrap.removeClass("e-padding")),this._spinEvents("_off"))},_roundedCorner:function(e){e&&!this.innerWrap.hasClass("e-corner")?this.innerWrap.addClass("e-corner"):this.innerWrap.hasClass("e-corner")&&this.innerWrap.removeClass("e-corner")},_enableRTL:function(e){e?(this.spin?this.wrapper:this.element).addClass("e-rtl"):(this.spin?this.wrapper:this.element).removeClass("e-rtl")},_setWidth:function(e){""!=e?this.wrapper.width(e):this.model.width=this.wrapper.outerWidth()},_setHeight:function(e){""!=e?this.wrapper.height(e):this.model.height=this.wrapper.outerHeight()},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)},_setValue:function(e,t){this._isWatermark||this._hiddenSpan.css("display","none"),this.model.value=this._checkNumValue(e),this._validateMinMaxValue(!1),this._checkErrorClass(),this._localizedFormat(),this._raiseChangeEvent(t),this._setWaterMark()},_setLocalize:function(e){var t=g.preferredCulture(this.model.locale).numberFormat[","];this.model.locale="en"==g.preferredCulture(e).name?"en-US":g.preferredCulture(e).name,this.model.groupSeparator=g.isNullOrUndefined(this._options.groupSeparator)&&t===this.model.groupSeparator?g.preferredCulture(this.model.locale).numberFormat[","]:this.model.groupSeparator,this._localizedLabels=this._getLocalizedLabels(),g.isNullOrUndefined(this._options)||g.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),this._localizedLabelToModel(),this.culture=g.preferredCulture(this.model.locale),this._initCustomValue(),this._updateSymbol(this.model.locale),this._localizedFormat(),this._changeWatermark(this.model.watermarkText),t=g.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(t)},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText},_updateSymbol:function(e){this._percentSymbol=g.preferredCulture(e).numberFormat.percent.symbol,this._currencySymbol=g.preferredCulture(e).numberFormat.currency.symbol},_setDecimal:function(e){this.model.decimalPlaces=e,this._localizedFormat()},_validateMinMaxValue:function(e,t){var i=!1;this.model.minValue>this.model.maxValue&&(this.model.minValue=this.model.maxValue),!g.isNullOrUndefined(this.model.value)&&this.model.minValue>this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this._startValue=this.model.value=this.model.minValue):this.isValidState=!1,i=!0):!g.isNullOrUndefined(this.model.value)&&this.model.maxValue<this.model.value?(1!=this.model.enableStrictMode?(this.isValidState=!0,this.model.value=this.model.maxValue):this.isValidState=!1,i=!0):this.isValidState=!0,this.model.minValue==this.model.maxValue&&(this._startValue=this.model.minValue),i&&e&&(e=this._formatValue(this.model.value,"n",!0),this._hiddenInput.val(e),e=g.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._formatValue(this.model.value,"n",!0):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(e),this._localizedFormat(),this._raiseChangeEvent(t))},_convertToExponetial:function(e){var t,i,s,n,a="",r=e<0;e=e.toString(),i=g.preferredCulture(this.model.locale).numberFormat,s=e=e.replace(".",i["."]);"ej.NumericTextbox"===this.sfType?(t=r?i.pattern[0]:g.isNullOrUndefined(i.pattern[1])?"n":i.pattern[1],e=r?e.replace("-",""):e,n=""):"ej.PercentageTextbox"===this.sfType?(t=r?i.percent.pattern[0]:i.percent.pattern[1],e=r?e.replace("-",""):e,n=i.percent.symbol):"ej.CurrencyTextbox"===this.sfType&&(t=r?i.currency.pattern[0]:i.currency.pattern[1],e=r?e.replace("-",""):e,n=i.currency.symbol);for(var o=0,l=t.length;o<l;o++){var d=t.charAt(o);a+="n"===d?e:"$"===d||"%"===d?n:d}return{formattedValue:a,unformattedValue:s}},_localizedFormat:function(){var e,t;this.culture=g.preferredCulture(this.model.locale),this._decimalSep=g.preferredCulture(this.model.locale).numberFormat["."],g.isNullOrUndefined(this.model.value)?this._textBox.value="":-1==this.model.value.toString().indexOf("e")?(this._textBox.value=this._removeSeparator(this.model.value),this._focused||""==this._textBox.value?(t=this._convertToExponetial(this.model.value),this._textBox.value=t.unformattedValue,this._focused||""==this._textBox.value||(this._textBox.value=t.formattedValue)):(this._textBox.value=this._formatValue(this.model.value,"n",!0),"ej.PercentageTextbox"===this.sfType?this._appendPercentSymbol(this._textBox.value):"ej.CurrencyTextbox"===this.sfType&&this._appendCurrencySymbol(this._textBox.value),e="ej.CurrencyTextbox"===this.sfType?this._textBox.value.indexOf(this._currencySymbol):"ej.PercentageTextbox"===this.sfType?this._textBox.value.indexOf(this._percentSymbol):-1,-1==this.model.decimalPlaces&&0!=this._afterDec&&(this._textBox.value=this._textBox.value.substr(0,this._textBox.value.lastIndexOf(this._decimalSep)),1<e&&(g.isNullOrUndefined(this._afterDec)||""==this._afterDec)&&("ej.CurrencyTextbox"===this.sfType&&(this._textBox.value=this._textBox.value+" "+this._currencySymbol),"ej.PercentageTextbox"===this.sfType&&(this._textBox.value=this._textBox.value+" "+this._percentSymbol)),-1!=this.model.decimalPlaces||g.isNullOrUndefined(this._afterDec)||""==this._afterDec||(0<=(t=this._textBox.value.lastIndexOf(this._decimalSep))&&(this._textBox.value=this._textBox.value.substr(0,t)),t=this._afterDec,1<e&&("ej.CurrencyTextbox"===this.sfType&&(t=t+" "+this._currencySymbol),"ej.PercentageTextbox"===this.sfType&&(t=t+" "+this._percentSymbol)),this._textBox.value=this._textBox.value+this._decimalSep+t)))):this._textBox.value=this.model.value.toString()},_checkNumValue:function(e){return"string"==typeof e&&(e=this._changeSeparator?this._replaceSeparator(e,this.model.groupSeparator,g.preferredCulture(this.model.locale).numberFormat[","]):e),"string"!=typeof e||isNaN(this._parseValue(e))?"number"!=typeof e||isNaN(e)?null:e:(e=this._parseValue(e),parseFloat(e))},_setReadOnly:function(e){(this.model.readOnly=e)?(this.element.attr("readonly",!0),this._hiddenInput.attr("readonly",!0)):(this.element.prop("readonly",!1),this._hiddenInput.prop("readonly",!1))},_setWaterMark:function(){null!=this._localizedLabels.watermarkText&&""===this._textBox.value&&""===m.trim(this._hiddenInput.val())&&(this._isWatermark?(this._hiddenInput.attr("placeholder",this._localizedLabels.watermarkText),this.element.attr("placeholder",this._localizedLabels.watermarkText)):this._hiddenSpan.css("display","block").text(this._localizedLabels.watermarkText))},_changeWatermark:function(e){if(!this.model.enabled)return!1;this._isWatermark?(this._hiddenInput.attr("placeholder",e),this.element.attr("placeholder",e)):this._hiddenSpan.text(e)},_setSelectionRange:function(t,i){var e=this._textBox;try{e.setSelectionRange?"edge"==this._browsername?setTimeout(function(){e.setSelectionRange(t,i)}):e.setSelectionRange(t,i):e.createTextRange&&n(e.createTextRange())}catch(e){var s=this;window.setTimeout(function(){document.body.focus(),s._textBox.select(),document.selection&&n(document.selection.createRange())},1)}function n(e){e.collapse(!0),e.moveEnd("character",i),e.moveStart("character",t),e.select()}},_getSelection:function(e){if("number"!=this._textBox.type){var t=null;return document.selection?""===(t=document.selection.createRange()).text?t.text:this._removeFormats(t.text):null==e?this.model.value:t=this._removeFormats(e.substring(this._textBox.selectionStart,this._textBox.selectionEnd))}},_caretPosition:function(){var e,t=this._textBox,i=0;if("number"!=t.type)return document.selection?(t.focus(),(e=document.selection.createRange()).moveStart("character",-t.value.length),i=e.text.length):!t.selectionStart&&"0"!=t.selectionStart||(i=t.selectionEnd),i},_appendPercentSymbol:function(e){this._percentSymbol&&(e=e.replace(this._percentSymbol,"")),e.indexOf(g.preferredCulture(this.model.locale).numberFormat.percent.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e)/100,"p",!0)),this._percentSymbol=g.preferredCulture(this.model.locale).numberFormat.percent.symbol},_appendCurrencySymbol:function(e){this._currencySymbol&&(e=e.replace(this._currencySymbol,"")),e.indexOf(g.preferredCulture(this.model.locale).numberFormat.currency.symbol)<0&&(this._textBox.value=this._formatValue(this._parseValue(e),"c",!0)),this._currencySymbol=g.preferredCulture(this.model.locale).numberFormat.currency.symbol},_removeFormats:function(e){var t=g.preferredCulture(this.model.locale).numberFormat[","];return null!=e?"."==t?e.toString().replace(/["."]/g,""):e.toString().match(new RegExp(t,"g"))?e.toString().replace(new RegExp(t,"g"),""):e:null},_checkErrorClass:function(e){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},enable:function(){this.model.enabled=!0,this.element[0].disabled=!1,this.element.prop("disabled",!1),this._hiddenInput.prop("disabled",!1),this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this._hiddenInput.removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select").removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.find(".e-select span.e-icon.e-arrow").removeClass("e-disable"),this.wrapper.removeClass("e-disable-wrap")},disable:function(){this.model.enabled=!1,this.element[0].disabled=!0,this.element.attr("disabled","disabled"),this._hiddenInput.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this._hiddenInput.addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select").addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.find(".e-select span.e-icon.e-arrow").addClass("e-disable"),this.wrapper.addClass("e-disable-wrap")},getValue:function(){return this.model.value},_wireEvents:function(){this._on(this._hiddenInput,"focus",this._focusIn),this._on(this.element,"paste",this._paste),this._on(this.element,"blur",this._focusOut),this._on(this.element,"keydown",this._keyDown),this._on(this.element,"keypress",this._keyPress),this._on(this.element,"mousewheel",this._mouseWheel),this._on(this.element,"DOMMouseScroll",this._mouseWheel)},_spinEvents:function(e){this[e](this.spinUp,"mousedown mouseup touchstart touchend",this._spinUpClick),this[e](this.spinDown,"mousedown mouseup touchstart touchend",this._spinDownClick)},_isIE8:function(){var e=!1,t=g.browserInfo();return"msie"==t.name&&"8.0"==t.version&&(e=!0),e},_spinUpClick:function(e){var t,i=!1;e.button?i=this._isIE8()?1!=e.button:0!=e.button:e.which&&(i=3==e.which),i||(t=this,e.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this.wrapper.find(".e-animate").removeClass("e-animate"),this.spinUp.addClass("e-animate"),this._on(this.spinUp,"mouseleave",this._mouseUpClick),this.spinUp.addClass("e-active"),t=this,"mouseup"==e.type||"touchend"==e.type?(this._updateInputField("increment"),this.spinUp.removeClass("e-active"),this._off(m(document),"mouseup",this._mouseUpClick)):"mousedown"!=e.type&&"touchstart"!=e.type||(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){t._updateInputField("increment")},150),this._on(m(document),"mouseup",this._mouseUpClick))))},_spinDownClick:function(e){var t,i=!1;e.button?i=this._isIE8()?1!=e.button:0!=e.button:e.which&&(i=3==e.which),i||(t=this,e.preventDefault(),clearTimeout(this._timeout),this.model.enabled&&!this.model.readOnly&&(this.wrapper.find(".e-animate").removeClass("e-animate"),this.spinDown.addClass("e-animate"),this._on(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.addClass("e-active"),"mouseup"==e.type||"touchend"==e.type?(this._updateInputField("decrement"),this.spinDown.removeClass("e-active"),this._off(m(document),"mouseup",this._mouseUpClick)):"mousedown"!=e.type&&"touchstart"!=e.type||(this._focused||this._hiddenInput[0].focus(),this._timeout=setInterval(function(){t._updateInputField("decrement")},150),this._on(m(document),"mouseup",this._mouseUpClick))))},_mouseUpClick:function(e){e.stopPropagation(),clearTimeout(this._timeout),this._off(this.spinUp,"mouseleave",this._mouseUpClick),this._off(this.spinDown,"mouseleave",this._mouseUpClick),this.spinDown.removeClass("e-active"),this.spinUp.removeClass("e-active")},_mouseWheel:function(e){var t,i;e.preventDefault(),this._focused||this.element[0].focus(),this.model.enabled&&!this.model.readOnly&&((i=e.originalEvent).wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),0<t?this._updateInputField("increment"):t<0&&this._updateInputField("decrement"),this._cancelEvent(e))},_numberValue:function(){var e=this._textBox.value;return"ej.NumericTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"n",!0)),"ej.PercentageTextbox"!==this.sfType&&"ej.CurrencyTextbox"!==this.sfType||(e=this._formatValue(this.model.value,"n",!0)),e="string"!=typeof e||isNaN(this._parseValue(e))?"":e},_formatValue:function(e,t,i){return i&&this._updateCultureInfo(),e=-1!=this.model.decimalPlaces||-1==this.model.decimalPlaces&&null==this.model.value?g.format(e,t+this.model.decimalPlaces,this.model.locale):g.format(e,t+this._afterDec.length,this.model.locale),i&&this._restCultureInfo(),e},_parseValue:function(e){this._updateCultureInfo();e=g.parseFloat(e,this.model.locale);return this._restCultureInfo(),e},_initCustomValue:function(){var e,t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric";switch(t){case"percent":case"currency":e=this.culture.numberFormat[t],g.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),g.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=e.pattern[1]),g.isNullOrUndefined(this._options.currencySymbol)&&"currency"==t&&(this.model.currencySymbol=e.symbol),g.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0]);break;case"numeric":e=this.culture.numberFormat,g.isNullOrUndefined(this._options.negativePattern)&&(this.model.negativePattern=e.pattern[0]),g.isNullOrUndefined(this._options.positivePattern)&&(this.model.positivePattern=g.isNullOrUndefined(e.pattern[1])?"n":e.pattern[1]),g.isNullOrUndefined(this._options.groupSize)&&(this.model.groupSize=e.groupSizes[0])}},_updateCultureInfo:function(e){var t="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric",i="numeric"==t?this.culture.numberFormat:this.culture.numberFormat[t];this._oldNegativePattern=i.pattern[0],this._oldGroupSize=i.groupSizes[0],i.pattern[0]=this.model.negativePattern,i.groupSizes[0]=this.model.groupSize,this._oldPositivePattern=i.pattern[1],i.pattern[1]=this.model.positivePattern,"currency"==t&&(this._oldcurrencySymbol=i.symbol,i.symbol=this.model.currencySymbol)},_restCultureInfo:function(){var e="ej.PercentageTextbox"==this.sfType?"percent":"ej.CurrencyTextbox"==this.sfType?"currency":"numeric",t="numeric"==e?this.culture.numberFormat:this.culture.numberFormat[e];t.pattern[0]=this._oldNegativePattern,t.groupSizes[0]=this._oldGroupSize,t.pattern[1]=this._oldPositivePattern,"currency"==e&&(t.symbol=this._oldcurrencySymbol)},_toggleTextbox:function(e){this._hiddenInput.toggle(e),this.element.toggle(!e)},_paste:function(e){var t;window.clipboardData&&window.clipboardData.getData?t=window.clipboardData.getData("Text"):e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(t=e.originalEvent.clipboardData.getData("text/plain"));var i=g.parseFloat(t,this.model.locale);isNaN(i)&&t&&this._cancelEvent(e)},_focusIn:function(e){var t;this.model.readOnly||(this._focused=!0,g.isNullOrUndefined(this.model.value)||this.element.val(this._removeSeparator(this.model.value)),this._toggleTextbox(!1),this._textBox=this.element[0],this.element[0].focus(),this._preVal=this.model.value,this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),this._error||(""!=this._textBox.value&&(t=this._formatValue(this._textBox.value,"n",!0),-1==this.model.decimalPlaces&&(this._separateValue(this._textBox.value.toString(),!0,!0),g.isNullOrUndefined(this._afterDec)||""==this._afterDec||(t=this._beforeDec+this._decimalSep+this._afterDec)),this._textBox.value=t,this._hiddenInput.val(t)),this._setSelectionRange(0,this._textBox.value.length)),this._trigger("focusIn",{value:this.model.value}))},_separateValue:function(e,t,i){var s=t?e.lastIndexOf(this._decimalSep):e.lastIndexOf(".");this._beforeDec=0<=s?e.substr(0,s):e,!t&&i&&(this._afterDec=0<=s?e.substr(s+1):"")},_focusOut:function(e){var t;this._focused=!1,this.wrapper.removeClass("e-focus"),this._separateValue(this._textBox.value,!1,!0),this._error||(""!=this._textBox.value?((t=g.parseFloat(this._textBox.value,this.model.locale))<this.model.minValue?this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.minValue,"n",!1):t>this.model.maxValue&&(this.model.enableStrictMode?this.isValidState=!1:this._textBox.value=this._formatValue(this.model.maxValue,"n",!1)),this.model.value=-1!=this.model.decimalPlaces||g.isNullOrUndefined(this._afterDec)||-1!=this._textBox.value.lastIndexOf(this._decimalSep)||-1!=t.toString().indexOf("e")?g.parseFloat(this._textBox.value,this.model.locale):g.parseFloat(this._textBox.value+this._decimalSep+this._afterDec,this.model.locale),isNaN(this.model.value)&&!this.model.value&&(this.model.value=null,this.isValidState=!1),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0],this._localizedFormat(),this._checkErrorClass()):(t=""==this._textBox.value?null:this._textBox.value,this.model.value=t,this._hiddenInput.val(t),this._toggleTextbox(!0),this._textBox=this._hiddenInput[0]),null===this.model.value||this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue?this.isValidState=!0:this.model.enableStrictMode&&(this.isValidState=!1),this._raiseChangeEvent(),this._setWaterMark(),t=g.isNullOrUndefined(this.model.value)?this.model.value:-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,this.element.val(t),this._updateSeparator(),this._trigger("focusOut",{value:this.model.value})),this._checkErrorClass(),this._afterDec=""},_cancelEvent:function(e){return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation(),e.preventDefault(),!1},_updateInputField:function(e){this.isValidState=!0,this._focused||m(this._hiddenInput[0]).focus();var t,i,s=this.model.incrementStep;this.model.value;""===this._textBox.value?(this._textBox.value=this._formatValue(this._startValue,"n",!0),s=0):0<=this._textBox.value.indexOf(" ")&&(this._textBox.value=this._textBox.value.replace(" ","")),"ej.PercentageTextbox"===this.sfType||"ej.CurrencyTextbox"===this.sfType?(-1<(i=t=this._textBox.value).indexOf(g.preferredCulture(this.model.locale).numberFormat.percent.symbol)&&(i=t.substring(0,t.length-1)),this.model.value=this._parseValue(i)):"ej.NumericTextbox"==this.sfType&&(this.model.value=g.parseFloat(this._textBox.value,this.model.locale)),isNaN(this.model.value)&&!this.model.value&&(this.model.value=this._startValue),this.model.value>=this.model.minValue&&this.model.value>this.model.maxValue?(this.model.value=this.model.maxValue,this._setValue(this.model.value)):this.model.value<this.model.minValue&&this.model.value<=this.model.maxValue?(this.model.value=this.model.minValue,this._setValue(this.model.value)):this.model.value>=this.model.minValue&&this.model.value<=this.model.maxValue&&(i="increment"==e?this.model.value+s:this.model.value-s,-1==this.model.decimalPlaces&&(null==this.value&&this._setValue(this.model.value),i=-1==this.model.value.toString().indexOf("e")?parseFloat(i.toFixed(this._afterDec.length)):parseFloat(i)),i>=this.model.minValue&&i<=this.model.maxValue&&this._setValue(i)),this._checkErrorClass()},_validateDecimal:function(e){var t=String.fromCharCode(e.keyCode),t=188==e.keyCode?",":190==e.keyCode?".":110==e.keyCode?g.preferredCulture(this.model.locale).numberFormat["."]:t;return g.preferredCulture(this.model.locale).numberFormat["."].charCodeAt(0)==t.charCodeAt(0)},_allowKeyCodes:function(e){for(var t=new Array(38,40,35,36,109,189,46,8,127,37,39,190,9,13,16,17,18,20,110,173,86,88,67),i=0;i<t.length;i++)if(e.keyCode==t[i]||this._validateDecimal(e)&&0!=this.model.decimalPlaces)return!0;return!1},_raiseChangeEvent:function(e){var t,i=this.model.value;this._checkNumValue(this._preVal)!==this._checkNumValue(i)&&(this._preVal=i,this.model.value=-1!=this.model.decimalPlaces||g.isNullOrUndefined(this.model.value)?this._checkNumValue(this._formatValue(this._preVal,"n",!1)):parseFloat(this.model.value),this._updateHiddenField(),g.isNullOrUndefined(this.model.value)?(t=this.model.value,this.wrapper.removeClass("e-valid")):(t=-1==this.model.value.toString().indexOf("e")?this._removeSeparator(this.model.value):this._convertToExponetial(this.model.value).unformattedValue,-1==this.model.decimalPlaces&&(this._separateValue(this.model.value.toString(),!1,!0),g.isNullOrUndefined(this._afterDec)||""==this._afterDec||(t=this._beforeDec+this._decimalSep+this._afterDec)),this.wrapper.addClass("e-valid")),this.element.val(t),this.wrapper.attr("aria-valuenow",t),this._updateSeparator(),this.element.trigger("change"),this._trigger("_change",{value:this.model.value,isInteraction:!e}),this._trigger("change",{value:this.model.value,isInteraction:!e}))},_updateHiddenField:function(){var e=this._textBox;this._textBox=this._hiddenInput[0],this._localizedFormat(),this._textBox=e},_removeSeparator:function(e){var t;if(!g.isNullOrUndefined(e))return-1==this.model.decimalPlaces&&this._separateValue(e.toString(),!1,!0),-1==e.toString().indexOf("e")&&(e=this._checkNumValue(this._formatValue(e,"n",!1))),t=e.toString(),e=g.preferredCulture(this.model.locale).numberFormat,t=t.replace(".",e["."])},_updateSeparator:function(){var e,t,i,s;this._changeSeparator&&this.model.value&&("ej.NumericTextbox"===this.sfType?e=this._formatValue(this.model.value,"n",!0):"ej.PercentageTextbox"===this.sfType?e=this._formatValue(this.model.value/100,"p",!0):"ej.CurrencyTextbox"===this.sfType&&(e=this._formatValue(this.model.value,"c",!0)),-1==this.model.decimalPlaces&&(s=e.lastIndexOf(this._decimalSep),t=e.substr(s+1),this._separateValue(e,!0,!1),i="ej.CurrencyTextbox"===this.sfType?e.indexOf(this._currencySymbol):"ej.PercentageTextbox"===this.sfType?this._textBox.value.indexOf(this._percentSymbol):-1,s=this._afterDec,1<i&&("ej.CurrencyTextbox"===this.sfType&&(s=s+" "+this._currencySymbol),"ej.PercentageTextbox"===this.sfType&&(s=s+" "+this._percentSymbol)),g.isNullOrUndefined(this._afterDec)||""==this._afterDec||(e=this._beforeDec+this._decimalSep+s),g.isNullOrUndefined(this._afterDec)||""!=this._afterDec||(e=this._beforeDec+this._decimalSep+t)),this._hiddenInput.val(this._replaceSeparator(e,g.preferredCulture(this.model.locale).numberFormat[","],this.model.groupSeparator)))},_replaceSeparator:function(e,t,i){this._decimalSep=g.preferredCulture(this.model.locale).numberFormat["."];var s=""===t?new RegExp("\\s","g"):new RegExp("\\"+t,"g");if(this.model.groupSeparator!=g.preferredCulture(this.model.locale).numberFormat["."])return e.replace(s,i);var n=this.model.decimalPlaces;-1==this.model.decimalPlaces&&(t=e.lastIndexOf(this._decimalSep),n=e.substr(t+1).length);n=e.length-n-1;return e.substring(0,n).replace(s,i)+e.substring(n,e.length)},_checkSeparator:function(e){this.model.groupSeparator=null!=e?this._validateSeparator(e):g.preferredCulture(this.model.locale).numberFormat[","],this._changeSeparator=g.preferredCulture(this.model.locale).numberFormat[","]!=this.model.groupSeparator,this._prevSeparator=this.model.groupSeparator},_validateSeparator:function(e){var t=e.toString(),e=new RegExp("[a-zA-Z0-9]"),t=1<t.length?t[0]:t;return t=e.test(t)?null!=this._prevSeparator?this._prevSeparator:g.preferredCulture(this.model.locale).numberFormat[","]:t},_keyPress:function(e){if(0!==e.which&&!e.metaKey&&!e.ctrlKey&&8!==e.keyCode&&13!==e.keyCode){var t=this._caretPosition(),i=this._textBox.value.toString().substring(0,t),s=this._textBox.value.toString().substring(t),t=g.preferredCulture(this.model.locale).numberFormat,s=i+String.fromCharCode(e.which)+s,t="."===(t=t["."])?"\\"+t:t;return!!(0===this.model.decimalPlaces?new RegExp("^((-)?(\\d*)(-)?)?$"):new RegExp("^(-)?(((\\d+("+t+"\\d*)?)|("+t+"\\d*)))?((-)?)$")).test(s)&&void 0}},_validateDecimalOnType:function(e){var t,i=this._caretPosition(),s=(this._textBox.value.toString().substring(0,i),this._textBox.value.toString().substring(i),this._getSelection(this._textBox.value)),n=g.preferredCulture(this.model.locale).numberFormat["."],a=g.isNullOrUndefined(this.model.value)?"":this.model.value.toString();if(0!=this.model.decimalPlaces&&(t=this._textBox.value.split(n)[1],0<a.indexOf(n)&&a.substring(a.indexOf(n)+1,a.length).length>this.model.decimalPlaces||!!(0==s.length&&i>this._textBox.value.indexOf(n)&&t&&t.length>=this.model.decimalPlaces)))return this._keypressFlag=!1,this._cancelEvent(e),!1},_keyDown:function(e){if(!this.model.readOnly)if(this._CurrentCultureInfo=JSON.parse(JSON.stringify(g.preferredCulture())),48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||this._allowKeyCodes(e)){if(e.shiftKey&&(35==e.keyCode||36==e.keyCode||37==e.keyCode||39==e.keyCode||46==e.keyCode||127==e.keyCode)||e.ctrlKey&&(86==e.keyCode||118==e.keyCode||67==e.keyCode||88==e.keyCode))return!0;if(1==e.ctrlKey&&9!=e.keyCode&&17!=e.keyCode&&86!=e.keyCode&&67!=e.keyCode||67==e.keyCode||86==e.keyCode||88==e.keyCode)return this._keypressFlag=!1,this._cancelEvent(e),!1;if((48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||110==e.keyCode)&&(u=this._caretPosition(),this._textBox.value.toString().substring(0,u),this._textBox.value.toString().substring(u),p=this._getSelection(this._textBox.value),96<=e.keyCode&&e.keyCode<=105&&(e.keyCode-=48),this.model.validateOnType&&-1!=this.model.decimalPlaces&&this._validateDecimalOnType(e),this._validateOnType)){var t,i=g.preferredCulture(this.model.locale).numberFormat["."],s=this.model.value.toString(),n=s.indexOf(i),a=this.model.value,r=-1==this.model.decimalPlaces?this.model.minValue:this.model.minValue.toFixed(this.model.decimalPlaces),o=-1==this.model.decimalPlaces?this.model.maxValue:this.model.maxValue.toFixed(this.model.decimalPlaces),l=!1;if((0<r.toString().indexOf("e")||0<o.toString().indexOf("e"))&&(l=!0),l?0!=this.model.decimalPlaces&&(t=this._textBox.value.split(".")[1],(0<s.indexOf(i)||Number(s)<Number(r)||Number(s)>Number(o))&&s.substring(s.indexOf(i)+1,s.length).length>this.model.decimalPlaces||!!(0==p.length&&u>this._textBox.value.indexOf(i)&&t&&t.length>=this.model.decimalPlaces)):("."!=i&&(s=this._textBox.value.toString(),this.model.minValue.toString().match(new RegExp(".","g"))&&(r=this.model.minValue.toString().replace(/["."]/g,i)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(o=this.model.maxValue.toString().replace(/["."]/g,i))),d=0<r.toString().indexOf(i)?Number(r.toString().substring(0,r.toString().indexOf(i))):this.model.minValue,h=0<o.toString().indexOf(i)?Number(o.toString().toString().substring(0,o.toString().indexOf(i))):this.model.maxValue,0<n?(a=Number(s.substring(s.indexOf(i)+1,s.toString().length)),d=0<r.toString().indexOf(i)?Number(r.toString().substring(r.toString().indexOf(i)+1,r.toString().length)):0,h=0<o.toString().indexOf(i)?Number(o.toString().substring(o.toString().indexOf(i)+1,o.toString().length)):0,s=Number(s.substring(0,s.indexOf(i))),r=Number(r.toString().substring(0,r.toString().indexOf(i))),c=Number(o.toString().substring(0,o.toString().indexOf(i))),!this._validateValue(a,d,h,!0,s,r,c)):!this._validateValue(a,d,h,!1)))return this._keypressFlag=!1,this._cancelEvent(e),!1}if(38==e.keyCode&&this._allowkeyboard&&(this._updateInputField("increment"),this._cancelEvent(e)),40==e.keyCode&&this._allowkeyboard&&(this._updateInputField("decrement"),this._cancelEvent(e)),8==e.keyCode&&(u=this._caretPosition(),this._textBox.value.substring(0,u),this._textBox.value.substring(u),p=this._getSelection(this._textBox.value)),46!=e.keyCode&&127!=e.keyCode||(u=this._caretPosition(),this._textBox.value.substring(0,u),this._textBox.value.substring(u),p=this._getSelection(this._textBox.value)),this._validateDecimal(e)&&0!=this.model.decimalPlaces&&46!=e.keyCode){var d,h,c=g.preferredCulture(this.model.locale).numberFormat["."],a=this._textBox.value.split(c),u=this._caretPosition();if(this._textBox.selectionEnd-this._textBox.selectionStart==this._textBox.value.length)return this._textBox.value=c,this._setSelectionRange(u+1,u+1),this._keypressFlag=!1,this._cancelEvent(e),!1;if(null==a[1]){var p=a[0].substring(0,u),a=a[0].substring(u);if((0<this.model.minValue.toString().indexOf("e")||0<this.model.maxValue.toString().indexOf("e"))&&(l=!0),-1!=this.model.decimalPlaces&&a.length>this.model.decimalPlaces&&1==this.model.validateOnType)return this._keypressFlag=!1,this._cancelEvent(e),!1;if(this._validateOnType&&!l){if(this.model.minValue.toString().match(new RegExp(".","g"))&&(d=this.model.minValue.toString().replace(/["."]/g,c)),this.model.maxValue.toString().match(new RegExp(".","g"))&&(h=this.model.maxValue.toString().replace(/["."]/g,c)),d=0<d.indexOf(c)?Number(d.substring(0,d.indexOf(c))):Number(d),h=0<h.indexOf(c)?Number(h.substring(0,h.indexOf(c))):Number(h),!this._validateValue(this.model.value,d,h,"DecimalKeyPressed"))return this._keypressFlag=!1,this._cancelEvent(e),!1;this._textBox.value=p+c+a}else this._textBox.value=p+c+a;this._setSelectionRange(u+1,u+1)}this._cancelEvent(e)}else 190!=e.keyCode&&110!=e.keyCode||this._cancelEvent(e);109!=e.keyCode&&189!=e.keyCode&&173!=e.keyCode||(this.model.value!==this._preVal&&null!==this.model.value||(this.model.value=this._textBox.value),0!=this._caretPosition()&&this._getSelection(this._removeFormats(this._textBox.value))!=this.model.value||0<=this.model.minValue&&!this.model.enableStrictMode||this._textBox.value.toString().match(new RegExp("-","g"))&&""===this._getSelection(this._textBox.value)?(this._preVal=this.model.value,this.model.value=this._textBox.value,this._cancelEvent(e)):this._getSelection()==this.model.value&&(this._preVal=this.model.value,this.model.value=null)),13==e.keyCode&&this._checkNumValue(this._preVal)!==this._checkNumValue(this._textBox.value)&&this._setValue(this._textBox.value)}else(27!=e.keyCode&&!e.ctrlKey||e.ctrlKey&&90==e.keyCode&&""===m.trim(this._textBox.value))&&(this._keypressFlag=!1,this._cancelEvent(e))},_getLocalizedLabels:function(){return g.getLocalizedConstants(this.sfType,this.model.locale)}}),g.NumericTextbox.Locale=g.NumericTextbox.Locale||{},g.NumericTextbox.Locale.default=g.NumericTextbox.Locale["en-US"]={watermarkText:"Enter value"},g.PercentageTextbox.Locale=g.PercentageTextbox.Locale||{},g.PercentageTextbox.Locale.default=g.PercentageTextbox.Locale["en-US"]={watermarkText:"Enter value"},g.CurrencyTextbox.Locale=g.CurrencyTextbox.Locale||{},g.CurrencyTextbox.Locale.default=g.CurrencyTextbox.Locale["en-US"]={watermarkText:"Enter value"}}(jQuery,Syncfusion),function(a,r,o){"use strict";r.widget("ejScrollBar","ej.ScrollBar",{defaults:{orientation:"horizontal",viewportSize:0,height:18,width:18,smallChange:57,largeChange:57,value:0,maximum:0,minimum:0,buttonSize:18,infiniteScrolling:!1},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",smallChange:"number",largeChange:"number"},observables:["value"],value:r.util.valueFunction("value"),_enabled:!0,content:function(){return this._content&&this._content.length||("horizontal"===this.model.orientation?this._content=this.element.find(".e-hhandle"):this._content=this.element.find(".e-vhandle")),this._content},_init:function(){this.element.addClass("e-widget"),this._ensureScrollers(),this.content(),this._setInitialValues()},_setInitialValues:function(){this.model.orientation===r.ScrollBar.Orientation.Horizontal?this.element.addClass("e-hscrollbar"):this.element.addClass("e-vscrollbar"),0===this.value()&&0===this.model.minimum||(this.value()<this.model.minimum&&this.value(this.model.minimum),this.scroll(this.value(),"none"))},_ensureScrollers:function(){a.fn.jquery;this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._scrollData||("vertical"===this.model.orientation?this._scrollData=this._createScroller("Height","Y","Top","e-v"):this._scrollData=this._createScroller("Width","X","Left","e-h"))},_setModel:function(e){for(var t in e){if("value"!==t){this.refresh();break}this.value()&&this.scroll(this.value(),"none")}},_createScroller:function(e,t,i,s){var n={};a.fn.jquery;n.dimension=e,n.xy=t,n.position=i,n.css=s,n.uDimension=e,this._calculateLayout(n),this._createLayout(n);e=this[n.main].find(".e-button");return this._off(e,"mousedown")._on(e,"mousedown",{d:n,step:1},this._spaceMouseDown),this._off(this[n.scroll],"mousedown")._on(this[n.scroll],"mousedown",{d:n},this._spaceMouseDown),this._off(this[n.handler],"mousedown touchstart")._on(this[n.handler],"mousedown touchstart",{d:n},this._mouseDown),n},_createLayout:function(e){var t="<div class='"+e.css+"{0}' style='"+e.dimension+":{1}px'>{2}</div>",i=a.fn.jquery,s={};s[e.dimension]=e.modelDim;s=r.buildTag("div."+e.css+"scroll e-box",String.format(t,"up e-chevron-up_01 e-icon e-box e-button",e.buttonSize)+String.format(t,"handlespace",e.handleSpace,String.format(t,"handle e-box e-pinch",e.handle))+String.format(t,"down e-chevron-down_01 e-icon e-box e-button",e.buttonSize),s);this.element.append(s),this.element.find(".e-vhandle").addClass("e-v-line e-icon"),this.element.find(".e-hhandle").addClass("e-h-line e-icon"),"1.7.1"===i||"1.7.2"===i?e.uDimension.toLowerCase():e.uDimension,this[e.handler]=this.element.find("."+e.handler),this[e.handler].css("transition","none"),this[e.scroll]=this[e.handler].parent(),this[e.main]=this[e.scroll].parent(),this[e.main].find(".e-button")["outer"+e.uDimension](e.buttonSize)},_calculateLayout:function(e){e.scrollDim="scroll"+e.dimension,e.lPosition=e.position.toLowerCase(),e.clientXy="page"+e.xy,e.scrollVal="scroll"+e.position,e.scrollOneStepBy=this.model.smallChange,e.modelDim=this.model[e.dimension=e.dimension.toLowerCase()],e.handler=e.css+"handle",e.buttonSize=this.model.buttonSize,e.main=e.css+"scroll",e.scroll=e.css+"ScrollSpace",e.handleSpace=e.modelDim-2*e.buttonSize,e.scrollable=this.model.maximum-this.model.minimum;var t=this.model.height;"horizontal"===this.model.orientation&&(t=this.model.width),e.handle=this.model.viewportSize/(this.model.maximum-this.model.minimum+this.model.viewportSize)*(t-2*this.model.buttonSize),t=!r.isNullOrUndefined(this.model.elementHeight)&&"string"==typeof this.model.elementHeight&&-1!=this.model.elementHeight.indexOf("%"),e.handle<20&&!t&&(e.handle=20),e.onePx=e.scrollable/(e.handleSpace-e.handle),e.fromScroller=!1,e.up=!0,e.vInterval=void 0},_updateLayout:function(e){this.element.height(this.model.height),this.element.width(this.model.width);var t=this.element.find("."+e.css+"handle"),i=this.element.find("."+e.css+"handlespace"),s="width"==e.dimension?t.css("left"):t.css("top"),i="width"==e.dimension?i.outerWidth():i.outerHeight();void 0!==s&&"auto"!==s&&(i>=e.handle+parseFloat(s)||(this.model.enableRTL?t.css("width"===e.dimension?"left":"top",parseFloat(i)-e.handle):t.css("width"===e.dimension?"left":"top",0<parseFloat(i)-e.handle?parseFloat(i)-e.handle:0))),this.element.find("."+e.css+"scroll").css(e.dimension,e.modelDim+"px").find(".e-button").css(e.dimension,this.model.buttonSize).end().find("."+e.css+"handlespace").css(e.dimension,e.handleSpace+"px").find("."+e.css+"handle").css(e.dimension,e.handle+"px")},refresh:function(){this._ensureScrollers(),this.value()&&this.scroll(this.value(),"none"),this._scrollData&&(this._calculateLayout(this._scrollData),this._updateLayout(this._scrollData))},scroll:function(e,t,i,s){var n=this._scrollData;if(!i)if(this.model.orientation===r.ScrollBar.Orientation.Horizontal){if(this._trigger("scroll",{source:t||"custom",scrollData:this._scrollData,scrollLeft:e,originalEvent:s}))return}else if(this._trigger("scroll",{source:t||"custom",scrollData:this._scrollData,scrollTop:e,originalEvent:s}))return;this._scrollData&&(!this._scrollData.enableRTL||"mousemove"!=s&&"touchmove"!=s||"msie"==r.browserInfo().name?!this._scrollData.enableRTL||"mousemove"!=s&&"touchmove"!=s||"msie"!=r.browserInfo().name?this.value(e):this.value(-1*e):this.value(-n.scrollable+e),0<this.content().length&&(this.model.orientation===r.ScrollBar.Orientation.Horizontal?(e=(n=this.element.find(".e-hhandlespace").width()-this.element.find(".e-hhandle").outerWidth())<(e-this.model.minimum)/this._scrollData.onePx?n:(e-this.model.minimum)/this._scrollData.onePx,!this._scrollData.enableRTL||"mousemove"!=s&&"touchmove"!=s||"msie"==r.browserInfo().name||0<(e=n-e)&&(e*=-1),!this._scrollData.enableRTL||"mousemove"!=s&&"touchmove"!=s||"msie"!=r.browserInfo().name||(e=-e),this._scrollData.enableRTL&&0<e&&!this._scrollData._scrollleftflag&&(e=0),this._scrollData._scrollleftflag&&(0<e&&(e*=-1),this.value(e)),this.content()[0].style.left=e+"px",this._scrollData._scrollleftflag=!1):(e=(s=this.element.find(".e-vhandlespace").height()-this.element.find(".e-vhandle").outerHeight())<(e-this.model.minimum)/this._scrollData.onePx?s:(e-this.model.minimum)/this._scrollData.onePx,"msie"==r.browserInfo().name&&isNaN(e)&&(e=""),this.content()[0].style.top=e+"px")))},_changeTop:function(e,t,i){var s=(e.dimension,this.value()),n=s+t;return e.step=t,e.enableRTL&&t<0||0<t&&!e.enableRTL?e.enableRTL?n<-1*this.model.maximum&&(n=-1*this.model.maximum):n>this.model.maximum&&(n=this.model.maximum):e.enableRTL?n>this.model.minimum&&(n=this.model.minimum):n<this.model.minimum&&(n=this.model.minimum),n===s&&!this.model.infiniteScrolling||this.scroll(n,i),n!==s},_mouseUp:function(e){var t;e.data&&(t=e.data.d,clearInterval(t.vInterval),"touchend"==e.type&&a(e.target).removeClass("e-touch"),"mouseup"!==e.type&&"touchend"!==e.type&&(e.toElement||e.relatedTarget||e.target)||(this._prevY=this._d=this._data=null,this._off(a(document),"mousemove touchmove",this._mouseMove),a(document).off("mouseup touchend",r.proxy(this._mouseUp,this)),t.fromScroller=!1,this[t.scroll].off("mousemove"),this[t.handler].off("mousemove").css("transition",""),"thumb"!==e.data.source||r.isNullOrUndefined(this.model)||a.when(this.content()).done(r.proxy(function(){this._trigger("thumbEnd",{originalEvent:e,scrollData:t})},this))),t.up=!0)},_mouseDown:function(e){this._enabled&&(this._d=e,this._data=this._d.data.d,this._data.target=this._d.target,this._data.fromScroller=!0,this[this._data.handler].css("transition","none"),this._on(a(document),"mousemove touchmove",{d:this._data,source:"thumb"},this._mouseMove),this._trigger("thumbStart",{originalEvent:this._d,scrollData:this._data}),a(document).one("mouseup touchend",{d:this._data,source:"thumb"},r.proxy(this._mouseUp,this)),"touchstart"==e.type&&a(e.target).addClass("e-touch"))},_mouseCall:function(e){e.type="mouseup",this._mouseUp(e)},_mouseMove:function(e){var t,i,s=parseInt(this[this._data.handler].css(this._data.lPosition))||0;e.preventDefault();if(r.isNullOrUndefined(e.target.tagName)){if(a(e.target).is(document))return void this._mouseCall(e)}else if("iframe"===e.target.tagName.toLowerCase())return void this._mouseCall(e);var n=("mousemove"==e.type?e:e.originalEvent.changedTouches[0])[this._data.clientXy];this._prevY&&n!==this._prevY&&(i=n-this._prevY,this.model.infiniteScrolling?(s+=i,this._data.step=i,(this._data.enableRTL?0<s:s<0)&&(s=0),s*(this._data.enableRTL?-1:1)+this._data.handle>=this._data.handleSpace&&(s=(this._data.handleSpace-this._data.handle)*(this._data.enableRTL?-1:1)),t=Math.ceil(s*this._data.onePx),this.scroll(t,"thumb")):(t=i*this._data.onePx,this._changeTop(this._data,t,"thumb",this._d)),this._trigger("thumbMove",{originalEvent:e,direction:0<this._data.step?1:-1,scrollData:this._data})),this._prevY=n},_spaceMouseDown:function(e){var t,i,s,n;e.data&&this._enabled&&(t=e.data.d,i=this[t.handler][0].getBoundingClientRect(),1===e.which&&e.target!==this[t.handler][0]&&(s=e.data.step?this.model.smallChange:this.model.largeChange,n=e.data.top||i[t.lPosition],e[t.clientXy]=e[t.clientXy]||0,e[t.clientXy]-o.pageYOffset<n&&(s*=-1),t.target=e.target,this._changeTop(t,s,3===s?"track":"button",e),1!==e.data.step&&this[t.scroll].mousemove(function(){t.up=!0}),t.up=!1,t.vInterval=setInterval(r.proxy(function(){(s<0?n+s/t.onePx<e[t.clientXy]:n+t.handle+s/t.onePx>e[t.clientXy])&&(t.up=!0),t.up?clearInterval(t.vInterval):(this._changeTop(t,s,3===s?"track":"button",e),n=e.data&&e.data.top||i[t.lPosition])},this),150),a(document).one("mouseup",{d:t},r.proxy(this._mouseUp,this)),a(document).mouseout({d:t},r.proxy(this._mouseUp,this))))},_remove:function(){this.model.orientation===r.ScrollBar.Orientation.Horizontal&&this.element.find(".e-hscroll").remove(),this.model.orientation===r.ScrollBar.Orientation.Vertical&&this.element.find(".e-vscroll").remove(),this._scrollData=null,this._content=null},_destroy:function(){this.element.remove()}}),r.ScrollBar.Orientation={Horizontal:"horizontal",Vertical:"vertical"}}(jQuery,Syncfusion,window),function(h,c,u,p){"use strict";c.widget("ejScroller","ej.Scroller",{_addToPersist:["scrollLeft","scrollTop"],defaults:{height:250,autoHide:!1,animationSpeed:600,width:0,scrollOneStepBy:57,buttonSize:18,scrollLeft:0,scrollTop:0,targetPane:null,scrollerSize:18,enablePersistence:!1,enableRTL:p,enableTouchScroll:!0,preventDefault:!1,enabled:!0,create:null,destroy:null,wheelStart:null,wheelMove:null,wheelStop:null},validTags:["div"],type:"transclude",dataTypes:{buttonSize:"number",scrollOneStepBy:"number"},observables:["scrollTop","scrollLeft"],scrollTop:c.util.valueFunction("scrollTop"),scrollLeft:c.util.valueFunction("scrollLeft"),keyConfigs:{up:"38",down:"40",left:"37",right:"39",pageUp:"33",pageDown:"34",pageLeft:"ctrl+37",pageRight:"ctrl+39"},content:function(){return!this._contentOffsetParent&&this._content&&this._content[0]&&(this._contentOffsetParent=this._content[0].offsetParent),this._content&&this._content.length&&this._contentOffsetParent||(this._content=this.element.children().first().addClass("e-content")),this._content},_setFirst:!0,_updateScroll:!1,_init:function(){c.isNullOrUndefined(this.content()[0])||(this._isJquery3=3<=parseInt(h.fn.jquery),this._tempWidth=this.model.width,this._prevScrollWidth=this.content()[0].scrollWidth,this._prevScrollHeight=this.content()[0].scrollHeight,this.element.addClass("e-widget"),this.content(),this._browser=c.browserInfo().name,this._wheelStart=!0,this._eleHeight=this.model.height,this._eleWidth=this.model.width,this._isNativeScroll=c.isDevice(),null!=this.model.targetPane&&this.content().find(this.model.targetPane).addClass("e-target-pane"),this.model.enableRTL===p&&(this.model.enableRTL="rtl"===this.element.css("direction")),this.model.autoHide&&this._on(this.element,"mousedown",this._mouseDownInitContent),this._ensureScrollers(),this.model.enableRTL&&(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft()),this._isNativeScroll&&this.element.addClass("e-native-scroll"),this._on(this.content(),"scroll",this._scroll),null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this.scrollLeft()&&this._setScrollLeftValue(this.scrollLeft()),this.scrollTop()&&this.scrollTop(this._isJquery3?Math.ceil(this.scrollTop()):this.scrollTop()),this.content().scrollTop(this.scrollTop()),this.model.autoHide&&this._autohide(),this.model.enabled?this.enable():this.disable(),this._setDimension(),this._prevScrollWidth===this.content()[0].scrollWidth&&this._prevScrollHeight===this.content()[0].scrollHeight||this.refresh()),this._addActionClass(),this._isNativeScroll&&this._on(this.content(),"scrollstop",this._touchDown)},_mouseDownInitContent:function(){this.model.autoHide&&this._on(h(document),"mouseup",this._mouseUpContent),this.element.addClass("e-scroll-focus")},_addActionClass:function(){"msie"==this._browser&&(this.content().removeClass("e-pinch e-pan-x e-pan-y"),this._vScrollbar&&this._hScrollbar?this.content().addClass("e-pinch"):this._vScrollbar&&!this._hScrollbar?this.content().addClass("e-pan-x"):this._hScrollbar&&!this._vScrollbar&&this.content().addClass("e-pan-y"))},_setDimension:function(){c.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")||(this._vScroll||this._hScroll?this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),this.element.parent().height()):h(this.content()[0]).height("")),c.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")||(this._hScroll||this._vScroll?this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),this.element.parent().width()):h(this.content()[0]).width(""))},_setScrollLeftValue:function(e){this.model.enableRTL&&(e="mozilla"==c.browserInfo().name?e<0?e:-1*e:!c.isNullOrUndefined(this._rtlScrollLeftValue)&&("chrome"==c.browserInfo().name||0<this._rtlScrollLeftValue)?e<0?this._rtlScrollLeftValue+e:this._rtlScrollLeftValue-e:Math.abs(e)),this.content().scrollLeft(e)},_ensureScrollers:function(){var e=h.fn.jquery;this.model.height="string"==typeof this.model.height&&-1!=this.model.height.indexOf("px")?parseInt(this.model.height):this.model.height,this.model.width="string"==typeof this.model.width&&-1!=this.model.width.indexOf("px")?parseInt(this.model.width):this.model.width,this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this._off(this.content(),"mousedown touchstart"),0<this.content().length&&(this.isVScroll()?(this._tempVscrollbar||(this._vScrollbar=this._createScrollbar(c.ScrollBar.Orientation.Vertical,this.isHScroll()),this._tempVscrollbar=this._vScrollbar),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent)):(this._vScrollbar=null,this._tempVscrollbar=this._vScrollbar,this.element.children(".e-vscrollbar").remove()),this.isHScroll()?(this._tempHscrollbar||(this._hScrollbar=this._createScrollbar(c.ScrollBar.Orientation.Horizontal,this.isVScroll()),this._tempHscrollbar=this._hScrollbar),this.model.enableTouchScroll&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):(this._hScrollbar=null,this._tempHscrollbar=this._hScrollbar,this.element.children(".e-hscrollbar").remove()),this._vScrollbar||this._hScrollbar||this.content().css({width:"auto",height:"auto"}),0<this.element.find(".e-hscroll").length||this._vScrollbar&&this.content().outerHeight(this.content().outerHeight()-1),"1.7.1"===e||"1.7.2"===e?(this._contentHeight="height",this._contentWidth="width"):(this._contentHeight="outerHeight",this._contentWidth="outerWidth"),this._hScroll=this.isHScroll(),this._vScroll=this.isVScroll(),this._hScroll||this._vScroll?(this.content().addClass("e-content"),e=this._exactElementDimension(this.element),this._elementDimension(e),null!==this.model.targetPane&&this.content().find(this.model.targetPane)[0]!==p?this.content().find(this.model.targetPane)[0].scrollLeft=this.scrollLeft():!this.isHScroll()&&0<this.element.children(".e-hscrollbar").length&&this._ensureScrollers(),isNaN(this._eleWidth)&&0<this._eleWidth.indexOf("%")&&isNaN(this._eleHeight)&&0<this._eleHeight.indexOf("%")&&h(u).on("resize",h.proxy(this._resetScroller,this))):this.content().removeClass("e-content"),this._setDimension(),this._parentHeight=h(this.element).parent().height(),this._parentWidth=h(this.element).parent().width())},_elementDimension:function(e){this._ElementHeight=e.height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.content()[this._contentHeight](this._ElementHeight-(this._hScroll&&!this.model.autoHide||this.element.find(".e-hscrollbar").is(":visible")?this.model.scrollerSize:0)),this._ElementWidth=e.width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.content()[this._contentWidth](this._ElementWidth-(this._vScroll&&!this.model.autoHide||this.element.find(".e-vscrollbar").is(":visible")?this.model.scrollerSize:0))},_convertPercentageToPixel:function(e,t){return Math.floor(e*t/100)},isHScroll:function(){var e=3<=parseFloat(h.fn.jquery)?Math.ceil(this.element.width()):this.element.width(),t=this.model.width;if(c.isNullOrUndefined(this.model.width)||(t="string"==typeof this.model.width&&-1!=this.model.width.indexOf("%")?e:3<=parseFloat(h.fn.jquery)&&!isNaN(parseFloat(this.model.width))?Math.ceil(parseFloat(this.model.width)):this.model.width),c.isNullOrUndefined(this._tempWidth)||"string"!=typeof this._tempWidth||-1==this._tempWidth.indexOf("%")){if(0<t){var i=this.content().find(this.model.targetPane);if(null!=this.model.targetPane&&i.length)return i[0].scrollWidth+i.siblings().width()>t;if(this.content()[0].scrollWidth>t)return!0;if(this.content()[0].scrollWidth==t){if(this.model.autoHide&&0<h(this.content()[0]).find("> *").length)return h(this.content()[0]).find("> *")[0].scrollWidth>h(this.content()[0]).width();if(0<h(this.content()[0]).find("> *").length)return h(this.content()[0]).find("> *")[0].scrollWidth>(c.isNullOrUndefined(this._tempVscrollbar)?t:t-this.model.scrollerSize)}return!1}return!1}return c.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")?this.content()[0].scrollWidth>e||void 0:this.content()[0].scrollWidth>e},isVScroll:function(){if(!c.isNullOrUndefined(this.model.height)&&"string"==typeof this.model.height&&-1!=this.model.height.indexOf("%"))return this.content()[0].scrollHeight>this.element.outerHeight();if(0<this.model.height){if(this.content()[0].scrollHeight>Math.ceil(this.model.height))return!0;if(this.isHScroll()&&(this.content()[0].scrollHeight==this.model.height||this.content()[0].scrollHeight>this.model.height-(this.model.scrollerSize-2)))return!0}return!1},_setModel:function(e){for(var t in e)switch(t){case"enableRTL":e[t]?(this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),c.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!0)):(this.element.removeClass("e-rtl"),c.isNullOrUndefined(this._hScrollbar)||(this._hScrollbar._scrollData.enableRTL=!1)),this._hScrollbar&&(this.element.find(".e-hhandle").css("left",0),this._hScrollbar.value(0));break;case"preventDefault":this.model.preventDefault=e[t];break;case"scrollLeft":(parseFloat(c.util.getVal(e[t]))<0||!this._hScroll)&&(e[t]=0),this._hScrollbar&&(e[t]=parseFloat(c.util.getVal(e[t]))>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(c.util.getVal(e[t]))),this._setScrollLeftValue(parseFloat(e[t])),this.scrollLeft(e[t]),!this._hScrollbar||this._hScrollbar._scrollData._scrollleftflag&&this.model.enableRTL||this.scrollX(e[t],!0);break;case"scrollTop":this._vScrollbar&&(e[t]=parseFloat(c.util.getVal(e[t]))>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(c.util.getVal(e[t]))),(parseFloat(e[t])<0||!this._vScroll)&&(e[t]=0),this.content().scrollTop(parseFloat(e[t])),this.scrollTop(e[t]),this.scrollY(e[t],!0);break;case"touchScroll":this.model.enableTouchScroll?(this._vScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._vScrollbar._scrollData},this._mouseDownOnContent),this._hScrollbar&&this._on(this.content(),"mousedown touchstart",{d:this._hScrollbar._scrollData},this._mouseDownOnContent)):this._off(this.content(),"mousedown touchstart");break;case"scrollOneStepBy":this._vScrollbar&&(this._vScrollbar._scrollData.scrollOneStepBy=e[t],this._vScrollbar.model.smallChange=e[t]),this._hScrollbar&&(this._hScrollbar._scrollData.scrollOneStepBy=e[t],this._hScrollbar.model.smallChange=e[t]);break;case"buttonSize":this._vScrollbar&&(this._vScrollbar.model.buttonSize=this.model.buttonSize),this._hScrollbar&&(this._hScrollbar.model.buttonSize=this.model.buttonSize),this.refresh();break;case"height":this._eleHeight=e[t],this.refresh();break;case"width":this._eleWidth=e[t],this.refresh();break;case"enabled":e[t]?this.enable():this.disable();break;default:this.refresh()}},_createScrollbar:function(e,t){var i,s,n,a,r=document.createElement("div"),o=e===c.ScrollBar.Orientation.Vertical?(n=this.model.scrollerSize,a=i=c.isNullOrUndefined(this.model.height)||"string"!=typeof this.model.height||-1==this.model.height.indexOf("%")?this.model.height-(t?this.model.scrollerSize:0):this.element.height()-(t?this.model.scrollerSize:0),s=this.content()[0].scrollHeight,this.scrollTop()):(n=i=this.model.width-(t?this.model.scrollerSize:0),a=this.model.scrollerSize,s=c.isNullOrUndefined(this.model.width)||"string"!=typeof this.model.width||-1==this.model.width.indexOf("%")?(o=this.content().find(this.model.targetPane),null!=this.model.targetPane&&o.length?o[0].scrollWidth+o.parent().width()-o.width():this.content()[0].scrollWidth):(n=i=this.element.width()-(t?this.model.scrollerSize:0),this.content()[0].scrollWidth),this.scrollLeft());0<this.element.children(".e-hscrollbar").length?h(this.element.children(".e-hscrollbar")).before(r):this.element.append(r),h(r).ejScrollBar({elementHeight:this._eleHeight,elementWidth:this._eleWidth,buttonSize:this.model.buttonSize,orientation:e,viewportSize:i,height:a,width:n,maximum:s-i,value:o,smallChange:this.model.scrollOneStepBy,largeChange:3*this.model.scrollOneStepBy,scroll:c.proxy(this._scrollChanged,this),thumbEnd:c.proxy(this._thumbEnd,this),thumbStart:c.proxy(this._thumbStart,this),thumbMove:c.proxy(this._thumbMove,this)});r=h(r).ejScrollBar("instance");return e!==c.ScrollBar.Orientation.Vertical&&t||this._off(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",this._mouseWheel)._on(this.element,"msie"==this._browser?"wheel mousewheel":"mousewheel DOMMouseScroll",{d:r._scrollData},this._mouseWheel),e===c.ScrollBar.Orientation.Horizontal?this._scrollXdata=r._scrollData:this._scrollYdata=r._scrollData,e===c.ScrollBar.Orientation.Horizontal&&this.model.enableRTL&&(r._scrollData.enableRTL=!0),r._enabled=this.model.enabled,r},_updateScrollbar:function(e,t){var i=e===c.ScrollBar.Orientation.Vertical?this._vScrollbar:this._hScrollbar;i&&(e===c.ScrollBar.Orientation.Vertical?(i.model.width=this.model.scrollerSize,i.model.height=i.model.viewportSize=this.model.height-(t?this.model.scrollerSize:0),i.model.maximum=this.content()[0].scrollHeight-i.model.viewportSize,i.model.value=this.scrollTop()):(i.model.width=i.model.viewportSize=this.model.width-(t?this.model.scrollerSize:0),i.model.height=this.model.scrollerSize,i.model.maximum=(null!=this.model.targetPane&&0<this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane)[0].scrollWidth+(this.content().width()-this.content().find(h(this.model.targetPane)).outerWidth()):this.content()[0].scrollWidth)-i.model.viewportSize,this.model.enableRTL||(i.model.value=this.scrollLeft())))},_autohide:function(){this.model.autoHide?(this.element.addClass("e-autohide"),this._on(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),h(":hover").filter(this.element[0]).length||this.content().siblings(".e-scrollbar.e-js").hide(),this._elementDimension(this._exactElementDimension(this.element))):(this.element.removeClass("e-autohide"),this._off(this.element,"mouseenter mouseleave touchstart touchend",this._scrollerHover),this.content().siblings(".e-scrollbar.e-js").show())},_mouseUpContent:function(e){"mouseup"==e.type&&(this.element.removeClass("e-scroll-focus"),this._autohide(),this._off(h(document),"mouseup",this._mouseUpContent))},_scrollChanged:function(e){this._updateScroll=!0,e.scrollTop!==p?this.scrollY(e.scrollTop,!0,"",e.source):e.scrollLeft!==p&&this.scrollX(e.scrollLeft,!0,"",e.source),this._updateScroll=!1;var t=this;h.when(this.content()).done(c.proxy(function(){t._trigger("scrollEnd",{scrollData:e})}))},_bindBlurEvent:function(e,t){this._scrollEle=h(e).data("ejScrollBar"),this._event=t;this._listener=function(e){this._scrollEle._off(h(document),"mousemove touchmove",this._scrollEle._mouseMove),h(document).off("mouseup touchend",c.proxy(this._scrollEle._mouseUp,this._scrollEle)),this._scrollEle._prevY=null,this._off(h(document),"mousemove touchmove",this._mouseMove),this._off(h(document),"mouseup touchend",this._mouseUp),this._off(h(u),"blur"),this._evtData.handler,this._scrollEle._trigger("thumbEnd",{originalEvent:this._event,scrollData:this._evtData})},this._on(h(u),"blur",this._listener)},_thumbStart:function(e){this._evtData=e.scrollData;var t=(e.scrollData.handler,this.element.find("."+e.scrollData.handler).closest(".e-scrollbar")),t=(e.scrollData.handler,this.element.find("."+e.scrollData.handler).closest(".e-scrollbar"));this._bindBlurEvent(t,e),this._trigger("thumbStart",e)},_thumbMove:function(e){this._trigger("thumbMove",e)},_thumbEnd:function(e){this._trigger("thumbEnd",e),this._off(h(u),"blur")},refresh:function(e){e?(this._tempVscrollbar=null,this.element.children(".e-vscrollbar").remove(),this._tempHscrollbar=null,this.element.children(".e-hscrollbar").remove()):this.element.find(">.e-content").removeAttr("style"),c.isNullOrUndefined(this._eleHeight)||"string"!=typeof this._eleHeight||-1==this._eleHeight.indexOf("%")||this._parentHeight==h(this.element).parent().height()||(t=(t=this._exactElementDimension(this.element.parent())).height-(this.border_bottom+this.border_top+this.padding_bottom+this.padding_top),this.model.height=this._convertPercentageToPixel(parseInt(this._eleHeight),t)),c.isNullOrUndefined(this._eleWidth)||"string"!=typeof this._eleWidth||-1==this._eleWidth.indexOf("%")||this._parentWidth==h(this.element).parent().width()||(t=(t=this._exactElementDimension(this.element.parent())).width-(this.border_left+this.border_right+this.padding_left+this.padding_right),this.model.width=this._convertPercentageToPixel(parseInt(this._eleWidth),t)),this._ensureScrollers();var t=this.model.scrollLeft;this.model.enableRTL?(this.element.hasClass("e-rtl")||this.element.addClass("e-rtl"),this._rtlScrollLeftValue=this.content().scrollLeft(),0<t?this.content().scrollLeft(this._rtlScrollLeftValue-t):this._setScrollLeftValue(t)):this.content().scrollLeft(t),(this.scrollTop()&&c.isNullOrUndefined(this._vScrollbar)||!c.isNullOrUndefined(this._vScrollbar)&&this._vScrollbar&&null!=this._vScrollbar._scrollData&&!this._vScrollbar._scrollData.skipChange)&&this.scrollTop(this._isJquery3?Math.ceil(this.scrollTop()):this.scrollTop()),this.content().scrollTop(this.scrollTop()),this._vScrollbar&&(this._vScrollbar._scrollData.dimension="Height",this._updateScrollbar(c.ScrollBar.Orientation.Vertical,this._hScroll),this._vScroll&&!this._vScrollbar._calculateLayout(this._vScrollbar._scrollData)&&this._vScrollbar._updateLayout(this._vScrollbar._scrollData)),this._hScrollbar&&(this._hScrollbar._scrollData.dimension="Width",this._updateScrollbar(c.ScrollBar.Orientation.Horizontal,this._vScroll),this._hScroll&&!this._hScrollbar._calculateLayout(this._hScrollbar._scrollData)&&this._hScrollbar._updateLayout(this._hScrollbar._scrollData)),"msie"==c.browserInfo().name&&"8.0"==c.browserInfo().version?this.element.find(".e-hhandle").css("left","0px"):null!=this.model.targetPane&&this._on(this.content().find(this.model.targetPane),"scroll",this._scroll),this._addActionClass(),this._autohide()},_exactElementDimension:function(e){for(var t=e.get(0).getBoundingClientRect(),i=["left","right","top","bottom"],s=t.width||t.right-t.left,t=t.height||t.bottom-t.top,n=0;n<i.length;n++)this["border_"+i[n]]=isNaN(parseFloat(e.css("border-"+i[n]+"-width")))?0:parseFloat(e.css("border-"+i[n]+"-width")),this["padding_"+i[n]]=isNaN(parseFloat(e.css("padding-"+i[n])))?0:parseFloat(e.css("padding-"+i[n]));return{width:s,height:t}},_keyPressed:function(e,t){if(this.model.enabled){if(-1!==["input","select","textarea"].indexOf(t.tagName.toLowerCase()))return!0;var i,s;if(-1!==["up","down","pageUp","pageDown"].indexOf(e))this._vScrollbar&&("msie"==c.browserInfo().name&&this.model.allowVirtualScrolling&&this._content.focus(),i=this._vScrollbar._scrollData),s="o";else{if(-1===["left","right","pageLeft","pageRight"].indexOf(e))return!0;this._hScrollbar&&(i=this._hScrollbar._scrollData),s="i"}return!i||!this._changeTop(i,(e.indexOf(s)<0?-1:1)*("p"!==e[0]?1:3)*i.scrollOneStepBy,"key")}},scrollY:function(e,t,i,s,n){var a=this;if(""!==e){if(t){n={source:s||"custom",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:e,originalEvent:n};return(e=this._isJquery3?Math.ceil(n.scrollTop):n.scrollTop,this.scrollTop(e),this._trigger("scroll",n))?void 0:void this.content().scrollTop(e)}!c.isNullOrUndefined(i)&&""!==i||(i=100),this._vScrollbar&&(e=parseFloat(e)>this._vScrollbar._scrollData.scrollable?this._vScrollbar._scrollData.scrollable:parseFloat(e)),e=this._isJquery3?Math.ceil(e):e,this.scrollTop(e),this.content().stop().animate({scrollTop:e},i,"linear",function(){a._trigger("scroll",{source:s||"custom",scrollData:a._vScrollbar?a._vScrollbar._scrollData:null,scrollTop:e,originalEvent:n})})}},scrollX:function(e,t,i,s,n){var a=this;if(""!==e){this._hScrollbar&&(e=parseFloat(e)>this._hScrollbar._scrollData.scrollable?this._hScrollbar._scrollData.scrollable:parseFloat(e));var r=c.browserInfo().name;if(this.model.enableRTL&&"mozilla"!=r&&(e<0&&(e=Math.abs(e)),(null!=this.model.targetPane?this.content().find(this.model.targetPane):this.content())[0],"mousemove"!=n&&"touchmove"!=n&&"msie"!=r&&"msie"!=r&&(e=this._hScrollbar._scrollData.scrollable-e)),this.scrollLeft(e),t)return this._trigger("scroll",{source:s||"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:n})?void 0:void(null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane):this.content()).scrollLeft(e);!c.isNullOrUndefined(i)&&""!==i||(i=100),null!=this.model.targetPane&&this.content().find(this.model.targetPane).length?this.content().find(this.model.targetPane).stop().animate({scrollLeft:e},i,"linear"):this.content().stop().animate({scrollLeft:e},i,"linear",function(){a._trigger("scroll",{source:s||"custom",scrollData:a._hScrollbar?a._hScrollbar._scrollData:null,scrollLeft:e,originalEvent:n})})}},enable:function(){var e=this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon");e.hasClass("e-disable")&&(e.removeClass("e-disable").attr({"aria-disabled":!1}),this.model.enabled=!0),this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},disable:function(){this.element.find(".e-vscrollbar,.e-hscrollbar,.e-vscroll,.e-hscroll,.e-vhandle,.e-hhandle,.e-vscroll .e-icon,.e-hscroll .e-icon").addClass("e-disable").attr({"aria-disabled":!0}),this.model.enabled=!1,this._vScrollbar&&(this._vScrollbar._enabled=this.model.enabled),this._hScrollbar&&(this._hScrollbar._enabled=this.model.enabled)},_changeTop:function(e,t,i,s){var n=Math.ceil((null!=this.model.targetPane&&"height"!=e.dimension?this.content().find(this.model.targetPane):this.content())[e.scrollVal]());return"height"==e.dimension&&0==n&&(n=0!=this.scrollTop()?this.scrollTop():0),t=n+t,(e.enableRTL?t<e.scrollable:t>e.scrollable)&&(t=Math.round(e.scrollable)),(e.enableRTL?0<t:t<0)&&(t=0),t!==n&&(this["scroll"+e.xy](t,!0,"",i,s),"X"!==e.xy||c.isNullOrUndefined(this._hScrollbar)?c.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(t,i,!0,s):this._hScrollbar.scroll(t,i,!0,s)),t!==n},_mouseWheel:function(e){if((!this._vScrollbar||!e.ctrlKey)&&(this._vScrollbar||e.shiftKey)&&e.data&&this.model.enabled){var t,i,s=0,n=e.data.d,a=e;if(e=e.originalEvent,this._wheelStart&&this._trigger("wheelStart",{originalEvent:e,scrollData:a.data.d}),this._wheelStart=!1,clearTimeout(h.data(this,"timer")),1==this._wheelx||0!=e.wheelDeltaX&&0!=e.wheelDeltaY||(this._wheelx=1),0==navigator.platform.indexOf("Mac")&&0==this._wheelx&&("webkit"==this._browser||"chrome"==this._browser))return!0;"mozilla"==this._browser?e.axis==e.HORIZONTAL_AXIS?n=this._scrollXdata:this._scrollYdata:"msie"==this._browser?("wheel"==e.type&&(s=e.deltaX/120),"mousewheel"==e.type&&e.shiftKey&&(n=this._scrollXdata,e.preventDefault?e.preventDefault():e.returnValue=!1)):this._wheelx&&0!=e.wheelDeltaX&&0==e.wheelDeltaY&&this._scrollXdata&&(n=this._scrollXdata),0==e.wheelDeltaX&&(this._wheelx=e.wheelDeltaX),e.wheelDelta?(s=this._normalizingDelta(e),u.opera&&parseFloat(u.opera.version,10)<10&&(s=-s)):e.detail&&(s=e.detail/3),s&&(a.originalEvent&&(t=a.originalEvent.wheelDelta&&0<a.originalEvent.wheelDelta||a.originalEvent.detail&&a.originalEvent.detail<0?-1:1),this._changeTop(n,s*n.scrollOneStepBy,"wheel",e)?((e.preventDefault?e:a).preventDefault(),this._trigger("wheelMove",{originalEvent:e,scrollData:a.data.d,direction:t})):(this._trigger("scrollEnd",{originalEvent:e,scrollData:a}),this._wheelx=0),i=this,h.data(this,"timer",setTimeout(function(){i._wheelStart=!0,i._trigger("wheelStop",{originalEvent:e,scrollData:a.data.d,direction:t})},250)))}},_normalizingDelta:function(e){return 0==navigator.platform.indexOf("Mac")?-e.wheelDelta/3:-e.wheelDelta/120},_contentHeightWidth:function(){"block"==this.content().siblings().css("display")&&this.model.autoHide?(this._hScroll&&this.content()[this._contentHeight](this._ElementHeight-this.model.scrollerSize),this._vScroll&&this.content()[this._contentWidth](this._ElementWidth-this.model.scrollerSize)):"none"==this.content().siblings().css("display")&&this.model.autoHide&&(this._vScroll||this._hScroll)&&(this.content()[this._contentHeight](this._ElementHeight),this.content()[this._contentWidth](this._ElementWidth))},_scrollerHover:function(e){this.model.enabled&&("mouseenter"!=e.type&&"touchstart"!=e.type||this.content().siblings().is(":visible")?"mouseleave"!=e.type&&"touchend"!=e.type||this.element.hasClass("e-scroll-focus")||(this.content().siblings().hide(),this._contentHeightWidth(),this._trigger("scrollHide",{originalEvent:e})):(this.content().siblings().css("display","block"),this._contentHeightWidth(),this._ensureScrollers(),this._setScrollLeftValue(this.model.scrollLeft),this._trigger("scrollVisible",{originalEvent:e})))},_mouseUp:function(e){var t;e.data&&(t=e.data.d,!this.model.enableRTL||"mouseup"!=e.type&&"touchend"!=e.type||(this.model.scrollLeft=this._rtlScrollLeftValue-this.model.scrollLeft),"mouseup"!==e.type&&"touchend"!==e.type&&(e.toElement||e.relatedTarget)||(this.content().css("cursor","default"),this._off(h(document),"mousemove touchmove"),this._off(this.content(),"touchmove",this._touchMove),this._off(h(document),"mouseup touchend",this._mouseUp),!(t.fromScroller=!1)!==this._mouseMoved||"thumb"!==e.data.source||c.isNullOrUndefined(this.model)||(h.when(this.content()).done(c.proxy(function(){this._trigger("thumbEnd",{originalEvent:e,scrollData:t})},this)),this._off(h(u),"blur"))),t.up=!0,this._mouseMoved=!1,u.ontouchmove=null)},_mouseDownOnContent:function(a){var r,e,o,l,d;this._startX=(a.clientX!=p?a:a.originalEvent.changedTouches[0]).clientX,this._startY=(a.clientY!=p?a:a.originalEvent.changedTouches[0]).clientY,this._timeStart=a.timeStamp||Date.now(),this.model.enabled&&(r=a.data.d,this._evtData=a.data,r.handler,e=this.element.find("."+r.handler).closest(".e-scrollbar"),this._bindBlurEvent(e,a),this._trigger("thumbStart",{originalEvent:a,scrollData:r})||3==a.which&&2==a.button||(r.fromScroller=!0,o=null,l=1,this._document=h(document),this._window=h(u),this._mouseMove=function(e){if(this.model.enableRTL&&this._UpdateScrollLeftValue(a),this._startX+this._startY!=e.clientX+e.clientY){if(this._relDisX=(e.clientX!=p?this._startx=e.clientX:this._startx=e.originalEvent.changedTouches[0].clientX)-this._startX,this._relDisY=(e.clientY!=p?this._starty=e.clientY:this._starty=e.originalEvent.changedTouches[0].clientY)-this._startY,this._duration=(e.timeStamp||Date.now())-this._timeStart,this._velocityY=Math.abs(this._relDisY)/this._duration,this._velocityX=Math.abs(this._relDisX)/this._duration,Math.abs(this._relDisX)>Math.abs(this._relDisY)?this._swipe=0<this._relDisX?"left":"right":this._swipe=0<this._relDisY?"up":"down",!c.isNullOrUndefined(e.target.tagName)&&"iframe"===e.target.tagName.toLowerCase())return e.type="mouseup",void this._mouseUp(e);var t,i,s,n=("mousemove"==e.type?e:e.originalEvent.changedTouches[0])[r.clientXy];o&&n!==o&&(this._mouseMoved=!0,s=n-o,t=this.model[r.scrollVal]-s,1==l&&5<Math.abs(s)&&(d=r.position,l=0),0==l&&(o=n),0<=t&&t<=r.scrollable&&d===r.position&&(i=.5<this._velocityY&&this._duration<50&&"Top"==r.position,s=.5<this._velocityX&&this._duration<50&&"Left"==r.position,(.5<this._velocityY||.5<this._velocityX)&&this._duration<50?i?(t=Math.abs(this._relDisY)+this._duration*this._velocityY,this._startY>this._starty?(t+=this.scrollTop())>r.scrollable&&(t=r.scrollable):(t<this.scrollTop()&&(t=Math.abs(t-this.scrollTop())),t>this.scrollTop()&&(t=0)),this.scrollTop()<=r.scrollable&&this.scrollY(t,!1,this.model.animationSpeed,"thumb")):s&&(t=Math.abs(this._relDisX),this._startX>this._startx?(t+=this.scrollLeft())>r.scrollable&&(t=r.scrollable):(t-=this.scrollLeft(),((t=Math.abs(t))>r.scrollable||t>=this.scrollLeft())&&(t=0)),this.scrollLeft()<=r.scrollable&&this.scrollX(t,!1,this.model.animationSpeed,"thumb")):(this["scroll"+r.xy](t,!0,"","thumb",e.type),"X"===r.xy?this._hScrollbar.scroll(t,"thumb",!0,e.type):c.isNullOrUndefined(this._vScrollbar)||this._vScrollbar.scroll(t,"thumb",!0,e.type),this.content().css("cursor","pointer"),this._trigger("thumbMove",{originalEvent:e,direction:"down"==this._swipe||"right"==this._swipe?1:-1,scrollData:r})))),u.ontouchmove=function(e){(e=e||u.event).preventDefault&&e.preventDefault(),e.returnValue=!1},null==o&&(o=n),(0==Math.round(this._content.scrollTop())&&"down"==this._swipe||(Math.ceil(this._content.scrollTop())==r.scrollable||Math.ceil(this._content.scrollTop())+1==r.scrollable)&&"up"==this._swipe)&&(this._trigger("scrollEnd",{originalEvent:e.originalEvent,scrollData:e}),u.ontouchmove=null)}},this._trigger("touchStart",{originalEvent:a,direction:"down"==this._swipe||"right"==this._swipe?1:-1,scrollData:this._scrollData,scrollTop:this.content().scrollTop(),scrollLeft:this.content().scrollLeft()}),this._on(h(document),"mousemove",{d:r,source:"thumb"},this._mouseMove),this._isNativeScroll?this._on(this.content(),"touchmove",{d:r,source:"thumb"},this._touchMove):this._on(h(document),"touchmove",{d:r,source:"thumb"},this._mouseMove),this._on(h(document),"mouseup touchend",{d:r,source:"thumb"},this._mouseUp)))},_touchMove:function(e){this.content().css("cursor","pointer"),this._mouseMoved=!0,this._tempLeft=(null!=this.model.targetPane?this.content().find(this.model.targetPane):this.content()).scrollLeft(),this._tempTop=this.content().scrollTop()},_touchDown:function(e){var t=this._tempLeft!=this.scrollLeft()?this._scrollXdata:this._tempTop!=this.scrollTop()?this._scrollYdata:this._scrollYdata||this._scrollXdata;this._trigger("scrollStop",{source:"thumb",originalEvent:e,scrollData:t,scrollTop:this.content().scrollTop(),scrollLeft:this.content().scrollLeft()})},_speedScrolling:function(e){if(this._mouseMoved){if(0<this.element.find(".e-vhandle").length){var t=this.content().scrollTop();if(this._tempTop!==t){this._trigger("thumbMove",{originalEvent:e,direction:"down"==this._swipe||"right"==this._swipe?1:-1,scrollData:this._scrollData}),this._vScrollbar.scroll(this.content().scrollTop(),"thumb",!0,"touchmove");var e={source:"thumb",scrollData:this._vScrollbar?this._vScrollbar._scrollData:null,scrollTop:this.content().scrollTop(),originalEvent:e},i=this._isJquery3?Math.ceil(e.scrollTop):e.scrollTop;if(this.scrollTop(i),this._trigger("scroll",e))return}}if(0<this.element.find(".e-hhandle").length){var s=null!=this.model.targetPane?this.content().find(this.model.targetPane):this.content(),t=s.scrollLeft();if(this._tempLeft!==t){this._trigger("thumbMove",{originalEvent:e,direction:"down"==this._swipe||"right"==this._swipe?1:-1,scrollData:this._scrollData}),this._hScrollbar.scroll(s.scrollLeft(),"thumb",!0,"touchmove");e={source:"thumb",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:this.content().scrollLeft(),originalEvent:e},i=this._isJquery3?Math.ceil(e.scrollLeft):e.scrollLeft;if(this.scrollLeft(i),this._trigger("scroll",e))return}}this.content().css("cursor","pointer")}},_scroll:function(e){var t,i=[this._vScrollbar?this._vScrollbar._scrollData:null,this._hScrollbar?this._hScrollbar._scrollData:null];this._evtData&&(t=this._evtData.d||this._evtData);for(var s=0;s<2;s++){var n,a=i[s];a&&!a.skipChange&&(this.model&&(!this.model.targetPane||this.model.targetPane&&t&&"X"!=t.xy)&&("height"===a.dimension?this.scrollTop(e.target[a.scrollVal]):this.scrollLeft(e.target[a.scrollVal])),this.model&&null!=this.model.targetPane&&1==s&&this.content().find(this.model.targetPane).length?a.sTop=this.content().find(this.model.targetPane)[0][a.scrollVal]:"scrollTop"==a.scrollVal?a.sTop=this.scrollTop():a.sTop=this.scrollLeft(),this[a.scrollVal](a.sTop),a.fromScroller||(1===s?(n=this.content()[0],this._rtlScrollLeftValue&&n.scrollWidth-n.clientWidth!=this._rtlScrollLeftValue&&(this._rtlScrollLeftValue=n.scrollWidth-n.clientWidth),a.sTop=this.model&&"mozilla"!=c.browserInfo().name&&this.model.enableRTL&&!this._hScrollbar._scrollData._scrollleftflag?0==this._rtlScrollLeftValue?-1*a.sTop:a.sTop-this._rtlScrollLeftValue:a.sTop,this._hScrollbar.scroll(a.sTop,"",!0)):this._vScrollbar.scroll(a.sTop,"",!0),(2==i.length&&1==s||1==i.length&&0==s)&&(this._externalScroller=!1,this.model&&this._trigger("scroll",{source:"custom",scrollData:this._hScrollbar?this._hScrollbar._scrollData:null,scrollLeft:this.scrollLeft(),originalEvent:e}))))}this._isNativeScroll&&this.model.enableTouchScroll&&this._speedScrolling(e),this._UpdateScrollLeftValue(e);var r=this;this._vScrollbar&&this._scrollYdata&&this.model&&this._scrollYdata.scrollable-this.model.scrollOneStepBy>=this.scrollTop()&&(h(":hover").filter(this.element[0]).length||r._off(c.getScrollableParents(r.wrapper),"scroll",null),u.onmousewheel=function(e){r.model&&r.model.preventDefault&&h(":hover").filter(r.element[0]).length})},_UpdateScrollLeftValue:function(e){this.model&&"touchstart"!=e.type&&"mousedown"!=e.type&&this.model.enableRTL&&this._rtlScrollLeftValue&&this.model.scrollLeft!=this._previousScrollLeft&&(this.model.scrollLeft=this._rtlScrollLeftValue-this.model.scrollLeft,this._previousScrollLeft=this.model.scrollLeft),(this.model&&"touchstart"==e.type||"mousedown"==e.type)&&this.model.enableRTL&&(this.model.scrollLeft=this.content().scrollLeft(),this.option("scrollLeft",this.content().scrollLeft()))},_changevHandlerPosition:function(e){var t=this._vScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&0<=e&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_changehHandlerPosition:function(e){var t=this._hScrollbar;t&&(e=null!=t._scrollData&&e>=t._scrollData.scrollable?t._scrollData.scrollable:e,null!=t&&0<=top&&e<=t._scrollData.scrollable&&t[t._scrollData.handler].css(t._scrollData.lPosition,e/t._scrollData.onePx+"px"))},_destroy:function(){this._off(this.content(),"scrollstop",this._touchDown),this._off(h(document),"mouseup",this._mouseUpContent),this.element.css({width:"",height:""}).children(".e-vscrollbar,.e-hscrollbar").remove(),this.content().removeClass("e-content").css({width:"",height:""}),this.element.removeClass("e-widget")},_preventDefault:function(e){(e=e||u.event).preventDefault&&e.preventDefault(),e.returnValue=!1}})}(jQuery,Syncfusion,window),function(j,L){L.gridFeatures=L.gridFeatures||{},L.gridFeatures.gridResize=function(e){this.$headerTable=e.getHeaderTable(),this.gridInstance=e,this._colMinWidth=15,this._$visualElement=j(),this._currentCell=-1,this._allowStart=!1,this._oldWidth=null,this._orgX=null,this._orgY=null,this._extra=null,this._expand=!1,this._target=null,this._cellIndex=-1},L.gridFeatures.gridResize.prototype={_mouseHover:function(e){var t,i,s,n,a,r;this._$visualElement.is(":visible")||(this._allowStart=!1,j(e.target).is(".e-headercelldiv")&&(e.target=e.target.parentNode),t=j(e.target),!j(e.target).hasClass("e-filtericon")||"col-resize"!=j(e.target).css("cursor")&&"col-resize"!=j(e.target).closest("tr").css("cursor")||(j(e.target).css("cursor","pointer"),j(e.target).closest("tr").css("cursor","pointer")),t.hasClass("e-headercell")&&(r=(i=e.target).getBoundingClientRect(),a=s=0,e.type="mousemove",s=e.clientX,a=e.clientY,n=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderContent().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left:this.gridInstance.getHeaderTable().width()+this.gridInstance.element.children(".e-gridheader").find(".e-columnheader").offset().left,(s>=r.left+document.documentElement.scrollLeft+i.offsetWidth-5||s<=r.left+3)&&s<n&&s>=r.left&&a<=r.top+document.documentElement.scrollTop+e.target.offsetHeight?(a=(s>r.left+3?j(e.target):j(e.target).prevAll("th:visible:first")).find(".e-headercelldiv"),r=window.pageXOffset||document.documentElement.scrollTop||document.body.scrollTop,r=this.gridInstance.element.find(".e-headercell").not(".e-detailheadercell").offset().left+10-r,(this.gridInstance.model.enableRTL&&s<=r||!this.gridInstance.model.enableRTL&&r<=s)&&((this.gridInstance.model.showStackedHeader||a.length)&&-1==j.inArray(j(a).attr("data-ej-mappingname"),this.gridInstance._disabledResizingColumns)?(this.gridInstance.model.showStackedHeader&&j(t.parents("thead")).find("tr").addClass("e-resizedragicon"),this.gridInstance.model.showStackedHeader||t.parent().addClass("e-resizedragicon"),j(e.target).hasClass("e-stackedHeaderCell")?this._currentCell=this.gridInstance.getHeaderContent().find(".e-headercell:visible").index(i):this._currentCell=this.gridInstance.getHeaderContent().find(".e-headercell:visible").not(".e-stackedHeaderCell,.e-detailheadercell").index(i),this.gridInstance.model.enableRTL&&(this._currentCell=this._currentCell-1),this._allowStart=!0):(t.parent().css("cursor","pointer"),this._currentCell=-1))):(this.gridInstance.element.find(".e-columnheader").removeClass("e-resizedragicon"),this._currentCell=-1)))},_start:function(e,t){var i,s=this.gridInstance.getHeaderTable().find(".e-columnheader"),s=j(this._target).hasClass("e-stackedHeaderCell")?s.find(".e-headercell").not(".e-hide"):s.find(".e-headercell").not(".e-stackedHeaderCell,.e-hide");if(-1!=this._currentCell&&this._currentCell<s.length&&(i=s[this._currentCell]),void 0!==i){var s=i.getBoundingClientRect(),n=this._tableY=s.top+parseInt((-1!=navigator.userAgent.indexOf("WebKit")?document.body:document.documentElement).scrollTop);if(this._allowStart){var a=this._$visualElement=j(document.createElement("div")),r=this.gridInstance.element.find(".e-gridcontent").first().height()+this.gridInstance.element.find(".e-gridheader").height();if(this.gridInstance.model.showStackedHeader&&0<this.gridInstance.model.stackedHeaderRows.length)for(var o=this.gridInstance.getHeaderTable().find("tr.e-columnheader"),l=(o.length,j(this._target).parent("tr")[0].rowIndex),d=0;d<l;d++)r-=j(o[d]).height();a.addClass("e-reSizeColbg").appendTo(this.gridInstance.element).attr("unselectable","on").css("visibility","hidden"),this.gridInstance._resizeTimeOut=setTimeout(function(){a.css({visibility:"visible",height:r+"px",cursor:"col-resize",left:e,top:n,position:"fixed"})},100),this._oldWidth=i.offsetWidth,this._orgX=e,this._orgY=t,this._extra=e-this._orgX,this._expand=!0}else this._currentCell=-1}},_mouseMove:function(e){var t,i;this._expand?(i=t=0,"mousemove"==e.type?(t=e.clientX,i=e.clientY):"MSPointerMove"==e.type?(t=e.originalEvent.clientX,i=e.originalEvent.clientY):"touchmove"==e.type&&(t=e.originalEvent.changedTouches[0].clientX,i=e.originalEvent.changedTouches[0].clientY),0==t&&0==i&&-1!=navigator.userAgent.indexOf("WebKit")&&(t=e.pageX,i=e.pageY),t+=document.documentElement.scrollLeft,e.preventDefault(),this._moveVisual(t)):this._mouseHover(e)},_touchStart:function(e){if(!this._$visualElement.is(":visible")){this._allowStart=!1,j(e.target).is(".e-headercelldiv")&&(e.target=e.target.parentNode);var t,i,s,n,a,r=j(e.target);if(r.hasClass("e-headercell")&&(a=(t=e.target).getBoundingClientRect(),s=i=0,"touchstart"==e.type&&(i=e.originalEvent.changedTouches[0].clientX,s=e.originalEvent.changedTouches[0].clientY),n=this.gridInstance.element.children(".e-gridheader"),n=this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderContent().width()+n.find(".e-columnheader").offset().left:this.gridInstance.getHeaderTable().width()+n.find(".e-columnheader").offset().left,(i>=a.left+document.documentElement.scrollLeft+t.offsetWidth-10||i<=a.left+8)&&i<n&&i>=a.left&&s<=a.top+document.documentElement.scrollTop+e.target.offsetHeight?(n=(i>a.left+8?j(e.target):j(e.target).prevAll("th:visible:first")).find(".e-headercelldiv"),a=window.pageXOffset||document.documentElement.scrollTop||document.body.scrollTop,a=this.gridInstance.element.find(".e-headercell").not(".e-detailheadercell").offset().left+10-a,(this.gridInstance.model.enableRTL&&i<=a||!this.gridInstance.model.enableRTL&&a<=i)&&((this.gridInstance.model.showStackedHeader||n.length)&&-1==j.inArray(j(n).attr("data-ej-mappingname"),this.gridInstance._disabledResizingColumns)?(j(e.target).hasClass("e-stackedHeaderCell")?this._currentCell=this.gridInstance.getHeaderContent().find(".e-headercell:visible").index(t):this._currentCell=this.gridInstance.getHeaderContent().find(".e-headercell:visible").not(".e-stackedHeaderCell,.e-detailheadercell").index(t),this.gridInstance.model.enableRTL&&(this._currentCell=this._currentCell-1),this._allowStart=!0):this._currentCell=-1)):this._currentCell=-1),this._allowStart){if(this._target=r,"ejGrid"==this.gridInstance.pluginName&&this.gridInstance.model.allowResizing){if(this._triggerResizeEvents("resizeStart",i))return}else if("ejTreeGrid"==this.gridInstance.pluginName&&this.gridInstance.model.allowColumnResize&&this.gridInstance._triggerColumnResize("columnResizeStart",i,e))return;return i+=document.documentElement.scrollLeft,2!=e.button&&this._start(i,s),!1}return!0}},_getCellIndex:function(e){j(e._target);var t=e._target,i=t.getBoundingClientRect(),s=(-1!=navigator.userAgent.indexOf("WebKit")?document.body:document.documentElement).scrollLeft;this._orgX<i.left+5+s&&(t=j(t).prevAll(":visible:first")[0]);s=t.cellIndex,t=s;return e.gridInstance.model.groupSettings.groupedColumns.length&&(t=s-e.gridInstance.model.groupSettings.groupedColumns.length),t},_reSize:function(e,t){if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns?this._initialTableWidth=this.gridInstance.getHeaderTable().first().parent().width()+this.gridInstance.getHeaderTable().last().parent().width():this._initialTableWidth=this.gridInstance.getHeaderTable().parent().width(),this.gridInstance.model.enableRTL&&(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell=this._currentCell-1:this.gridInstance.model.enableRTL||this._getResizableCell(),o=this.gridInstance.model.scrollSettings&&0<this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.getHeaderTable().find("thead"):j(this._target).parents("thead"),-1!=this._currentCell&&this._expand){this._expand=!1;var i,s,n=(j(this._target).hasClass("e-stackedHeaderCell")?o.find(".e-headercell:not(.e-detailheadercell)"):o.find(".e-headercell:not(.e-detailheadercell,.e-stackedHeaderCell)")).filter(":visible")[this._currentCell],a=n.offsetWidth,r=e-this._orgX;if(this.gridInstance.model.enableRTL&&(r=-r),parseInt(r)+parseInt(a)>this._colMinWidth){0!=r&&o.css("cursor","default"),"nextcolumn"==L.getObject("resizeSettings.resizeMode",this.gridInstance.model)&&(l=this.gridInstance.getHeaderTable().find("colgroup").find("col"),L.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),l=this.gridInstance._$headerCols),i=l.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&L.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell),s=parseInt(i[0].style.width)),this._resizeColumnUsingDiff(a,r);var o=(e=this.gridInstance.element.find(".e-gridcontent").first()).find("div").hasClass("e-content"),l=!L.isIOSWebView()&&this.gridInstance.getBrowserDetails();if(l&&"msie"==l.browser&&this.gridInstance.model.allowScrolling&&(d=this.gridInstance.getContentTable().width(),h=this.gridInstance._calculateWidth(),this.gridInstance.model.scrollSettings&&0<this.gridInstance.model.scrollSettings.frozenColumns?this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterTable().last().width(h-this.gridInstance.getFooterContent().find(".e-frozenfootertdiv").width()):d<h&&this.gridInstance.model.showSummary&&this.gridInstance.getFooterTable().width(h),8<parseInt(l.version,10)&&this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length&&(d<h?this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",20/e.find("table").first().width()*100+"%"):(this.gridInstance.getContentTable().css("width","100%"),this.gridInstance._groupingAction(!0),this.gridInstance.getContentTable().children("colgroup").find("col").first().css("width",(this.gridInstance.getHeaderTable().find("colgroup").find("col").first().width()/e.find("table").first().width()*100).toFixed(2)+"%"))),this.gridInstance.getHeaderTable().parent().scrollLeft(e.find(".e-content").scrollLeft()-1)),this.gridInstance._colgroupRefresh(),this.gridInstance.model.allowTextWrap&&(this.gridInstance._isResized=!0,this.gridInstance.rowHeightRefresh()),this.gridInstance.model.groupSettings.groupedColumns.length&&!this.gridInstance.model.isEdit&&this.gridInstance._recalculateIndentWidth(),"normal"!=L.getObject("resizeSettings.resizeMode",this.gridInstance.model))if("nextcolumn"==L.getObject("resizeSettings.resizeMode",this.gridInstance.model)){var d=this.gridInstance.getHeaderTable().find("colgroup").find("col"),h=this.gridInstance.getContentTable().find("colgroup").find("col");L.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),d=this.gridInstance._$headerCols,h=this.gridInstance._$contentCols);var c,u,p,m,g,f=this._currentCell+1,d=d.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&L.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?f+this.gridInstance.model.groupSettings.groupedColumns.length:f);if((S=parseInt(d[0].style.width)+(s-parseInt(i[0].style.width)))<this._colMinWidth&&(S=this._colMinWidth),d.width(S),this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var d=this.gridInstance.getContentTable().find(".e-recordtable"),_=d.find("colgroup"),v=this.gridInstance.getVisibleColumnNames().length;this.gridInstance.getContentTable().find(".e-detailrow").length&&(_=_.not(d.find(".e-detailrow").find("colgroup")).get());for(var b=0;b<_.length;b++){var x=j(_[b]).find("col").filter(this._diaplayFinder);x.length>v&&x.splice(0,x.length-v),j(x[f]).width(S)}}if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(0<=f&&f<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+r>this.gridInstance.element.find(".e-headercontent").first().width())return;c=h.filter(this._diaplayFinder).eq(f)}else c=h.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&L.isNullOrUndefined(this.gridInstance.model.detailsTemplate)?f+this.gridInstance.model.groupSettings.groupedColumns.length:f);c.width(S),this.gridInstance._findColumnsWidth(),0<this.gridInstance.model.scrollSettings.frozenColumns&&j(n).is(":last-child")&&"ejGrid"==this.gridInstance.pluginName&&(u=i.width()-s,p=this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()+u,m=this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width()-u,g=parseInt(this.gridInstance.getHeaderContent().find(".e-movableheader")[0].style["margin-left"])+u,this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(p),this.gridInstance.getContent().find(".e-frozencontentdiv").width(p),this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(p),this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width(m),this.gridInstance.getContent().find(".e-movablecontentdiv").width(m),this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-movablefooterdiv").width(m),this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",g),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",g),this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-movablefooter").css("margin-left",g)),0<this.gridInstance.model.scrollSettings.frozenColumns&&j(n).is(":last-child")&&"ejTreeGrid"==this.gridInstance.pluginName&&(u=i.width()-s,p=this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width()+u,m=this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width()-u,g=parseInt(this.gridInstance.getHeaderContent().find(".e-movableheader")[0].style["margin-left"])+u,this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(p),this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",g),this.gridInstance.getHeaderContent().find(".e-movableheaderdiv").width(m),this.gridInstance.getContent().find(".e-frozencontainer").width(p).next().css("margin-left",g+"px"),this.gridInstance.getContent().find(".e-movablecontent").width(m),this.gridInstance.model.showTotalSummary&&(this.gridInstance._$totalSummaryRowContainer.find(".e-frozenfooterdiv").width(p),this.gridInstance._$totalSummaryRowContainer.find(".e-movablefooter").css("margin-left",g+"px")),this.gridInstance._renderScroller(!0)),0<this.gridInstance.model.scrollSettings.frozenColumns&&j(this._target).parent("tr").parents("div:first").hasClass("e-frozenheaderdiv")&&"ejGrid"==this.gridInstance.pluginName&&(this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(this._newWidth),this.gridInstance.getContent().find(".e-frozencontentdiv").width(this._newWidth),this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(this._newWidth))}else this.gridInstance.model.scrollSettings.frozenColumns||(y=this.gridInstance.getHeaderTable().width(),"ejTreeGrid"==this.gridInstance.pluginName||this.gridInstance.model.allowScrolling||this.gridInstance.model.isResponsive?this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterTable())&&this.gridInstance.getFooterTable().css("width",y+parseInt(r)):j("#"+this.gridInstance._id).css("width",y+parseInt(r)),this.gridInstance.model.scrollSettings.width+=parseInt(r),this.gridInstance.getContent().width()>this.gridInstance.getContentTable().width()?(this.gridInstance.getContentTable().addClass("e-tableLastCell"),this.gridInstance.getHeaderTable().addClass("e-tableLastCell")):(this.gridInstance.getContentTable().removeClass("e-tableLastCell"),this.gridInstance.getHeaderTable().removeClass("e-tableLastCell")));if("msie"!=l.browser&&l&&this.gridInstance.model.allowScrolling&&0==this.gridInstance.model.scrollSettings.frozenColumns&&("fixed"!=this.gridInstance.model.columnLayout&&(this.gridInstance.getHeaderTable().width("100%"),this.gridInstance.getContentTable().width("100%")),this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterTable())&&this.gridInstance.getFooterTable().width("100%"),((T=this.gridInstance._calculateWidth())<=this.gridInstance.getContentTable().width()||this.gridInstance.getHeaderTable().width()>this.gridInstance.getContentTable().width())&&this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterTable())&&this.gridInstance.getFooterTable().width(T)),this.gridInstance.model.allowResizing&&"default"==this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor")){var y=this._currentCell,l=j(this._target),w=[],C=[],S=a+r,T={};if(this.gridInstance.model.showStackedHeader&&l.hasClass("e-stackedHeaderCell")){for(var R,r=l.parent(".e-stackedHeaderRow").index(),k=l.text(),O=this.gridInstance.model.stackedHeaderRows[r].stackedHeaderColumns,b=0;b<O.length;b++)O[b].headerText==k&&(R=O[b].column);var D=R|[];L.isNullOrUndefined(R)||R instanceof Array||(D=R.split(","));for(b=0;b<D.length;b++){var I=this.gridInstance.getColumnIndexByField(D[b]);w.push(I),C.push(this.gridInstance.model.columns[I])}T={columnIndex:w,column:C,oldWidth:a,newWidth:S}}else T={columnIndex:y,column:this.gridInstance.model.columns[y],oldWidth:a,newWidth:S};this.gridInstance._trigger("resized",T)}this.gridInstance.model.allowScrolling&&(this.gridInstance.getScrollObject().refresh(0<this.gridInstance.model.scrollSettings.frozenColumns),this.gridInstance.model.isResponsive&&this.gridInstance.model.minWidth&&this.gridInstance.windowonresize(),!o&&e.find("div").hasClass("e-content")&&this.gridInstance.refreshScrollerEvent(),this.gridInstance._isHscrollcss())}}this._target=null,this._$visualElement.remove(),this._expand=!1,this._currentCell=-1,this._allowStart=!1},_getFrozenResizeWidth:function(){for(var e=this.gridInstance.getHeaderTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),t=0,i=0;i<e.length;i++)"none"!=e.eq(i).css("display")&&(t+=parseInt(e[i].style.width.replace("px","")));return t},_diaplayFinder:function(){return"none"!=j(this).css("display")},_resizeColumnUsingDiff:function(e,t){this._currntCe=this._currentCell,this._widthchanges(e,t);var i,s,n=this._newWidth,a=this._extra,r=this._$headerCols,o=this._$ContentCols,l=this._$headerCol;this._$frozenCols;if("ejTreeGrid"==this.gridInstance.pluginName&&0<t&&!L.isNullOrUndefined(this.gridInstance._currentCell)&&1==this.gridInstance.model.columns[this.gridInstance._currentCell].isFrozen&&(C=this.gridInstance._frozenWidth())>this.gridInstance._gridWidth-18-50)return;if(0<n&&0!=t){n<this._colMinWidth&&(n=this._colMinWidth),"nextcolumn"==L.getObject("resizeSettings.resizeMode",this.gridInstance.model)&&(i=l.next(),(s=!(!this.gridInstance.model.scrollSettings.frozenColumns||this._currentCell!=this.gridInstance.model.scrollSettings.frozenColumns-1))&&(i=r.eq(this.gridInstance.model.scrollSettings.frozenColumns)),(s||!l.is(":last-child"))&&i.width()+(l.width()-n)<=this._colMinWidth&&(n=l.width()+(i.width()-this._colMinWidth)));var d,t=n-e;if(this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns){if(0<=this._currentCell&&this._currentCell<this.gridInstance.model.scrollSettings.frozenColumns&&this._getFrozenResizeWidth()+t>this.gridInstance.element.find(".e-headercontent").first().width())return;d=o.filter(this._diaplayFinder).eq(this._currentCell)}else d=o.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&L.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell);if(j(this._target).parent("tr").hasClass("e-stackedHeaderRow")?this._resizeStackedHeaderColumn(j(this._target).parent("tr"),a,this._currntCe):l.outerWidth(n),this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterTable())){this._$footerCols=this.gridInstance.getFooterTable().find("colgroup").find("col");var h=this.gridInstance.model.columns.length;this._$footerCols.length>h&&this._$footerCols.splice(0,this._$footerCols.length-h);var c=this._$footerCols,u=c.filter(this._diaplayFinder).eq(this._currentCell);if(j(this._target).parent("tr").hasClass("e-stackedHeaderRow"))for(var p=0;p<this._changedcell.length;p++)u=c.filter(this._diaplayFinder).eq(p),(C=parseInt(a)+parseInt(c[p].style.width))<this._colMinWidth&&(C=this._colMinWidth),u.outerWidth(C);else u.outerWidth(n)}if(j(this._target).parent("tr").hasClass("e-stackedHeaderRow")){if(this.gridInstance.model.groupSettings.groupedColumns.length)for(var m=(b=this.gridInstance.getContentTable().find(".e-recordtable")).find("colgroup"),p=0;p<this._changedcell.length;p++)for(var g=this._changedcell[p],f=0;f<m.length;f++){var _=j(m[f]).children().filter(this._diaplayFinder);(C=parseInt(a)+parseInt(_[g].style.width))<this._colMinWidth&&(C=this._colMinWidth),j(_[g]).width(C)}this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder).length;for(p=0;p<this._changedcell.length;p++){var v=this.gridInstance.getContentTable().find("colgroup").find("col").filter(this._diaplayFinder)[this._changedcell[p]];(C=parseInt(a)+parseInt(v.style.width))<this._colMinWidth&&(C=this._colMinWidth),j(v).outerWidth(C),this.gridInstance.model.isEdit&&this.gridInstance.model.allowGrouping&&0==this.gridInstance.model.groupSettings.groupedColumns.length&&(v=this.gridInstance.getContentTable().find(".gridform").find("colgroup col").filter(this._diaplayFinder)[this._changedcell[p]],j(v).outerWidth(C))}}else{if(this.gridInstance.model.groupSettings&&this.gridInstance.model.groupSettings.groupedColumns.length){var b,m=(b=this.gridInstance.getContentTable().find(".e-recordtable")).find("colgroup"),g=this._currentCell,h=this.gridInstance.getVisibleColumnNames().length;this.gridInstance.getContentTable().find(".e-detailrow").length&&(m=m.not(b.find(".e-detailrow").find("colgroup")).get());for(p=0;p<m.length;p++){var x=j(m[p]).find("col").filter(this._diaplayFinder);x.length>h&&x.splice(0,x.length-h),j(x[g]).width(n)}}d.outerWidth(n),this.gridInstance.model.isEdit&&(d=(y=this.gridInstance.getContentTable().find(".e-editedrow,.e-addedrow")).find("table").find("colgroup col"),y=y.hasClass("e-addedrow")&&this.gridInstance.model.groupSettings.groupedColumns.length?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length-1:this._currentCell,d.filter(this._diaplayFinder).eq(y).outerWidth(n))}if(this.gridInstance._findColumnsWidth(),this.gridInstance.model.scrollSettings&&this.gridInstance.model.scrollSettings.frozenColumns&&"nextcolumn"!=L.getObject("resizeSettings.resizeMode",this.gridInstance.model)&&"ejGrid"==this.gridInstance.pluginName){var y,w=this.gridInstance.getContentTable().find("colgroup").find("col").slice(0,this.gridInstance.model.scrollSettings.frozenColumns),C=0;for(p=0;p<w.length;p++)C+="none"==w[p].style.display?0:parseInt(w[p].style.width.replace("px",""));this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(C),y=this.gridInstance.model.enableRTL?"margin-right":"margin-left",this.gridInstance.getContent().find(".e-frozencontentdiv").width(C).next().css(y,C+"px"),this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(C).next().css(y,C+"px"),this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-frozenfooterdiv").width(C)}"ejTreeGrid"==this.gridInstance.pluginName&&(!L.isNullOrUndefined(this.gridInstance._currentCell)&&1==this.gridInstance.model.columns[this.gridInstance._currentCell].isFrozen&&"nextcolumn"!=L.getObject("resizeSettings.resizeMode",this.gridInstance.model)||!this.gridInstance._isFrozenStackedResize&&this.gridInstance._isStackedResize&&0<this.gridInstance._frozenColumnsLength)&&(C=this.gridInstance._frozenWidth(),this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(C),this.gridInstance.getContent().find(".e-frozencontainer").width(C).next().css("margin-left",C+"px"),this.gridInstance.getHeaderContent().find(".e-frozenheaderdiv").width(C).next().css("margin-left",C+"px"),this.gridInstance.model.showTotalSummary&&(this.gridInstance._$totalSummaryRowContainer.find(".e-frozenfooterdiv").width(C),this.gridInstance._$totalSummaryRowContainer.find(".e-movablefooter").css("margin-left",C+"px")),this.gridInstance._findColumnsWidth(),this.gridInstance._renderScroller(!0)),this.gridInstance.getHeaderTable().find(".e-columnheader").hasClass("e-resizedragicon")||this.gridInstance.getHeaderTable().find(".e-columnheader").css("cursor","default")}},_resizeStackedHeaderColumn:function(e,t,i){this._changedcell=[];var s=0,n=0,a=this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell")[i],i=j(a).attr("colspan"),r=j(a).parent("tr"),o=(r.next(),a.cellIndex);for(this.gridInstance.model.groupSettings.showGroupedColumn&&(s+=n=this.gridInstance.model.groupSettings.groupedColumns.length);n<o;){o--;var l=j(r).children("th").not(".e-detailheadercell")[o];s+=parseInt(j(l).attr("colspan"))}for(var d=(this._currentCell=s)+parseInt(i),h=s;h<d;h++){var c=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder)[h];this._changedcell.push(h-n);var u=parseInt(t)+parseInt(c.style.width);u<this._colMinWidth&&(u=this._colMinWidth),j(c).outerWidth(u)}},_triggerResizeEvents:function(e,t){var i=this.gridInstance.getHeaderTable().find(".e-columnheader"),s=i.find(".e-headercell").filter(":visible"),n=this._cellIndex,a=j(this._target),r=[],o=[];"resizeStart"==e&&(this._orgX=t,n=this._cellIndex=this._getCellIndex(this,t));var l=s[this.gridInstance.model.enableRTL&&(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell-1:(this.gridInstance.model.enableRTL||this._getResizableCell(),this._currentCell)],d=l.offsetWidth;if(this.gridInstance.model.showStackedHeader&&a.hasClass("e-stackedHeaderCell")){for(var h,s=a.parent(".e-stackedHeaderRow").index(),c=a.text(),u=this.gridInstance.model.stackedHeaderRows[s].stackedHeaderColumns,p=0;p<u.length;p++)u[p].headerText==c&&(h=u[p].column);var m=h|[];L.isNullOrUndefined(h)||h instanceof Array||(m=h.split(","));for(p=0;p<m.length;p++){var g=this.gridInstance.getColumnIndexByField(m[p]);r.push(g),o.push(this.gridInstance.model.columns[g])}}if("resizeStart"==e){var f={};return f=this.gridInstance.model.showStackedHeader&&a.hasClass("e-stackedHeaderCell")?{columnIndex:r,column:o,target:a,oldWidth:d}:{columnIndex:n,column:this.gridInstance.model.columns[n],target:j(l),oldWidth:d},this.gridInstance._trigger("resizeStart",f)}i.find(".e-headercell").not(".e-detailheadercell").filter(":visible");t-=this._orgX;this._widthchanges(d,t),this.gridInstance._colgroupRefresh();f={};return f=this.gridInstance.model.showStackedHeader&&a.hasClass("e-stackedHeaderCell")?{columnIndex:r,column:o,target:j(l),oldWidth:d,newWidth:this._newWidth,extra:t}:{columnIndex:n,column:this.gridInstance.model.columns[n],target:j(l),oldWidth:d,newWidth:this._newWidth,extra:t},this.gridInstance._trigger("resizeEnd",f)},_widthchanges:function(e,t){var i=this._$headerCols=this.gridInstance.getHeaderTable().find("colgroup").find("col");this._$ContentCols=this.gridInstance.getContentTable().find("colgroup").find("col");L.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)||(this.gridInstance._detailColsRefresh(),i=this._$headerCols=this.gridInstance._$headerCols,this._$ContentCols=this.gridInstance._$contentCols);var s=this._$headerCol=i.filter(this._diaplayFinder).eq(this.gridInstance.model.allowGrouping&&L.isNullOrUndefined(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)?this._currentCell+this.gridInstance.model.groupSettings.groupedColumns.length:this._currentCell),i=(this._$frozenCols=i.slice(0,this.gridInstance.model.scrollSettings?this.gridInstance.model.scrollSettings.frozenColumns:0),s[0].style.width),s=-1!=i.indexOf("%"),i=!i||s?j(this._target).outerWidth():i,e=s?1:e/parseInt(i);this._extra=t/e,this._newWidth=parseInt(t)+parseInt(i)},_mouseUp:function(e){var t,i;this.gridInstance._resizeTimeOut&&(clearTimeout(this.gridInstance._resizeTimeOut),this.gridInstance._resizeTimeOut=0),this._expand&&(t=e.clientX,i=e.clientY,-1!=navigator.userAgent.indexOf("WebKit")&&(t=e.pageX,i=e.pageY),"touchend"==e.type&&(t=e.originalEvent.changedTouches[0].clientX,i=e.originalEvent.changedTouches[0].clientY),this.gridInstance.model.allowResizing&&(this.gridInstance.getHeaderTable().find(".e-columnheader").hasClass("e-resizedragicon")||"touchend"==e.type)&&this._triggerResizeEvents("resizeEnd",t)?this.gridInstance.element.find(".e-reSizeColbg").remove():(t+=document.documentElement.scrollLeft,this._reSize(t,i),!L.isNullOrUndefined(this._currntCe)&&0<=this._currntCe&&(i=(t=L.DataManager(this.gridInstance.model.columns).executeLocal((new L.Query).where("visible","equal",!0)))[this._currntCe],i=this.gridInstance.model.columns.indexOf(i),t.length!=this.gridInstance.model.columns.length?this.gridInstance.model.columns[i].width=this.gridInstance.columnsWidthCollection[i]:this.gridInstance.model.columns[this._currntCe].width=this.gridInstance.columnsWidthCollection[this._currntCe])))},_getResizableCell:function(){var e=this.gridInstance.model.scrollSettings.frozenColumns,t=(n=j(this._target).hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderTable().find(".e-columnheader"):this.gridInstance.getHeaderTable().find(".e-columnheader").not(".e-stackedHeaderRow")).find(".e-headercell").not(".e-hide,.e-detailheadercell"),i=(-1!=navigator.userAgent.indexOf("WebKit")?document.body:document.documentElement).scrollLeft;if(e&&-1!=this._currentCell&&this._currentCell==e-1&&(s=t[this._currentCell].getBoundingClientRect().left+i+5>this._orgX),!e||this._currentCell!=e-1||s)for(var s=j(this._target).closest(".e-columnheader").index(),n=j(this._target).hasClass("e-stackedHeaderCell")?n[s]:n,t=j(n).find(".e-headercell").not(".e-hide,.e-detailheadercell"),a=0;a<t.length;a++){var r=t[a].getBoundingClientRect();if(r.left+i+5>this._orgX&&t[a].offsetHeight+r.top>=this._orgY)return void(this._currentCell=a-1);if(a==t.length-1||this.gridInstance.model.showStackedHeader&&j(this._target).get(0)===t[a])return void(this._currentCell=a)}},_moveVisual:function(e){var t=this.gridInstance.getHeaderContent().find("div").first()[0].getBoundingClientRect();t.left+document.documentElement.scrollLeft+t.width<e||e<t.left+document.documentElement.scrollLeft?this._$visualElement.remove():-1!=this._currentCell&&this._$visualElement.css({left:e,top:this._tableY})},_mouseDown:function(e){if(this._allowStart&&j(e.target).closest("tr").hasClass("e-resizedragicon")){this._target=e.target;var t=e.clientX,i=e.clientY;if(-1!=navigator.userAgent.indexOf("WebKit")&&(t=e.pageX,i=e.pageY-(window.pageYOffset||document.body.scrollTop||0)),this.gridInstance.model.allowResizing&&this.gridInstance.getHeaderTable().find(".e-columnheader").hasClass("e-resizedragicon")&&(j(e.target).is(".e-headercelldiv")&&(e.target=e.target.parentNode),this._target=e.target,this._triggerResizeEvents("resizeStart",t)))return;return t+=document.documentElement.scrollLeft,2!=e.button&&this._start(t,i),!1}return!0},_columnResizeToFit:function(e){var t=this.gridInstance.getHeaderTable().find(".e-columnheader").filter(function(e){return"col-resize"==j(this).css("cursor")});if(this.gridInstance.model.allowResizeToFit&&t.length){j(e.target).is(".e-headercelldiv")&&(e.target=e.target.parentNode);var i=j(e.target),s=0,n=0,a=i.hasClass("e-stackedHeaderCell")?this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-detailheadercell"):this.gridInstance.getHeaderContent().find(".e-headercell").not(".e-stackedHeaderCell,.e-detailheadercell");if((this._target=i).hasClass("e-headercell")){var r=e.target,o=j.inArray(r,a),t=o;this._orgX=e.pageX,this.gridInstance.model.enableRTL?this._currentCell=o:this._getResizableCell(),o!=this._currentCell&&(o=t=this._currentCell,r=e.target.previousSibling);var e=a.filter(":visible")[t],l=[],d=[],h=[],n=this.gridInstance.model.groupSettings.groupedColumns.length;if(L.isNullOrUndefined(this.gridInstance.model.detailsTemplate)&&L.isNullOrUndefined(this.gridInstance.model.childGrid)||(n+=1),j(r).parent("tr").hasClass("e-stackedHeaderRow")){var r=j(e).attr("colspan"),c=j(e).parent("tr"),u=e.cellIndex;for(c.next();n<u;){u--;var p=j(c).children("th")[u];s+=parseInt(j(p).attr("colspan"))}var m=s+parseInt(r)}else m=(s=t)+1;var g,f=0,_=0,v=[],b=[];if(-1!=s){var x=a.slice(0,s+1).filter(".e-hide").length,y={columnIndex:s+x,column:this.gridInstance.model.columns[s+x],target:i,oldWidth:S};this.gridInstance._trigger("resizeStart",y);for(var w=s;w<m;w++){x=a.slice(0,w+1).filter(".e-hide").length,g=this._getContentWidth(w+x);var C=this.gridInstance.getHeaderTable().find(".e-headercell:not(.e-hide, .e-stackedHeaderCell)").children(".e-headercelldiv").eq(w),f=g<(_=this._getHeaderContentWidth(C))?_:g;f+=parseInt((C.css("padding-left"),10+(C.css("padding-right"),10)));var S=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder).eq(w+n).width();f=f<S||this._colMinWidth<f?f:this._colMinWidth;var T,C=this.gridInstance.getHeaderTable().find("col").filter(this._diaplayFinder);(this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&C.splice(0,1),C.eq(w+n).width(f),this.gridInstance.model.groupSettings.groupedColumns.length&&(R=this.gridInstance.getContentTable().find(".e-recordtable").find("colgroup"),T=this,j.each(R,function(e,t){j(t).find("col").filter(T._diaplayFinder).eq(w).width(f)}));var R=this.gridInstance.getContentTable().find("col").filter(this._diaplayFinder);if((this.gridInstance.model.detailsTemplate||this.gridInstance.model.childGrid)&&R.splice(0,1),R.eq(w+n).width(f),this.gridInstance.model.isEdit){this.gridInstance.getContentTable().find(".e-editedrow").find("col");for(var k=this.gridInstance.element.find(".gridform"),O=0;O<k.length;O++)j(k[O]).find("col").eq(w+n).width(f)}v.push(this.gridInstance.model.columns[w+x]),b.push(Math.abs(f-S)),l.push(w+x),d.push(f),h.push(S),(0<this.gridInstance.model.scrollSettings.frozenColumns||this.gridInstance.model.groupSettings.groupedColumns.length&&this.gridInstance.model.isEdit)&&(R=w+x,this.gridInstance.columnsWidthCollection[R]=f,this.gridInstance.setWidthToColumns(),this.gridInstance.model.scrollSettings.frozenColumns<=R+1&&(this.gridInstance.getHeaderContent().find(".e-movableheader").css("margin-left",f),this.gridInstance.getContent().find(".e-movablecontent").css("margin-left",f),this.gridInstance.model.showSummary&&!L.isNullOrUndefined(this.gridInstance.getFooterContent())&&this.gridInstance.getFooterContent().find(".e-movablefooter").css("margin-left",f)))}}this.gridInstance._colgroupRefresh(),this.gridInstance._recalculateIndentWidth(),y={columnIndex:l,column:v,target:e,oldWidth:h,newWidth:d,extra:b},this.gridInstance._trigger("resizeEnd",y);for(w=0;w<l.length;w++)this.gridInstance.columnsWidthCollection[l[w]]=d[w],this.gridInstance.model.columns[l[w]].width=d[w];y={columnIndex:l,column:v,target:e,oldWidth:h,newWidth:d,extra:b},this.gridInstance._trigger("resized",y),0<this.gridInstance.model.summaryRows.length&&this.gridInstance._summaryColRrefresh(),this.gridInstance._findColumnsWidth()}}},_getContentWidth:function(s){var n,e,a=0,r=L.buildTag("span",{},{}),o=this.gridInstance;return L.isNullOrUndefined(o._gridRows)||(e=o._gridRows,o.model.scrollSettings.frozenColumns&&o.model.currentViewData.length&&s>=o.model.scrollSettings.frozenColumns&&(e=e[1],s-=o.model.scrollSettings.frozenColumns),j.each(e,function(e,t){var i;j(t).is(".e-row,.e-alt_row")&&!j(t).is(".e-editedrow")&&(i=j(t).find("td.e-rowcell").eq(s),t=j(i).html(),o.model.columns[s].commands?r.html(j(t).children()):i.hasClass("e-validError")?r.html(j(t).attr("value")):r.html(t),j(i).html(r),n=0<i.find("span:first").width()?i.find("span:first").width()+parseFloat(i.css("padding-left"))+parseFloat(i.css("padding-right")):i.find("span:first").width(),a<n&&(a=n),j(i).html(t))})),o._refreshUnboundTemplate(this.gridInstance.getContentTable()),a},_getHeaderContentWidth:function(e){var t=0,i=L.buildTag("span",{},{}),s="msie"==this.gridInstance.getBrowserDetails().browser;s&&i.css("position","absolute");var n=e.html();return i.html(n),e.html(i),t=e.find("span:first").width()+parseFloat(e.css("padding-left"))+parseFloat(e.css("padding-right")),s&&(t+=2),!this.gridInstance.model.allowFiltering||"menu"!=this.gridInstance.model.filterSettings.filterType&&"excel"!=this.gridInstance.model.filterSettings.filterType||(t=t+(s=e.parent().find(".e-filtericon")).width()+10,s.length&&(t+=parseFloat(s.css("margin-left")))),e.html(n),t}}}(jQuery,Syncfusion),function(d,h){h.widget("ejToolbar","ej.Toolbar",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_rootCSS:"e-toolbar",angular:{terminal:!1},defaults:{height:"",width:"",enabled:!0,hide:!1,disabledItemIndices:[],enabledItemIndices:[],enableSeparator:!1,orientation:"horizontal",enableRTL:!1,isResponsive:!1,showRoundedCorner:!1,htmlAttributes:{},dataSource:null,Items:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group",template:"template",overflow:"overflow"},query:null,responsiveType:"popup",fields:{id:"id",tooltipText:"tooltipText",imageUrl:"imageUrl",text:"text",imageAttributes:"imageAttributes",spriteCssClass:"spriteCssClass",htmlAttributes:"htmlAttributes",group:"group",template:"template",overflow:"overflow"},tooltipSettings:{associate:"mouseenter",showShadow:!0,position:{stem:{horizontal:"left",vertical:"top"}},tip:{size:{width:5,height:5},adjust:{xValue:17,yValue:17}},isBalloon:!1},cssClass:"",targetID:null,create:null,click:null,itemHover:null,itemLeave:null,overflowOpen:null,overflowClose:null,destroy:null},dataTypes:{enabled:"boolean",hide:"boolean",enableSeparator:"boolean",disabledItemIndices:"data",enabledItemIndices:"data",orientation:"enum",enableRTL:"boolean",showRoundedCorner:"boolean",isResponsive:"boolean",dataSource:"data",query:"data",fields:"data",cssClass:"string",htmlAttributes:"data",targetID:"string",responsiveType:"enum"},hide:function(){if(!this.model.enabled&&"none"==this.element.css("display"))return!1;this.element.css("display","none"),this.model.hide=!0},show:function(){if(!this.model.enabled&&"none"!=this.element.css("display"))return!1;this.element.css("display","block"),this.model.hide=!1},_init:function(){null!=this.model.targetID&&this.element.html(d("#"+this.model.targetID).find("ul,ol")),this._cloneElement=d(this.element).clone(),(this._localDataSource=null)==this.model.dataSource&&null==this.model.Items||this._generateTemplate(),this.model.dataSource instanceof h.DataManager||this._initialize(),this._renderTooltip(this.model.tooltipSettings)},_setModel:function(e){for(var t in e)switch(t){case"height":this._setHeight(e[t]);break;case"width":this.model.width=e[t],this._setWidth(),this._bindUnbindWidth();break;case"enabled":this._controlStatus(e[t]);break;case"disabledItemIndices":this._disableItemByIndex(e[t]),e[t]=this.model.disabledItemIndices;break;case"enabledItemIndices":this._enableItemByIndex(e[t]);break;case"isResponsive":this.model.isResponsive=e[t],this.model.isResponsive?(this._responsiveLayout(),this._renderTooltip(this.model.tooltipSettings)):this._removeResponsive();break;case"hide":this._controlVisibleOptions(e[t]);break;case"orientation":this._setOrientation(e[t]),this.model.orientation=e[t],this._wireResizing();break;case"tooltipSettings":this.model.tooltipSettings=d.extend(!0,this.model.tooltipSettings,e[t]),this._renderTooltip(this.model.tooltipSettings);break;case"enableRTL":this._enableRTL(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"cssClass":this._setSkin(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"enableSeparator":this.model.enableSeparator=e[t],this._renderToolbarSeparator();break;case"fields":d.extend(this.model.fields,e[t]);break;case"query":this.model.query=e[t];break;case"dataSource":for(var i in e)"fields"==i&&d.extend(this.model.fields,e[i]),"query"==i&&(this.model.query=e[i]);this._refreshTagItems(t,e[t]);break;case"Items":d.extend(this.model.Items,e[t]),this._refreshTagItems(t,e[t]);break;case"targetID":this.model.targetID=e[t],this._setTargetID()}},_setTargetID:function(){this.element.removeAttr("role tabindex aria-disabled style"),d(this._spantag).remove(),d(this._liTemplte).remove(),this._liTemplte=this._tipRes=null,this.element.removeClass("e-widget e-box e-toolbarspan e-rtl"),this.element.find("ul,ol").removeClass("e-ul e-horizontal e-vertical e-separator e-comnrtl"),this.element.find("li").removeClass("e-tooltxt e-comnrtl"),this.element.find("li").removeAttr("aria-label"),this._init()},_refreshTagItems:function(e,t){this.model[e]=t,this.element.empty(),this._generateTemplate(),this._initialize()},_setHeight:function(e){this.element.css("height",e)},_setWidth:function(){if("auto"==this.model.width){for(var e=parseFloat(this.element.css("border-left-width"))+parseFloat(this.element.css("border-right-width")),t=this.element.find("ul").children("li"),i=this.element.find("ul"),s="inline"==this.model.responsiveType?this.element.find(".e-arrow-sans-down"):this.element.find(".e-toolbar-res-arrow"),n=0,a=i.length;n<a;n++)null!=i[n]&&d(i[n]).hasClass("e-separator")&&(e+=parseFloat(i.eq(n).css("border-right-width"))+parseFloat(i.eq(n).css("border-left-width")));null!=s[0]&&("inline"==this.model.responsiveType?e+=Math.round(this.element.find(".e-arrow-sans-down").outerWidth())+8:e+=Math.round(this.element.find(".e-toolbar-res-arrow").outerWidth())+8);for(n=0,a=t.length;n<a;n++)null!=t[n]&&(e+=Math.round(t.eq(n).outerWidth()));this.element.css("width",Math.ceil(e))}else this.element.css("width",this.model.width)},_bindUnbindWidth:function(){"auto"!=this.model.width?this._off(d(window),"resize",this._widthHandler):this._on(d(window),"resize",this._widthHandler)},_widthHandler:function(e){this._setWidth(this.model.width)},_setOrientation:function(e){e!=h.Orientation.Vertical?(this.element.removeClass(this.model.cssClass).addClass("e-toolbarspan "+this.model.cssClass),this.itemsContainer.removeClass("e-ul e-vertical").addClass("e-ul e-horizontal")):(this.element.removeClass("e-toolbarspan "+this.model.cssClass).addClass(this.model.cssClass),this.itemsContainer.removeClass("e-ul e-horizontal").addClass("e-ul e-vertical")),this.items.addClass("e-tooltxt")},_reSizeHandler:function(){this._isResized&&0<this._liTemplte.children().length&&(e=this.element.children("ol.e-show, ul.e-show"),t=this._liTemplte.children("ol.e-show, ul.e-show"),0<e.length||0<t.length?d(this._liTemplte.children()).appendTo(this.element):d(this._liTemplte.children()).insertBefore(d(this.element).find("span.e-res-pos")),this._renderToolbarSeparator(),"inline"!=this.model.responsiveType&&this._liTemplte.addClass("e-display-none"),this._contstatus=!1),this._elementWidth="function"==typeof window.getComputedStyle?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1,this._liWidth=this._spanWidth;var e=this.element.children("ol.e-show:visible, ul.e-show:visible"),t=this.element.children("ol:visible:not(.e-show), ul:visible:not(.e-show)");this._spantag.removeClass("e-display-block").addClass("e-display-none"),this._ensureOverflow(e),this._ensureOverflow(t),"inline"==this.model.responsiveType&&(this._liTemplte.removeClass("e-normal"),this._liTemplte.css("width",this.element.width())),this._isResized=!0},_ensureOverflow:function(e){for(var t=0;t<e.length;t++)this._liWidth+=d(e[t]).outerWidth(!0)+8,this._liWidth>this._elementWidth&&(this._spantag.hasClass("e-display-block")||this._spantag.removeClass("e-display-none").addClass("e-display-block"),this._spantag.addClass("e-res-pos"),this._liTemplte.addClass("e-normal"),this._liTemplte.append(e[t]))},_getZindexPartial:function(){return h.util.getZindexPartial(this.element,this.popup)},_getOffset:function(e){return h.util.getOffset(e)},_btnMouseClick:function(e){var t,i,s,n=this.element.outerWidth(),a=this.element.outerHeight(),r=d(this._liTemplte).outerWidth(),o=d(window).width(),l=d(window).scrollLeft();d(e.currentTarget).hasClass("e-disable")||(i=this._getZindexPartial(),s=this._getOffset(this.element),n=this.model.enableRTL?s.left:s.left+n-r,a=s.top+a-1+2,n=n<l?l+1:o+l<n+r?o-r+l-1:n,this._contstatus?(this._liTemplte.addClass("e-display-none"),"inline"==this.model.responsiveType&&this._spantag.removeClass("e-active"),this._contstatus=!1,t={currentTarget:e.currentTarget,clientX:e.clientX,clientY:e.clientY,cancel:e.cancellable},this._trigger("overflowClose",t)):(this._liTemplte.removeClass("e-display-none"),"inline"!=this.model.responsiveType&&this._liTemplte.css({top:a+"px",left:n+"px","z-index":i}),"inline"==this.model.responsiveType&&this._spantag.addClass("e-active"),this._contstatus=!0,t={currentTarget:e.currentTarget,clientX:e.clientX,clientY:e.clientY,cancel:e.cancellable},this._trigger("overflowOpen",t),"inline"!=this.model.responsiveType&&this._on(h.getScrollableParents(this.element),"scroll",this._hidecontext),this.element.bind("click",d.proxy(this._hidecontext,this))),this._contstatus&&"inline"!=this.model.responsiveType&&this._on(d(document),"mouseup",this._documentClick),this._contstatus||this._off(d(document),"mouseup",this._documentClick),this._removeListHover())},_hidecontext:function(e){d(e.target).is(d("#"+this.element[0].id+"_target"))||"inline"==this.model.responsiveType||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,this.element.unbind("click",d.proxy(this._hidecontext,this)),this._off(h.getScrollableParents(this.element),"scroll",this._hidecontext),this._off(d(document),"mouseup",this._documentClick))},_documentClick:function(e){d(e.target).is(d("#"+this.element[0].id+"_target"))||0!=d(e.target).closest("div#"+this.element[0].id+"_hiddenlist").length||d(e.target).parents().hasClass("e-ddl-popup")||(this._liTemplte.addClass("e-display-none"),this._contstatus=!1,e={currentTarget:e.currentTarget,clientX:e.clientX,clientY:e.clientY,cancel:e.cancellable},this._trigger("overflowClose",e),this._off(d(document),"mouseup",this._documentClick))},_setSkin:function(e){this.element.removeClass(this.model.cssClass).addClass(e);e="e-toolbarTooltip "+e;this._subControlsSetModel("cssClass",e)},_subControlsSetModel:function(e,t){h.isNullOrUndefined(this._tipToolbar)||d(this.target).ejTooltip("option",e,t),h.isNullOrUndefined(this._tipRes)||d(this._liTemplte).ejTooltip("option",e,t)},_destroy:function(){this.element.html(""),h.isNullOrUndefined(this._tipToolbar)||d(this.target).ejTooltip("destroy"),h.isNullOrUndefined(this._tipRes)||d(this._liTemplte).ejTooltip("destroy"),this._cloneElement.removeClass("e-toolbar e-js"),this.element.replaceWith(this._cloneElement),this._liTemplte&&this._liTemplte.remove(),this._unWireResizing()},_initialize:function(){this.element.attr({role:"toolbar",tabindex:"0"});this.element.children().find("li");this._focusEnable=!0,this._renderControl(),this._responsiveLayout(),this._wireEvents()},_responsiveLayout:function(){if(this._roundedCorner(this.model.showRoundedCorner),this.model.isResponsive&&"horizontal"==this.model.orientation){h.isNullOrUndefined(this._liTemplte)||(h.isNullOrUndefined(this._tipRes)||this._tipRes.destroy(),d(this._liTemplte).remove()),this._spantag=d("<span id='"+this.element[0].id+"_target' class='e-icon e-toolbar-res-arrow e-rel-position e-display-block' unselectable='on'></span>"),"inline"==this.model.responsiveType&&this._spantag.removeClass("e-toolbar-res-arrow").addClass("e-inlinearrow e-arrow-sans-down"),0<this.element.children("ol.e-show, ul.e-show").length?this.element[0].insertBefore(this._spantag[0],this.element[0].childNodes[0]):this._spantag.appendTo(this.element),this._liTemplte=d("<div id='"+this.element[0].id+"_hiddenlist' class='e-responsive-toolbar e-display-none e-abs-position "+d(this.element)[0].className+"'></div>"),"inline"==this.model.responsiveType&&this._liTemplte.removeClass("e-abs-position").addClass("e-inline"),this._spanWidth=this._spantag.outerWidth(!0)+8,this.model.enableRTL&&this._liTemplte.addClass("e-rtl"),this._isResized=!1,this._elementWidth="function"==typeof window.getComputedStyle?parseFloat(window.getComputedStyle(this.element[0]).width):this.element.width()-1,this._liWidth=this._spanWidth;for(var e=0;e<this.itemsContainer.length;e++)this._liWidth+=d(this.itemsContainer[e]).outerWidth(!0);this._liWidth>this._elementWidth?this._reSizeHandler():this._spantag.removeClass("e-display-block").addClass("e-display-none"),("inline"==this.model.responsiveType?d(this.element[0]):d("body")).append(this._liTemplte),this._renderTooltip(this.model.tooltipSettings)}this._on(d("#"+this.element[0].id+"_target"),"mousedown",this._btnMouseClick),this._wireResizing(),this._controlVisibleOptions(this.model.hide),this._enableRTL(this.model.enableRTL),this._disabledItems=this.model.disabledItemIndices,this._controlStatus(this.model.enabled),this.model.disabledItemIndices=this._disabledItems,0!=this.model.disabledItemIndices.length&&this._disableItemByIndex(this.model.disabledItemIndices),0!=this.model.enabledItemIndices.length&&this._enableItemByIndex(this.model.enabledItemIndices),this._setWidth()},_removeResponsive:function(){d(this._spantag).remove(),h.isNullOrUndefined(this._tipRes)||d(this._liTemplte).ejTooltip("destroy");var e=d(this._liTemplte).children("ul");d(this._liTemplte).detach(),d(this.element).append(e),this.itemsContainer=this.element.children("ol,ul"),this.items=this.itemsContainer.children("li"),this._off(this.items,"mouseup"),this._off(this.items,"mousedown"),this._off(this.element,"mousedown"),this._wireEvents(),this._wireResizing(),this._setWidth()},_controlVisibleOptions:function(e){0!=e?this.hide():this.show()},_controlStatus:function(e){1!=e?this.disable():this.enable()},_roundedCorner:function(e){e?(this.element.addClass("e-corner"),this._liTemplte&&this._liTemplte.addClass("e-corner")):(this.element.removeClass("e-corner"),this._liTemplte&&this._liTemplte.removeClass("e-corner")),this._subControlsSetModel("showRoundedCorner",e)},_generateTemplate:function(){var t=this;this.element.css("visibility","hidden"),this.model.dataSource instanceof h.DataManager?this.model.dataSource.executeQuery(this.model.query).done(function(e){t._generateGroup(e.result),t._initialize(),t.element.css("visibility","")}):(null!=this.model.dataSource?t._generateGroup(t.model.dataSource):t._generateGroup(t.model.Items),t.element.css("visibility",""))},_generateGroup:function(e){this._localDataSource=e;for(var t=-1,i=[],s=0;s<e.length;s++)if(this._isNewGroup(e[s][this.model.fields.group],i)){i[++t]=e[s][this.model.fields.group];var n=-1;this.itemsSource=[];for(var a=s;a<e.length;a++)e[s][this.model.fields.group]==e[a][this.model.fields.group]&&(this.itemsSource[++n]=e[a]);this.element.append(this._generateTagitems())}},_isNewGroup:function(e,t){if(!t)return!0;for(var i=0;i<t.length;i++)if(e==t[i])return!1;return!0},_renderControl:function(){this.element.addClass("e-widget e-box"),this._renderToolbarItems(),this._addAttr(this.model.htmlAttributes),this._setOrientation(this.model.orientation),this._renderToolbarSeparator(),this._setHeight(this.model.height),this._bindUnbindWidth()},_renderToolbarItems:function(){this.target=this.element[0],this.itemsContainer=this.element.children("ol,ul"),this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li");for(var e=0;e<this.items.length;e++)h.isNullOrUndefined(d(this.items[e]).attr("title"))&&h.isNullOrUndefined(d(this.items[e]).attr("aria-label"))&&d(this.items[e]).attr("aria-label",this.items[e].id);this._liCount=this.items.length},_generateTagitems:function(){var e,t=this.itemsSource;for(this.ultag=h.buildTag("ul"),e=0;e<t.length;e++)"show"==t[e][this.model.fields.overflow]&&this.ultag.addClass("e-show"),this.ultag.append(this._generateLi(t[e]));return this.ultag},_generateLi:function(e){var t,i,s=h.buildTag("li");return e[this.model.fields.id]?s.attr("id",e[this.model.fields.id]):e[this.model.fields.text]&&s.attr("id",e[this.model.fields.text]),e[this.model.fields.tooltipText]&&s.attr("title",e[this.model.fields.tooltipText]),e[this.model.fields.imageUrl]&&""!=e[this.model.fields.imageUrl]&&(t=h.buildTag("img.e-align","",{},{src:e[this.model.fields.imageUrl],alt:e[this.model.fields.text]}),e[this.model.fields.imageAttributes]&&this._setAttributes(e[this.model.fields.imageAttributes],t),s.append(t)),e[this.model.fields.spriteCssClass]&&""!=e[this.model.fields.spriteCssClass]&&(i=h.buildTag("div.e-align "+e[this.model.fields.spriteCssClass]+" e-spriteimg"),s.append(i)),e[this.model.fields.text]&&""!=e[this.model.fields.text]&&s.append(e[this.model.fields.text]),e[this.model.fields.htmlAttributes]&&this._setAttributes(e[this.model.fields.htmlAttributes],s),e[this.model.fields.template]&&(i=h.buildTag("div .e-align",e[this.model.fields.template]),s.append(i)),s},_setAttributes:function(e,t){for(var i in e)d(t).attr(i,e[i])},_renderToolbarSeparator:function(){var e,t;if(this.model.enableSeparator){for(e=0,t=this.itemsContainer.length-1;e<t;e++)d(this.itemsContainer[e]).addClass("e-separator");if(1==this.itemsContainer.length)for(e=0,t=this.itemsContainer[0].children.length;e<t;e++)e==t-1?d(this.itemsContainer[0].children[e]).removeClass("e-separator"):d(this.itemsContainer[0].children[e]).addClass("e-separator")}else this.itemsContainer.removeClass("e-separator").find(".e-separator").removeClass("e-separator");this._setWidth()},_addAttr:function(e){var i=this;d.map(e,function(e,t){"class"==t?i.element.addClass(e):"disabled"==t&&"disabled"==e?i.disable():i.element.attr(t,e)})},_enableRTL:function(e){e?(this.element.addClass("e-rtl"),this.items.addClass("e-comnrtl"),this.model.orientation==h.Orientation.Horizontal&&this.itemsContainer.addClass("e-comnrtl"),this._liTemplte&&this._liTemplte.addClass("e-rtl")):(this.element.removeClass("e-rtl"),this.items.removeClass("e-comnrtl"),this.model.orientation==h.Orientation.Horizontal&&this.itemsContainer.removeClass("e-comnrtl"),this._liTemplte&&this._liTemplte.removeClass("e-rtl")),this.model.enableRTL=e,this._subControlsSetModel("enableRTL",e),this._renderToolbarSeparator()},_renderTooltip:function(e){e=d.extend(!0,{},e);h.isNullOrUndefined(e.cssClass)?e.cssClass="e-toolbarTooltip "+this.model.cssClass:e.cssClass=e.cssClass+" e-toolbarTooltip "+this.model.cssClass,e.enableRTL=this.model.enableRTL,e.showRoundedCorner=this.model.showRoundedCorner,e.target="li[data-content], li[title]",e.beforeOpen=this._showTooltip,this._tipToolbar=d(this.target).ejTooltip(e).data("ejTooltip"),this.model.isResponsive&&!h.isNullOrUndefined(this._liTemplte)&&(this._tipRes=d(this._liTemplte).ejTooltip(e).data("ejTooltip"))},_showTooltip:function(e){var t=d(e.event.currentTarget);e.event.target;t.hasClass("e-disable")&&(e.cancel=!0)},_hideTooltip:function(){h.isNullOrUndefined(this._tipToolbar)||(this._tipToolbar.hide(),this._tipToolbar._isHidden=!1),h.isNullOrUndefined(this._tipRes)||(this._tipRes.hide(),this._tipRes._isHidden=!1)},_addOverlay:function(e){for(var t,i=0;i<e.length;i++)d(e[i]).hasClass("e-disable")||(d(e[i]).addClass("e-disable"),t=h.buildTag("div.e-item-overlay"),d(e[i]).append(t))},_removeOverlay:function(e){for(var t=0;t<e.length;t++)d(e[t]).children(".e-item-overlay").remove()},disableItem:function(e){e=d(e);null==e||e.length<=0||(e.hasClass("e-disable")||(e.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(e)),e.removeClass("e-hover e-active").attr("data-aria-selected",!1))},enableItem:function(e){e=d(e);null==e||e.length<=0||(e.removeClass("e-disable").attr("aria-disabled",!1).removeClass("e-disable"),this._removeOverlay(e))},disableItemByID:function(e){e=this.itemsContainer.find("li#"+e);null==e||e.length<=0||this.disableItem(e)},enableItemByID:function(e){e=this.itemsContainer.find("li#"+e);null==e||e.length<=0||this.enableItem(e)},_enableItemByIndex:function(e){var t;if(!this.model.enabled)return!1;if(0!=e.length)for(var i=0;i<e.length;i++)-1<d.inArray(e[i],this.model.disabledItemIndices)&&(t=d.inArray(e[i],this.model.disabledItemIndices),this.enableItem(this.items[this.model.disabledItemIndices[t]]),this.model.disabledItemIndices.splice(t,1))},_disableItemByIndex:function(e){if(!this.model.enabled)return!1;this._disabledItems=this.model.disabledItemIndices;for(var t=0;t<e.length;t++)d.inArray(e[t],this.model.disabledItemIndices)<0&&this._disabledItems.push(parseInt(e[t]));for(t=0;t<this.items.length;t++)-1<d.inArray(t,this.model.disabledItemIndices)&&this.disableItem(this.items[t]);this.model.disabledItemIndices=this._disabledItems},disable:function(){if("true"==this.element.attr("aria-disabled"))return!1;this.element.attr("aria-disabled",!0).removeAttr("aria-label"),this._addOverlay(this.items),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.addClass("e-disable"),this.model.enabled=!1,this._subControlsSetModel("enabled",!1)},enable:function(){if(this.model.disabledItemIndices=[],"false"==this.element.attr("aria-disabled"))return!1;this.items.removeClass("e-disable"),this._removeOverlay(this.items),this.element.attr("aria-disabled",!1),this.model.isResponsive&&"horizontal"==this.model.orientation&&this._spantag.removeClass("e-disable"),this.model.enabled=!0,this._subControlsSetModel("enabled",!0)},refresh:function(){this._reSizeHandler()},selectItem:function(e){e=d(e);null==e||e.length<=0||(e.addClass("e-active").attr("data-aria-selected",!0),this._activeItem=d(this.items).index(e))},deselectItem:function(e){e=d(e);null==e||e.length<=0||e.removeClass("e-active").attr("data-aria-selected",!1)},selectItemByID:function(e){e=this.itemsContainer.find("li#"+e);null==e||e.length<=0||this.selectItem(e)},deselectItemByID:function(e){e=this.itemsContainer.find("li#"+e);null==e||e.length<=0||this.deselectItem(e)},removeItem:function(e){this.model.disabledItemIndices=[];var e=d(e),t=0;if(!(null==e||e.length<=0)){e.remove(),this.items=this.itemsContainer.children("li");for(var i=0;i<this.items.length;i++)d(this.items[i]).hasClass("e-disable")&&(this.model.disabledItemIndices[t++]=i)}},removeItemByID:function(e){e=this.itemsContainer.find("li#"+e);null==e||e.length<=0||this.removeItem(e)},_wireResizing:function(){this.model.isResponsive&&"horizontal"==this.model.orientation?d(window).bind("resize",d.proxy(this._reSizeHandler,this)):this._unWireResizing()},_unWireResizing:function(){d(window).unbind("resize",d.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this.element,"mousedown",this._clickEventHandler),this._on(this.element,"focus",this._focusElement),this._on(this.element,"blur",this._targetBlur),this._on(this.items,"mouseenter",this._onItemHover),this._on(this.items,"mouseleave",this._onItemLeave),this._on(this.items,"mousedown",this._onItemClick),this._on(this.items,"mouseup",this._onItemClick)},_onItemHover:function(e){var t=d(e.currentTarget),e=e.target;t.hasClass("e-disable")?clearTimeout(this._tipToolbar.mouseTimer):(this.items.removeClass("e-hover"),t.addClass("e-hover"),e={currentTarget:t,target:e,status:this.model.enabled},this._trigger("itemHover",e))},_onItemClick:function(e){if(d(e.currentTarget).hasClass("e-disable")||1!=e.which)return!1;var t=e.currentTarget,i=e.target;h.isDevice()||this._hideTooltip(),"mousedown"==e.type?(this._focusEnable=!1,d(t).addClass("e-active"),this._focusedItem=this._currentItem=d(t),this.mouseDownItem=t):"mouseup"==e.type&&this.mouseDownItem==t&&(d(t).hasClass("e-active")&&(this._removeSelection(),d(t).hasClass("e-disable")||(e={currentTarget:t,text:d(t).attr("data-content"),target:i,status:this.model.enabled,event:e},this.model.isResponsive&&this._contstatus&&0<d(t).closest(".e-responsive-toolbar").length?this._activeItem=this._liTemplte.find(".e-tooltxt").index(t):this._activeItem=d(this.items).index(t),this._trigger("click",e))),this.mouseDownItem=void 0)},_onItemLeave:function(e){var t=d(e.currentTarget),e=e.target;t.hasClass("e-disable")||(this._removeSelection(),t.removeClass("e-hover"),e={currentTarget:t,target:e,status:this.model.enabled},this._trigger("itemLeave",e))},_onKeyPress:function(e){var t,i=e.keyCode||e.which||e.charCode,s=this.model.isResponsive&&0<this._liTemplte.find(".e-tooltxt").length?(this._keyPressed=!0,this._items=(this._contstatus?this._liTemplte:this.element).find(".e-tooltxt"),this._items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)")):(this._keyPressed=!1,this.items.filter(".e-tooltxt:visible:not(.e-hidden, .e-disable)"));if(this._focusedItem?(n=this._focusedItem,this._focusedItem=null):n=s.filter(".e-hover"),"keydown"==e.type)9==i&&e.shiftKey&&0<d(s[s.index(n)-1]).length?(e.preventDefault(),t=d(s[s.index(n)-1])):9==i&&0<d(s[s.index(n)+1]).length&&!e.shiftKey?(e.preventDefault(),t=d(s[s.index(n)+1])):(38==i||39==i)&&this.model.orientation!=h.Orientation.Vertical||(39==i||40==i)&&this.model.orientation==h.Orientation.Vertical?(e.preventDefault(),t=0<d(s[s.index(n)+1]).length?d(s[s.index(n)+1]):s.first()):(37==i||40==i)&&this.model.orientation!=h.Orientation.Vertical||(37==i||38==i)&&this.model.orientation==h.Orientation.Vertical?(e.preventDefault(),t=0<d(s[s.index(n)-1]).length?d(s[s.index(n)-1]):s.last()):33==i||36==i?(e.preventDefault(),t=s.first()):34!=i&&35!=i||(e.preventDefault(),t=s.last()),t&&(this._removeListHover(),t.addClass("e-hover"));else switch(i){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:break;case 13:case 32:if(e.preventDefault(),!n[0])break;var n={currentTarget:n[0],target:d(n)[0],status:this.model.enabled,event:e};this._trigger("click",n);break;case 27:e.preventDefault(),this.element.blur()}},_removeListHover:function(){d(this.items).removeClass("e-hover")},_addListHover:function(){var e=this._getActiveItem();e.hasClass("e-disable")||e.addClass("e-hover").focus()},_getActiveItem:function(){return this.model.isResponsive&&this._keyPressed?d(this._items[this._activeItem]):d(this.items[this._activeItem])},_targetBlur:function(e){e.preventDefault(),this.element.focusout().removeClass("e-focus"),this._removeListHover(),this._off(this.element,"keyup",this._onKeyPress)._off(this.element,"keydown",this._onKeyPress),this._trigger("focusOut")},_clickEventHandler:function(e){this._clicked=!0},_removeSelection:function(){this._currentItem&&"true"!=this._currentItem.attr("data-aria-selected")&&this._currentItem.removeClass("e-active")},_focusElement:function(e){this.element.hasClass("e-focus")||(this.element.addClass("e-focus"),this._on(this.element,"keyup",this._onKeyPress)._on(this.element,"keydown",this._onKeyPress),this._focusEnable)?(this._removeListHover(),this._activeItem=this._clicked?-1:0,(this._getActiveItem().hasClass("e-disable")||this._getActiveItem().is(":hidden"))&&(this._activeItem=d(this.items).filter('li:not([class*="e-disable"])').first().index()),this._addListHover()):this._focusEnable=!0}}),h.Toolbar.ResponsiveType={Popup:"popup",Inline:"inline"}}(jQuery,Syncfusion);var __extends=this&&this.__extends||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);function s(){this.constructor=e}e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)};!function(f){var i,e=(i=ej.WidgetBase,__extends(t,i),t.prototype.setModel=function(e,t){this.setModel(e,t)},t.prototype.option=function(e,t){this.option(e,t)},t.prototype.triggerEvents=function(e,t){switch(e){case"click":var i=this._trigger(e,t);break;case"hover":i=this._trigger(e,t);break;case"tracking":i=this._trigger(e,t);break;case"beforeOpen":i=this._trigger(e,t);break;case"open":i=this._trigger(e,t);break;case"beforeClose":case"close":i=this._trigger(e,t)}return i},t.prototype.enable=function(e){this.tooltip[0].classList.contains("e-disable")&&(this.model.enabled=!0,this.tooltip[0].classList.remove("e-disable"))},t.prototype.disable=function(e){this.tooltip[0].classList.contains("e-disable")||(this.model.enabled=!1,this.tooltip[0].classList.add("e-disable"))},t.prototype.show=function(e,t){var i;this.model.enabled&&(ej.isNullOrUndefined(e)?(i=null==this.model.target?this.element:f(this.element).find(this.model.target+":first"),this._positionElement(i)):this._positionElement(e),ej.isNullOrUndefined(t)?this._showTooltip():"string"==typeof t?f(this.tooltip).show(t):"function"==typeof t&&t.call.apply(this.tooltip))},t.prototype.hide=function(e){this.model.enabled&&(ej.isNullOrUndefined(e)?this._hideTooltip():"string"==typeof e?f(this.tooltip).hide(e):"function"==typeof e&&e.call.apply(this.tooltip))},t.prototype._destroy=function(){this.mouseTimer&&clearTimeout(this.mouseTimer),this.timer&&clearTimeout(this.timer),f(this.tooltip).remove(),this.tooltip=null},t.prototype._setModel=function(e){for(var t in e)switch(t){case"height":this._setHeight(e[t]);break;case"width":this._setWidth(e[t]);break;case"enabled":this._enabled(e[t]);break;case"content":this._setContent(e[t]);break;case"title":this.model.title=e[t],null==this.model.title?(f(this.tooltipHeader).remove(),this.tooltipHeader=null,this.tooltipTitle=null,this.model.closeMode===ej.Tooltip.CloseMode.Sticky&&this._iconRender()):ej.isNullOrUndefined(this.tooltipHeader)?this._createHeader():f(this.tooltipTitle).html(this.model.title),this.tooltipPos.height=f(this.tooltip).outerHeight();break;case"associate":this.model.associate=e[t],this._wireMouseEvents(!1),this._wireMouseEvents(!0);break;case"position":this._setPosition(e[t]);break;case"collision":this.model.collision=e[t];break;case"closeMode":void 0!==e[t]&&(this.model.closeMode=e[t],this.model.closeMode==ej.Tooltip.CloseMode.Sticky?this._iconRender():(f(this.tooltipClose).remove(),this.tooltipClose=null),this.tooltipPos.height=f(this.tooltip).outerHeight());break;case"cssClass":this._setSkin(e[t]);break;case"showShadow":this._shadowEffect(e[t],this.model.position);break;case"isBalloon":ej.isNullOrUndefined(e[t])||(this.model.isBalloon=e[t],this.model.isBalloon?this._renderArrow():(f(this.tip).remove(),this.tip=null));break;case"animation":var i=e[t];this.model.animation=f.extend(!0,this.model.animation,i),this.model.animation.effect!=ej.Tooltip.Effect.None?(this._off(f(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._off(f(this.tooltip),"mouseleave",this._onTooltipMouseLeave)):this.model.animation.effect==ej.Tooltip.Effect.None&&(this._on(f(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this._on(f(this.tooltip),"mouseleave",this._onTooltipMouseLeave));break;case"enableRTL":this._setRTL(e[t]);break;case"target":this._wireTriggerEvents(!1),this.model.target=e[t],this._wireTriggerEvents(!0),this._renderTarget();break;case"trigger":this._setTrigger(e[t]);break;case"showRoundedCorner":this.model.showRoundedCorner=e[t],this._roundedCorner(e[t]);break;case"allowKeyboardNavigation":this.model.allowKeyboardNavigation=e[t],this.model.allowKeyboardNavigation?this._on(f(window),"keydown",this._keyDown):this._off(f(window),"keydown",this._keyDown)}},t.prototype._enabled=function(e){e?this.enable(e):this.disable(e),this.model.enabled=e},t.prototype._shadowEffect=function(e,t){this.model.showShadow=e;e=null;if(f(this.tooltip).removeClass("e-tooltipShadowLeft e-tooltipShadowRight"),this.model.showShadow){if(this.model.isBalloon)switch(t.stem.horizontal){case"center":e="top"!=t.stem.vertical&&"bottom"==t.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft";break;case"right":e="center"==t.target.horizontal&&"top"==t.stem.vertical?"e-tooltipShadowLeft":"e-tooltipShadowRight";break;case"left":e="center"==t.target.horizontal&&"bottom"==t.stem.vertical?"e-tooltipShadowRight":"e-tooltipShadowLeft"}else e="e-tooltipShadowLeft";f(this.tooltip).addClass(e)}},t.prototype._setContent=function(e){this.model.content=e,f(this.tooltipContent).html(this.model.content),this.tooltipPos.height=f(this.tooltip).outerHeight(),this.tooltipPos.width=f(this.tooltip).outerWidth()},t.prototype._setPosition=function(e){this.model.position.stem=f.extend(!0,this.model.position.stem,e.stem),this.model.position.target=f.extend(!0,this.model.position.target,e.target)},t.prototype._setTrigger=function(e){this._wireTriggerEvents(!1),this.model.trigger=e,this._wireTriggerEvents(!0)},t.prototype._init=function(){this.id=this.element[0].id,this.positionTarget=f.extend(!0,{},this.model.position.target),this.positionTooltip=f.extend(!0,{},this.model.position.stem),this.tipSize=f.extend(!0,{},this.model.tip.size),this._initialize(),this._render(),this.enable(this.model.enabled),this._wireEvents(!0)},t.prototype._initialize=function(){ej.isNullOrUndefined(this.model.target)?ej.isNullOrUndefined(this.model.content)&&!ej.isNullOrUndefined(this.element[0].getAttribute("tittle"))&&(this.model.content=this.element[0].getAttribute("tittle"),this.element[0].setAttribute("data-content",this.model.content),this.element[0].removeAttribute("title")):this._renderTarget()},t.prototype._wireEvents=function(e){var t=e?"_on":"_off";this._wireTriggerEvents(e),this.model.allowKeyboardNavigation&&this[t](f(window),"keydown",this._keyDown),null!=this.model.target?this[t](this.element,"scroll",this.model.target,this._hideTooltip):this[t](this.element,"scroll",this._hideTooltip),this[t](f(this.tooltip),"mouseenter",this._onTooltipMouseEnter),this[t](f(this.tooltip),"mouseleave",this._onTooltipMouseLeave),this[t](f(window),"resize",this._hideTooltip),this[t](f(window),"touchend",this._docTouchEndHandler)},t.prototype._wireTriggerEvents=function(e){var t=e?"_on":"_off";this.model.trigger==ej.Tooltip.Trigger.Focus?null!=this.model.target?this[t](this.element,"blur",this.model.target,this._hideTooltip):this[t](this.element,"blur",this._hideTooltip):null!=this.model.target?this[t](this.element,ej.isDevice()?"touchstart":"mouseleave",this.model.target,this._onMouseOut):this[t](this.element,ej.isDevice()?"touchstart":"mouseleave",this._onMouseOut),this._wireMouseEvents(e);e=this.model.trigger==ej.Tooltip.Trigger.Click?ej.isDevice()?"touchstart":"click":this.model.trigger==ej.Tooltip.Trigger.Focus?ej.isDevice()?"touchstart":"focus":ej.isDevice()?"touchstart":"mouseenter";null!=this.model.target?this[t](this.element,e,this.model.target,this._targetHover):this[t](this.element,e,this._targetHover)},t.prototype._wireMouseEvents=function(e){e=e?"_on":"_off";this.model.associate!=ej.Tooltip.Associate.MouseEnter&&this.model.associate!=ej.Tooltip.Associate.MouseFollow||(null!=this.model.target?this[e](this.element,ej.isDevice()?"touchstart":"mousemove",this.model.target,this._tooltipMove):this[e](this.element,ej.isDevice()?"touchstart":"mousemove",this._tooltipMove))},t.prototype._render=function(){this.tooltip=ej.buildTag("div.e-tooltip-wrap e-widget","",{},{role:"tooltip","aria-readonly":"true","aria-hidden":"true","aria-describedby":this.id+"_content",id:this.id+"_Main"}),this.tooltipInter=ej.buildTag("div.e-tipContainer","",{},{}),this.tooltip.append(this.tooltipInter),this.model.isBalloon&&this._renderArrow(),f(this.model.containment).append(this.tooltip),this._setHeight(this.model.height),this._setWidth(this.model.width),this._createHeader(),this._tooltipContent(),this.model.cssClass&&this.tooltip.addClass(this.model.cssClass),this.model.showRoundedCorner&&this._roundedCorner(this.model.showRoundedCorner),this.model.enableRTL&&this._setRTL(this.model.enableRTL),this.tooltip[0].style.top="auto",this.tooltip[0].style.left="auto";var e=this.tooltip[0].getBoundingClientRect();this.tooltipPos={width:e.width,height:e.height,left:e.left,top:e.top,position:"absolute"},ej.isNullOrUndefined(this.model.target)&&(this._containerCalc(this.element),this._positionElement(this.element))},t.prototype._containerCalc=function(e){ej.isNullOrUndefined(e)&&(e=this.element);e=f(e).offset();this.containerSize={height:"body"==this.model.containment?f(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight:f(this.model.containment).innerHeight(),width:"body"==this.model.containment?f(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth:f(this.model.containment).innerWidth()},this.containerSize.left="body"!=this.model.containment&&"static"==f(this.model.containment).css("position")?f(this.model.containment).offset().left-f(this.model.containment).offsetParent().offset().left:0,this.containerSize.top="body"!=this.model.containment&&"static"==f(this.model.containment).css("position")?f(this.model.containment).offset().top-f(this.model.containment).offsetParent().offset().top:0,e.left-="body"!=this.model.containment?("static"==f(this.model.containment).css("position")?f(this.model.containment).offsetParent():f(this.model.containment)).offset().left:0,e.top-="body"!=this.model.containment?("static"==f(this.model.containment).css("position")?f(this.model.containment).offsetParent():f(this.model.containment)).offset().top:0,this.targetPos.left=e.left,this.targetPos.top=e.top},t.prototype._setHeight=function(e){this.model.height=e,!isNaN(+e)&&isFinite(e)?this.tooltip[0].style.height=e+"px":this.tooltip[0].style.height=e,this.tooltip[0].style.display="block",this.tooltipPos.height=this.tooltip[0].offsetHeight,this.tooltip[0].style.display="none"},t.prototype._setWidth=function(e){this.model.width=e,"auto"!=this.model.width&&(e=!isNaN(+e)&&isFinite(e)?e+"px":e,this.tooltip[0].style.maxWidth=e,this.tooltip[0].style.minWidth="0px"),this.tooltip[0].style.width=e,this.tooltip[0].style.display="block",this.tooltipPos.height=this.tooltip[0].offsetHeight,this.tooltip[0].style.display="none"},t.prototype._setRTL=function(e){(this.model.enableRTL=e)?this.tooltip[0].classList.add("e-rtl"):this.tooltip[0].classList.remove("e-rtl")},t.prototype._setSkin=function(e){this.model.cssClass!=e&&(this.tooltip.removeClass(this.model.cssClass).addClass(e),this.model.cssClass=e)},t.prototype._roundedCorner=function(e){this.model.showRoundedCorner?this.tooltip[0].classList.add("e-corner"):this.tooltip[0].classList.remove("e-corner")},t.prototype._renderArrow=function(){var e,t;ej.isNullOrUndefined(this.tip)&&(this.tip=ej.buildTag("div.e-arrowTip"," ",{id:this.id+"_eTip"},{}),(e=document.createElement("div")).classList.add("e-arrowTipOuter"),(t=document.createElement("div")).classList.add("e-arrowTipInner"),f(this.tip).append(e).append(t),f(this.tip).insertBefore(this.tooltipInter))},t.prototype._adjustArrow=function(e){var t,i,s=f(this.tooltip).width(),n=f(this.tooltip).height(),a=e.stem,r=e.target,o={tipHeight:0,tipWidth:0},o="right"==r.horizontal||"left"==r.horizontal?(t="left"==a.horizontal?-this.model.tip.size.height:"right"==a.horizontal?s:s/2-this.tipSize.width/2,i="center"!=a.horizontal?"top"==a.vertical?5:"center"==a.vertical?n/2-this.tipSize.width/2:n-5-this.tipSize.width:"top"==a.vertical?-this.tipSize.height:"bottom"==a.vertical?n:this.tooltipPos.height/2-this.tipSize.width/2,this._arrowBinding(e,"horizontal")):(i="top"==a.vertical?-this.tipSize.height:"bottom"==a.vertical?n:n/2-this.tipSize.width/2,t="center"==a.vertical?"left"==a.horizontal?-this.model.tip.size.height:s:"left"==a.horizontal?10:"center"==a.horizontal?this.tooltipPos.width/2-this.tipSize.width/2:s-10-this.tipSize.width,this._arrowBinding(e,"vertical"));this.arrowValue.left=t,this.arrowValue.top=i,f(this.tip).css({height:o.tipHeight+"px",width:o.tipWidth+"px",left:t+"px",top:i+"px",display:"center"==a.horizontal&&"center"==a.vertical?"none":"block"})},t.prototype._arrowBinding=function(e,t){var i,s,n=e.stem,a="horizontal"==t?"center"!=n.horizontal:"center"==n.vertical,r=f(this.tooltip).css("border-top-color"),o=f(this.tooltip).css("background-color"),l=this.model.tip.size.height,t=this.model.tip.size.height-1,n={"border-top":"none","border-bottom":"none","border-right":"none","border-left":"none"};return a?(i=this.model.tip.size.height,s=this.model.tip.size.width,f(this.tip).find(".e-arrowTipOuter").css(this._arrow(e,l,r,n,"horizontal")),f(this.tip).find(".e-arrowTipInner").css(this._arrow(e,t,o,n,"horizontal"))):(i=this.model.tip.size.width,s=this.model.tip.size.height,f(this.tip).find(".e-arrowTipOuter").css(this._arrow(e,l,r,n,"vertical")),f(this.tip).find(".e-arrowTipInner").css(this._arrow(e,t,o,n,"vertical"))),{tipHeight:s,tipWidth:i}},t.prototype._arrow=function(e,t,i,s,n){var a=e.stem,r="horizontal"==n&&"right"==a.horizontal?"0px":"1px",e="horizontal"!=n&&"bottom"==a.vertical?"0px":"1px";return s["border-top"]="horizontal"==n?t+"px solid transparent":"bottom"==a.vertical?t+"px solid "+i:"none",s["border-bottom"]="horizontal"==n?t+"px solid transparent":"top"==a.vertical?t+"px solid "+i:"none",s["border-right"]="horizontal"==n?"left"==a.horizontal?t+"px solid "+i:"none":t+"px solid transparent",s["border-left"]="horizontal"==n?"right"==a.horizontal?t+"px solid "+i:"none":t+"px solid transparent",t==this.model.tip.size.height-1&&(s.left=r,s.top=e),s},t.prototype._iconRender=function(){this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&(ej.isNullOrUndefined(this.tooltipClose)||f(this.tooltipClose).remove(),this.tooltipClose=ej.buildTag("div .e-icon"," ",{},{id:"_closeIcon"}),null!=this.model.title?f(this.tooltipClose).insertAfter(this.tooltipTitle).addClass("e-close"):f(this.tooltipClose).insertBefore(this.tooltipInter).addClass("e-cross-circle"),this._on(f(this.tooltipClose),"click",this._hideTooltip))},t.prototype._renderTarget=function(){this.targetElement=this.element.find(this.model.target);for(var e=0;e<this.targetElement.length;e++)ej.isNullOrUndefined(this.targetElement[e].getAttribute("title"))||(this.targetElement[e].setAttribute("data-content",this.targetElement[e].title),this.targetElement[e].removeAttribute("title"))},t.prototype._tooltipContent=function(){this.tooltipContent=ej.buildTag("div","",{},{id:this.id+"_content",class:"e-tipcontent e-def"}),this.tooltipContent[0].innerHTML=this.model.content,null!=this.model.title?f(this.tooltipContent).insertAfter(this.tooltipHeader):this.tooltipInter[0].appendChild(this.tooltipContent[0])},t.prototype._positionElement=function(e){this.tooltipPos.width=f(this.tooltip).outerWidth(),this.tooltipPos.height=f(this.tooltip).outerHeight(),this.targetPos.width=f(e).outerWidth(),this.targetPos.height=f(e).outerHeight(),this._containerCalc(e),this.model.associate==ej.Tooltip.Associate.Window?this._browserPosition():this.model.associate==ej.Tooltip.Associate.Axis?this._axisPosition():this.model.associate==ej.Tooltip.Associate.Target&&this._tooltipPosition(this.model.position),this.model.collision!=ej.Tooltip.Collision.None&&this.model.associate==ej.Tooltip.Associate.Target&&this._calcCollision(this.model.position,e)},t.prototype._browserPosition=function(){var e,t;"body"==this.model.containment&&(this.containerSize={height:f(window).innerHeight()||document.documentElement.clientHeight||document.body.clientHeight,width:f(window).innerWidth()||document.documentElement.clientWidth||document.body.clientWidth},e=f.extend(!0,{},this.model.position),t={position:"absolute",left:"auto",top:"auto",bottom:"auto",right:"auto"},ej.isNullOrUndefined(this.tip)||f(this.tip).css({display:"none"}),"right"==this.model.position.target.horizontal?t.right=0:"left"==this.model.position.target.horizontal?t.left=0:t.left=this.containerSize.width/2-this.tooltipPos.width/2,"top"==this.model.position.target.vertical?t.top=0:"center"==this.model.position.target.vertical?t.top=this.containerSize.height/2-this.tooltipPos.height/2:t.bottom=0,this.model.showShadow&&this._shadowEffect(this.model.showShadow,e),f(this.tooltip).css(t))},t.prototype._tooltipMove=function(e){var t;this.model.closeMode==ej.Tooltip.CloseMode.None&&this.model.enabled&&((t=this)._isCancel||(this.model.associate==ej.Tooltip.Associate.MouseFollow?this._mousePosition(e):this.model.associate==ej.Tooltip.Associate.MouseEnter&&(clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){t.isTrack&&t._mousePosition(e)},300))))},t.prototype._mousePosition=function(e){var t,i;"touchstart"==e.type?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):"mousemove"==e.type&&(t=e.pageX,i=e.pageY),this.isCollision=!0,this._containerCalc(e.currentTarget);var s=f.extend(!0,{},this.model.position.stem),n=f.extend(!0,{},this.model.position),a={left:0,top:0},r={left:t,top:i},o={left:t,top:i},l=this.containerSize.left,d=this.containerSize.top,h="body"!=this.model.containment?t-f(this.model.containment).offset().left:t,c="body"!=this.model.containment?i-f(this.model.containment).offset().top:i;for(n.target.horizontal=n.target.vertical="center","body"!=this.model.containment&&(a=("static"==f(this.model.containment).css("position")?f(this.model.containment).offsetParent():f(this.model.containment)).offset()),o.left-=a.left,o.top-=a.top;this.isCollision;){r=f.extend(!0,{},o);this.model.isBalloon&&("top"==s.vertical||"bottom"==s.vertical)&&this.tipSize.height;var u=this.model.isBalloon&&("right"==s.horizontal||"left"==s.horizontal)?10+this.tipSize.width/2:0,p=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:7,m=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:10,g=this.model.isBalloon?"center"!=s.horizontal||"center"!=s.vertical?this.model.tip.size.height:0:2;if(r.left+="right"==s.horizontal?-this.tooltipPos.width:"left"==s.horizontal?0:-this.tooltipPos.width/2,r.top+="bottom"==s.vertical?-this.tooltipPos.height:"top"==s.vertical?0:-this.tooltipPos.height/2,r.left+="center"!=s.vertical?"right"==s.horizontal?u:"left"==s.horizontal?-u:0:0,r.left+="center"==s.vertical?"right"==s.horizontal?-g:"left"==s.horizontal?+(g+p):0:0,r.top+="top"==s.vertical?+(g+m):"bottom"==s.vertical?-g:0,this.targetElement!=e.currentTarget&&(this.targetElement=e.currentTarget,(r.left<l||r.left+this.tooltipPos.width>l+this.containerSize.width)&&(this.positionTooltip.horizontal=h>=this.tooltipPos.width?"right":this.containerSize.width-h>=this.tooltipPos.width?"left":"center"),(r.top<d||r.top+this.tooltipPos.height>this.containerSize.height+d)&&(this.positionTooltip.vertical=c>=this.tooltipPos.height?"bottom":this.containerSize.height-c>=this.tooltipPos.height?"top":"center")),this.positionTooltip.horizontal!=s.horizontal||this.positionTooltip.vertical!=s.vertical)this.isCollision=!0,s=f.extend(!0,{},this.positionTooltip);else if(this.isCollision=!1,f(this.tooltip).css({top:r.top+"px",left:r.left+"px",position:"absolute",right:"auto",bottom:"auto"}),n.stem=f.extend(!0,{},this.positionTooltip),this.model.showShadow&&this._shadowEffect(this.model.showShadow,n),this.model.isBalloon&&this._adjustArrow(n),this._showTooltip(),this.model.associate==ej.Tooltip.Associate.MouseEnter&&(this.isTrack=!1),this.model.associate==ej.Tooltip.Associate.MouseFollow&&this.triggerEvents("tracking",{position:this.model.position,event:e}))return}},t.prototype._axisPosition=function(){var e=f.extend(!0,{},this.model.position);"number"==typeof this.model.position.target.horizontal&&(t=this.model.position.target.horizontal.toString()),"number"==typeof this.model.position.target.vertical&&(i=this.model.position.target.vertical.toString());var t=parseInt(t),i=parseInt(i);ej.isNullOrUndefined(this.tip)||f(this.tip).css({display:"none"}),this.model.showShadow&&this._shadowEffect(this.model.showShadow,e),this.model.isBalloon&&this._adjustArrow(e),isFinite(t)&&isFinite(i)&&f(this.tooltip).css({top:i,left:t,position:"absolute"})},t.prototype._tooltipPosition=function(e){var t=f.extend(!0,{},e.stem),i=f.extend(!0,{},e.target),s=f.extend(!0,{},this.targetPos),n="top"===t.vertical||"bottom"===t.vertical?5+this.tipSize.width/2:0,a="right"===t.horizontal||"left"===t.horizontal?10+this.tipSize.width/2:0,r=this.model.isBalloon&&("center"!==t.horizontal||"center"!==t.vertical)?this.model.tip.size.height:0,o=0!=this.model.tip.adjust.xValue?this.model.tip.adjust.xValue:this.model.isBalloon?0:2,l=0!=this.model.tip.adjust.yValue?this.model.tip.adjust.yValue:this.model.isBalloon?0:2;s.left+="right"===i.horizontal?this.targetPos.width:"left"===i.horizontal?0:this.targetPos.width/2,s.top+="bottom"===i.vertical?this.targetPos.height:"top"===i.vertical?0:this.targetPos.height/2,s.left+="right"===t.horizontal?-this.tooltipPos.width:"left"===t.horizontal?0:-this.tooltipPos.width/2,s.top+="bottom"===t.vertical?-this.tooltipPos.height:"top"===t.vertical?0:-this.tooltipPos.height/2,s.left+="center"!==i.horizontal||"center"===t.vertical?"right"===t.horizontal?-r:"left"===t.horizontal?r:0:0,s.top+="center"===i.horizontal||"center"===t.horizontal?"bottom"===t.vertical?-r:"top"===t.vertical?r:0:0,s.left+="center"===i.horizontal&&"center"!==t.vertical?"right"===t.horizontal?a:"left"===t.horizontal?-a:0:0,s.top+="center"!==i.horizontal&&"center"!==t.horizontal?"top"===t.vertical?-n:"bottom"===t.vertical?n:0:0,s.left+="center"!==i.horizontal||"center"===t.vertical?"right"===t.horizontal?-o:"left"===t.horizontal?o:0:0,s.top+="center"===i.horizontal||"center"===t.horizontal?"bottom"===t.vertical?-l:"top"===t.vertical?l:0:0,this.tooltipPos.left=s.left,this.tooltipPos.top=s.top,this.model.collision===ej.Tooltip.Collision.None&&(this.model.isBalloon&&this._adjustArrow(e),this._shadowEffect(this.model.showShadow,e),f(this.tooltip).css({top:s.top+"px",left:s.left+"px",position:"absolute"}))},t.prototype._calcCollision=function(e,t){var e=f.extend(!0,{},e),i=f.extend(!0,{},e),s=this.model.tip.size.height,n=!0,a="body"!=this.model.containment?f(t).offset().left-f(this.model.containment).offset().left:f(t).offset().left,t="body"!=this.model.containment?f(t).offset().top-f(this.model.containment).offset().top:f(t).offset().top,r={topSpace:t,rightSpace:this.containerSize.width-(a+this.targetPos.width),bottomSpace:this.containerSize.height-(t+this.targetPos.height),leftSpace:a,centerRight:this.containerSize.width-(a+this.targetPos.width/2),centerLeft:a+this.targetPos.width/2,centerTop:t+this.targetPos.height/2,centerBottom:this.containerSize.height-(t+this.targetPos.height/2),tooltipWidth:this.tooltipPos.width+s,tooltipHeight:this.tooltipPos.height+s};if(this.model.collision===ej.Tooltip.Collision.Fit)this._collisionFit(e,r);else{for(;n;)(i=this._collisionFlip(i,r)).target.horizontal!=e.target.horizontal||i.target.vertical!=e.target.vertical||i.stem.horizontal!=e.stem.horizontal||i.stem.vertical!=e.stem.vertical?(this._tooltipPosition(i),e=f.extend(!0,{},i)):n=!1;n||(this.model.collision==ej.Tooltip.Collision.FlipFit?this._collisionFit(i,r):(this._adjustArrow(i),this._shadowEffect(this.model.showShadow,i),f(this.tooltip).css({top:this.tooltipPos.top+"px",left:this.tooltipPos.left+"px",position:"absolute"})))}},t.prototype._collisionFlip=function(e,t){var i=f.extend(!0,{},this.tooltipPos),s=f.extend(!0,{},e),n=f(this.model.containment).scrollLeft(),a=f(this.model.containment).scrollTop(),r=this.containerSize.left,o=this.containerSize.top;return(i.left+i.width>r+this.containerSize.width+n||i.left<r)&&("center"!=e.target.horizontal?s.target.horizontal=t.leftSpace>=t.tooltipWidth?"left":t.rightSpace>=t.tooltipWidth?"right":"center":s.stem.horizontal=t.centerLeft>=t.tooltipWidth?"right":t.centerRight>=t.tooltipWidth?"left":"center"),i.top<o&&(s.target.vertical=t.bottomSpace>=t.tooltipHeight?"bottom":"center"),i.top+i.height>this.containerSize.height+a+o&&(s.target.vertical=t.topSpace>=t.tooltipHeight?"top":"center"),s.target.horizontal==e.target.horizontal&&s.target.vertical==e.target.vertical||("center"==s.target.horizontal?s.stem.horizontal=t.centerLeft>=t.tooltipWidth?"right":t.centerRight>=t.tooltipWidth?"left":"center":s.stem.horizontal="right"==s.target.horizontal?"left":"right"),s.target.vertical==e.target.vertical&&s.target.horizontal==e.target.horizontal||("center"==s.target.vertical?s.stem.vertical=t.centerTop>=t.tooltipHeight||!(t.centerBottom>=t.tooltipHeight)&&t.centerTop>t.centerBottom?"bottom":"top":s.stem.vertical="top"==s.target.vertical?"bottom":"top"),s},t.prototype._collisionFit=function(e,t){var i,s=f.extend(!0,{},this.tooltipPos),n=!1,a=!1,r=1,o=1,l=f(this.model.containment).scrollLeft(),d="body"==this.model.containment?document.documentElement.scrollTop||document.body.scrollTop:f(this.model.containment).scrollTop(),h=this.containerSize.left,c=this.containerSize.top;(s.left<h||s.left+s.width>this.containerSize.width+l+h)&&(r=s.left<h?h:s.left+s.width>this.containerSize.width+l+h?s.left-(s.left+s.width-(this.containerSize.width+h)):1,n=!0),(s.top<c||s.top+s.height>this.containerSize.height+d+c)&&(o=s.top<c?c:s.top+s.height>this.containerSize.height+d+c?s.top-(s.top+s.height-(this.containerSize.height+c)):1,a=!0),f(this.tooltip).css({top:1!=o?o+"px":s.top+"px",left:1!=r?r+"px":s.left+"px",position:"absolute"}),this._adjustArrow(e),i={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:f(this.tip).css("display")},this.tooltipPos.top=o=1!=o?o:s.top,this.tooltipPos.left=r=1!=r?r:s.left;s=f(this.tooltip).width(),r=f(this.tooltip).height();(n||a&&"none"!=i.display)&&(this.model.isBalloon&&(n&&(this.arrowValue.left=this._horizontalAdjustment(e,t)),a&&(this.arrowValue.top=this._verticalAdjustment(e,t))),this.arrowValue.left==-this.model.tip.size.height||this.arrowValue.left==s||this.arrowValue.top==-this.model.tip.size.height||this.arrowValue.top==r?f(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"block"}):f(this.tip).css({left:this.arrowValue.left+"px",top:this.arrowValue.top+"px",display:"none"})),this._shadowEffect(this.model.showShadow,e)},t.prototype._horizontalAdjustment=function(e,t){var i={left:this.arrowValue.left,top:this.arrowValue.top};f(this.tooltip).css({display:"block"});var s=(e.target.horizontal,this.model.tip.size.height),e=("center"==e.target.horizontal||"left"!=e.stem.horizontal)&&"center"!=e.target.horizontal&&"right"==e.stem.horizontal?f(this.tip).offset().left+s:f(this.tip).offset().left;return f(this.tooltip).css({display:"none"}),e>t.leftSpace&&e+s<t.leftSpace+this.targetPos.width||(e>t.leftSpace+this.targetPos.width||e<t.leftSpace)&&(i.left=t.leftSpace+this.targetPos.width/2-parseInt(this.tooltipPos.left.toString())),i.left},t.prototype._verticalAdjustment=function(e,t){var i={left:this.arrowValue.left,top:this.arrowValue.top,height:this.model.tip.size.height,width:this.model.tip.size.width,display:this.arrowValue.display};f(this.tooltip).css({display:"block"});var s=(e.target.horizontal,this.model.tip.size.height),e="center"==e.target.horizontal&&"top"==e.stem.vertical?f(this.tip).offset().top:f(this.tip).offset().top+s;return f(this.tooltip).css({display:"none"}),e>t.topSpace&&e<t.topSpace+this.targetPos.height||(e<t.topSpace||e+s>t.topSpace+this.targetPos.height)&&(i.top=t.topSpace+this.targetPos.height/2-parseInt(this.tooltipPos.top.toString())),i.top},t.prototype._createHeader=function(){null!=this.model.title&&(ej.isNullOrUndefined(this.tooltipTitle)&&this._createTitle(),(ej.isNullOrUndefined(this.tooltipContent)?f(this.tooltipHeader).appendTo(this.tooltipInter):f(this.tooltipHeader).insertBefore(this.tooltipContent)).addClass("e-tooltipHeader")),this.model.closeMode==ej.Tooltip.CloseMode.Sticky&&this._iconRender()},t.prototype._hideTooltip=function(){var e;this._isHidden=!0,e=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,1==this.model.enabled&&"block"==f(this.tooltip).css("display")&&(this.triggerEvents("beforeClose",{})||(this.model.animation.effect==ej.Tooltip.Effect.Fade?f(this.tooltip).fadeOut(e):this.model.animation.effect==ej.Tooltip.Effect.Slide?f(this.tooltip).slideUp(e):f(this.tooltip).css({display:"none"}),"none"==f(this.tooltip).css("display")&&f(this.tooltip).attr("aria-hidden","true").removeClass("e-customAnimation"),this.triggerEvents("close",{})))},t.prototype._showTooltip=function(){var i,e,t;this._isHidden&&(e=0!=this.model.animation.speed?this.model.animation.speed:this.model.animation.effect==ej.Tooltip.Effect.Slide?200:this.model.animation.effect==ej.Tooltip.Effect.Fade?800:0,this._isHidden=!1,"none"==f(this.tooltip).css("display")&&1==this.model.enabled&&(this.model.animation.effect==ej.Tooltip.Effect.Fade?f(this.tooltip).fadeIn(e):this.model.animation.effect==ej.Tooltip.Effect.Slide?f(this.tooltip).slideDown(e):f(this.tooltip).css({display:"block"}),"block"==f(this.tooltip).css("display")&&(i=f(this.tooltip[0]).parents(),e=f("body").children(),f(e).each(function(e,t){i.push(t)}),e=f(this.model.target).parents(),f(e).each(function(e,t){i.push(t)}),!(t=Math.max.apply(t,f.map(i,function(e,t){if("static"!=f(e).css("position"))return parseInt(f(e).css("z-index"))||1})))||t<1e4?t=1e4:t+=1,f(this.tooltip).attr("aria-hidden","false").css({zIndex:t}),this.model.animation.effect==ej.Tooltip.Effect.None&&f(this.tooltip).addClass("e-customAnimation"),t=this._getScrollableParents(),this._on(t,"scroll",this._hideTooltip)),this.triggerEvents("open",{})))},t.prototype._getScrollableParents=function(){return f(this.element).parentsUntil("html").filter(function(){return"visible"!=f(this).css("overflow")}).add(f(window))},t.prototype._tooltipAuto=function(){var e=this;this.timer=setTimeout(function(){e._hideTooltip()},e.model.autoCloseTimeout)},t.prototype._beforeOpenTooltip=function(e){this.positionTooltip=f.extend(!0,{},this.model.position.stem),this.positionTarget=f.extend(!0,{},this.model.position.target),this.targetElement=this.element,ej.isNullOrUndefined(this.model.target)||ej.isNullOrUndefined(f(e.currentTarget).attr("data-content"))||(this.model.content=f(e.currentTarget).attr("data-content"),this._setContent(this.model.content))},t.prototype._targetHover=function(e){this.isTrack=!0,this.model.enabled&&(this._isHidden||("msie"==ej.browserInfo().name||"edge"==ej.browserInfo().name)&&this.model.associate==ej.Tooltip.Associate.MouseFollow?(this.tooltip.stop(!0,!0),this.triggerEvents("beforeOpen",{event:e})?this._isCancel=!0:(this._isCancel=!1,this._beforeOpenTooltip(e),this.model.associate!=ej.Tooltip.Associate.MouseEnter&&this.model.associate!=ej.Tooltip.Associate.MouseFollow?(ej.isNullOrUndefined(this.model.target)?this._positionElement(this.element):this._positionElement(e.currentTarget),clearTimeout(this.timer),this._showTooltip(),this.model.closeMode==ej.Tooltip.CloseMode.Auto&&this._tooltipAuto(),"click"==e.type?this.triggerEvents("click",{event:e}):this.triggerEvents("hover",{event:e})):this.isTrack=!0)):ej.isNullOrUndefined(this.model.target)||this._positionElement(e.currentTarget))},t.prototype._onMouseOut=function(e){this.model.enabled&&!this._isHidden&&(this.model.closeMode==ej.Tooltip.CloseMode.None&&this._hideTooltip(),clearTimeout(this.mouseTimer)),this.isTrack=!1},t.prototype._onTooltipMouseEnter=function(e){this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&f(this.tooltip).css({display:"block"})},t.prototype._onTooltipMouseLeave=function(e){this.model.enabled&&this.model.animation.effect==ej.Tooltip.Effect.None&&this.model.closeMode==ej.Tooltip.CloseMode.None&&f(this.tooltip).css({display:"none"})},t.prototype._docTouchEndHandler=function(e){f(e.target).closest(".e-tooltip").length||this.model.closeMode!=ej.Tooltip.CloseMode.None||this._hideTooltip()},t.prototype._keyDown=function(e){var t=e.keyCode||e.which||e.charCode;this.model.enabled&&27===t&&(e.preventDefault(),this._hideTooltip())},t);function t(e,t){if(i.call(this),this._rootCSS="e-tooltip",this._setFirst=!1,this.PluginName="ejTooltip",this.id="null",this.model=null,this.defaults={height:"auto",width:"auto",enabled:!0,content:null,containment:"body",target:null,title:null,closeMode:"none",autoCloseTimeout:4e3,position:{stem:{horizontal:"center",vertical:"bottom"},target:{horizontal:"center",vertical:"top"}},associate:"target",collision:"flipfit",showShadow:!1,cssClass:null,animation:{effect:"none",speed:0},isBalloon:!0,showRoundedCorner:!1,enableRTL:!1,allowKeyboardNavigation:!0,tip:{size:{width:20,height:10},adjust:{xValue:0,yValue:0}},trigger:"hover",create:null,click:null,destroy:null,hover:null,tracking:null,beforeOpen:null,beforeClose:null,open:null,close:null},this.dataTypes={enabled:"boolean",closeMode:"enum",autoCloseTimeout:"number",trigger:"enum",position:{stem:"data",target:"data"},associate:"enum",collision:"enum",showShadow:"boolean",animation:{effect:"enum",speed:"number"},isBalloon:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",allowKeyboardNavigation:"boolean",tip:{size:{width:"number",height:"number"},adjust:{xValue:"number",yValue:"number"}}},this.isTrack=!0,this._isCancel=!1,this._isHidden=!0,this.arrowValue={left:0,top:0,width:0,height:0,display:null},this.tooltipPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.targetPos={width:0,height:0,left:0,top:0,bottom:0,right:0,position:"absolute"},this.mouseTimer=null,this.positionTarget=null,this.positionTooltip=null,this.containerSize=null,this._createTitle=function(){this.tooltipTitle=ej.buildTag("div.e-def e-header"," ",{},{}),this.tooltipHeader=ej.buildTag("div"," ",{},{}),f(this.tooltipTitle).html(this.model.title).appendTo(this.tooltipHeader)},e&&(e.jquery||(e=f("#"+e)),e.length))return f(e).ejTooltip(t).data(this.PluginName)}window.ej.widget("ejTooltip","ej.Tooltip",new e),window.ejTooltip=null}(jQuery),ej.Tooltip.CloseMode={Auto:"auto",None:"none",Sticky:"sticky"},ej.Tooltip.Effect={Slide:"slide",Fade:"fade",None:"none"},ej.Tooltip.Trigger={Hover:"hover",Click:"click",Focus:"focus"},ej.Tooltip.Collision={Flip:"flip",FlipFit:"flipfit",None:"none",Fit:"fit"},ej.Tooltip.Associate={Window:"window",MouseFollow:"mousefollow",MouseEnter:"mouseenter",Target:"target",Axis:"axis"},function(l,_,v){_.widget("ejMaskEdit","ej.MaskEdit",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},defaults:{maskFormat:"",value:null,watermarkText:"",name:null,height:"",width:"",showError:!1,htmlAttributes:{},cssClass:"",customCharacter:null,inputMode:"text",readOnly:!1,textAlign:_.TextAlign.Left,hidePromptOnLeave:!1,showRoundedCorner:!1,enablePersistence:!1,enabled:!0,locale:"en-US",showPromptChar:!0,validationRules:null,validationMessage:null,keydown:null,keyup:null,keyPress:null,change:null,mouseover:null,mouseout:null,focusIn:null,focusOut:null,create:null,destroy:null},dataTypes:{maskFormat:"string",showError:"boolean",enabled:"boolean",customCharacter:"string",cssClass:"string",watermarkText:"string",showRoundedCorner:"boolean",showPromptChar:"boolean",inputMode:"enum",textAlign:"enum",hidePromptOnLeave:"boolean",readOnly:"boolean",validationRules:"data",validationMessage:"data",htmlAttributes:"data"},_setModel:function(e){for(var t in e)switch(t){case"value":this.temp_index=0,this.indexValue=[],_.isPlainObject(e[t])&&(e[t]=null),this._setValue(e[t]),this._initObjects(),e[t]=this.get_UnstrippedValue(),this._raiseEvents("change",!0);break;case"width":this._setWidth(e[t]);break;case"height":this._setHeight(e[t]);break;case"watermarkText":this.model.watermarkText=e[t],this._changeWatermark(e[t]);break;case"showRoundedCorner":this._roundedCorner(e[t]);break;case"showPromptChar":this._setShowPrompt(e[t]);break;case"validationRules":null!=this.model.validationRules&&(this._hiddenInput.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"textAlign":this._setTextAlign(e[t]);break;case"inputMode":this._setInputMode(e[t]);break;case"maskFormat":this.model.maskFormat=e[t],this._valueMapper(),this._maskModel=this.model.maskFormat,this._setMask(e[t]),this._initObjects(),e[t]=this.model.maskFormat;break;case"locale":this.model.value=this.get_StrippedValue(),this.model.locale=e[t],this._setValue(this.model.value),this._initObjects();break;case"cssClass":this._setSkin(e[t]);break;case"readOnly":this._setReadOnly(e[t]);break;case"enabled":this.model.enabled=e[t],this._controlStatus(e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"hidePromptOnLeave":this.model.hidePromptOnLeave=e[t],""!=this._textbox.value&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=this._textbox.value.replace(/[ ]/g,"_"),this.model.value=this._textbox.value)}},observables:["value"],_destroy:function(){_.isNullOrUndefined(this._hiddenInput)||this.element.attr("name",this._hiddenInput.attr("name")),this._isWatermark&&this.element.removeAttr("placeholder"),this.element.insertAfter(this.wrapper),_.isNullOrUndefined(this.wrapper)||this.wrapper.remove(),this.model.textAlign&&this.element.css("text-align",""),this.element.val("").removeClass(" e-mask e-input e-disable").empty(),this.element.removeAttr("aria-invalid aria-disabled")},_init:function(e){if(this.indexValue=[],this.temp_index=0,this._options=e,this._tempMask=this.model.maskFormat,this._keyFlag=!1,this._keyupFlag=!0,this._checkMask=!1,this._isAndroid=/android/i.test(navigator.userAgent.toLowerCase()),!this.element.is("input")||!this.element.is("input[type=text]")&&!this.element.is("input[type=password]")&&this.element.attr("type"))return this._destroy(),!1;this.element.attr("autocomplete","off"),this._isWatermark="placeholder"in document.createElement("input"),this._setValues(),this._valueMapper(),this._renderControl(),this._initObjects(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),e&&e.value!=v&&this.model.value!==e.value&&this._trigger("_change",{value:this.get_UnstrippedValue(),unmaskedValue:this.get_StrippedValue()})},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_addAttr:function(e){var s=this;l.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"name"==i?s._hiddenInput.attr(t,e):"disabled"==i&&"disabled"==e?s.disable():"readonly"==i&&"readOnly"==e?s._setReadOnly(!0):("style"!=i&&"id"!=i&&_.isValidAttr(s.element[0],t)?s.element:s.wrapper).attr(t,e)})},_setValidation:function(){this._hiddenInput.rules("add",this.model.validationRules);var e,t=(t=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),i=this._hiddenInput.attr("name");for(e in t.settings.messages[i]={},this.model.validationRules){var s=null;if(!_.isNullOrUndefined(this.model.validationRules[e])){if(_.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[e]))for(var n in t.settings.messages[i][e]=l.validator.messages[e],this.model.validationMessage)e==n&&(s=this.model.validationMessage[e]);else s=this.model.validationRules.messages[e];t.settings.messages[i][e]=null!=s?s:l.validator.messages[e]}}},_setShowPrompt:function(e){this.model.showPromptChar=e,this._textbox.value=this.model.showPromptChar?this._unStrippedMask:this.get_UnstrippedValue()},_controlStatus:function(e){1!=e?this.disable():this.enable()},_setValues:function(){this._unStrippedMask=null,this._charMap={9:"[0-9 ]",a:"[A-Za-z0-9 ]",A:"[A-Za-z0-9]",N:"[0-9]","#":"[0-9]","&":"[^]+","<":"",">":"",C:null!=this.model.customCharacter?"["+this.model.customCharacter+"]":"[A-Za-z ]","?":"[A-Za-z]"}},_renderControl:function(){var e;this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,null!=this.element.attr("name")&&this.element.removeAttr("name"),this.wrapper=_.buildTag("span.e-mask e-widget "+this.model.cssClass),this.innerWrapper=_.buildTag("span.e-in-wrap e-box"),this.wrapper.append(this.innerWrapper).insertBefore(this.element),this.innerWrapper.append(this.element),this._hiddenInput=_.buildTag("input#"+this._id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element),this._isWatermark||"password"==this.model.inputMode||(this._hiddenSpan=_.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this.model.watermarkText),this._hiddenSpan.css("display","none"),this._hiddenSpan.bind("mousedown",l.proxy(this._OnFocusHandler,this))),_.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),_.isNullOrUndefined(this.model.value)||(this.wrapper.addClass("e-valid"),"number"==typeof this.model.value&&(this.model.value=this.model.value.toString())),this._hiddenInput.attr({name:this.model.name,value:this.model.value}),this.element.attr({"aria-invalid":!1}).addClass("e-input"),""==this.model.maskFormat&&null==this.model.value?(e=this,setTimeout(function(){""!=e.element.val()&&(e.option("value",e.element.val()),e.previousValue=e.model.value,e._initObjects())},500)):this.element.attr({value:this.model.value}),_.isNullOrUndefined(this._options.inputMode)&&!_.isNullOrUndefined(this.element.attr("type"))?this.model.inputMode=this.element.attr("type"):this._setInputMode(this.model.inputMode),this._setWidth(this.model.width),this._setHeight(this.model.height),this._roundedCorner(this.model.showRoundedCorner),this._setTextAlign(this.model.textAlign),this._setReadOnly(this.model.readOnly),this._controlStatus(this.model.enabled),this.previousValue=this.model.value},_initObjects:function(){if(this._textbox=this.element[0],this._keypressFlag=0,this._selectedTextKeyDown=0,(this._keydownFlag=0)<=this.model.maskFormat.indexOf("\\")){for(var e=0,t=0;t<this.model.maskFormat.length;t++)"\\"==this.model.maskFormat[t]&&(e+=1);this._maskLength=this.model.maskFormat.length-e}else this._maskLength=this.model.maskFormat.length;if(0<=this.model.maskFormat.indexOf("\\"))if(this.model.value){this._maskModel="";for(var i=0;i<this.model.maskFormat.length;++i)"\\"==this.model.maskFormat[i]?this._maskModel+=this.model.maskFormat[++i]:"\\"!=this.model.maskFormat[i]&&(this._maskModel+=this.model.maskFormat[i].replace(/[9?CANa#&]/g,"_"))}else this._maskModel=this._emptyMask;else this._maskModel=this.model.maskFormat.replace(/[9?CANa#&]/g,"_");this._changeMask(this.model.locale),(0<=this._maskModel.indexOf("<")||0<=this._maskModel.indexOf(">"))&&(this._maskModel=this._maskModel.replace(/[<>]/g,""),this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,""),this._valueMapper()),this._validatedValue=this._maskModel,"password"!=this.model.inputMode&&(this._setValue(this.model.value),this._setWaterMark()),this.model.showError&&this.element.addClass("e-error").attr("aria-invalid","true"),this._prevValue=this.model.watermarkText?this._textbox.value||this._maskModel:this._textbox.value},_setWidth:function(e){this.wrapper.width(e)},_setHeight:function(e){this.wrapper.height(e)},_roundedCorner:function(e){e&&!this.innerWrapper.hasClass("e-corner")?this.innerWrapper.addClass("e-corner"):this.innerWrapper.hasClass("e-corner")&&this.innerWrapper.removeClass("e-corner")},_setTextAlign:function(e){"right"==e?(this.element.css("text-align",""),this.wrapper.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.element.css("text-align",e))},_setInputMode:function(e){this.element.attr("type",e)},_setReadOnly:function(e){(this.model.readOnly=e)?this.element.attr("readonly",!0):this.element.removeAttr("readonly")},_setSkin:function(e){this.wrapper.removeClass(this.model.cssClass),this.wrapper.addClass(e)},_setWaterMark:function(){var e=!this.model.showPromptChar&&""!=this._maskModel&&null!=this._maskModel?this._maskModel.replace(/[_]/g," "):this._maskModel;0<=this.model.maskFormat.indexOf("\\")?this._maskModel=""===this.model.maskFormat?null:e:this._maskModel=""===l.trim(this.model.maskFormat.replace(/[9?CANa#&]/g,"_"))?null:this.model.maskFormat.replace(/[9?CANa#&]/g,"_"),(""!=this._maskModel&&null!=this._maskModel&&this._textbox.value==e||""==e&&""==this._textbox.value&&"password"!=this.model.inputMode)&&(this._textbox.value=""),0!=this.model.watermarkText.length||_.isNullOrUndefined(this.element.attr("placeholder"))||(this.model.watermarkText=this.element.attr("placeholder")),this.model.watermarkText&&(this._isWatermark?this.element.attr("placeholder",this.model.watermarkText):(this._textbox.value?this._hiddenSpan.css("display","none"):this._hiddenSpan.css("display","block")).text(this.model.watermarkText)),this.model.watermarkText||this._textbox.value||!this.model.maskFormat||(this.model.hidePromptOnLeave?(this._unStrippedMask=this._maskModel,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=e)},_changeWatermark:function(e){if(!this.model.enabled)return!1;var t=!this.model.showPromptChar&&""!=this._maskModel&&null!=this._maskModel?this._maskModel.replace(/[_]/g," "):this._maskModel;this._textbox.value!=t&&""!=this._textbox.value&&""!=l.trim(this.get_StrippedValue())||"password"==this.model.inputMode||(this._textbox.value=""),this._isWatermark?this.element.attr("placeholder",e):this._hiddenSpan.text(e),!this.model.watermarkText&&""==l.trim(this.get_StrippedValue())&&this.model.maskFormat&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._maskModel,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=t)},_showAlert:function(){var e=this;this.element.addClass("e-error").attr("aria-invalid","true").animate({Opacity:1},700,null,function(){l(e._textbox).removeClass("e-error").attr("aria-invalid","false")})},_unMask:function(){for(var e,t,i,s,n="",a=0,r=0,o=0,l=this.model.value.toString(),d="",h=this._rules.slice(),c=0;c<this._rules.length;c++){for(var u=0;u<l.length;u++)if(h[c].rule&&l[u].match(h[c].rule)||h[c].rule===v){d+=h[c].rule?l.charAt(u):h[c],l=h[c].rule||h[c]===l[u]?l.slice(u+1,l.length):l,a=1;break}0===a&&0<l.length&&(d+=h[c].rule===v?h[c]:""),a=0}for(;r<this._rules.length&&(e=d[o],t=this._rules[r],e!=v);)if(e===t||"_"===e?(n+="_"===e?"_":e,o+=1,r+=1):t.rule===v?(n+=t,r+=1):this._rules[r].rule!=v&&e.match(this._rules[r].rule)?(s=d.charCodeAt(o),i=r,">"!==this._rules[0]&&"<"!==this._rules[0]||(i=r-1),this._validateChars(s,i)?(n+=d.charAt(o),r++,o++):r++):"string"!=typeof t?e.match(this._rules[r].rule)?(s=d.charCodeAt(o),this._validateChars(s,r)&&(n+=d.charAt(o),r++,o++)):(o++,r++):r++,o>d.length)break;return n},_validateValue:function(){if(!_.isNullOrUndefined(this.model.value)){var e,t,i=this.model.value,s=this._maskModel,n=g=0,a=this._unMask();if(this._isWatermark||"password"==this.model.inputMode||this._hiddenSpan.css("display","none"),0==this._maskLength)return this._textbox.value=i,this._setWaterMark(),!0;for(var r,o,l,d,h=this.model.value.toString(),i=0<=this.model.maskFormat.indexOf("\\")||null!=this.model.customCharacter?this.model.value:this.model.value=h;n<this._rules.length&&("_"===(e=a[g])&&"[^]+"===this._rules[n].rule&&(this.indexValue[this.temp_index]=n,this.temp_index++),t=this._rules[n],e!=v);)e===t||"_"===e?(s=(l=s.substring(0,n))+e+(d=s.substring(n)).substr(1,d.length),g+=1,n+=1):this._rules[n].rule!=v?(o=a.charCodeAt(g),r=n,">"!==this._rules[0]&&"<"!==this._rules[0]||(r=n-1),this._validateChars(o,r)?(l=s.substring(0,r),d=s.substring(r),s=l+a.charAt(g)+d.substr(1,d.length),n++,g++):n++):"string"!=typeof t?e.match(this._rules[n].rule)?(o=a.charCodeAt(g),this._validateChars(o,n)?(l=s.substring(0,n),d=s.substring(n),s=l+a.charAt(g)+d.substr(1,d.length),n++,g++):n++):(s=(l=s.substring(0,n))+"_"+(d=s.substring(n)).substr(1,d.length),g++,n++):n++;if(this.model.value)if(this._textbox.value=s,this.model.value=this.get_UnstrippedValue(),null===this.model.value&&(this.model.value=s),0<=this.model.maskFormat.indexOf("\\")){this._textbox.value="";for(var c=0,u=0;u<this.model.maskFormat.length;u++)"\\"==this.model.maskFormat[u]&&(c+=1);var p=0;if(this.model.value.length==s.length-c)for(var m=0;m<this.model.maskFormat.length;++m)"\\"==this.model.maskFormat[m]?p+=1:"\\"==this.model.maskFormat[m-1]?this._textbox.value+=i[m-p]:"\\"!=this.model.maskFormat[m]&&(i.length<=m-p?this._textbox.value+=s[m].replace(/[9?CANa#&]/g,"_"):this._textbox.value+=i[m-p].replace(/[9?CANa#&]/g,"_"));else this._textbox.value=s}else this.model.hidePromptOnLeave&&(this._unStrippedMask=s.replace(/[ ]/g,"_")),this._textbox.value=s;else if(0<=this.model.maskFormat.indexOf("\\"))for(m=0;m<this.model.maskFormat.length;++m)"\\"==this.model.maskFormat[m-1]?this._textbox.value+=this.model.maskFormat[m]:"\\"!=this.model.maskFormat[m]&&(this._textbox.value+=this.model.maskFormat[m].replace(/[9?CANa#&]/g,"_"));else this._textbox.value=this.model.maskFormat.replace(/[9?CANa#&]/g,"_");if(this._textbox.value!=v&&this.model.hidePromptOnLeave&&(this._unStrippedMask=this._textbox.value.replace(/[ ]/g,"_"),this._textbox.value=this.get_UnstrippedValue()),null!=this._maskModel&&(0<=this._textbox.value.indexOf(">")||0<=this._textbox.value.indexOf("<"))&&(this._textbox.value=this._textbox.value.replace(/[<>]/g,""),this._tempMask=this.model.maskFormat,this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,"")),this.model.showPromptChar||(this._textbox.value=this._getUnstrippedValue(!0)),null!=this._tempMask)for(var g=0;g<this._textbox.value.length;g++){var f=this._updateCasing(this._textbox.value[g],g);_.isNullOrUndefined(f)||(this._textbox.value=this._textbox.value.substring(0,g)+f+this._textbox.value.substring(g+f.length))}this._setWaterMark()}},_selectionText:function(e,t){var i=_.isNullOrUndefined(this._maskModel)?"":this._maskModel.substring(e,t);return this._textbox.value=this._textbox.value.substring(0,e)+i+this._textbox.value.substring(t),1==this._keydownFlag?(this._setCaretPosition(e),e):2==this._keydownFlag?(this._setCaretPosition(t),t):e},_caretPosition:function(e){var t,i,s=0;return document.selection?(i=(t=document.selection.createRange()).text.length,t.moveStart("character",-e.value.length),s=t.text.length-i,0!=i&&(s=this._selectionText(s,t.text.length),this._selectedTextKeyDown=1)):!e.selectionStart&&"0"!=e.selectionStart||(s=e.selectionStart,e.selectionStart!=e.selectionEnd&&(this._keydownFlag&&(s=this._selectionText(e.selectionStart,e.selectionEnd)),this._selectedTextKeyDown=1)),s},_setCaretPosition:function(e){var t,i=this._textbox;"Microsoft Internet Explorer"==window.navigator.appName?i.createTextRange&&((t=i.createTextRange()).move("character",e),t.select()):i.selectionStart||"0"==i.selectionStart?(i.focus(),this._isAndroid?setTimeout(function(){i.setSelectionRange(e,e)},0):i.setSelectionRange(e,e)):i.focus()},_validateChars:function(e,t){var i,s,n=this._charMap,a=!1;s=0<=this.model.maskFormat.indexOf("\\")?(i=this._getCunrrentPos(t),this.model.maskFormat.substr(t+i,1)):this.model.maskFormat.substr(t,1);var r=this.model.customCharacter,o=String.fromCharCode(e);return l.each(n,function(e,t){s==e&&(null!=r&&("C"==e?t="["+r+"]":"A"!=e&&"N"!=e&&"#"!=e||(t=t.replace("]","")+r+"]")),a=!!o.match(new RegExp(t)))}),a},_seekNext:function(e,t){for(var i=this._caretPosition(this._textbox),s=e?t?i-t-1:i-1:i,n=s,a=!0;a;){if(0<=s&&s<this._maskLength){for(var r=0,o=0;o<=s;o++)"\\"==this.model.maskFormat[o]&&(r+=1);if("C"!=this.model.maskFormat.charAt(s)&&(0<=this.model.maskFormat.indexOf("\\")?"\\"!=this.model.maskFormat.charAt(s+r)&&"\\"!=this.model.maskFormat.charAt(s+r-1)?this._charMap[this.model.maskFormat.charAt(s+r)]||s++:"\\"!=this.model.maskFormat.charAt(s+r)&&"\\"==this.model.maskFormat.charAt(s+r-1)&&++s:this._charMap[this.model.maskFormat.charAt(s)]||s++,s!=n)){n=s;continue}}a=!1}return s},_seekBefore:function(e){var t=this._caretPosition(this._textbox),i=e?t+1:t,s=--i,n=!0;for(1==this._selectedTextKeyDown&&(n=!1);n;){if(0<=i&&i<this._maskLength){for(var a=0,r=0;r<=i;r++)"\\"==this.model.maskFormat[r]&&(a+=1);if("C"!=this.model.maskFormat.charAt(i)&&(0<=this.model.maskFormat.indexOf("\\")?"\\"!=this.model.maskFormat.charAt(i+a)&&"\\"!=this.model.maskFormat.charAt(i+a-1)?this._charMap[this.model.maskFormat.charAt(i+a)]||this._setCaretPosition(--i):"\\"==this.model.maskFormat.charAt(i+a-1)&&this._setCaretPosition(--i+a):this._charMap[this.model.maskFormat.charAt(i)]||this._setCaretPosition(--i)),i!=s){s=i;continue}}n=!1}return i},_writeBuffer:function(e,t,i){if(t<=this._maskLength){var s=this._textbox.value;if(null!=this.indexValue&&"95"!=i.keyCode)for(var n=0;n<this.indexValue.length;n++)this.indexValue[n]==t&&("_"==e&&"8"!=i.keyCode||(this.indexValue[n]=""));"95"==i.keyCode&&(this.indexValue[this.temp_index]=t,this.temp_index++),null!=this._tempMask&&(r=this._updateCasing(e,t)),e=r==v?e:r;var a=s.substring(0,t),r=s.substring(t);if(0<=this.model.maskFormat.indexOf("\\")){for(var o=0,n=0;n<=t;n++)0<=this.model.maskFormat[n].indexOf("\\")&&0!=t&&(o+=1);0<=this.model.maskFormat[t+o].indexOf("\\")?this._textbox.value=a+s[t]+r.substr(1,r.length):this._textbox.value=a+e+r.substr(1,r.length)}else this._textbox.value=a+e+r.substr(1,r.length);this._setCaretPosition(t+1)}},_updateCasing:function(e,t){for(var i=0;i<t+1;i++)"<"!=this._tempMask.substr(i,1)&&">"!=this._tempMask.substr(i,1)||t++;for(var s=t;-1<s;s--){if("<"==this._tempMask.substr(s,1))return e.toLowerCase();if(">"==this._tempMask.substr(s,1))return e.toUpperCase()}},_getStrippedValue:function(e){var t=this.model.maskFormat,i=e?"":null,s=""==this._textbox.value&&"password"!=this.model.inputMode?this._maskModel:this._textbox.value;if(0==t.length)return s;for(var n=0,a=0;a<t.length;a++){var r,o,i=e?i:l.trim(i);0<=this.model.maskFormat.indexOf("\\")?"\\"==this.model.maskFormat[a]?n+=1:"\\"==this.model.maskFormat[a-1]?i+=this._textbox.value[a-n]:(r=t[a],o=null,-1!="9?$a*".indexOf(r)?o=this._charMap[r]:"A"==r||"N"==r||"#"==r?o=this._charMap[r].replace("]","")+this.model.customCharacter+"]":"C"==r?o="["+this.model.customCharacter+"]":"&"==r&&(i+=s[a-n]),o&&s[a-n]&&s[a-n].match(new RegExp(o))&&(i+=s[a-n])):(r=t[a],o=null,-1!="9?$a*".indexOf(r)?o=this._charMap[r]:"A"==r||"N"==r||"#"==r?o=this._charMap[r].replace("]","")+this.model.customCharacter+"]":"C"==r?o="["+this.model.customCharacter+"]":"&"==r&&(i+=s[a-n]),o&&s[a]&&s[a].match(new RegExp(o))&&(i+=s[a]))}return i},_getUnstrippedValue:function(e){var t=0,i=""==this._textbox.value&&"password"!=this.model.inputMode?this._maskModel:this._textbox.value,s=null;if(0==this.model.maskFormat.length)return i;if(i!=v&&(s=""==l.trim(i.replace(/[_]/g," "))?null:i.replace(/[_]/g," ")),"_"==this.model.customCharacter&&null==s&&(s=""),null==s&&null!=this.indexValue[t]&&(s=""),i!=v&&null!=this.indexValue[t]&&null!=s)for(;t<this.indexValue.length;t++)""==this.indexValue[t]&&"0"!=this.indexValue[t]||(s=s.substr(0,this.indexValue[t])+"_"+s.substr(this.indexValue[t]+1));return null==s&&e?"":s},get_StrippedValue:function(){return this._getStrippedValue()},get_UnstrippedValue:function(){return this._getUnstrippedValue()},_setValue:function(e){!_.isNullOrUndefined(e)&&""!=l.trim(e)||(e=null),this.model.value=e,this._isWatermark||"password"==this.model.inputMode||this._hiddenSpan.css("display","none"),_.isNullOrUndefined(this.model.maskFormat)||""==this.model.maskFormat?(this._textbox.value=_.isNullOrUndefined(e)?"":e,this._unStrippedMask=this._textbox.value):(this._validateValue(),_.isNullOrUndefined(this.model.value)&&(this._textbox.value=_.isNullOrUndefined(e)?"":e,this._unStrippedMask=this._maskModel)),this._setWaterMark(),this._prevValue=this._textbox.value,this._prevPosition=this.element[0].selectionStart},_valueMapper:function(){for(var e,t,i,s=[],n=0,a=this.model.maskFormat||"",r=a.split(""),o=0,l="",d=this._charMap;o<a.length;o++)if(i=d[e=r[o]])s[n]={rule:i},l+="_",n+=1;else{"\\"===e&&(t=o+1,o++,e=r[t]),e=e.split("");for(var h=0;h<e.length;h++)s[n]=e[h],l+=e[h],n+=1}this._rules=s,this._emptyMask=l,this._maskLength=l.length},_changeMask:function(e){if(0!=this._maskModel.length){for(var e=_.preferredCulture(e),t="",i=e.numberFormat[","],s=e.numberFormat.currency.symbol,n=e.numberFormat["."],a=0;a<this._maskModel.length;a++)","==this._maskModel[a]?t+=i:"."==this._maskModel[a]?t+=n:"$"==this._maskModel[a]?t+=s:t+=this._maskModel[a];this._maskModel=t}},_setMask:function(e){this._maskLength=e.length,this.model.maskFormat=e,this._tempMask=this.model.maskFormat,this._maskModel=e.replace(/[9?CANa]/g,"_"),(0<=this._maskModel.indexOf("<")||0<=this._maskModel.indexOf(">"))&&(this._maskModel=this._maskModel.replace(/[<>]/g,""),this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,"")),_.isNullOrUndefined(this.model.maskFormat)||""==this.model.maskFormat?this.model.watermarkText||this._textbox.value==this._maskModel||(this.model.maskFormat?this.model.hidePromptOnLeave?(this._textbox.value=this._maskModel,this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._textbox.value=this._maskModel:(e=this._unStrippedMask.replace(/[_]/g," "),this._textbox.value=null==this.model.customCharacter?l.trim(e.replace(/[\(\)-]/g,"")):l.trim(e),this._unStrippedMask=this._textbox.value)):this._validateValue()},enable:function(){this.element.disabled=!1,this.element.removeAttr("disabled").removeClass("e-disable").attr({"aria-disabled":!1}),0<this.wrapper.find(".e-placeholder").length&&this.wrapper.find(".e-placeholder").removeAttr("disabled","disabled"),this.wrapper.removeClass("e-disable-wrap"),this.model.enabled=!0},disable:function(){this.element.disabled=!0,this.element.attr("disabled","disabled").addClass("e-disable").attr({"aria-disabled":!0}),0<this.wrapper.find(".e-placeholder").length&&this.wrapper.find(".e-placeholder").attr("disabled","disabled"),this.wrapper.addClass("e-disable-wrap"),this.model.enabled=!1},clear:function(){this._textbox.value=this.model.maskFormat.replace(/[9?aCAN]/g,"_"),this.model.value=this.get_StrippedValue()},_wireEvents:function(){this._on(this.element,"focus",this._OnFocusHandler),this._on(this.element,"blur",this._OnBlurHandler),this._on(this.element,"keydown",this._OnKeyDownHandler),this._on(this.element,"input",this._OnInputHandler),this._on(this.element,"keypress",this._OnKeyPressHandler),this._on(this.element,"keyup",this._OnKeyUpHandler),this._on(this.element,"mouseover",this._OnMouseOverHandler),this._on(this.element,"mouseout",this._OnMouseOutHandler),this._on(this.element,"paste",this._OnPasteHandler),this._on(this.element,"cut",this._OnCutHandler)},_OnCutHandler:function(e){var t=_.isNullOrUndefined(this._maskModel)?"":this._maskModel.substring(this._textbox.selectionStart,this._textbox.selectionEnd),i=this._textbox.value.substring(0,this._textbox.selectionStart),s=this._textbox.value.substring(this._textbox.selectionEnd),n=this._textbox.selectionStart,a=this;setTimeout(function(){a._textbox.value=i+t+s,a._setCaretPosition(n),a._prevValue=a._textbox.value,a._prevPosition=a.element[0].selectionStart,a._raiseEvents("change")},0)},_OnPasteHandler:function(e){var t=this;return this._keyFlag=!0,setTimeout(function(){var e=l(t._textbox).val();t._setValue(e),t._raiseEvents("change")},0),!0},_OnFocusHandler:function(e){this.wrapper.addClass("e-focus");var t,i=!this.model.showPromptChar&&""!=this._maskModel&&null!=this._maskModel?this._maskModel.replace(/[_]/g," "):this._maskModel;this.model.readOnly||(this._focusValue=this.model.value,this._isWatermark||"password"==this.model.inputMode||this._hiddenSpan.css("display","none"),""==this._textbox.value&&""!=this._maskModel&&"password"!=this.model.inputMode&&(0<=this.model.maskFormat.indexOf("\\")?this._textbox.value=i:this._textbox.value=_.isNullOrUndefined(this._maskModel)?"":i),null!=this._maskModel&&(0<=this._textbox.value.indexOf("<")||0<=this._textbox.value.indexOf(">"))&&(this._textbox.value=this._textbox.value.replace(/[<>]/g,""),this._maskModel=this._textbox.value,this._tempMask=this.model.maskFormat,this.model.maskFormat=this.model.maskFormat.replace(/[<>]/g,"")),this._textbox.value!=i&&null!=this._unStrippedMask&&this.model.hidePromptOnLeave&&(this._textbox.value=this._unStrippedMask),this.model.showPromptChar||(this._textbox.value=this._getUnstrippedValue(!0)),l.fn.selectRange=function(t,i){return this.each(function(){var e;this.setSelectionRange?(this.focus(),this.setSelectionRange(t,i)):this.createTextRange&&((e=this.createTextRange()).collapse(!0),e.moveEnd("character",i),e.moveStart("character",t),e.select())})},this.model.maskFormat&&l(this.element).selectRange(0,0),t=this,setTimeout(function(){t._prevPosition=t.element[0].selectionStart},0),this._raiseEvents("focusIn"))},_OnBlurHandler:function(e){this.wrapper.removeClass("e-focus"),this.model.value=this.get_StrippedValue();var t=new Array,i=new Array;if((-1!=this._textbox.value.indexOf("_")||-1!=this._textbox.value.indexOf(" "))&&!_.isNullOrUndefined(this.model.value)){for(var s=0;s<this.model.maskFormat.length;s++)"A"==this.model.maskFormat[s]||"?"==this.model.maskFormat[s]?t.push(s):"9"!=this.model.maskFormat[s]&&"a"!=this.model.maskFormat[s]&&"C"!=this.model.maskFormat[s]||i.push(s);for(s=0;s<t.length;s++)"_"===this._textbox.value[t[s]]&&(this._showAlert(),this.model.value=this._textbox.value);for(s=0;s<i.length;s++)if("_"==this.model.value[i[s]]||" "==this.model.value[i[s]]){this.model.value=this.model.value.substr(0,i[s])+this.model.value.substr(i[s]+1,this.model.value.length);for(var n=s;n<i.length;n++)i[n]=i[n]-1}}this.model.value=null!=this.model.value?this.model.value.replace(/\s+/g,""):this.model.value,this._textbox.value!=v&&(""==this.model.watermarkText||""!=this.model.watermarkText&&""!=this.model.value)&&(this.model.hidePromptOnLeave?(this._unStrippedMask=this._textbox.value,this._textbox.value=this.get_UnstrippedValue()):this._unStrippedMask=this._textbox.value),"password"!=this.model.inputMode&&this._setWaterMark(),this._raiseEvents("change"),this._raiseEvents("focusOut")},_OnKeyDownHandler:function(e){if(!this.model.readOnly){this._keyFlag=!0,this._checkMask&&(a=this.element[0].selectionStart,n=this._getStrippedValue(!0),this._setValue(n),this._setCaretPosition(a),this._checkMask=!1),this._keypressFlag=0,this._keyupFlag=!0;var t=_.browserInfo().name,i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(_.isDevice()&&_.isTouchDevice()&&!i&&(229==e.keyCode||"mozilla"==t&&0==e.keyCode&&0==e.charCode||"edge"==t||"msie"==t)&&(this._keyupFlag=!1),this._raiseEvents("onKeyDown",null,{keyCode:e.keyCode,altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,originalArgs:e}),this._raiseEvents("keyDown",null,{keyCode:e.keyCode,altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,originalArgs:e}),this.element.removeClass("error"),0==this._maskLength)return!0;var s=e.keyCode||e.charCode,n=(String.fromCharCode(s),this._seekNext()),i=this.model.showPromptChar?"_":" ";if("msie"==(t=_.browserInfo().name)&&""==this._textbox.value){if(0<=this.model.maskFormat.indexOf("\\"))for(var a=0;a<this.model.maskFormat.length;++a)"\\"==this.model.maskFormat[a-1]?this._textbox.value+=this.model.maskFormat[a]:"\\"!=this.model.maskFormat[a]&&(this._textbox.value+=this.model.maskFormat[a].replace(/[9?CANa#&]/g,"_"));else this._textbox.value=this.model.maskFormat.replace(/[9?CANa#&]/g,"_");this._setCaretPosition(n)}if(35<=s&&s<=41&&("Mozilla"!=window.navigator.appCodeName&&"opera"!=window.navigator.appCodeName||(this._keypressFlag=1)),e.shiftKey&&(35==e.keyCode||36==e.keyCode||37==e.keyCode||39==e.keyCode||46==e.keyCode||127==e.keyCode)||e.ctrlKey&&(86==e.keyCode||65==e.keyCode||67==e.keyCode||88==e.keyCode))this._keypressFlag=1;else{if(8==s){if("password"==this.model.inputMode)return this._keypressFlag=1,!0;this._keydownFlag=1;n=this._seekBefore();return this._selectedTextKeyDown?!this.model.showPromptChar&&this._selectedTextKeyDown&&(8==e.keyCode&&"-1"==n&&null!=this.indexValue&&(this.indexValue=[],this.temp_index=0),this._textbox.value=this.get_UnstrippedValue(),this._setCaretPosition(n+1)):(0<=n&&n<this._maskLength&&this._writeBuffer(i,n,e),n<0&&(n=0),this._setCaretPosition(n)),this._keydownFlag=0,this._selectedTextKeyDown=0,8==e.keyCode&&"-1"==n&&null!=this.indexValue&&(this.indexValue=[],this.temp_index=0),e.preventDefault(),this._prevValue=this._textbox.value,this._prevPosition=this.element[0].selectionStart,this._keyFlag=!1}if(46==e.keyCode||127==e.keyCode)return"password"!=this.model.inputMode?(this._keydownFlag=2,n=this._seekNext(),this._selectedTextKeyDown?!this.model.showPromptChar&&this._selectedTextKeyDown&&(this._textbox.value=this.get_UnstrippedValue(),this._setCaretPosition(n)):0<=n&&n<this._maskLength&&(s=this._getCunrrentPos(n),"&"!=this.model.maskFormat[n+s]&&this._writeBuffer(i,n,e)),this._keydownFlag=0,this._selectedTextKeyDown=0,e.preventDefault(),!1):(this._keypressFlag=1,!0)}}},_ErrorHandler:function(e){var t=this.model.showPromptChar?"_":" ";""==this._textbox.value&&(this._textbox.value=this.model.maskFormat.replace(/[9?$CANa*]/g,t)),this._setCaretPosition(e),this._showAlert()},_getCunrrentPos:function(e){for(var t=0,i=0;i<=e+t;i++)"\\"==this.model.maskFormat[i]&&(t+=1);return t},_OnKeyPressHandler:function(e){if(!this.model.readOnly){if(this._keyFlag=!1,this._raiseEvents("keyPress",null,{keyCode:e.keyCode,altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,originalArgs:e}),0==this._maskLength)return!0;var t=e.keyCode||e.charCode,i=String.fromCharCode(t),s=this.model.showPromptChar?"_":" ",n=this._seekNext(),a=_.browserInfo().name,r=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;return!_.isDevice()||!_.isTouchDevice()||r||"edge"!=a&&"msie"!=a?(this._validateChars(t,n)?(("mozilla"!=a&&"opera"!=a||35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode)&&("mozilla"!=a&&"opera"!=a||!e.ctrlKey||97!=t&&99!=t&&118!=t&&120!=t)&&(""==this._textbox.value&&(this._textbox.value=this.model.maskFormat.replace(/[9?$CANa&*]/g,s)),0<=this.model.maskFormat.indexOf("\\")&&!(n<this._maskLength)||this._writeBuffer(i,n,e)),this._prevValue=this._textbox.value):("mozilla"!=a&&"opera"!=a||35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode)&&("mozilla"!=a&&"opera"!=a||!e.ctrlKey||97!=t&&99!=t&&118!=t&&120!=t)&&(0<=this.model.maskFormat.indexOf("&")||0<=this.model.maskFormat.indexOf("\\")?(a=this._getCunrrentPos(n),"&"==this.model.maskFormat[n+a]&&127==t||(0<=this.model.maskFormat.indexOf("\\")?n<this._maskLength&&(this._validateChars(t,n+a)||"\\"==this.model.maskFormat[n+a-1]?this._writeBuffer(i,n,e):this._ErrorHandler(n)):this._validateChars(t,n+a)?this._writeBuffer(i,n,e):this._ErrorHandler(n))):this._ErrorHandler(n)),this._keypressFlag||9==t?void(this._keypressFlag=0):(this._keypressFlag=0,e.preventDefault(),!1)):!0}},_OnInputHandler:function(e){var t=_.browserInfo().name,i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&!this._keyFlag,t=this._keyupFlag&&("edge"==t||"msie"==t);if(0==this._maskLength)return!0;if(_.isDevice()&&_.isTouchDevice()&&(i||t)&&(o=1==(n=this._textbox.value.length-this._prevValue.length)?this._seekNext(!0):this._seekNext(!0,n-1),s=(r=this._textbox.value[this.element[0].selectionStart-1]).charCodeAt(0),this._validateChars(s,o)?(this._textbox.value=this._prevValue,l=String.fromCharCode(s),this._writeBuffer(l,o,e)):(this._textbox.value=this._prevValue,this._setCaretPosition(o),this._ErrorHandler(o)),this._prevValue=this._textbox.value,this._prevPosition=this.element[0].selectionStart,this._checkMask=!0),_.isDevice()&&_.isTouchDevice()&&!i&&!this._keyupFlag){t=this.element[0].selectionStart,i=this.element[0].selectionEnd;t!=i&&this._textbox.setSelectionRange(i,i);var s,i=this.model.showPromptChar?"_":" ",n=(n=this._textbox.value.length-this._prevValue.length)<=0,a=n?this._seekBefore(!0):this._seekNext(!0),r=this._textbox.value[this.element[0].selectionStart-1];if(0<this.element[0].selectionStart&&(s=r.charCodeAt(0)),this._tempMask.length>this._textbox.value.length)_.isNullOrUndefined(r)&&this._emptyMask.slice(1,this._emptyMask.length)==this._textbox.value?this._textbox.value=this._emptyMask:n?(this._textbox.value=this._prevValue,this._writeBuffer(i,a,e)):(o=a,this._validateChars(s,o)?(this._textbox.value=this._prevValue,l=String.fromCharCode(s),this._writeBuffer(l,o,e)):(this._textbox.value=this._prevValue,this._setCaretPosition(o),this._ErrorHandler(o))),this._setCaretPosition(a);else{var o=a;if(this._validateChars(s,o)){this._textbox.value=this._prevValue;var l=String.fromCharCode(s);this._writeBuffer(l,o,e);for(var d=0;d<this._emptyMask.length;d++)" "==this._emptyMask[d]&&" "!=this._textbox.value[d]&&r==this._textbox.value[d]&&(this._textbox.value=this._textbox.value.substring(0,startPos-1)+" "+r+this._textbox.value.substring(endPos,this._textbox.value.length),this._setCaretPosition(a+1))}else this._textbox.value=this._prevValue,this._setCaretPosition(o),this._ErrorHandler(o)}this._prevValue=this._textbox.value,this._prevPosition=this.element[0].selectionStart,this._keyupFlag=!0}this._keyFlag=!1},_OnKeyUpHandler:function(e){0==this._maskLength&&this._raiseEvents("change"),this._raiseEvents("keyUp",null,{keyCode:e.keyCode,altKey:e.altKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,originalArgs:e}),_.isNullOrUndefined(this.model.validationRules)||this._hiddenInput.valid()},_OnMouseOverHandler:function(e){this._raiseEvents("mouseOver")},_OnMouseOutHandler:function(e){this._raiseEvents("mouseOut")},_raiseEvents:function(e,t,i){var s=this.get_StrippedValue(),n=this.get_UnstrippedValue();if(this.model.value=null===n||null==this.model.customCharacter&&""==l.trim(n.replace(/[\(\)-]/g,""))?null:n,"change"==e)if(this.previousValue!=this.model.value)this.previousValue=this.model.value;else if(this._focusValue==this.model.value)return!1;n={value:n,unmaskedValue:s},"change"==e&&(n.isInteraction=!t),"change"==e&&(this._trigger("_change",n),_.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid")),i&&l.extend(!0,n,i),this._hiddenInput.val(s),this._trigger(e,n)},_OnValueChange:function(){""==this._textbox.value&&""!=this._maskModel&&(this._textbox.value=this._maskModel),this._setValue(this._textbox.value)}}),_.InputMode={Password:"password",Text:"text"}}(jQuery,Syncfusion),function(m,g,s){g.widget("ejDateTimePicker","ej.DateTimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_setFirst:!1,_rootCSS:"e-datetimepicker",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},_requiresID:!0,defaults:{cssClass:"",locale:"en-US",readOnly:!1,showRoundedCorner:!1,enableRTL:!1,htmlAttributes:{},allowEdit:!0,enabled:!0,value:"",name:null,minDateTime:new Date("1/1/1900 12:00:00 AM"),maxDateTime:new Date("12/31/2099 11:59:59 PM"),height:"",width:"",dateTimeFormat:"",showPopupButton:!0,enableStrictMode:!1,buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"},watermarkText:"Select datetime",enablePersistence:!1,interval:30,timeDisplayFormat:"",timePopupWidth:105,popupPosition:"bottom",dayHeaderFormat:"short",startLevel:"month",depthLevel:"",startDay:-1,stepMonths:1,showOtherMonths:!0,specialDates:null,highlightWeekend:!1,enableAnimation:!0,headerFormat:"MMMM yyyy",validationRules:null,validationMessage:null,validationMessages:null,timeDrillDown:{enabled:!1,interval:5,showMeridian:!1,autoClose:!0,showFooter:!0},beforeOpen:null,beforeClose:null,open:null,close:null,change:null,create:null,destroy:null,focusIn:null,focusOut:null,disableDateTimeRanges:null,timeZone:!0,disableTimeRanges:null},dataTypes:{allowEdit:"boolean",cssClass:"string",locale:"string",readOnly:"boolean",showRoundedCorner:"boolean",enableRTL:"boolean",enabled:"boolean",enableAnimation:"boolean",dateTimeFormat:"string",showPopupButton:"boolean",buttonText:"data",watermarkText:"string",enablePersistence:"boolean",enableStrictMode:"boolean",interval:"number",timeDrillDown:"data",timeDisplayFormat:"string",dayHeaderFormat:"string",startLevel:"string",depthLevel:"string",startDay:"number",stepMonths:"number",showOtherMonths:"boolean",highlightWeekend:"boolean",specialDates:"data",headerFormat:"string",validationRules:"data",validationMessage:"data",validationMessages:"data",htmlAttributes:"data",disableDateTimeRanges:"data",disableTimeRanges:"data"},_setModel:function(e){var t,i=!1;for(t in e)switch("allowEdit"!=t&&"readOnly"!=t&&"enabled"!=t&&"validationRules"!=t&&"validationMessages"!=t&&"enableStrictMode"!=t&&"height"!=t&&"width"!=t&&"showPopupButton"!=t&&"dateTimeFormat"!=t&&"watermarkText"!=t&&"htmlAttributes"!=t&&(this.popup||this._renderDropdown()),t){case"allowEdit":this._changeEditable(e[t]);break;case"cssClass":this._changeSkin(e[t]);break;case"locale":this._localize(e[t]);break;case"readOnly":this._readOnly(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"enableRTL":this._setRtl(e[t]);break;case"enabled":this._enabled(e[t]);break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":case"validationMessages":this.model.validationMessages=e[t],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initValidator(),this._setValidation());break;case"value":e[t]=this._setValue(e[t]),this._specificFormat()&&(this._stopRefresh=!0),i=!0,this._prevDateTime=this._prevDateTimeVal||this._preVal;break;case"enableStrictMode":this.model.enableStrictMode=e[t],i=!0;break;case"minDateTime":var s=this._stringToObject(e[t]),n=this._getFormat(s,this.timePicker.model.timeFormat);this._isValidDate(s)?(this.datePicker.option("minDate",s),this.datePicker.model.value&&this.datePicker.model.value.toDateString()==this.datePicker.model.minDate.toDateString()&&this.timePicker.option("minTime",n),e[t]=s,this.model.minDateTime=s):e[t]=this.model[t],i=!0;break;case"maxDateTime":var s=this._stringToObject(e[t]),a=this._getFormat(e[t],this.timePicker.model.timeFormat);this._isValidDate(s)?(this.datePicker.option("maxDate",s),this.datePicker.model.value&&this.datePicker.model.value.toDateString()==this.datePicker.model.maxDate.toDateString()&&this.timePicker.option("maxTime",a),e[t]=s,this.model.maxDateTime=s):e[t]=this.model[t],i=!0;break;case"height":this.wrapper.height(e[t]);break;case"width":this.wrapper.width(e[t]);break;case"dateTimeFormat":this.model.dateTimeFormat=e[t],this.isValidState&&this._setValue(this.model.value);break;case"showPopupButton":this._showButton(e[t]);break;case"watermarkText":g.isNullOrUndefined(this._options)&&(this._options={}),this._options[t]=this.model.watermarkText=e[t],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark();break;case"buttonText":g.isNullOrUndefined(this._options)||(this._options.buttonText=this.model.buttonText=e[t]),this._localizedLabels.buttonText=this.model.buttonText,this._buttonText(e[t]);break;case"interval":this._updateTimeHeight(),this.timePicker.option("interval",e[t]);break;case"timeDisplayFormat":this._updateTimeHeight(),this.timePicker.option("timeFormat",e[t]);break;case"disableDateTimeRanges":this._disabledDate&&(this._disabledDates=!1),this.model.disableDateTimeRanges=e[t],this._setValue(this.model.value);break;case"disableTimeRanges":this.model.disableTimeRanges=e[t],this.timePicker.option("disableTimeRanges",this.model.disableTimeRanges);break;case"timePopupWidth":this._updateTimeHeight();a=e[t];"string"==typeof a&&-1!=a.indexOf("%")||"string"==typeof a?e[t]=0<parseInt(a)?a:105:e[t]=0<a?a:105,this.timePicker.option("popupWidth",e[t]);break;case"dayHeaderFormat":this.datePicker.option("dayHeaderFormat",e[t]);break;case"startLevel":this.datePicker.option("startLevel",e[t]);break;case"depthLevel":this.datePicker.option("depthLevel",e[t]);break;case"startDay":this.datePicker.option("startDay",e[t]),this.model.startDay=this.datePicker.model.startDay,e[t]=this.model.startDay;break;case"stepMonths":this.datePicker.option("stepMonths",e[t]);break;case"showOtherMonths":this.datePicker.option("showOtherMonths",e[t]);break;case"highlightWeekend":this.datePicker.option("highlightWeekend",e[t]);break;case"specialDates":this.datePicker.option("specialDates",e[t]),this.model.specialDates=this.datePicker.model.specialDates;break;case"headerFormat":this.datePicker.option("headerFormat",e[t]);break;case"htmlAttributes":this._addAttr(e[t]);break;case"popupPosition":this.model.popupPosition=e[t],this._setListPosition();break;case"timeDrillDown":g.isNullOrUndefined(e[t].enabled)||(this.model.timeDrillDown.enabled=e[t].enabled,this._changeDesign()),g.isNullOrUndefined(e[t].interval)||(this.model.timeDrillDown.interval=e[t].interval,this._generateMins(m.trim(g.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)))),g.isNullOrUndefined(e[t].showMeridian)||(this.model.timeDrillDown.showMeridian=e[t].showMeridian,this._sfTimeHour.empty(),this._renderHourTable()),g.isNullOrUndefined(e[t].showFooter)||(this.model.timeDrillDown.showFooter=e[t].showFooter,this._changeDesign())}i&&this._validateMinMax(),this._valueChange(!0),"value"==t&&(e[t]=this.model.value),this.popup&&this._updateTimeHeight(),this._checkErrorClass()},observables:["value"],_destroy:function(){this.isPopupOpen&&this._hideResult(),this.wrapper&&(this.element.insertAfter(this.wrapper),this.wrapper.remove()),this.element.removeClass("e-js e-input").removeClass(g.util.getNameSpace(this.sfType)),this.element.removeAttr(" type aria-atomic aria-live tabindex aria-expanded aria-disabled placeholder role"),this._cloneElement[0].hasAttribute("name")||this.element.removeAttr("name"),g.isNullOrUndefined(this.datePicker)||this.datePicker.destroy(),g.isNullOrUndefined(this.timePicker)||this.timePicker.destroy(),this.popup&&this.popup.remove()},_initDisableTimeRanges:function(e){for(var t,i,s=this._getDateObj(e,this.datePicker.model.dateFormat),n=0;n<this.model.disableDateTimeRanges.length;n++){g.isNullOrUndefined(this.model.disableDateTimeRanges[n].endDateTime)&&(this.model.disableDateTimeRanges[n].endDateTime=this.model.disableDateTimeRanges[n].startDateTime),i=this.model.disableDateTimeRanges[n].startDateTime instanceof Date||this.model.disableDateTimeRanges[n].endDateTime instanceof Date?(t=this._getFormat(this.model.disableDateTimeRanges[n].startDateTime,this.datePicker.model.dateFormat),this._getFormat(this.model.disableDateTimeRanges[n].endDateTime,this.datePicker.model.dateFormat)):(t=this.model.disableDateTimeRanges[n].startDateTime.split(" ")[0],this.model.disableDateTimeRanges[n].endDateTime.split(" ")[0]);var a=new Date(this.model.disableDateTimeRanges[n].startDateTime),r=new Date(this.model.disableDateTimeRanges[n].endDateTime);if(t==i){if(this._compare(s,this._setEmptyTime(this.model.disableDateTimeRanges[n].startDateTime))){var o=this._getFormat(a,this.timePicker.model.timeFormat),l=this._getFormat(r,this.timePicker.model.timeFormat);return(d=[]).push({startTime:o,endTime:l}),void this.timePicker.option("disableTimeRanges",d)}this.timePicker.option("disableTimeRanges",this._defaultMinVal()),this._disabledDates||this.model.disableDateTimeRanges[n].endDateTime!=this.model.disableDateTimeRanges[n].startDateTime||this.model.disableDateTimeRanges[n].endDateTime instanceof Date==0&&this._getFormat(this.model.disableDateTimeRanges[n].endDateTime,this.model.dateTimeFormat)==this._getFormat(this.model.disableDateTimeRanges[n].endDateTime,this.model.dateFormat)&&g.isNullOrUndefined(this.model.disableDateTimeRanges[n].endDateTime.split(" ")[1])&&this._between.push(new Date(this.model.disableDateTimeRanges[n].endDateTime))}else if(t!=i){if(this._compare(s,this._setEmptyTime(this.model.disableDateTimeRanges[n].startDateTime))||this._compare(s,this._setEmptyTime(this.model.disableDateTimeRanges[n].endDateTime))){var d,o=this.timePicker.model.minTime,l=this.timePicker.model.maxTime;return this.datePicker.model.value.toDateString()==new Date(this.model.disableDateTimeRanges[n].startDateTime).toDateString()&&(o=this._getFormat(new Date(this.model.disableDateTimeRanges[n].startDateTime),this.timePicker.model.timeFormat)),this.datePicker.model.value.toDateString()==new Date(this.model.disableDateTimeRanges[n].endDateTime).toDateString()&&(l=this._getFormat(new Date(this.model.disableDateTimeRanges[n].endDateTime),this.timePicker.model.timeFormat)),(d=[]).push({startTime:o,endTime:l}),void this.timePicker.option("disableTimeRanges",d)}this._disabledDates||(o=this._getFormat(new Date(this.model.disableDateTimeRanges[n].startDateTime),this.timePicker.model.timeFormat),l=this._getFormat(new Date(this.model.disableDateTimeRanges[n].endDateTime),this.timePicker.model.timeFormat),o==this.timePicker.model.minTime&&this._between.push(new Date(this.model.disableDateTimeRanges[n].startDateTime)),this.model.disableDateTimeRanges[n].endDateTime instanceof Date==0&&this._getFormat(this.model.disableDateTimeRanges[n].endDateTime,this.model.dateTimeFormat)==this._getFormat(new Date(this.model.disableDateTimeRanges[n].endDateTime),this.datePicker.model.dateFormat)&&(l=this.timePicker.model.maxTime),l==this.timePicker.model.maxTime&&this._between.push(new Date(this.model.disableDateTimeRanges[n].endDateTime)))}}},_disableBetweenDates:function(){for(var e=0;e<this.model.disableDateTimeRanges.length;e++)for(var t=this.model.disableDateTimeRanges[e].startDateTime,i=this._setEmptyTime(t),t=(this._getFormat(new Date(this.model.disableDateTimeRanges[e].startDateTime),this.timePicker.model.timeFormat),this._getFormat(new Date(this.model.disableDateTimeRanges[e].endDateTime),this.timePicker.model.timeFormat),this.model.disableDateTimeRanges[e].endDateTime),s=this._setEmptyTime(t);i<s;)i.setDate(i.getDate()+1),new Date(i)<s&&this._between.push(new Date(i));this._datesDisabled=!0},_init:function(e){if(this._cloneElement=this.element.clone(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._options=e,this._ISORegex(),this._isSupport=document.createElement("input").placeholder!=s,this._validateMeridian(),this._checkAttribute(),this._initialize(),this._initial=!0,this._interval=60,this._render(),this._wireEvents(),this._addAttr(this.model.htmlAttributes),g.isNullOrUndefined(e)||g.isNullOrUndefined(e.validationMessage)||(this.model.validationMessages=this.model.validationMessage),null!=this.model.validationRules&&(this._initValidator(),this._setValidation()),this._removeWatermark(),e&&e.value!=s&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()})},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_changeDesign:function(){var e;this.model.timeDrillDown.enabled?(e=this.model.timeDrillDown.showFooter?"block":"none",this.popup.addClass("e-drill-down"),this._timeContainer.css("display","none"),this._buttonContainer.css("display","none"),this.datePicker.option("showFooter",this.model.timeDrillDown.showFooter),m(".e-footer",this._sfTimeHour).css("display",e),m(".e-footer",this._sfTimeMins).css("display",e)):(this.popup.removeClass("e-drill-down"),this._sfTimeHour.hide(),this._sfTimeMins.hide(),this._updateTimeHeight(),this._dateContainer.show(),this._timeContainer.show(),this._buttonContainer.show(),this.datePicker.option("showFooter",!1),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle())},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_checkAttribute:function(){this.model.value=(""===this.model.value?this.element[0]:this.model).value,this._options.minDateTime||(this.model.minDateTime=this.element[0].min),this._options.maxDateTime||(this.model.maxDateTime=this.element[0].max),g.isNullOrUndefined(this._options.readOnly)&&(this.model.readOnly=this.element.is("[readonly]")),g.isNullOrUndefined(this._options.enabled)&&(this.model.enabled=!this.element.is("[disabled]"))},_setValidation:function(){this.element.rules("add",this.model.validationRules);var e,t=(t=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),i=this.element.attr("name");for(e in t.settings.messages[i]={},this.model.validationRules){var s=null;if(!g.isNullOrUndefined(this.model.validationRules[e])){if(g.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[e]))for(var n in t.settings.messages[i][e]=m.validator.messages[e],this.model.validationMessages)e==n&&(s=this.model.validationMessages[e]);else s=this.model.validationRules.messages[e];t.settings.messages[i][e]=null!=s?s:m.validator.messages[e]}}},_validateDisableRanges:function(){for(var e=0;e<this.model.disableDateTimeRanges.length;e++){var t=this.model.value;new Date(this.model.value).getTime()>=new Date(this.model.disableDateTimeRanges[e].startDateTime).getTime()&&new Date(this.model.value).getTime()<=new Date(this.model.disableDateTimeRanges[e].endDateTime).getTime()&&(this.model.value=null),null==this.model.value&&null!=t&&this.model.enableStrictMode&&(this.isValidState=!1),this.isValidState&&this.element.val(this._getFormat(this.model.value,this.model.dateTimeFormat))}},_addAttr:function(e){var s=this;m.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"disabled"==i?s._enabled(!1):"readOnly"==i?s._readOnly(!0):"style"==i?s.wrapper.attr(t,e):"id"==i?(s.wrapper.attr(t,e+"_wrapper"),s.element.attr(t,e)):(g.isValidAttr(s.element[0],i)?s.element:s.wrapper).attr(i,e)})},_validateMeridian:function(){var e=g.preferredCulture(this.model.locale);e&&(this.model.locale="en"==e.name?"en-US":e.name),(g.isNullOrUndefined(this._options)||g.isNullOrUndefined(this._options.timeDrillDown)||g.isNullOrUndefined(this._options.timeDrillDown.showMeridian))&&(this.model.timeDrillDown.showMeridian=!g.isNullOrUndefined(g.preferredCulture(this.model.locale).calendars.standard.AM))},_initialize:function(){this.popup=null,this.isPopupOpen=!1,this.isValidState=!0,this._localizedLabels=this._getLocalizedLabels(),g.isNullOrUndefined(this._options)||(g.isNullOrUndefined(this._options.buttonText)||m.extend(this._localizedLabels.buttonText,this._options.buttonText),g.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),-1==this.model.startDay&&(this.model.startDay=g.preferredCulture(this.model.locale).calendar.firstDay),this._isIE8="msie"==g.browserInfo().name&&"8.0"==g.browserInfo().version,this._isIE9="msie"==g.browserInfo().name&&"9.0"==g.browserInfo().version,this.model.dateTimeFormat&&this.model.timeDisplayFormat||this._getDateTimeFormat(),(e=!this.model.value||"object"==typeof JSON&&"{}"===JSON.stringify(this.model.value)?null:this.model.value instanceof Date?this.model.value:(e=g.parseDate(this.model.value,this.model.dateTimeFormat,this.model.locale))||((e=this._checkJSONString(this.model.value))?e:null))&&(this.model.value=e);var e=this.model.minDateTime=this._stringToObject(this.model.minDateTime);e&&this._isValidDate(e)||(this.model.minDateTime=this.defaults.minDateTime);e=this.model.maxDateTime=this._stringToObject(this.model.maxDateTime);e&&this._isValidDate(e)||(this.model.maxDateTime=this.defaults.maxDateTime)},_checkJSONString:function(e){var t=new Date(e);if(isNaN(Date.parse(t))){if(this._extISORegex.exec(e)||this._basicISORegex.exec(e))return this._dateFromISO(e)}else if(t.toJSON()===this.model.value||t.toGMTString()===this.model.value||t.toISOString()===this.model.value||t.toLocaleString()===this.model.value||t.toString()===this.model.value||t.toUTCString()===this.model.value){if(this.model.timeZone)return new Date(new Date(t).getTime()+60*g.serverTimezoneOffset*60*1e3);if(e.match(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i)&&0<e.match(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i).length){t=(t=e.split("Z"))[0];return new Date(t)}}else if("string"==typeof e)return this._dateFromISO(e)},_render:function(){this._renderWrapper(),this._renderIcon(),this._setDimentions(),this._checkProperties()},_renderWrapper:function(){var e;this.element.addClass("e-input").attr({"aria-atomic":"true","aria-live":"assertive",tabindex:"0",role:"combobox","aria-expanded":"false"}),this.wrapper=g.buildTag("span.e-datetime-wrap e-widget "+this.model.cssClass+"#"+this.element[0].id+"_wrapper").insertAfter(this.element),this._setValue(this.model.value),this.wrapper.attr("style",this.element.attr("style")),this.element.removeAttr("style"),g.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=g.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),this._isSupport||(this._hiddenInput=g.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block"),m((e=this)._hiddenInput).focus(function(){e.element.focus()}))},_removeWatermark:function(){""!=this.element.val()&&!this._isSupport&&this._hiddenInput&&this._hiddenInput.css("display","none")},_renderIcon:function(){if(!this.model.showPopupButton)return!1;this.datetimeIcon=g.buildTag("span.e-select","",{}).attr(this._isIE8?{unselectable:"on"}:{});var e=g.buildTag("span.e-icon e-datetime","",{},{"aria-label":"select"}).attr(this._isIE8?{unselectable:"on"}:{});this.datetimeIcon.append(e),this.container.append(this.datetimeIcon).addClass("e-padding"),this._on(this.datetimeIcon,"click",this._iconClick),this._on(this.datetimeIcon,"mousedown",function(e){e.preventDefault()})},_setDimentions:function(){this.model.height||(this.model.height=this.element.attr("height")),this.model.width||(this.model.width=this.element.attr("width")),this.wrapper.height(this.model.height),this.wrapper.width(this.model.width)},_renderDropdown:function(){var e,t,i,s=m("#"+this.element[0].id+"_popup").get(0);s&&m(s).remove(),this.popup=g.buildTag("div.e-datetime-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.element[0].id+"_popup").css("visibility","hidden"),g.isTouchDevice()||this.popup.addClass("e-ntouch"),m("body").append(this.popup),this._renderControls(),i=g.buildTag("div.e-header",this._localizedLabels.buttonText.timeTitle).attr(this._isIE8?{unselectable:"on"}:{}),this._dateContainer=g.buildTag("div.e-datecontainer").append(this.datePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._timeContainer=g.buildTag("div.e-timecontainer").append(i,this.timePicker.popup).attr(this._isIE8?{unselectable:"on"}:{}),this._drillDownContainer=g.buildTag("div.e-drillDowncontainer").append().attr(this._isIE8?{unselectable:"on"}:{}),e=g.buildTag("div.e-popup-container").append(this._dateContainer,this._timeContainer,this._drillDownContainer).attr(this._isIE8?{unselectable:"on"}:{}),t=g.buildTag("div.e-dt-button e-dt-today e-btn e-select e-flat",this._localizedLabels.buttonText.today).attr(this._isIE8?{unselectable:"on"}:{}),s=g.buildTag("div.e-dt-button e-dt-now e-btn e-select e-flat",this._localizedLabels.buttonText.timeNow).attr(this._isIE8?{unselectable:"on"}:{}),i=g.buildTag("div.e-dt-button e-dt-done e-btn e-select e-flat",this._localizedLabels.buttonText.done).attr(this._isIE8?{unselectable:"on"}:{}),this._buttonContainer=g.buildTag("div.e-button-container").append(t,s,i).attr(this._isIE8?{unselectable:"on"}:{}),this._renderDrillDown(),this.popup.append(e,this._buttonContainer),this._checkForResponsive(),this._updateTimeHeight(),this._bindOperations(),this._updateValues(),this.popup.css({visibility:"visible",display:"none"}),this._on(t,"click",this._todayClick),this._on(s,"click",this._nowClick),this._on(i,"click",this._doneClick),this.popup.on("mouseenter touchstart",m.proxy(function(){this._popClose=!0},this)),this.popup.on("mouseleave touchend",m.proxy(function(){this._popClose=!1},this)),this._changeDesign()},_renderControls:function(){this._renderDateControl(),this._renderTimeControl();var e=g.buildTag("span").append(this.datePicker.wrapper,this.timePicker.wrapper);e.find("span").css("display","none"),this.popup.append(e)},_renderDrillDown:function(){this._renderHourPopup(),this._renderMinsPopup()},_renderHourPopup:function(){this._sfTimeHour=g.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-hours ","",{},{id:this._id?"e-hours-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),g.isTouchDevice()||this._sfTimeHour.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeHour),this._renderHourTable()},_renderHourTable:function(){if(g.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(g.buildTag("span.e-prev").append(g.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(g.buildTag("span.e-text").append(g.buildTag("span.e-hours-headertext").text("October 2015").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(g.buildTag("span.e-next").append(g.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour),this._interval<1)return!1;for(var e,t=6e4*this._interval,i=this.model.timeDrillDown.showMeridian?2:1,s=this.model.timeDrillDown.showMeridian?6:4,n=this.model.timeDrillDown.showMeridian?"hh":"HH:00",a=["AM","PM"],r=0,o="",l=this.timePicker._createObject("12:00:00 AM"),d=this.model.timeDrillDown.showMeridian?this.timePicker._createObject("11:59:59 AM"):this.timePicker._createObject("11:59:59 PM"),h=0;h<i;h++){this.model.timeDrillDown.showMeridian&&(o=a[h].toLowerCase(),e=g.isNullOrUndefined(g.preferredCulture(this.model.locale).calendars.standard[a[h]])?"":g.preferredCulture(this.model.locale).calendars.standard[a[h]][0],g.buildTag("div.e-header-"+o).attr(this._isIE8?{unselectable:"on"}:{}).append(g.buildTag("span.e-text").append(g.buildTag("span.e-hours-meridiantxt-"+o).text(e).attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeHour)),e=g.buildTag("table.e-dp-viewhours","",{}).data("e-table","data").attr({role:"grid"}).attr(this._isIE8?{unselectable:"on"}:{}),this._sfTimeHour.append(e);for(var c=g.buildTag("tbody.e-timepicker-hours").attr(this._isIE8?{unselectable:"on"}:{}),u=g.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{});this.timePicker._compareTime(d,l,!0);){p=this._localizeTime(l,n);var p=g.buildTag("td.e-hour e-state-default",p);this.model.timeDrillDown.showMeridian&&p.addClass("e-hour-"+o),this._isIE8&&p.attr("unselectable","on"),u.append(p),s<=++r&&(r=0,c.append(u),u=g.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),l=this.timePicker._createObject(l).getTime()+t}e.append(c),this.model.timeDrillDown.showMeridian&&(l=this.timePicker._createObject("12:00:00 PM"),d=this.timePicker._createObject("11:59:59 PM"))}g.buildTag("div.e-footer").append(g.buildTag("span.e-footer-icon")).append(g.buildTag("span.e-footer-text")).appendTo(this._sfTimeHour),m(".e-footer-text",this._sfTimeHour).html(this._localizedLabels.buttonText.timeNow),m(".e-hours-headertext",this._sfTimeHour).text(g.format(this.datePicker.model.value,"dd MMM yyyy")),this._on(this._sfTimeHour.find(".e-hour"),"click",m.proxy(this._hourNavHandler,this)),this._on(m(".e-next",this._sfTimeHour),"click",m.proxy(this._prevNextHourHandler,this)),this._on(m(".e-prev",this._sfTimeHour),"click",m.proxy(this._prevNextHourHandler,this)),this._on(m(".e-footer",this._sfTimeHour),"click",this._todayBtn),m(".e-hours-headertext",this._sfTimeHour).on("click",m.proxy(this._forwardNavHandler,this)),this._sfTimeHour.hide()},_localizeTime:function(e,t){return m.trim(g.format(this.timePicker._createObject(e),t,this.model.locale))},_renderMinsPopup:function(){this._sfTimeMins=g.buildTag("div.e-timepicker e-popup e-widget "+this.model.cssClass+" e-time-minitues ","",{},{id:this._id?"e-time-minitues-"+this._id:""}).attr({"aria-hidden":"true"}).attr(this._isIE8?{unselectable:"on"}:{}),g.isTouchDevice()||this._sfTimeMins.addClass("e-ntouch"),this._drillDownContainer.append(this._sfTimeMins),g.buildTag("div.e-header").attr(this._isIE8?{unselectable:"on"}:{}).append(g.buildTag("span.e-prev").append(g.buildTag("a.e-icon e-arrow-sans-left").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(g.buildTag("span.e-text").append(g.buildTag("span.e-minitues-headertext").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).append(g.buildTag("span.e-next").append(g.buildTag("a.e-icon e-arrow-sans-right").attr({role:"button"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins),g.buildTag("div.e-mins-header").attr(this._isIE8?{unselectable:"on"}:{}).append(g.buildTag("span.e-text").append(g.buildTag("span.e-minitues-meridiantxt").text("AM").attr({"aria-atomic":"true","aria-live":"assertive",role:"heading"}).attr(this._isIE8?{unselectable:"on"}:{}))).appendTo(this._sfTimeMins);var e=g.buildTag("table.e-dp-viewmins","",{}).data("e-table","data").attr({role:"grid"}).attr(this._isIE8?{unselectable:"on"}:{});this._sfTimeMins.append(e);var t=g.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{});if(this._intervall<1)return!1;for(var i=6e4*this._interval,s=this.timePicker._createObject("12:00:00 AM"),n=this.timePicker._createObject("11:59:59 PM"),a=g.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),r=0;this.timePicker._compareTime(n,s,!0);){o=this._localizeTime(s,"HH:00");var o=g.buildTag("td.e-mins e-state-default",o);this._isIE8&&o.attr("unselectable","on"),a.append(o),4<=++r&&(r=0,t.append(a),a=g.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{})),s=this.timePicker._createObject(s).getTime()+i}e.append(t),m(".e-minitues-headertext",this._sfTimeMins).text(m(".e-hours-headertext",this._sfTimeHour).text()),g.buildTag("div.e-footer").append(g.buildTag("span.e-footer-icon")).append(g.buildTag("span.e-footer-text")).appendTo(this._sfTimeMins),m(".e-footer-text",this._sfTimeMins).html(this._localizedLabels.buttonText.timeNow),m(".e-minitues-headertext",this._sfTimeMins).text(g.format(this.datePicker.model.value,"dd MMM yyyy")),this.model.timeDrillDown.showMeridian||m(".e-mins-header",this._sfTimeMins).css("display","none"),this._on(e.find(".e-mins"),"click",m.proxy(this._minsNavHandler,this)),this._on(m(".e-next",this._sfTimeMins),"click",m.proxy(this._prevNextMinsHandler,this)),this._on(m(".e-prev",this._sfTimeMins),"click",m.proxy(this._prevNextMinsHandler,this)),this._on(m(".e-footer",this._sfTimeMins),"click",this._todayBtn),m(".e-minitues-headertext",this._sfTimeMins).on("click",m.proxy(this._forwardNavHandler,this)),this._sfTimeMins.hide()},_todayBtn:function(){this._nowClick(),this._hideResult()},_hourNavHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;if(e&&m(e.target).hasClass("e-disable"))return!1;e&&e.type&&e.preventDefault(),m("table",this._sfTimeHour).find("td").removeClass("e-active"),m(e.target).addClass("e-active"),this._sfTimeHour.hide(),this._sfTimeMins.show(),this._addFocus(this._sfTimeMins),t=this.model.timeDrillDown.showMeridian?(t=m(e.target).hasClass("e-hour-am")?"AM":"PM",m(e.target).text()+":00 "+t):m(e.target).text(),this._generateMins(t);var e=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),t=m.trim(g.format(this.timePicker._createObject(e),"HH:mm",this.model.locale)),e=m.trim(g.format(this.timePicker._createObject(e),"HH:00",this.model.locale)),e=(this.timePicker._parse(t)-this.timePicker._parse(e))/(6e4*this.model.timeDrillDown.interval),e=Math.ceil(e);this._hoverMins=this._setFocusByIndex("mins",e,this._sfTimeMins)},_minsNavHandler:function(e){return!(this.model.readOnly||!this.model.enabled)&&((!e||!m(e.target).hasClass("e-disable"))&&(e&&e.type&&e.preventDefault(),m("table",this._sfTimeMins).find("td").removeClass("e-active").removeClass("e-state-hover"),m(e.target).addClass("e-active"),t=this.model.timeDrillDown.showMeridian?(t=m(e.target).text()+" "+g.format(this._datetimeValue,"tt","en-US"),this.timePicker._localizeTime(t)):m(e.target).text(),this.timePicker.option("value",t),this.datePicker.option("value",this._datetimeValue),this._datetimeValue=new Date(this.model.value.toString()),this._updateInput(),void(this.model.timeDrillDown.autoClose&&this._hideResult(e))));var t},_generateMins:function(e){var t=m("table",this._sfTimeMins);t.empty(),this.model.timeDrillDown.showMeridian?m(".e-mins-header",this._sfTimeMins).show():m(".e-mins-header",this._sfTimeMins).hide();var i=this.model.timeDrillDown.showMeridian?"hh:mm":"HH:mm";m(".e-minitues-headertext",this._sfTimeMins).text(m(".e-hours-headertext",this._sfTimeHour).text());var s,n,a=g.buildTag("tbody.e-timepicker-mins").attr(this._isIE8?{unselectable:"on"}:{}),r=0,o=6e4*this.model.timeDrillDown.interval,l=this.timePicker._createObject(e);for(this._datetimeValue.setHours(l.getHours()),n=this.timePicker._createObject(l).getTime()+354e4,s=g.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),a.append(s);this.timePicker._compareTime(n,l,!0);){4<=r&&(r=0,s=g.buildTag("tr","").attr(this._isIE8?{unselectable:"on"}:{}),a.append(s)),d=this._localizeTime(l,i);var d=g.buildTag("td.e-mins e-state-default",d);this._isIE8&&d.attr("unselectable","on"),s.append(d),r++,l=this.timePicker._createObject(l).getTime()+o}t.append(a),m(".e-mins-header",this._sfTimeMins).find(".e-minitues-meridiantxt").text(g.format(this._datetimeValue,"tt",this.model.locale)),this._disableRange("mins"),this._on(t.find(".e-mins"),"click",m.proxy(this._minsNavHandler,this))},_prevNextHourHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e.preventDefault();e=!!(m(e.target).is("a")?m(e.target.parentNode):m(e.target)).hasClass("e-prev");this._processNextPrev(e,this._sfTimeHour)},_prevNextMinsHandler:function(e){if(this.model.readOnly||!this.model.enabled)return!1;e.preventDefault();e=!!(m(e.target).is("a")?m(e.target.parentNode):m(e.target)).hasClass("e-prev");this._processNextPrev(e,this._sfTimeMins)},_processNextPrev:function(e,t){if(e&&t.find(".e-arrow-sans-left").hasClass("e-disable"))return!1;if(!e&&t.find(".e-arrow-sans-right").hasClass("e-disable"))return!1;switch(m("table",t).get(0).className){case"e-dp-viewhours":i=e?-1:1,this._datetimeValue.setDate(this._datetimeValue.getDate()+i),this._disableRange("hour"),this._hoverHour=this._setFocusByIndex("hour",this._hoverHour,this._sfTimeHour),m(".e-hours-headertext",this._sfTimeHour).text(g.format(this._datetimeValue,"dd MMM yyyy")),m(".e-minitues-headertext",this._sfTimeMins).text(g.format(this._datetimeValue,"dd MMM yyyy"));break;case"e-dp-viewmins":i=e?-1:1,this._datetimeValue.setHours(this._datetimeValue.getHours()+i),this._generateMins(m.trim(g.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)));var e=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),i=m.trim(g.format(this.timePicker._createObject(e),"HH:mm",this.model.locale)),e=m.trim(g.format(this.timePicker._createObject(e),"HH:00",this.model.locale)),e=(this.timePicker._parse(i)-this.timePicker._parse(e))/(6e4*this.model.timeDrillDown.interval),e=Math.ceil(e);this._disableRange("mins"),this._hoverMins=this._setFocusByIndex("mins",e,this._sfTimeMins),m(".e-hours-headertext",this._sfTimeHour).text(g.format(this._datetimeValue,"dd MMM yyyy")),m(".e-minitues-headertext",this._sfTimeMins).text(g.format(this._datetimeValue,"dd MMM yyyy"))}},_forwardNavHandler:function(e,t){if(this.model.readOnly||!this.model.enabled)return!1;switch(e&&e.preventDefault(),(e?m(e.currentTarget):t.find(".e-text>span")).get(0).className){case"e-hours-headertext":this._sfTimeHour.css("display","none"),this._dateContainer.css("display","block"),this._addFocus(this._dateContainer.find(".e-datepicker"));break;case"e-minitues-headertext":this._sfTimeMins.css("display","none"),this._disableRange("hour");e=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),t=m.trim(g.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),e=(this.timePicker._parse(t)-this.timePicker._parse(e))/(6e4*this._interval),e=Math.floor(e);this._hoverHour=this._setFocusByIndex("hour",e,this._sfTimeHour),m(".e-hours-headertext",this._sfTimeHour).text(g.format(this._datetimeValue,"dd MMM yyyy")),m(".e-minitues-headertext",this._sfTimeMins).text(g.format(this._datetimeValue,"dd MMM yyyy")),this._sfTimeHour.css("display","block"),this._addFocus(this._sfTimeHour)}},_renderDateControl:function(){var e=g.buildTag("input#"+this.element[0].id+"_date","",{},{type:"text"});this.popup.append(e),e.ejDatePicker({height:"0px",width:"0px",displayInline:!0,showDateIcon:!1,showFooter:!!this.model.timeDrillDown.enabled&&this.model.timeDrillDown.showFooter,enableStrictMode:!0,buttonText:this._localizedLabels.buttonText.today,minDate:this._stringToObject(this.model.minDateTime),maxDate:this._stringToObject(this.model.maxDateTime),dayHeaderFormat:this.model.dayHeaderFormat,startLevel:this.model.startLevel,depthLevel:this.model.depthLevel,startDay:this.model.startDay,stepMonths:this.model.stepMonths,showOtherMonths:this.model.showOtherMonths,specialDates:this.model.specialDates,highlightWeekend:this.model.highlightWeekend,headerFormat:this.model.headerFormat,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale}),g.isNullOrUndefined(this.model.value)||(this._datetimeValue=new Date(this.model.value.toString())),this.datePicker=e.data("ejDatePicker"),this._datetimeValue=new Date(this.datePicker._dateValue.toString()),this.model.startDay=this.datePicker.model.startDay,this.datePicker._getInternalEvents=!0,this.datePicker._dt_drilldown=!0,this.datePicker.popup.css({position:"static",display:"block"})},_renderTimeControl:function(){var e=g.buildTag("input#"+this.element[0].id+"_time","",{},{type:"text"});this.popup.append(e);var t=this.model.timePopupWidth,t="string"==typeof t&&-1!=t.indexOf("%")||"string"==typeof t?0<parseInt(t)?t:this.model.timePopupWidth=105:0<t?t:this.model.timePopupWidth=105;e.ejTimePicker({height:"0px",width:"0px",interval:this.model.interval,timeFormat:this.model.timeDisplayFormat,popupWidth:t,enabled:this.model.enabled,enableRTL:this.model.enableRTL,showRoundedCorner:this.model.showRoundedCorner,readOnly:this.model.readOnly,cssClass:this.model.cssClass,locale:this.model.locale,disableTimeRanges:this.model.disableTimeRanges}),this.timePicker=e.data("ejTimePicker"),this.timePicker._renderDropdown(),this.timePicker.popup.css({position:"static",display:"block"}),this.timePicker._getInternalEvents=!0,this.timePicker.showDropdown=!0,this.timePicker._dateTimeInternal=!0;this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime},_updateTimeHeight:function(){var e=this.popup.find(".e-timecontainer .e-header").is(":visible")?this.datePicker.popup.height()-this.popup.find(".e-header").height():this.datePicker.popup.height(),e=this.popup.hasClass("e-dt-responsive")?"98px":e;this.timePicker.option("popupHeight",e)},_bindOperations:function(){var t=this;this.datePicker.option("layoutChange",function(){t._updateTimeHeight()}),this.datePicker.option("outOfRange",function(){t.isValidState=!1}),this.timePicker.option("outOfRange",function(){t.isValidState=!1}),this.datePicker.option("change",function(e){t._refreshTimes(e)}),this.datePicker.option("select",function(e){t._updateInput(e)}),this.datePicker.option("dt_drilldown",function(e){t.model.timeDrillDown.enabled&&(t._updateInput(e),t._switchToDrilDown(e))}),this.timePicker.option("select",function(){t._updateInput()})},_switchToDrilDown:function(e){this._dateContainer.hide(),this._sfTimeHour.show(),this._addFocus(this._sfTimeHour);var t=new Date(this.model.value.toString());this._datetimeValue=new Date(t.setHours(this._datetimeValue.getHours(),this._datetimeValue.getMinutes(),this._datetimeValue.getSeconds(),this._datetimeValue.getMilliseconds())),this._disableRange("hour");var i=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),t=m.trim(g.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),i=(this.timePicker._parse(t)-this.timePicker._parse(i))/(6e4*this._interval),i=Math.floor(i);this._hoverHour=this._setFocusByIndex("hour",i,this._sfTimeHour),m(".e-hours-headertext",this._sfTimeHour).text(g.format(this._datetimeValue,"dd MMM yyyy")),m(".e-minitues-headertext",this._sfTimeMins).text(g.format(this._datetimeValue,"dd MMM yyyy"))},_disableRange:function(e){var t="hour"==e?this._interval:this.model.timeDrillDown.interval,i="hour"==e?this._sfTimeHour:this._sfTimeMins,s="hour"==e?"e-hide-hour e-disable":"e-hide-mins e-disable";i.find("tbody tr td.e-"+e).removeClass(s),i.find(".e-arrow-sans-left").removeClass("e-disable"),i.find(".e-arrow-sans-right").removeClass("e-disable");var n="hour"==e?this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"):this._localizeTime(m.trim(g.format(this.timePicker._createObject(this._datetimeValue),"HH:00",this.model.locale)),"HH:00");if(this._compareDate(this.model.minDateTime,this._datetimeValue)){if("mins"==e&&this.model.minDateTime.getHours()!==this._datetimeValue.getHours())return!1;var a=m.trim(g.format(this.timePicker._createObject(this.model.minDateTime),"HH:mm",this.model.locale)),r=(this.timePicker._parse(a)-this.timePicker._parse(n))/(6e4*t);r="hour"==e?Math.floor(r):Math.ceil(r);for(var o=0;o<r;o++)l=i.find("tbody tr td.e-"+e)[o],m(l).addClass(s);i.find(".e-arrow-sans-left").addClass("e-disable")}if(this._compareDate(this.model.maxDateTime,this._datetimeValue)){if("mins"==e&&this.model.maxDateTime.getHours()!==this._datetimeValue.getHours())return!1;a=m.trim(g.format(this.timePicker._createObject(this.model.maxDateTime),"HH:mm",this.model.locale)),r=(this.timePicker._parse(a)-this.timePicker._parse(n))/(6e4*t);r=Math.floor(r)+1;for(var l,d=i.find("tbody tr td.e-"+e).length,o=r;o<d;o++)l=i.find("tbody tr td.e-"+e)[o],m(l).addClass(s);i.find(".e-arrow-sans-right").addClass("e-disable")}},_setFocusByName:function(e,i,t){var s,n,a=t.find("tbody tr td.e-"+e);return m(a).each(function(e,t){t.innerHTML==i&&(s=e)}),n=(n=a[s])||a.last(),t.find("table td").removeClass("e-state-hover").removeClass("e-active"),m(n).hasClass("e-hide-"+e)||m(n).addClass("e-state-hover"),this._setActiveState(e,t),s},_setFocusByIndex:function(e,t,i){var s=i.find("tbody tr td.e-"+e),n=s[t];return n=n||s.last(),i.find("table td").removeClass("e-state-hover").removeClass("e-active"),m(n).hasClass("e-hide-"+e)||m(n).addClass("e-state-hover"),this._setActiveState(e,i),t},_setActiveState:function(e,t){var i,s,n=t.find("tbody tr td.e-"+e),a=-1;switch(e){case"hour":this._compareDate(this.model.value,this._datetimeValue)&&(s=this._localizeTime(this.timePicker._createObject("12:00:00 AM"),"HH:00"),i=m.trim(g.format(this.timePicker._createObject(this.model.value),"HH:00",this.model.locale)),a=(this.timePicker._parse(i)-this.timePicker._parse(s))/(6e4*this._interval),a=Math.floor(a));break;case"mins":this._compareDate(this.model.value,this._datetimeValue)&&this.model.value.getHours()===this._datetimeValue.getHours()&&(s=new Date(this._datetimeValue.toString()).setMinutes(this.model.value.getMinutes()),i=m.trim(g.format(this.timePicker._createObject(s),"HH:mm",this.model.locale)),s=m.trim(g.format(this.timePicker._createObject(s),"HH:00",this.model.locale)),a=(this.timePicker._parse(i)-this.timePicker._parse(s))/(6e4*this.model.timeDrillDown.interval),a=Math.ceil(a))}(a=n[a])&&(t.find("table td").removeClass("e-active"),m(a).removeClass("e-state-hover").addClass("e-active"))},_compareDate:function(e,t){return+new Date(e.toString()).setHours(0,0,0,0)==+new Date(t.toString()).setHours(0,0,0,0)},_updateInput:function(e){var t=+new Date<+this.model.minDateTime||+new Date>+this.model.maxDateTime?this.model.minDateTime:(new Date).setHours(0,0,0,0),i=this._getDate()||new Date(t),t=this._getTime()||this.timePicker._createObject(t);this.model.value=new Date(i.getFullYear(),i.getMonth(),i.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()),this._updateDateTime(),this._raiseChangeEvent(),this._updateModel(e,!0),e&&(e.cancel=!0)},_updateDateTime:function(){this.isValidState=!0;var e=this._objectToString(this.model.value);this.element.val(e),this._removeWatermark()},_refreshTimes:function(e){var t,i=this._getDateObj(e.value,this.datePicker.model.dateFormat);if(!i)return!1;this.isValidState=!0,this._compare(i,this._setEmptyTime(this.model.minDateTime))?(t=this._getFormat(this.model.minDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("minTime",t),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("minTime",this._defaultMinVal()),this._compare(i,this._setEmptyTime(this.model.maxDateTime))?(i=this._getFormat(this.model.maxDateTime,this.timePicker.model.timeFormat),this._getTime(),this.timePicker.option("maxTime",i),this.model.enableStrictMode||this._updateInput()):this.timePicker.option("maxTime",this._defaultMaxVal()),this.timePicker._changeActiveEle(),g.isNullOrUndefined(this.model.disableDateTimeRanges)||this._setDisabledTimeRanges(e)},_setDisabledTimeRanges:function(e){e=e?e.value:this._setEmptyTime(this.model.value);this._between=[],this._initDisableTimeRanges(e),this._datesDisabled||(this._disableBetweenDates(),this.datePicker.option("blackoutDates",this._between))},_defaultMinVal:function(){var e=(new Date).setHours(0,0,0,0);return g.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_defaultMaxVal:function(){var e=(new Date).setHours(23,59,59,59);return g.format(this.timePicker._createObject(e),this.timePicker.model.timeFormat,this.timePicker.model.locale)},_updateValues:function(){var e=this.model.enableStrictMode&&null==this.model.value?this.element.val():this.model.value;null!=this.model.value&&(this.datePicker.option("value",this.model.value),this.timePicker.option("value",this.model.value)),this._setValue(e),this._validateMinMax(),this._preVal=this.element.val(),this._checkErrorClass()},_specificFormat:function(){var e=g.globalize._getDateParseRegExp(g.globalize.findCulture(this.model.locale).calendar,this.model.dateTimeFormat);return-1<m.inArray("dddd",e.groups)||-1<m.inArray("ddd",e.groups)},_changeEditable:function(e){var t=e?"_on":"_off";this.element.is(":input")&&(e?(this.model.readOnly||this.element.attr("readonly",!1),this.element.off("mousedown",m.proxy(this._showhidePopup,this))):(this.model.readOnly||this.element.attr("readonly","readonly"),this.element.on("mousedown",m.proxy(this._showhidePopup,this))),this[t](this.element,"blur",this._targetBlur),this[t](this.element,"focus",this._targetFocus),this[t](this.element,"keydown",this._keyDownOnInput)),this._change("allowEdit",e)},_setValue:function(e){return!e||"object"==typeof JSON&&"{}"===JSON.stringify(e)?(this.element.val(""),this.model.value=null,this.isValidState=!0,this.wrapper.removeClass("e-valid")):"string"==typeof e?this._extISORegex.exec(e)||this._basicISORegex.exec(e)?this._checkObject(this._dateFromISO(e)):(this.element.val(e),this._updateModel(),this._validateMinMax(),this._checkStrictMode(),this.wrapper.addClass("e-valid")):e instanceof Date&&this._isValidDate(e)&&this._checkObject(e),g.isNullOrUndefined(this.model.disableDateTimeRanges)||this._validateDisableRanges(),this._checkErrorClass(),this.model.value},_checkObject:function(e){e instanceof Date&&this._isValidDate(e)&&(this.model.value=e,this._updateDateTime(),this._validateMinMax(),this._checkStrictMode())},_dateFromISO:function(e){var t=this._extISORegex.exec(e)||this._basicISORegex.exec(e),i="",s="",n="";if(t){for(var a=0;a<this._dates.length;a++)if(this._dates[a][1].exec(t[1])){i=this._dates[a][0];break}if(t[3])for(var r=0;r<this._times.length;r++)if(this._times[r][1].exec(t[3])){s=(t[2]||" ")+this._times[r][0];break}t[4]&&this._zeroRegex.exec(t[4])&&(n="Z");for(var o=(i+s+n).match(this._tokens),l=[],d=0;d<o.length;d++){var h=o[d],c=this._checkLiteral(o[d]),h=this._numberRegex[c?o[d].toLowerCase():h.length]||new RegExp("^\\d{1,"+h.length+"}");(h=e.match(h))&&(0<=e.substr(0,e.indexOf(h))&&!c&&(0<=o[d].indexOf("M")?l.push(parseInt(h[0])-1):l.push(parseInt(h[0]))),e=e.slice(e.indexOf(h[0])+h[0].length))}return"Z"==t[4]?new Date(Date.UTC.apply(null,l)):new Date(l[0],l[1],l[2],l[3],l[4],l[5])}return new Date(e+"")},_checkLiteral:function(e){e=e.toLowerCase();return"t"==e||"z"==e||":"==e||"-"==e},_validateValue:function(e){var t=g.parseDate(e,this.model.dateTimeFormat,this.model.locale),e=null;this.timePicker!=s&&(e=this._getFormat(t,this.timePicker.model.timeFormat)),!t||t<this.model.minDateTime||t>this.model.maxDateTime||!g.isNullOrUndefined(this.timePicker)&&this.timePicker._ensureTimeRange(e)?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1):(this._change("value",this.model.value),this.isValidState=!0)},_validateMinMax:function(){var e=this.model.value?this._stringToObject(this.model.value):null,t=this.model.minDateTime?this._stringToObject(this.model.minDateTime):this.defaults.minDateTime,i=this.model.maxDateTime?this._stringToObject(this.model.maxDateTime):this.defaults.maxDateTime;if(!e||!t||!i)return!1;i<t&&(this.model.minDateTime=this.model.maxDateTime),e<t&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.popup&&(this.datePicker.option("minDate",this._getFormat(t,this.datePicker.model.dateFormat)),this.timePicker.option("minTime",this._getFormat(t,this.timePicker.model.timeFormat))),this.isValidState=!1):(this._setValue(t),this.isValidState=!0)),i<e&&(this.model.enableStrictMode?this.model.enableStrictMode&&(this.popup&&(this.datePicker.option("maxDate",this._getFormat(i,this.datePicker.model.dateFormat)),this.timePicker.option("maxTime",this._getFormat(i,this.timePicker.model.timeFormat))),this.isValidState=!1):(this._setValue(i),this.isValidState=!0)),e<t||i<e||(this.isValidState=!0)},_checkProperties:function(){this.model.readOnly&&this._readOnly(!0),this.model.showRoundedCorner&&this._setRoundedCorner(!0),this.model.enableRTL&&this._setRtl(!0),this.model.enabled&&this._enabled(!0),this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&this._enabled(!0):this._enabled(!1),this.model.name=this._options.name?this.model.name:this.element.attr("name")?this.element.attr("name"):this.element[0].id,this.element.attr("name",this.model.name),this._checkStrictMode(),this._checkErrorClass(),this._setWaterMark()},_checkStrictMode:function(){this.model.enableStrictMode?this.model.enableStrictMode&&(this.isValidState||(this.model.value=null,this.isValidState=!1)):this.isValidState||(this.model.value<this.model.minDateTime?(this.element.val(this._objectToString(this.model.minDateTime)),this.model.value=this.model.minDateTime):this.model.value>this.model.maxDateTime?(this.element.val(this._objectToString(this.model.maxDateTime)),this.model.value=this.model.maxDateTime):(this.model.value="",this.element.val("")),this.isValidState=!0)},_targetFocus:function(e){e.preventDefault(),this.isFocused=!0,this.wrapper.addClass("e-focus"),this.wrapper.removeClass("e-error"),this._isSupport||this._hiddenInput.css("display","none"),this._prevDateTimeVal=this.element.val(),this.model.showPopupButton||this.model.readOnly||this._showResult(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick),!this.model.showPopupButton&&this.model.readOnly&&this._off(this.element,"click",this._elementClick),this._trigger("focusIn",{value:this.model.value}),this.wrapper.addClass("e-valid")},_targetBlur:function(){this.isFocused=!1,this.wrapper.removeClass("e-focus"),this.model.showPopupButton||this._hideResult();var e=g.parseDate(this.element.val(),this.model.dateTimeFormat,this.model.locale);e&&!this.model.enableStrictMode&&(e<this.model.minDateTime||e>this.model.maxDateTime)&&(e=e<this.model.minDateTime?this.model.minDateTime:this.model.maxDateTime,this.element.val(this._objectToString(e))),null!=g.parseDate(this.element.val(),this.model.dateTimeFormat,this.model.locale)||this.model.enableStrictMode||(null==this._prevDateTimeVal||""==this.element.val()?this.element.val(""):this.element.val(this._preVal)),this._valueChange(),this.model.enableStrictMode?""!=this.element.val()&&this._validateValue(this.element.val()):this.isValidState?this._prevDateTimeVal=this.element.val():(this.element.val(this._prevDateTimeVal),this._preVal=this._prevDateTimeVal,this.model.value=this._stringToObject(this._prevDateTimeVal),this.isValidState=!0),this._isSupport||""!=this.element.val()||this._hiddenInput.css("display","block"),this._checkErrorClass(),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this._trigger("focusOut",{value:this.model.value}),g.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid"),this._previousDateUpdate()},_previousDateUpdate:function(){return+g.parseDate(this._prevDateTime,this.model.dateTimeFormat)!=+g.parseDate(this.element.val(),this.model.dateTimeFormat)&&(this._preValString=this._prevDateTime,this._prevDateTime=this.element.val()),this._preValString},_elementClick:function(){this.isPopupOpen||this._showResult()},_keyDownOnInput:function(e){switch(e.keyCode){case 40:e.altKey&&this._showhidePopup();break;case 37:case 39:this.model.timeDrillDown.enabled||e.altKey&&this.isPopupOpen&&(e.preventDefault(),this._addPrevNextFocus(37==e.keyCode));break;case 27:e.preventDefault();case 9:this._hideResult();break;case 13:if(null!=g.parseDate(this.element.val(),this.model.dateTimeFormat)||this.model.enableStrictMode||(null==this._prevDateTimeVal||""==this.element.val()?this.element.val(""):this.element.val(this._preVal)),this._valueChange(),!this.model.timeDrillDown.enabled){this._valueChange(),this.model.enableStrictMode&&this._checkErrorClass();break}}},_addFocus:function(e){e.hasClass("e-focus")||(this._removeFocus(),e.addClass("e-focus"),e.hasClass("e-datepicker e-popup")?m(document).on("keydown",m.proxy(this.datePicker._keyboardNavigation,this.datePicker)):e.hasClass("e-timecontainer")?m(document).on("keydown",m.proxy(this.timePicker._keyDownOnInput,this.timePicker)):e.hasClass("e-time-hours")?m(document).on("keydown",m.proxy(this._keyDownOnHours,this)):e.hasClass("e-time-minitues")?m(document).on("keydown",m.proxy(this._keyDownOnMinutes,this)):e.hasClass("e-dt-button")&&m(document).on("keydown",m.proxy(this._buttonClick,this)))},_removeFocus:function(){var e=this._getFocusedElement();0<e.length&&(e.removeClass("e-focus"),e.hasClass("e-datepicker e-popup")?m(document).off("keydown",m.proxy(this.datePicker._keyboardNavigation,this.datePicker)):e.hasClass("e-timecontainer")?m(document).off("keydown",m.proxy(this.timePicker._keyDownOnInput,this.timePicker)):e.hasClass("e-time-hours")?m(document).off("keydown",m.proxy(this._keyDownOnHours,this)):e.hasClass("e-time-minitues")?m(document).off("keydown",m.proxy(this._keyDownOnMinutes,this)):e.hasClass("e-dt-button")&&m(document).off("keydown",m.proxy(this._buttonClick,this)))},_addPrevNextFocus:function(e){var t,i=this._getFocusedElement();0<i.length?i.hasClass("e-datepicker e-popup")?t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-timecontainer"):i.hasClass("e-timecontainer")?t=e?this.popup.find(".e-datecontainer >.e-datepicker.e-popup"):this.popup.find(".e-dt-today"):i.hasClass("e-dt-today")?t=e?this.popup.find(".e-timecontainer"):this.popup.find(".e-dt-now"):i.hasClass("e-dt-now")?t=e?this.popup.find(".e-dt-today"):this.popup.find(".e-dt-done"):i.hasClass("e-dt-done")&&(t=e?this.popup.find(".e-dt-now"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup")):t=e?this.popup.find(".e-dt-done"):this.popup.find(".e-datecontainer >.e-datepicker.e-popup"),this._addFocus(t)},_getFocusedElement:function(){return this.popup.children("div").find("div.e-focus")},_keyDownOnHours:function(e){var t,i,s;37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode||(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeHour.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeHour.find("tbody tr td.e-state-hover").parent().index(),-1!=t.col?t.col=t.col+1:t.col=this._sfTimeHour.find("tbody tr td.e-active").index()+1,-1!=t.row?(t.row=t.row+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-state-hover").hasClass("e-hour-pm")&&(t.row=t.row+2)):(t.row=this._sfTimeHour.find("tbody tr td.e-active").parent().index()+1,this.model.timeDrillDown.showMeridian&&this._sfTimeHour.find("tbody tr td.e-active").hasClass("e-hour-pm")&&(t.row=t.row+2)),this._sfTimeHour.find("table")[0].className,i=this._sfTimeHour.find("tbody.e-timepicker-hours tr").length,s=this.model.timeDrillDown.showMeridian?6:4,s=this._changeRowCol(t,e.keyCode,i,s,"hours",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeHour.find("tbody.e-timepicker-hours tr td").index(s)),e.ctrlKey||(this._sfTimeHour.find("table td").removeClass("e-state-hover"),s.addClass("e-state-hover")))},_changeRowCol:function(e,t,i,s,n,a){var r,o,l,d={parent:null,child:null};switch(n){case"hours":r="tbody.e-timepicker-hours tr td.e-hour",d.parent=".e-timepicker-hours",d.child=".e-hour",l=".e-hide-hour",o=this._sfTimeHour;break;case"mins":r="tbody.e-timepicker-mins tr td.e-mins",d.parent=".e-timepicker-mins",d.child=".e-mins",l=".e-hide-mins",s=(o=this._sfTimeMins).find("tbody"+d.parent+" tr:nth-child("+e.row+") td"+d.child).length}if(e.row<=0&&e.col<=0)return o.find(r+":not(.e-disable):first");switch(t){case 36:return o.find(r+":not(.e-disable):first");case 35:return o.find(r+":not(.e-disable):last");case 38:if(a)this._forwardNavHandler(null,o);else{if(!(1<e.row))return this._processNextPrev(!0,o),h=o.find(r+":nth-child("+e.col+"):last");--e.row}if((h=this._getCell(e,d,o).not(l)).length<=0){if(null!==(h=this._findVisible(e,d,"up",o)))return h;this._processNextPrev(!0,o),h=o.find(r+":nth-child("+e.col+"):last")}return h;case 37:if(a)return this._processNextPrev(!0,o),o.find("tbody tr td.e-state-hover");if(1<e.col)--e.col;else{if(!(1<e.row))return this._processNextPrev(!0,o),h=o.find(r+":not(.e-disable):last");e={row:e.row-1,col:s},"mins"==n&&(e.col=s=o.find("tbody"+d.parent+" tr:nth-child("+e.row+") td"+d.child).length)}if((h=this._getCell(e,d,o).not(l)).length<=0){if(null!==(h=this._findVisible(e,d,"left",o)))return h;this._processNextPrev(!0,o),h=o.find(r+":not(.e-disable):last")}return h;case 39:if(a)return this._processNextPrev(!1,o),o.find("tbody tr td.e-state-hover");if(e.col<s)e.col+=1;else{if(!(e.row<i))return this._processNextPrev(!1,o),h=o.find(r+":not(.e-disable):first");e={row:e.row+1,col:1}}if((h=this._getCell(e,d,o).not(l)).length<=0){if(null!==(h=this._findVisible(e,d,"right",o)))return h;this._processNextPrev(!1,o),h=o.find(r+":not(.e-disable):first")}return h;case 40:if(!a){if(!(e.row<i))return this._processNextPrev(!1,o),h=o.find(r+":nth-child("+e.col+"):first");if(e.row+=1,(h=this._getCell(e,d,o).not(l)).length<=0){if(null!==(h=this._findVisible(e,d,"down",o)))return h;this._processNextPrev(!1,o),h=o.find(r+":nth-child("+e.col+"):first")}return h}case 13:var h=this._getCell(e,d,o),h=(m(h)[0],{type:null,target:h});"hours"==n&&this._hourNavHandler(h),"mins"==n&&this._minsNavHandler(h)}return this._getCell(e,d,o).not(l)},_getCell:function(e,t,i){var s=e.row;this.model.timeDrillDown.showMeridian&&2<e.row&&i.hasClass("e-time-hours")&&(s-=2);t=i.find("tbody"+t.parent+" tr:nth-child("+s+") td"+t.child+":nth-child("+e.col+")");return this.model.timeDrillDown.showMeridian&&0<t.length&&i.hasClass("e-time-hours")&&(t=e.row<=2?m(t[0]):m(t[1])),t},_findVisible:function(e,t,i,s){for(var n=e.col,a=e.row,r=t.child.slice(1,t.child.length),o=0;0<=o;o++){var l=this._getCell({row:a,col:n},t,s);if(l.length<=0)return null;if(l.hasClass("e-disable")||!l.is(":visible")){if("right"==i||"left"==i?"right"==i?n++:n--:"down"==i?a++:a--,a<=0||a>s.find("tbody"+t.parent+" tr").length)return null;if(n>s.find("tbody"+t.parent+" tr:nth-child("+a+") td").length&&(a++,n=1),n<=0&&(a--,n=s.find("tbody"+t.parent+" tr:nth-child("+a+") td").length),a<=0||a>s.find("tbody"+t.parent+" tr").length)return null}else if(l.hasClass(r))return e.col=n,e.row=a,l=this._getCell(e,t,s)}},_keyDownOnMinutes:function(e){var t,i;37!=e.keyCode&&38!=e.keyCode&&39!=e.keyCode&&40!=e.keyCode&&13!=e.keyCode&&36!=e.keyCode&&35!=e.keyCode||(e.preventDefault&&e.preventDefault(),(t={row:null,col:null}).col=this._sfTimeMins.find("tbody tr td.e-state-hover").index(),t.row=this._sfTimeMins.find("tbody tr td.e-state-hover").parent().index(),t.col=-1!=t.col?t.col+1:this._sfTimeMins.find("tbody tr td.e-active").index()+1,t.row=-1!=t.row?t.row+1:this._sfTimeMins.find("tbody tr td.e-active").parent().index()+1,this._sfTimeMins.find("table")[0].className,i=this._sfTimeMins.find("tbody.e-timepicker-mins tr").length,i=this._changeRowCol(t,e.keyCode,i,4,"mins",e.ctrlKey),e.ctrlKey||(this._hoverHour=this._sfTimeMins.find("tbody.e-timepicker-mins tr td").index(i)),e.ctrlKey||(this._sfTimeMins.find("table td").removeClass("e-state-hover"),i.addClass("e-state-hover")))},_valueChange:function(e){this.model.enableStrictMode?this.model.enableStrictMode&&(this._preVal!=this.element.val()||this.model.value<this.model.minDateTime||this.model.value>this.model.maxDateTime)&&(this._updateModel(),this._raiseChangeEvent(e)):(this._preVal!=this.element.val()&&(this._preVal=this.element.val(),this._updateModel(),this._validateMinMax(),this._raiseChangeEvent(e)),this._setWaterMark())},_updateModel:function(e,t){var i;this._stopRefresh?this._stopRefresh=!1:""==(i=this.element.val())?(this.model.value=null,this._change("value",this.model.value),this.isValidState=!0):(i=e!=s&&"select"==e.type||this._prevDateTimeVal==this.element.val()?this.model.value:g.parseDate(i,this.model.dateTimeFormat,this.model.locale))?(this.model.value=i,this.isValidState=!0,this._refreshPopup(t),this._specificFormat()&&this._prevDateTimeVal!=this.element.val()&&this.element.val(this._objectToString(this.model.value))):(this.model.value=null,this._change("value",this.model.value),this.isValidState=!1,this.model.enableStrictMode||this.element.val(this._objectToString(this.model.value)))},_refreshPopup:function(e){var t,i,s,n;this.isValidState&&this.isPopupOpen&&(t=this._setEmptyTime(this.model.value),i=this._setEmptyDate(this.model.value),s=this._getDate(),n=this._getTime(),s&&this._compare(s,t)||this.datePicker.option("value",t),n&&this._compare(n,i)||e||this.timePicker.option("value",i))},_buttonClick:function(e){13==e.keyCode&&(e.preventDefault(),(e=this._getFocusedElement()).hasClass("e-dt-today")?this._todayClick():e.hasClass("e-dt-now")?this._nowClick():e.hasClass("e-dt-done")&&this._doneClick())},_todayClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.datePicker.popup.find(".today").hasClass("e-active")&&this.datePicker.popup.children("table").hasClass("e-dp-viewdays")&&""!=this.element.val()&&this.isValidState||(this.datePicker._setCurrDate(),this._updateInput())},_nowClick:function(){if(!this.model.enabled||this.model.readOnly)return!1;this.timePicker.setCurrentTime();var e=this.model.minDateTime,t=this.model.maxDateTime,i=this.datePicker.model.value,s=new Date,i=g.isNullOrUndefined(i)?new Date:i,s=new Date(i.getFullYear(),i.getMonth(),i.getDate(),s.getHours(),s.getMinutes(),s.getSeconds());s<e?this.timePicker.option("value",this.timePicker._localizeTime(e)):t<s&&this.timePicker.option("value",this.timePicker._localizeTime(t)),this._updateInput()},_doneClick:function(){this._hideResult()},_iconClick:function(e){e.preventDefault(),this.isFocused||g.isTouchDevice()||this.element.focus(),this._showhidePopup(),this.model.disableDateTimeRanges&&g.isNullOrUndefined(this.model.value)&&this._setDisabledTimeRanges(this.datePicker.model.value),this._isIE9&&this.popup.find(".e-popup-container").css("display","inline-block")},_setInitialSelection:function(){var e,t,i=this.timePicker.ul.find("li");i.hasClass("e-hover")||(e=t=this.timePicker._setEmptyDate(new Date),this.timePicker.minTime&&!this._compareTime(this._createObject(t),this.timePicker.minTime,!0)&&(e=this.timePicker.minTime),this.timePicker.maxTime&&!this._compareTime(this.timePicker.maxTime,this._createObject(t),!0)&&(e=this.timePicker.maxTime),t=i.first().html(),t=(this.timePicker._parse(e)-this.timePicker._parse(t))/(6e4*this.timePicker.model.interval),((t=(t=Math.round(t))==i.length?t:t+1)<0||t>i.length||isNaN(t))&&(t=1),m(this.timePicker.ul.find("li")[t-1]).addClass("e-hover")),this._calcScrollTop()},_calcScrollTop:function(){this.timePicker.ul.outerHeight();var e=this.timePicker.ul.find("li").outerHeight(),e=e*this.timePicker.ul.find("li.e-hover").index()-(this.timePicker.popupList.outerHeight()-e)/2;this.timePicker.scrollerObj.setModel({scrollTop:e})},_showhidePopup:function(){if(this.model.readOnly)return!1;this.isPopupOpen?this._hideResult():this._showResult()},_showResult:function(){if(this.popup||this._renderDropdown(),this.isPopupOpen||!this.model.enabled)return!1;if(this._setRtl(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this._trigger("beforeOpen",{element:this.popup}))return!1;this.isPopupOpen=!0,this.element.attr({"aria-expanded":"true"}),this._setListPosition(),this._checkForResponsive();var e=this;this.popup.slideDown(this.model.enableAnimation?200:0,function(){e._on(m(document),"mousedown",e._OnDocumentClick),e.model.timeDrillDown.enabled&&e._addFocus(e._dateContainer.find(".e-datepicker")),e.timePicker.model.value||e._setInitialSelection()}),this._updateModel(),this._updateTimeHeight(),this._validateMinMax(),this._on(m(window),"resize",this._OnWindowResize),this._on(g.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._on(g.getScrollableParents(this.wrapper),"touchmove",this._hideResult),this._raiseEvent("open"),this._initial&&(this.timePicker._refreshScroller(),this.timePicker._changeActiveEle(),this._initial=!1),this.wrapper.addClass("e-active")},_hideResult:function(e){if(!e||"touchmove"!=e.type&&"scroll"!=e.type||!(0<m(e.target).parents("#"+this.popup[0].id).length)){var t=this;return this.isPopupOpen?!this._trigger("beforeClose",{element:this.popup})&&(this.isPopupOpen=!1,this.element.attr({"aria-expanded":"false"}),this._removeFocus(),void(this._popClose&&e&&"click"!=e.type?this.isPopupOpen=!0:(this.popup.slideUp(this.model.enableAnimation?100:0,function(){t.model&&(t.model.timeDrillDown.enabled&&(t._sfTimeHour.hide(),t._sfTimeMins.hide(),t._dateContainer.show()),g.isNullOrUndefined(t.model.value)||(t._datetimeValue=new Date(t.model.value.toString())))}),this._raiseEvent("close"),this._off(m(document),"mousedown",this._OnDocumentClick),this._off(m(window),"resize",this._OnWindowResize),this._off(g.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._off(g.getScrollableParents(this.wrapper),"touchmove",this._hideResult),this.wrapper.removeClass("e-active")))):!1}},_setListPosition:function(){var e=this.wrapper,t=this._getOffset(e),i=m(document).scrollTop()+m(window).height()-(t.top+m(e).outerHeight()),s=t.top-m(document).scrollTop(),n=this.popup.outerHeight(),a=this.popup.outerWidth(),r=t.left,o=e.outerHeight(),l=(o-e.height())/2,d=this._getZindexPartial();this.model.popupPosition;n=this.model.popupPosition==g.PopupPosition.Bottom?(n<i||s<n?t.top+o+3:t.top-n-3)-l:(s<n?t.top+o+3:t.top-n-3)-l,l=m(document).scrollLeft()+m(window).width()-r,(this.model.enableRTL||l<a&&a<r+e.outerWidth())&&(r-=this.popup.outerWidth()-e.outerWidth()),this.popup.css({left:r+"px",top:n+"px","z-index":d})},_getOffset:function(e){return g.util.getOffset(e)},_OnDocumentClick:function(e){this.model&&(m(e.target).is(this.popup)||m(e.target).parents(".e-datetime-popup").is(this.popup)||m(e.target).is(this.wrapper)||m(e.target).parents(".e-datetime-wrap").is(this.wrapper)?(m(e.target).is(this.popup)||m(e.target).parents(".e-datetime-popup").is(this.popup))&&(e.preventDefault(),0<m(e.target).parents(".e-datepicker").length?this._addFocus(m(e.target).parents(".e-datepicker")):0<m(e.target).parents(".e-timecontainer").length?this._addFocus(m(e.target).parents(".e-timecontainer")):m(e.target).hasClass("e-dt-button")?this._addFocus(m(e.target)):0<m(e.target).parents(".e-time-hours").length?this._addFocus(m(e.target).parents(".e-time-hours")):0<m(e.target).parents(".e-time-minitues").length?this._addFocus(m(e.target).parents(".e-time-minitues")):this._removeFocus()):this._hideResult())},_OnWindowResize:function(e){this._setListPosition(),this._checkForResponsive(),this._updateTimeHeight()},_raiseChangeEvent:function(e){var t,i=g.parseDate(this._prevDateTimeVal,this.model.dateTimeFormat),s=g.parseDate(this.element.val(),this.model.dateTimeFormat);+i!=+s?(this._preVal=this.element.val(),t={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isInteraction:!e,isValidState:this.isValidState},this.timePicker&&this.timePicker.model?(s=this._getFormat(s,this.timePicker.model.timeFormat),this.timePicker._ensureTimeRange(s)?(this._prevDateTimeVal="",this.model.value=null,this.isValidState=!1):this._prevDateTimeVal=this.element.val()):this._prevDateTimeVal=this.element.val(),this._trigger("_change",t),t.value=""==m.trim(this.element.val())?null:this.element.val(),t.value=this._formatter(this.model.value,this.model.dateTimeFormat),this._trigger("change",t)):this._prevDateTimeVal!=this.element.val()&&(t={prevDateTime:this._prevDateTimeVal,value:this.element.val(),isValidState:this.isValidState},this._prevDateTimeVal=this.element.val(),this._trigger("_change",t))},_formatter:function(e,t){t=this._checkFormat(t);return g.format(e,t,this.model.locale)},_raiseEvent:function(e){var t=this._previousDateUpdate();return!(null==this.element||!this.model[e])&&this._trigger(e,{prevDateTime:g.isNullOrUndefined(t||this._preValString)?"":t||this._preValString,value:this.element.val()})},_getDateTimeFormat:function(){var e=g.preferredCulture(this.model.locale).calendar.patterns;this.model.dateTimeFormat||(this.model.dateTimeFormat=e.d+" "+e.t),this.model.timeDisplayFormat||(this.model.timeDisplayFormat=e.t)},_getZindexPartial:function(){return g.util.getZindexPartial(this.element,this.popup)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error"):this.wrapper.addClass("e-error")},_getDate:function(){return this.datePicker.model.value},_getTime:function(){return this._getDateObj(this.timePicker.model.value,this.timePicker.model.timeFormat)},_setEmptyTime:function(e){e=new Date(e);return e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),e},_setEmptyDate:function(e){e=new Date(e);return e.setDate(1),e.setMonth(0),e.setFullYear(2e3),e},_objectToString:function(e){return this._getFormat(e,this.model.dateTimeFormat)},_stringToObject:function(e){return this._getDateObj(e,this.model.dateTimeFormat)},_getFormat:function(e,t){if(e instanceof Date){t=this._checkFormat(t);return g.format(e,t,this.model.locale)}return e},_checkFormat:function(e){var t=this,i=this._regExp();return e.replace(i,function(e){return e="/"===e&&"/"!==g.preferredCulture(t.model.locale).calendars.standard["/"]?"'/'":e})},_regExp:function(){return/\/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|gg|g|"[^"]*"|'[^']*'|[/]/g},_getDateObj:function(e,t){if("string"!=typeof e)return e;var i=this._checkFormat(t),t=g.parseDate(e,i,this.model.locale);if(null!=t)return t;if(""==e||null==e)return null;i=/^\s*(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d).*Z\s*$/.exec(e),t=new Date;return i&&(t=new Date,e=+i[2],t.setUTCFullYear(i[1],e-1,i[3]),t.setUTCHours(i[4],i[5],i[6]),e!=t.getUTCMonth()+1&&t.setTime()),this._isValidDate(t)?t:void 0},_compare:function(e,t){return e&&t&&e.getTime()==t.getTime()},_isValidDate:function(e){return e&&"function"==typeof e.getTime&&isFinite(e.getTime())},_change:function(e,t){this.popup&&(this.datePicker.option(e,t),this.timePicker.option(e,t))},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popup.removeClass(this.model.cssClass).addClass(e),this._change("cssClass",e)},_localize:function(e){this.model.locale=e,g.isNullOrUndefined(this._options.timeDisplayFormat)&&(this.model.timeDisplayFormat=""),g.isNullOrUndefined(this._options.dateTimeFormat)&&(this.model.dateTimeFormat="");var t=["AM","PM"];if(this._getDateTimeFormat(),this.timePicker.option("timeFormat",this.model.timeDisplayFormat),this._localizedLabels=this._getLocalizedLabels(),g.isNullOrUndefined(this._options)||(g.isNullOrUndefined(this._options.buttonText)||m.extend(this._localizedLabels.buttonText,this._options.buttonText),g.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this._localizedLabelToModel(),this._buttonText(this._localizedLabels.buttonText),(this.isValidState||this.model.value instanceof Date&&this._isValidDate(this.model.value))&&this.element.val(this._objectToString(this.model.value)),this._preVal=this.element.val(),this._change("locale",e),this.model.startDay=this.datePicker.model.startDay,this._validateMeridian(),this._sfTimeHour.empty(),this._renderHourTable(),this.model.timeDrillDown.showMeridian)for(var i=0;i<2;i++){var s=g.isNullOrUndefined(g.preferredCulture(this.model.locale).calendars.standard[t[i]])?"":g.preferredCulture(this.model.locale).calendars.standard[t[i]][0];m("span.e-hours-meridiantxt-"+t[i].toLowerCase(),this._sfTimeHour).text(s)}},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?m(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_readOnly:function(e){(this.model.readOnly=e)?this.element.attr("readonly","readonly"):this.element.prop("readonly",!1),this._change("readOnly",e)},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popup&&this.popup.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popup&&this.popup.removeClass("e-corner")),g.isNullOrUndefined(this.datePicker)||this.datePicker.option("showRoundedCorner",e),g.isNullOrUndefined(this.timePicker)||this.timePicker.option("showRoundedCorner",e)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popup&&this.popup.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popup&&this.popup.removeClass("e-rtl")),this._change("enableRTL",e)},_enabled:function(e){e?(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable())},_showButton:function(e){(this.model.showPopupButton=e)?(this.container.addClass("e-padding"),this._renderIcon()):(this.container.removeClass("e-padding"),this.datetimeIcon.remove(),this.datetimeIcon=null)},_buttonText:function(e){m.extend(this.model.buttonText,e),this.popup.find(".e-dt-today").html(this.model.buttonText.today),this.popup.find(".e-dt-now").html(this.model.buttonText.timeNow),this.popup.find(".e-dt-done").html(this.model.buttonText.done),this.popup.find(".e-timecontainer").find(".e-header").html(this.model.buttonText.timeTitle)},_checkForResponsive:function(){var e;200<m(window).outerWidth()&&m(window).outerWidth()<=500?this.popup.hasClass("e-dt-responsive")||(this.popup.addClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.datePicker.popup.outerWidth()),this.timePicker.option("popupHeight",98),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle()):this.popup.hasClass("e-dt-responsive")&&(this.popup.removeClass("e-dt-responsive"),this.timePicker.option("popupWidth",this.model.timePopupWidth),e=this.datePicker.popup.height()-this.popup.find(".e-header").height(),this.timePicker.option("popupHeight",e),this.timePicker._refreshScroller(),this.timePicker._changeActiveEle())},enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.model.enabled=!0,this.element.prop("disabled",!1),this.wrapper.removeClass("e-disable"),this.element.removeClass("e-disable").attr("aria-disabled",!1),this._isSupport||this._hiddenInput.prop("disabled",!1),this.datetimeIcon&&this.datetimeIcon.removeClass("e-disable").attr("aria-disabled",!1),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().removeClass("e-disable"),this.popup&&(this.popup.children("div").removeClass("e-disable").attr("aria-disabled",!1),this._change("enabled",!0)))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.wrapper.addClass("e-disable"),this.element.addClass("e-disable").attr("aria-disabled",!0),this.element.attr("disabled","disabled"),this._isSupport||this._hiddenInput.attr("disabled","disabled"),this.datetimeIcon&&this.datetimeIcon.addClass("e-disable").attr("aria-disabled",!0),this._isIE8&&this.datetimeIcon&&this.datetimeIcon.children().addClass("e-disable"),this._hideResult(),this._change("enabled",!1),this.popup&&(this.popup.children("div").addClass("e-disable").attr("aria-disabled",!0),this.datePicker.popup.removeClass("e-disable").attr("aria-disabled",!1),this.timePicker.popup.removeClass("e-disable").attr("aria-disabled",!1)))},getValue:function(){return this._objectToString(this.model.value)},setCurrentDateTime:function(){this.model.readOnly||this._setValue(new Date)},show:function(){this._showResult()},hide:function(){this._hideResult()},_wireEvents:function(){this.model.allowEdit&&(this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"keydown",this._keyDownOnInput)),this.model.allowEdit||(this.element.attr("readonly","readonly"),this.element.on("mousedown",m.proxy(this._showhidePopup,this)))},_getLocalizedLabels:function(){return g.getLocalizedConstants(this.sfType,this.model.locale)}}),g.DateTimePicker.Locale=g.DateTimePicker.Locale||{},g.DateTimePicker.Locale.default=g.DateTimePicker.Locale["en-US"]={watermarkText:"Select datetime",buttonText:{today:"Today",timeNow:"Time Now",done:"Done",timeTitle:"Time"}},g.PopupPosition={Bottom:"bottom",Top:"top"}}(jQuery,Syncfusion),function(o,a){a.widget("ejDialog","ej.Dialog",{_rootCSS:"e-dialog",element:null,_ignoreOnPersist:["drag","dragStart","dragStop","resizeStop","resizeStart","resize","beforeClose","beforeOpen","collapse","expand","close","open","destroy","create","ajaxSuccess","ajaxError","contentLoad","actionButtonClick","enableResize"],model:null,validTags:["div","span"],_setFirst:!1,angular:{terminal:!1},defaults:{showOnInit:!0,closeOnEscape:!0,closeIconTooltip:"close",enableAnimation:!0,allowDraggable:!0,backgroundScroll:!0,height:"auto",minHeight:120,minWidth:200,maxHeight:null,maxWidth:null,enableModal:!1,position:{X:"",Y:""},containment:null,enableResize:!0,htmlAttributes:{},showHeader:!0,showFooter:!1,contentType:null,contentUrl:null,ajaxSettings:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},title:"",width:400,zIndex:1e3,cssClass:"",enableRTL:!1,allowKeyboardNavigation:!0,showRoundedCorner:!1,actionButtons:["close"],animation:{show:{effect:"fade",duration:400},hide:{effect:"fade",duration:400}},tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},footerTemplateId:null,locale:"en-US",faviconCSS:null,content:null,target:null,enablePersistence:!1,enabled:!0,isResponsive:!1,actionButtonClick:null,beforeClose:null,close:null,expand:null,collapse:null,beforeOpen:null,open:null,drag:null,dragStart:null,dragStop:null,resize:null,resizeStart:null,resizeStop:null,contentLoad:null,ajaxSuccess:null,ajaxError:null,create:null,destroy:null,Close:null},dataTypes:{showOnInit:"boolean",closeOnEscape:"boolean",enableAnimation:"boolean",backgroundScroll:"boolean",position:"data",animation:"data",closeIconTooltip:"string",tooltip:"data",allowDraggable:"boolean",enableModal:"boolean",enableResize:"boolean",isResponsive:"boolean",showHeader:"boolean",showFooter:"boolean",title:"string",faviconCSS:"string",zIndex:"number",cssClass:"string",enablePersistence:"boolean",contentUrl:"string",contentType:"string",enableRTL:"boolean",enabled:"boolean",allowKeyboardNavigation:"boolean",showRoundedCorner:"boolean",locale:"string",htmlAttributes:"data",ajaxSettings:"data",actionButtons:"array",footerTemplateId:"string"},_setModel:function(e){for(var t in e)switch(t){case"closeIconTooltip":this._dialogClose.attr("title",e[t]);break;case"tooltip":this._tooltipText(e[t]);break;case"title":this.model.title=e[t],this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(e[t]),this._updateCaptionWidth();break;case"width":this.model.width=e[t],this._changeSize(),this._updateCaptionWidth(),e[t]=this.model.width;break;case"height":this.model.height=e[t],this._changeSize(),e[t]=this.model.height;break;case"position":this.model.position=e[t],this._dialogPosition();break;case"cssClass":this._changeSkin(e[t]);break;case"showRoundedCorner":this.model.showRoundedCorner=e[t],this._roundedCorner(e[t]);break;case"contentType":this.model.contentType=e[t],this._appendContent(e[t]);break;case"enabled":this.model.enabled=e[t],this._enabledAction(e[t]);break;case"contentUrl":this.model.contentUrl=e[t],this._appendContent(this.model.contentType);break;case"backgroundScroll":this.model.backgroundScroll=e[t],!this.model.backgroundScroll&&this.model.enableModal?o("body").addClass("e-dialog-modal"):o("body").removeClass("e-dialog-modal");break;case"content":case"target":this._ejDialog.appendTo(o(e[t])),this.model.target=this.model.content=e[t],this._dialogPosition();break;case"containment":this._setDragArea(e[t]),a.isNullOrUndefined(this._target)?this._ejDialog.appendTo(document.body):this._ejDialog.appendTo(this._target),this.model.position.X=this.model.position.Y="",this._dialogPosition(),this.model.containment=e[t]=this._target,this.model.enableModal&&this._createOverlay(),this._dialogTitlebar.ejDraggable({dragArea:this._target});break;case"locale":this.model.locale=e[t],this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels,!0),this._tooltipText(this.model.tooltip),this._ejDialog.find("span.e-title").length<=0?this._addTitleText():this._ejDialog.find("span.e-title").html(this.model.title),this._updateCaptionWidth();break;case"minHeight":this.model.minHeight=e[t],this._ejDialog.css("minHeight",e[t]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"minWidth":this.model.minWidth=e[t],this._ejDialog.css("minWidth",e[t]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxHeight":this.model.maxHeight=e[t],this._ejDialog.css("maxHeight",e[t]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"maxWidth":this.model.maxWidth=e[t],this._ejDialog.css("maxWidth",e[t]),this._minMaxValidation(),this._resetScroller(),this._resizeDialog();break;case"zIndex":this._ejDialog.css("z-index",e[t]);break;case"faviconCSS":this.model.faviconCSS=e[t],this._favIcon(),this._updateCaptionWidth();break;case"isResponsive":this.model.isResponsive=e[t],this.model.isResponsive?this._ejDialog.addClass("e-dialog-resize"):this._ejDialog.removeClass("e-dialog-resize"),this._wireResizing();break;case"allowDraggable":this.model.allowDraggable=e[t],e[t]?this._enableDrag():this._dialogTitlebar.removeClass("e-draggable");break;case"enableResize":this.model.enableResize=e[t],e[t]?this._enableResize():(this._ejDialog.removeClass("e-resizable"),this._ejDialog.find(".e-resize-handle").remove()),this._reRenderScroller();break;case"showHeader":this.model.showHeader=e[t],e[t]?(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&(this._dialogFavIcon=!1,this._favIcon()),this._enableDrag(),this._maximize||this._updateScroller(a.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1-this._dialogTitlebar.outerHeight(!0):"0px"==this.contentDiv.css("border-width"),a.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))):(this._ejDialog.find(".e-titlebar").remove(),this._maximize?this.refresh():this._updateScroller(a.isNullOrUndefined(this.contentDiv)?this._ejDialog.outerHeight(!0)-1:"0px"==this.contentDiv.css("border-width"),a.isNullOrUndefined(this.contentDiv)?this._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width"))),this._roundedCorner(this.model.showRoundedCorner),this.model.showFooter&&this._setContainerSize()._resetScroller();break;case"showFooter":this.model.showFooter=e[t],e[t]?(this._appendContent(),this._ejDialog.find(".e-resizable").remove()):this._ejDialog.find(".e-footerbar").remove(),this._enableResize()._enableDrag()._sizeInPercent(),this._reRenderScroller(),this._setContainerSize()._resetScroller(),this._roundedCorner(this.model.showRoundedCorner);break;case"footerTemplateId":var i;this.model.footerTemplateId=e[t],this.model.showFooter&&(this._ejDialog.find(".e-footerbar").empty(),i=o("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(i),this._enableResize());break;case"enableRTL":this.model.enableRTL=e[t],this.model.faviconCSS&&this._favIcon(),e[t]?(this._ejDialog.addClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","rtl")):(this._ejDialog.removeClass("e-rtl"),this.iframe&&this.iframe.contents().find("body").css("direction","ltr")),this.scroller&&this._resetScroller();break;case"actionButtons":a.isNullOrUndefined(this._dialogTitlebar)||(this._removeAllIcons(),this._iconsRender(e[t])),this.model.actionButtons=e[t],this._updateCaptionWidth();break;case"enableModal":this._enableModal(e[t]);break;case"htmlAttributes":this._addAttr(e[t])}},_destroy:function(){this._overLay&&this._overLay.remove(),this._cloneElement.appendTo(this._ejDialog.parent()),this._ejDialog.remove(),this.model.enableAnimation&&this._ejDialog.stop(),this._cloneElement.removeClass("e-dialog"),this.element=this._cloneElement,this._isOpen=!1,o(window).off("resize",o.proxy(this._reSizeHandler,this))},keyConfigs:[37,38,39,40],_init:function(){this._init=!0,this._widthPercent=null,this._heightPercent=null,this._windowSize={outerWidth:o(window).outerWidth(),outerHeight:o(window).outerHeight()},this._initSize={width:this.model.width,height:this.model.height},this._sizeType={width:isNaN(this.model.width)?this.model.width.match(/px|%|auto/g)[0]:null,height:isNaN(this.model.height)?this.model.height.match(/px|%|auto/g)[0]:null},this._isOpen=this._maximize=this._minimize=!1,this.localizedLabels=this._getLocalizedLabels(),this._setLocaleCulture(this.localizedLabels),this._setDimension(),this.model.close||(this.model.close=this.model.Close),this.model.target||(this.model.target=this.model.content),this._responsive(),this._renderControl(),this._wireEvents(),this.scrObj=this._ejDialog.closest(".e-dialog.e-js").data("ejDialog"),this.scrObj&&this.scrObj._resetScroller(),this.hidden=!1,this._init=!1,this._keyNavigation=!1},_responsive:function(){this.width=this.model.width,o(this.element).width(this.width),this.height=this.model.height,o(this.element).height(this.height),o(window).on("resize",o.proxy(this._resizeHandler,this))},_resizeHandler:function(){this._maximize&&(this.width=o(this._dialogTitlebar).outerWidth(),o(this.contentDiv).width(this.width),o(this.contentDiv).children().width(this.width),this.model.height=this.height=o(window).height(),this._ejDialog.css({height:this.height}),this.contentDiv.height(this._ejDialog.height()-o(this._dialogTitlebar).outerHeight()-o(this._dialogFooterbar).outerHeight()),this.element.height(this.contentDiv.height())),a.isNullOrUndefined(this.element)||this._collapsible||this._resetScroller()},_setLocaleCulture:function(e,t){this.defaults.closeIconTooltip===this.model.closeIconTooltip&&(this.model.closeIconTooltip=e.closeIconTooltip),t&&(this.model.tooltip=this.localizedLabels.tooltip,this.model.title=this.localizedLabels.title),JSON.stringify(this.model.tooltip)===JSON.stringify(this.defaults.tooltip)&&(this.model.tooltip=e.tooltip),this.model.title===this.defaults.title&&(this.model.title=e.title)},_setDragArea:function(e){a.isNullOrUndefined(e)?this._target=null:"string"==typeof e?("parent"==e&&(this._target=o(this.element).parent()),"document"==e.toLowerCase()&&(this._target=o(document)),"window"==e.toLowerCase()?this._target=o(window):0<o(e).length&&(this._target=o(e))):"object"==typeof e?0<e.length&&(this._target=e):this._target=null},_addAttr:function(e){var i=this;o.map(e,function(e,t){"class"==t?i._ejDialog.addClass(e):"disabled"==t&&"disabled"==e?(i.model.enabled=!1,i._enabledAction(!1)):i._ejDialog[0].hasAttribute("style")&&(e=i._ejDialog[0].getAttribute("style")+e,i._ejDialog.attr(t,e))})},_tooltipText:function(e){o.extend(this.model.tooltip,e),!a.isNullOrUndefined(this._dialogClose)&&this._dialogClose.hasClass("e-close")&&this._dialogClose.attr("title",this.model.tooltip.close),a.isNullOrUndefined(this._dialogCollapsible)||!e.collapse&&!e.expand||(this._dialogCollapsible.hasClass("e-arrowhead-up")&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._dialogCollapsible.hasClass("e-arrowhead-down")&&this._dialogCollapsible.attr("title",this.model.tooltip.expand)),a.isNullOrUndefined(this._dialogMaximize)||!e.maximize&&!e.restore||(this._dialogMaximize.hasClass("e-maximize")&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogMaximize.hasClass("e-restore")&&this._dialogMaximize.attr("title",this.model.tooltip.restore)),a.isNullOrUndefined(this._dialogMinimize)||!e.minimize&&!e.restore||(this._dialogMinimize.hasClass("e-minus")&&this._dialogMinimize.attr("title",this.model.tooltip.minimize),this._dialogMinimize.hasClass("e-restore")&&this._dialogMinimize.attr("title",this.model.tooltip.restore)),a.isNullOrUndefined(this._dialogPin)||!e.pin&&!e.unPin||(this._dialogPin.hasClass("e-unpin")&&this._dialogPin.attr("title",this.model.tooltip.pin),this._dialogPin.hasClass("e-pin")&&this._dialogPin.attr("title",this.model.tooltip.unPin))},_renderControl:function(){this._cloneElement=this.element.clone(),this.element.attr("tabindex",0).attr({role:"dialog"}),this.model.showHeader&&this.element.attr({"aria-labelledby":this.element.prop("id")+"_title"}),this._ejDialog=a.buildTag("div.e-dialog e-widget e-box "+this.model.cssClass+" e-dialog-wrap e-shadow#"+(""==this.element.prop("id")?"":this.element.prop("id")+"_wrapper"),"",{display:"none",zIndex:this.model.zIndex},{tabindex:0}),this.model.isResponsive&&this._ejDialog.addClass("e-dialog-resize"),this.wrapper=this._ejDialog,this._addAttr(this.model.htmlAttributes),this._setDragArea(this.model.containment),a.isNullOrUndefined(this.model.containment)||a.isNullOrUndefined(this._target)?a.isNullOrUndefined(this.model.target)||(t=this.model.target):t=this._target;var e=a.isNullOrUndefined(t)?document.body:t,t=o(e).find("#"+this._id+"_wrapper").get(0);t&&o(t).remove(),this._ejDialog.appendTo(e),this.model.enableRTL&&this._ejDialog.addClass("e-rtl"),this.model.showHeader&&(this._renderTitleBar(),this._iconsRender(this.model.actionButtons),this.model.faviconCSS&&this._favIcon()),this._appendContent(this.model.contentType),this._enableResize()._enableDrag()._setSize(),"auto"!=this.model.height&&this._sizeInPercent(),"ajax"!=this.model.contentType&&(this.model.showOnInit&&this.open()?this._setContainerSize()._resetScroller():this._setHiddenDialogSize()),this._roundedCorner(this.model.showRoundedCorner),this._enabledAction(this.model.enabled),"auto"==this._sizeType.width&&(this._maxWidth=this.model.width),"auto"==this._sizeType.height&&(this._maxHeight=this.model.height)},_setContainerSize:function(){var e;return"auto"!=this.model.height&&(e=this._ejDialog.outerHeight()-(this.model.showHeader?o(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)+(this.model.showFooter?o(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0)-1,this.contentDiv.height(e),this.element.outerHeight(e)),this},_changeSize:function(){this._initSize={width:this.model.width,height:this.model.height},this._sizeType.width=isNaN(this.model.width)?this.model.width.match(/px|%|auto/g):null,this._sizeType.height=isNaN(this.model.height)?this.model.height.match(/px|%|auto/g):null,this._setSize()._sizeInPercent()._setContainerSize()._resetScroller()},_enableDrag:function(){return this.model.allowDraggable&&this.model.showHeader&&(this._dialogTitlebar.addClass("e-draggable"),this._dragDialog()),this},_enableResize:function(){var e;return this.model.enableResize&&(this._ejDialog.addClass("e-resizable"),e=a.buildTag("div.e-icon e-resize-handle"),this.model.showFooter?e.appendTo(this._dialogFooterbar):e.appendTo(this._ejDialog),this._resizeDialog()),this},_changeSkin:function(e){this.model.cssClass!=e&&this._ejDialog.removeClass(this.model.cssClass).addClass(e)},_enableModal:function(e){e?this._isOpen&&this._createOverlay():this._overLay&&this._overLay.remove()},_enabledAction:function(e){e?(this._ejDialog.removeClass("e-disable"),this.wrapper.children(".e-disable-overlay").remove(),a.isNullOrUndefined(this.scroller)||this.scroller.enable()):(this._ejDialog.addClass("e-disable"),a.buildTag("div.e-disable-overlay").appendTo(this.wrapper),a.isNullOrUndefined(this.scroller)||this.scroller.disable())},_renderTitleBar:function(){this._elementTitle=this.element.attr("title"),"string"!=typeof this._elementTitle&&(this._elementTitle=""),this.model.title=this.model.title||this._elementTitle,this._dialogTitlebar=a.buildTag("div#"+this.element.prop("id")+"_title.e-titlebar e-header e-dialog").prependTo(this._ejDialog),this._addTitleText()},_renderFooterBar:function(){this._dialogFooterbar=a.buildTag("div#"+this.element.prop("id")+"_foot.e-footerbar e-dialog e-js").appendTo(this._ejDialog)},_addTitleText:function(){return this.model.title&&(this._titleText=a.buildTag("span.e-title",this.model.title).prependTo(this._dialogTitlebar)),this},_updateCaptionWidth:function(){var e=this.model.faviconCSS&&!a.isNullOrUndefined(this._dialogFavIcon)?this._dialogFavIcon.outerWidth():0;return this._titleText&&!a.isNullOrUndefined(this._dialogTitlebar)&&this._titleText.css("max-width",this._dialogTitlebar.width()-20-this._dialogTitlebar.find(".e-dialog-icon").width()*this._dialogTitlebar.find(".e-dialog-icon").length-e),this},_iconsRender:function(e){for(var t=0;t<e.length;t++)switch("msie"==a.browserInfo().name&&a.browserInfo().version<=8?o.trim(e[t]):e[t].trim()){case"close":this._closeIcon();break;case"collapse":case"collapsible":this._collapsibleIcon();break;case"maximize":this._maximizeIcon();break;case"minimize":this._minimizeIcon();break;case"pin":this._pinIcon();break;default:this._customIconsRender(e[t])}},_customIconsRender:function(e){this._customIcon=a.util.buildTag("div#"+this.element[0].id+"_"+e+"button.e-dialog-icon e-icon e-"+e,null,null).attr("tabIndex","0").attr("title",e),this._customIcon.appendTo(this._dialogTitlebar),this._on(this._customIcon,"touchstart click",this._iconClick)},_iconClick:function(e){this.element.hasClass("e-disable")||(e={cancel:!1,buttonID:o(e.target).attr("id"),event:e.type,model:this.model,currentTarget:e.currentTarget.title},this._trigger("actionButtonClick",e))},_removeAllIcons:function(){this._dialogTitlebar.find("div.e-dialog-icon").remove()},_appendContent:function(e){this.contentDiv=a.isNullOrUndefined(this.contentDiv)?a.buildTag("div.e-dialog-scroller"):this.contentDiv,this.element.removeAttr("title").addClass("e-widget-content e-box");var t,i,s,n=this;a.isNullOrUndefined(this.model.contentUrl)||a.isNullOrUndefined(e)?(this.dialogIframeContent=this.element.children().find("iframe").contents()[0],a.isNullOrUndefined(this.dialogIframeContent)?this.element.show().appendTo(this.contentDiv):this.element.show().appendTo(this.contentDiv).find("iframe").append(this.dialogIframeContent.lastChild)):"ajax"==e?(this.model.ajaxSettings.url=this.model.contentUrl,this._sendAjaxOptions(this.element,this.model.ajaxSettings.url)):"iframe"==e?(0<this.element.children(".e-iframe").length?(this.iframe=this.element.find("iframe.e-iframe"),this.iframe.attr("src",this.model.contentUrl)):(this.iframe=a.buildTag("iframe.e-iframe","",{width:"100%",height:"100%"},{scrolling:"auto",frameborder:0,src:this.model.contentUrl}),this.element.appendTo(this.contentDiv).append(this.iframe).show()),this.model.enableRTL&&o(this.iframe).load(function(){n.iframe.contents().find("body").css("direction","rtl")}),this._trigger("contentLoad",{contentType:e,url:this.model.contentUrl})):"image"==e?(t=a.buildTag("img.e-images","","",{src:this.model.contentUrl}),this.element.append(t).show().appendTo(this.contentDiv),o(t).on("load",function(){n._dialogPosition()}),this._trigger("contentLoad",{contentType:e,url:this.model.contentUrl})):this.element.show().appendTo(this.contentDiv),0<this._ejDialog.find("div.e-resize-handle").length?0==this._ejDialog.find(".e-footerbar").length&&this.contentDiv.insertBefore(this._ejDialog.find("div.e-resize-handle")):(i=this.element.children().find("iframe").contents()[0],a.isNullOrUndefined(i)?0==this._ejDialog.find(".e-footerbar").length?this.contentDiv.appendTo(this._ejDialog):this.contentDiv.insertBefore(this._dialogFooterbar):(this.contentDiv.appendTo(this._ejDialog),s=o("#"+this.contentDiv.find("iframe").attr("id")),o(s[0].contentDocument.lastChild).remove(),s[0].contentDocument.appendChild(i),"mozilla"==a.browserInfo().name&&setTimeout(function(){o(s[0].contentDocument.lastChild).remove(),s[0].contentDocument.appendChild(i)},500))),this.model.showFooter&&0==this._ejDialog.find(".e-footerbar").length&&(this._renderFooterBar(),null!=this.model.footerTemplateId&&(e=o("body").find("#"+this.model.footerTemplateId).html(),this._dialogFooterbar.append(e)))},_roundedCorner:function(e){this._ejDialog[e?"addClass":"removeClass"]("e-corner"),this.contentDiv.removeClass("e-dialog-top e-dialog-bottom e-dialog-content"),this.model.showRoundedCorner&&(this.model.showHeader&&!this.model.showFooter?this.contentDiv.addClass("e-dialog-bottom"):!this.model.showHeader&&this.model.showFooter?this.contentDiv.addClass("e-dialog-top"):this.model.showHeader||this.model.showFooter||this.contentDiv.addClass("e-dialog-content"))},_reRenderScroller:function(){var e,t,i,s;null!=this.scroller&&(this.scroller.refresh(!0),this.model.enableRTL||(this.scroller._vScrollbar&&this.scroller._vScrollbar._scrollData&&this.model.enableResize&&(s=this.model.showFooter?(e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),i=0):(e=this.scroller._vScrollbar.element.find("> div.e-vscroll").height(),i=2,this._ejDialog.find("div.e-resize-handle").outerHeight()),Math.floor(this.contentDiv.outerHeight())===Math.floor(this.scroller._vScrollbar.model.height+1)&&(this.scroller._vScrollbar.model.height-=s+i,this.scroller._vScrollbar._scrollData.handle-=s,this.scroller._vScrollbar._scrollData.handleSpace-=s+i,this.scroller._vScrollbar._updateLayout(this.scroller._vScrollbar._scrollData),this.scroller._vScrollbar.element.find("> div.e-vscroll").height(e-s-i))),this.scroller._vScrollbar&&this.scroller._vScrollbar._scrollData||!this.scroller._hScrollbar||!this.scroller._hScrollbar._scrollData||!this.model.enableResize||(s=this.model.showFooter?(t=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),i=0):(t=this.scroller._hScrollbar.element.find("> div.e-hscroll").width(),i=2,this._ejDialog.find("div.e-resize-handle").outerWidth()),this.scroller._hScrollbar.model.width-=s+i,this.scroller._hScrollbar._scrollData.handle-=s+i,this.scroller._hScrollbar._scrollData.handleSpace-=s+i,this.scroller._hScrollbar._updateLayout(this.scroller._hScrollbar._scrollData),this.scroller._hScrollbar.element.find("> div.e-hscroll").width(t-s-i))))},_dialogMaxZindex:function(){var i=this.element.parents(),e=o("body").children();o(e).each(function(e,t){i.push(t)}),e=o(this.model.target).children(),o(e).each(function(e,t){i.push(t)});var t=Math.max.apply(t,o.map(i,function(e,t){if("static"!=o(e).css("position"))return parseInt(o(e).css("z-index"))||1}));return!t||t<1e4?t=1e4:t+=1,t},_setZindex:function(){var e=this._dialogMaxZindex();this.model.zIndex<=e&&this._ejDialog.css({zIndex:e+1})},_createOverlay:function(){var e=this._ejDialog.css("zIndex");a.isNullOrUndefined(this._overLay)||this._overLay.remove(),this.model.backgroundScroll||o("body").addClass("e-dialog-modal"),this._overLay=a.buildTag("div#"+this.element.attr("id")+"_overLay.e-overlay","",{zIndex:e-1}),o(this._overLay).addClass("e-widget"),a.isNullOrUndefined(this.model.containment)||a.isNullOrUndefined(this._target)?a.isNullOrUndefined(this.model.target)||(i=this.model.target):i=this._target,this._overLay.appendTo(a.isNullOrUndefined(i)?document.body:i);var t=a.isNullOrUndefined(this.model.containment)||a.isNullOrUndefined(this._target)?"fixed":"absolute",e=a.isNullOrUndefined(i)||"fixed"==t||"static"!=o(i).css("position").toLowerCase()?0:o(i).offset().left,i=a.isNullOrUndefined(i)||"fixed"==t||"static"!=o(i).css("position").toLowerCase()?0:o(i).offset().top;this._overLay.css({top:i,left:e,position:t})},_sendAjaxOptions:function(t,i){t.addClass("e-load");var s=this,n=this.model.title,e={success:function(e){try{s._ajaxSuccessHandler(e,t,i,n)}catch(e){}},error:function(e){try{s._ajaxErrorHandler({status:e.status,responseText:e.responseText,statusText:e.statusText},t,i,n)}catch(e){}},complete:function(){try{s._setContainerSize(),s._resetScroller(),s.model.showOnInit||s._setHiddenDialogSize()}catch(e){}}};o.extend(!0,e,this.model.ajaxSettings),this._sendAjaxRequest(e)},_setHiddenDialogSize:function(){this._isOpen||(this._ejDialog.css({display:"block",visibility:"hidden"}),this._setContainerSize()._resetScroller(),this._ejDialog.css({display:"none",visibility:""}))},_sendAjaxRequest:function(e){o.ajax({type:e.type,cache:e.cache,url:e.url,dataType:e.dataType,data:e.data,contentType:e.contentType,async:e.async,success:e.success,error:e.error,beforeSend:e.beforeSend,complete:e.complete})},_ajaxSuccessHandler:function(e,t,i,s){t.removeClass("e-load"),t.html(e).addClass("e-dialog-loaded").appendTo(this._ejDialog),t.appendTo(this.contentDiv),this._dialogPosition(),this.model.showOnInit&&this.open(),this._trigger("ajaxSuccess",{data:e,url:i})},_ajaxErrorHandler:function(e,t,i,s){t.addClass("e-dialog-loaded").appendTo(this.contentDiv),this._dialogPosition().open(),this._trigger("ajaxError",{data:e,url:i})},_closeIcon:function(){this._dialogClose=a.util.buildTag("div#"+this.element[0].id+"_closebutton.e-dialog-icon e-icon e-close",null,null).attr("tabIndex","0"),"close"==this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close):"close"!=this.model.closeIconTooltip&&"Close"==this.model.tooltip.close?this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.closeIconTooltip):("close"==this.model.closeIconTooltip&&this.model.tooltip.close,this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.close)),this._on(this._dialogClose,"touchstart click",this._closeClick)},_collapsibleIcon:function(){this._dialogCollapsible=a.util.buildTag("div#"+this.element[0].id+"_collapsbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._collapsible?this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.expand).addClass("e-arrowhead-down").removeClass("e-arrowhead-up"):this._dialogCollapsible.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.collapse).addClass("e-arrowhead-up").removeClass("e-arrowhead-down"),this._on(this._dialogCollapsible,"touchstart click",this._collapsibleClick)},_maximizeIcon:function(){this._dialogMaximize=a.util.buildTag("div#"+this.element[0].id+"_maximizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._maximize?this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-maximize"):this._dialogMaximize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.maximize).addClass("e-maximize").removeClass("e-restore"),this._on(this._dialogMaximize,"touchstart click",this._maximizeClick)},_minimizeIcon:function(){this._dialogMinimize=a.util.buildTag("div#"+this.element[0].id+"_minimizebutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._minimize?this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.restore).addClass("e-restore").removeClass("e-minus"):this._dialogMinimize.appendTo(this._dialogTitlebar).attr("title",this.model.tooltip.minimize).addClass("e-minus").removeClass("e-restore"),this._on(this._dialogMinimize,"touchstart click",this._minimizeClick)},_pinIcon:function(){this._dialogPin=a.util.buildTag("div#"+this.element[0].id+"_pinbutton.e-dialog-icon e-icon",null,null).attr("tabIndex","0"),this._dialogPin.appendTo(this._dialogTitlebar).attr("title",this.dialogPin?this.model.tooltip.unPin:this.model.tooltip.pin).addClass(this.dialogPin?"e-pin":"e-unpin").removeClass(this.dialogPin?"e-unpin":"e-pin"),this._on(this._dialogPin,"touchstart click",this._pinClick)},_favIcon:function(){var e;this._dialogFavIcon?e=this._dialogFavIcon.find("span").removeClass().addClass("e-dialog-custom"):(this._dialogFavIcon=a.util.buildTag("div.e-dialog-favicon","",{},{style:"float:"+(this.model.enableRTL?"right":"left")}),(e=a.util.buildTag("span.e-dialog-custom","",{},{role:"presentation"})).appendTo(this._dialogFavIcon),this._dialogFavIcon.appendTo(this._dialogTitlebar)),this.model.faviconCSS?e.addClass(this.model.faviconCSS):this._dialogFavIcon.remove(),this._dialogFavIcon.css("float",this.model.enableRTL?"right":"left")},_minMaxValidation:function(){var e=parseInt(this.model.minWidth),t=parseInt(this.model.minHeight),i=parseInt(this.model.maxWidth),s=parseInt(this.model.maxHeight),n=parseInt(this.model.width),a=parseInt(this.model.height),r=this._getParentObj();isNaN(this.model.minWidth)&&0<this.model.minWidth.indexOf("%")&&(e=this._convertPercentageToPixel(r.outerWidth(),e)),isNaN(this.model.minHeight)&&0<this.model.minHeight.indexOf("%")&&(t=this._convertPercentageToPixel(r.outerHeight(),t)),isNaN(this.model.maxWidth)&&0<this.model.maxWidth.indexOf("%")&&(i=this._convertPercentageToPixel(r.innerWidth(),i)),isNaN(this.model.maxHeight)&&0<this.model.maxHeight.indexOf("%")&&(s=this._convertPercentageToPixel(r.innerHeight(),s)),isNaN(this.model.width)&&0<this.model.width.indexOf("%")&&(n=this._convertPercentageToPixel(r.innerWidth(),n)),isNaN(this.model.height)&&0<this.model.height.indexOf("%")&&(a=this._convertPercentageToPixel(r.innerHeight(),a)),(i&&i<n||e&&n<e)&&(this.model.width=i<n?i:e),(s&&s<a||t&&a<t)&&(this.model.height=s<a?s:t)},_setSize:function(){var e=this.model;return this._minMaxValidation(),this._ejDialog.css({width:e.width,minWidth:e.minWidth,maxWidth:e.maxWidth}),this._ejDialog.css({height:e.height,minHeight:e.minHeight,maxHeight:e.maxHeight}),this._dialogPosition(),this},_resetScroller:function(){this.element.css({height:"auto","max-width":"","max-height":"",width:""});var e=this._ejDialog.outerHeight(!0)-(this.model.showHeader?o(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)-(this.model.showFooter?o(this._ejDialog.find("div.e-footerbar")).outerHeight(!0):0),e={width:"0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?Math.round(this._ejDialog.width()):Math.round(this._ejDialog.width()-2),enableRTL:this.model.enableRTL,height:"0px"==this.contentDiv.css("border-width")?e:e-1,enableTouchScroll:!1};"auto"!=this.model.height||!(this.element.height()<this.model.maxHeight)&&this.model.maxHeight||this._maximize||(e.height="auto"),"auto"!=this.model.width||this._maximize||(e.width=this.model.width),this.contentDiv.ejScroller(e),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._padding=parseInt(o(this.element).css("padding-top"))+parseInt(o(this.element).css("padding-bottom")),"none"==o(this._ejDialog).css("display")&&(this.hidden=!0,this._ejDialog.css({display:"block"})),!a.isNullOrUndefined(this.contentDiv.height())&&0<this.contentDiv.height()&&(e=a.isNullOrUndefined(this.scroller)?this.contentDiv.outerHeight()-this._padding:(this.scroller._hScrollbar||!this.scroller._vScrollbar)&&this.scroller._hScrollbar?this.contentDiv.outerHeight()-this.scroller.model.buttonSize:this.contentDiv.outerHeight(),"auto"!=this.model.height&&"100%"!=this.model.height?this.element.css({height:e-1}):this.element.css("height",this.model.height),"auto"!=this.model.height&&"100%"!=this.model.height||this.scroller._vScrollbar||this.element.css({"min-height":this.model.minHeight-(this.model.showHeader?o(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0)}),this.scroller._vScrollbar||"auto"==this.model.width||"100%"==this.model.width?this.scroller._vScrollbar||this.element.css("width",this.model.width):this.element.outerWidth("0px"==this.contentDiv.css("border-width")||"0px"==this.contentDiv.css("border-left-width")?this._ejDialog.width():this._ejDialog.width()-2),this.element.css({"max-width":this.model.maxWidth,"max-height":this.model.maxHeight})),this.hidden&&this._ejDialog.css({display:"none"}),this.hidden=!1},_updateScroller:function(e,t){this.contentDiv.ejScroller({width:t,height:e,enableRTL:this.model.enableRTL,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),this._changeSize()},_dragDialog:function(){var i=this;this._ejDialog.parents(".e-dialog-scroller");return this._dialogTitlebar.ejDraggable({handle:".e-titlebar",cursorAt:{top:0,left:0},dragArea:i._target,dragStart:function(e){return e.element.attr("aria-grabbed",!0),i._clickHandler(),i.dialogPin||!i.model.allowDraggable||!i.model.enabled||i._trigger("dragStart",{event:e})?!(e.cancel=!0):void 0},drag:function(e){i._trigger("drag",{event:e})},dragStop:function(e){i._ejDialog.focus(),e.element.attr("aria-grabbed",!1),!i.element.find("> .e-draggable.e-titlebar")||(t=o("#"+i.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"))&&t.option("cursorAt",i.element.offset());var t=this.helper.offsetParent().offset();i._trigger("dragStop",{event:e}),i.model.position.X=a.isNullOrUndefined(this.position.left)?parseInt(this.helper.css("left")):this.position.left-[t.left+parseFloat(this.helper.offsetParent().css("border-left-width"))],i.model.position.Y=a.isNullOrUndefined(this.position.top)?parseInt(this.helper.css("top")):this.position.top-[t.top+parseFloat(this.helper.offsetParent().css("border-top-width"))],i._positionChanged=!0,i.dlgresized=!0},helper:function(e){return o(i._ejDialog).addClass("dragClone")}}),this},_resizeDialog:function(){if(this.model.enableResize){var i=this,s=!1,e=parseInt(this.model.minWidth),t=parseInt(this.model.minHeight),n=parseInt(this.model.maxWidth),a=parseInt(this.model.maxHeight),r=this._getParentObj();return isNaN(this.model.minWidth)&&0<this.model.minWidth.indexOf("%")&&(e=this._convertPercentageToPixel(r.outerWidth(),e)),isNaN(this.model.minHeight)&&0<this.model.minHeight.indexOf("%")&&(t=this._convertPercentageToPixel(r.outerHeight(),t)),isNaN(this.model.maxWidth)&&0<this.model.maxWidth.indexOf("%")&&(n=this._convertPercentageToPixel(r.innerWidth(),n)),isNaN(this.model.maxHeight)&&0<this.model.maxHeight.indexOf("%")&&(a=this._convertPercentageToPixel(r.innerHeight(),a)),this._ejDialog.find("div.e-resize-handle").ejResizable({minHeight:t,minWidth:e,maxHeight:a,maxWidth:n,handle:"e-widget-content",resizeStart:function(e){if(i.dlgresized=!0,!i.model.enabled)return!1;s||i._trigger("resizeStart",{event:e}),s=!0,i.model.position={X:i._ejDialog.css("left"),Y:i._ejDialog.css("top")},i._dialogPosition()},resize:function(e){i.dlgresized=!0;var t=o(e.element).parents("div.e-dialog-wrap");i.model.height=o(t).outerHeight(),i.model.width=o(t).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),i._updateCaptionWidth(),i._trigger("resize",{event:e}),i._sizeType={width:"px",height:"px"},this.scrObj&&this.scrObj._resetScroller()},resizeStop:function(e){i.dlgresized=!0,i._ejDialog.focus(),i._sizeInPercent();var t=o(e.element).parents("div.e-dialog-wrap");i.model.height=o(t).outerHeight(),i.model.width=o(t).outerWidth(),i._setSize(),i._setContainerSize(),i._resetScroller(),s&&i._trigger("resizeStop",{event:e}),s=!1,i._setDimension()},helper:function(e){return o(i._ejDialog)}}),this}},_dialogPosition:function(){var e;return 0<this._ejDialog.parents("form").length&&a.isNullOrUndefined(this.model.containment)&&a.isNullOrUndefined(this.model.target)&&this._ejDialog.appendTo(this._ejDialog.parents("form")),""!=this.model.position.X||""!=this.model.position.Y?(this._ejDialog.css("position","absolute"),a.isNullOrUndefined(this.model.target)&&a.isNullOrUndefined(this.model.containment)?(this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y)):(e=a.isNullOrUndefined(this.model.containment)?this.model.target:this.model.containment,this.dlgresized||this._keyNavigation?(this._ejDialog.css("left",this.model.position.X),this._ejDialog.css("top",this.model.position.Y)):(this._ejDialog.css("left",o(e).offset().left+parseInt(this.model.position.X)),this._ejDialog.css("top",o(e).offset().top+parseInt(this.model.position.Y))))):this._centerPosition(),this},_centerPosition:function(){var e,t,i,s=0,n=0;a.isNullOrUndefined(this.model.target)&&(a.isNullOrUndefined(this._target)||o(this._target).is(o(document))||o(this._target).is(o(window)))?(i=document.documentElement,s=(o(window).outerWidth()>this._ejDialog.width()?(o(window).outerWidth()-this._ejDialog.outerWidth())/2:0)+(window.pageXOffset||i.scrollLeft),n=(o(window).outerHeight()>this._ejDialog.height()?(o(window).outerHeight()-this._ejDialog.outerHeight())/2:0)+(window.pageYOffset||i.scrollTop)):("static"==(e=a.isNullOrUndefined(this._target)?o(this.model.target):o(this._target)).css("position")&&(t=e.offsetParent().offset(),s=(i=e.offset()).left-t.left,n=i.top-t.top),e.outerWidth()>this._ejDialog.width()&&(s+=(e.outerWidth()-this._ejDialog.width())/2),e.outerHeight()>this._ejDialog.height()&&(n+=(e.outerHeight()-this._ejDialog.height())/2)),this._ejDialog.css({top:n,left:s}),this._ejDialog.css("position","absolute")},_closeClick:function(e){"touchstart"==e.type&&e.preventDefault(),this.model.enabled&&(e.stopPropagation(),this.close(e))},_collapsibleClick:function(e){this.model.enabled&&(o(e.target).hasClass("e-arrowhead-up")?this._actionCollapse(e):o(e.target).hasClass("e-arrowhead-down")&&this._actionExpand(e))},_actionCollapse:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-up").addClass("e-arrowhead-down"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.expand),this._ejDialog.find("div.e-resize-handle").hide(),this._ejDialog.find(".e-widget-content").parent().slideUp("fast"),this.model.showFooter&&this._dialogFooterbar.slideUp("fast"),this._ejDialog.removeClass("e-shadow"),this._ejDialog.css("minHeight","0"),this._ejDialog.height("auto"),this._trigger("collapse",{isInteraction:!!e}),this._collapsible=!0)},_actionExpand:function(e){this._minimize||(this._dialogCollapsible&&this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible&&this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._ejDialog.addClass("e-shadow"),this._ejDialog.find(".e-widget-content").parent().slideDown("fast"),this.model.showFooter&&this._dialogFooterbar.slideDown("fast"),this._maximize?(this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"})):this._ejDialog.height(this.model.height),this._ejDialog.find("div.e-resize-handle").show(),this._trigger("expand",{isInteraction:!!e}),this._collapsible=!1)},_maximizeClick:function(e){var t;this.model.enabled&&(t=o(e.target),e=this._dialogMaximize,t.hasClass("e-maximize")?(this._actionMaximize(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-minus"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.minimize)),t.removeClass("e-maximize").addClass("e-restore"),this._dialogMaximize.attr("title",this.model.tooltip.restore),this._hideIcon(!0)):t.hasClass("e-restore")&&(this._actionRestore(),t.removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize.attr("title",this.model.tooltip.maximize),!a.isNullOrUndefined(e)&&o(e).hasClass("e-arrowhead-down")&&(o(e).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMaximize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0))),this._resetScroller()},_actionMaximize:function(){this._ejDialog.css("top","0px").css("left","0px").css("overflow","hidden").css("position",this.model.containment||this.model.target?"absolute":"fixed"),this._ejDialog.css({width:"100%",height:"100%"}),this.element.css({width:"100%",height:"100%"}),this.contentDiv.css({width:"100%",height:"100%"}),this._maximize=!0,this._minimize=!1;var e=this;this._dialogCollapsible&&!a.isNullOrUndefined(this._dialogCollapsible.hasClass("e-arrowhead-down"))&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse),this._collapseValue=!0),1==this._collapseValue&&this._ejDialog.find(".e-widget-content").parent().slideDown("fast",function(){e.refresh(),e._reRenderScroller()}),this._resetScroller(),o(this.contentDiv).is(":hidden")&&this.contentDiv.show()},_actionRestore:function(){this.element.height("").width(""),this.contentDiv.height("").width(""),this._restoreDialog(),this._maximize=this._minimize=!1},_minimizeClick:function(e){var t;this.model.enabled&&(t=o(e.target),e=this._dialogMinimize.hasClass("e-icon")&&this._dialogMinimize,t.hasClass("e-minus")?(this._maximize&&this._setSize(),this._actionMinimize()):t.hasClass("e-restore")&&(this._actionRestore(),t.removeClass("e-restore").addClass("e-minus"),this._dialogMinimize.attr("title",this.model.tooltip.minimize),!a.isNullOrUndefined(e)&&o(e).hasClass("e-arrowhead-down")&&(o(e).removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogMinimize.attr("title",this.model.tooltip.collapse)),this._hideIcon(!0)))},_actionMinimize:function(){var e;o(window).height(),this._ejDialog.height(),this.element.height();this._ejDialog.css("top","").css("bottom","0").css("left","0").css("position",this.model.containment||this.model.target?"absolute":"fixed"),this._ejDialog.css("minHeight","0"),this._dialogTitlebar?(this._dialogTitlebar.find(".e-restore").removeClass("e-restore").addClass("e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._dialogTitlebar.find(".e-minus").removeClass("e-minus").addClass("e-restore"),this._dialogMinimize&&this._dialogMinimize.attr("title",this.model.tooltip.restore),this._isOpen?e=this._dialogTitlebar.outerHeight():(this._ejDialog.css({display:"block",visibility:"hidden"}),e=this._dialogTitlebar.outerHeight(),this._ejDialog.css({display:"none",visibility:""})),this._ejDialog.css("height",e+2),this._hideIcon(!1)):this._ejDialog.css("height",""),this.contentDiv.hide(),this.model.showFooter&&this._dialogFooterbar.hide(),this._maximize=!1,this._minimize=!0},_hideIcon:function(e){var t=this._dialogCollapsible||null;e?(a.isNullOrUndefined(t)||o(t).parent(".e-dialog-icon").show(),this._ejDialog.find("div.e-resize-handle").show()):(a.isNullOrUndefined(t)||o(t).parent(".e-dialog-icon").hide(),this._ejDialog.find("div.e-resize-handle").hide())},_pinClick:function(e){this.model.enabled&&((e=o(e.target)).hasClass("e-unpin")?(this.dialogPin=!0,e.removeClass("e-unpin").addClass("e-pin"),this._dialogPin.attr("title",this.model.tooltip.unPin)):e.hasClass("e-pin")&&(this.dialogPin=!1,e.removeClass("e-pin").addClass("e-unpin"),this._dialogPin.attr("title",this.model.tooltip.pin)))},_restoreDialog:function(){this.contentDiv.show(),this.model.showFooter&&this._dialogFooterbar.show(),this._ejDialog.css({position:"absolute",bottom:""}).addClass("e-shadow"),this._setSize()._resetScroller(),this._dialogTitlebar&&(this._dialogTitlebar.find(".e-minus").parent().show(),this._dialogCollapsible&&(this._dialogCollapsible.removeClass("e-arrowhead-down").addClass("e-arrowhead-up"),this._dialogCollapsible.attr("title",this.model.tooltip.collapse)))},_clickHandler:function(e){var t=this._dialogMaxZindex();parseInt(this._ejDialog.css("zIndex"))<t&&this._ejDialog.css({zIndex:t+1})},_mouseClick:function(e){e.currentTarget==this._id&&(o(e.target).hasClass("e-dialog")||o(e.target).hasClass("e-icon e-resize-handle"))&&(this._setZindex(),o(e.target).closest(".e-dialog.e-widget").focus())},_keyDown:function(e){var t=e.keyCode||e.which||e.charCode;this.model.allowKeyboardNavigation&&this.model.enabled&&o(e.target).hasClass("e-dialog")&&-1<o.inArray(t,this.keyConfigs)&&this.model.allowDraggable&&!this.dialogPin&&(this._keyPressed(t,e.ctrlKey),e.preventDefault()),this.model.closeOnEscape&&27===t&&this.model.enabled&&(this.element.find(".e-js.e-dialog").first().is(":visible")||(this.close(e),e.preventDefault())),13===t&&this.model.enabled&&(o(e.target).hasClass("e-close")?this.close(e):(o(e.target).hasClass("e-arrowhead-up")||o(e.target).hasClass("e-arrowhead-down"))&&this._collapsibleClick(e),o(e.target).hasClass("e-maximize")||o(e.target).hasClass("e-restore")&&o(e.target).is(this._dialogMaximize)?this._maximizeClick(e):(o(e.target).hasClass("e-minus")||o(e.target).hasClass("e-restore")&&o(e.target).is(this._dialogMinimize))&&this._minimizeClick(e),(o(e.target).hasClass("e-pin")||o(e.target).hasClass("e-unpin"))&&this._pinClick(e)),9==t&&this.model.enableModal&&this._focusOnTab(e)},_focusOnTab:function(e){var t=this._ejDialog.find("a, button, :input, select, [tabindex]:not('-1')"),t=o(t).find("a, button, :input, select, [tabindex]:not('')");e.shiftKey?t[t.index(e.target)-1]||(e.preventDefault(),t.last().focus()):t[t.index(e.target)+1]||(e.preventDefault(),t[0].focus())},_keyPressed:function(e,t){switch(this._keyNavigation=!0,e){case 40:t?this._resizing("height",this._ejDialog.outerHeight()+3):this.option("position",{X:this._ejDialog.position().left,Y:this._ejDialog.position().top+3});break;case 39:t?this._resizing("width",this._ejDialog.outerWidth()+3):this.option("position",{X:this._ejDialog.position().left+3,Y:this._ejDialog.position().top});break;case 38:t?this._resizing("height",this._ejDialog.outerHeight()-3):this.option("position",{X:0==this._ejDialog.position().left?0:this._ejDialog.position().left,Y:3<this._ejDialog.position().top?this._ejDialog.position().top-3:0});break;case 37:t?this._resizing("width",this._ejDialog.outerWidth()-3):this.option("position",{X:3<this._ejDialog.position().left?this._ejDialog.position().left-3:0,Y:0==this._ejDialog.position().top?0:this._ejDialog.position().top})}},_resizing:function(e,t){this.model.enableResize&&this.option(e,t)},_sizeInPercent:function(){if(!this._enableWindowResize())return this;var e=this._getParentObj();return"%"==this._sizeType.width?this._widthPercent=parseFloat(this.model.width):this._widthPercent=this._convertPixelToPercentage(e.outerWidth(),this._ejDialog.outerWidth()),"%"==this._sizeType.height?this._heightPercent=parseFloat(this.model.height):this._heightPercent=this._convertPixelToPercentage(e.outerHeight(),this._ejDialog.outerHeight()),100<=this._widthPercent&&(this._widthPercent=100,this._ejDialog.outerWidth(e.outerWidth()),this.model.width=this._ejDialog.width()),100<=this._heightPercent&&(this._heightPercent=100,this._ejDialog.outerHeight(e.outerHeight()),this.model.height=this._ejDialog.height()),this},_getParentObj:function(){return a.isNullOrUndefined(this.model.containment)?a.isNullOrUndefined(this.model.target)?o(document):o(this.model.target):o(this.model.containment)},_convertPercentageToPixel:function(e,t){return Math.round(t*e/100)},_convertPixelToPercentage:function(e,t){return Math.round(t/e*100)},_reSizeHandler:function(){var e;this._maximize?this._resetScroller():(""!=this.model.position.X&&(""!=this.model.position.Y||this._minimize)||this._centerPosition(),e=this._getParentObj(),this._change=!1,this._windowSize.outerWidth!=o(window).outerWidth()?"%"==this._sizeType.width?this._percentageWidthDimension(e):this._pixelsWidthDimension(e):this._windowSize.outerHeight!=o(window).outerHeight()&&("%"==this._sizeType.height?this._percentageHeightDimension(e):this._pixelsHeightDimension(e)),this._change&&this._resizeContainer(e),this._windowSize={outerWidth:o(window).outerWidth(),outerHeight:o(window).outerHeight()},this._centerPosition())},_setDimension:function(){a.isNullOrUndefined(this.model.maxWidth)?a.isNullOrUndefined(this._sizeType.width)?this._maxWidth=+this.model.width:"px"!=this._sizeType.width&&"auto"!=this._sizeType.width||(this._maxWidth=this.model.width):this._maxWidth=this.model.maxWidth,a.isNullOrUndefined(this.model.maxHeight)?a.isNullOrUndefined(this._sizeType.height)?this._maxHeight=+this.model.height:"px"!=this._sizeType.height&&"auto"!=this._sizeType.height||(this._maxHeight=this.model.height):this._maxHeight=this.model.maxHeight},_percentageWidthDimension:function(e){this._ejDialog.outerWidth(this._convertPercentageToPixel(e.outerWidth(),this._widthPercent)),this._change=!0},_percentageHeightDimension:function(e){this._ejDialog.outerHeight(this._convertPercentageToPixel(e.outerHeight(),this._heightPercent)),this._change=!0},_pixelsWidthDimension:function(e){o(e).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(e),o(e).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(e),parseInt(this._ejDialog.css("width"))<parseInt(this._maxWidth)&&(parseInt(this._maxWidth)<o(e).outerWidth()?this._ejDialog.outerWidth(parseInt(this._maxWidth)):this._ejDialog.outerWidth(e.outerWidth()),this._change=!0)},_pixelsHeightDimension:function(e){o(e).outerHeight()<=this._ejDialog.outerHeight()&&!this.model.isResponsive&&this._setHeight(e),o(e).outerWidth()<=this._ejDialog.outerWidth()&&this._setWidth(e),parseInt(this._ejDialog.css("height"))<parseInt(this._maxHeight)&&(parseInt(this._maxHeight)<o(e).outerHeight()?this._ejDialog.outerWidth(parseInt(this._maxHeight)):this._ejDialog.outerHeight(e.outerHeight()),this._change=!0)},_setWidth:function(e){this._ejDialog.outerWidth(e.outerWidth()),this._change=!0},_setHeight:function(e){this._ejDialog.outerHeight(e.outerHeight()),this._change=!0},_resizeContainer:function(e){this.contentDiv.width(this._ejDialog.width()),this.element.outerWidth(this.contentDiv.width());var t=this._ejDialog.height()-(this.model.showHeader?o(this._ejDialog.find("div.e-titlebar")).outerHeight(!0):0);this.contentDiv.height(a.isNullOrUndefined(this.contentDiv)?t-1:"0px"==this.contentDiv.css("border-width")),this.element.outerHeight(a.isNullOrUndefined(this.contentDiv)?t-1:"0px"==this.contentDiv.css("border-width")),this.scroller=this.contentDiv.ejScroller({width:!a.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this._ejDialog.width():this._ejDialog.width()-2),height:!a.isNullOrUndefined(this.contentDiv)&&("0px"==this.contentDiv.css("border-width")?this.element.outerHeight():this.element.outerHeight()-2),rtl:this.model.rtl,enableTouchScroll:!1}),this.scroller=this.contentDiv.data("ejScroller"),this._reRenderScroller(),""==this.model.position.X||""==this.model.position.Y&&!this._minimize||this._positionChanged?this._centerPosition():this._ejDialog.css("height",this._dialogTitlebar.outerHeight()),this._updateCaptionWidth(),this._change=!1},_getLocalizedLabels:function(){return a.getLocalizedConstants(this.sfType,this.model.locale)},_enableWindowResize:function(){return!!(this.model.isResponsive||isNaN(this.model.width)&&0<this.model.width.indexOf("%")&&isNaN(this.model.height)&&0<this.model.height.indexOf("%")&&"auto"!=this.model.height)},_wireResizing:function(){o(window)[this._enableWindowResize()?"on":"off"]("resize",o.proxy(this._reSizeHandler,this))},_wireEvents:function(){this._on(this._ejDialog,"keydown",this._keyDown),this._on(this._ejDialog,"click",this._mouseClick),this._wireResizing()},refresh:function(){this._resetScroller()},open:function(){if(this._isOpen)return!0;if(1==this._trigger("beforeOpen"))return!1;this.element.css("display","block"),this._setZindex(),this._minimize||this._maximize||this._init||this._dialogPosition();var e,t,i=this,s={};return this._ejDialog.show(),this.model.enableAnimation&&(this._ejDialog.css({opacity:0}),s="slide"==this.model.animation.show.effect?(t=this._ejDialog.css("left"),this._ejDialog.css({left:-this._ejDialog.width()}),{left:t,opacity:1}):{opacity:1}),this._ejDialog.animate(s,this.model.enableAnimation?Number(this.model.animation.show.duration):0,function(){i.model&&("none"==i._ejDialog.css("display")&&i._ejDialog.show(),i._ejDialog.eq(0).focus(),i._ejDialog.css({opacity:""}),i.contentDiv.find("a:visible:enabled, button:visible:enabled, :input:visible:enabled, select:visible:enabled, .e-input").first().focus(),i._trigger("open"),i._updateCaptionWidth(),i.model.enableModal&&!i.model.backgroundScroll&&(i._ejDialog.height()>o(window).height()&&i._ejDialog.css("height",o(window).height()),i.model.height=o(window).height(),i._overLay.css("position","fixed"),i.scroller.refresh(!0),i.refresh()),(i.model.maxHeight||i.model.maxWidth)&&(e=i._ejDialog.outerHeight(!0)-(i._dialogTitlebar?i._dialogTitlebar.outerHeight(!0):0),"auto"!=i.model.height&&"100%"!=i.model.height||(e=i.model.height),i._updateScroller(a.isNullOrUndefined(this.contentDiv)?e-2:"0px"==this.contentDiv.css("border-width"),a.isNullOrUndefined(this.contentDiv)?i._ejDialog.width()-2:"0px"==this.contentDiv.css("border-width")),i.scroller.refresh()))}),1==this.model.enableModal&&this._createOverlay(),this._isOpen=!0,!this.element.find("> .e-draggable.e-titlebar")||(s=o("#"+this.element.find("> .e-draggable.e-titlebar").attr("id")).data("ejDraggable"))&&s.option("cursorAt",this.element.offset()),this},close:function(e){if(!this._isOpen||!this.model.enabled)return!0;var t=!!e;if(1==this._trigger("beforeClose",{event:e,isInteraction:t}))return!1;this._isOpen=!1;var i=this,s={};return this.model.enableAnimation&&(s="slide"==this.model.animation.hide.effect?{left:-this._ejDialog.width(),opacity:0}:{opacity:0}),this._ejDialog.animate(s,this.model.enableAnimation?Number(this.model.animation.hide.duration):0,function(){i._trigger("close",{event:e,isInteraction:t}),i._ejDialog.hide()}),this.model.enableModal&&(this._overLay&&this._overLay.remove(),this.model.backgroundScroll||o("body").removeClass("e-dialog-modal")),this},isOpened:function(){return this.isOpen()},isOpen:function(){return this._isOpen},setTitle:function(e){return this.model.title=e,this._titleText.text(e),this._updateCaptionWidth(),this},setContent:function(e){return!!this.model.enabled&&(this.element.html(e),this._resetScroller(),this)},focus:function(){return this._setZindex(),this.element.focus(),this},minimize:function(){if(this.model.showHeader)return this._actionMinimize(),o(this.wrapper.find(".e-minus")[0]).parent().hide(),this},maximize:function(){if(this.model.showHeader)return this._actionMaximize(),o(this.wrapper.find(".e-maximize")[0]).removeClass("e-maximize").addClass("e-restore"),o(this.wrapper.find(".e-restore")[1]).removeClass("e-restore").addClass("e-minus"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.restore),this._dialogTitlebar&&this._dialogTitlebar.find(".e-minus").parent().show(),this._hideIcon(!0),this},restore:function(){if(this.model.showHeader){var e=this._minimize;return this._actionRestore(),o(this.wrapper.find(".e-restore")[0]).removeClass("e-restore").addClass(e?"e-minus":"e-maximize"),this._dialogMaximize&&this._dialogMaximize.attr("title",this.model.tooltip.maximize),this._hideIcon(!0),this}},pin:function(){if(this.model.showHeader)return this.dialogPin=!0,o(this.wrapper.find(".e-unpin")[0]).removeClass("e-unpin").addClass("e-pin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.unPin),this},unpin:function(){if(this.model.showHeader)return this.dialogPin=!1,o(this.wrapper.find(".e-pin")[0]).removeClass("e-pin").addClass("e-unpin"),this._dialogPin&&this._dialogPin.attr("title",this.model.tooltip.pin),this},collapse:function(){if(this.model.showHeader)return this._actionCollapse(),this._collapseValue=!0,this},expand:function(){if(this.model.showHeader)return this._actionExpand(),this}}),a.Dialog.Locale=a.Dialog.Locale||{},a.Dialog.Locale.default=a.Dialog.Locale["en-US"]={tooltip:{close:"Close",collapse:"Collapse",restore:"Restore",maximize:"Maximize",minimize:"Minimize",expand:"Expand",unPin:"UnPin",pin:"Pin"},title:"",closeIconTooltip:"close"}}(jQuery,Syncfusion),function(h,d,i){d.widget("ejTimePicker","ej.TimePicker",{element:null,model:null,validTags:["input"],_addToPersist:["value"],_rootCSS:"e-timepicker",_setFirst:!1,type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"],requireFormatters:!0},_requiresID:!0,defaults:{cssClass:"",timeFormat:"",value:null,enableAnimation:!0,locale:"en-US",htmlAttributes:{},readOnly:!1,showPopupButton:!0,enableStrictMode:!1,interval:30,hourInterval:1,minutesInterval:1,secondsInterval:1,height:"",width:"",minTime:"12:00 AM",maxTime:"11:59 PM",showRoundedCorner:!1,enableRTL:!1,popupHeight:"191px",popupWidth:"auto",enabled:!0,enablePersistence:!1,disableTimeRanges:null,validationRules:null,validationMessages:null,focusIn:null,focusOut:null,beforeChange:null,change:null,select:null,create:null,destroy:null,beforeOpen:null,beforeClose:null,open:null,close:null,watermarkText:"select a time"},dataTypes:{timeFormat:"string",minTime:"string",maxTime:"string",readOnly:"boolean",interval:"number",showPopupButton:"boolean",locale:"string",hourInterval:"number",minutesInterval:"number",secondsInterval:"number",enabled:"boolean",enablePersistence:"boolean",enableAnimation:"boolean",enableStrictMode:"boolean",disableTimeRanges:"data",htmlAttributes:"data",validationRules:"data",validationMessages:"data",watermarkText:"string"},observables:["value"],enable:function(){this.model.enabled||(this.element[0].disabled=!1,this.element.prop("disabled",!1),this.model.enabled=!0,this.wrapper.removeClass("e-disable"),this.element.removeClass("e-disable").attr("aria-disabled",!1),this.model.showPopupButton&&(this.timeIcon.removeClass("e-disable").attr("aria-disabled",!1),this.popupList&&this.popupList.removeClass("e-disable").attr("aria-disabled",!1)),this._isIE8&&this.timeIcon.children().removeClass("e-disable"))},disable:function(){this.model.enabled&&(this.element[0].disabled=!0,this.model.enabled=!1,this.element.attr("disabled","disabled"),this.wrapper.addClass("e-disable"),this.element.addClass("e-disable").attr("aria-disabled",!0),this.model.showPopupButton&&(this.timeIcon.addClass("e-disable").attr("aria-disabled",!0),this.popupList&&this.popupList.addClass("e-disable").attr("aria-disabled",!0)),this._isIE8&&this.timeIcon.children().addClass("e-disable"),this._hideResult())},getValue:function(){return this.element.val()},setCurrentTime:function(){this.model.readOnly||this._setMask()},setValue:function(e){var t=this.model.value;this.model.value=d.format(this._createObject(e,!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(e,!0)&&(e=this._isValid(this.model.value)?this._localizeTime(this.model.value):this.model.value,this.element.val(e)),t!=this.model.value&&this._raiseChangeEvent(t,!0),this._checkErrorClass()},show:function(){this.showDropdown||this._getInternalEvents||this._showResult()},hide:function(){this.showDropdown&&this._hideResult()},_ISORegex:function(){this._tokens=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,this._extISORegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._basicISORegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,this._numberRegex={2:/\d\d?/,4:/^\d{4}/,z:/Z|[+-]\d\d(?::?\d\d)?/gi,t:/T/,"-":/\-/,":":/:/},this._zeroRegex=/Z|[+-]\d\d(?::?\d\d)?/,this._dates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],this._times=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]]},_timeFormat:function(e){e=e||d.preferredCulture(this.model.locale).calendars.standard.patterns.t;var t=this._validateTimeFormat(e);return t&&(this.model.timeFormat=t,this.model.minTime=d.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=d.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),this.model.value?(this._setModelOption=!0,this.model.value=this._localizeTime(this.model.value),this.element.val(this.model.value)):(this._setModelOption=!1,(e=this._localizeTime(this.element.val()))&&this._checkMinMax(e)&&(this.model.value=e,this.element.val(e)))),t},_getTimeFormat:function(){this._prevTimeFormat&&(this.model.timeFormat=d.preferredCulture(this.model.locale).calendar.patterns.t||"h:mm tt"),this.seperator=this._getSeperator()},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.popupList&&this.popupList.removeClass(this.model.cssClass).addClass(e)},_localize:function(e){var t=this._createObject(this.model.value,!0);this.model.locale=e,this._getTimeFormat(),this.model.minTime=d.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=d.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),d.isNullOrUndefined(this._options)||d.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),t?(this.model.value=this._localizeTime(t),this.element.val(this.model.value)):(t=this._localizeTime(this.element.val()))&&this._checkMinMax(t)&&(this.model.value=t,this.element.val(t)),this._getAmPm()},_setWaterMark:function(){if(null!=this.element&&this.element.hasClass("e-input"))return this._localizedLabels.watermarkText&&""==this.element.val()&&(this.isValidState=!0,this._checkErrorClass()),this._isSupport||""!=this.element.val()?h(this.element).attr("placeholder",this._localizedLabels.watermarkText):this._hiddenInput.css("display","block").val(this._localizedLabels.watermarkText),!0},_localizedLabelToModel:function(){this.model.watermarkText=this._localizedLabels.watermarkText,this.model.buttonText=this._localizedLabels.buttonText},_setLocalize:function(e){(e=d.preferredCulture(e))&&(this.model.locale="en"==e.name?"en-US":e.name,d.isNullOrUndefined(this._options)||!d.isNullOrUndefined(this._options.timeFormat)&&this._options.timeFormat||(this.model.timeFormat=d.preferredCulture(this.model.locale).calendars.standard.patterns.t),this._prevTimeFormat=!(!d.isNullOrUndefined(this._options.timeFormat)&&""!=this._options.timeFormat))},_updateInput:function(){var e;d.isNullOrUndefined(this._options)||(e=this._localizeTime(this._options.value),d.isNullOrUndefined(e)||"string"==typeof e&&this.model.enableStrictMode&&!this.model.value&&(this.element.val(this._options.value),this.isValidState=""==this.element.val(),this._checkErrorClass()))},_createMinMaxObj:function(){this._minTimeObj=this._createObject(this.model.minTime),this._minTimeObj||(this.model.minTime=d.format(this._createObject((new Date).setHours(0,0,0,0)),this.model.timeFormat,this.model.locale)),this._maxTimeObj=this._createObject(this.model.maxTime),this._maxTimeObj||(this.model.maxTime=d.format(this._createObject((new Date).setHours(23,59,59,59)),this.model.timeFormat,this.model.locale))},_setMinMax:function(){var e=(new Date).setHours(0,0,0,0),t=(new Date).setHours(23,59,59,59);!d.isNullOrUndefined(this._options)&&d.isNullOrUndefined(this._options.minTime)&&(this.model.minTime=d.format(this._createObject(e),this.model.timeFormat,this.model.locale)),!d.isNullOrUndefined(this._options)&&d.isNullOrUndefined(this._options.maxTime)&&(this.model.maxTime=d.format(this._createObject(t),this.model.timeFormat,this.model.locale)),this._createMinMaxObj()},_init:function(e){if(this._options=e,this._cloneElement=this.element.clone(),this._ISORegex(),this._isSupport=document.createElement("input").placeholder!=i,!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this._initialize(),this._render(),this._wireEvents(),e&&e.value!=i&&e.value!=this.element.val()&&this._trigger("_change",{value:this.element.val()}),this._updateInput(),this._updateTextbox(),null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation())},_updateTextbox:function(){if(this._options.disableTimeRanges){for(var e=!0,t=0;t<this._options.disableTimeRanges.length;t++)if((this.model.minTime>=this._options.disableTimeRanges[t].startTime||this.model.minTime<=this._options.disableTimeRanges[t].endTime)&&this._options.disableTimeRanges[t].startTime==this.model.minTime){e=!1;break}(this._options===i||this._options.value===i&&!this.model.value&&e)&&this._setTime(this._localizeTime(this.model.minTime))}else this._options!==i&&(this._options.value!==i||this.model.value)||this._setTime(this._localizeTime(this.model.minTime))},_setMinMaxTime:function(e,t){!d.isNullOrUndefined(t.minTime)&&h.trim(t.minTime)&&this._isValid(t.minTime)&&(this.model.minTime=t.minTime,this._minTimeObj=this._createObject(this.model.minTime),this._validateTimes()),!d.isNullOrUndefined(t.maxTime)&&h.trim(t.maxTime)&&this._isValid(t.maxTime)&&(this.model.maxTime=t.maxTime,this._maxTimeObj=this._createObject(this.model.maxTime),this._validateTimes()),this._validateMinMax(),this._createMinMaxObj(),d.isNullOrUndefined(t.minTime)||(t.minTime=this.model.minTime),d.isNullOrUndefined(t.maxTime)||(t.maxTime=this.model.maxTime),this._checkMinMax(this.model.value)||(this.model.enableStrictMode?(this.isValidState=!1,this.model.value=null):(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime))),e!==this.model.value&&this._isValid(this.model.value,!0)&&this.element.val(this.model.value)},_setModel:function(e){var t,i,s=!1,n=this.model.value;for(t in e)switch("height"!=t&&"width"!=t&&"htmlAttributes"!=t&&"watermarkText"!=t&&"enabled"!=t&&"validationRules"!=t&&"validationMessages"!=t&&d.isNullOrUndefined(this.popupList)&&this._renderDropdown(),t){case"timeFormat":var a=this._createObject(this.model.value);this._preTimeformat=this.model.timeFormat;var r=this._timeFormat(e[t]);e[t]=this.model.timeFormat,r&&(this.seperator=this._getSeperator());s=+a!=+this._createObject(this.model.value);break;case"locale":a=this._createObject(this.model.value);this._localize(e[t]),this.model.minTime=d.format(this._createObject(this._minTimeObj),this.model.timeFormat,this.model.locale),this.model.maxTime=d.format(this._createObject(this._maxTimeObj),this.model.timeFormat,this.model.locale),s=+a!=+this._createObject(this.model.value);break;case"interval":this.model.interval=e[t];break;case"cssClass":this._changeSkin(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"enableRTL":this._setRtl(e[t]);break;case"height":this._setHeight(e[t]);break;case"width":this.wrapper.width(e[t]),this._setListWidth();break;case"value":d.isPlainObject(e[t])&&(e[t]=null),this.model.value=d.format(this._createObject(e[t],!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(e[t],!0)&&(i=this._isValid(e[t])?this._localizeTime(e[t]):e[t],this.element.val(i)),e[t]=this.model.value,s=!0;break;case"enableStrictMode":this.model.enableStrictMode=e[t];break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessages=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initTimeValidator(),this._setTimeValidation());break;case"validationMessages":this.model.validationMessages=e[t],null!=this.model.validationRules&&null!=this.model.validationMessages&&(this._initTimeValidator(),this._setTimeValidation());break;case"popupHeight":this.model.popupHeight=e[t],this._setListHeight();break;case"popupWidth":this.model.popupWidth=e[t],this._setListWidth();break;case"enabled":e[t]?this.enable():this.disable();break;case"htmlAttributes":this._addAttr(e[t]);break;case"disableTimeRanges":this.model.disableTimeRanges=e[t],this._initStartEnd(),this.model.value=d.format(this._createObject(this.element.val(),!0),this.model.timeFormat,this.model.locale),this._ensureValue(),this._enableMask(),this.model.enableStrictMode&&!this._isValid(this.element.val(),!0)&&this.element.val(this.element.val()),s=!0;break;case"watermarkText":d.isNullOrUndefined(this._options)&&(this._options={}),this._options[t]=this.model.watermarkText=e[t],this._localizedLabels.watermarkText=this.model.watermarkText,this._setWaterMark()}d.isNullOrUndefined(e.minTime)&&d.isNullOrUndefined(e.maxTime)||(this._setMinMaxTime(n,e),s=!0),d.isNullOrUndefined(e.showPopupButton)?!this.model.showPopupButton||!r&&d.isNullOrUndefined(e.minTime)&&d.isNullOrUndefined(e.maxTime)&&d.isNullOrUndefined(e.locale)&&d.isNullOrUndefined(e.interval)&&d.isNullOrUndefined(e.disableTimeRanges)||this._reRenderDropdown():this._showButton(e[t]),s&&(this._raiseChangeEvent(n,!0),e.value=this.model.value),this._checkErrorClass()},_destroy:function(){this.element.insertAfter(this.wrapper),this.wrapper.remove(),this.element.removeClass("e-input").removeAttr("ondragstart draggable aria-atomic aria-live aria-readonly").val(this.element.attr("value")),this._cloneElement.attr("name")||this.element.removeAttr("name"),this.popupList&&this.popupList.remove()},_initialize:function(){this.target=this.element[0],this.timeIcon=null,this._disabledItems=[],this.popupList=null,this.focused=!1,this.start=0,this.end=0,this.min=null,this.max=null,this.incomplete=!1,this.downPosition=0,this._setLocalize(this.model.locale),this._setMinMax(),this._getAmPm(),this.showDropdown=!1,this._activeItem=0,this.isValidState=!0,this._manualFocus=!1,this._isIE7=this._checkIE7(),this._initStartEnd(),this._localizedLabels=this._getLocalizedLabels(),d.isNullOrUndefined(this._options)||d.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText),d.isNullOrUndefined(this.model.value)&&""!=this.element[0].value&&(this.model.value=this.element[0].value),this._isIE8="msie"==d.browserInfo().name&&"8.0"==d.browserInfo().version,this._getInternalEvents=!1,this._dateTimeInternal=!1,this.model.timeFormat?this.seperator=this._getSeperator():this._getTimeFormat()},_render:function(){this._renderWrapper(),this._setDimentions(),this._renderTimeIcon(),this._validateTimes(),this._createMinMaxObj(),this._addAttr(this.model.htmlAttributes),this._checkProperties(),this._enableMask(),this._checkErrorClass(),this.element.attr({"aria-atomic":"true","aria-live":"assertive","aria-readonly":this.model.readOnly,value:this.model.value}),d.isNullOrUndefined(this.model.value)?this.wrapper.addClass("e-valid"):this.wrapper.removeClass("e-valid")},_renderWrapper:function(){var e;this.element.addClass("e-input").attr({tabindex:"0",role:"combobox","aria-expanded":"false"}),this.wrapper=d.buildTag("span.e-timewidget e-widget "+this.model.cssClass+"#"+this.target.id+"_timewidget").insertAfter(this.element),this.wrapper.attr("style",this.element.attr("style")),this.element.removeAttr("style"),d.isTouchDevice()||this.wrapper.addClass("e-ntouch"),this.container=d.buildTag("span.e-in-wrap e-box").append(this.element),this.wrapper.append(this.container),this._isSupport||(this._hiddenInput=d.buildTag("input.e-input e-placeholder ","",{},{type:"text"}).insertAfter(this.element),this._hiddenInput.val(this._localizedLabels.watermarkText),this._hiddenInput.css("display","block"),h((e=this)._hiddenInput).focus(function(){e.element.focus()}))},_addAttr:function(e){var s=this;h.map(e,function(e,t){var i=t.toLowerCase();"class"==i?s.wrapper.addClass(e):"disabled"==i&&"disabled"==e?s.disable():"readOnly"==i&&"readOnly"==e?s.model.readOnly=!0:"style"==i?s.wrapper.attr(t,e):"id"==i?(s.wrapper.attr(t,e+"_wrapper"),s.element.attr(t,e)):(d.isValidAttr(s.element[0],t)?s.element:s.wrapper).attr(t,e)})},_initTimeValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setTimeValidation:function(){this.element.rules("add",this.model.validationRules);var e,t=(t=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),i=this.element.attr("name");for(e in t.settings.messages[i]={},this.model.validationRules){var s=null;if(!d.isNullOrUndefined(this.model.validationRules[e])){if(d.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[e]))for(var n in t.settings.messages[i][e]=h.validator.messages[e],this.model.validationMessages)e==n&&(s=this.model.validationMessages[e]);else s=this.model.validationRules.messages[e];t.settings.messages[i][e]=null!=s?s:h.validator.messages[e]}}},_renderTimeIcon:function(){var e;this.model.showPopupButton&&(this.timeIcon=d.buildTag("span.e-select").attr({role:"button","aria-label":"select"}),e=d.buildTag("span.e-icon e-clock").attr("role","presentation"),this._isIE8&&(this.timeIcon.attr("unselectable","on"),e.attr("unselectable","on")),this.timeIcon.append(e),this.container.append(this.timeIcon).addClass("e-padding"),this._on(this.timeIcon,"mousedown",this._timeIconClick))},_elementClick:function(e){this.showDropdown||this._showResult()},_renderDropdown:function(){var e=h("#"+this.element[0].id+"_popup").get(0);if(e&&h(e).remove(),this.popupList)return!1;this.popupList=d.buildTag("div.e-time-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_popup","",{},{tabindex:0,role:"listbox"}),d.isTouchDevice()||this.popupList.addClass("e-ntouch"),this.popup=this.popupList,this.ul=d.buildTag("ul.e-ul"),this._isIE8&&this.ul.attr("unselectable","on");e=d.buildTag("div").append(this.ul);h("body").append(this.popupList.append(e)),this._renderLiTags(),this._setListHeight(),this._setListWidth(),this.popupList.ejScroller({height:this.popupList.height(),width:0,scrollerSize:20}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.css("display","none"),this._listSize=this.ul.find("li").length},_renderLiTags:function(){this._disabledItems=[];for(var e,t=6e4*this.model.interval,i=!d.isNullOrUndefined(this.model.disableTimeRanges)&&0<this.model.disableTimeRanges.length,s=this._minTimeObj,n=this._maxTimeObj,a=0;this._compareTime(n,s,!0);){e=this._localizeTime(s);var r=h(document.createElement("li"));r[0].appendChild(document.createTextNode(e)),this._isIE8&&r.attr("unselectable","on"),i&&(this._ensureTimeRange(e)?(r.addClass("e-disable"),this._disabledItems.push(a)):r.removeClass("e-disable")),this.ul[0].appendChild(r[0]),s=new Date(s).getTime()+t,a++}var o=this.ul.find("li");d.isTouchDevice()||(this._on(o,"mouseenter",h.proxy(this._OnMouseEnter,this)),this._on(o,"mouseleave",h.proxy(this._OnMouseLeave,this))),this._on(o,"click",h.proxy(this._OnMouseClick,this)),!this.model.showPopupButton&&d.isNullOrUndefined(this.popupList)||this.ul.find("li").attr({tabindex:-1,"aria-selected":!1,role:"option"})},_ensureTimeRange:function(e){if(!d.isNullOrUndefined(this.model.disableTimeRanges))for(var t=this._makeDateTimeObj(e),i=0;i<this.model.disableTimeRanges.length;i++)if(+t>=+this._makeDateTimeObj(this.model.disableTimeRanges[i].startTime)&&+t<=+this._makeDateTimeObj(this.model.disableTimeRanges[i].endTime))return!0;return!1},_initStartEnd:function(){if(this._startTime=[],this._endTime=[],!d.isNullOrUndefined(this.model.disableTimeRanges))for(var e=0;e<this.model.disableTimeRanges.length;e++)this._startTime[e]=this._makeDateTimeObj(this.model.disableTimeRanges[e].startTime),this._endTime[e]=this._makeDateTimeObj(this.model.disableTimeRanges[e].endTime)},_makeDateTimeObj:function(e){if("string"!=typeof e)return e instanceof Date?this._setEmptyDate(e):null;var t=d.preferredCulture(this.model.locale).calendar.patterns.d,i=d.format(new Date("1/1/2000"),t,this.model.locale),i=d.parseDate(i+" "+e,t+" "+this.model.timeFormat,this.model.locale);if(!i){t=new Date(e);if(!isNaN(Date.parse(t))&&!d.isNullOrUndefined(e))return this._setEmptyDate(e);i=new Date("1/1/2000 "+e)}return i},_reRenderDropdown:function(){this.ul.empty(),this._renderLiTags(),this._refreshScroller(),this._changeActiveEle()},_refreshScroller:function(){var e="none"==this.popupList.css("display");this.popupList.css("height","auto"),this.popupList.find(".e-content, .e-vscroll").removeAttr("style"),this.popupList.find(".e-vscroll div").removeAttr("style"),e&&this.popupList.css("display","block"),this.scrollerObj.model.height=this.popupList.height(),this.scrollerObj.model.scrollTop=0,this.scrollerObj.refresh(),this._isIE8&&(h("#"+this.scrollerObj._id).children(".e-vscroll").children().attr("unselectable","on"),h("#"+this.scrollerObj._id).find(".e-vhandle").attr("unselectable","on")),e&&this.popupList.css("display","none")},_removeWatermark:function(){""==this.element.val()||this._isSupport||this._hiddenInput.css("display","none")},_setListWidth:function(){var e;this.popupList&&((e="string"==typeof(e=this.model.popupWidth)&&-1!=e.indexOf("%")||"string"==typeof e?0<parseInt(e)?e:this.model.popupWidth="auto":0<e?e:this.model.popupWidth="auto")&&"auto"!=e?this.popupList.css({width:e}):this.popupList.css({width:this.wrapper.width()})),this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_setListHeight:function(){this.popupList&&this.popupList.css({"max-height":this.model.popupHeight||"191px"}),this.scrollerObj&&(this._refreshScroller(),this._updateScrollTop())},_updateScrollTop:function(){this.scrollerObj.setModel({scrollTop:this._calcScrollTop()})},_refreshPopup:function(){"auto"==this.model.popupWidth&&this.popupList.css({width:this.wrapper.width()}),this._setListPosition(),this._refreshScroller()},_setListPosition:function(){var e=this.wrapper,t=this._getOffset(e),i=h(document).scrollTop()+h(window).height()-(t.top+h(e).outerHeight()),s=t.top-h(document).scrollTop(),n=this.popupList.outerHeight(),a=this.popupList.outerWidth(),r=t.left,o=e.outerHeight(),l=(o-e.height())/2,d=this._getZindexPartial(),n=(n<i||s<n?t.top+o+3:t.top-n-3)-l,l=h(document).scrollLeft()+h(window).width()-r;(this.model.enableRTL||l<a&&a<r+e.outerWidth())&&(r-=this.popupList.outerWidth()-e.outerWidth()),this.popupList.css({left:r+"px",top:n+"px","z-index":d})},_getOffset:function(e){return d.util.getOffset(e)},_getZindexPartial:function(){return d.util.getZindexPartial(this.element,this.popupList)},_enableMask:function(){this.model.minTime&&this._compareTime(this.model.minTime,this.model.value)||this.model.maxTime&&this._compareTime(this.model.value,this.model.maxTime)?this.isValidState=!1:this.isValidState=!0,this._setTime(this.model.value),d.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid"),this._getInternalEvents&&!this.isValidState&&this._trigger("outOfRange"),this._changeActiveEle(),this._preVal=this.element.val()},_setTime:function(e){e=this._localizeTime(e);this.element.val(e),this.model.enableStrictMode?this.model.value=this._compareTime(this.model.value,this.model.minTime,!0)&&this._compareTime(this.model.maxTime,this.model.value,!0)?e:null:this.model.value=e,this._setWaterMark()},_timeFromISO:function(e){var t=this._extISORegex.exec(e)||this._basicISORegex.exec(e),i="",s="",n="";if(t){for(var a=0;a<this._dates.length;a++)if(this._dates[a][1].exec(t[1])){i=this._dates[a][0];break}if(t[3])for(var r=0;r<this._times.length;r++)if(this._times[r][1].exec(t[3])){s=(t[2]||" ")+this._times[r][0];break}t[4]&&this._zeroRegex.exec(t[4])&&(n="Z");for(var o=(i+s+n).match(this._tokens),l=[],d=0;d<o.length;d++){var h=o[d],c=this._checkLiteral(o[d]),h=this._numberRegex[c?o[d].toLowerCase():h.length]||new RegExp("^\\d{1,"+h.length+"}");(h=e.match(h))&&(0<=e.substr(0,e.indexOf(h))&&!c&&(0<=o[d].indexOf("M")?l.push(parseInt(h[0])-1):l.push(parseInt(h[0]))),e=e.slice(e.indexOf(h[0])+h[0].length))}return"Z"==t[4]?new Date(Date.UTC.apply(null,l)):new Date(l[0],l[1],l[2],l[3],l[4],l[5])}return new Date(e+"")},_checkLiteral:function(e){e=e.toLowerCase();return"t"==e||"z"==e||":"==e||"-"==e},_setMask:function(){this.model.value=new Date,this._enableMask()},_validateTimes:function(){var e=this._validateTimeFormat(this.model.timeFormat);this.model.timeFormat=e||"h:mm tt",this._isValid(this.model.minTime)||(this.model.minTime="12:00 AM"),this._isValid(this.model.maxTime)||(this.model.maxTime="11:59 PM"),this._isValid(this.model.value,!0)||(this.model.value=null),this._checkMinMax(this.model.value)||this.model.enableStrictMode||(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)),this._validateMinMax()},_ensureValue:function(){!this._checkMinMax(this.model.value)&&this._isValid(this.model.value,!0)&&(this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this.model.value,this.model.minTime,!0)&&(this.model.value=this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this.model.value,!0)&&(this.model.value=this.model.maxTime)))},_validateMinMax:function(){this.model.minTime&&this.model.maxTime&&this._compareTime(this.model.minTime,this.model.maxTime)&&(this.model.minTime=this.model.maxTime)},_checkProperties:function(){this.model.enabled?this.model.enabled&&this.element.hasClass("e-disable")&&(this.model.enabled=!1,this.enable()):(this.model.enabled=!0,this.disable()),this._addProperty(),this._checkAttributes()},_addProperty:function(){this._setRtl(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner)},_setRtl:function(e){e?(this.wrapper.addClass("e-rtl"),this.popupList&&this.popupList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.popupList&&this.popupList.removeClass("e-rtl"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.popupList&&this.popupList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.popupList&&this.popupList.removeClass("e-corner"))},_showButton:function(e){(this.model.showPopupButton=e)?(this.container.addClass("e-padding"),this._renderTimeIcon(),this._renderDropdown(),this._addProperty()):(this.container.removeClass("e-padding"),this.timeIcon.remove(),this.popupList.remove(),this.timeIcon=this.popupList=null,h(document).off("mousedown",h.proxy(this._OnDocumentClick,this)))},_checkAttributes:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id}),"ondragstart"in document.createElement("input")&&this.element.attr({ondragstart:"return false"}),"draggable"in document.createElement("input")&&this.element.attr({draggable:"false"})},_getAmPm:function(){var e=new Date;e.setHours(0),this.ttAM=h.trim(this._localizeMeridian(e)),e.setHours(23),this.ttPM=h.trim(this._localizeMeridian(e))},_setDimentions:function(){this.model.height||(this.model.height=this.element.attr("height")),this.model.width||(this.model.width=this.element.attr("width")),this._setHeight(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_setHeight:function(e){e&&this.wrapper.height(e),this._isIE7&&this.element.height(this.container.height())},_validateTimeFormat:function(e){var e=e.split(" "),i="";return 1==e.length||2==e.length?(h(e).each(function(e,t){i+=h.trim(t)+" "}),h.trim(i)):null},_getSeperator:function(){for(var e=this._getElePlace(),t=this._formatparts[e.time],i=new RegExp("^[a-zA-Z0-9]+$"),s=0;s<t.length;s++)if(!i.test(t.charAt(s)))return t.charAt(s)},_checkInComplete:function(){var e=this._getCaretSelection(),t=this._getStartEnd(e),i="00",s=this._getSelectedValue(t),t=this._getCategory(t);e.end-e.start==this.element.val().length&&this._checkAll(),t&&"tt"!=t&&(this._findCategoryPosition(t),"__"==s?("h"!=t&&"hh"!=t||(i="12"),this._changeToDefault(i)):1!=t.length&&1==s.length&&(s=this._changeWhole(s),this.element.val(this._replaceAt(this.target.value,this.start,this.end,s))))},_checkAll:function(){for(var e=this._getElePlace(),t=this._formatparts[e.time].split(this.seperator),i=0;i<t.length;i++){this._findCategoryPosition(t[i]);var s=this._getSelectedValue({start:this.start,end:this.end});1!=t[i].length&&1==s.length&&(s=this._changeWhole(s),this.element.val(this._replaceAt(this.element.val(),this.start,this.end,s)))}},_changeToDefault:function(e){this.incomplete=!0;var t=this.element[0].value;this.element[0].value=this._replaceAt(this.target.value,this.start,this.end,e);e=this._checkExceedRange(this.target.value);e&&this._setTime(this.model[e]),this._setSelection(this.start,this.end),this._raiseChangeEvent(t)},_setSelection:function(e,t){var i=this.element[0];i.setSelectionRange?i.setSelectionRange(e,t):i.createTextRange&&((i=i.createTextRange()).collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select())},_getSelectedValue:function(e){return this.target.value.substring(e.start,e.end)},_getMinMax:function(e,t){"hh"==e||"h"==e?(this.min=1,this.max=11,t&&(this.max=12)):"HH"==e||"H"==e?(this.min=0,this.max=23):"mm"!=e&&"m"!=e&&"ss"!=e&&"s"!=e||(this.min=0,this.max=59)},_focusElement:function(){this._manualFocus=!0,this.element.focus()},_targetFocus:function(e){this._clearRange(),e.preventDefault(),this.focused=!0,this.element.on("mousewheel DOMMouseScroll",h.proxy(this._mouseWheel,this)),this.wrapper.addClass("e-focus").removeClass("e-error").attr("aria-invalid","false"),this._getExactPostions(),this._manualFocus||(this._findCategoryPosition(this._getLeast(!1)),this._setSelection(this.start,this.end)),this._manualFocus=!1,this._prevTimeVal=this.element.val(),this._raiseEvent("focusIn"),this.wrapper.addClass("e-valid"),this.model.showPopupButton||this._showResult(),this.model.showPopupButton||this._on(this.element,"click",this._elementClick)},_targetBlur:function(){this.focused=!1,this.element.off("mousewheel DOMMouseScroll",h.proxy(this._mouseWheel,this)),this.model.showPopupButton||this._off(this.element,"click",this._elementClick),this.wrapper.removeClass("e-focus"),this.model.enableStrictMode||-1<this.target.value.indexOf("_")&&this.element.val(""),!this._checkMinMax(this.target.value)&&this._isValid(this.target.value,!0)?this.model.enableStrictMode?this.isValidState=!1:(this.model.minTime&&!this._compareTime(this._createObject(this.target.value),this.model.minTime,!0)&&this.element.val(this.model.minTime),this.model.maxTime&&!this._compareTime(this.model.maxTime,this._createObject(this.target.value),!0)&&this.element.val(this.model.maxTime),this._isValid(this.model.value,!0)||this.element.val(null),this.isValidState=!0,d.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid")):this.isValidState=!0,this._ensureValue(),this._raiseChangeEvent(),this._checkErrorClass(),this._raiseEvent("focusOut"),this.model.enableStrictMode||this._checkInComplete(),d.isNullOrUndefined(this.model.value)?this.wrapper.removeClass("e-valid"):this.wrapper.addClass("e-valid")},_clearRange:function(){var e=this.element[0];isNaN(e.selectionStart)||(e.selectionStart=0,e.selectionEnd=0)},_checkErrorClass:function(){this.isValidState?this.wrapper.removeClass("e-error").attr("aria-invalid","false"):this.wrapper.addClass("e-error").attr("aria-invalid","true")},_getExactPostions:function(){var e=this.model.timeFormat;this.model.timeFormat.split(" ");this._formatparts=[],this._valueparts=[],this._amPMPosition=e.match("([t][t]+)")?e.match("([t][t]+)").index:null,this._amPMPosition==i?(this._formatparts=this.model.timeFormat.split(" "),this._valueparts=this.element.val().split(" "),this._noTT=!0):(this._amPMPosition==this.model.timeFormat.length-2?(this._ttAtEnd=!0,this._isSpace=" "==this.model.timeFormat[this.model.timeFormat.split("").indexOf("t")-1]):(this._ttAtEnd=!1,this._isSpace=" "==this.model.timeFormat[this.model.timeFormat.split("").indexOf("t")+2]),1==this._ttAtEnd?(this._ttStartPostion=this.model.timeFormat.match("([t]?[t]+)").index,this._ttEndPosition=this.model.timeFormat.length,e=this._formatStartPosition=0,this.element&&this.element.val()&&(e=this.element.val().length-this.model.timeFormat.length),this._updatedttStartPosition=this._ttStartPostion+e,this._formatEndPostion=this.model.timeFormat.match("([t][t]+)").index,this._formatparts[0]=this.model.timeFormat.substr(this._formatStartPosition,this._formatEndPostion).trim(),this._formatparts[1]=this.model.timeFormat.substr(this._ttStartPostion,this._ttEndPosition).trim(),this._valueparts[0]=this.element.val().substr(this._formatStartPosition,this._formatEndPostion+e).trim(),this._valueparts[1]=this.element.val().substr(this._ttStartPostion+e,this._ttEndPosition).trim()):(this._ttStartPostion=0,this._ttEndPosition=this.model.timeFormat.match("([t]?[t]+)")?this._ttStartPostion+this.model.timeFormat.match("([t]?[t]+)")[0].length:0,this._formatStartPosition=this._isSpace?this._ttEndPosition+1:this._ttEndPosition,this._formatEndPostion=this.model.timeFormat.length,this._formatparts[1]=this.model.timeFormat.substr(this._formatStartPosition,this._formatEndPostion).trim(),this._formatparts[0]=this.model.timeFormat.substr(this._ttStartPostion,this._ttEndPosition).trim(),this._valueparts[1]=this.element.val().substr(this._formatStartPosition,this._formatEndPostion).trim(),this._valueparts[0]=this.element.val().substr(this._ttStartPostion,this._ttEndPosition).trim()))},_getCaretSelection:function(){var e=this.element[0],t=0;if(!isNaN(e.selectionStart))return i=e.selectionStart,t=e.selectionEnd,{start:Math.abs(i),end:Math.abs(t)};var i=document.selection.createRange().getBookmark(),t=e.createTextRange();t.moveToBookmark(i);e=e.createTextRange();e.collapse(!0),e.setEndPoint("EndToStart",t);e=e.text.length;return{start:e,end:e+t.text.length}},_mouseDownOnInput:function(e){this.focused||d.isTouchDevice()||this._focusElement(),this._getExactPostions(),this.downPosition=this._getCaretSelection(),h(document).on("mouseup",h.proxy(this._mouseUpOnInput,this))},_mouseUpOnInput:function(e){e.preventDefault(),h(document).off("mouseup",h.proxy(this._mouseUpOnInput,this));e=this._getCaretSelection();this.incomplete&&(this.incomplete=!1,e=this.downPosition),this.target.value!=this._getSelectedText()&&(e=this._getStartEnd(e),this._setSelection(e.start,e.end))},_getCategoryPosition:function(e){var t=0,i=0,s=this._getTimeParts(),n=this._getElePlace(),a=this.seperator,r=!1,o=this._getFormatParts()[n.time].split(a),l=s[n.time].split(a);if(o.length>l.length)return{start:t,end:i,isValid:r};if("tt"==e)s[n.tt]!=this.ttAM&&s[n.tt]!=this.ttPM||(i=(t=0==n.tt?0:s[n.time].length+1)+s[n.tt].length,!this._isSpace&&this._ttAtEnd&&(--t,--i),r=!0);else{t=0==n.time?0:s[n.tt].length+1;var d=o.indexOf(e);if(-1!=d){for(var h=0;h<o.length&&(i=l[h].length+1,h!=d);h++)t+=i;i+=t-1,this._noTT||this._isSpace||this._ttAtEnd||(--t,--i),r=!0}}return{start:t,end:i,isValid:r}},_getCategory:function(e){var t=this._getFormatParts(),i=this.seperator,s=this._getElePlace();return e.isTT?t[s.tt]:t[s.time].split(i)[e.index]},_getTimeParts:function(){return"h:mm tt"==this.model.timeFormat||"h:m tt"==this.model.timeFormat||"hh:m tt"==this.model.timeFormat||"hh:mm:s tt"==this.model.timeFormat?this.element.val().split(" "):this._valueparts},_getFormatParts:function(){return"h:mm tt"==this.model.timeFormat||"h:m tt"==this.model.timeFormat||"hh:m tt"==this.model.timeFormat||"hh:mm:s tt"==this.model.timeFormat?this.model.timeFormat.split(" "):this._formatparts},_getStartEnd:function(e){this._getExactPostions();for(var t,i=this.seperator,s=(this.element.val(),this._valueparts),n=0,a=0,r=t=null,o=0;o<s.length;o++)if(s[o]!=this.ttAM&&s[o]!=this.ttPM)for(var l=s[o].split(i),d=n,h=n+l[0].length,c=0;c<l.length;c++)if(a=l[c].length+n,!this._isSpace&&this._ttAtEnd&&e.start>=this._updatedttStartPosition&&e.end<=this._ttEndPosition&&this._formatparts[0].split(this._getSeperator())[1].length==this._valueparts[0].split(this._getSeperator())[1].length)n+=l[c].length+1;else{if(e.start<=a){r=c,t=!1,o=s.length;break}n+=l[c].length+1}else{if(this._isSpace||this._ttAtEnd?e.start<=n+s[o].length:e.start<n+s[o].length){a=s[o].length+n,t=!(r=0),o=s.length,!this._isSpace&&this._ttAtEnd&&(--n,--a);break}n+=s[o].length+1,this._isSpace||this._ttAtEnd||--n}return null==r&&(n=d,a=h,r=0,t=!1),{start:n,end:a,index:r,isTT:t}},_modifyValue:function(e){var t,i;this._isValid(this.target.value)&&(this.model.enableStrictMode||this._checkInComplete(),i=(i=this._getCaretSelection()).start==i.end?(t=this._getLeast(!0),t=this._getCategoryPosition(t),this._getStartEnd(t)):this._getStartEnd(i),this.start=i.start,this.end=i.end,this._changeValue(i,e))},_keyUpOnInput:function(e){e.preventDefault(),this._preVal!=this.element.val()&&(this._preVal=this.element.val());var t=this._getCaretSelection(),i=this._getStartEnd(t),s=this._getCategory(i),e=this._getSelectedValue(i),i=this.element.val();i.split(":"),i[0]<3&&(1==isNaN(i[0]+i[1])&&i[0]<10?this._poschange=!0:this._poschange=!1),"h"==s&&2==t.start&&2==t.end&&9<e&&e<13||"H"==s&&9<e&&e<24||"H"==s&&e<9&&2==t.start&&2==t.end||"mm"==s&&1==this._poschange&&4==t.start&&4==t.end||"ss"==s&&8==t.start&&8==t.end||"ss"==s&&1==this._poschange&&7==t.start&&7==t.end||"mm"==s&&5==t.start&&5==t.end?("mm"!=s||"HH:mm"!=this.model.timeFormat&&"hh:mm"!=this.model.timeFormat&&"H:mm"!=this.model.timeFormat&&"h:mm"!=this.model.timeFormat)&&("ss"!=s||"HH:mm:ss"!=this.model.timeFormat&&"hh:mm:ss"!=this.model.timeFormat&&"H:mm:ss"!=this.model.timeFormat&&"h:mm:ss"!=this.model.timeFormat)&&this._movePosition(t,null):("hh"==s||"HH"==s)&&t.start&&2==t.end&&e<24&&this._movePosition(t,null)},_getNextCategory:function(e,t){var i=[],s=this.seperator,n=this._getFormatParts();h(n).each(function(e,t){"tt"==t?i.push(t):(t=t.split(s),i=t.concat(i))});n=i.indexOf(e);return-1!=n?(n=t?0==n?i.length-1:n-1:n==i.length-1?0:n+1,i[n]):e},_getElePlace:function(){this._getExactPostions();var e,t="tt"==this._getFormatParts()[0]?(e=1,0):(e=0,1);return{time:e,tt:t}},_movePosition:function(e,t){var i=this._getStartEnd(e),e=(e=this._getCategory(i))||this._getLeast(t),t=this._getNextCategory(e,t);(i=this._getCategoryPosition(t)).isValid&&this._setSelection(i.start,i.end)},_findActiveIndex:function(){var e=this.ul.find("li"),t=this.element.val(),i=e.first().html(),i=(this._parse(t)-this._parse(i))/(6e4*this.model.interval);i=Math.round(i),this._activeItem=i==e.length?i:i+1,(this._activeItem<0||this._activeItem>e.length||isNaN(this._activeItem))&&(this._activeItem=0)},_keyDownOnInput:function(e){if(this.model.readOnly&&!this._readOnlyKeys(e))return!1;var t,i,s,n,a,r=e.keyCode;if(this._getInternalEvents&&38!=r&&40!=r&&36!=r&&35!=r&&9!=r)return!1;if(!this.model.enableStrictMode){if(this.showDropdown&&38!=r&&40!=r&&27!=r&&!this._readOnlyKeys(e))return!1;!this.showDropdown||37!=r&&39!=r||(e.keyCode=37==r?38:40)}switch(t=this._getCaretSelection(),h=this._getStartEnd(t),i=this._getCategory(h),e.keyCode){case 38:e.preventDefault(),this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),s=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=s),this._addListHover(),(n=this._getActiveItem()).length&&this._selectTimeItem(n)):this._isValid(this.target.value)&&this._modifyValue(!0);break;case 40:e.preventDefault(),e.altKey&&this.model.showPopupButton?this._showhidePopup():this.showDropdown?this.showDropdown&&(e.preventDefault(),this._findActiveIndex(),s=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=s,this._addListHover(),this._selectTimeItem(this._getActiveItem())):this._isValid(this.target.value)&&this._modifyValue(!1);break;case 37:e.preventDefault(),t.start==t.end?this._setSelection(t.start-1,t.start-1):this._movePosition(t,!0);break;case 39:e.preventDefault(),t.start==t.end?this._setSelection(t.start+1,t.start+1):this._movePosition(t,!1);break;case 36:e.preventDefault(),this.showDropdown?(this._activeItem=0,s=this._activeItem,this._activeItem=this._disableItemSelectDown(this._activeItem),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=s,this._addListHover(),this._selectTimeItem(this._getActiveItem())):(n=this._firstlastVal(!0),(n=this._getCategoryPosition(n)).isValid&&this._setSelection(n.start,n.end));break;case 35:e.preventDefault(),this.showDropdown?(this._activeItem=this._listSize+1,s=this._activeItem,this._activeItem=this._disableItemSelectUp(this._activeItem-1),0==this._activeItem&&(this._activeItem=s),this._addListHover(),this._selectTimeItem(this._getActiveItem())):(a=this._firstlastVal(!1),(a=this._getCategoryPosition(a)).isValid&&this._setSelection(a.start,a.end));break;case 9:if(this._getInternalEvents)break;this._hideResult();var o=null;e.shiftKey&&0<t.start?o=!0:!e.shiftKey&&t.end<this.element.val().length&&(o=!1),null!=o&&(e.preventDefault(),this._checkInComplete(),this._movePosition(t,o));break;case 13:if(!this.showDropdown){this._raiseChangeEvent();break}case 27:e.preventDefault(),this._hideResult();break;case 8:case 46:if(this.model.enableStrictMode)return;this.target.value!=this._getSelectedText()&&(e.preventDefault(),i&&"tt"!=i&&(this._findCategoryPosition(i),a=8==r&&t.start!=this.start,o=46==r&&t.end!=this.end,r=this.end-this.start,t.start==t.end&&1!=r||!a&&!o&&t.start==t.end?a?(this.element[0].value=this._replaceAt(this.target.value,t.start-1,t.start,""),this._setSelection(t.start-1,t.start-1)):o&&(this.element[0].value=this._replaceAt(this.target.value,t.end,t.end+1,""),this._setSelection(t.end,t.end)):(c=this.start,u=this.end,this.element[0].value=this._replaceAt(this.target.value,c,u,"__"),u=u-c!=2?u+1:u,this._setSelection(c,u))))}var l,d,h,c=this._getSelectedValue(h),u=e.keyCode||e.charCode;47<e.keyCode&&e.keyCode<58?l=String.fromCharCode(u):95<e.keyCode&&e.keyCode<106&&(l=String.fromCharCode(u-48)),"tt"==i&&(!e.shiftKey&&!e.ctrlKey&&!e.altKey&&64<e.keyCode&&e.keyCode<91||47<e.keyCode&&e.keyCode<58||95<e.keyCode&&e.keyCode<106)&&(e.preventDefault(),u=this._getCategoryPosition(i),this.start=u.start,this.end=u.end,this._changeAmPm(c),this._raiseChangeEvent()),this.target.value!=this._getSelectedText()||e.shiftKey||e.ctrlKey||e.altKey||(64<e.keyCode&&e.keyCode<91&&!this.model.enableStrictMode&&e.preventDefault(),(47<e.keyCode&&e.keyCode<58||95<e.keyCode&&e.keyCode<106)&&(h=this._getStartEnd(t),this._setSelection(h.start,h.end))),!e.shiftKey&&!e.ctrlKey&&!e.altKey&&47<e.keyCode&&e.keyCode<58||95<e.keyCode&&e.keyCode<106?"tt"!=i&&(this._getMinMax(i,!0),t.start==t.end?(this._findCategoryPosition(i),t.start==this.start?(d=l+c,0==this.model.enableStrictMode&&(this._validateTimes(),this._targetBlur()),null==this.model.value&&this.element.val(this.model.minTime),h=this._getStartEnd(t),this._setSelection(h.start,h.end)):d=c+l,(2<d.length||!(Number(d)>=this.min&&this.max>=Number(d)))&&(this.model.enableStrictMode||e.preventDefault())):Number(l)>=this.min&&this.max>=Number(l)||this.model.enableStrictMode||e.preventDefault()):this._allowKeyCodes(e)||(this.model.enableStrictMode||8==e.keyCode||46==e.keyCode?e.stopPropagation():e.preventDefault())},_getSelectedText:function(e){if(window.getSelection){var t=h("#"+this.element[0].id).get(0);return t.value.substring(t.selectionStart,t.selectionEnd)}return document.selection.createRange().text},_allowKeyCodes:function(e){return!((!e.ctrlKey||65!=e.keyCode&&67!=e.keyCode&&90!=e.keyCode&&89!=e.keyCode)&&9!=e.keyCode&&116!=e.keyCode&&13!=e.keyCode)},_readOnlyKeys:function(e){return!(35!=e.keyCode&&36!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&!this._allowKeyCodes(e))},_firstlastVal:function(e){var t=this._getFormatParts(),i=this.seperator;if(e)return"tt"!=t[0]?t[0].split(i)[0]:"tt";if("tt"!=t[0])return"tt";if(t[1]){i=t[1].split(i);return i.length?i[i.length-1]:"tt"}return"tt"},_mouseWheel:function(e){if(e.preventDefault(),this.model.readOnly)return!1;var t,e=e.originalEvent;e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),0<t?this._modifyValue(!0):t<0&&this._modifyValue(!1)},_addListHover:function(){this._addSelected(),this._updateScrollTop()},_addSelected:function(){this.ul.find("li").removeClass("e-active e-hover");var e=this._getActiveItem();e.length&&!e.hasClass("e-disable")&&e.addClass("e-active")},_disableItemSelectDown:function(e){return(null==e||e<0)&&(e=0),e<this._listSize?h.inArray(e,this._disabledItems)<0?e:this._disableItemSelectDown(e+1):this._listSize},_disableItemSelectUp:function(e){if((null==--e||e<0)&&(e=0),e<this._listSize){if(h.inArray(e,this._disabledItems)<0)return e+1;if(0<e)return this._disableItemSelectUp(e)}return 0},_getActiveItem:function(){return h(this.ul.find("li")[this._activeItem-1])},_timeIconClick:function(e){d.isNullOrUndefined(this.popupList)&&(this._renderDropdown(),this._addProperty());var t=!1;if(e.button?t=2==e.button:e.which&&(t=3==e.which),!t){if(e.preventDefault(),!this.model.enabled||this.model.readOnly||this.ul.find("li").length<1)return!1;this._showhidePopup();e=this.element.val().length;d.isTouchDevice()||this._setSelection(e,e)}},_showhidePopup:function(){if(this._getInternalEvents)return!1;this.showDropdown?this._hideResult():this._showResult()},_showResult:function(){if(null==this.popupList&&this._renderDropdown(),this._raiseEvent("beforeOpen"))return!1;this.focused||d.isTouchDevice()||this._focusElement(),this.model.value?this._changeActiveEle():this.ul.find("li").removeClass("e-active");var e=this,t=this._visibleAndCalculateTop();this.popupList.slideDown(this.model.enableAnimation?200:0,function(){h(document).on("mousedown",h.proxy(e._OnDocumentClick,e))}),this.scrollerObj.setModel({scrollTop:t}),this.showDropdown=!0,this._listSize=this.ul.find("li").length,h(window).on("resize",h.proxy(this._OnWindowResize,this)),this._on(d.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._on(d.getScrollableParents(this.wrapper),"touchmove",this._hideResult),this._raiseEvent("open"),this.wrapper.addClass("e-active")},_hideResult:function(e){if(this._raiseEvent("beforeClose"))return!1;e&&("touchmove"==e.type||"scroll"==e.type)&&0<h(e.target).parents("#"+this.popupList[0].id).length||this.showDropdown&&!this._getInternalEvents&&(this.showDropdown=!1,this.popupList.slideUp(this.model.enableAnimation?100:0),h(document).off("mousedown",h.proxy(this._OnDocumentClick,this)),h(window).off("resize",h.proxy(this._OnWindowResize,this)),this._off(d.getScrollableParents(this.wrapper),"scroll",this._hideResult),this._off(d.getScrollableParents(this.wrapper),"touchmove",this._hideResult),this._raiseEvent("close"),this.wrapper.removeClass("e-active"))},_visibleAndCalculateTop:function(){this.popupList.css({display:"block"});var e=this._calcScrollTop();return this._refreshPopup(),this.popupList.css({display:"none"}),e},_calcScrollTop:function(){this.ul.outerHeight();var e=this.ul.find("li").outerHeight();return e*this.ul.find("li.e-active").index()-(this.popupList.outerHeight()-e)/2},_changeActiveEle:function(){if(!this.popupList)return!1;var e=this.ul.find("li"),t=this.element.val(),i=e.first().html(),i=(this._parse(t)-this._parse(i))/(6e4*this.model.interval);i=Math.round(i),this._activeItem=i==e.length?i:i+1,(this._activeItem<0||this._activeItem>e.length||isNaN(this._activeItem)||this._ensureTimeRange(t))&&(this._activeItem=0),this._addListHover()},_OnDocumentClick:function(e){h(e.target).is(this.popupList)||h(e.target).parents(".e-time-popup").is(this.popupList)||h(e.target).is(this.wrapper)||h(e.target).parents(".e-timewidget").is(this.wrapper)?(h(e.target).is(this.popupList)||h(e.target).parents(".e-time-popup").is(this.popupList))&&e.preventDefault():this._hideResult()},_OnWindowResize:function(e){this._refreshPopup()},_OnMouseEnter:function(e){e=e.target;this.ul.find("li").removeClass("e-hover"),h(e).hasClass("e-disable")||h(e).addClass("e-hover")},_OnMouseLeave:function(e){this._dateTimeInternal&&!this.model.value||this.ul.find("li").removeClass("e-hover")},_OnMouseClick:function(e){e.preventDefault(),h(e.target).hasClass("e-disable")||(this.model.enabled&&!this.model.readOnly&&(this._activeItem=h(e.target).index()+1,this.ul.find("li").attr({tabindex:-1,"aria-selected":!1}),h(e.target).attr({"aria-selected":!0,tabindex:0}),this._addSelected(),this._selectTimeItem(h(e.target))),this._showhidePopup())},_selectTimeItem:function(e){this._beforeChange(e),this._raiseChangeEvent()&&this._trigger("select",{value:this.model.value,prevTime:this._previousValue})},_findCategoryPosition:function(e){"least"==e&&(e=this._getLeast(!0));e=this._getCategoryPosition(e);this.start=e.start,this.end=e.end},_getLeast:function(i){var e=this._getFormatParts(),s=this.seperator,n=null;return h(e).each(function(e,t){"tt"!=t&&(t=t.split(s),n=i?t[t.length-1]:t[0])}),n},_changeValue:function(e,t){this.target.value;var i=this._getCategory(e);if(!i)return!1;if(this._setSelection(this.start,this.end),l=this.target.value.substring(this.start,this.end),this._checkMinMax(this.target.value))if(l!=this.ttAM&&l!=this.ttPM){if(l=this._changeCurrentValue(l,i,t),1!=i.length&&(l=this._changeWhole(l)),this._findCategoryPosition(i),this.element.val(this._replaceAt(this.target.value,this.start,this.end,l)),this.end=this.start+l.toString().length,this._setSelection(this.start,this.end),this._ensureTimeRange(this.target.value)&&this._checkMinMax(this.target.value)){var s=this._createObject(this.target.value),n=s.getHours(),a=t?this._startTime:this._endTime,r=t?this._endTime:this._startTime;if(!d.isNullOrUndefined(this.model.disableTimeRanges))for(var o=0;o<this.model.disableTimeRanges.length;o++)(a[o].getHours()===n||+s>=+this._startTime[o]&&+s<=+this._endTime[o])&&(this.target.value=this._localizeTime(r[o]),this._findCategoryPosition(i),this._setSelection(this.start,this.end),this._changeValue(e,t))}}else this._changeAmPm(l);else{var l=this._checkExceedRange(this.target.value);this._setTime(this.model[l]),this._findCategoryPosition(i),this._setSelection(this.start,this.end)}this._checkMinMax(this.target.value)?this._raiseChangeEvent():(this.element.val(this.model.value),this._findCategoryPosition(i),this._setSelection(this.start,this.end))},_checkMinMax:function(e){e=this._checkExceedRange(e);return null==e&&(e=!1),!e},_checkExceedRange:function(e){if(e){if(this.model.minTime&&!this._compareTime(e,this.model.minTime,!0))return"minTime";if(this.model.maxTime&&!this._compareTime(this.model.maxTime,e,!0))return"maxTime"}return null},_changeWhole:function(e){return 9<e?""+e:"0"+e},_changeAmPm:function(e){e=e==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)),this._setSelection(this.start,this.end)},_changeMinute:function(e){var t,i=this._getExactFormat(["mm","m"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t=this.min,this._changeHour(e)):t+=1:t==this.min?(t=this.max,this._changeHour(e)):--t,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_changeHour:function(e){var t,i=this._getExactFormat(["hh","h","HH","H"]);i&&(this._findCategoryPosition(i),t=Number(this.target.value.substring(this.start,this.end)),this._getMinMax(i),e?t==this.max?(t+=1,this._changeMeridian()):t>this.max?t=this.min:t+=1:t==this.min?t=this.max+1:t>this.max?(t=this.max,this._changeMeridian()):--t,this._findCategoryPosition(i),1!=i.length&&(t=this._changeWhole(t)),this.element.val(this._replaceAt(this.target.value,this.start,this.end,t)))},_getExactFormat:function(e){for(var t=this.model.timeFormat,i=0;i<e.length;i++)if(-1!=t.indexOf(e[i]))return e[i];return null},_changeMeridian:function(){var e;-1!=this.model.timeFormat.indexOf("tt")&&(this._findCategoryPosition("tt"),e=(e=this.target.value.substring(this.start,this.end))==this.ttAM?this.ttPM:this.ttAM,this.element.val(this._replaceAt(this.target.value,this.start,this.end,e)))},_changeCurrentValue:function(e,t,i){e=Number(e);var s=t,n=1,t=!0;return this._getMinMax(s),"hh"==s||"h"==s||"HH"==s||"H"==s?n=this.model.hourInterval:"mm"==s||"m"==s?n=this.model.minutesInterval:"ss"!=s&&"s"!=s||(n=this.model.secondsInterval),n<=0||(i?(("hh"==s||"h"==s)&&e>this.max?e=this.min-1+n:e<this.max?e+=n:(t=!1,"hh"!=s&&"h"!=s?e=this.min-1+n:e+=n,this._changeAdjacent(s,i)),"hh"!=s&&"h"!=s||e!=this.max+1?e>this.max+1&&(e-=this.max+1,t&&this._changeAdjacent(s,i)):t&&this._changeAdjacent(s,i),"hh"!=s&&"h"!=s&&e==this.max+1&&(e=this.min,t&&this._changeAdjacent(s,i))):("hh"!=s&&"h"!=s&&e>this.min||("hh"==s||"h"==s)&&e>this.min&&e<=this.max?e-=n:"hh"!=s&&"h"!=s||e!=this.min?(t=!1,e=this.max+1-n,this._changeAdjacent(s,i)):e=this.max+2-n,e<this.min&&(e+=this.max+1,t&&this._changeAdjacent(s,i)))),e},_changeAdjacent:function(e,t){"ss"==e||"s"==e?this._changeMinute(t):"mm"==e||"m"==e?this._changeHour(t):"hh"!=e&&"h"!=e&&"HH"!=e&&"H"!=e||this._changeMeridian()},_valueChange:function(e){this._raiseChangeEvent()},_beforeChange:function(e){return this._raiseEvent("beforeChange")||this.element.val(e.text()),!0},_raiseChangeEvent:function(e,t){return e=e===i?this.model.value:e,(this._previousValue=e)!=(this.target.value||null)&&(this._checkMinMax(this.target.value)&&this._isValid(this.target.value,this.model.enableStrictMode)||!this.target.value?this.isValidState=!0:this.isValidState=!1,this.model.value=this._isValid(this.target.value,!0)&&this._checkMinMax(this.target.value)?this.target.value:null,this.model.value||this.model.enableStrictMode||this._setTime(this.model.value),this.model.value!=this._previousValue&&(this._raiseEvent("change",t),this._raiseEvent("_change",t),!0))},_raiseEvent:function(e,t){var i={value:this.model.value,prevTime:this._previousValue};return"change"==e&&(i.isInteraction=!t),this._trigger(e,i)},_checkIE7:function(){if("Microsoft Internet Explorer"==navigator.appName){var e=-1;if(null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),7<=e&&e<8)return!0}return!1},_replaceAt:function(e,t,i,s){return e.substring(0,t)+s+e.substring(i)},_localizeTime:function(e){return e?h.trim(d.format(this._createObject(e),this.model.timeFormat,this.model.locale)):null},_localizeMeridian:function(e){return h.trim(d.format(e,"tt",this.model.locale))},_compareTime:function(e,t,i){return(i=!!i)?this._parse(e)>=this._parse(t):this._parse(e)>this._parse(t)},_isValid:function(e,t){return(e=this._createObject(e,t))&&"function"==typeof e.getTime&&isFinite(e.getTime())},_parse:function(e){return Date.parse(this._createObject(e))},_setEmptyDate:function(e){e=new Date(e);return e.setDate(1),e.setMonth(0),e.setFullYear(2e3),e},_createObject:function(e,t){var i,s,n,a=null;return"string"==typeof e?(n=this._setModelOption?this._preTimeformat:this.model.timeFormat,i=d.preferredCulture(this.model.locale).calendar.patterns.d,s=d.format(new Date("1/1/2000"),i,this.model.locale),a=d.parseDate(s+" "+e,i+" "+n,this.model.locale),(this._extISORegex.exec(e)||this._basicISORegex.exec(e))&&(this.model.value=a=this._timeFromISO(e)),this._setModelOption=!1,a||(n=new Date(e),a=isNaN(Date.parse(n))||d.isNullOrUndefined(e)?this._dateTimeInternal&&""!=e?new Date("1/1/2000 "+e):null:this._setEmptyDate(e))):"number"==typeof e?a=new Date(e):e instanceof Date&&(a=this._setEmptyDate(e)),a&&!this._dateTimeInternal&&t&&(t=this._localizeTime(a),this._ensureTimeRange(t)&&(a=null)),a},_getLocalizedLabels:function(){return d.getLocalizedConstants(this.sfType,this.model.locale)},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur),this._on(this.element,"mousedown",this._mouseDownOnInput),this._on(this.element,"keydown",this._keyDownOnInput),this._on(this.element,"keyup",this._keyUpOnInput)}}),d.TimePicker.Locale=d.TimePicker.Locale||{},d.TimePicker.Locale.default=d.TimePicker.Locale["en-US"]={watermarkText:"select a time"}}(jQuery,Syncfusion),function(Z,J,P){"use strict";J.widget("ejTreeGrid","ej.TreeGrid",{_rootCSS:"e-treegrid",element:null,validTags:["div"],model:null,_requiresID:!0,_tags:[{tag:"columns",attr:["field","headerText","allowSorting","editType","allowFiltering","filterEditType","width","visible","editParams","format","isFrozen","allowFreezing","headerTemplateID","allowCellSelection","showCheckbox","showInColumnChooser","validationRules.minlength","isTemplateColumn","validationRules.maxlength","validationRules.range","validationRules.number","validationRules.required","displayAsCheckbox","editTemplate","priority","filterType",[{tag:"commands",attr:["type","buttonOptions"]}]],content:"template"},{tag:"summaryRows",attr:["title","summaryColumns"],content:"template"},{tag:"stackedHeaderRows",attr:["stackedHeaderColumns"],content:"template"},{tag:"summaryRows.summaryColumns",attr:["summaryType","dataMember","displayColumn","prefix","suffix","format","customSummaryValue"],content:"template"},{tag:"sortSettings.sortedColumns",attr:["field","direction"]},{tag:"sizeSettings",attr:["height","width"]},{tag:"columnResizeSettings",attr:["columnResizeMode"]}],_columns:function(e,t,i,s){var n=this.model.columns,a=!1,r=n.length,o=["allowCellSelection","allowEditing","allowFilteringBlankContent","allowFreezing","allowSorting","editParams","headerTooltip","tooltip","validationRules"];if(!J.isNullOrUndefined(e)){if("object"==typeof e)for(var l=0;l<e.length;l++){var d=e[l];if(!J.isNullOrUndefined(d.index)&&!J.isNullOrUndefined(d.change))for(var h=0;h<r;h++){var c=n[h];if(c.index&&c.index==d.index){for(var u in d.change)-1==o.indexOf(u)&&(a=!0);break}}}else(!t||!i||-1==o.indexOf(u))&&(a=!0);a&&this.updateColumns()}},keyConfigs:{focus:"e",editRecord:"113",saveRequest:"13",cancelRequest:"27",firstRowSelection:"36",lastRowSelection:"35",leftArrow:"37",upArrow:"38",rightArrow:"39",downArrow:"40",moveCellRight:"9",moveCellLeft:"shift+9",shiftDownArrow:"shift+40",shiftUpArrow:"shift+38",shiftRightArrow:"shift+39",shiftLeftArrow:"shift+37",shiftHomeButton:"shift+36",shiftEndButton:"shift+35",selectedRowExpand:"alt+40",totalRowExpand:"ctrl+40",selectedRowCollapse:"alt+38",totalRowCollapse:"ctrl+38",deleteRecord:"46",spaceBar:"32",topRowSelection:"ctrl+36",bottomRowSelection:"ctrl+35",nextPage:"33",prevPage:"34"},defaults:{expandStateMapping:"",allowFiltering:!1,allowDragAndDrop:!1,dragTooltip:{showTooltip:!1,tooltipItems:[],tooltipTemplate:""},allowSorting:!1,allowColumnResize:!1,allowSelection:!0,allowPaging:!1,allowSearching:!1,dataSource:null,query:J.Query(),idMapping:"",parentIdMapping:"",hierarchyRowIndexMapping:"",readOnly:!1,showGridCellTooltip:!1,cellTooltipTemplate:null,showGridExpandCellTooltip:!1,showColumnChooser:!1,showColumnOptions:!1,enableAltRow:!0,enableLoadOnDemand:!1,totalSummaryHeight:90,collapsibleTotalSummary:!1,hasChildMapping:"",selectedItem:null,showStackedHeader:!1,stackedHeaderRows:[],toolbarSettings:{showToolbar:!1,toolbarItems:[],customToolbarItems:[]},editSettings:{allowEditing:!1,allowAdding:!0,allowDeleting:!0,editMode:"cellEditing",rowPosition:"top",beginEditAction:"dblclick",dialogEditorTemplateID:"",showDeleteConfirmDialog:!1,showConfirmDialog:!0,batchEditSettings:{editMode:"cell"}},enableVirtualization:!1,allowMultiSorting:!1,sortSettings:{sortedColumns:[]},filterSettings:{filterBarMode:"immediate",filteredColumns:[],filterType:"filterbar",maxFilterChoices:1e3,enableCaseSensitivity:!1,enableComplexBlankFilter:!0,blankValue:"",filterHierarchyMode:"parent"},printingEnabled:!1,selectionType:"single",selectionMode:"row",selectionSettings:{selectionType:"single",selectionMode:"row",enableHierarchySelection:!0,enableSelectAll:!0},searchSettings:{fields:[],key:"",operator:"contains",ignoreCase:!0,searchHierarchyMode:"parent"},selectedCellIndexes:[],selectedRowIndex:-1,showSummaryRow:!1,summaryRows:[],showTotalSummary:!1,allowKeyboardNavigation:!0,cssClass:"",locale:"en-US",isEdit:!1,allowScrolling:!1,scrollSettings:{frozenColumns:0},groupSettings:{groupedColumns:[]},sizeSettings:{height:"",width:""},enableResize:!0,allowTextWrap:!1,isResponsive:!0,showDetailsRow:!1,showDetailsRowInfoColumn:!1,detailsTemplate:"",detailsRowHeight:100,rowDataBound:null,load:null,create:null,queryCellInfo:null,rowSelecting:null,rowSelected:null,cellSelecting:null,cellSelected:null,beginEdit:null,endEdit:null,expanding:null,expanded:null,collapsing:null,collapsed:null,dataBound:null,beforePrint:null,actionComplete:null,actionBegin:null,actionFailure:null,currentViewData:[],flatRecords:[],parentRecords:[],updatedRecords:[],summaryRowRecords:[],selectedItems:[],ids:[],columns:[{field:"",headerText:"",editType:"",filterEditType:"",allowFiltering:!1,allowFilteringBlankContent:!0,allowSorting:!1,visible:"",textAlign:J.TextAlign.Left,headerTextAlign:J.TextAlign.Left,allowCellSelection:!0,clipMode:"",headerTooltip:"",tooltip:"",showInColumnChooser:!0,commands:[{type:"",buttonOptions:{}}],filterType:null}],columnDialogFields:[],commonWidth:150,dateFormat:"MM/dd/yyyy",rowHeight:30,emptyRecordText:"No Records To Display",treeColumnIndex:0,workingTimeScale:"TimeScale8Hours",childMapping:"",enableCollapseAll:!1,rowTemplateID:"",altRowTemplateID:"",parseRowTemplate:!0,contextMenuSettings:{showContextMenu:!1,contextMenuItems:[]},contextMenuOpen:null,rowDragStart:null,rowDrag:null,rowDragStop:null,rowDropActionBegin:null,detailsDataBound:null,detailsShown:null,detailsHidden:null,toolbarClick:null,columnResizeStart:null,columnResizeEnd:null,columnResized:null,recordClick:null,recordDoubleClick:null,exportToPdfAction:"",exportToExcelAction:"",allowMultipleExporting:!1,headerTextOverflow:"none",pageSettings:{pageSize:12,pageCount:8,currentPage:1,totalPages:0,totalRecordsCount:null,pageSizeMode:"all",template:null,printMode:"allPages"},allowColumnReordering:!1,columnResizeSettings:{columnResizeMode:"normal"}},dataTypes:{columns:"array",totalSummaryHeight:"number",collapsibleTotalSummary:"boolean",summaryRows:"array",sortSettings:{sortedColumns:"array"},searchSettings:{fields:"array"},dragTooltip:{tooltipItems:"array"},columnDialogFields:"array",filterSettings:{filteredColumns:"array",filterType:"string"},dataSource:"data",query:"data",currentViewData:"array",flatRecords:"array",parentRecords:"array",updatedRecords:"array",summaryRowRecords:"array",ids:"array",contextMenuSettings:{contextMenuItems:"array"},toolbarSettings:{toolbarItems:"array",customToolbarItems:"array"},stackedHeaderRows:"array",selectedItem:"data"},ignoreOnExport:["isEdit","toolbarClick","query","queryCellInfo","selectionType","currentViewData","enableRTL","rowDataBound","rowTemplate","parseRowTemplate","detailsTemplate","editSettings","localization","cssClass","dataSource","allowKeyboardNavigation","pageSettings","columnResizeSettings"],observables:["selectedRowIndex","dataSource","selectedCellIndexes","pageSettings.currentPage"],selectedItem:J.util.valueFunction("selectedItem"),selectedRowIndex:J.util.valueFunction("selectedRowIndex"),selectedCellIndexes:J.util.valueFunction("selectedCellIndexes"),dataSource:J.util.valueFunction("dataSource"),_currentPage:J.util.valueFunction("pageSettings.currentPage"),_dataSource:J.util.valueFunction("dataSource"),_getLocalizedLabels:function(){return J.getLocalizedConstants(this.sfType,this.model.locale)},getHeaderTable:function(){return this._$gridHeaderTable},setGridHeaderTable:function(e){this._$gridHeaderTable=e},getHeaderContent:function(){return this._$gridHeaderContent},setGridHeaderContent:function(e){this._$gridHeaderContent=e},getContentTable:function(){return this._$gridContentTable},getContent:function(){return this._$gridContent},setGridContentTable:function(e){this._$gridContentTable=e},getRows:function(){return this._excludeDetailRows()},getSelectedCells:function(){var s=this,n=s.model,a=[];return this._selectedCellDetails.forEach(function(e){var t=e.data,i=n.currentViewData.indexOf(t),t=Z(e.cellElement);-1!=i&&(0<s._frozenColumnsLength?0<t.closest(".e-frozencontentdiv").length?e.cellElement=s.getRows()[0][i].childNodes[e.cellIndex]:0<t.closest(".e-movablecontentdiv").length&&(e.cellElement=s.getRows()[1][i].childNodes[e.cellIndex-s._frozenColumnsLength]):e.cellElement=s.getRows()[i].childNodes[e.cellIndex]),a.push(e.cellElement)}),a},setGridRows:function(e){this._$gridRows=e},getCurrentViewData:function(){return this.model.currentViewData},getUpdatedCurrentViewData:function(){return this._updateCurrentViewData(),this.model.currentViewData},getFlatRecords:function(){return this.model.flatRecords},setHeight:function(e){this._totalHeight=e},getUpdatedRecords:function(){var e=this.model;return!this._isFromGantt&&e.allowPaging?this._updatedPageData:this._isHierarchyFiltering&&e.enableVirtualization?this._updateFilterParent:e.updatedRecords},getsummaryRowRecords:function(){return this.model.summaryRowRecords},getDataSource:function(){return this.dataSource()},getUpdatedIds:function(){return this.model.ids},getRecordsCount:function(){return this._recordsCount},setRecordsCount:function(e){this._recordsCount=e},setFocusOnTreeGridElement:function(){this._focusTreeGridElement()},updateCollapsedRecordCount:function(){var t=this,e=this.model.updatedRecords.filter(function(e){return 0==t.getExpandStatus(e)});t._totalCollapsedRecordCount=e.length},_getDetailsExpandedRecords:function(e){return e.filter(function(e){return 1==e.isDetailsExpanded})},_getExpandedDetailsRowHeight:function(){var e=this.getUpdatedRecords(),e=this.getExpandedRecords(e),e=this._getDetailsExpandedRecords(e);return e=this._spliceSummaryRows(e),this._detailsRowHeight*e.length},getCollapsedRecordCount:function(e){return this._totalCollapsedRecordCount},_colgroupRefresh:function(){var e,t=0<this._frozenColumnsLength?(e=Z(this.getHeaderTable()).find("colgroup"),Z(this.getContentTable()).find("colgroup")):(e=Z(this.getHeaderTable()).find("colgroup")[0],Z(this.getContentTable()).find("colgroup")[0]),i=Z(e).clone(),s=Z(t).clone(),n=Z(t).clone();Z(t).remove(),Z(e).remove(),0<this._frozenColumnsLength?(Z(i[0]).prependTo(this.getHeaderTable()[0]),Z(i[1]).prependTo(this.getHeaderTable()[1]),Z(s[0]).prependTo(this.getContentTable()[0]),Z(s[1]).prependTo(this.getContentTable()[1]),this._$footertableContent&&(Z(this._$footertableContent).find("colgroup").remove(),Z(n[0]).prependTo(this._$footertableContent[0]),Z(n[1]).prependTo(this._$footertableContent[1])),this._$totalSummaryRowContainer&&(this.mobileDevice()||"safari"!=this.getBrowserDetails().browser||this._$totalSummaryRowContainer.find("#e-movablefooter"+this._id).css("margin-left","auto")),this.mobileDevice()||"safari"!=this.getBrowserDetails().browser||this.getHeaderContent().find("#e-movableheader"+this._id).add(this.getContent().find("#e-movablecontainer"+this._id)).css("margin-left","auto"),Z("#e-frozencontentdiv"+this._id).length&&Z("#e-frozencontentdiv"+this._id).css("width","100%")):(Z(i).prependTo(this.getHeaderTable()),Z(s).prependTo(this.getContentTable()),this._$footertableContent&&(Z(this._$footertableContent).find("colgroup").remove(),Z(n).prependTo(this._$footertableContent)))},_detailColsRefresh:function(){var e;this._$headerCols=this.getHeaderTable().children("colgroup").find("col"),this._$contentCols=this.getContentTable().children("colgroup").find("col"),(this.model.detailsTemplate&&this.model.showDetailsRow&&this.model.showDetailsRowInfoColumn||this.model.isFromGantt)&&(e=this.model.columns.length,this._$headerCols.length>e&&this._$headerCols.splice(e,1),this._$contentCols.length>e&&this._$contentCols.splice(e,1))},_swipeAction:function(e){var t=this._currentPage(),i=!0,s=(this.getScrollObject()||{})._scrollXdata;switch(s&&(i="swipeleft"==e.type?s.scrollable-s.sTop==0:0==s.sTop),e.type){case"swipeleft":!this.model.allowPaging||t==this.model.pageSettings.totalPages||this.model.isEdit||this._isRowEdit||!i&&this.getScrollElement().ejScroller("isHScroll")||this.element.ejTreeGrid("gotoPage",t+1);break;case"swiperight":this.model.allowPaging&&1<t&&!this.model.isEdit&&!this._isRowEdit&&(!i&&this.getScrollElement().ejScroller("isHScroll")||this.element.ejTreeGrid("gotoPage",t-1))}},gotoPage:function(e){var t=this,i=t.model,s={};if(this.model.allowPaging){if(this._isLoadonDemand&&e&&e!=this._currentPage())return this._currentPage(e),t._refreshDataSource(),void(this._prevPageNo!=e&&(this._prevPageNo=e));J.isNullOrUndefined(e)?e=t._currentPage():e<=0?e=1:e>i.pageSettings.totalPages&&(e=i.pageSettings.totalPages),e=J.isNullOrUndefined(e)?t._currentPage():e,this._currentPage(e),s.previousPage=this._prevPageNo,s.currentPage=e,i.allowPaging&&(s.requestType=J.TreeGrid.Actions.Paging),t._setScrollTop(),t._updateCurrentViewData(),i.enableVirtualization&&i.pageSettings.pageSizeMode==J.TreeGrid.PageSizeMode.Root&&-1==Z.inArray(e,t._expandCollapsePages)&&(t._isInExpandCollapseAll=!0,"collapseAll"==t._expandCollapseSettings.state?t._collapseAllData():"expandAll"==t._expandCollapseSettings.state&&t._expandAllData(),"collapseAtLevel"==t._expandCollapseSettings.atLevel?t._collapsePageLevelData():"expandAtLevel"==t._expandCollapseSettings.atLevel&&t._expandPageLevelData(),i.enableAltRow&&t.updateAltRow()),t.renderRecords(s),t._isInExpandCollapseAll=!1,t._updateWrapRowHeights("total,header"),t.updateHeight(),t._updateScrollCss(),i.allowTextWrap&&i.enableVirtualization&&t._updateWrapRowHeights("header","refreshAll"),s.previousPage!=s.currentPage&&(t.clearSelection(-1),t.selectedRowIndex(-1),t.model.selectedItem=null,t._cancelSaveTools(),t._clearContextMenu(),t.model.allowSelection&&"multiple"==t.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&t._clearMultiSelectPopup(),this._prevPageNo=s.currentPage)}},_pagerClickHandler:function(e){var t=this;return t.model.pageSettings.pageSizeMode==J.TreeGrid.PageSizeMode.Root&&t._batchEditStarts&&!t._confirmDialog.is(":visible")?(t._batchSaveLostWarning("Paging"),t._batchTempDetails.currentPage=e.currentPage,!0):this._prevPageNo!=e.currentPage?(t._isNextPage=!0,t._isRowEdit?t.cancelRowEditCell():t.model.isEdit&&t.cancelEditCell(),this.gotoPage(e.currentPage),!1):void 0},_init:function(){var t=this;if(t.model.isdesignMode){t.model.columns=[{field:"Column1",HeaderText:"Column1"},{field:"Column2",HeaderText:"Column2"},{field:"Column3",HeaderText:"Column3"},{field:"Column4",HeaderText:"Column4"}],t.model.childMapping="Children";for(var e=[{Column1:"Value 1",Column2:"Value 2",Column3:"Value 3",Column4:"Value 4",Children:[]}],i=1;i<4;i++)e[0].Children.push({Column1:"Value 1",Column2:"Value 2",Column3:"Value 3",Column4:"Value 4"});this.dataSource(e),this.model.sizeSettings.height="250px",this.model.sizeSettings.width="600px"}t._detailsColumnWidth=35,t._summaryColumnIndex=0,t.model.summaryRows.length<=1&&(t.model.collapsibleTotalSummary=!1),t._trigger("load"),t._validateColumnFields(),t.model.isFromGantt||t._validateColumnVisible(!0),t._initPrivateProperties(),t._setCultureInfo(),this.dataSource()instanceof J.DataManager&&this.dataSource().ready!=P?((t=this)._renderWaitingPopup(),this.dataSource().ready.done(function(e){t.model.dataSource=J.DataManager(e.result),t._initDatasource()})):t._initDatasource(),t._processEditing(),t.model.showColumnChooser&&t.model.showColumnOptions&&(t.columnAddDialogTemplate(),t._renderUpdateConfirmDialog()),t._createDragTooltipTemplate(),t._createTooltipTemplate()},_renderEditDialog:function(){return J.buildTag("div.e-editdialog-padding","",{display:"none"},{id:this._id+"_dialogEdit"})},_validateColumnFields:function(){var e=this.model.columns;if(!J.isNullOrUndefined(e))for(var t=0;t<e.length;t++)J.isNullOrUndefined(e[t].field)&&(e[t].field="",e[t].allowEditing=!1,e[t].allowSorting=!1,e[t].allowFiltering=!1),this._isCommandColumn(e[t])&&(e[t].allowEditing=!1,e[t].allowSorting=!1,e[t].allowFiltering=!1,e[t].showCheckbox=!1),J.isNullOrUndefined(e[t].editType)&&(e[t].editType="stringedit"),"maskedit"==e[t].editType&&J.isNullOrUndefined(e[t].filterEditType)&&(e[t].filterEditType="stringedit")},_validateColumnVisible:function(e){var t=this.model;if(this._autoHideColumns=[],this._autoShowColumns=[],t.isResponsive&&t.enableResize){var i=document.body.clientWidth,s=null;960<=i&&i<=1120?s=6:800<=i&&i<=959?s=5:640<=i&&i<=799?s=4:480<=i&&i<=639?s=3:0<=i&&i<=479&&(s=2);var n=t.columns,a=n.length;if(e)for(var r=0;r<a;r++)null!=s?n[r].priority&&(n[r].priority>=s?n[r].visible=!1:n[r].visible=!0):J.isNullOrUndefined(n[r].priority)||(n[r].visible=!0);else for(r=0;r<a;r++)null!=s?n[r].priority&&(n[r].priority>=s?0!=n[r].visible&&this._autoHideColumns.push(n[r]):0==n[r].visible&&this._autoShowColumns.push(n[r])):J.isNullOrUndefined(n[r].priority)||0==n[r].visible&&this._autoShowColumns.push(n[r])}},_hideColumns:function(e){var t=this,i=t.model;if(e.reverse(),e.sort(function(e,t){return t.priority-e.priority}),e&&0<e.length){var s=e.length;t.getHeaderTable().removeClass("e-table"),t.getContentTable().removeClass("e-table");for(var n=0;n<s;n++){var a=e[n],r=Z.inArray(a,i.columns),o=a.headerText,l=Z.inArray(o,t._hiddenColumns);a&&!t._isColumnHidable(a)||(-1!=r&&r!=i.treeColumnIndex&&-1==l&&t._autoHideShowColumn(o,r,!0),-1!=(r=Z.inArray(o,t._visibleColumns))&&t._visibleColumns.splice(r,1))}t.getHeaderTable().addClass("e-table"),t.getContentTable().addClass("e-table"),t._updateHideShowColumnAlignment()}},_showColumns:function(e){var t=this.model;if(e&&0<e.length){for(var i=e.length,s=0;s<i;s++){var n=e[s],a=Z.inArray(n,t.columns),r=n.headerText,n=Z.inArray(r,this._visibleColumns);-1!=a&&-1==n&&this._autoHideShowColumn(r,a,!1),-1!=(a=Z.inArray(r,this._hiddenColumns))&&this._hiddenColumns.splice(a,1)}this._updateHideShowColumnAlignment()}},_autoHideShowColumn:function(e,t,i){var s=this,n=s.model;s._cancelEditState(),i?(s._hiddenColumns.push(e),n.columns[t].visible=!1):(s._visibleColumns.push(e),n.columns[t].visible=!0);var a,r=s.getHeaderTable().find("colgroup").find("col"),o=s.getHeaderTable().find("thead").find("th.e-headercell");n.allowFiltering&&"filterbar"==n.filterSettings.filterType&&(a=s.getHeaderTable().find("thead").find("th.e-filterbarcell")),1==s.model.columns[t].isFrozen&&(s._updateFrozenColumnOnResize(t),s.setWidthToColumns());var l,d,h,c=s.getContentTable().find("colgroup").find("col"),u=!0,p=t;l=s.getRows(),e=s._getFooterRows(),i?(Z(r).eq(t).hide(),Z(o).eq(t).addClass("e-hide"),a&&Z(a).eq(t).addClass("e-hide"),Z(c).eq(t).hide()):(Z(r).eq(t).show(),Z(o).eq(t).removeClass("e-hide"),a&&Z(a).eq(t).removeClass("e-hide"),Z(c).eq(t).show()),0<s._frozenColumnsLength?t<s._frozenColumnsLength?(l=Z(s.getRows()[0]),e=Z(e[0]),s._gridRows&&0<Z(s.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length&&(d=parseInt(Z(s.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan")),d=i?d-1:d+1,Z(s.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",d))):(l=Z(s.getRows()[1]),e=Z(e[1]),u=!1,p=t-this._frozenColumnsLength,s._gridRows&&0<Z(s.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length&&(d=parseInt(Z(s.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan")),d=i?d-1:d+1,Z(s.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",d))):s._gridRows&&0<Z(s.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length&&(d=parseInt(Z(s.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan")),d=i?d-1:d+1,Z(s.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",d)),l.each(function(){var e=Z(this).children("td").eq(p);i?Z(e).addClass("e-hide"):Z(e).removeClass("e-hide"),n.showSummaryRow&&Z(e).hasClass("e-summaryrowcell")&&u&&s._updateSummaryRowTitleCell(r,e[0].parentElement)}),n.showTotalSummary&&(h=s._$footertableContent.find("colgroup").find("col"),i?Z(h).eq(t).hide():Z(h).eq(t).show(),e.each(function(){var e=Z(this).children("td").eq(p);i?Z(e).addClass("e-hide"):Z(e).removeClass("e-hide"),Z(e).hasClass("e-footersummaryrowcell")&&s._updateSummaryRowTitleCell(h,e[0].parentElement)}))},_updateHideShowColumnAlignment:function(){var e=this.model;this._addInitTemplate();var t=this.getScrollElement();e.columnResizeSettings.columnResizeMode!=J.TreeGrid.ColumnResizeMode.FixedColumns||e.isFromGantt||this._updateTableWidth(),t.ejScroller("refresh"),this._updateScrollCss(),this._updateHeaderScrollLeft(),e.showColumnChooser&&(this._renderColumnChooserList(!0),this._updateColumnMenuVisibility())},_treeGridAddEditDialog:function(){if(0!=this.model.columns.length){for(var e,t,i,s=J.buildTag("div"),n=J.buildTag("form.e-treegridform","",{},{id:this._id+"EditFormDialog"}),a=J.buildTag("table","",{margin:"0 auto"},{}),r=0;r<this.model.columns.length;r++)!this.model.columns[r].visible&&!J.isNullOrUndefined(this.model.columns[r].visible)||"checkboxState"==this.model.columns[r].field||this._isCommandColumn(this.model.columns[r])||(e=J.buildTag("tr"),t=J.buildTag("td.e-editdialoglabel","",{"text-align":"right"}),i=J.buildTag("td.e-editdialogrowcell","",{"text-align":"left"}),0!=this.model.columns[r].allowEditing&&e.append(t.get(0)).append(i.get(0)),this.model.columns[r].headerText==P&&(this.model.columns[r].headerText=this.model.columns[r].field),t.append("<label>"+this.model.columns[r].headerText+"</label>"),0!=this.model.columns[r].allowEditing&&this.model.columns[r].field&&J.TreeGrid._initCellEditType(this,i,this._id,r),0==this.model.columns[r].allowEditing&&i.find(".e-field").attr("disabled",!0).addClass("e-disable"),!1===this.model.columns[r].visible&&e.addClass("e-hide"),a.append(e));n.append(a),n.appendTo(s),s=this._renderDiaglogButton(n,s,a),Z.templates(this._id+"_JSONDialogEditingTemplate",s.html())}},_treeGridAddEditDialogTemplate:function(){var e,t,i;0!=this.model.columns.length&&(e=J.buildTag("div","",{display:"none"}),t=J.buildTag("form.e-treegridform","",{},{id:this._id+"EditFormDialog"}),i=this.model.editSettings.dialogEditorTemplateID,t.html(Z(i).html()),e=this._renderDiaglogButton(t,e),Z.templates(this._id+"_JSONdialogTemplateMode",e.html()))},_renderDiaglogButton:function(e,t,i){var s,n,a=this._contextMenuTexts,r="EditFormDialog_";J.isNullOrUndefined(i)?((s=J.buildTag("input.e-save e-button e-btnsub e-flat","",{"margin-left":"33%"},{type:"button",id:r+this._id+"_Save"})).ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:a.saveText,width:"30%"}),(n=J.buildTag("input.e-cancel e-button e-btncan e-flat","",{"margin-left":"7%"},{type:"button",id:r+this._id+"_Cancel"})).ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:a.cancelText,width:"30%"})):((s=J.buildTag("input.e-save e-button e-btnsub e-flat","",{"margin-left":"0px"},{type:"button",id:r+this._id+"_Save"})).ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:a.saveText,width:"45%"}),(n=J.buildTag("input.e-cancel e-button e-btncan e-flat","",{"margin-left":"10%"},{type:"button",id:r+this._id+"_Cancel"})).ejButton({cssClass:this.model.cssClass,enableRTL:this.model.enableRTL,text:a.cancelText,width:"45%"}));var o,l,d,a=J.buildTag("div","",{},{class:"e-editform-btn e-editdialogbutton"});return J.isNullOrUndefined(i)||(o=J.buildTag("tr"),l=J.buildTag("td.e-editdialoglabel"),d=J.buildTag("td.e-editdialogrowcell")),a.append(s),a.append(n),J.isNullOrUndefined(i)||(d.append(a),o.append(l),o.append(d),i.append(o)),e.appendTo(t),J.isNullOrUndefined(i)?e.append(a):e.append(i),t},updateAllowKeyboardNavigation:function(e){this.model.allowKeyboardNavigation=e},_updateSummaryTitleColumn:function(){var e=this.model;e.collapsibleTotalSummary&&0==this._summaryColumnIndex&&(e.columns[this._summaryColumnIndex].visible&&!Z("#"+this._id+"-footersummaryrow").find(".e-summarytitle").hasClass("e-summarycell")?(Z("#"+this._id+"-footersummaryrow").find(".e-summarytitle").addClass("e-summarycell"),Z("#"+this._id+"-footersummaryrow").find(".e-summarycell").css({overflow:"hidden","padding-left":"25px",float:"none"}),Z("#"+this._id+"-footersummaryrow").find(".e-summarytitle").parent().addClass("e-summaryindend").css({"padding-left":"0px"})):!e.columns[this._summaryColumnIndex].visible&&Z("#"+this._id+"-footersummaryrow").find(".e-summarytitle").hasClass("e-summarycell")&&(Z("#"+this._id+"-footersummaryrow").find(".e-summarytitle").removeClass("e-summarycell"),Z("#"+this._id+"-footersummaryrow").find(".e-summarytitle").css({"padding-left":"0px",float:"left"}),Z("#"+this._id+"-footersummaryrow").find(".e-summarytitle").parent().removeClass("e-summaryindend").css({"padding-left":"10px"})))},_refreshFooterSummaryRecords:function(){var e,t;this.model.showTotalSummary&&0<this._$footerContainer.length&&(0<this._frozenColumnsLength?(this._$footerContainer.html(this._renderSummaryByFrozenDesign()),this._renderFrozenSummary()):(e=J.buildTag("table.e-table e-zerospace#"+this._id+"summarye-table","",{top:"0px"}),t=J.buildTag("tbody"),e.append(this.getContentTable().find("colgroup").clone()).append(t),t.html(Z.render[this._id+"_Template"](this._footerSummaryRecord)),this._$footerContainer.empty().append(e)),this._$footertableContent=this._$footerContainer.find(".e-table"),this._updateSummaryTitleColumn())},_updateHeaderScrollLeft:function(e){J.isNullOrUndefined(e)&&(e=this.getScrollElement().ejScroller("option","scrollLeft")),0<this._frozenColumnsLength?(this._$gridHeaderContainer.find("#e-movableheader"+this._id).scrollLeft(e),this.model.showTotalSummary&&this._$footerContainer&&this._$footerContainer.find("#e-movablefooter"+this._id).scrollLeft(e)):(this._$gridHeaderContainer.scrollLeft(e),this.model.showTotalSummary&&this._$footerContainer&&this._$footerContainer.scrollLeft(e))},updateColumns:function(e){var t=this.model;J.isNullOrUndefined(e)||(t.columns=e),t.isFromGantt&&t.enableSerialNumber&&this._updateTreeColumnIndex(),this._refreshFrozenColumns(),this._updateWrapRowHeights(null,"refreshAll"),t.isFromGantt&&this._updateAddEditDialogTemplate()},updateToGanttColumns:function(){var e=this.model.columns;Z("#"+this._id.replace("ejTreeGrid","")).data("ejGantt").updateGanttColumns(e)},_updateAddEditDialogTemplate:function(){var e=Z("#"+this._id.replace("ejTreeGrid","")).data("ejGantt");e.addDialogTemplate(),e.editDialogTemplate()},_refreshFrozenColumns:function(e){var t,i,s=this,n=this.model,a=!1;s._initFrozenColumns(),s._processEditing(),s._$gridHeaderContent.replaceWith(s._renderGridHeader()),s._addInitTemplate(),n.isFromGantt&&s._$gridContent.removeClass("e-borderbox"),0<this._frozenColumnsLength&&0==s._$frozenTableContent.length?(a=!0,t=s._$gridContent.css("width"),i=s._$gridContent.css("height"),s._$gridContent.ejScroller("destroy"),s._$gridContent.css("width",t),s._$gridContent.css("height",i),s._$gridContainer.html(s._renderByFrozenDesign()),s.setGridContentTable(s._$gridContainer.find(".e-table")),n.allowTextWrap&&!n.enableVirtualization?s._$gridContainer.find("#e-movablecontent"+s._id+",#e-movablecontentdiv"+s._id+",#e-frozencontentdiv"+s._id).css("height","auto"):s._$gridContainer.find("#e-movablecontent"+s._id+",#e-movablecontentdiv"+s._id+",#e-frozencontentdiv"+s._id).css("height",s._$gridContainer.css("height")),s._renderScroller(!0)):0<s._$frozenTableContent.length&&0==this._frozenColumnsLength&&(a=!0,s._$gridContent.find("#e-movablecontainer"+s._id).ejScroller("destroy"),t=J.buildTag("table.e-table e-zerospace#"+s._id+"e-table","",{top:"0px",position:"relative"}),i=J.buildTag("tbody"),t.append(s.getHeaderTable().find("colgroup").clone()).append(i),s._$gridContainer.html(t),s.setGridContentTable(t),s._renderScroller(!0)),s._$frozenTableContent=Z("#"+s._id+"frozene-table"),s._$movableTableContent=Z("#"+s._id+"movablee-table"),s._$tableContent=Z("#"+s._id+"e-table"),n.showTotalSummary&&0<s._$footerContainer.length&&!e&&s._refreshFooterSummaryRecords(),a&&s.onScrollHelper(0),e||((a={}).requestType=J.TreeGrid.Actions.Refresh,s._isRendered=!1,s.sendDataRenderingRequest(a),s._isRendered=!0),s.setWidthToColumns(),s._trigger("headerRefresh"),s._isRendered=!0,e||(s._trigger("refresh"),this._eventBindings()),this._hideCollapsedDetailsRows(),e||(s.getScrollElement().ejScroller("refresh"),s._updateScrollCss(),n.isFromGantt&&s._trigger("refreshScrollCss")),(n.showColumnChooser||n.contextMenuSettings.showContextMenu)&&s._renderColumnChooserList(!0),s._updateHeaderScrollLeft(),n.isFromGantt&&(s._addEmptyColumntoGrid(),s.updateToGanttColumns())},freezePrecedingColumns:function(e){var t=this.model.columns,e=this.getColumnByField(e),i=t.indexOf(e);if(this._saveEditedElements(),this._clearContextMenu(),this._removeDetailsRow(),this._clearColumnMenu(),J.isNullOrUndefined(e)||-1==i)return!1;if(0==i&&i<=this._frozenColumnsLength)return!1;e=this._getFrozenColumnWidth(i);if((e+=18)>this._gridWidth)return!1;for(var s=0;s<i;s++)t[s].isFrozen=!0;this._refreshFrozenColumns(),this._updateWrapRowHeights(null,"virtualRefresh")},freezeColumn:function(e,t){var i=this,s=this.model,n=s.columns,e=this.getColumnByField(e);if(i._saveEditedElements(),this._clearContextMenu(),this._removeDetailsRow(),this._clearColumnMenu(),"cell"==s.selectionSettings.selectionMode&&i.clearSelection(),J.isNullOrUndefined(e))return!1;if(i._frozenColumnsLength==s.columns.length-1&&t)return!1;if(e.isFrozen==t)return!1;s=this._getFrozenColumnWidth(),n=n.indexOf(e);if((s+=t?this.columnsWidthCollection[n]+18:-this.columnsWidthCollection[n])>this._gridWidth)return!1;e.isFrozen=t,i._refreshFrozenColumns(),t&&(i._allowFreezingDefault=0<this._frozenColumnsLength),i._off(i.element,"mousewheel DOMMouseScroll",i._mouseWheel),this._frozenColumnsLength&&i._on(i.element,"mousewheel DOMMouseScroll",i._mouseWheel),i._updateWrapRowHeights(null,"virtualRefresh")},updateCheckboxColumn:function(e){var t,i=this.model.columns,e=this.getColumnByField(e);this._checkboxSelection&&(Z.each(i,function(e,t){t.showCheckbox=!1}),J.isNullOrUndefined(e)||-1<(t=i.indexOf(e))&&(i[t].showCheckbox=!0),i={},(t={}).selectionType=J.TreeGrid.SelectionType.Checkbox,i.selectionSettings=t,this._refreshSelectionSettings(i,"selectionSettings"))},_refreshSelectionSettings:function(e,t){var i=this,s=i.model,n=!1,n=!J.isNullOrUndefined(e[t].selectionType)||!J.isNullOrUndefined(e[t].selectionMode);"selectionType"==t?(s.selectionSettings.selectionType=e[t],n=!0):"selectionMode"==t?(s.selectionSettings.selectionMode=e[t],n=!0,s.showColumnChooser&&s.showColumnOptions&&i.columnAddDialogTemplate()):Z.extend(s.selectionSettings,e[t]);var a=s.selectionSettings.selectionType==J.TreeGrid.SelectionType.Checkbox&&s.selectionSettings.selectionMode==J.TreeGrid.SelectionMode.Row;(!J.isNullOrUndefined(e[t].enableHierarchySelection)&&0<s.selectedItems.length||!a&&i._checkboxSelection)&&(i._isFromSetmodel=!0,i.selectAllRows(!1),i._isFromSetmodel=!1),(i._checkboxSelection||a)&&(i._checkboxSelection=a,i._processEditing(),(!a&&"checkboxState"==i._checkboxColumnName||s.columns[0].nonColumn&&"checkboxState"!=i._checkboxColumnName)&&(t=s.columns[s.treeColumnIndex],s.columns[0].isFrozen&&(s.columns[0].isFrozen=!1,--i._frozenColumnsLength,a=i._frozenColumns.indexOf(s.columns[0]),i._frozenColumns.splice(a,1),s.scrollSettings.frozenColumns=this._frozenColumnsLength),s.columns.splice(0,1),t&&(s.treeColumnIndex=s.columns.indexOf(t))),i._checkboxSelection||(i._checkboxColumnName=null),i._$gridHeaderContent.replaceWith(i._renderGridHeader()),i._setWidthToHeaders(),i._trigger("headerRefresh"),s.allowFiltering&&i._resizeFilteringElements(),n&&(i._addInitTemplate(),this.renderRecords()),i.setWidthToColumns(),i.getScrollElement().ejScroller("refresh"),i._updateScrollCss(),i._updateHeaderScrollLeft(),0<s.selectedItems.length&&i.selectAllRows()),s.isFromGantt&&i._processEditing()},_setModel:function(e){var t,i,s,n,a=this,r=a.model,o=a.getUpdatedRecords();for(t in e)switch(t){case"enableAltRow":r.enableAltRow=e[t],a._addInitTemplate(),a.renderRecords(b),a._updateWrapRowHeights("header","refreshAll");break;case"allowFiltering":!r.allowFiltering&&0<a._filteredColumnValueID.length&&a._clearAllFilter(a._filteredColumnValue),r.allowFiltering=e[t],a._initiateSetModel(),r.allowFiltering=e[t];var l,d,h=(m=a.getScrollElement().ejScroller("instance")).scrollLeft(),c=0,u=m.scrollTop();a._$gridHeaderContent.replaceWith(a._renderGridHeader()),a._setWidthToHeaders(),a._trigger("headerRefresh"),r.showTotalSummary&&(c=a.element.find(".e-footersummaryrowdiv").outerHeight()),Z("#"+a._id).addClass("e-treegrid-overflow"),a._viewPortHeight=a.element.height()-(a._getNonContentHeight()+c),Z("#"+a._id).removeClass("e-treegrid-overflow"),0<a._frozenColumnsLength&&a._$gridContent.css("height",a._viewPortHeight),m.option("height","auto"==r.sizeSettings.height?0:a._viewPortHeight),r.enableVirtualization&&(l=r.currentViewData.length,d=r.rowHeight,l*(d+=r.showDetailsRow&&!r.showDetailsRowInfoColumn?r.detailsRowHeight:0)<a._viewPortHeight&&(0<l?(u-=a._viewPortHeight-(l-1)*d)<0&&(u=0):(a.processBindings(),a.renderRecords()))),r.showColumnChooser&&r.showColumnOptions&&a.columnAddDialogTemplate(),r.allowFiltering&&"menu"==r.filterSettings.filterType&&0==a._renderedFilterMenuDialog.length&&a._renderFilterMenu(),this.setWidthToColumns(),m.scrollY(u,!0),m.scrollX(h,!0),a._updateHeaderScrollLeft(h),a._updateScrollCss(),a._updateWrapRowHeights("row,total","refreshAll");break;case"enableResize":a.model.enableResize=e[t],r.enableResize?a._on(Z(window),"resize",a._windowResize):a._off(Z(window),"resize",a._windowResize);break;case"isResponsive":a.model.isResponsive=e[t],r.isResponsive?(a._on(Z(window),"resize",a._windowResize),Z("#"+a._id+"_toolbarItems").addClass("e-treegridadaptivetoolbar")):(a._off(Z(window),"resize",a._windowResize),Z("#"+a._id+"_toolbarItems").removeClass("e-treegridadaptivetoolbar")),a._mediaQueryUpdate();break;case"enableVirtualization":r.enableVirtualization=e[t];a._prevSelectedItem;var p=a.selectedRowIndex()&&o[a.selectedRowIndex()];a._vScrollDist=1,a.processBindings(),r.enableVirtualization||(0<this._frozenColumnsLength?(a._$frozenTableContent.css({top:0}),a._$movableTableContent.css({top:0})):a._$tableContent.css({top:0})),p&&a.selectedRowIndex(o.indexOf(p)),(b={}).requestType=J.TreeGrid.Actions.Refresh,a.sendDataRenderingRequest(b),a._updateWrapRowHeights(null,"refreshAll"),a._isRowEdit=r.isEdit=!1,a._cancelSaveTools(),a._clearColumnMenu(),a._clearContextMenu(),this._removeDetailsRow(),a._vScrollDist=0;break;case"allowColumnResize":r.allowColumnResize=e[t],r.allowColumnResize&&(a._resizer=new J.gridFeatures.gridResize(a)),a._enableColumnResizeEvents();break;case"allowSorting":r.allowSorting=e[t],a.sortSetting(e[t]),r.showColumnChooser&&r.showColumnOptions&&a.columnAddDialogTemplate();break;case"allowPaging":var m,c=a.element.find("#"+a._id+"Pager");r.allowPaging?(a._updateTotalRecordsCount(),a.element.append(a._renderGridPager()),a.element.append(c),a.element.find(".e-pager").css({width:a._gridWidth-2}),h=(m=a.getScrollElement().ejScroller("instance")).scrollLeft(),u=m.scrollTop(),a._viewPortHeight=a._getViewPortHeight(),r.showTotalSummary&&(a._viewPortHeight-=a._$totalSummaryRowContainer.outerHeight()),0<a._frozenColumnsLength&&a._$gridContent.css("height",a._viewPortHeight),m.option("height","auto"==r.sizeSettings.height?0:a._viewPortHeight),m.scrollY(u,!0),m.scrollX(h,!0),a._pagerHeight=Z(c).outerHeight(),a.gotoPage()):(p=Z(c).outerHeight(),Z(c).remove(),a._viewPortHeight=a._viewPortHeight+p,0<this._frozenColumnsLength&&a._$gridContent.css("height",a._viewPortHeight),a.getScrollElement().ejScroller({height:a._viewPortHeight}),0<r.pageSettings.totalRecordsCount?(r.pageSettings.totalRecordsCount=null,a._refreshDataSource()):a.refreshContent(),a.renderRecords(),a._isRefreshAddedRecord=!1),a._updateWrapRowHeights("header","refreshAll");break;case"dragTooltip":var g=e[t].tooltipItems;g&&!Array.isArray(g)&&(g=0<g.length?g.split(","):[],e[t].tooltipItems=g),Z.extend(r.dragTooltip,e[t]),a._createDragTooltipTemplate(),a.refreshContent();break;case"allowDragAndDrop":r.allowDragAndDrop=e[t];jQuery.uaMatch(navigator.userAgent);a.refreshContent();break;case"sortSettings":Z.extend(r.sortSettings,e[t]),a.refreshContent(),(i={}).requestType=J.TreeGrid.Actions.Sorting,a.sendDataRenderingRequest(i);break;case"allowSelection":r.allowSelection=e[t],r.allowSelection||(a._checkboxSelection&&0<r.selectedItems.length&&(a._isFromSetmodel=!0,a.selectAllRows(!1),a._isFromSetmodel=!1),a.clearSelection(-1),a.selectedRowIndex(-1),a.model.selectedItem=null,a._cancelSaveTools());break;case"allowTextWrap":case"headerTextOverflow":"allowTextWrap"==t&&(r.allowTextWrap=e[t]),"headerTextOverflow"==t&&(r.headerTextOverflow=e[t],a._$gridHeaderContent.replaceWith(a._renderGridHeader()),a.setWidthToColumns(),a._trigger("headerRefresh"),a.getScrollElement().ejScroller("refresh"),a._updateScrollCss()),"allowTextWrap"==t&&(a._addInitTemplate(),a.renderRecords(b),a.model.showTotalSummary&&a._createTotalSummaryRow()),a._updateWrapRowHeights(null,"refreshAll");break;case"selectionType":case"selectionMode":case"selectionSettings":this._initiateSetModel(),a.clearAllSelection(),a._refreshSelectionSettings(e,t),a.model.allowSelection&&"multiple"==a.model.selectionSettings.selectionType&&0==Z("#"+a._id+"_selectionpopup").length&&!a.model.isFromGantt&&a._renderMultiSelectionIndicator();break;case"showSummaryRow":r.showSummaryRow=e[t],r.showSummaryRow?(a._createSummaryRow(),(i={}).requestType=J.TreeGrid.Actions.Refresh,a.sendDataRenderingRequest(i)):(Z(a.element).find(".e-summaryrow").hide(),r.updatedRecords=a._spliceSummaryRows(r.updatedRecords),r.allowPaging&&(a._updateCurrentViewData(),(i={}).requestType=J.TreeGrid.Actions.Refresh,a.sendDataRenderingRequest(i))),a.updateCollapsedRecordCount(),a._updateWrapRowHeights("header"),a.updateHeight(),!r.allowTextWrap&&"wrap"!=r.headerTextOverflow||a._updateGridContentHeight();break;case"totalSummaryHeight":if(!r.showTotalSummary)return;a._createTotalSummaryRow(),a._viewPortHeight=a._getViewPortHeight(),a._viewPortHeight-=a._$totalSummaryRowContainer.outerHeight(),a._updateSummaryHeight();break;case"collapsibleTotalSummary":if(!r.showTotalSummary)return;if(1==r.summaryRows.length)return void(r.collapsibleTotalSummary=!1);a._addInitTemplate(),a._createTotalSummaryRow(),r.collapsibleTotalSummary||(a._viewPortHeight=a._getViewPortHeight(),a._viewPortHeight-=Z(a._$totalSummaryRowContainer).outerHeight(),a._updateSummaryHeight());break;case"showTotalSummary":r.showTotalSummary=e[t],r.showTotalSummary?(a._createTotalSummaryRow(),a._viewPortHeight=a._getViewPortHeight(),a._viewPortHeight-=Z(a._$totalSummaryRowContainer).outerHeight()):(Z(a.element).find(".e-footersummaryrowdiv").remove(),a._$totalSummaryRowContainer=null,a._$footertableContent=null,a._$footerContainer=null,a._footerSummaryRecord=[],a._footerSummaryRows=[],a._viewPortHeight=a._getViewPortHeight()),a._updateSummaryHeight();break;case"selectedRowIndex":this.isEdit||this._isRowEdit?this.selectedRowIndex(o.indexOf(a._prevSelectedItem)):(0<=this.selectedRowIndex()&&!J.isNullOrUndefined(this.selectedRowIndex())&&r.allowSelection&&o.length>this.selectedRowIndex()&&this.getExpandStatus(o[this.selectedRowIndex()])?(f=this.selectedRowIndex(),a._rowSelectingEventTrigger(this._previousIndex,f)||(r.showSummaryRow&&(g=a._spliceSummaryRows(r.updatedRecords)[f],f=o.indexOf(g)),a.selectRows(f),a._rowSelectedEventTrigger(f))):(a.clearSelection(-1),a.selectedRowIndex(-1),a.model.selectedItem=null,a._previousIndex=-1),a._cancelSaveTools());break;case"selectedCellIndexes":r.allowSelection&&"cell"==r.selectionSettings.selectionMode&&a.selectCells(e[t]);break;case"showStackedHeader":case"stackedHeaderRows":r.showStackedHeader&&(r.stackedHeaderRows&&0<r.stackedHeaderRows.length||e.stackedHeaderRows&&0<e.stackedHeaderRows.length)?(J.getObject("stackedHeaderRows.length",e)&&(r.stackedHeaderRows=e.stackedHeaderRows),0<a.getHeaderTable().find(".e-stackedHeaderRow").length&&a.getHeaderTable().find(".e-stackedHeaderRow").remove(),a._refreshStackedHeader()):0<a.getHeaderTable().find(".e-stackedHeaderRow").length&&a.getHeaderTable().find(".e-stackedHeaderRow").remove();break;case"editSettings":Z.extend(r.editSettings,e[t]),a._processEditing(),a._enableEditingEvents(),a._updateToolbarItems(),r.editSettings.allowDeleting&&r.editSettings.showDeleteConfirmDialog&&J.isNullOrUndefined(a._confirmDialog)&&a._renderConfirmDialog();break;case"allowKeyboardNavigation":r.allowKeyboardNavigation=e[t];break;case"dataSource":var f={};f.requestType=J.TreeGrid.Actions.RefreshDataSource,f.isUpdateColumns=!1,a._isRowEdit||a.model.isEdit||a._trigger("actionBegin",f)||(a._fieldNamesToQuery=[],a._assignedIdCollections=[],a._assignedParendIDs=[],a._refreshDataSource(f));break;case"columns":r.columns=e[t].slice(0),a._validateColumnFields(),a._validateColumnVisible(!0),a._refreshFrozenColumns(),a._updateWrapRowHeights(null,"refreshAll");break;case"rowHeight":r.rowHeight=e[t],a._addInitTemplate(),a.renderRecords(b),a.model.showTotalSummary&&(a._createTotalSummaryRow(),a._viewPortHeight=a._getViewPortHeight(),a._viewPortHeight-=a._$totalSummaryRowContainer.outerHeight(),a._updateSummaryHeight()),a.updateHeight();break;case"treeColumnIndex":a.columnIndex(e[t]);break;case"showColumnChooser":r.showColumnChooser=e[t],a._$gridHeaderContent.replaceWith(a._renderGridHeader()),a.setWidthToColumns(),a._trigger("headerRefresh"),a.getScrollElement().ejScroller("refresh"),a._updateScrollCss(),r.showColumnChooser?(a._renderColumnChooser(),r.allowFiltering&&"menu"==r.filterSettings.filterType&&0==a._renderedFilterMenuDialog.length&&a._renderFilterMenu()):(a._clearColumnMenu(),Z("#"+a._id+"ccDiv_wrapper").remove(),Z("#"+a._id+"filterMenu_wrapper").remove()),a._updateWrapRowHeights("row,total","refreshAll"),r.isFromGantt&&(a._addEmptyColumntoGrid(),this._updateHeaderScrollLeft(this.getScrollElement().ejScroller("model.scrollLeft")));break;case"showColumnOptions":r.showColumnOptions=e[t],a._$gridHeaderContent.replaceWith(a._renderGridHeader()),a.setWidthToColumns(),a._trigger("headerRefresh"),a.getScrollElement().ejScroller("refresh"),a._updateScrollCss(),r.showColumnChooser&&r.showColumnOptions?(a.columnAddDialogTemplate(),a._renderUpdateConfirmDialog()):(a._clearColumnMenu(),Z("#"+a._id+"ccDiv_wrapper").remove(),Z("#"+a._id+"filterMenu_wrapper").remove()),a._updateWrapRowHeights("row,total","refreshAll"),r.isFromGantt&&a._addEmptyColumntoGrid();break;case"locale":a._clearContextMenu(),a._clearColumnMenu(),a._removeDetailsRow(),r.locale=e[t],a._setCultureInfo(),a._processEditing(),a._addInitTemplate(),a.refreshContent(),a._$gridHeaderContent.replaceWith(a._renderGridHeader()),a.renderRecords(b),a.setWidthToColumns(),a._trigger("headerRefresh"),a.getScrollElement().ejScroller("refresh"),a._updateScrollCss(),r.showColumnChooser&&a._renderColumnChooserList(!0),r.toolbarSettings.showToolbar&&a._updateToolbar(),r.allowPaging&&a.getPager().ejPager("option",e[t]).ejPager("refreshPager"),a.model.showColumnChooser&&a.model.showColumnOptions&&(a.columnAddDialogTemplate(),a._renderUpdateConfirmDialog()),r.allowFiltering&&"menu"==r.filterSettings.filterType&&a._renderFilterMenu(),a._updateWrapRowHeights(null,"refreshAll");break;case"toolbarSettings":Z.extend(a.model.toolbarSettings,e[t]),a._updateToolbar(),a._updateWrapRowHeights("header","refreshAll");break;case"contextMenuSettings":Z.extend(a.model.contextMenuSettings,e[t]),r.contextMenuSettings.showContextMenu||a._clearContextMenu(),this._removeDetailsRow();break;case"enableCollapseAll":r.enableCollapseAll=e[t],r.enableCollapseAll?a.collapseAll():a.expandAll();break;case"showDetailsRow":r.showDetailsRow=e[t],this._updateDetailsRowProperties("showDetailsRow");break;case"detailsRowHeight":r.detailsRowHeight=e[t],this._updateDetailsRowProperties("detailsRowHeight");break;case"detailsTemplate":r.detailsTemplate=e[t],this._updateDetailsRowProperties("detailsTemplate");break;case"showDetailsRowInfoColumn":r.showDetailsRowInfoColumn=e[t],this._updateDetailsRowProperties("showDetailsRowInfoColumn");break;case"altRowTemplateID":this._initiateSetModel(),r.altRowTemplateID=e[t],a._addInitTemplate(),a.renderRecords(b),a._updateWrapRowHeights("header"),this.updateHeight(),!r.allowTextWrap&&"wrap"!=r.headerTextOverflow||a._updateGridContentHeight();break;case"rowTemplateID":this._initiateSetModel(),r.rowTemplateID=e[t],a._addInitTemplate(),a.renderRecords(b),a._updateWrapRowHeights("header"),this.updateHeight(),!r.allowTextWrap&&"wrap"!=r.headerTextOverflow||a._updateGridContentHeight();break;case"pageSettings":this._initiateSetModel(),r.allowPaging&&(_={},Z.extend(r.pageSettings,e[t]),Z.extend(_,r.pageSettings),delete _.template,this.getPager().ejPager("option",_).ejPager("refreshPager"),0<e[t].totalRecordsCount?a._refreshDataSource():a.gotoPage());break;case"sizeSettings":this._initiateSetModel(),Z.extend(r.sizeSettings,e[t]),this._calculateDimensions(),this._getViewPortHeight()<=0&&(r.sizeSettings.height="450px",this._updateElementHeight()),this._windowResize();break;case"readOnly":r.readOnly=e[t];break;case"showGridCellTooltip":r.showGridCellTooltip=e[t];break;case"showGridExpandCellTooltip":r.showGridExpandCellTooltip=e[t];break;case"allowMultiSorting":r.allowMultiSorting=e[t];break;case"query":J.isNullOrUndefined(e[t])?r.query=J.Query():r.query=e[t],a._refreshDataSource();break;case"filterSettings":if(r.allowFiltering){if(e.filterSettings.filterType||"filterbar"!=r.filterSettings.filterType)e.filterSettings.filterType?(a.clearFilter(),r.allowFiltering=!0,Z.extend(a.model.filterSettings,e[t]),a._initiateSetModel(),a._isExcelFilter&&(a._isExcelFilter=!1,a._excelFilter.resetExcelFilter(),a._excelFilter=null,a._excelColTypes=[]),h=(m=a.getScrollElement().ejScroller("instance")).scrollLeft(),u=m.scrollTop(),a._$gridHeaderContent.replaceWith(a._renderGridHeader()),a._setWidthToHeaders(),a._trigger("headerRefresh"),Z("#"+a._id).addClass("e-treegrid-overflow"),a._viewPortHeight=a._getViewPortHeight(),Z("#"+a._id).removeClass("e-treegrid-overflow"),"menu"==r.filterSettings.filterType&&0==a._renderedFilterMenuDialog.length?a._renderFilterMenu():"excel"==r.filterSettings.filterType&&a._renderExcelFilter(),0<a._frozenColumnsLength&&a._$gridContent.css("height",a._viewPortHeight),m.option("height","auto"==r.sizeSettings.height?0:a._viewPortHeight),r.enableVirtualization&&(l=r.currentViewData.length,d=r.rowHeight,l*(d+=r.showDetailsRow&&!r.showDetailsRowInfoColumn?r.detailsRowHeight:0)<a._viewPortHeight&&(0<l?(u-=a._viewPortHeight-(l-1)*d)<0&&(u=0):(a.processBindings(),a.renderRecords()))),r.showColumnChooser&&r.showColumnOptions&&a.columnAddDialogTemplate(),this.setWidthToColumns(),m.scrollY(u,!0),m.scrollX(h,!0),a._updateHeaderScrollLeft(h),a._updateScrollCss()):"excel"==r.filterSettings.filterType&&(a._excelColTypes=[],a._excelFilter.resetExcelFilter(),a._excelFilter=null,a._renderExcelFilter());else{var _,v,b={};Z.extend(a.model.filterSettings,e[t]),_=a.model.filterSettings,v=J.isNullOrUndefined(_.filterBarMode)?"immediate":_.filterBarMode;for(var x=Z.extend([],_.filteredColumns),y=0;y<r.columns.length;y++)r.columns[y].allowFiltering&&a._clearFilterElementValue(r.columns[y]);_.filteredColumns=x,_.filterBarMode=v,b.requestType="filtering";for(var w=0;w<x.length;w++)Z("#"+a._id+"_"+x[w].field.split(".").join("")+"_filterbarcell").val(x[w].value);a._ensureDataSource(b),a._off(a.element,"keyup",".e-filterbarcell input",a._filterBarHandler),a._off(a.element,"click",".e-filterbarcell .e-checkbox",a._filterBarHandler),"immediate"==v&&(a._on(a.element,"keyup",".e-filterbarcell input",a._filterBarHandler),a._off(a.element,"click",".e-filterbarcell .e-checkbox")._on(a.element,"click",".e-filterbarcell .e-checkbox",a._filterBarHandler))}e.filterSettings.filterHierarchyMode&&a.clearFilter()}break;case"searchSettings":var C,S=e[t];for(C in S)"searchHierarchyMode"===C&&(a.model.searchSettings.searchHierarchyMode=S[C],a.element.find("input.e-searchinput").val(""),Z("span.e-searchcancel").addClass("e-hide"),a.search(""));case"columnResizeSettings":this._initiateSetModel(),Z.extend(r.columnResizeSettings,e[t]),this._updateGridResizeSettings(),r.columnResizeSettings.columnResizeMode==J.TreeGrid.ColumnResizeMode.FixedColumns?this._updateTableWidth():(v=0<this._frozenColumnsLength?(s=Z(this.getHeaderTable()[1]),n=Z(this.getContentTable()[1]),r.showTotalSummary?Z(this._$footertableContent[1]):null):(s=this.getHeaderTable(),n=this.getContentTable(),r.showTotalSummary?Z(this._$footertableContent[0]):null),s.css("width","").removeClass("e-tableLastCell"),n.css("width","").removeClass("e-tableLastCell"),v&&v.css("width","").removeClass("e-tableLastCell")),this._updateScrollCss();break;case"cssClass":this.element.removeClass(a._cssClass).addClass(e[t]),this.model.allowPaging&&Z("#"+this._id+"Pager").ejPager("model.cssClass",e[t]),r.toolbarSettings.showToolbar&&Z("#"+a._id+"_toolbarItems").ejToolbar("model.cssClass",e[t]),a._updateConfirmDialog&&a._updateConfirmDialog.data("ejDialog")&&a._updateConfirmDialog.ejDialog("model.cssClass",e[t]);for(var T=0;T<a._renderedFilterMenuDialog.length;T++)"stringedit"==a._renderedFilterMenuDialog[T]?(Z("#"+this._id+"filterStringMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",e[t]),Z("#"+this._id+"filterStringMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",e[t]),Z("#"+this._id+"filterStringMenuDiv_wrapper").find(".e-autocomplete").ejAutocomplete("model.cssClass",e[t])):"numericedit"==a._renderedFilterMenuDialog[T]?(Z("#"+this._id+"filterNumericMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",e[t]),Z("#"+this._id+"filterNumericMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",e[t]),Z("#"+this._id+"filterNumericMenuDiv_wrapper").find(".e-numerictextbox").ejNumericTextbox("model.cssClass",e[t])):"datepicker"==a._renderedFilterMenuDialog[T]?(Z("#"+this._id+"filterDatepickerMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",e[t]),Z("#"+this._id+"filterDatepickerMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",e[t]),Z("#"+this._id+"filterDatepickerMenuDiv_wrapper").find(".e-datepicker").ejDatePicker("model.cssClass",e[t])):"datetimepicker"==a._renderedFilterMenuDialog[T]?(Z("#"+this._id+"filterDatetimePickerMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",e[t]),Z("#"+this._id+"filterDatetimePickerMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",e[t]),Z("#"+this._id+"filterDatetimePickerMenuDiv_wrapper").find(".e-datetimepicker").ejDateTimePicker("model.cssClass",e[t])):"#"+a._renderedFilterMenuDialog[T]=="dropdownedit"?(Z("#"+this._id+"filterDropdownMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",e[t]),Z("#"+this._id+"filterDropdownMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",e[t])):"#"+a._renderedFilterMenuDialog[T]=="booleanedit"&&(Z("#"+this._id+"filterBooleanMenuDiv_wrapper").find(".e-dropdownlist").ejDropDownList("model.cssClass",e[t]),Z("#"+this._id+"filterBooleanMenuDiv_wrapper").find(".e-button").ejButton("model.cssClass",e[t]));this.columnAddDialogTemplate(),Z("#"+a._id+"ConfirmDialog_wrapper").find(".e-button").ejButton("model.cssClass",e[t]),this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&(J.isNullOrUndefined(a.model.editSettings.dialogEditorTemplateID)||""==a.model.editSettings.dialogEditorTemplateID)?a._treeGridAddEditDialog():this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&!J.isNullOrUndefined(a.model.editSettings.dialogEditorTemplateID)&&""!=a.model.editSettings.dialogEditorTemplateID&&a._treeGridAddEditDialogTemplate(),r.showColumnChooser&&this._renderColumnChooserList(!0),a._cssClass=e[t];break;case"enableLoadOnDemand":r.enableLoadOnDemand=e[t],a._refreshDataSource()}},_updateSummaryHeight:function(){var e,t,i=this,s=this.model,n=i.getScrollElement().ejScroller("instance"),a=n.scrollLeft(),r=n.scrollTop(),o=r;0<i._frozenColumnsLength&&i._$gridContent.css("height",i._viewPortHeight),n.option("height","auto"==s.sizeSettings.height?0:i._viewPortHeight),s.enableVirtualization&&(e=s.currentViewData.length,t=s.rowHeight,e*(t+=s.showDetailsRow&&!s.showDetailsRowInfoColumn?s.detailsRowHeight:0)<i._viewPortHeight&&(0<e?(r-=i._viewPortHeight-(e-1)*t)<0&&(r=0):(i.processBindings(),i.renderRecords()))),n.scrollY(r,!0),n.scrollX(a,!0),i._updateHeaderScrollLeft(a),i._updateScrollCss(),i._updateWrapRowHeights("header","refreshAll"),o==r&&(i._updateCurrentViewData(),(r={}).requestType=J.TreeGrid.Actions.Refresh,i.sendDataRenderingRequest(r))},_initiateSetModel:function(){this._saveEditedElements(),this._clearContextMenu(),this._clearColumnMenu(),this._removeDetailsRow()},_updateDetailsRowProperties:function(e){var t=this,i=this.model;(i.isEdit||this._isRowEdit)&&(this.cancelRowEditCell(),this._cancelSaveTools()),this.clearColumnMenu(),this._clearContextMenu(),this._removeDetailsRow(),i.showDetailsRow&&i.detailsTemplate&&!i.showDetailsRowInfoColumn?t._detailsRowHeight=i.detailsRowHeight:t._detailsRowHeight=0,i.flatRecords.forEach(function(e){i.showDetailsRow&&i.detailsTemplate?e.isDetailsExpanded=!i.showDetailsRowInfoColumn:e.isDetailsExpanded=!1}),"detailsTemplate"!=e&&"detailsRowHeight"!=e||!i.showDetailsRowInfoColumn?(t._$gridHeaderContent.replaceWith(t._renderGridHeader()),t._addInitTemplate(),this.onScrollHelper(0),t.refreshContent(),t._isRendered=!1,(e={}).requestType=J.TreeGrid.Actions.Refresh,t.sendDataRenderingRequest(e),t.setWidthToColumns(),t._isRendered=!0,t._trigger("headerRefresh"),t._trigger("refresh"),this._eventBindings(),this._hideCollapsedDetailsRows(),t.getScrollElement().ejScroller("refresh"),t._updateScrollCss()):t._addInitTemplate(),t._updateWrapRowHeights(null,"refreshAll")},_hideCollapsedDetailsRows:function(){var e=this.model;e.showDetailsRow&&e.detailsTemplate&&!e.showDetailsRowInfoColumn&&(0<this._frozenColumnsLength?Z(this.getTreeGridRows()[0]).add(this.getTreeGridRows()[1]):Z(this.getTreeGridRows())).filter("tr.e-collapsedrowexpandeddetailsrow").css("display","none")},_updateToolbar:function(){var e=this,t=e.model,i=e.getScrollElement().ejScroller("instance"),s=i.scrollLeft(),n=i.scrollTop();Z("#"+e._id+"_toolbarItems").remove(),Z("#"+e._id+"_toolbarItems_Main").remove(),t.toolbarSettings.showToolbar&&e._renderToolbarTemplate().insertBefore(Z("#"+e._id+"e-gridheader")),t.isEdit&&e.cancelEditCell(),e._isRowEdit&&(e.cancelRowEditCell(),e._cancelSaveTools()),e._viewPortHeight=e._getViewPortHeight(),0<e._frozenColumnsLength&&e._$gridContent.css("height",e._viewPortHeight),i.option("height","auto"==t.sizeSettings.height?0:e._viewPortHeight),t.enableVirtualization&&(e.processBindings(),e.renderRecords()),i.option("scrollTop",n),i.option("scrollLeft",s),e._clearContextMenu(),this._removeDetailsRow()},_refreshDataSource:function(e){var t=this,i=this.model;(t._isRowEdit||t.model.isEdit)&&t.cancelRowEditCell(),t.resetModelCollections(),t._createdAt="load",e&&e.isUpdateColumns&&(t._validateColumnFields(),t._validateColumnVisible(!0),t._refreshFrozenColumns(!0)),t._dataManager=t.dataSource()instanceof J.DataManager?t.dataSource():null!=t.dataSource()?J.DataManager(t.dataSource()):null,this.dataSource()instanceof J.DataManager||this.dataSource()?(t._isForDataSourceRefresh=!0,t._initDatasource()):null==this.dataSource()&&((e={}).requestType=J.TreeGrid.Actions.RefreshDataSource,t._ensureDataSource(e),t._createdAt=null,(i.showSummaryRow||i.showTotalSummary)&&t._summaryRow()),Z(".e-tooltiptable").remove()},refreshContent:function(){var e={};e.requestType=J.TreeGrid.Actions.Refresh,this.processBindings(e)},resetModelCollections:function(){var e=this.model;e.currentViewData=[],e.flatRecords=[],e.parentRecords=[],e.updatedRecords=[],e.summaryRowRecords=[],e.ids=[],this.secondaryDatasource=[],this._parentRecords=[],this._storedIndex=-1,this._idGenerator=-1,this._taskIds=[],this._jsonData=null,this._lastInsertedId=-1},_initPrivateProperties:function(){var e=this,t=this.model;e._isInManualExpandCollapse=!1,e._id=e.element.attr("id"),e.columnsWidthCollection=[],e._cSortedColumn=null,e._taskIds=[],e._maxZIndex=0,e._cSortedDirection=null,e._dataManager=null,e._persistCollapseState=!1,e._filteredRecords=[],e._disabledToolItems=[],e._currentFilterColumn=[],e._fieldColumnNames=[],e._multiSortRequest=null,e._$gridContainer=null,e._$gridContent=null,e._$gridContentTable=null,e._$gridHeaderTable=null,e._$gridHeaderContainer=null,e._$totalSummaryRowContainer=null,e._recordsCount=null,e._$gridRows=null,e._gridRows=null,e._commandColumnLength=0,this._frozenColumnsLength=0,e._initFrozenColumns(),e._allowFreezingDefault=0<this._frozenColumnsLength,e._calculateDimensions(),e._headerColumnNames=[],e._hiddenColumns=[],e._multiSelectCtrlRequest=!1,e._multiSelectShiftRequest=!1,e._ganttTouchTrigger=!1,e._moveRow=!1,e._draggedRecords=[],e._offset=0,e._previousIndex=-1,e._prevRBottom=0,e._prevRTop=0,e._prevScrollTop=0,e._prevScrollLeft=0,e._prevVBottom=0,e._resizer=null,e._scrollTop=0,e._scrollLeft=0,e._searchString="",e._fieldName="",e._selectedCellsinARow=[],e._currentRecordIndex=-1,e._sortedRecords=[],e._storedIndex=-1,e._rowIndex=-1,e._$tableContent=null,e._$footertableContent=null,e._$footerContainer=null,e._summaryExpanded=!0,e._tempsortedrecords=[],e._totalHeight=0,e._viewPortHeight=0,e._recordIndexCount=0,e._totalCollapsedRecordCount=0,e._visibleColumns=[],e._visibleRange=null,e._vScrollDir=1,e._vScrollDist=0,e._cellEditTemplate=Z(),e._tooltipTimer,e._totalBorderWidth=2,e._totalBorderHeight=1,e._toolboxTooltipTexts=null,e._contextMenuTexts=null,e._columnMenuTexts=null,e._deleteColumnText=null,e._okButtonText=null,e._cancelButtonText=null,e._confirmDeleteText=null,e._dropDownListBlanksText=null,e._editTypeText=null,e._textAlignType=null,e._clipMode=null,e._dropDownListClearText=null,e._trueText=null,e._falseText=null,e._rowDragIndexes=[],e._dropCancel=!1,e._cellEditingDetails={cellValue:null,rowIndex:-1,columnIndex:-1,fieldName:null,_data:null,cellEditType:"",cancelSave:!1,defaultData:null,insertedTrCollection:[],data:null},e._previousSelectedCellDetails={rowElement:null,cellElement:null,cellIndex:-1,rowIndex:-1},e._shiftKeyFirstElementDetails={firstElementRowIndex:-1,firstElementCellIndex:-1},e._selectedCellDetails=[],e._focusingRowIndex=-1,e._rowIndexOfLastSelectedCell=-1,e._lastSelectedCellIndex=-1,e._isEnterKeyPressed=!1,e._isShiftKeyNavigation=!1,e._scrollBarHeight=18,e._removedCount=0,e._$gridHeaderContent=null,e.secondaryDatasource=[],e._contextMenuItems=null,e._subContextMenuItems=null,e._createContextMenuTemplate(),e._createColumnMenuTemplate(),e._retrivedData=this.dataSource(),e._createdAt="load",e._isInExpandCollapseAll=!1,e._isLoadonDemand=!1,e._assignedIdCollections=[],e._totalItemCounts=null,e._assignedParendIDs=[],e._fieldNamesToQuery=[],e._isForDataSourceRefresh=!1,e._allParentItems=[],e._queryForLoadonDemand=[],e._pageRecordCountOnDemand=null,e._isFromDemandMethod=!1,e._dataManager=e.dataSource()instanceof J.DataManager?e.dataSource():null!=e.dataSource()?J.DataManager(e.dataSource()):null,e._dragMouseDown=!1,e._dragTooltip=!1,e._dragMouseLeave=!1,e._timerDragDown=null,e._timerDragUp=null,e._isDataManagerUpdate=!1,e._jsonData=null,e._isRefreshAddedRecord=!1,e._isInAdd=!1,e._maxRowIndex=0,e._isRendered=!1,this._updateGridResizeSettings(),e.batchChanges={added:[],deleted:[],changed:[],updatedHierarchyRowIndexData:[]},e._batchEditCancel=!1,e._isSummaryRow=!1,e._flatChildRecords=[],e._footerSummaryRecord=[],e._filteredChildRecords=[],e._parentRecords=[],e._zerothLevelParentRecords=[],e._detailsRowHeight=0,t.showDetailsRow&&t.detailsTemplate&&!t.showDetailsRowInfoColumn&&(e._detailsRowHeight=t.detailsRowHeight),e._isEmptyRow=!1,e._prevSelectedItem=null,e._dataSourcefields=[],e._columnDialogTexts=null,e._columnDialogTitle=null,e._addColumnFields=[],e._addColumnFieldsTxt=[],e._targetColumnIndex=0,e._insertPosition=null,e._updateconfirmDialog=null,e._columnRenameDialog=null,e._renderedSubMenuType=null,e.localizedLabels=e._getLocalizedLabels(),e._gridRecordsCount=t.pageSettings.totalRecordsCount,e._gridPager=null,e._summaryRowsCount=0,e._updatedPageData=[],e._isNextPage=!1,t.selectionSettings.selectionType=("single"==t.selectionSettings.selectionType&&"single"!=t.selectionType?t:t.selectionSettings).selectionType,t.selectionSettings.selectionMode=("row"==t.selectionSettings.selectionMode&&"row"!=t.selectionMode?t:t.selectionSettings).selectionMode,e._idGenerator=-1,e._checkboxColumnName=null,e._isFromSetmodel=!1,e._flatFilteredRecords=[],e._checkboxSelection=t.selectionSettings.selectionType==J.TreeGrid.SelectionType.Checkbox&&t.selectionSettings.selectionMode==J.TreeGrid.SelectionMode.Row,e._addCheckboxColumn=this._getDefaultCheckboxColumn(),e._filteredColumnValue=[],e._filteredColumnValueID=[],e._filterIconTarget=null,e._renderedFilterMenuDialog=[],e._filtermenutext=null,e._headerDragStatus="",e._draggedColumn=null,e._mouseDragged=!1,!J.isNullOrUndefined(t.indentLevelWidth)&&t.isFromGantt?e.treeIndentLevelWidth=t.indentLevelWidth:e.treeIndentLevelWidth=e.treeIndentLevelWidth||10,e._draggedColumnTemplate=null,e._viewPortWidth=e._gridLeft=0,e._responsiveMinWidth=768,e._dy=e._dx=0,e._isTouchEvent=!1,e._isTouchTrigger=!1,e._currentEditRecordDialogIndex=-1,e._isTreeAddEditDialogSave=!1,e._displayContextMenu=!!t.contextMenuSettings.showContextMenu,e._isEmptyRowDeleted=!1,e._cssClass=this.model.cssClass,e._batchEditStarts=!1,e._batchSaveCancel="",e._batchSaveConfirmText=null,e._batchSaveLostChangesText=null,e._cancelEditText=null,e._batchTempDetails={},e._autoHideColumns=[],e._autoShowColumns=[],e._textWrapRowsDatas=[],e._textWrapNoCalculate=!1,e._expandCollapsePages=[],e._expandCollapseSettings={state:"",atLevel:"",level:0},e._excelFilter=null,e._menuColTypes=[],e._excelColTypes=[],e._isExcelFilter=!1,e._customFilter=null,e._mediaStatus=!1,e._filterString="",e._isCloseFilterMenu=!1,e._isRemoteData=!1,e._lastInsertedId=-1,e._confirmDialog=null,e._shiftSelectedRecord=null,e._deleteRowIndex=-1,e._isFromContextmenu=!1,e._emptyRowIndex=-1},_getDefaultCheckboxColumn:function(){return{field:"checkboxState",headerText:"",allowEditing:!1,allowDelete:!1,allowSorting:!1,allowFiltering:!1,allowCellSelection:!1,isFrozen:!1,nonColumn:!0,editType:"booleanedit",width:50,textAlign:"center"}},_updateGridResizeSettings:function(){var e={resizeMode:"fixedcolumns"==this.model.columnResizeSettings.columnResizeMode?"control":this.model.columnResizeSettings.columnResizeMode};this.model.resizeSettings=e},_calculateDimensions:function(){var e=this,t=this.model;if(t.isFromGantt||(t.sizeSettings.width&&e.element.css("width",t.sizeSettings.width),t.sizeSettings.height?e.element.css("height",t.sizeSettings.height):e.element[0].style.height?t.sizeSettings.height=e.element[0].style.height:e.element.height(450)),e._gridHeight=Math.round(e.element.height()),e._gridWidth=Math.round(e.element.width()),0<this._frozenColumnsLength){for(var i=0,s=0;s<=this._frozenColumnsLength;s++)t.columns[s]&&(i+=J.isNullOrUndefined(t.columns[s].width)?150:parseInt(t.columns[s].width));e._gridWidth<i&&(e.element.css("width",i),t.sizeSettings.width=e._gridWidth=i)}},_initFrozenColumns:function(){var e,t=[],i=[],s=0,n=0,a=this.model,r=a.columns,o=r[a.treeColumnIndex];a.showTotalSummary&&a.collapsibleTotalSummary&&(e=r[this._summaryColumnIndex]);for(var l=0;l<r.length;l++)!0===r[l].isFrozen?(t.push(r[l]),(J.isNullOrUndefined(r[l].visible)||r[l].visible||r[l]==o)&&(s+=1)):(i.push(r[l]),(J.isNullOrUndefined(r[l].visible)||r[l].visible||r[l]==o)&&(n+=1));0<t.length&&(a.columns.length&&a.columns.length==t.length&&((i=t.splice(t.length-1,1))[0].isFrozen=!1),a.columns=Z.merge(Z.merge([],t),i)),this._frozenColumns=t,this._unFrozenColumns=i,0==s&&this._frozenColumns[0]&&(this._frozenColumns[0].visible=!0),0==n&&this._unFrozenColumns[0]&&(this._unFrozenColumns[0].visible=!0),o&&(a.treeColumnIndex=a.columns.indexOf(o)),a.showTotalSummary&&a.collapsibleTotalSummary&&(this._summaryColumnIndex=a.columns.indexOf(e)),this._frozenColumnsLength=t.length,a.scrollSettings.frozenColumns=this._frozenColumnsLength},updateAltRowOnCollapseAll:function(){var e=this.model;if(e.enableAltRow&&e.enableCollapseAll)for(var t,i=e.parentRecords,s=0;s<i.length;s++)(t=i[s]).isSummaryRow||(t.isAltRow=s%2!=0)},updateAltRowOnRendering:function(){for(var e=this.model.updatedRecords.filter(function(e){return null==e.parentItem||e.parentItem.expanded?e:void 0}),t=0;t<e.length;t++){var i=e[t];i.isSummaryRow||(i.isAltRow=t%2!=0)}},_checkDataBinding:function(){var e=this,t=e.model;Z("#"+e._id).addClass("e-treegrid-overflow"),e._createdAt=null,e.element.addClass("e-treegrid-core"),e.element.attr("tabindex","0"),t.cssClass&&this.element.addClass(t.cssClass),e._renderToolbar(),e._checkboxSelection&&e._updateCheckboxColumnName(),t.isFromGantt&&t.enableSerialNumber&&e._updateTreeColumnIndex(),e._renderAfterColumnInitialize(),(e.model.showColumnChooser||t.contextMenuSettings.showContextMenu)&&e._renderColumnChooser(),e.model.allowFiltering&&"menu"==t.filterSettings.filterType?e._renderFilterMenu():t.allowFiltering&&"excel"==t.filterSettings.filterType&&e._renderExcelFilter(),e._setWidthToHeaders(),e.model.allowPaging&&e.element.append(e._renderGridPager()),e._viewPortHeight=e._getViewPortHeight(),(e.model.editSettings.showConfirmDialog||e.model.editSettings.showDeleteConfirmDialog)&&e._renderConfirmDialog(),!t.isFromGantt&&e._viewPortHeight<0&&e._updateElementHeight(),e._searchString=t.searchSettings.key,e._ensureDataSource(),t.showSummaryRow&&e._createSummaryRow(),t.isFromGantt||e.updateAltRowOnCollapseAll(),t.expandStateMapping&&t.enableAltRow&&e.updateAltRowOnRendering(),e._initGridRender(),e._$gridContent=Z("#"+e._id+"e-gridcontent"),e._$gridContainer=Z("#"+e._id+"e-gridcontainer"),e._$tableContent=Z("#"+e._id+"e-table"),e._$frozenTableContent=Z("#"+e._id+"frozene-table"),e._$movableTableContent=Z("#"+e._id+"movablee-table"),e._viewPortHeight=e._getViewPortHeight(),e._$gridContent.css({height:e._viewPortHeight+"px"}),e.element.find(".e-pager").css({width:e._gridWidth-2}),e._pagerHeight=e.element.find(".e-pager").outerHeight(),t.showTotalSummary&&(e._createTotalSummaryRow(),e._viewPortHeight=e._getViewPortHeight(),t.allowPaging&&!t.sizeSettings.height||(e._viewPortHeight-=e._$totalSummaryRowContainer.height()<t.totalSummaryHeight?e._$totalSummaryRowContainer.height():t.totalSummaryHeight,e._viewPortHeight=e._viewPortHeight-1)),e._updatePagerTextAlignment(),e._wireEvents(),e.setWidthToColumns(),e._trigger("headerRefresh"),e._renderScroller(),e._updateWrapRowHeights(),t.allowTextWrap&&t.enableVirtualization&&(e._textWrapRowsDatas=e._getAvgTextWrapRowHeight("getAvgHeight")),e.updateHeight(),e._updateScrollCss(),e._resizeFilteringElements(),e._updateFixedTableBorder(),e._initialEndRendering(),!t.allowTextWrap&&"wrap"!=t.headerTextOverflow||e._updateGridContentHeight(),t.isFromGantt&&e._addEmptyColumntoGrid(),t.isFromGantt?(e._isDataManagerUpdate=t.dataManagerUpdate.isDataManagerUpdate,e._jsonData=t.dataManagerUpdate.jsonData):e._checkDataManagerUpdate(),e.model.allowSelection&&"multiple"==e.model.selectionSettings.selectionType&&!e.model.isFromGantt&&e._renderMultiSelectionIndicator(),Z("#"+e._id).removeClass("e-treegrid-overflow")},_renderMultiSelectionIndicator:function(){this._multiSelectPopup=J.buildTag("div.e-treegridpopup#"+this._id+"_selectionpopup","",{display:"none"});var e=J.buildTag("div.e-popupcontent"),t=J.buildTag("div.e-downtail e-tail"),i=J.buildTag("span.e-rowselect e-icon");e.append(i),this._multiSelectPopup.append(e),this._multiSelectPopup.append(t),this.element.append(this._multiSelectPopup)},getUpdatedDataManagerData:function(){return this._jsonData},_updateTreeColumnIndex:function(){var t,e,i=this.model,s=i.columns,n=+i.treeColumnIndex;Z.map(s,function(e){if("taskId"==e.field)return t=e,!1}),(e=s.indexOf(t))==n&&(e!=s.length-1?i.treeColumnIndex=1+n:i.treeColumnIndex=n-1)},_updateWrapRowHeights:function(e,t,i,s){var n=this,a=this.model;(a.allowTextWrap||"wrap"==a.headerTextOverflow)&&0<n._$frozenTableContent.length&&(n.getScrollElement().ejScroller("refresh"),"wrap"!=a.headerTextOverflow||!J.isNullOrUndefined(e)&&-1!=e.indexOf("header")||n._updateHeaderHeight(),a.allowTextWrap&&(J.isNullOrUndefined(e)||-1==e.indexOf("row"))&&(J.isNullOrUndefined(i)&&J.isNullOrUndefined(s)?n._updateRowHeight():n._updateRowHeight(i,s),a.showTotalSummary&&(J.isNullOrUndefined(e)||-1==e.indexOf("total"))&&n._updateTotalSummaryHeight(),n.getScrollElement().ejScroller("refresh"),e=n.getScrollElement().ejScroller("model.scrollTop"),n._getFrozenScrollElement().scrollTop(e))),"virtualRefresh"!=t||!a.allowTextWrap&&"wrap"!=a.headerTextOverflow?"refreshAll"!=t||!a.allowTextWrap&&"wrap"!=a.headerTextOverflow||(n.updateHeight(),n._updateGridContentHeight()):(a.allowTextWrap&&a.enableVirtualization&&n.updateHeight(),n._updateGridContentHeight()),"auto"==a.sizeSettings.height&&n._updateContentHeight()},_updateHeaderHeight:function(){var e=this.getHeaderContent().find("#e-frozenheaderdiv"+this._id).find("tr")[0],t=this.getHeaderContent().find("#e-movableheaderdiv"+this._id).find("tr")[0];Z(t).css("height","auto"),Z(e).css("height","auto"),e.offsetHeight>t.offsetHeight?Z(t).css("height",e.offsetHeight):t.offsetHeight>e.offsetHeight&&Z(e).css("height",t.offsetHeight)},_updateTotalSummaryHeight:function(){for(var e,t,i=this.model,s=Z(this._$footertableContent[0]).find("tr"),n=Z(this._$footertableContent[1]).find("tr"),a=Z(s).length,r=0;r<a;r++)Z(n[r]).css("height",i.rowHeight),Z(s[r]).css("height",i.rowHeight),e=Z(s[r]).height(),(t=Z(n[r]).height())<=e?(Z(n[r]).css("height",e),Z(s[r]).css("height",e)):e<t&&(Z(s[r]).css("height",t),Z(n[r]).css("height",t));this._$totalSummaryRowContainer.hasClass("e-scroller")&&this._$totalSummaryRowContainer.ejScroller("refresh")},_updateRowHeight:function(e,t){if(0<this.getRows().length){var i,s,n,a=this.model,r=0,o=0,l=[],d=[];J.isNullOrUndefined(e)?(r=0,o=this.getRows()[0]?this.getRows()[0].length:0,l=this.getRows()[0],d=this.getRows()[1]):(a.enableVirtualization&&"rowEdit"!=t&&(n=a.currentViewData[e],e=this.getUpdatedRecords().indexOf(n)),o=(r=e)+1,l[r]=Z(J.TreeGrid.getRowByIndex(this,e)[0]),d[r]=Z(J.TreeGrid.getRowByIndex(this,e)[1]));for(var h=r;h<o;h++)(J.isNullOrUndefined(e)||"rowEdit"!=t&&"savecell"!=t)&&"resize"!=t||(Z(l[h]).css("height",a.rowHeight),Z(d[h]).css("height",a.rowHeight)),"rowEdit"!=t&&(i=Z(l[h]).height(),(s=Z(d[h]).height())<=i?(Z(d[h]).css("height",i),Z(l[h]).css("height",i)):i<s&&(Z(l[h]).css("height",s),Z(d[h]).css("height",s)))}},_checkDataManagerUpdate:function(){var e=this.dataSource();this._isDataManagerUpdate=!1,this._jsonData=null,e instanceof J.DataManager&&(e.dataSource.offline&&e.dataSource.json?(this._isDataManagerUpdate=!0,this._jsonData=e.dataSource.json):e.dataSource.offline||(this._isDataManagerUpdate=!0,this._jsonData=this._retrivedData))},_initDatasource:function(){var e,t,i=this,s=i.model;s.isFromGantt?(i._isLoadonDemand=s.isLoadonDemand,i._checkDataBinding()):this.dataSource()instanceof J.DataManager?(J.isNullOrUndefined(i._waitingPopupObj)?i._renderWaitingPopup():i._waitingPopupObj.show(),e=this.dataSource().adaptor instanceof J.UrlAdaptor||this.dataSource().adaptor instanceof J.WebMethodAdaptor||this.dataSource().adaptor instanceof J.WebApiAdaptor||this.dataSource().adaptor instanceof J.ODataAdaptor,t=0!=J.pvt.filterQueries(s.query.queries,"onTake").length||0!=J.pvt.filterQueries(s.query.queries,"onPage").length||0!=J.pvt.filterQueries(s.query.queries,"onWhere").length,(i._isRemoteData=e)&&!this.dataSource().dataSource.offline&&!t&&s.enableLoadOnDemand?(i._isLoadonDemand=!0,i._getAndRenderRecordsonDemand()):(i._isLoadonDemand=!1,s.query.requiresCount(),this.dataSource().executeQuery(s.query).done(J.proxy(function(e){i._renderQueriedRecords(e,i)})).fail(J.proxy(function(e){i._triggerFailureEvent(e,i)})))):this.dataSource()?(i._retrivedData=i.dataSource(),i._renderQueriedRecords(null,i,i._retrivedData)):i._checkDataBinding()},_intersectionObjects:function(e,t){for(var i=[];0<e.length&&0<t.length;){var s=t.indexOf(e[0]);-1==s?e.shift():(i.push(e.shift()),t.splice(s,1))}return i},_getAndRenderRecordsonDemand:function(){var e,t=this,i=t.model;i.query.requiresCount(),i.pageSettings.pageSizeMode=J.TreeGrid.PageSizeMode.Root,i.parentIdMapping?t._queryAndRenderParentRecords():(e=t._updateQueryForLoadonDemand(),t.dataSource().executeQuery(e).done(J.proxy(function(e){t._pageRecordCountOnDemand=e.count,t._renderQueriedRecords(e,t),t._setScrollTop(),t.updateHeight()})).fail(J.proxy(function(e){t._triggerFailureEvent(e,t)}))),t._allParentItems=Z.extend([],i.parentRecords)},_renderWaitingPopup:function(){Z(this.element).ejWaitingPopup({showOnInit:!0}),this._waitingPopupObj=Z(this.element).data("ejWaitingPopup")},_renderQueriedRecords:function(e,t,i){var s=t.model;if(i)t._retrivedData=i;else if(t._retrivedData=e.result,0==t._fieldNamesToQuery.length&&0<t._retrivedData.length)for(var n in e.result[0])t._fieldNamesToQuery.push(n);0==s.flatRecords.length&&(s.allowPaging&&s.parentIdMapping&&(t._isRemoteData?s.pageSettings.totalRecordsCount=e.count:J.isNullOrUndefined(s.pageSettings.totalRecordsCount)?s.pageSettings.totalRecordsCount=e&&!J.isNullOrUndefined(e.count)?e.count:null:t._retrivedData=t._retrivedData.splice(s.pageSettings.totalRecordsCount)),t._createQueriedRecords(t._retrivedData)),t._isForDataSourceRefresh?((i={}).requestType=J.TreeGrid.Actions.RefreshDataSource,t._ensureDataSource(i),s.isFromGantt||t._checkDataManagerUpdate(),-1!==t.selectedRowIndex()&&t.selectedRowIndex()<t.model.currentViewData.length&&t.selectRows(t.selectedRowIndex()),t.getScrollElement().hasClass("e-scroller")&&t.getScrollElement().ejScroller("refresh"),(s.showSummaryRow||s.showTotalSummary)&&t._summaryRow(),t._createdAt=null,t._isForDataSourceRefresh=!1):(s.showSummaryRow&&s.printingEnabled&&(t._parentRecords=t._getParentRecords(s.updatedRecords,t)),t._checkDataBinding()),e&&t._waitingPopupObj.hide()},_createQueriedRecords:function(e){var t=this.model;if(t.idMapping&&t.parentIdMapping&&0<e.length){var i=[];this._taskIds=[],this._lastInsertedId=-1;for(var s=0;s<e.length;s++){var n=e[s];i.push(Z.extend(!0,{},n)),J.isNullOrUndefined(n[t.idMapping])||(this._updateLastInsertedId(n[t.idMapping]),this._taskIds.push(n[t.idMapping]))}this._reconstructDatasource(i),this._createRecords(this.secondaryDatasource)}else e&&this._createRecords(e)},_queryAndRenderParentRecords:function(){var e,t,i=this,s=i.model;!s.hasChildMapping&&0==i._assignedIdCollections.length&&0==i._assignedParendIDs.length?(e=J.Query(),t=J.pvt.filterQueries(s.query.queries,"onSelect"),e.queries=Z.extend([],s.query.queries),e.requiresCount(),0<t.length&&e.queries.splice(Z.inArray(t[0],e.queries),1),e.select(s.parentIdMapping,s.idMapping),this.dataSource().executeQuery(e).done(J.proxy(function(e){e.result.map(function(e){i._assignedIdCollections.push(e[s.idMapping]),e[s.parentIdMapping]&&-1==i._assignedParendIDs.indexOf(e[s.parentIdMapping])&&i._assignedParendIDs.push(e[s.parentIdMapping])}),i._totalItemCounts=e.result.length,i._renderRootRecords(i)})).fail(J.proxy(function(e){i._triggerFailureEvent(e,i)}))):i._renderRootRecords(i)},_renderRootRecords:function(t){var e=t._updateQueryForLoadonDemand();t.dataSource().executeQuery(e).done(J.proxy(function(e){t._renderZerothLevelParentItems(e)})).fail(J.proxy(function(e){t._triggerFailureEvent(e,t)}))},_renderExpandedChildRecords:function(e){var t=this,i=t.model;t._ensureDataSource(e),i.showSummaryRow&&(t._parentRecords=t._allParentItems,t._createSummaryRow()),i.enableAltRow&&t.updateAltRow(),t.sendDataRenderingRequest(e),t._setScrollTop(),t.updateHeight(),t._waitingPopupObj.hide()},_triggerFailureEvent:function(e,t){t._waitingPopupObj.hide();e={error:e.error};t._trigger("actionFailure",e)},_renderZerothLevelParentItems:function(e){var t=this.model;this._pageRecordCountOnDemand=e.count,this._renderQueriedRecords(e,this),this._allParentItems=Z.extend([],t.parentRecords),this._isForDataSourceRefresh=!1,this._maxRowIndex=this._totalItemCounts},_updateQueryForLoadonDemand:function(){var e=this.model,t=new J.Query,i=J.Predicate(e.parentIdMapping,J.FilterOperators.equal,null);return t.queries=Z.extend([],e.query.queries),e.parentIdMapping&&t.where(i),e.allowPaging&&t.page(this._currentPage(),this.model.pageSettings.pageSize),t.requiresCount(),this._queryForLoadonDemand=t},_reconstructDatasource:function(e){var t=this.model,i=J.Predicate(t.parentIdMapping,J.FilterOperators.notEqual,"null"),s=J.DataManager(e).executeLocal(J.Query().where(i).group(t.parentIdMapping)),n=[];t.childMapping||(t.childMapping="Children");for(var a=0;a<s.length;a++){if(!J.isNullOrUndefined(s[a].key)){var r=this._taskIds.indexOf(s[a].key);if(-1<r){t.hierarchyRowIndexMapping&&1<s[a].items.length?e[r][t.childMapping]=J.DataManager(s[a].items).executeLocal(J.Query().sortBy(t.hierarchyRowIndexMapping,J.sortOrder.Ascending,!1)):e[r][t.childMapping]=s[a].items;continue}}n.push.apply(n,s[a].items)}this.secondaryDatasource=this._intersectionObjects(e,n),t.hierarchyRowIndexMapping&&1<this.secondaryDatasource.length&&(this.secondaryDatasource=J.DataManager(this.secondaryDatasource).executeLocal(J.Query().sortBy(t.hierarchyRowIndexMapping,J.sortOrder.Ascending,!1)))},_windowResize:function(e){if(this.element.is(":visible")){var t=this,i=this.model;Z("#"+t._id).addClass("e-treegrid-overflow");var s=t._$gridHeaderContent,n=t._$totalSummaryRowContainer,a=Z("#"+t._id+"_toolbarItems"),r=i.sizeSettings.height,o=i.sizeSettings.width,l=t.element[0].style.width,d=t.element[0].style.height;if(t._clearContextMenu(),t.model.isResponsive||J.isTouchDevice()?J.isTouchDevice()||t._clearColumnMenu("resize"):(t._clearColumnMenu(),t._clearFilterMenu()),i.isResponsive&&t._isExcelFilter&&(t._checkBoxDiv&&t._checkBoxDiv.ejScroller({width:"100%"}).ejScroller("refresh"),t._customFilter&&t._customFilter.ejDialog("width","99.9%")),f=0<this._frozenColumnsLength?this.element.find("#e-movablecontainer"+this._id):Z("#"+t._id+"e-gridcontent"),0<Z("#"+this._id+"detailscellwrapper").length&&this._removeDetailsRow(),u=o&&"number"!=typeof o&&-1!=o.indexOf("%")||-1!=l.indexOf("%")?(p=o||l,(Z(t.element).parent().width()?Z(t.element).parent():Z(t.element)).width()/100*parseInt(p)):Z(t.element).width(),t._gridWidth=Math.round(u),0<t._frozenColumnsLength){for(var h=0,c=0;c<t._frozenColumnsLength;c++)1==i.columns[c].visible&&(h+=t.columnsWidthCollection[c]);u<h&&(t._gridWidth=u=h)}o=r&&"number"!=typeof r&&-1!=r.indexOf("%")||-1!=d.indexOf("%")?(g=r||d,m=(Z(t.element).parent().height()?Z(t.element).parent():Z(t.element)).height(),Z(t.element).parent().height()?m/100*parseInt(g):Z(t.element).height()):Z(t.element).height(),o-=t._totalBorderHeight,t._$totalSummaryRowContainer&&(o-=t._$totalSummaryRowContainer.outerHeight()),u=Math.round(u-t._totalBorderWidth);var u,l=0<a.length?a.outerHeight():0,p=f.ejScroller("option","scrollTop"),r=f.ejScroller("option","scrollLeft"),d=u,m=0;if(i.allowPaging){var g=t.element.find(".e-pager").outerHeight(),f=!J.isNullOrUndefined(i.pageSettings.template);if(o-=g,!i.sizeSettings.height){h=0;g>t._pagerHeight&&!f&&(m=g-t._pagerHeight);for(c=0;c<t.columnsWidthCollection.length;c++)h+=t.columnsWidthCollection[c];h>t._gridWidth&&(o+=t._scrollBarHeight)}}0<this._frozenColumnsLength&&(t._$gridContent.css("width",u),t._$gridContent.css("height",o-Z(s).outerHeight()-l),d=u-this._getFrozenColumnWidth()-1),t.getScrollElement().ejScroller({width:d,height:o-Z(s).outerHeight()-l+m}),t._updateScrollCss(),i.showTotalSummary&&t._$totalSummaryRowContainer&&(t._$totalSummaryRowContainer.height()>=i.totalSummaryHeight&&t._$totalSummaryRowContainer.hasClass("e-scroller")?t._$totalSummaryRowContainer.ejScroller("refresh"):Z(n).hasClass("e-scrollcss")&&0<t.getScrollElement().children(".e-vscrollbar").length?Z(n).width(u-17):Z(n).width(u)),i.toolbarSettings.showToolbar&&0<a.length&&a.width(u),t.getScrollElement().ejScroller("refresh"),Z(s).hasClass("e-scrollcss")&&0<t.getScrollElement().children(".e-vscrollbar").length?Z(s).width(u-17):Z(s).width(u),t.updateViewPortHeight(),i.showTotalSummary&&(t._viewPortHeight=t._viewPortHeight-t._$totalSummaryRowContainer.outerHeight()),t.getScrollElement().ejScroller("option","scrollTop",p),t.getScrollElement().ejScroller("option","scrollLeft",r),t._updateHeaderScrollLeft(),i.enableVirtualization&&(t.cancelRowEditCell(),u={},r=i.rowHeight,u.requestType=J.TreeGrid.Actions.Refresh,t.processBindings(u),t.sendDataRenderingRequest(u),i.showDetailsRow&&i.detailsTemplate&&!i.showDetailsRowInfoColumn&&(r+=i.detailsRowHeight),i.currentViewData.length*r<t._viewPortHeight&&((r=p-(t._viewPortHeight-i.currentViewData.length*r))<0&&(r=0),t.getScrollElement().ejScroller("scrollY",r,!0))),i.allowPaging&&t.element.find(".e-pager").css({width:t._gridWidth-2}),t._resizeFilteringElements(),i.columnResizeSettings.columnResizeMode!=J.TreeGrid.ColumnResizeMode.FixedColumns||i.isFromGantt||this._updateTableWidth(!0),t.model.isResponsive&&!t.model.isFromGantt&&t._mediaQueryUpdate(),t._updatePagerTextAlignment(),t._updateWrapRowHeights(null,"virtualRefresh",null,"resize"),i.allowPaging&&!i.sizeSettings.height&&t.updateHeight(),(i.allowTextWrap||"wrap"==i.headerTextOverflow)&&t.model.allowTextWrap&&t.model.enableVirtualization&&t.updateHeight(),t._updateGridContentHeight(),t.model.allowSelection&&"multiple"==t.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&t._alignMultiSelectPopup(),Z("#"+t._id).removeClass("e-treegrid-overflow"),i.isResponsive&&i.enableResize&&(t._validateColumnVisible(),t._hideColumns(t._autoHideColumns),t._showColumns(t._autoShowColumns))}},_updatePagerTextAlignment:function(){var e,t,i=this;i.model.allowPaging&&(Z("#"+i._id+"Pager").find(".e-pagercontainer").outerWidth()+Z("#"+i._id+"Pager").find(".e-parentmsgbar").outerWidth()+10>Z("#"+i._id).width()?(e=(Z("#"+i._id).width()-Z("#"+i._id+"Pager").find(".e-pagercontainer").outerWidth())/2,t=(Z("#"+i._id).width()-Z("#"+i._id+"Pager").find(".e-parentmsgbar").width())/2,0<e&&Z("#"+i._id+"Pager").find(".e-pagercontainer").css("margin-left",e+"px"),0<t&&Z("#"+i._id+"Pager").find(".e-parentmsgbar").css("margin-right",t-6+"px")):(Z("#"+i._id+"Pager").find(".e-pagercontainer").css("margin-left",""),Z("#"+i._id+"Pager").find(".e-parentmsgbar").css("margin-right","")))},_alignMultiSelectPopup:function(){var e=this,t=e._$gridContent.offset().top+e._$gridContent.outerHeight(),i=e._$gridContent.offset().left+e._$gridContent.outerWidth();(e._multiSelectPopup.offset().top+e._multiSelectPopup.outerHeight()+10>t||e._multiSelectPopup.offset().top<e._$gridContent.offset().top||e._multiSelectPopup.offset().left+e._multiSelectPopup.outerWidth()>i||e._multiSelectPopup.offset().left<e._$gridContent.offset().left)&&(t=e._$gridContent.offset().top+e._$gridContent.outerHeight()/2,i=e._$gridContent.offset().left+e._$gridContent.outerWidth()/2,0<e._$gridContent.find(".e-hscrollbar").length&&(t-=e._$gridContent.find(".e-hscrollbar").outerHeight()),0<e._$gridContent.find(".e-vscrollbar").length&&(i-=e._$gridContent.find(".e-vscrollbar").outerWidth()),e._multiSelectPopup.offset({top:t-this._multiSelectPopup.height()/2-5,left:i-this._multiSelectPopup.width()/2}))},_mediaQueryUpdate:function(){var e,t,i=this,s="",n=i.getOffsetRect(Z("#"+i._id)[0]);0<Z("#"+i._id+"_dialogColumnAdd_wrapper").length&&"none"!=Z("#"+i._id+"_dialogColumnAdd_wrapper").css("display")&&(Z(window).width()<=i._responsiveMinWidth&&i.model.isResponsive?(Z("#"+i._id+"_dialogColumnAdd").removeClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogColumnAdd_wrapper").removeClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogColumnAdd_wrapper").find("div.e-dialog-scroller").removeClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogColumnAdd").find(".e-dropdowntreegrid").css("width",Z("#"+i._id).width()-80+"px"),Z("#"+i._id+"_dialogColumnAdd").ejDialog({width:Z("#"+i._id).width()+"px",height:Z("#"+i._id).height()+"px",minHeight:"150px",minWidth:"150px",showOnInit:!1,enableResize:!1,allowDraggable:!1,enableModal:!1,isResponsive:!1}),Z("#"+i._id+"_dialogColumnAdd_wrapper").css({left:n.left+"px",top:n.top+"px"}),Z("#"+i._id+"_dialogColumnAdd_wrapper").removeClass("e-shadow"),Z("#"+i._id+"_dialogColumnAdd").removeClass("e-shadow")):(Z("#"+i._id+"_dialogColumnAdd").ejDialog({width:"auto",height:"auto",minHeight:0,minWidth:0,showOnInit:!1,enableResize:!1,allowDraggable:!0,enableModal:!0,isResponsive:!0}),Z("#"+i._id+"_dialogColumnAdd").addClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogColumnAdd_wrapper").addClass("e-treegridadaptivedialog e-treegrid-dialog"),Z("#"+i._id+"_dialogColumnAdd").find(".e-dropdowntreegrid").css("width","438px"),Z("#"+i._id+"_dialogColumnAdd_wrapper").find("div.e-dialog-scroller").removeClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogColumnAdd_wrapper").addClass("e-shadow"))),0<Z("#"+i._id+"ColumnRenameDialog_wrapper").length&&"none"!=Z("#"+i._id+"ColumnRenameDialog_wrapper").css("display")&&(Z(window).width()<=i._responsiveMinWidth&&i.model.isResponsive?(Z("#"+i._id+"ColumnRenameDialog").removeClass("e-treegridadaptivedialog"),i._columnRenameDialog.ejDialog({width:Z("#"+i._id).width()+"px",height:Z("#"+i._id).height()+"px",position:{X:n.left,Y:n.top},minHeight:"50px",minWidth:"50px",showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!1,isResponsive:!1}),Z("#"+i._id+"ColumnRenameDialog_wrapper").css({left:n.left+"px",top:n.top+"px"}),Z("#"+i._id+"ColumnRenameDialog_wrapper").removeClass("e-shadow"),Z("#"+i._id+"ColumnRenameDialog").removeClass("e-shadow"),Z("#"+i._id+"ColumnRenameDialog_wrapper").removeClass("e-treegridadaptivedialog")):(i._columnRenameDialog.ejDialog({width:"auto",height:"auto",minHeight:0,minWidth:0,showOnInit:!1,enableResize:!1,allowDraggable:!0,enableModal:!0,isResponsive:!0}),Z("#"+i._id+"ColumnRenameDialog").addClass("e-treegridadaptivedialog"),Z("#"+i._id+"ColumnRenameDialog_wrapper").addClass("e-treegridadaptivedialog e-treegrid-dialog"))),i._renderedSubMenuType?(s="",s=-1==i._renderedSubMenuType.indexOf("Desktop")?i._renderedSubMenuType:(e=i._renderedSubMenuType.indexOf("Desktop"),i._renderedSubMenuType.slice(0,e)),0<Z(s+"_wrapper").length&&"none"!=Z(s+"_wrapper").css("display")?Z(window).width()<=i._responsiveMinWidth&&-1==i._renderedSubMenuType.indexOf("Desktop")&&i.model.isResponsive?(t=Z("#"+i._id).height()-50+"px",Z(i._renderedSubMenuType+"_wrapper").find("div.e-dialog-scroller").addClass("e-treegridadaptivewidth"),Z(i._renderedSubMenuType).ejDialog({width:Z("#"+i._id).width()+"px",height:Z("#"+i._id).height()+"px",position:{X:n.left+"px",Y:n.top+"px"},minHeight:"50px",minWidth:"50px",showOnInit:!1,enableResize:!1,enableModal:!1,isResponsive:!1}),Z(i._renderedSubMenuType).height()>Z(i._renderedSubMenuType+"_wrapper").height()-48?(Z(i._renderedSubMenuType+"_wrapper").find("div.e-dialog-scroller").css({height:Z("#"+i._id).height()-48+"px",width:"auto",padding:"0px"}),Z(i._renderedSubMenuType).ejDialog("refresh")):Z(i._renderedSubMenuType+"_wrapper").find("div.e-dialog-scroller").css({height:t,width:"auto"})):J.isTouchDevice()?(-1==i._renderedSubMenuType.indexOf("Desktop")&&Z(window).width()>i._responsiveMinWidth||-1!=i._renderedSubMenuType.indexOf("Desktop")&&Z(window).width()<=i._responsiveMinWidth)&&(i._clearColumnMenu(),i._clearFilterMenu()):i._clearFilterMenu():(J.isTouchDevice()&&!i._renderedSubMenuType||J.isTouchDevice()&&0<Z(s+"_wrapper").length&&"none"==Z(s+"_wrapper").css("display"))&&i._clearColumnMenu()):(J.isTouchDevice()&&!i._renderedSubMenuType||J.isTouchDevice()&&0<Z(s+"_wrapper").length&&"none"==Z(s+"_wrapper").css("display"))&&i._clearColumnMenu(),i._isExcelFilter&&(s=Z(window).width()>i._responsiveMinWidth,(!i._mediaStatus||i._mediaStatus&&s)&&(i._excelFilter.closeXFDialog(),i._mediaStatus=!1,i._customFilter&&(s=Z(i._customFilter).attr("id"),Z("#"+s).css("display","none"),Z("#"+s+"_CustomFDlg_wrapper").css("display","none")))),0<Z("#"+i._id+"ccDiv_wrapper").length&&"none"!=Z("#"+i._id+"ccDiv_wrapper").css("display")&&(Z(window).width()<i._responsiveMinWidth&&0==i._renderedSubMenuType.indexOf("AdaptiveColChooser")&&i.model.isResponsive?(t=Z("#"+i._id).height()-66+"px",Z("#"+i._id+"ccDiv").ejDialog({width:Z("#"+i._id).width()+"px",height:Z("#"+i._id).height()+"px",minHeight:"150px",minWidth:"150px",showOnInit:!1,enableResize:!1,enableModal:!1,isResponsive:!1}),Z("#"+i._id+"ccDiv_wrapper").find("div.e-dialog-scroller").removeClass("e-treegridadaptivedialog"),Z("#"+i._id+"ccDiv").css({width:"100%",height:"auto"}),Z("#"+i._id+"ccDiv").height()>Z("#"+i._id+"ccDiv_wrapper").height()-48?(Z("#"+i._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({height:Z("#"+i._id).height()-48+"px",width:"auto",padding:"0px"}),Z("#"+i._id+"ccDiv").removeClass("e-columnSelector"),Z("#"+i._id+"ccDiv").ejDialog("refresh")):(Z("#"+i._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({height:t,width:"auto",padding:"8px 16px"}),Z("#"+i._id+"ccDiv").css({padding:"0px"})),Z("#"+i._id+"ccDiv_wrapper").removeClass("e-shadow"),Z("#"+i._id+"ccDiv").removeClass("e-shadow")):i._clearColumnMenu()),0<Z("#"+i._id+"_dialogEdit").length&&"none"!=Z("#"+i._id+"_dialogEdit").css("display")&&(Z(window).width()<=i._responsiveMinWidth&&i.model.isResponsive?(Z("#"+i._id+"_dialogEdit").ejDialog({width:Z("#"+i._id).width()+"px",height:Z("#"+i._id).height()+"px",minHeight:"150px",minWidth:"150px",showOnInit:!1,enableResize:!1,allowDraggable:!1,enableModal:!1,isResponsive:!1}),Z("#"+i._id+"_dialogEdit_wrapper").css({left:n.left+"px",top:n.top+"px"}),Z("#"+i._id+"_dialogEdit_wrapper").removeClass("e-shadow").removeClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogEdit").removeClass("e-shadow")):(Z("#"+i._id+"_dialogEdit").ejDialog({width:"auto",height:"auto",minHeight:"150px",minWidth:"150px",showOnInit:!1,enableResize:!1,allowDraggable:!0,enableModal:!0,isResponsive:!0}),Z("#"+i._id+"_dialogEdit_wrapper").addClass("e-shadow").addClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogEdit").addClass("e-shadow"))),!i._renderedSubMenuType||0!=i._renderedSubMenuType.indexOf("AdaptiveColChooser")&&0!=i._renderedSubMenuType.indexOf("ColumnDesktop")||i._clearColumnMenu()},updateResponsiveMinWidth:function(e){parseInt(e)<150&&(e=150),this._responsiveMinWidth=parseInt(e),this._mediaQueryUpdate()},processBindings:function(e){if(this.model.query=new J.Query,!this._isEmptyRow&&!this._moveRow&&this._trigger("actionBegin",e))return"filtering"==e.requestType&&Z("#"+this._id+"_"+e.currentFilteringColumn+"_filterbarcell").val(""),!0;this._ensureDataSource(e)},setUpdatedRecords:function(e,t,i,s,n){var a=this.model;a.flatRecords=e,a.updatedRecords=t,a.ids=i,a.parentRecords=s,this.dataSource(n)},getExpandedRecords:function(e){var t=this;return e.filter(function(e){return 1==t.getExpandStatus(e)})},updateExpandStatus:function(e,t){for(var i=e.childRecords,s=0;s<i.length;s++)i[s].isExpanded=t,i[s].hasChildRecords&&i[s].expanded&&this.updateExpandStatus(i[s],t)},_ensureDataSource:function(e){var t,i=this,s=i.model,n=s.sortSettings.sortedColumns,a=s.filterSettings.filteredColumns,r=!1,o=this.dataSource(),l=Z("#"+i._id.replace("ejTreeGrid","")).data("ejGantt");if(i._filteredRecords=[],i._flatFilteredRecords=[],s.query.requiresCount(),i._queryManagar=new J.Query,i._queryManagar.requiresCount(),"array"===Z.type(o)||o instanceof J.DataManager||(this.dataSource([]),o=this.dataSource()),!e||e.requestType!==J.TreeGrid.Actions.ExpandCollapse||(r=!0,i._filteredRecords=[],e.data.expanded=e.expanded,J.isNullOrUndefined(e.data.item[s.expandStateMapping])||(e.data[s.expandStateMapping]=e.expanded,e.data.item[s.expandStateMapping]=e.expanded),s.updatedRecords=[],i._flatFilteredRecords=s.flatRecords,i._filteredRecords=i._flatFilteredRecords.filter(function(e){return 1==i.getExpandStatus(e)}),s.updatedRecords=i._filteredRecords,!e.isFromExpandCollapse||e.isLastRefresh)){if(e&&"filtering"==e.requestType||(s.allowFiltering||s.isFromGantt)&&a.length){if(s.showSummaryRow&&(s.updatedRecords=i._spliceSummaryRows(s.updatedRecords),s.flatRecords=i._spliceSummaryRows(s.flatRecords)),(s.allowFiltering||s.isFromGantt)&&a.length){var d,h=a[0];if(!i._isExcelFilter||h instanceof J.Predicate){d=h.value==i._dropDownListBlanksText?(d=J.Predicate(h.field,"equal",null,!0)).or(h.field,"equal","",!0):h.value==i._dropDownListClearText?J.Predicate(h.field,"equal","",!0):h.isComplex?h:J.Predicate(h.field,h.operator,h.value,!h.matchcase),J.isNullOrUndefined(e)&&i._storePreviousFilteredValue(h.field,h.value,h.operator);for(var c=1;c<a.length;c++)d=a[c].isComplex?d.and(a[c]):d[a[c].predicate](a[c].field,a[c].operator,a[c].value,!a[c].matchcase),J.isNullOrUndefined(e)&&i._storePreviousFilteredValue(a[c].field,a[c].value,a[c].operator)}else d=i._getExcelPredicate(e);i._queryManagar.where(d),i._filteredRecords=s.flatRecords.slice();var u=new J.DataManager(i._filteredRecords);i._tempfilteredrecords=u.executeLocal(i._queryManagar).result,i._updateFilteredRecords(i._tempfilteredrecords,!1),s.updatedRecords=i._isHierarchyFiltering&&s.enableVirtualization?i._updateFilterParent:i._filteredRecords,s.allowPaging&&s.pageSettings.pageSizeMode===J.TreeGrid.PageSizeMode.Root&&(s.parentRecords=i._getParentRecords(s.updatedRecords,i,!0)),s.allowSorting&&0<s.sortSettings.sortedColumns.length&&i._sortingRecords()}else s.updatedRecords=s.enableVirtualization?i.getExpandedRecords(s.flatRecords):s.flatRecords.slice(),i._updateHasFilteredChildRecordsStatus(s.updatedRecords),i._isHierarchyFiltering&&i._clearFilterLevel(i.model.flatRecords),s.allowPaging&&s.pageSettings.pageSizeMode===J.TreeGrid.PageSizeMode.Root&&(s.parentRecords=i._getParentRecords(s.updatedRecords,i,!0)),i._isExcelFilter&&i._getExcelPredicate(e);s.allowSearching&&0!=i._searchString.length||i._updatedFilteredRecords(e),r=!0}s.allowSearching&&i._searchString.length||e&&"searching"===e.requestType?(s.showSummaryRow&&(s.updatedRecords=i._spliceSummaryRows(s.updatedRecords),s.flatRecords=i._spliceSummaryRows(s.flatRecords)),h=0<i._searchString.length?s.searchSettings.operator:"contains",i._queryManagar.search(i._searchString,i.getColumnFieldNames(),h,!0),"parent"==s.filterSettings.filterHierarchyMode||0<i._searchString.length||0==s.filterSettings.filteredColumns.length?(t=!0,s.isFromGantt?i._filteredRecords=s.flatRecords.filter(function(e){return!1===e.hasChildRecords}):i._filteredRecords=s.flatRecords.slice()):t=!1,s.isFromGantt&&(l.model.searchSettings={fields:i._getColumnMappingNames(),key:i._queryManagar.queries[0].e.searchKey,operator:"contains",ignoreCase:!0}),u=new J.DataManager(i._filteredRecords),i._tempfilteredrecords=u.executeLocal(i._queryManagar).result,i._updateFilteredRecords(i._tempfilteredrecords,t),s.updatedRecords=i._filteredRecords,s.allowPaging&&s.pageSettings.pageSizeMode===J.TreeGrid.PageSizeMode.Root&&(s.parentRecords=i._getParentRecords(s.updatedRecords,i,!0)),i._isLoadonDemand&&0==i._searchString.length&&0==i._filteredRecords&&(s.updatedRecords=s.flatRecords),s.allowSorting&&0<s.sortSettings.sortedColumns.length&&i._sortingRecords(),i._updatedFilteredRecords(e),r=!0,i.clearSelection()):(s.allowSorting&&0<n.length||e&&"sorting"==e.requestType)&&(i._sortingRecords(),s.showSummaryRow&&i._createSummaryRow(e),r||(i.updateCollapsedRecordCount(),i.updateHeight(),r=!0)),!e||"outdent"!==e.requestType&&"indent"!==e.requestType||((e={}).requestType=J.TreeGrid.Actions.Refresh,r=!0),e&&s.allowPaging&&"delete"==e.requestType&&(n={},i._isLoadonDemand||(n.totalRecordsCount=i.getExpandedRecords(s.flatRecords).length,i.getPager().ejPager("option",n).ejPager("refreshPager"),n=this.getPager().ejPager("model"),i._currentPage()>n.totalPages&&i._currentPage(n.totalPages),r=!0)),r||(i._zerothLevelParentRecords=s.parentRecords.slice(),s.updatedRecords=s.enableVirtualization?s.enableCollapseAll&&!e?i._zerothLevelParentRecords:i.getExpandedRecords(s.flatRecords):s.flatRecords.slice(),i.updateCollapsedRecordCount(),i.updateHeight()),e||(e={},s.allowPaging?e.requestType=J.TreeGrid.Actions.Paging:e.requestType=J.TreeGrid.Actions.Refresh,e.inital=!0),i._updateCurrentViewData(e.requestType),!J.isNullOrUndefined(s.printingEnabled)&&s.printingEnabled&&"currentPage"==s.pageSettings.printMode&&(r=this.getExpandedRecords(s.updatedRecords),u=(u=new J.DataManager(r)).executeLocal(s.query),s.currentViewData=u.result),(!s.isFromGantt&&"save"===e.requestType||"sorting"===e.requestType||"searching"===e.requestType||"delete"===e.requestType||"refreshDataSource"===e.requestType||"filtering"===e.requestType||"dragAndDrop"===e.requestType||"rowIndexUpdate"===e.requestType||!e.inital&&"paging"===e.requestType)&&(i._isRefreshAddedRecord=!1,i.renderRecords(e),i._updateWrapRowHeights(null,"refreshAll"),i._setScrollTop(e.requestType),i._updateFixedTableBorder(e.requestType),i.getScrollElement().ejScroller("refresh"),i._updateScrollCss())}},_updatedFilteredRecords:function(e){var i=this,t=i.model;e&&("filtering"==e.requestType||"searching"==e.requestType)&&i._checkboxSelection&&t.selectionSettings.enableHierarchySelection&&("filtering"!=e.requestType&&"searching"!=e.requestType||(Z.each(t.updatedRecords,function(e,t){t.hasChildRecords&&i._updateParentSelection(t)}),i.selectAllRows())),t.showSummaryRow&&i._createSummaryRow(e),e&&t.showTotalSummary&&i._updateTotalSummaryRow(e),i.updateCollapsedRecordCount(),i.updateHeight(),t.enableAltRow&&i.updateAltRow()},_removeChildRecords:function(e,t){var i=this.model,s=J.isNullOrUndefined(t.childRecords)?[]:t.childRecords,n=e.indexOf(t);-1<n&&(t.checkboxState="unchecked",e.splice(n,1));for(var a=0;a<s.length;a++)s[a].hasChildRecords?this._removeChildRecords(e,s[a]):-1<(n=e.indexOf(s[a]))&&(s[a].checkboxState="unchecked",e.splice(n,1));t.parentItem&&i.selectionSettings.enableHierarchySelection&&this._updateParentSelection(t.parentItem)},_removeChildItem:function(e){for(var t,i,s=0;s<e.childRecords.length;s++)t=e.childRecords[s],this.dataSource()instanceof J.DataManager?this.dataSource().dataSource.offline&&this.dataSource().dataSource.json?(-1!==(i=this.dataSource().dataSource.json.indexOf(t.item))&&this.dataSource().dataSource.json.splice(i,1),t.hasChildRecords&&this._removeChildItem(t)):this._isDataManagerUpdate&&(-1!==(i=this._jsonData.indexOf(t.item))&&this._jsonData.splice(i,1),t.hasChildRecords&&this._removeChildItem(t)):(-1!==(i=this.dataSource().indexOf(t.item))&&this.dataSource().splice(i,1),t.hasChildRecords&&this._removeChildItem(t))},_updateCheckboxColumnName:function(){var e=this,t=e.model;if(e._checkboxSelection&&!t.rowTemplateID&&!t.altRowTemplateID){var i=t.columns.filter(function(e){return 1==e.showCheckbox});if(e._addCheckboxColumn=this._getDefaultCheckboxColumn(),e._checkboxColumnName=!(0<i.length)||i[0].isTemplateColumn?null:i[0].field,J.isNullOrUndefined(e._checkboxColumnName)){i=t.columns[t.treeColumnIndex];if(t.columns[0].nonColumn)e._checkboxColumnName=t.columns[0].field;else{for(var s=0;s<t.columns.length;s++)1==t.columns[s].nonColumn&&t.columns.splice(s,1);t.columns.splice(0,0,e._addCheckboxColumn),e._checkboxColumnName=e._addCheckboxColumn.field}i&&(t.treeColumnIndex=t.columns.indexOf(i))}0<e._frozenColumnsLength&&!t.columns[0].isFrozen&&e._checkboxColumnName==e._addCheckboxColumn.field&&(t.columns[0].isFrozen=!0,e._frozenColumnsLength+=1,e._frozenColumns.splice(0,0,t.columns[0]),t.scrollSettings.frozenColumns=this._frozenColumnsLength)}},batchSave:function(){var e=this,t=e.model,i={},s=e.batchChanges,n=s.changed,a=s.deleted,r=s.added;if(i.type="beforeBatchSave",i.batchChanges=s,e._trigger("beforeBatchSave",i))return!0;t=t.filterSettings.filteredColumns;t&&0<t.length&&e.clearFilter();for(var o=0;o<n.length;o++)delete n[o].batchEditedFields;for(var l=0;l<r.length;l++)delete r[l].isBatchAdd,r[l].batchEditedFields&&delete r[l].batchEditedFields;a.length&&e.deleteRow(),e._batchEditStarts&&(e._batchEditStarts=!1),e._cancelSaveTools(),e._checkboxSelection&&e._resetCheckboxState(),e.processBindings(),e.renderRecords(),i.requestType="batchSave",i.batchChanges=s,e._trigger("actionComplete",i),e.batchChanges.changed=[],e.batchChanges.added=[],e.batchChanges.deleted=[],e.batchChanges.updatedHierarchyRowIndexData=[],e._batchSaveCancel=""},batchCancel:function(){var e=this,t=e.model,i=e.batchChanges,s=i.changed,n=i.deleted,a=i.added,r={},o=e._mergeRecords(),i=t.filterSettings.filteredColumns;i&&0<i.length&&e.clearFilter(),a.length&&e.deleteRow();for(var l=0;l<s.length;l++){var d,h=s[l].batchEditedFields;for(d in h)s[l][d]=h[d],s[l].item[d]=h[d];delete s[l].batchEditedFields}for(var c=0;c<n.length;c++)e._updateBatchDeletedRecord(n[c]);if(e.batchChanges.changed=[],e.batchChanges.added=[],e.batchChanges.deleted=[],e.batchChanges.updatedHierarchyRowIndexData=[],e._batchSaveCancel="",e._batchEditStarts&&(e._batchEditStarts=!1),e._cancelSaveTools(),e._checkboxSelection&&e._resetCheckboxState(),t.showSummaryRow){e._batchEditCancel=!0;for(var u=0;u<o.length;u++)r.record=o[u],e._updateSummaryRow(r)}t.showTotalSummary&&(r.editType="celledit",e._updateTotalSummaryRow(r)),e.processBindings(),e.renderRecords(),e._batchEditCancel=!1},_resetCheckboxState:function(){var e=this.model;this._checkboxSelection&&(e=e.flatRecords,Z.map(e,function(e){"checked"!=e.checkboxState&&"indeterminate"!=e.checkboxState||(e.checkboxState="unchecked")}),this.selectAllRows())},_updateBatchDeletedRecord:function(e){this.model;if(delete e.isBatchDelete,e.isBatchAdd)return this.batchChanges.added=[],this.batchChanges.added.push(e),this.deleteRow(),!0;if(e.batchEditedFields){var t,i=e.batchEditedFields;for(t in i)e[t]=i[t];delete e.batchEditedFields}if(e.hasChildRecords)for(var s=e.childRecords,n=0;n<s.length;n++)this._updateBatchDeletedRecord(s[n])},_processEditing:function(){var e=this.model;this._checkboxSelection&&this._updateCheckboxColumnName(),(e.editSettings.allowEditing||e.editSettings.allowAdding)&&("cellediting"===e.editSettings.editMode.toLowerCase()||"rowediting"===e.editSettings.editMode.toLowerCase()||"batchediting"==e.editSettings.editMode.toLowerCase()&&("cell"==e.editSettings.batchEditSettings.editMode||"row"==e.editSettings.batchEditSettings.editMode)||"normal"===e.editSettings.editMode.toLowerCase()&&"cell"===e.selectionSettings.selectionMode.toLowerCase()?this._addCellEditTemplate():"dialogediting"!==e.editSettings.editMode.toLowerCase()&&("batchediting"!=e.editSettings.editMode.toLowerCase()||"dialog"!=e.editSettings.batchEditSettings.editMode)||!J.isNullOrUndefined(e.editSettings.dialogEditorTemplateID)&&""!=e.editSettings.dialogEditorTemplateID?"dialogediting"!==e.editSettings.editMode.toLowerCase()&&("batchediting"!=e.editSettings.editMode.toLowerCase()||"dialog"!=e.editSettings.batchEditSettings.editMode)||J.isNullOrUndefined(e.editSettings.dialogEditorTemplateID)||""==e.editSettings.dialogEditorTemplateID||(this._treeGridAddEditDialogTemplate(),0==Z("#"+this._id+"_dialogEdit").length&&this.element.append(this._renderEditDialog())):(this._treeGridAddEditDialog(),0==Z("#"+this._id+"_dialogEdit").length&&this.element.append(this._renderEditDialog())))},_toolBarClick:function(e){if(e.event.which&&(3==e.event.which||2==e.event.which)||e.event.button&&2==e.event.button)return!1;this.model;var t=Z(this.itemsContainer).closest(".e-treegrid"),i=t.ejTreeGrid("instance"),s=t.attr("id"),n=Z("#"+i._id+"_toolbarItems");if(e.event==P&&"INPUT"==e.target.tagName&&e.currentTarget.id==s+"_search")return!1;-1!=i.model.dateFormat.toLowerCase().indexOf("hh")?Z.isFunction(Z.fn.ejDateTimePicker)&&Z("#"+s+"EditForm").find(".e-datepicker").ejDateTimePicker("hide"):Z.isFunction(Z.fn.ejDatePicker)&&Z("#"+s+"EditForm").find(".e-datepicker").ejDatePicker("hide");var a=e.currentTarget,a=(e.target,{itemName:e.text,currentTarget:a,model:i.model,sender:e});if(t.ejTreeGrid("instance")._trigger("toolbarClick",a))return!1;switch(Z(n).ejToolbar("deselectItem",e.currentTarget),e.currentTarget.id){case s+"_add":i._toolbarOperation(s+"_add",e);break;case s+"_edit":i._toolbarOperation(s+"_edit",e);break;case s+"_delete":i._toolbarOperation(s+"_delete",e);break;case s+"_update":i._toolbarOperation(s+"_update",e);break;case s+"_cancel":i._toolbarOperation(s+"_cancel",e);break;case s+"_expandAll":i._toolbarOperation(s+"_expandAll",e);break;case s+"_collapseAll":i._toolbarOperation(s+"_collapseAll",e);break;case s+"_pdfExport":i._toolbarOperation(s+"_pdfExport",e);break;case s+"_excelExport":i._toolbarOperation(s+"_excelExport",e);break;case s+"_print":i._toolbarOperation(s+"_print",e);break;case s+"_search":i._isRowEdit?i.cancelRowEditCell():i.model.isEdit&&i.cancelEditCell()}return!1},_toolbarOperation:function(e,t){var i=this.element,s=i.ejTreeGrid("instance"),n=i.attr("id"),a=this,r=this.selectedItem(),i=t.target,r=a.model.allowPaging?this._updatedPageData.indexOf(r):this.selectedRowIndex();switch(s._exportTo=s.export,e){case n+"_add":"cell"==a.model.selectionSettings.selectionMode&&(a.model.editSettings.rowPosition="top"),a.model.editSettings.allowEditing&&("dialogEditing"==a.model.editSettings.editMode||"batchediting"==a.model.editSettings.editMode.toLowerCase()&&"dialog"==a.model.editSettings.batchEditSettings.editMode)?a._showTreeGridAddEditDialog(-1,"add"):a._startAdd(i,null);break;case n+"_edit":a.updateScrollBar(),a.model.editSettings.allowEditing&&("dialogEditing"==a.model.editSettings.editMode||"batchediting"==a.model.editSettings.editMode.toLowerCase()&&"dialog"==a.model.editSettings.batchEditSettings.editMode)?a._showTreeGridAddEditDialog(r):a._editRow(r);break;case n+"_delete":a.deleteRow(),a.model.editSettings.showDeleteConfirmDialog||a._cancelSaveTools(),a._isRefreshAddedRecord=!1;break;case n+"_update":"cellediting"==(o=a.model.editSettings.editMode).toLowerCase()?a._saveEditedElements():"rowediting"==o.toLowerCase()?a.saveRow():"batchediting"==o.toLowerCase()&&(a.cancelEdit(),a._batchSaveCancel="save",a.model.editSettings.showConfirmDialog?a._confirmDialog.find(".e-content").html(a._batchSaveConfirmText).end().ejDialog("open"):a.batchSave()),a._clearContextMenu(),this._removeDetailsRow(),a._focusTreeGridElement();break;case n+"_cancel":var o=a.model.editSettings.editMode;"cellediting"==o.toLowerCase()?a._isRowEdit?a.cancelRowEditCell():a.cancelEditCell():"rowediting"==o.toLowerCase()?a.cancelRowEditCell():"batchediting"===o.toLowerCase()&&(a._isRowEdit?a.cancelRowEditCell():a.model.isEdit&&a.cancelEditCell(),a._batchSaveCancel="cancel",a.model.editSettings.showConfirmDialog?a._confirmDialog.find(".e-content").html(a._cancelEditText).end().ejDialog("open"):a.batchCancel()),"auto"==a.model.sizeSettings.height&&a._updateContentHeight(),a._cancelSaveTools(),a._clearContextMenu(),this._removeDetailsRow();break;case n+"_expandAll":a.expandAll();break;case n+"_collapseAll":a.collapseAll();break;case n+"_pdfExport":s._exportTo(s.model.exportToPdfAction,"pdfExporting",s.model.allowMultipleExporting);break;case n+"_excelExport":s._exportTo(s.model.exportToExcelAction,"excelExporting",s.model.allowMultipleExporting);break;case n+"_print":s.print();break;case n+"_search":if(a._batchEditStarts&&!a._confirmDialog.is(":visible"))return a._batchSaveLostWarning("Searching"),a._batchTempDetails.searchTarget=t,a._batchTempDetails.searchString=t.value,!0;a._searchString!=t.value&&(a.search(t.value),a._updateToolbarItems(),a._isRefreshAddedRecord=!1)}return a._refreshToolBar(),!1},_batchSaveLostWarning:function(e){var t=this.model;"batchediting"==t.editSettings.editMode.toLowerCase()&&(t.isEdit?this.saveCell():this._isRowEdit&&this.saveRow(),this._batchSaveCancel="saveLost"+e,t.editSettings.showConfirmDialog?this._confirmDialog.find(".e-content").html(this._batchSaveLostChangesText).end().ejDialog("open"):this.batchCancel())},_renderConfirmDialog:function(){var e=this,t=J.buildTag("div.e-content",e.localizedLabels.deleteRecordText),i=J.buildTag("span.e-buttons",'<input type="button" class="e-flat e-btnsub" id='+e._id+'_ConfirmDialogOK value="'+this.localizedLabels.okButtonText+"\" /> <input type='button' class='e-flat e-btncan' id="+e._id+"_ConfirmDialogCancel value='"+e.localizedLabels.cancelButtonText+"' />",{float:"right",padding:".5em 0em"});e._confirmDialog=J.buildTag("div#"+e._id+"_ConfirmDialog",{height:"auto",width:"auto",float:"left"}),e._confirmDialog.append(t).append(i),e.element.append(e._confirmDialog),i.find("input").ejButton({cssClass:e.model.cssClass,showRoundedCorner:!0,size:"mini",click:Z.proxy(e._triggerConfirm,e)}),e._confirmDialog.ejDialog({showOnInit:!1,enableAnimation:!1,showHeader:!1,width:"auto",minWidth:0,minHeight:0,enableModal:!0,enableResize:!1})},_triggerConfirm:function(e){var t,i=this,s=i.model;if(e!==P&&e.model.text==i.localizedLabels.okButtonText){if("save"==i._batchSaveCancel)i.batchSave();else if("cancel"==i._batchSaveCancel)i.batchCancel();else if("saveLostDrag"==i._batchSaveCancel)i._batchSaveCancel="cancel",i.batchCancel();else if("saveLostColumnMenu"==i._batchSaveCancel)i._batchSaveCancel="cancel",i.batchCancel(),i._renderColumnMenu(i._batchTempDetails.menuTarget);else if("saveLostSearching"==i._batchSaveCancel)i._batchSaveCancel="cancel",i.batchCancel(),i.search(i._batchTempDetails.searchString),i._updateToolbarItems(),i._isRefreshAddedRecord=!1;else if("saveLostPaging"==i._batchSaveCancel){if(i._batchSaveCancel="cancel",i.batchCancel(),i._prevPageNo==i._batchTempDetails.currentPage)return;i._isNextPage=!0,i._isRowEdit?i.cancelRowEditCell():i.model.isEdit&&i.cancelEditCell(),i.gotoPage(i._batchTempDetails.currentPage)}else"saveLostFiltering"==i._batchSaveCancel?(i._batchSaveCancel="cancel",i.batchCancel(),e=i._batchTempDetails,"filterbar"==s.filterSettings.filterType?i.filterColumn(e.fieldName,e.filterOperator,e.filterValue,e.predicate,e.matchcase,e.actualFilterValue):"excel"!=s.filterSettings.filterType&&"menu"!=s.filterSettings.filterType||i._onHeaderClick(e.filterTarget)):i.deleteRow(null,i._isFromContextmenu,i._deleteRowIndex);i._confirmDialog.ejDialog("close"),i._cancelSaveTools()}else i._confirmDialog.ejDialog("close"),"saveLostFiltering"==i._batchSaveCancel&&"filterbar"==s.filterSettings.filterType&&((t=Z(i._batchTempDetails.filterTarget)).hasClass("e-numerictextbox")?t.ejNumericTextbox({value:null}):t.hasClass("e-dropdownlist")?t.ejDropDownList({value:null}):t.closest("input").val("")),"saveLostSearching"==i._batchSaveCancel&&(i._searchString||(t=Z(i._batchTempDetails.searchTarget)).hasClass("e-ejinputtext")&&t.closest("input").val("")),"saveLostPaging"==i._batchSaveCancel&&(this.getPager().ejPager("model").currentPage=i._prevPageNo,i.getPager().ejPager("refreshPager"));i._focusTreeGridElement(),i._deleteRowIndex=-1,i._isFromContextmenu=!1,i._batchSaveCancel=""},print:function(){var e={},t=this.model;e.requestType="print",this._trigger("actionBegin",e);var i=window.open("","print","height=452,width=1024,tabbar=no"),s=J.buildTag("div#"+this._id+"Print"),e=Z.extend({},this.model),n=Z.extend(!0,[],t.columns),a=n.length;if(e.toolbarSettings=Z.extend({},t.toolbarSettings),e.toolbarSettings.showToolbar=e.allowPaging=!1,e.selectedItem=null,e.enableVirtualization=!1,e.query.queries=[],e.printingEnabled=!0,0<this._frozenColumnsLength){for(var r=0;r<a;r++)n[r].isFrozen&&(n[r].isFrozen=!1);e.columns=n}if(0<this._commandColumnLength){for(r=0;r<a;r++)n[r].commands&&(n.splice(r,1),a--,r--);e.columns=n}t.allowPaging&&t.pageSettings.printMode==J.TreeGrid.PrintMode.CurrentPage&&(e.query.queries=[{fn:"onPage",e:{pageIndex:this._currentPage(),pageSize:t.pageSettings.pageSize}}]),e.dataBound=function(){this._printProcess(i)},s.ejTreeGrid(e)},_printProcess:function(e){var t=this.element,i={requestType:"print",element:t};this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&t.find(".e-filterbar").remove(),Z(t).find(".e-gridheader").css({width:"auto"}),this.clearSelection(),t.show(),this._trigger("beforePrint",i),J.print(t,e),this._trigger("actionComplete",i)},contextMenuOperations:function(e){var t,i=this,s=i.model,n=i._contextMenuSelectedIndex,a=i._contextMenuEvent,r=i._contextMenuSelectedItem,o=s.editSettings,l=o.editMode.toLowerCase();switch(this._isContextMenuItems||(t=i._contextMenuColumnDetails),e){case"contextMenu_Unfreeze":0==Z(this).find(".e-expander").length&&(Z(this).hasClass("e-disable")||(i._checkboxSelection&&2==i._frozenColumnsLength&&s.columns[0].nonColumn&&s.columns[0].isFrozen&&(s.columns[0].isFrozen=!1),i.freezeColumn(t.field,!1)));break;case"contextMenu_Freeze":0==Z(this).find(".e-expander").length&&(Z(this).hasClass("e-disable")||(i._checkboxSelection&&s.columns[0].nonColumn&&!s.columns[0].isFrozen&&(s.columns[0].isFrozen=!0),i.freezeColumn(t.field,!0)));break;case"contextMenu_FreezePreceding":0==Z(this).find(".e-expander").length&&(Z(this).hasClass("e-disable")||i.freezePrecedingColumns(t.field));break;case"contextMenu_SortDescending":s.allowMultiSorting&&(i._multiSortRequest=!0),0==Z(this).find(".e-expander").length&&(s.isFromGantt||i.sortColumn(t.field,J.sortOrder.Descending),i._multiSortRequest=!1);break;case"contextMenu_SortAscending":s.allowMultiSorting&&(i._multiSortRequest=!0),0==Z(this).find(".e-expander").length&&(s.isFromGantt||i.sortColumn(t.field,J.sortOrder.Ascending),i._multiSortRequest=!1);break;case"Delete":i.deleteRow(null,!0,i._contextMenuSelectedIndex),i._cancelSaveTools(),i._clearContextMenu();break;case"Above":i._subContextMenuAction(r,n,"Above"),i._focusTreeGridElement();break;case"Below":i._subContextMenuAction(r,n,"Below"),i._focusTreeGridElement();break;case"Add":i._setInitialData(),i._clearContextMenu();break;case"Edit":"cellediting"==l||"batchediting"==l&&"cell"==o.batchEditSettings.editMode?(t=s.columns[i.getCellIndex(a)],J.isNullOrUndefined(t)||0==t.allowEditing||(i._focusTreeGridElement(),i._cellEditingDetails.columnIndex=i.getCellIndex(a),i._editedRowIndex=i._cellEditingDetails.rowIndex=i.getRowIndex(a),(t=0<=i._cellEditingDetails.columnIndex&&t.field)&&(i.updateScrollBar(),s.editSettings.allowEditing&&i.cellEdit(i._cellEditingDetails.rowIndex,t)&&i._editAddTools()))):"rowediting"==l||"batchediting"==l&&"row"==o.batchEditSettings.editMode?(i.updateScrollBar(),i._editRow(n)):("dialogediting"==l||"batchediting"==l&&"dialog"==o.batchEditSettings.editMode)&&i._showTreeGridAddEditDialog(n),i._clearContextMenu();break;case"Save":if("cellediting"==l||"batchediting"==l&&"cell"==o.batchEditSettings.editMode){if(!this.editFormValidate())return!0;i._isRowEdit?i._endEdit():i.saveCell()}else("rowediting"==l||"batchediting"==l&&"row"==o.batchEditSettings.editMode)&&i.saveRow();i._clearContextMenu(),i._focusTreeGridElement();break;case"Cancel":"cellediting"==l||"batchediting"==l&&"cell"==o.batchEditSettings.editMode?i._isRowEdit?i.cancelRowEditCell():s.isEdit&&i.cancelEditCell():("rowediting"==l||"batchediting"==l&&"row"==o.batchEditSettings.editMode)&&i.cancelRowEditCell(),i._clearContextMenu(),i._focusTreeGridElement();break;default:o={};this._isContextMenuItems?(o.data=r,o.menuId=e,i._triggerMenuEventHandler(e,o,!0)):(o.column=i._contextMenuColumnDetails,o.menuId=e,i._triggerMenuEventHandler(e,o,!1)),i._clearContextMenu()}s.enableAltRow&&s.currentViewData[0]&&J.TreeGrid.updateAltRow(i,s.currentViewData[0],0,0)},_setCultureInfo:function(){var e=this,t=e.model,i=t.locale,s=e.localizedLabel,n=J.TreeGrid.Locale.default,s=(t.predecessorTable||t.resourceTable?J.Gantt:J.TreeGrid).Locale[i];e._toolboxTooltipTexts=(s&&s.toolboxTooltipTexts?s:n).toolboxTooltipTexts,e._contextMenuTexts=(s&&s.contextMenuTexts?s:n).contextMenuTexts,e.model.isFromGantt?(e._columnMenuTexts=e.model.columnMenuTexts,e._deleteColumnText=e.model.deleteColumnText,e._okButtonText=e.model.okButtonText,e._cancelButtonText=e.model.cancelButtonText,e._columnDialogTexts=e.model.columnDialogTexts,e._columnDialogTitle=e.model.columnDialogTitle,e._confirmDeleteText=e.model.confirmDeleteText,e._editTypeText=e.model.editTypeText,e._textAlignTypeText=e.model.textAlignTypeText,e._clipModeText=e.model.clipModeText):(e._columnMenuTexts=(s&&s.columnMenuTexts?s:n).columnMenuTexts,e._columnDialogTexts=(s&&s.columnDialogTexts?s:n).columnDialogTexts,e._columnDialogTitle=(s&&s.columnDialogTitle?s:n).columnDialogTitle,e._deleteColumnText=(s&&s.deleteColumnText?s:n).deleteColumnText,e._okButtonText=(s&&s.okButtonText?s:n).okButtonText,e._cancelButtonText=(s&&s.cancelButtonText?s:n).cancelButtonText,e._confirmDeleteText=(s&&s.confirmDeleteText?s:n).confirmDeleteText,e._editTypeText=(s&&s.editTypeTexts?s:n).editTypeTexts,e._textAlignTypeText=(s&&s.textAlignTypes?s:n).textAlignTypes,e._clipModeText=(s&&s.clipModeTexts?s:n).clipModeTexts,e._dropDownListBlanksText=(s&&s.dropDownListBlanksText?s:n).dropDownListBlanksText,e._dropDownListClearText=(s&&s.dropDownListClearText?s:n).dropDownListClearText,e._trueText=(s&&s.trueText?s:n).trueText,e._falseText=(s&&s.falseText?s:n).falseText,e._batchSaveConfirmText=(s&&s.batchSaveConfirmText?s:n).batchSaveConfirmText,e._batchSaveLostChangesText=(s&&s.batchSaveLostChangesText?s:n).batchSaveLostChangesText,e._cancelEditText=(s&&s.cancelEditText?s:n).cancelEditText,e.model.emptyRecordText=(s&&s.emptyRecord?s:n).emptyRecord,e._filterMenuTexts=(s&&s.filterMenuTexts?s:n).filterMenuTexts)},refresh:function(e,t){var i,s=this.model;J.isNullOrUndefined(e)?((i={}).requestType=J.TreeGrid.Actions.Refresh,this.sendDataRenderingRequest(i)):(this.resetModelCollections(),this._fieldNamesToQuery=[],this._assignedIdCollections=[],this._assignedParendIDs=[],s.dataSource=e,s.query=t,this.element.ejTreeGrid("destroy").ejTreeGrid(s))},_getNewIndex:function(){return this._maxRowIndex+=1,this._maxRowIndex},_getNewId:function(){return this._lastInsertedId+1},_updateLastInsertedId:function(e){e=isNaN(parseInt(e))?this._lastInsertedId<1?1:this._lastInsertedId:parseInt(e);this._lastInsertedId=this._lastInsertedId<e?e:this._lastInsertedId},_updateHierarchyRowIndexData:function(e,t,i){var s=this.model,n=s.editSettings.editMode.toLowerCase();e.updatedHierarchyRowIndexData=[];for(var a=i;a<t.length;a++)t[a].hierarchyRowIndex=a,s.hierarchyRowIndexMapping&&(t[a].item[s.hierarchyRowIndexMapping]=a),"batchediting"!=n?e.updatedHierarchyRowIndexData.push(t[a]):-1==this.batchChanges.updatedHierarchyRowIndexData.indexOf(t[a])&&this.batchChanges.updatedHierarchyRowIndexData.push(t[a])},_addRecord:function(t,e,i,s){var n=this;(n.model.isEdit||n._isRowEdit)&&n.cancelRowEditCell();var a,r,o,l=this.model,d=this.selectedRowIndex(),h=l.updatedRecords,c=l.flatRecords,u=l.parentRecords,p="row"==l.selectionSettings.selectionMode?this.selectedItem():h[n._rowIndexOfLastSelectedCell],m=l.columns,g=this.dataSource(),f=0,_=!1,v=!1,b=l.editSettings.editMode.toLowerCase(),x=!1,y={};if("array"===Z.type(g)||g instanceof J.DataManager||(this.dataSource([]),g=this.dataSource()),J.isNullOrUndefined(t)){t=null;for(var w=0;w<m.length;w++)J.isNullOrUndefined(m[w].nonColumn)&&(t=n._restoreCustomData(t,"",m[w].field));v=!0}if("batchediting"==b&&(t.isBatchAdd=!0),!l.idMapping||!l.parentIdMapping||J.isNullOrUndefined(t[n.model.parentIdMapping])||"child"==e||0<(o=l.flatRecords.filter(function(e){return e[l.idMapping]==t[l.parentIdMapping]})).length&&(p=o[0],e=J.TreeGrid.RowPosition.Child,x=!0),(-1===d&&-1==n._rowIndexOfLastSelectedCell&&(e===J.TreeGrid.RowPosition.Above||e===J.TreeGrid.RowPosition.Below||e===J.TreeGrid.RowPosition.Child)||!e||1<l.selectedItems.length&&!n._checkboxSelection)&&(x||(e=J.TreeGrid.RowPosition.Top)),e==J.TreeGrid.RowPosition.Top||e==J.TreeGrid.RowPosition.Bottom?(a=0,r=null):e==J.TreeGrid.RowPosition.Above||e==J.TreeGrid.RowPosition.Below?(a=p.level,r=p.parentItem):e==J.TreeGrid.RowPosition.Child&&(a=p.level+1,r=p),l.idMapping&&l.parentIdMapping){x=t[l.idMapping];if(J.isNullOrUndefined(x)||""==x||"contextMenu"==s)t[l.idMapping]=n._getNewId();else if(n._validateIdValue(x))return!1}if(y.requestType="add",y.data=t,y.level=a,y.rowPosition=e,y.parentItem=r,n._trigger("actionBegin",y)){if("dialog"==s)return!1}else{switch(t=y.data,e!=y.rowPosition&&(e=y.rowPosition),t[l.childMapping]&&t[l.childMapping].length&&delete t[l.childMapping],n.selectRows(-1),s=this._getNewIndex(),e){case J.TreeGrid.RowPosition.Top:f=0,T=null,(S=n._createRecord(t,f)).index=s,c.splice(0,0,S),h.splice(0,0,S),n._isHierarchyFiltering&&n._updateFilterParent.splice(0,0,S),u.splice(0,0,S),n._updateHierarchyRowIndexData(y,u,0),(n._isDataManagerUpdate?n._jsonData:g).splice(0,0,S.item),j=0;break;case J.TreeGrid.RowPosition.Bottom:f=0,T=null,(S=n._createRecord(t,f)).index=s,c.push(S),h.push(S),n._isHierarchyFiltering&&n._updateFilterParent.push(S),u.push(S),(n._isDataManagerUpdate?n._jsonData:g).push(S.item),j=h.indexOf(S);break;case J.TreeGrid.RowPosition.Above:var C,S,f=p.level,T=p.parentItem;(S=n._createRecord(t,f,T)).index=s,n._isHierarchyFiltering&&-1<p.filterLevel&&(S.filterLevel=p.filterLevel),D=c.indexOf(p),O=h.indexOf(p),c.splice(D,0,S),h.splice(O,0,S),n._isHierarchyFiltering&&n._updateFilterParent.splice(O,0,S),J.isNullOrUndefined(T)?(u.splice(u.indexOf(p),0,S),n._isDataManagerUpdate?n._jsonData.splice(n._jsonData.indexOf(p.item),0,S.item):g.splice(g.indexOf(p.item),0,S.item),R=u.indexOf(p),n._updateHierarchyRowIndexData(y,u,R)):(C=T.childRecords.indexOf(p),T.childRecords.splice(C,0,S),l.parentIdMapping?(S.item[l.parentIdMapping]=S.parentItem.item[l.idMapping],S[l.parentIdMapping]=S.parentItem.item[l.idMapping],(n._isDataManagerUpdate?n._jsonData:g).push(S.item)):T.item[l.childMapping].splice(C,0,S.item),I=T.childRecords,n._updateHierarchyRowIndexData(y,I,C)),j=O;break;case J.TreeGrid.RowPosition.Below:f=p.level,T=p.parentItem,(S=n._createRecord(t,f,T)).index=s,n._isHierarchyFiltering&&-1<p.filterLevel&&(S.filterLevel=p.filterLevel);var R,k=c.indexOf(p),O=p.hasChildRecords?(D=k+n.getChildCount(p,0)+1,h.indexOf(p)+n._getVisibleChildRecordCount(p,0,h)+1):(D=k+1,h.indexOf(p)+1);c.splice(D,0,S),h.splice(O,0,S),n._isHierarchyFiltering&&n._updateFilterParent.splice(O,0,S),J.isNullOrUndefined(T)?(u.splice(u.indexOf(p)+1,0,S),n._isDataManagerUpdate?n._jsonData.splice(n._jsonData.indexOf(p.item)+1,0,S.item):g.splice(g.indexOf(p.item)+1,0,S.item),R=u.indexOf(p),n._updateHierarchyRowIndexData(y,u,R+1)):(C=T.childRecords.indexOf(p),T.childRecords.splice(C+1,0,S),l.parentIdMapping?(S.item[l.parentIdMapping]=S.parentItem.item[l.idMapping],S[l.parentIdMapping]=S.parentItem.item[l.idMapping],(n._isDataManagerUpdate?n._jsonData:g).push(S.item)):T.item[l.childMapping].splice(C+1,0,S.item),I=T.childRecords,n._updateHierarchyRowIndexData(y,I,C+1)),j=O;break;case J.TreeGrid.RowPosition.Child:f=p.level+1,T=p,(S=n._createRecord(t,f,T)).index=s,n._isHierarchyFiltering&&-1<p.filterLevel&&(S.filterLevel=p.filterLevel+1);var D,I,k=c.indexOf(p);O=p.hasChildRecords?(D=k+n.getChildCount(p,0)+1,p.expanded&&n.getExpandStatus(p)||((s={expanded:!0}).data=p,n._isInAdd=!0,n._isRefreshAddedRecord?(s.data.expanded=!0,n.updateExpandStatus(y.data,y.expanded),n.refreshContent(),n._isRefreshAddedRecord=!1):n._expandRecord(p),h=l.updatedRecords,n._isInAdd=!1),h.indexOf(p)+n._getVisibleChildRecordCount(p,0,h)+1-(l.showSummaryRow?l.summaryRows.length:0)):(n._isLoadonDemand&&(p.isChildRetrieved=!0),n.getExpandStatus(p)||n._expandRecord(p.parentItem),p.hasChildRecords=!0,p.childRecords=[],p.expanded=!0,l.parentIdMapping||(p.item[l.childMapping]=[]),p.isMilestone=!1,D=k+1,h.indexOf(p)+1),c.splice(D,0,S),n._isHierarchyFiltering&&n._updateFilterParent.splice(O,0,S),n._isLoadonDemand&&!p.isChildRetrieved||h.splice(O,0,S),J.isNullOrUndefined(T)||(C=T.childRecords.indexOf(p),T.childRecords.splice(C+1,0,S),l.parentIdMapping?(S.item[l.parentIdMapping]=S.parentItem.item[l.idMapping],S[l.parentIdMapping]=S.parentItem.item[l.idMapping],(n._isDataManagerUpdate?n._jsonData:g).push(S.item)):T.item[l.childMapping].splice(C+1,0,S.item),I=T.childRecords,n._updateHierarchyRowIndexData(y,I,0)),j=O}l.allowPaging&&(e==J.TreeGrid.RowPosition.Below||e==J.TreeGrid.RowPosition.Child?"root"===l.pageSettings.pageSizeMode&&!J.isNullOrUndefined(p.parentItem)||(p=n._updatedPageData[n._updatedPageData.length-1],(n._updatedPageData.length==l.pageSettings.pageSize?l.updatedRecords.indexOf(p):j)<j&&(n._currentPage(this._currentPage()+1),0)):e==J.TreeGrid.RowPosition.Top&&(1<n._currentPage()||n._currentPage()<1)?(n._currentPage(1),0):e==J.TreeGrid.RowPosition.Bottom&&n._currentPage()<l.pageSettings.totalPages&&(n._currentPage(l.pageSettings.totalPages),0)),(l.allowFiltering&&0<l.filterSettings.filteredColumns.length||0<n._searchString.length)&&n._flatFilteredRecords.push(S),v||!J.TreeGrid.RowPosition.Above&&!J.TreeGrid.RowPosition.Below?(n._renderAddedRow(j,S),_=!0,n._emptyRowIndex="cell"==l.selectionSettings.selectionMode?j:null):(y={},(m=l.columns).length,l.allowPaging||0,y.rowIndex=j,y.requestType="addNewRow",y.addedRow=t,"batchediting"!=b&&n._trigger("actionComplete",y)?h.splice(j,1):(n._updateAction(y),n._renderAddedRow(j,S),l.showSummaryRow&&("addNewRow"==y.requestType&&"child"==e&&n._createAndRenderSummaryRecords(y),n._updateSummaryRow(y)),l.showTotalSummary&&n._updateTotalSummaryRow(y),_=!0,l.idMapping&&l.parentIdMapping&&n._updateLastInsertedId(S[l.idMapping]))),"batchediting"==b&&_&&!v&&(n.batchChanges.added.push(S),n._batchEditStarts=!0),!1===l.enableVirtualization&&(0<l.sortSettings.sortedColumns.length||0<l.filterSettings.filteredColumns.length)&&(n._isRefreshAddedRecord=!0),l.allowPaging&&(h=n._updatedPageData);var j=_?h.indexOf(S):d;-1==j&&(j=d),l.allowSelection&&"row"==l.selectionSettings.selectionMode&&(n._rowSelectingEventTrigger(this._previousIndex,j)||(n.selectRows(j),l.selectionSettings.enableSelectAll&&n.selectAllRows(),n._checkboxSelection&&l.selectionSettings.enableHierarchySelection&&S.parentItem&&n._updateParentSelection(S.parentItem),n._rowSelectedEventTrigger(j))),l.allowSelection||"row"!=l.selectionSettings.selectionMode||n.selectRows(j),"cell"==l.selectionSettings.selectionMode&&(n._rowIndexOfLastSelectedCell=h.indexOf(S)),n.updateScrollBar(),"isEditRow"==i?n._editRow(h.indexOf(S),S):(J.TreeGrid.refreshRow(n,l.currentViewData.indexOf(S)),n._cancelSaveTools(),l.enableAltRow&&J.TreeGrid.updateAltRow(n,n.model.currentViewData[0],0,0)),!S.parentItem||e!=J.TreeGrid.RowPosition.Child||1!=S.parentItem.childRecords.length&&S.parentItem.hasFilteredChildRecords||(S.parentItem.hasFilteredChildRecords=!0,J.TreeGrid.refreshRow(n,l.currentViewData.indexOf(S.parentItem))),l.allowTextWrap&&0<n._$frozenTableContent.length?(n._updateWrapRowHeights("total,header"),n.updateHeight()):l.allowTextWrap&&l.enableVirtualization&&n.updateHeight()}return 0<n._commandColumnLength&&(J.isNullOrUndefined(i)&&(j=J.TreeGrid.getRowByIndex(n,j),n._refreshUnboundTemplate(j)),e==J.TreeGrid.RowPosition.Child&&(S=h.indexOf(S.parentItem),S=J.TreeGrid.getRowByIndex(n,S),n._refreshUnboundTemplate(S))),!0},_validateIdValue:function(t){var i=this.model,e=i.flatRecords;return!!(this._isLoadonDemand?Z.map(this._assignedIdCollections,function(e){if(e==t)return e}):Z.map(e,function(e){if(e[i.idMapping]==t)return e})).length},_closeTreegridAddEditDialog:function(e,t){var i={};if(this._off(Z("#"+this._id+"_dialogEdit"),"click keypress","#EditFormDialog_"+this._id+"_Save ,#EditFormDialog_"+this._id+"_Cancel",this._buttonClick),!this._isTreeAddEditDialogSave)return i.requestType="Add"===t?"closeAddDialog":"closeEditDialog",this._trigger("actionBegin",i);this._isTreeAddEditDialogSave=!1},showAddDialog:function(){this.model.editSettings.allowAdding&&"dialogEditing"==this.model.editSettings.editMode&&this._showTreeGridAddEditDialog(null,"add")},showEditDialog:function(e){this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&this._showTreeGridAddEditDialog(e)},_showTreeGridAddEditDialog:function(e,t){var i=document.createElement("div"),s=this,n=Z(i),a=s.getOffsetRect(Z("#"+s._id)[0]),r=[],o=s.model.columns,l=s._contextMenuTexts;if(!J.isNullOrUndefined(e)&&-1!=e||t||(e="cell"==s.model.selectionSettings.selectionMode?s.selectedCellIndexes()[0].rowIndex:s.selectedRowIndex()),r[0]=(s.model.allowPaging?this._updatedPageData:s.model.updatedRecords)[e],t&&"add"===t.toLowerCase()){if(J.isNullOrUndefined(r[0])){r[0]=null;for(var d=0;d<o.length;d++)r[0]=s._restoreCustomData(r[0],"",o[d].field);s.model.parentIdMapping&&(r[0][s.model.idMapping]=s._getNewId())}n.addClass("e-dialogaddrow")}else n.addClass("e-dialogeditedrow");J.isNullOrUndefined(s.model.editSettings.dialogEditorTemplateID)||""==s.model.editSettings.dialogEditorTemplateID?i.innerHTML=Z.render[this._id+"_JSONDialogEditingTemplate"](r):J.isNullOrUndefined(s.model.editSettings.dialogEditorTemplateID)||""==s.model.editSettings.dialogEditorTemplateID||(i.innerHTML=Z.render[this._id+"_JSONdialogTemplateMode"](r)),("dialogEditing"==this.model.editSettings.editMode||"batchediting"==s.model.editSettings.editMode.toLowerCase()&&"dialog"==s.model.editSettings.batchEditSettings.editMode)&&(Z("#"+this._id+"_dialogEdit").html(Z(i)),(i={}).cssClass=this.model.cssClass,i.enableRTL=!1,i.enableResize=!1,i.showOnInit=!1,i.content="#"+this._id,Z(window).width()<=s._responsiveMinWidth&&s.model.isResponsive?(i.width=Z("#"+s._id).width()+"px",i.height=Z("#"+s._id).height()+"px",i.enableModal=!1,i.isResponsive=!1,i.allowDraggable=!1):(i.width="auto",i.height="auto",i.enableModal=!0,i.isResponsive=!1,i.allowDraggable=!0),i.allowKeyboardNavigation=!1,t&&"add"===t.toLowerCase()?(i.title=l.addRowText,i.beforeClose=function(e){s._closeTreegridAddEditDialog(e,"Add")&&(e.cancel=!0),s._focusTreeGridElement()}):(i.title=l.editText,i.beforeClose=function(e){s._closeTreegridAddEditDialog(e,"Edit")&&(e.cancel=!0),s._focusTreeGridElement()}),Z("#"+this._id+"_dialogEdit").ejDialog(i),(l={}).data=r[0],t&&"add"===t.toLowerCase()?(l.requestType="beforeOpenAddDialog",l.rowPosition=s.model.editSettings.rowPosition):l.requestType="beforeOpenEditDialog",l.element=Z("#"+s._id+"_dialogEdit"),s._trigger("actionBegin",l)||((i={}).columnIndex=e,i.data=l.data,i.requestType="beginEdit",s._refreshEditForm(i),l.data=i.data,t&&"add"===t.toLowerCase()?l.requestType="openAddDialog":l.requestType="openEditDialog",l.element=Z("#"+s._id+"_dialogEdit"),s._trigger("actionBegin",l)||(Z("#"+this._id+"_dialogEdit").ejDialog("open"),s._currentEditRecordDialogIndex=this.model.currentViewData.indexOf(i.data),Z(window).width()<=s._responsiveMinWidth&&s.model.isResponsive?(Z("#"+s._id+"_dialogEdit_wrapper").css({left:a.left+"px",top:a.top+"px"}),Z("#"+s._id+"_dialogEdit_wrapper").removeClass("e-shadow").removeClass("e-treegridadaptivedialog"),Z("#"+s._id+"_dialogEdit").removeClass("e-shadow")):(Z("#"+s._id+"_dialogEdit_wrapper").addClass("e-shadow").addClass("e-treegridadaptivedialog"),Z("#"+s._id+"_dialogEdit").addClass("e-shadow")),this._on(Z("#"+this._id+"_dialogEdit"),"click keypress","#EditFormDialog_"+this._id+"_Save ,#EditFormDialog_"+this._id+"_Cancel",s._buttonClick),Z("#"+s._id+"_dialogEdit").ejDialog("refresh")))),Z.isFunction(Z.validator)&&(s._initValidator(),s.setValidation())},addRow:function(e,t){this.model;if(this._cancelEditState(),e)return!!this._addRecord(e,t);this._addRecord(null,t,"isEditRow")},_startAdd:function(e,t){var i=this.model;this.model.allowSelection&&"multiple"==this.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&this._clearMultiSelectPopup(),this._addRecord(null,i.editSettings.rowPosition,"isEditRow")},_getRecordIndexByItem:function(e,t){e=J.DataManager(t).executeLocal(J.Query().where("item",J.FilterOperators.equal,e));return 0<e.length?t.indexOf(e[0]):-1},_expandRecord:function(e){if(!this._isLoadonDemand||e.isChildRetrieved)for(var t=e,i={};null!=t;)0==t.expanded&&(i.expanded=!0,(i.data=t).parentItem?this._isInExpandCollapseAll=!0:this._isInExpandCollapseAll=!1,J.TreeGrid.sendExpandCollapseRequest(this,i)),t=t.parentItem},scrollOffset:function(e,t){var i=this.getScrollElement().data("ejScroller");this._saveEditedElements(),"number"!=typeof t&&"number"!=typeof parseInt(t)||0<=(t=parseInt(t))&&this.getMaxScrollHeight()>=t&&i.scrollY(t,!0),"number"!=typeof e&&"number"!=typeof parseInt(e)||0<=(e=parseInt(e))&&this.getMaxScrollWidth()>=e&&i.scrollX(e,!0)},getScrollTopOffset:function(){return this.getScrollElement().ejScroller("model.scrollTop")},getScrollLeftOffset:function(){return this.getScrollElement().ejScroller("model.scrollLeft")},scrollToTop:function(){var e,t,i=this.model,s=this.getUpdatedRecords();this.isVScroll()&&(this._saveEditedElements(),0<(s=i.allowPaging?s:this.getExpandedRecords(i.updatedRecords)).length&&(e=s[0],t=s.indexOf(e),this.updateScrollBar(t),i.allowSelection&&!this._rowSelectingEventTrigger(this.selectedRowIndex(),t)&&(this.selectRows(t),this._rowSelectedEventTrigger(t))))},scrollToBottom:function(){var e,t,i,s=this.model;this.isVScroll()&&(this._saveEditedElements(),0<(e=s.allowPaging?this.getUpdatedRecords():this.getExpandedRecords(s.updatedRecords)).length&&(t=e[e.length-1],i=(s.allowPaging?e:s.updatedRecords).indexOf(t),this.updateScrollBar(i),s.allowSelection&&!this._rowSelectingEventTrigger(this.selectedRowIndex(),i)&&(this.selectRows(i),this._rowSelectedEventTrigger(i))))},_editAddTools:function(){var e=this.model,t=Z("#"+this._id+"_toolbarItems"),i=this.model.editSettings,s=e.toolbarSettings.toolbarItems,n=[];i.allowAdding&&-1!==s.indexOf("add")&&!Z(t).find(".e-addnew").parent("li").hasClass("e-disable")&&"click"!=i.beginEditAction&&n.push(Z(t).find(".e-addnew").parent()[0]),i.allowEditing&&-1!==s.indexOf("edit")&&!Z(t).find(".e-edit").parent("li").hasClass("e-disable")&&n.push(Z(t).find(".e-edit").parent()[0]),i.allowDeleting&&-1!==s.indexOf("delete")&&!Z(t).find(".e-delete").parent("li").hasClass("e-disable")&&"click"!=e.editSettings.beginEditAction&&n.push(Z(t).find(".e-delete").parent()[0]),n.forEach(function(e){Z(t).ejToolbar("disableItem",e)});n=[];("batchediting"!=i.editMode.toLowerCase()||"batchediting"==i.editMode.toLowerCase()&&this._batchEditStarts)&&(-1!==s.indexOf("cancel")&&n.push(Z(t).find(".e-cancel").parent()[0]),-1!==s.indexOf("update")&&n.push(Z(t).find(".e-save").parent()[0])),n.forEach(function(e){Z(t).ejToolbar("enableItem",e)})},_cancelSaveTools:function(){var e,t,i=this,s=i.model,n=i.model.editSettings,a=Z("#"+i._id+"_toolbarItems"),r=s.toolbarSettings.toolbarItems;s.isFromGantt?(a=Z("#"+i._id.replace("ejTreeGrid","")+"_toolbarItems"),e=[],t=[],1==s.readOnly?((t=[]).push(Z(a).find(".e-addnewitem").parent()[0]),t.push(Z(a).find(".e-edititem").parent()[0]),t.push(Z(a).find(".e-edititem").parent()[0])):(n.allowAdding&&-1!==r.indexOf("add")&&e.push(Z(a).find(".e-addnewitem").parent()[0]),n.allowEditing&&-1!==r.indexOf("edit")&&s.allowSelection&&"click"!=n.beginEditAction&&(-1!=i.selectedRowIndex()&&1==s.selectedItems.length?e:t).push(Z(a).find(".e-edititem").parent()[0]),n.allowDeleting&&-1!==r.indexOf("delete")&&s.allowSelection&&(-1!=i.selectedRowIndex()?e:t).push(Z(a).find(".e-deleteitem").parent()[0]),n.allowIndent&&(-1!==r.indexOf("indent")||-1!==r.indexOf("outdent"))&&s.allowSelection&&-1==i.selectedRowIndex()&&(t.push(Z(a).find(".e-indent").parent()[0]),t.push(Z(a).find(".e-outdent").parent()[0])),Z(a).ejToolbar("enableItem",e),-1!==r.indexOf("cancel")&&t.push(Z(a).find(".e-cancel").parent()[0]),-1!==r.indexOf("update")&&t.push(Z(a).find(".e-saveitem").parent()[0])),t.forEach(function(e){Z(a).ejToolbar("disableItem",e)})):(e=[],t=[],n.allowAdding?-1!==r.indexOf("add")&&e.push(Z(a).find(".e-addnew").parent()[0]):t.push(Z(a).find(".e-addnew").parent()[0]),n.allowEditing&&-1!==r.indexOf("edit")?-1!=i.selectedRowIndex()&&s.allowSelection&&(1==s.selectedItems.length||i._checkboxSelection)&&"click"!=n.beginEditAction?e.push(Z(a).find(".e-edit").parent()[0]):Z(a).find(".e-edit").parent("li").hasClass("e-disable")||t.push(Z(a).find(".e-edit").parent()[0]):t.push(Z(a).find(".e-edit").parent()[0]),n.allowDeleting&&-1!==r.indexOf("delete")?(i._checkboxSelection||-1!=i.selectedRowIndex()&&s.allowSelection)&&0<s.selectedItems.length?e.push(Z(a).find(".e-delete").parent()[0]):Z(a).find(".e-delete").parent("li").hasClass("e-disable")||t.push(Z(a).find(".e-delete").parent()[0]):t.push(Z(a).find(".e-delete").parent()[0]),i._getParentRecords(s.updatedRecords,i).length<=0?(-1===r.indexOf("expandAll")||Z(a).find(".e-expandall").parent("li").hasClass("e-disable")||t.push(Z(a).find(".e-expandall").parent()[0]),-1===r.indexOf("collapseAll")||Z(a).find(".e-collapseall").parent("li").hasClass("e-disable")||t.push(Z(a).find(".e-collapseall").parent()[0])):(-1!==r.indexOf("expandAll")&&e.push(Z(a).find(".e-expandall").parent()[0]),-1!==r.indexOf("collapseAll")&&e.push(Z(a).find(".e-collapseall").parent()[0])),"click"==n.beginEditAction&&("click"!=n.beginEditAction||s.isEdit)||("batchediting"!=n.editMode.toLowerCase()||"batchediting"==n.editMode.toLowerCase()&&!i._batchEditStarts?(-1===r.indexOf("cancel")||Z(a).find(".e-cancel").parent("li").hasClass("e-disable")||t.push(Z(a).find(".e-cancel").parent()[0]),-1===r.indexOf("update")||Z(a).find(".e-save").parent("li").hasClass("e-disable")||t.push(Z(a).find(".e-save").parent()[0])):"batchediting"==n.editMode.toLowerCase()&&i._batchEditStarts&&(-1!==r.indexOf("cancel")&&Z(a).find(".e-cancel").parent("li").hasClass("e-disable")&&e.push(Z(a).find(".e-cancel").parent()[0]),-1!==r.indexOf("update")&&Z(a).find(".e-save").parent("li").hasClass("e-disable")&&e.push(Z(a).find(".e-save").parent()[0]))),t.forEach(function(e){Z(a).ejToolbar("disableItem",e)}),e.forEach(function(e){Z(a).ejToolbar("enableItem",e)}))},_checkIsEmptyRow:function(e){for(var t=this.model.columns,i=0;i<t.length;i++){var s=this._getCustomCellValue(e,t[i].field);if(" "!==s&&!J.isNullOrUndefined(s)&&""!==s&&!1!==s)return!1}return!0},_beginEdit:function(){this._trigger("beginEdit",{}),this._isinBeginEdit=!0},_endEdit:function(){this._isinBeginEdit=!1;var e=this.selectedRowIndex();J.TreeGrid.getRowByIndex(this,e);if(!this.editFormValidate())return!0;Z("tr").hasClass("e-addedrow")||Z("tr").hasClass("e-rowedit")?this.saveRow():this.saveCell()},_refreshTreeGridOnExpandCollapseAll:function(e){var t,i=this,s=this.model;if(s.enableVirtualization)s.enableAltRow&&i.updateAltRow(),i.sendDataRenderingRequest(e),s.allowTextWrap?(0<i._$frozenTableContent.length&&i._updateRowHeight(),i._setScrollTop(e.requestType),i.updateHeight(),i.getScrollElement().hasClass("e-scroller")&&i.getScrollElement().ejScroller("refresh")):(i._setScrollTop(),i.updateHeight());else{if(s.allowPaging&&((t={}).totalRecordsCount=this.getExpandedRecords(s.updatedRecords).length,i.getPager().ejPager("option",t).ejPager("refreshPager"),e=this.getPager().ejPager("model"),i._currentPage(e.currentPage),t.requestType="paging",i.processBindings(t)),i._isRefreshAddedRecord)return i.processBindings(),this.renderRecords(),void(i._isRefreshAddedRecord=!1);s.allowTextWrap&&0<i._$frozenTableContent.length?(i._updateRowHeight(),i.getScrollElement().ejScroller("refresh"),t=i.getScrollElement().ejScroller("model.scrollTop"),i._getFrozenScrollElement().scrollTop(t)):i.updateHeight(),s.enableAltRow&&0<s.currentViewData.length&&J.TreeGrid.updateAltRow(i,i.model.currentViewData[0],0,0)}},_expandCollapseInnerLevelRecord:function(e,t){for(var i=e.childRecords.length,s={},n=0;n<i;n++)if(e.childRecords[n].hasChildRecords&&(s.data=e.childRecords[n],s.expanded=t,s.recordIndex=this.model.updatedRecords.indexOf(s.data),s.requestType=J.TreeGrid.Actions.ExpandCollapse,!this._triggerExpandingCollapsingEvent(s)&&(this._expandCollapseInnerLevelRecord(e.childRecords[n],t),e.childRecords[n].expanded!=t)))if(this._isLoadonDemand&&!e.childRecords[n].isChildRetrieved){if(this._isInExpandCollapseAll=!0,s.requestType=J.TreeGrid.Actions.ExpandCollapse,!J.TreeGrid.expandRowsonDemand(this,e.childRecords[n],s))return!0;this._allParentItems.splice(this._allParentItems.indexOf(e.childRecords[n]),1),e.childRecords[n].expanded=!1}else J.TreeGrid.sendExpandCollapseRequest(this,s)},_expandParentLevelRecord:function(e,t){var i={},s=this.getExpandStatus(e);e.expanded&&s||(i.data=e,i.expanded=t,i.recordIndex=this.model.updatedRecords.indexOf(e),this._triggerExpandingCollapsingEvent(i)||J.TreeGrid.sendExpandCollapseRequest(this,i),i.data.parentItem&&this._expandParentLevelRecord(i.data.parentItem,t))},expandAtLevel:function(e){var t,i,s=this,n=s.model,a={};if(!s._isHierarchyFiltering)if(n.allowPaging&&n.pageSettings.pageSizeMode==J.TreeGrid.PageSizeMode.Root&&n.enableVirtualization)s._expandCollapseSettings.atLevel="expandAtLevel",s._expandCollapseSettings.level=e,s._expandCollapsePages=[],s._isInExpandCollapseAll=!0,s._expandPageLevelData(),a.requestType=J.TreeGrid.Actions.ExpandCollapse,0<n.flatRecords.length&&s._refreshTreeGridOnExpandCollapseAll(a),s._isInExpandCollapseAll=!1,s.updateHeight();else{i=s._getParentRecords(s.model.updatedRecords,s);for(var r=0;r<i.length;r++)if((t=i[r]).level==e){if(a.data=t,a.expanded=!0,a.recordIndex=n.updatedRecords.indexOf(t),s._isLoadonDemand&&!t.isChildRetrieved){if(a.recordLevel=e,a.isExpandingParticularLevelParent=!0,a.requestType=J.TreeGrid.Actions.ExpandCollapse,J.TreeGrid.expandRowsonDemand(s,t,a)){s._allParentItems.splice(s._allParentItems.indexOf(t),1),t.expanded=!1;continue}return}s._triggerExpandingCollapsingEvent(a)||J.TreeGrid.sendExpandCollapseRequest(s,a),t.parentItem&&s._expandParentLevelRecord(t.parentItem,a.expanded),t.hasChildRecords&&s._expandCollapseInnerLevelRecord(t,!1)}n.allowPaging&&!n.enableVirtualization&&(J.isNullOrUndefined(s.getPager())||s.gotoPage())}},collapseAtLevel:function(e){var t,i=this,s={},n=i.model;if(!i._isHierarchyFiltering)if(n.allowPaging&&n.pageSettings.pageSizeMode==J.TreeGrid.PageSizeMode.Root&&n.enableVirtualization)i._expandCollapseSettings.atLevel="collapseAtLevel",i._expandCollapseSettings.level=e,i._expandCollapsePages=[],i._isInExpandCollapseAll=!0,i._collapsePageLevelData(),s.requestType=J.TreeGrid.Actions.ExpandCollapse,0<n.flatRecords.length&&i._refreshTreeGridOnExpandCollapseAll(s),i._isInExpandCollapseAll=!1,i.updateHeight();else{t=i._getParentRecords(n.updatedRecords,i);for(var a,r=0;r<t.length;r++)(a=t[r]).level==e&&a.expanded&&i.getExpandStatus(a)&&(s.data=a,s.expanded=!1,s.recordIndex=n.updatedRecords.indexOf(a),i._triggerExpandingCollapsingEvent(s)||J.TreeGrid.sendExpandCollapseRequest(i,s));n.allowPaging&&!n.enableVirtualization&&(J.isNullOrUndefined(i.getPager())||i.gotoPage())}},_collapsePageLevelData:function(){var e,t,i=this,s={},n=i.model,a=i._expandCollapseSettings.level,r=i._getParentRecords(i._updatedPageData,i),o=r.length,l=i._currentPage();-1==Z.inArray(l,i._expandCollapsePages)&&i._expandCollapsePages.push(l);for(var d=0;d<o;d++)t=r[d],e=i.getExpandStatus(t),t&&t.level==a&&(s.data=t,s.recordIndex=n.updatedRecords.indexOf(t),s.expanded=!1,i._triggerExpandingCollapsingEvent(s)||(J.TreeGrid.sendExpandCollapseRequest(i,s),e||i._expandParentLevelRecord(t.parentItem,!0)))},_expandPageLevelData:function(){var e,t=this,i={},s=t.model,n=t._expandCollapseSettings.level,a=t._getParentRecords(t._updatedPageData,t),r=a.length,o=t._currentPage();-1==Z.inArray(o,t._expandCollapsePages)&&t._expandCollapsePages.push(o);for(var l=0;l<r;l++)(e=a[l]).level==n&&(i.data=e,i.expanded=!0,i.recordIndex=s.updatedRecords.indexOf(e),t._triggerExpandingCollapsingEvent(i)||(J.TreeGrid.sendExpandCollapseRequest(t,i),e.parentItem&&t._expandParentLevelRecord(e.parentItem,i.expanded),e.hasChildRecords&&t._expandCollapseInnerLevelRecord(e,!1)))},expandCollapseRow:function(e){var t,i,s={};e=parseInt(e),(i=this.model.allowPaging?this.getUpdatedRecords():this.model.updatedRecords).length>e&&0<=e&&(t=i[e]).hasChildRecords&&((s.data=t).expanded?s.expanded=!1:s.expanded=!0,J.TreeGrid.sendExpandCollapseRequest(this,s))},expandAll:function(){var e=this,t=e.model,i={};if(!e.editFormValidate())return!0;e._expandCollapseSettings.state="expandAll",e._expandCollapseSettings.atLevel="",e._expandCollapseSettings.level=0,e._expandCollapsePages=[],e._isRowEdit?e.cancelRowEditCell():e.model.isEdit&&e.cancelEditCell(),i.requestType=J.TreeGrid.Actions.ExpandCollapse,e._isInExpandCollapseAll=!0,e._expandAllData(),0<t.flatRecords.length&&e._refreshTreeGridOnExpandCollapseAll(i),e._isInExpandCollapseAll=!1,e.updateHeight()},_expandAllData:function(){var e,t=this,i=t.model,s=0,n={};if(n.requestType=J.TreeGrid.Actions.ExpandCollapse,i.allowPaging&&i.pageSettings.pageSizeMode==J.TreeGrid.PageSizeMode.Root&&i.enableVirtualization){var a=i.pageSettings.pageSize,r=t._currentPage(),o=a*r,a=a*(r-1);for(t._expandCollapsePages.push(r),s=a;s<o;s++)if(e=(t._isHierarchyFiltering?t._filterParentRecords:t.model.parentRecords)[s],e&&(n.data=e,n.recordIndex=i.updatedRecords.indexOf(e),n.expanded=!0,e.hasChildRecords&&!t._triggerExpandingCollapsingEvent(n))){if(t._expandCollapseInnerLevelRecord(e,n.expanded))return;e.expanded!=n.expanded&&J.TreeGrid.sendExpandCollapseRequest(t,n)}}else for(var l=t._isHierarchyFiltering?t._filterParentRecords:t.model.parentRecords,s=0;s<l.length;s++)if(e=l[s],n.data=e,n.recordIndex=i.updatedRecords.indexOf(e),n.expanded=!0,e.hasChildRecords&&!t._triggerExpandingCollapsingEvent(n))if(t._isLoadonDemand&&!e.isChildRetrieved){if(t._isInExpandCollapseAll=!0,!J.TreeGrid.expandRowsonDemand(t,e,n))return;t._allParentItems.splice(t._allParentItems.indexOf(e),1),e.expanded=!1}else{if(t._expandCollapseInnerLevelRecord(e,n.expanded))return;e.expanded!=n.expanded&&J.TreeGrid.sendExpandCollapseRequest(t,n)}},_refreshToolBar:function(){Z("#"+this._id+"_toolbarItems").find("li").removeClass("e-hover")},_renderToolbar:function(){var e=this.model,t=this.element;e.isFromGantt||(this.model.toolbarSettings.showToolbar&&t.append(this._renderToolbarTemplate()),this.model.isResponsive&&Z("#"+this._id+"_toolbarItems").addClass("e-treegridadaptivetoolbar"))},_renderToolbarTemplate:function(){var e,t=this,i=t.model,s=J.buildTag("div.e-treegridtoolbar#"+t._id+"_toolbarItems","",{height:"36px",border:"1px solid"},{"data-unselectable":"on"});!J.isNullOrUndefined(i.toolbarSettings.toolbarItems)&&i.toolbarSettings.toolbarItems.length&&(e=J.buildTag("ul","",{},{}),t._renderLi(e),s.append(e)),!J.isNullOrUndefined(i.toolbarSettings.customToolbarItems)&&i.toolbarSettings.customToolbarItems.length&&(n=J.buildTag("ul","",{},{}),t._renderCustomLi(n),s.append(n));var n={};return n.click=t._toolBarClick,n.cssClass=t.model.cssClass,n.rtl=!1,n.itemSeparator=!1,n.itemLeave=t._toolbarItemLeave,n.width=t._gridWidth,n.fields={id:"",tooltipText:"",imageUrl:"",text:"",imageAttributes:"",spriteCSS:"",htmlAttributes:""},s.ejToolbar(n),s.ejToolbar("disableItem",t._disabledToolItems),t._disabledToolItems=Z(),s},_renderCustomLi:function(e){for(var t,i,s,n=this.model.toolbarSettings.customToolbarItems,a=0;a<n.length;a++)(n[a].text||n[a].templateID)&&(n[a].text?(s=n[a].tooltipText||n[a].text,t=J.buildTag("li","",{},{id:this._id+"_"+n[a].text,title:s}),i=J.buildTag("a.e-toolbaricons e-icon e-treegridcustomtoolbaritem","",{}).addClass(n[a].text),t.addClass("e-treegridtoolbaritem")):(s=n[a].tooltipText||n[a].templateID.replace("#",""),t=J.buildTag("li","",{},{id:this._id+"_"+n[a].templateID.replace("#",""),title:s}),i=Z(n[a].templateID).hide().html()),t.html(i),e.append(t))},_renderLi:function(e){for(var t,i=this.model.toolbarSettings.toolbarItems,s=i.length,n=0;n<s;n++)t=J.buildTag("li.e-treegridtoolbaritem","",{},{id:this._id+"_"+i[n]}),this._renderLiContent(t,i[n]),e.append(t)},_renderLiContent:function(e,t){var i=this.model.selectionSettings.selectionMode,s=this.selectedRowIndex();this.model.editSettings;switch(t){case"add":c=J.buildTag("a.e-addnew e-toolbaricons e-icon e-treegrid-add","",{});t=this._toolboxTooltipTexts.addTool;e.attr("title",t),this.model.editSettings.allowAdding||this._disabledToolItems.push(e.get(0));break;case"edit":c=J.buildTag("a.e-edit e-toolbaricons e-icon e-treegrid-edit","",{});var n=this._toolboxTooltipTexts.editTool;e.attr("title",n),this.model.editSettings.allowEditing&&-1!=s&&(-1==s||"cell"!=i)&&this.model.allowSelection&&"click"!=this.model.editSettings.beginEditAction||this._disabledToolItems.push(e.get(0));break;case"delete":n=this._toolboxTooltipTexts.deleteTool;e.attr("title",n),c=J.buildTag("a.e-delete e-toolbaricons e-icon e-treegrid-delete","",{}),this.model.editSettings.allowDeleting&&-1!=s&&(-1==s||"cell"!=i)&&this.model.allowSelection||this._disabledToolItems.push(e.get(0));break;case"update":var a=this._toolboxTooltipTexts.updateTool;e.attr("title",a),c=J.buildTag("a.e-save e-toolbaricons e-icon e-treegrid-save e-disabletool","",{}),this._disabledToolItems.push(e.get(0));break;case"cancel":a=this._toolboxTooltipTexts.cancelTool;e.attr("title",a),c=J.buildTag("a.e-cancel e-toolbaricons e-icon e-treegrid-cancel e-disabletool","",{}),this._disabledToolItems.push(e.get(0));break;case"expandAll":var r=this._toolboxTooltipTexts.expandAllTool;e.attr("title",r),u=J.buildTag("a.e-expandall e-toolbaricons e-icon e-treegrid-expandall","",{},{}),e.append(u);break;case"collapseAll":r=this._toolboxTooltipTexts.collapseAllTool;e.attr("title",r),u=J.buildTag("a.e-collapseall e-toolbaricons e-icon e-treegrid-collapseall","",{},{}),e.append(u);break;case"pdfExport":var o=this._toolboxTooltipTexts.pdfExportTool;e.attr("title",o),u=J.buildTag("a.e-pdfIcon e-toolbaricons e-icon","",{},{}),e.append(u);break;case"excelExport":var l=this._toolboxTooltipTexts.excelExportTool;e.attr("title",l),u=J.buildTag("a.e-excelIcon e-toolbaricons e-icon","",{},{}),e.append(u);break;case"print":var d=this._toolboxTooltipTexts.printTool;e.attr("title",d),u=J.buildTag("a.e-printIcon e-toolbaricons e-icon","",{},{}),e.append(u);break;case"search":var o=this._toolboxTooltipTexts.searchTool,h=this,l=h.model.searchSettings.key,c=J.buildTag("a.e-searchitem e-toolbaricons e-disabletool e-icon e-searchfind","",{position:"absolute",padding:"4px","padding-left":"7px"}),d=J.buildTag("div.e-filterdiv e-searchinputdiv","",{display:"inline-table",width:"83%"}),u=J.buildTag("input.e-ejinputtext e-searchinput","",{width:"100%"},{type:"text",placeholder:o,value:l}),l=J.buildTag("span.e-searchcancel e-cancel e-icon e-hide e-spanstyle","",{right:"1%","padding-top":"0px",top:"0px"});e.attr("title",o),e.addClass("e-search"),d.append(u).append(l),e.append(d),e.css({width:"172px"}),this.model.allowSearching=!0,u.keydown(Z.proxy(this._keyDown,this)).focus(function(){h.element.find("span.e-searchcancel").removeClass("e-hide")}),c.click(Z.proxy(this._keyDown,this)),d.focusout(function(){""==h.element.find("input.e-searchinput").val()&&Z("span.e-searchcancel").addClass("e-hide")}),l.click(function(){h.element.find("input.e-searchinput").val(""),Z(this).addClass("e-hide"),h.search("")}).mouseover(function(){this.style.cursor="pointer"})}e.append(c)},_updateToolbarItems:function(){var e=this.model,t=(e.toolbarSettings.toolbarItems,e.editSettings),t=(Z("#"+this._id+"_toolbarItems"),this.selectedRowIndex(),t.editMode);"cellediting"==t.toLowerCase()||"dialogediting"==t.toLowerCase()?this._isRowEdit?this.cancelRowEditCell():e.isEdit&&this.cancelEditCell():"rowediting"==t.toLowerCase()&&this.cancelRowEditCell(),this._cancelSaveTools()},_renderAfterColumnInitialize:function(){this.element.append(this._renderGridHeader())},filterEditType:function(e,t,i){this.model;var s=e.field.split(".").join("");switch(J.isNullOrUndefined(e.filterEditType)&&(e.filterEditType=e.editType),e.filterEditType){case"stringedit":t.html(J.buildTag("input.e-ejinputtext e-filtertext e-field e-filterwidth","",{},{id:this._id+"_"+s+"_filterbarcell",name:e.field,value:i}));break;case"numericedit":var n=J.buildTag("input.e-numerictextbox e-field","",{width:e.width-15},{type:"text",id:this._id+"_"+s+"_filterbarcell",name:e.field,value:i});t.append(n);break;case"datepicker":case"datetimepicker":n=J.buildTag("input.e-"+e.filterEditType+" e-field","",{},{type:"text",id:this._id+"_"+s+"_filterbarcell",name:e.field,value:i});t.append(n);break;case"booleanedit":case"dropdownedit":i=J.buildTag("input.e-field e-dropdownlist e-field","",{},{type:"text",id:this._id+"_"+s+"_filterbarcell",name:e.field,value:i});t.append(i)}},_filteringElements:function(e){var t,i,s,n,a,r,o,l=this,d=l.model,h=!1,c={};d.selectedItem;"filtering"==e.requestType&&(i=document.getElementById(l._id+"_filterBar"+e.fieldname.split(".").join(""))),a=J.TreeGrid.getColumnByField(d.columns,e.fieldname),s=(t=Z(i).find("input,select")).length;for(var u=0;u<s;u++){c={};var p=(n=t.eq(u)).closest("div").width()-2;if(n.hasClass("e-numerictextbox")){var m=p;v=n.val(),c.width=m,c.showSpinButton=!0,c.cssClass=d.cssClass,c.locale=d.locale,c.height=28,c.focusIn=Z.proxy(l._cancelEditState,l,n),n[0].id.replace(l._id,""),"immediate"==d.filterSettings.filterBarMode?c.change=Z.proxy(l._filterBarHandler,l,n):c.change=null;var g=n.data("ejNumericTextbox");J.isNullOrUndefined(g)&&(v.length?c.value=parseFloat(v):c.value=null),r=J.TreeGrid.getColumnByField(l.model.columns,n.prop("name")),J.isNullOrUndefined(r)||J.isNullOrUndefined(r.editParams)||Z.extend(c,r.editParams),n.ejNumericTextbox(c),n.prop("name",n.prop("name").replace(l._id,""))}else if(n.hasClass("e-datepicker"))m=p,c.width=m,c.cssClass=d.cssClass,c.dateFormat=d.dateFormat,c.locale=d.locale,c.height=28,c.focusIn=Z.proxy(l._cancelEditState,l,n),n[0].id.replace(l._id,""),"immediate"==d.filterSettings.filterBarMode?c.select=Z.proxy(l._filterBarHandler,l,n):c.select=null,(a=J.TreeGrid.getColumnByField(l.model.columns,n.prop("name"))).format!==P&&0<a.format.length&&(o=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(a.format),c.dateFormat=o[2]),J.isNullOrUndefined(a.editParams)||Z.extend(c,a.editParams),-1!=d.dateFormat.toLowerCase().indexOf("hh")?n.ejDateTimePicker(c):n.ejDatePicker(c),l._preventDoubleClick(a);else if(n.hasClass("e-datetimepicker"))c={width:m=p,rtl:d.rtl,locale:d.locale,cssClass:d.cssClass,showButton:!1,focusIn:Z.proxy(l._cancelEditState,l,n),height:28},"immediate"==d.filterSettings.filterBarMode?c.close=Z.proxy(l._filterBarHandler,l,n):c.close=null,(a=J.TreeGrid.getColumnByField(l.model.columns,n.prop("name"))).format!==P&&0<a.format.length&&(o=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(a.format),c.dateTimeFormat=o[2]),J.isNullOrUndefined(a.editParams)||Z.extend(c,a.editParams),n.ejDateTimePicker(c),l._preventDoubleClick(a);else if(n.hasClass("e-dropdownlist")){var f,_=(a=J.TreeGrid.getColumnByField(d.columns,e.fieldname)).editParams&&a.editParams.fields&&a.editParams.fields.text?a.editParams.fields.text:"text",v=a.editParams&&a.editParams.fields&&a.editParams.fields.value?a.editParams.fields.value:"value",b=[];a.dropdownData&&0<a.dropdownData.length?b=Z.extend(!0,[],a.dropdownData):"booleanedit"==a.editType?(b=[],(f={})[_]=l._trueText,f[v]="true",b.push(f),(y={})[_]=l._falseText,y[v]="false",b.push(y)):b=l._dropDownArrayCollection(a,e.fieldname),(g={})[_]=l._dropDownListClearText,g[v]=l._dropDownListClearText,b.splice(0,0,g),(f=a.allowFilteringBlankContent==P||a.allowFilteringBlankContent)&&((w={})[_]=l._dropDownListBlanksText,w[v]=l._dropDownListBlanksText,b.push(w));var x,y={},g=n.val(),w=Z("#"+n[0].id).data("ejDropDownList");w&&(x=Z(w.popupList)),y.width=p,y.showCheckbox=!1,y.dataSource=b,y.height=28,y.popupShown=Z.proxy(l._cancelEditState,l,n),y.fields={text:_,value:v},"immediate"==d.filterSettings.filterBarMode?y.popupHide=Z.proxy(l._filterBarHandler,l,n):y.popupHide=null,n.ejDropDownList(y),x&&(x.find(".e-ul :first-child").find(".e-ddltxt").css("font-style","italic"),f&&x.find(".e-ul :last-child").find(".e-ddltxt").css("font-style","italic")),g==l._dropDownListClearText&&(g=""),n.ejDropDownList("selectItemByValue",g),l._preventDoubleClick(a)}else switch(n.prop("tagName")){case"INPUT":n.width(p-4),"stringedit"==a.filterEditType&&l._on(Z("#"+l._id+"_"+a.field.split(".").join("")+"_filterbarcell"),"focus",l._cancelEditState);break;case"SELECT":n.width(p).height(15)}n.is(":disabled")||h||n.is(":hidden")&&"object"!=typeof n.data("ejDropDownList")||l._isEnterKeyPressed||(h=!0)}},_dropDownArrayCollection:function(e,t){var i=this.model,s=t,t=[],n=[],a=[],e=e.editType,t=Z.map(i.flatRecords,function(e){if(!J.isNullOrUndefined(e.item[s]))return e.item[s]});return Z.each(t,function(e,t){t=Z.trim(t),-1===Z.inArray(t,n)&&n.push(t)}),"numericedit"!=e?n.sort(this.stringCompare):n=n.sort(function(e,t){return e-t}),Z.each(n,function(e,t){a.push({text:t,value:t})}),a},stringCompare:function(e,t){var s=[],n=[];for(e.replace(/(\d+)|(\D+)/g,function(e,t,i){s.push([t||1/0,i||""])}),t.replace(/(\d+)|(\D+)/g,function(e,t,i){n.push([t||1/0,i||""])});s.length&&n.length;){var i=s.shift(),a=n.shift(),a=i[0]-a[0]||i[1].localeCompare(a[1]);if(a)return a}return s.length-n.length},_preventDoubleClick:function(e){var t=this,e=Z("#"+t._id+"_"+e.field.split(".").join("")+"_filterbarcell_popup");0!=e.length&&Z(e).on("click",function(e){J.isTouchDevice()?t._off(t.element,"doubletap ",".e-gridcontent",t._editdblClickHandler):t._off(t.element,"dblclick ",".e-gridcontent",t._editdblClickHandler),setTimeout(function(){J.isTouchDevice()?t._on(t.element,"doubletap ",".e-gridcontent",t._editdblClickHandler):t._on(t.element,"dblclick ",".e-gridcontent",t._editdblClickHandler)},300)})},_renderFiltering:function(e,t){var i=this.model,s=i.columns,n=i.filterSettings.filteredColumns,a=J.buildTag("tr.e-filterbar","",{},{});if(this.model.allowFiltering){Z.each(s,function(e,t){J.isNullOrUndefined(t.allowFiltering)&&(t.allowFiltering=!0)});var r=!1;if(Z.each(s,function(e,t){if(1==t.allowFiltering)return!(r=!0)}),r)for(var o=0;o<e.length;o++){var l=J.buildTag("th.e-filterbarcell .e-editValue","",{},{});!1===e[o].visible&&l.addClass("e-hide");var d=J.buildTag("div.e-filterdiv","",{},{id:this._id+"_filterBar"+e[o].field.split(".").join("")});if(a.append(l.append(d)),0!=e[o].allowFiltering){var h="";if(0<n.length)for(var c=0;c<n.length;c++)e[o].field==n[c].field&&(h=n[c].value);this.filterEditType(e[o],d,h);l=J.buildTag("span.e-cancel e-icon e-hide e-spanstyle");d.append(l)}}}return i.showDetailsRow&&i.detailsTemplate&&i.showDetailsRowInfoColumn&&t&&a.append(J.buildTag("th.e-filterbarcell e-detailheadercell",'<div style="width:'+this._detailsColumnWidth+'px;"></div>')),a},_getIndentCol:function(){return J.buildTag("col","",{width:this._detailsColumnWidth+"px"})},_renderGridHeader:function(){var e,t=this,i=t.model,s=(document,J.buildTag("div.e-gridheadercontainer","",{overflow:"hidden"},{"data-unselectable":"on"})),n=i.isFromGantt?J.buildTag("div.e-gridheader#"+t._id+"e-gridheader","",{"border-left-style":"solid","border-left-width":"1px"},""):J.buildTag("div.e-gridheader#"+t._id+"e-gridheader","",{"border-top-style":"solid","border-left-style":"solid","border-right-style":"solid","border-top-width":"1px","border-left-width":"1px","border-right-width":"1px",width:t._gridWidth},"");return 1==i.allowFiltering&&i.filterSettings.filterType==J.TreeGrid.FilterType.FilterBar&&s.addClass("e-headercontent-material-filterbar"),s.addClass("e-headercontent"),t.setGridHeaderContent(n),t._$gridHeaderContainer=s,t._hiddenColumns=[],t._visibleColumns=[],t.columnsWidthCollection=[],t._removePrevHeaderTemplates(),0<this._frozenColumnsLength?(s.addClass("e-frozen-header-container"),e=J.buildTag("div.e-frozenheaderdiv#e-frozenheaderdiv"+t._id,this._renderGridHeaderInternalDesign(i.columns.slice(0,this._frozenColumnsLength),!1,!0)),1==i.allowFiltering&&i.filterSettings.filterType==J.TreeGrid.FilterType.FilterBar&&e.addClass("e-filterbar-header-material"),i.showStackedHeader&&0<i.stackedHeaderRows.length&&e.addClass("e-stacked-header-material"),t=J.buildTag("div.e-movableheader#e-movableheader"+t._id,J.buildTag("div.e-movableheaderdiv#e-movableheaderdiv"+t._id,this._renderGridHeaderInternalDesign(this.model.columns.slice(this._frozenColumnsLength),!0))),s.append(e).append(t)):(s.append(this._renderGridHeaderInternalDesign(this.model.columns,!0)),s.removeClass("e-frozen-header-container")),n.html(s),this.setGridHeaderTable(this.getHeaderContent().find(".e-table")),n},_removePrevHeaderTemplates:function(){Z("[id^='"+this._id+"'][type='text/x-treegridheadertemplate']").remove(),this.headerAngularTemplate&&(this.headerAngularTemplate=null)},getPager:function(){return this._gridPager},setTreeGridPager:function(e){this._gridPager=e},_renderGridPager:function(){var e=this,t=Z(document.createElement("div")),i={},s=e.model.pageSettings;return t.attr({id:this._id+"Pager"}),s.change=Z.proxy(e._pagerClickHandler,e),J.isNullOrUndefined(s.totalRecordsCount)&&(s.totalRecordsCount=e._isLoadonDemand?e._pageRecordCountOnDemand:s.totalRecordsCount),Z.extend(i,s),i.locale=e.model.locale,delete i.template,e._currentPage()<0&&e._currentPage(1),i.currentPage=this._prevPageNo=e._currentPage(),i.masterObject=e,i.cssClass=e.model.cssClass,e.setTreeGridPager(t),t.ejPager(i),t.ejPager("refreshPager"),i=t.ejPager("model"),s.totalPages=i.totalPages,e._currentPage()!==i.currentPage&&e._currentPage(i.currentPage),!J.isNullOrUndefined(s.template)&&0<s.template.length&&(t.children().remove(),i=J.buildTag("div.e-pagercontainer"),s=this._createTemplateElement(s,!0),i.append(s.innerHTML),t.append(i)),t},_addHeaderCheckboxTemplate:function(){var e=this.model,t=e.flatRecords.length,e=e.selectedItems.length,e=0<t&&t==e?'<div><span class="e-chkbox-wrap e-widget" style="margin-left:5px;padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-act"><span class="e-checkbox e-checkmark e-chk-image e-icon e-headerCheckbox"id ='+this._id+"_headerCheckbox></span></span></div></span></div>":e<t&&0<e?'<div><span class="e-chkbox-wrap e-widget" style="margin-left:5px;padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-indeter"><span class="e-checkbox e-stop e-chk-image e-icon e-headerCheckbox"id ='+this._id+"_headerCheckbox></span></span></div></span></div>":'<div><span class="e-chkbox-wrap e-widget" style="margin-left:5px;padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-inact"><span class="e-checkbox e-chk-image e-icon e-headerCheckbox"id ='+this._id+"_headerCheckbox></span></span></div></span></div>";return e},_createStackedRow:function(e,t){for(var i,s,n,a,r,o,l,d,h=J.buildTag("tr.e-columnheader e-stackedHeaderRow"),c=[],u=[],p=[],m=[],g=this.model,f=g.columns.length,_=e.stackedHeaderColumns,v=[],b=g.scrollSettings.frozenColumns,x=[],y=0,w=0,C=0,S=0;S<f;S++)if(0!=(i=g.columns[S]).visible||i==g.columns[g.treeColumnIndex]&&0==i.visible){for(var T="",R="",k="",O="",D=0;D<_.length;D++)s=Array.isArray(_[D].column)?_[D].column:Z.map(_[D].column.split(","),Z.trim),n="e-row"+Z.inArray(e,g.stackedHeaderRows)+"-column"+D,-1!=Z.inArray(i.field,s)&&(T=_[D].headerText,R=_[D].cssClass,k=_[D].textAlign,O=_[D].tooltip?" e-stackedtooltip "+n:"");c.push(T),u.push(R),p.push(k),m.push(O)}for(var I=0;I<c.length;I++){for(o=I+(r=1);o<c.length&&c[I]==c[o];o++)r++;v.push({spanCount:r,headerText:c[I],cssClass:u[I],txtAlign:p[I],tooltip:m[I]}),I+=r-1}if(0<b){for(I=0;I<f;I++)D=g.columns[I],I<b&&0==D.visible&&C++;for(y=b-C;0<y;)a=v[w].spanCount,v[w].spanCount<y?(x.push(v[w]),t?w++:v.splice(w,1)):v[w].spanCount>y?(v[w].spanCount=v[w].spanCount-y,t&&x.push({spanCount:y,headerText:v[w].headerText})):(x.push(v[w]),t||v.splice(w,1)),y-=a;t&&(v=x)}for(S=0;S<v.length;S++)l=J.buildTag("th.e-headercell e-stackedHeaderCell","",{},{colspan:v[S].spanCount}),d=J.buildTag("div.e-headercelldiv  e-default"+v[S].tooltip,v[S].headerText,{textAlign:v[S].txtAlign},{}),l.append(d),h.append(l),v[S].cssClass!=P&&l.addClass(v[S].cssClass),(g.allowColumnResize||g.allowColumnReordering)&&l.addClass("e-resizer");return g.detailsTemplate&&g.showDetailsRow&&g.showDetailsRowInfoColumn&&1!=t&&h.append(J.buildTag("th.e-headercell e-detailheadercell","<div></div>")),h},getHeaderCell:function(e){var t=this.model.columns.indexOf(this.getColumnByField(e)),e=null;return J.isNullOrUndefined(t)||-1==t||(e=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").eq(t)),e},_createHeaderTemplateElement:function(e){var t=(e.field||"")+Z.inArray(e,this.model.columns)+"_HeaderTemplate",i=e.headerTemplateID,e=/^#([\w-]*)/.exec(i),t={name:"SCRIPT",type:"text/x-treegridheadertemplate",text:i,id:(this._id+t).replace(/(\\|[^0-9A-z-_])/g,"")},i=e&&e[1]?document.getElementById(e[1]):(/^<script/i.test(i)?Z(i):J.buildTag(t.name,t.text)).get(0);return i.id=i.id||t.id,i.type=i.type||t.type,Z("#"+i.id).remove(),Z("body").append(i),i},_getColWidth:function(e,t){var i=this.model,s=i.columns;"msie"==J.browserInfo().name&&i.isFromGantt&&!J.isNullOrUndefined(s[e].width)&&parseInt(s[e].width)<42&&(e=35-(43-parseInt(s[e].width)),t.hasClass("e-column-menu-padding")&&t.removeClass("e-column-menu-padding"),t.css("padding-right",e+"px"))},_renderGridHeaderInternalDesign:function(e,t,i){var s,n,a,r,o,l=this,d=l.model,h=document,c=J.buildTag("table.e-table e-zerospace"),u=J.buildTag("thead"),p=(J.buildTag("tbody.e-hide"),J.buildTag("tr.e-columnheader")),m=Z(h.createElement("colgroup")),g=Z(h.createElement("tr")),f=0,_=e.length,v=d.stackedHeaderRows.length;if((d.allowSorting||d.showColumnChooser||d.allowColumnReordering)&&p.css({cursor:"pointer"}),"wrap"===d.headerTextOverflow?l.element.addClass("e-wrap"):l.element.removeClass("e-wrap"),d.showStackedHeader)for(var b=0;b<v;b++){var x=l._createStackedRow(d.stackedHeaderRows[b],i);u.append(x)}for(;f<_;f++)if(e[f]){var y=e[f].headerTextAlign||e[f].textAlign||J.TextAlign.Left;(d.showColumnChooser||!d.showColumnChooser&&d.allowFiltering&&("menu"==d.filterSettings.filterType||"excel"==d.filterSettings.filterType))&&"checkboxState"!=e[f].field&&(J.isNullOrUndefined(e[f].allowFiltering)||e[f].allowFiltering||l.model.showColumnChooser)?((s=J.buildTag("th.e-headercell","",{},{})).addClass("e-column-menu-padding"),this._getColWidth(f,s)):s=J.buildTag("th.e-headercell","",{},{}),d.allowFiltering&&d.filterSettings.filterType==J.TreeGrid.FilterType.FilterBar&&s.addClass("e-filterbar-material"),n=h.createElement("td"),a=J.buildTag("div.e-headercelldiv","",{"text-align":y},{"data-ej-mappingname":e[f].field,"data-unselectable":"on"}),e[f].clipMode&&e[f].clipMode==J.TreeGrid.ClipMode.Ellipsis&&a.addClass("e-treegridtrimcell"),l._checkboxSelection&&d.selectionSettings.enableSelectAll&&l._checkboxColumnName==e[f].field&&a.append(l._addHeaderCheckboxTemplate()),"checkboxState"==e[f].field&&s.css({cursor:"default"});y=J.buildTag("span",e[f].headerText==P?e[f].headerText=e[f].field:e[f].headerText);if("wrap"==d.headerTextOverflow&&a.addClass("e-textwrapheaderdiv"),a.append(y),s.append(a),l.model.showColumnChooser&&!e[f].nonColumn){var w=J.buildTag("div.e-columnmenu-icon e-icon e-columnicon","",{cursor:"pointer"});"wrap"==d.headerTextOverflow&&w.addClass("e-textwrapcolumnicon"),w.data("isClicked",!1),s.append(w)}else if(!d.showColumnChooser&&d.allowFiltering&&("menu"==d.filterSettings.filterType||"excel"==d.filterSettings.filterType)&&(J.isNullOrUndefined(e[f].allowFiltering)||e[f].allowFiltering)&&"checkboxState"!=e[f].field){if(o=-1!=l._filteredColumnValueID.indexOf(e[f].field)?J.buildTag("div.e-column-filtered-icon e-icon e-filtericon","",{cursor:"pointer"}):J.buildTag("div.e-column-filter-icon e-icon e-filtericon","",{cursor:"pointer"}),l.model.filterSettings.filteredColumns)for(var C=0;C<l.model.filterSettings.filteredColumns.length;C++)l.model.filterSettings.filteredColumns[C].field==e[f].field&&""!=l.model.filterSettings.filteredColumns[C].value.toString()&&(o=J.buildTag("div.e-column-filtered-icon e-icon e-filtericon","",{cursor:"pointer"}));o.data("isClicked",!1),s.append(o)}w=h.createElement("col"),g.append(n),p.append(s),m.append(w),!1===e[f].visible&&e[f]!=d.columns[d.treeColumnIndex]?s.addClass("e-hide")&&Z(w).css("display","none")&&l._hiddenColumns.push(e[f].headerText):(l._visibleColumns.push(e[f].headerText),e[f].visible=!0),!1===e[f].allowSorting&&s.css({cursor:"normal"}),J.isNullOrUndefined(e[f].headerTemplateID)||a.html(l._renderEjTemplate("#"+this._createHeaderTemplateElement(e[f]).id,e[f],0,e[f],"treegridheadertemplate")).parent().addClass("e-headertemplate"),e[f].allowCellSelection==P&&(e[f].allowCellSelection=!0),e[f].showInColumnChooser==P&&(e[f].showInColumnChooser=!0),e[f].width==P&&d.commonWidth!==P?(l.columnsWidthCollection.push(d.commonWidth),e[f].width=d.commonWidth):(l.columnsWidthCollection.push(parseFloat(e[f].width)),e[f].width=parseFloat(e[f].width)),l._fieldColumnNames[e[f].headerText]=e[f].field,l._headerColumnNames[e[f].field]=e[f].headerText}return d.isFromGantt&&l.updateToGanttColumns(),d.showDetailsRow&&d.detailsTemplate&&d.showDetailsRowInfoColumn&&t&&(p.append(J.buildTag("th.e-headercell e-detailheadercell",'<div style="width:'+l._detailsColumnWidth+'px;"></div>',{},{})),m.append(this._getIndentCol())),d.allowFiltering&&!d.isFromGantt&&"filterbar"==d.filterSettings.filterType&&(r=this._renderFiltering(e,t)),u.append(p),r&&u.append(r),c.append(m).append(u),c},_initGridRender:function(){this._addInitTemplate(),this._renderGrid(),this.model.allowColumnResize&&(this._resizer=new J.gridFeatures.gridResize(this))},_summaryRow:function(){var e,t=this,i=t.model;i.showSummaryRow&&(t._createSummaryRow(),(e={}).requestType=J.TreeGrid.Actions.Refresh,t.sendDataRenderingRequest(e),t.updateCollapsedRecordCount(),t._updateWrapRowHeights("header"),t.updateHeight(),!i.allowTextWrap&&"wrap"!=i.headerTextOverflow||t._updateGridContentHeight()),i.showTotalSummary&&(e=Z("#"+t._id+"-footersummaryrow").length,t._createTotalSummaryRow(),0==e&&(t._viewPortHeight=t._viewPortHeight-t._$totalSummaryRowContainer.outerHeight()),i.columnResizeSettings.columnResizeMode!=J.TreeGrid.ColumnResizeMode.FixedColumns||i.isFromGantt||this._updateTableWidth(),this._updateHeaderScrollLeft())},_renderGrid:function(){this._renderGridContent().insertAfter(this.element.children(".e-gridheader"))},_renderFrozenSummary:function(){this._$footerContainer.find("#e-frozenfooterdiv"+this._id+" .e-table colgroup").replaceWith(this._getMetaColGroup()[0]),this._$footerContainer.find("#e-movablefooterdiv"+this._id+" .e-table colgroup").replaceWith(this._getMetaColGroup()[1]),this._$footerContainer.find("#e-frozenfooterdiv"+this._id+" .e-table tbody").html(Z.render[this._id+"_JSONFrozenTemplate"](this._footerSummaryRecord)),this._$footerContainer.find("#e-movablefooterdiv"+this._id+" .e-table tbody").html(Z.render[this._id+"_Template"](this._footerSummaryRecord))},_renderSummaryByFrozenDesign:function(){var e=Z(document.createElement("div")),t=this._getMetaColGroup().find("col"),i={};return i.colgroup1=e.append(J.buildTag("colgroup").append(t.splice(0,this._frozenColumnsLength))).html(),i.colgroup2=e.html(J.buildTag("colgroup").append(t)).html(),Z.templates[this._id+"_FrozenSummaryTemplate"]||this.addFrozenSummaryTemplate(),Z.render[this._id+"_FrozenSummaryTemplate"](i)},_spliceSummaryRows:function(e){this.model;var t=[];e.filter(function(e){e.isSummaryRow||t.push(e)});return t},addFrozenSummaryTemplate:function(){var e="<div class='e-frozenfooterdiv' id='e-frozenfooterdiv"+this._id+"'><table class='e-table e-zerospace' style='width:100%' id='"+this._id+"frozensummarye-table'>{{:colgroup1}}<tbody></tbody></table></div><div class='e-movablefooter' id='e-movablefooter"+this._id+"'><div class='e-movablefooterdiv' id='e-movablefooterdiv"+this._id+"'><table class='e-table e-zerospace' id='"+this._id+"movablesummarye-table'>{{:colgroup2}}<tbody></tbody></table></div></div>",t={};t[this._id+"_FrozenSummaryTemplate"]=e,Z.templates(t)},expandCollapseTotalSummary:function(e){var t=this,i=t.model;if(i.showTotalSummary&&i.collapsibleTotalSummary&&t._footerSummaryRecord[0].summaryExpanded!=e){var s={};s.expanded=e,s.requestType=e?"summaryExpanding":"summaryCollapsing",s.data=t._footerSummaryRecord[0],s.columnName=i.columns[this._summaryColumnIndex].headerText,s.cellValue=J.isNullOrUndefined(s.data)?"":s.data[i.columns[this._summaryColumnIndex].field],s.isFromUserAction=t._isInManualExpandCollapse;var n,a=Z(t.element).find(".e-firstfootersummaryrow"),r=Z(t.element).find(".e-footersummaryrow");if(e){if(t._trigger("expanding",s),s.cancel)return;r.css({display:"table-row"}),a.find(".e-summarytreegridcollapse").removeClass("e-summarytreegridcollapse").addClass("e-summarytreegridexpand"),t._footerSummaryRecord[0].summaryExpanded=!0,(n={}).expanded=e,n.data=t._footerSummaryRecord[0],n.columnName=i.columns[this._summaryColumnIndex].headerText,n.cellValue=J.isNullOrUndefined(s.data)?"":s.data[i.columns[this._summaryColumnIndex].field],n.requestType="summaryExpanded",n.isFromUserAction=t._isInManualExpandCollapse,t._trigger("expanded",n)}else{if(t._trigger("collapsing",s),s.cancel)return;r.css({display:"none"}),a.css({display:"table-row"}),a.find(".e-summarytreegridexpand").removeClass("e-summarytreegridexpand").addClass("e-summarytreegridcollapse"),t._footerSummaryRecord[0].summaryExpanded=!1,(n={}).expanded=e,n.data=t._footerSummaryRecord[0],n.columnName=i.columns[this._summaryColumnIndex].headerText,n.cellValue=J.isNullOrUndefined(s.data)?"":s.data[i.columns[this._summaryColumnIndex].field],n.requestType="summaryCollapsed",n.isFromUserAction=t._isInManualExpandCollapse,t._trigger("collapsed",n)}t._$totalSummaryRowContainer.ejScroller({height:e?i.rowHeight:i.totalSummaryHeight}),t._updateGridContentHeight(),t._updateSummaryHeight()}},_createTotalSummaryRow:function(){var e,t=this,i=t.model,s=(i.flatRecords,i.summaryRows),n=s.length,a=(i.updatedRecords,i.parentRecords,i.columns),r=J.buildTag("tbody");i.totalSummaryHeight=i.totalSummaryHeight<i.rowHeight?i.rowHeight:i.totalSummaryHeight,t._footerSummaryRecord=[],t._footerSummaryRows=[],i.collapsibleTotalSummary&&0!=Z("#"+t._id+"-footersummaryrow").length&&0!=Z("#"+t._id+"-footersummaryrow").find(".e-summarytreegridcollapse").length&&(t._persistCollapseState=!0),Z("#"+t._id+"-footersummaryrow").remove(),e=J.buildTag("div.e-footersummaryrowdiv#"+t._id+"-footersummaryrow","",{overflow:"hidden",cursor:"default"});var o=J.buildTag("div.e-footercontainer#e-footercontainer"+t._id,"",{overflow:"hidden"});t._flatChildRecords=t._spliceSummaryRows(i.updatedRecords);for(var l,d=1;d<=n;d++){for(var h={},c=0;c<a.length;c++)h[a[c].field]="";h=t._createSummaryItem(h,s[d-1]);var u=t._createRecord(h,0);1==d&&(u.isFirstFooterSummary=!0,i.collapsibleTotalSummary&&(u.summaryExpanded=!0)),u.footerSummaryRowRecord=!0,u.index=d,t._footerSummaryRecord.push(u)}t._$footerContainer=o,0<this._frozenColumnsLength?(o.html(this._renderSummaryByFrozenDesign()),this._renderFrozenSummary()):((l=J.buildTag("table.e-table e-zerospace#"+t._id+"summarye-table","",{top:"0px"})).append(t.getContentTable().find("colgroup").clone()).append(r),r.html(Z.render[this._id+"_Template"](t._footerSummaryRecord)),o.append(l)),t._$totalSummaryRowContainer=e,t._$footertableContent=o.find(".e-table"),e.append(o),i.allowPaging?t.element.append(Z("#"+this._id+"Pager").before(e)):t.element.append(e),t._flatChildRecords=[],this._setWidthToFooters(),this._$totalSummaryRowContainer.height()<=i.totalSummaryHeight?(t.isVScroll()&&t._$totalSummaryRowContainer.addClass("e-scrollcss"),i.totalSummaryHeight=this._$totalSummaryRowContainer.height()):t._$totalSummaryRowContainer.ejScroller({height:"auto"==i.sizeSettings.height?0:i.totalSummaryHeight}),"auto"==i.sizeSettings.height&&Z("#"+t._id+"-footersummaryrow").width(t._gridWidth-2),t._updateSummaryTitleColumn(),1==t._persistCollapseState&&(t.expandCollapseTotalSummary(!1),t._persistCollapseState=!1),i.columnResizeSettings.columnResizeMode==J.TreeGrid.ColumnResizeMode.FixedColumns&&this._updateTableWidth()},_getFooterRows:function(){var e=Z();return this.model.showTotalSummary&&this._$footertableContent&&(e=this._$footertableContent.get(0).rows,0<this._frozenColumnsLength&&(e=[e,this._$footertableContent.get(1).rows])),Z(e)},_setWidthToFooters:function(){var e,t=this._gridWidth;0<this._frozenColumnsLength&&(e=this._getFrozenColumnWidth(),this._$totalSummaryRowContainer.find("#e-frozenfooterdiv"+this._id).width(t).next().css("margin-left",e+"px"),this._$totalSummaryRowContainer.find("#e-frozenfooterdiv"+this._id).outerWidth(e).end().find("#e-movablefooterdiv"+this._id).css("width","100%"))},_excludeSummaryRows:function(){var e=Z();this.model;return this.getTreeGridRows()&&0<this.getTreeGridRows().length&&(e=0<this._frozenColumnsLength?[Z(this.getTreeGridRows()[0]).not(".e-summaryrow"),Z(this.getTreeGridRows()[1]).not(".e-summaryrow")]:Z(this.getTreeGridRows()).not(".e-summaryrow")),e},_createSummaryRow:function(e){var t,i=this,s=i.model,n={},a=s.summaryRows,r=a.length,o=s.columns;if(!e||"dragAndDrop"!=e.requestType&&"addNewRow"!=e.requestType&&"sorting"!=e.requestType)t=i._isHierarchyFiltering?i._findFilteredParentRecords(i._flatFilteredRecords):i._parentRecords;else if(t=i._getParentRecords(s.updatedRecords,i),"dragAndDrop"==e.requestType)for(var l=0;l<t.length;l++){var d=[],d=t[l].childRecords.filter(function(e){if(!e.isSummaryRow)return!0});t[l].childRecords=d.slice()}var h=t.length;e&&J.isNullOrUndefined(e.filterCollection)&&(e.filterCollection=[]),s.enableCollapseAll&&s.enableVirtualization&&!e&&(s.updatedRecords=s.flatRecords.slice()),s.updatedRecords=i._spliceSummaryRows(s.updatedRecords),s.flatRecords=i._spliceSummaryRows(s.flatRecords),s.summaryRowRecords=[],i._flatChildRecords=[];for(var c=0;c<h;c++){var u,p=t[c];if(0!=(u=i._getChildRecordsLength(p,s.updatedRecords))){for(var m=1;m<=r;m++){for(var g=0;g<o.length;g++)n[o[g].field]="";n=i._createSummaryItem(n,a[m-1],p);var f=s.updatedRecords.indexOf(p)+u+m,_=i._createRecord(n,f);i._isHierarchyFiltering&&s.enableVirtualization&&(_.isDisplay=!0),i._isSummaryRow=!0,_.level=p.level+1,_.parentItem=p,_.isSummaryRow=!0,_.index=s.flatRecords.length+1,s.enableVirtualization?(i._isHierarchyFiltering&&(s.updatedRecords=i._updateFilterParent),s.updatedRecords.splice(f,0,_),(!e||e&&e.filterCollection)&&s.summaryRowRecords.push(s.updatedRecords[f])):(s.updatedRecords.splice(f,0,_),s.summaryRowRecords.push(s.updatedRecords[f])),f=s.flatRecords.indexOf(p)+u+m,s.flatRecords.splice(f,0,_),p.childRecords.push(_),n={},m==r&&(_.isLastSummary=!0)}i._flatChildRecords=[]}}i._isSummaryRow=!1,i._summaryRowsCount=t.length,s.enableVirtualization&&(s.updatedRecords=i.getExpandedRecords(s.updatedRecords),s.enableAltRow&&i.updateAltRow()),this._updateCurrentViewData()},_getInnerParentRecords:function(e,t,i){e.childRecords.length;for(var s=0;s<e.childRecords.length;s++)e.childRecords[s].hasChildRecords&&(-1==i.indexOf(e.childRecords[s])&&i.push(e.childRecords[s]),t._getInnerParentRecords(e.childRecords[s],t,i))},_getParentRecords:function(e,t,i){for(var s,n=e.length,a=[],r=0;r<n;r++)s=e[r],i?J.isNullOrUndefined(s.parentItem)&&a.push(s):s.childRecords&&0<s.childRecords.length?t.model.enableVirtualization||t.model.allowPaging&&t.model.showSummaryRow?(-1==a.indexOf(s)&&a.push(s),t._getInnerParentRecords(s,t,a)):a.push(s):t._isLoadonDemand&&s.hasChildRecords&&-1==a.indexOf(s)&&a.push(s);return a},_getChildRecordsLength:function(e,t){for(var i,s=t.length,n=0;n<s;n++)(i=t[n]).summaryRow||e==i.parentItem&&(this._flatChildRecords.push(i),i.hasChildRecords&&this._getChildRecordsLength(i,t));return this._flatChildRecords.length},_createSummaryItem:function(e,t,i){for(var s=t.summaryColumns,n=s.length,a=0;a<n;a++){var r,o=s[a],l=o.prefix,d=o.suffix,h=o.displayColumn;for(r in J.isNullOrUndefined(h)&&(h=o.dataMember),J.isNullOrUndefined(l)&&(l=""),J.isNullOrUndefined(d)&&(d=""),e.summaryColumn=o,e.summaryRow=t,e)r==h&&(e[r]?e[r]=e[r]+" "+l+this._getSummaryValues(o,this._flatChildRecords)+d:e[r]=l+this._getSummaryValues(o,this._flatChildRecords)+d)}return e},_getSummaryValues:function(e,t){var i,s=e.dataMember,n=e.format,a=t,r="";switch(a instanceof J.DataManager?a=(i=a).dataSource.json:i=J.DataManager(a),e.summaryType){case J.TreeGrid.SummaryType.Sum:r=J.sum(a,s);break;case J.TreeGrid.SummaryType.Average:r=J.avg(a,s),r=isNaN(r)||J.isNullOrUndefined(r)?"":r;break;case J.TreeGrid.SummaryType.Maximum:var o=J.max(a,s),r=parseInt(this._getCustomCellValue(o,e.dataMember));r=isNaN(r)||J.isNullOrUndefined(r)?"":r;break;case J.TreeGrid.SummaryType.Minimum:t=a.filter(function(e){if(""!==e[s])return!0}),o=J.min(t,s);r=parseInt(this._getCustomCellValue(o,e.dataMember)),r=isNaN(r)||J.isNullOrUndefined(r)?"":r;break;case J.TreeGrid.SummaryType.MaximumDate:r=this._getMaxDate(a,s),r=J.isNullOrUndefined(r)?"":r;break;case J.TreeGrid.SummaryType.MinimumDate:r=this._getMinDate(a,s),r=J.isNullOrUndefined(r)?"":r;break;case J.TreeGrid.SummaryType.Count:r=a.length;break;case J.TreeGrid.SummaryType.TrueCount:var l=J.Predicate(e.dataMember,"equal",!0);r=i.executeLocal(J.Query().where(l)).length;break;case J.TreeGrid.SummaryType.FalseCount:l=J.Predicate(e.dataMember,"equal",!1);r=i.executeLocal(J.Query().where(l)).length;break;case J.TreeGrid.SummaryType.Custom:l=e.customSummaryValue;l&&("string"==typeof l&&(l=J.util.getObject(l,window)),r=Z.isFunction(l)?l.call(this,e,a):e.customSummaryValue)}return J.isNullOrUndefined(n)||(r=this.formatting(n,r,this.model.locale)),r},_getMaxDate:function(e,t){for(var i=0,s=null,n=0;n<e.length;n++){var a=e[n],r=new Date(a[t]).getTime();i<r&&(i=r,s=a[t])}return s},_getMinDate:function(e,t){if(0==e.length)return null;for(var i=new Date(e[0][t]).getTime(),s=e[0][t],n=0;n<e.length;n++){var a=e[n],r=new Date(a[t]).getTime();r<i&&(i=r,s=a[t])}return s},_createAndRenderSummaryRecords:function(e){this._createSummaryRow(e);e={};e.requestType=J.TreeGrid.Actions.Refresh,this.sendDataRenderingRequest(e),this.updateCollapsedRecordCount(),this.updateHeight()},_mergeRecords:function(){for(var e=this.batchChanges,t=e.changed,i=e.added,s=[],n=0;n<t.length;n++)s[t[n]]||s.push(t[n]);for(n=0;n<i.length;n++)s[i[n]]||s.push(i[n]);return s},_updateSummaryRow:function(l){var d,h,e,c=this,u=c.model,p=[],m=[],t=c.getUpdatedRecords();if(!l||"dragAndDrop"!=l.requestType||(l.rowIndex=t.indexOf(c._droppedRecord),-1!=l.rowIndex))if(l&&"delete"==l.requestType)c._updateAfterDeleteRecord(l);else if(l&&"celledit"==l.editType&&("numericedit"==l.columnObject.editType&&(e=parseInt(l.value),l.value=isNaN(e)?"":e,l.data[l.columnName]=l.value),l.currentValue=l.value,e=c.getIndexByRow(l.rowElement),e=(u.enableVirtualization?u.currentViewData:t)[e],l.rowIndex=t.indexOf(e)),(l.currentValue!=l.previousValue||"dragAndDrop"==l.requestType||"addNewRow"==l.requestType||c._batchEditCancel)&&(h=("addNewRow"==l.requestType?u.updatedRecords:t)[l.rowIndex],c._batchEditCancel&&(h=l.record),h.parentItem&&(m=c._getpRecords(h,c)),!J.isNullOrUndefined(m)))for(var g=0;g<m.length;g++){var f,_,i=u.summaryRowRecords,v=[];c._getChildRecordsLength(m[g],t),Z.each(i,function(e,t){if(d=t.summaryRow,t.parentItem===m[g]){v=[];for(var i=d.summaryColumns.length,s=0;s<i;s++){var n=d.summaryColumns[s],a=n.prefix,r=n.suffix;J.isNullOrUndefined(a)&&(a=""),J.isNullOrUndefined(r)&&(r=""),"rowedit"==l.editType&&(l.columnName=n.dataMember,u.columns,o=c.getColumnIndexByField(l.columnName),"numericedit"==u.columns[o].editType&&(h[l.columnName]=parseInt(h[l.columnName])));var o=(o=n.displayColumn)||n.dataMember;f=u.currentViewData.indexOf(t),_=c.getColumnIndexByField(o),l.data=t,-1!=_&&(0<c._frozenColumnsLength?c._frozenColumnsLength>_?l.rowElement=Z(c.getRows()[0][f]):(l.rowElement=Z(c.getRows()[1][f]),_-=c._frozenColumnsLength):l.rowElement=Z(c.getRows()[f]),l.cellElement=l.rowElement.find(".e-rowcell").eq(_),n=a+c._getSummaryValues(n,c._flatChildRecords)+r,-1==v.indexOf(o)?(0!=Z(l.cellElement).find(".e-summarytitle").length?(r=Z(l.cellElement).find(".e-summarytitle").clone(),Z(l.cellElement).empty().html(n).prepend(r)):Z(l.cellElement).empty().html(n),t[o]=n,v.push(o)):(Z(l.cellElement).append(" "+n),t[o]=t[o]+" "+n),p.push(t),c._updateWrapRowHeights("total,header","virtualRefresh",f,"savecell"))}}}),c._flatChildRecords=[],c._summaryRowCount=m.length}},_updateTotalSummaryRow:function(e){if("dragAndDrop"!=e.requestType&&!e.isDragAndDropDelete){for(var t,i,s,n=this.model,a=n.summaryRows,r=a.length,o=0;o<r;o++){i=(t=a[o].summaryColumns).length,s=this._footerSummaryRecord[o];for(var l=[],d=0;d<i;d++){var h,c,u,p=t[d],m=p.prefix,g=p.suffix;J.isNullOrUndefined(m)&&(m=""),J.isNullOrUndefined(g)&&(g=""),"rowedit"!=e.editType&&"celledit"!=e.editType||(e.columnName=p.dataMember),h=h||p.dataMember,p.dataMember!=e.columnName&&"delete"!=e.requestType&&"filtering"!=e.requestType&&"addNewRow"!=e.requestType&&"searching"!=e.requestType||(h=p.displayColumn,c=this._footerSummaryRecord.indexOf(s),u=this.getColumnIndexByField(h),e.data=s,-1!=u&&(0<this._frozenColumnsLength?this._frozenColumnsLength>u?e.rowElement=this._getFooterRows()[0][c]:(e.rowElement=this._getFooterRows()[1][c],u-=this._frozenColumnsLength):e.rowElement=this._getFooterRows()[c],e.cellElement=e.rowElement.childNodes[u],u=this._spliceSummaryRows(n.updatedRecords),u=m+this._getSummaryValues(p,u)+g,-1==l.indexOf(h)?(0!=Z(e.cellElement).find(".e-summarytitle").length||0<Z(e.cellElement).find(".e-icon").length?(g=Z(e.cellElement).find(".e-summarytitle, .e-icon").clone(),Z(e.cellElement).empty().html(u).prepend(g)):Z(e.cellElement).empty().html(u),l.push(h),s[h]=u):((0<Z(e.cellElement).find(".e-summarytitle").length||0<Z(e.cellElement).find(".e-icon").length?Z(e.cellElement).find(".e-summarycell"):Z(e.cellElement)).append(" "+u),s[h]=s[h]+" "+u)))}}n.allowTextWrap&&this._updateTotalSummaryHeight()}},_updateAfterDeleteRecord:function(h){var c,u,p,m=this,g=m.model,f=[],e=h.data;if(e.parentItem&&(u=m._getpRecords(e,m)),!J.isNullOrUndefined(u))for(var _=0;_<u.length;_++){var t=g.summaryRowRecords;0!=u[_].childRecords.length&&(m._getChildRecordsLength(u[_],g.updatedRecords),Z.each(t,function(e,t){if(c=t.summaryRow,t.parentItem===u[_]){p=[];for(var i=c.summaryColumns.length,s=0;s<i;s++){var n=c.summaryColumns[s],a=n.displayColumn,r=g.currentViewData.indexOf(t),o=m.getColumnIndexByField(a),l=n.prefix,d=n.suffix;J.isNullOrUndefined(l)&&(l=""),J.isNullOrUndefined(d)&&(d=""),h.data=t,0<m._frozenColumnsLength?m._frozenColumnsLength>o?h.tr=Z(m.getRows()[0][r]):(h.tr=Z(m.getRows()[1][r]),o-=m._frozenColumnsLength):h.tr=Z(m.getRows()[r]),h.tr=Z(m.getRows()[r]),h.cellElement=h.tr.find(".e-rowcell").eq(o);n=l+m._getSummaryValues(n,m._flatChildRecords)+d;-1==p.indexOf(a)?(0!=Z(h.cellElement).find(".e-summarytitle").length?(d=Z(h.cellElement).find(".e-summarytitle").clone(),Z(h.cellElement).empty().html(n).prepend(d)):h.cellElement.empty().html(n),t[a]=n,p.push(a)):(Z(h.cellElement).append(" "+n),t[a]=t[a]+" "+n)}f.push(t)}}),m._flatChildRecords=[])}},_getpRecords:function(e,t){for(var i=[];e=e.parentItem,i.push(e),e.parentItem;);return i},_renderGridContent:function(){var e,t,i=this,s=document,n=i.model,a=Z(s.createElement("tbody")),r=J.buildTag("div.e-gridcontent#"+i._id+"e-gridcontent","",{height:i._viewPortHeight}),o=J.buildTag("div.e-gridcontainer#"+i._id+"e-gridcontainer","",{},{}),l=J.buildTag("div",{},{width:"auto",height:"auto"});return l.append(o),(n.enableVirtualization||n.allowPaging)&&o.css({height:i._totalHeight}),0<this._frozenColumnsLength?(o.html(i._renderByFrozenDesign()),i.setGridContentTable(o.find(".e-table"))):((e=J.buildTag("table.e-table e-zerospace#"+i._id+"e-table","",{top:"0px",position:"relative"})).append(i.getHeaderTable().find("colgroup").clone()).append(a),o.html(e),i.setGridContentTable(e)),r.html(l),i._$gridContent=r,null===this.dataSource()||0==this.model.currentViewData.length?0<this._frozenColumnsLength?(l=i._getFrozenHiddenCol(),t=J.buildTag("td",n.emptyRecordText,{},{colSpan:this._frozenColumns.length-l.frozen}),o.find("#e-frozencontentdiv"+i._id+" .e-table tbody").append(Z(s.createElement("tr")).addClass("e-emptyText").height(30).append(t)),t=J.buildTag("td",n.emptyRecordText,{visibility:"hidden"},{colSpan:this._unFrozenColumns.length-l.moveable}),o.find("#e-movablecontentdiv"+i._id+" .e-table tbody").append(Z(s.createElement("tr")).addClass("e-emptyText").height(30).append(t))):(t=J.buildTag("td",n.emptyRecordText,{},{colSpan:i.model.columns.length-i._hiddenColumns.length}),a.append(Z(s.createElement("tr")).addClass("e-emptyText").height(30).append(t)),o.css("height",n.rowHeight)):i.renderRecords(),n.isFromGantt?r.css({"border-left-style":"solid","border-left-width":"1px"}):r.css({"border-bottom-style":"solid","border-bottom-width":"1px","border-left-style":"solid","border-left-width":"1px","border-right-style":"solid","border-right-width":"1px",width:"auto",height:"auto",cursor:"default"}),r},_getFrozenHiddenCol:function(){var e=this.model.columns,t={frozen:0,moveable:0};if(this._hiddenColumns.length)for(var i=0;i<e.length;i++)!e[i].visible&&e[i].isFrozen?t.frozen=t.frozen+1:e[i].visible||e[i].isFrozen||(t.moveable=t.moveable+1);return t},_initialEndRendering:function(){var e,t=this,i=t.model,s=(t.getExpandedRecords(i.updatedRecords),t.selectedRowIndex()),n=t.selectedCellIndexes();i.allowSelection&&("row"!=i.selectionSettings.selectionMode||-1==s||i.isFromGantt||(i.showSummaryRow&&(e=t._spliceSummaryRows(i.updatedRecords)[s],s=i.updatedRecords.indexOf(e)),t._rowSelectingEventTrigger(this._previousIndex,s)||(t.selectRows(s),t._cancelSaveTools(),t._rowSelectedEventTrigger(s))),"cell"==i.selectionSettings.selectionMode&&0<n.length&&(t.selectedRowIndex(-1),t.selectCells(n),t._cancelSaveTools())),t._isRendered=!0,this._trigger("dataBound",{}),t._trigger("refresh"),t._eventBindings(),t._hideCollapsedDetailsRows(),t.getScrollElement().ejScroller("refresh"),t._updateScrollCss()},_addCellEditTemplate:function(){for(var e,t,i,s=this.model.columns,n=0,a=J.buildTag("div","",{display:"none"},{id:this._id+"_CellEditTemplate"}),n=0;n<s.length;n++)s[n]&&(i=this._getFieldValue(s[n].field,n),this._isCommandColumn(s[n])?(e=J.buildTag("td.e-rowcell e-unboundcell","",{},{id:i+"_CellEdit"}),t=s[n],Z("#"+this._id+n+"_UnboundTemplate").remove(),t=this._createCommandElement(t,n),e.addClass("e-unboundcell").html("{{:~_"+this._id+"UnboundTemplate('"+t.id+"')}}")):(e=J.buildTag("div","",{},{id:i+"_CellEdit"}),J.TreeGrid._initCellEditType(this,e,this._id,n)),a.append(e));a.children().length&&(this._cellEditTemplate=a)},_getState:function(){return!this.data.parentItem},_getCellIndex:function(e,t){for(var i=[],s=0;s<e.length;s++)i[s]=e[s][t];return i},_getSelectedCellClass:function(e,t){var i=this.model,s=parseInt(t),t=this._selectedCellDetails;if("cell"==i.selectionSettings.selectionMode&&0<t.length&&(this._getSelectedCellsinARow(e.index,t),0<this._selectedCellsinARow.length&&(t=("msie"==J.browserInfo().name&&J.browserInfo().version<9?this._getCellIndex(this._selectedCellsinARow,"cellIndex"):this._selectedCellsinARow.map(function(e){return e.cellIndex})).indexOf(s),-1!=t&&this._selectedCellsinARow[t].cellIndex==s)))return"e-selectingcell";return""},_getBatchEditState:function(e,t){this.model;return(!this._checkboxSelection||"checkboxState"!=t)&&(!!(e.isBatchAdd||e.batchEditedFields&&null!=e.batchEditedFields[t])||void 0)},_getSelectedCellsinARow:function(t,e){var i=this;i._selectedCellsinARow=[],e.forEach(function(e){e.data.index==t&&i._selectedCellsinARow.push(e)}),i._currentRecordIndex=t},_getrowName:function(){var e="gridrowIndex";return e+=this.data.index.toString()+"level"+this.data.level.toString()},_getDetailsColSpan:function(e){var t=this.model;return 0<this._frozenColumnsLength?(e?this._frozenColumns.filter(function(e){return!1!==e.visible}):this._unFrozenColumns.filter(function(e){return!1!==e.visible})).length:t.showDetailsRowInfoColumn?this._visibleColumns.length+1:this._visibleColumns.length},_getDetailsExpandStatus:function(e){return!(!this.getExpandStatus(e)||!e.isDetailsExpanded)},_createDetailsRowTemplate:function(e){var t=this,i=this.model,s={};s["_"+t._id+"getDetailsColSpan"]=Z.proxy(t._getDetailsColSpan,t),s["_"+t._id+"getDetailsExpandStatus"]=Z.proxy(t._getDetailsExpandStatus,t),s["_"+t._id+"getExpandStatus"]=Z.proxy(t.getExpandStatus,t),Z.views.helpers(s);var n="{{if !isSummaryRow && !footerSummaryRowRecord}}<tr class='e-detailsrow e-treegridrows detailsrow{{:~_"+t._id+"rowClassName()}} {{if isDetailsExpanded}}e-detailsrowexpanded{{else}}e-detailsrowcollapsed{{/if}}{{if !~_"+t._id+"getExpandStatus(#data) && isDetailsExpanded}} e-collapsedrowexpandeddetailsrow{{/if}}' style='{{if ~_"+t._id+"getDetailsExpandStatus(#data)}}display:table-row;{{else}}visibility:none;{{/if}}height:"+i.detailsRowHeight+"px;'><td class='e-detailsrowcell' colspan='{{:~_"+t._id+"getDetailsColSpan("+e+")}}'><div class='e-detailscellwrapper' style='height:"+(i.detailsRowHeight-1)+"px;'>",s="";return i.detailsTemplate&&0<i.detailsTemplate.length&&(s=document.getElementById(i.detailsTemplate)?"#"+i.detailsTemplate:i.detailsTemplate),e||(Z("#treeGridDetailsRowTemplateElement"+t._id).remove(),s=this._createDetailRowTemplateElement(s),n+="{{:~_"+t._id+"treeGridTemplating('"+s.id+"')}}"),n+="</div></td></tr>",n+="{{/if}}",e||((e={})[t._id+"_detailRowTemplate"]=n,Z.templates(e)),n},_SelectState:function(e){return!!this.model.allowSelection},_unboundClickHandler:function(e){var t,i=this,s=this.model,n=Z(e.target).closest("button");(n.hasClass("e-deletebutton")||n.hasClass("e-editbutton")||n.hasClass("e-savebutton")||n.hasClass("e-cancelbutton"))&&(n.hasClass("e-button")&&(n.hasClass("e-disable")||n.prop("disabled"))||Z(e.target).hasClass("e-unboundcelldiv")||(t="dialogEditing"==i.model.editSettings.editMode?Z("#"+i._id+"EditFormDialog"):Z("#"+i._id+"EditForm"),t=n.hasClass("e-savebutton")||n.hasClass("e-cancelbutton")?i.getIndexByRow(t.closest("tr")):i.getIndexByRow(n.closest("tr")),i.selectRows(i.getUpdatedRecords().indexOf(s.currentViewData[t])),n.hasClass("e-editbutton")&&s.editSettings.allowEditing?(i._isRowEdit&&i.cancelEdit(),"dialogEditing"!=s.editSettings.editMode?(e=i.getCellIndex(e),i._editRow(i.getUpdatedRecords().indexOf(s.currentViewData[t]),null,e)):i.showEditDialog(i.getUpdatedRecords().indexOf(s.currentViewData[t]))):n.hasClass("e-deletebutton")?i.deleteRow(null,!0):n.hasClass("e-savebutton")?i.saveRow():n.hasClass("e-cancelbutton")&&i.cancelEdit()))},_createCommandElement:function(e,t){var i=document.createElement("div");i.id=this._id+t+"_UnboundTemplate";for(var s,n=J.buildTag("div.e-unboundcelldiv"),a=e.commands,r=0;r<a.length;r++)J.isNullOrUndefined(a[r].type)||((s=J.buildTag("button.e-"+a[r].type.replace(/\s+/g,"")+"button","",{},{type:"button"})).val(a[r].type),n.append(s));return Z("body").append(Z(i).html(n).hide()),i},_refreshUnboundTemplate:function(e){var t=this.model;if(0<this._commandColumnLength)for(var i=0;i<t.columns.length;i++)if(this._isCommandColumn(t.columns[i]))for(var s,n=e.find(".e-unboundcell").find(".e-unboundcelldiv"),a=Z.extend(!0,[],t.columns[i].commands),r=0;r<a.length;r++)J.isNullOrUndefined(a[r].buttonOptions)&&(a[r].buttonOptions={}),a[r].buttonOptions.width=J.isNullOrUndefined(a[r].buttonOptions.width)?"52":a[r].buttonOptions.width,a[r].buttonOptions.height=J.isNullOrUndefined(a[r].buttonOptions.height)?"22":a[r].buttonOptions.height,a[r].buttonOptions.showRoundedCorner=!!J.isNullOrUndefined(a[r].buttonOptions.showRoundedCorner)||a[r].buttonOptions.showRoundedCorner,a[r].buttonOptions.size=J.isNullOrUndefined(a[r].buttonOptions.size)?"small":a[r].buttonOptions.size,J.isNullOrUndefined(a[r].type)||(s=n.find(".e-"+a[r].type.replace(/\s+/g,"")+"button"),0<e.find(".e-unboundeditedcell").length?"save"==a[r].type||"cancel"==a[r].type?s.show():(s.hasClass("e-deletebutton")&&s.hide(),s.hasClass("e-editbutton")&&s.hide()):"save"==a[r].type||"cancel"==a[r].type?s.hide():(s.hasClass("e-deletebutton")&&s.show(),s.hasClass("e-editbutton")&&s.show()),s.ejButton(a[r].buttonOptions))},_unboundTemplateRendering:function(e){return Z("#"+e).html()},_collapsibleSummary:function(e,t){var i=this.model;i.columns;if(i.showTotalSummary&&i.collapsibleTotalSummary&&this._summaryColumnIndex==parseInt(e)&&t.isFirstFooterSummary)return!0},_summaryIndendCell:function(e){var t=this.model;t.columns;if(t.showTotalSummary&&t.collapsibleTotalSummary&&this._summaryColumnIndex==parseInt(e))return 0!=this._summaryColumnIndex||0!=this._summaryColumnIndex&&void 0},_getsummaryExpandStatus:function(e){return J.isNullOrUndefined(e.summaryExpanded)||e.summaryExpanded||(this._summaryExpanded=!1),!this.model.collapsibleTotalSummary||this._summaryExpanded||e.isFirstFooterSummary?"table-row":"none"},_addInitTemplate:function(){var e,t,i=this,s=i.model,n=s.columns,a=0,r=n.length,o=!1,l={};if((i._commandColumnLength=0)===n.length)return!1;if(0<this._frozenColumnsLength&&(this.addFrozenTemplate(),s.showTotalSummary&&this.addFrozenSummaryTemplate()),l["_"+i._id+"rowClassName"]=J.TreeGrid._getrowClassName,l["_"+i._id+"SummaryRowtdClassName"]=J.TreeGrid._getSummaryRowtdClassName,l["_"+i._id+"summaryIndendCell"]=Z.proxy(i._summaryIndendCell,i),l["_"+i._id+"collapsibleSummary"]=Z.proxy(i._collapsibleSummary,i),l["_"+i._id+"isSelectedCell"]=Z.proxy(i._getSelectedCellClass,i),l["_"+i._id+"batchEditState"]=Z.proxy(i._getBatchEditState,i),l["_"+i._id+"summaryTitle"]=i._getSummaryTitle,l["_"+i._id+"rowName"]=i._getrowName,l["_"+i._id+"getState"]=i._getState,l["_"+i._id+"SelectState"]=Z.proxy(i._SelectState,i),l["_"+i._id+"summaryExpandStatus"]=Z.proxy(i._getsummaryExpandStatus,i),l["_"+i._id+"expandStatus"]=Z.proxy(i._getExpandStatusRecord,i),l["_"+i._id+"cellValue"]=Z.proxy(i._getCellValue,i),l["_"+i._id+"TemplateCellValue"]=Z.proxy(i._getTemplateCellValue,i),l["_"+i._id+"isTreeColumnIndex"]=Z.proxy(i._isTreeColumnIndex,i),l["_"+i._id+"getIndentWidth"]=Z.proxy(i._getIndentWidth,i),l["_"+i._id+"checkColumn"]=Z.proxy(i._getCellColumn,i),l["_"+i._id+"formatting"]=Z.proxy(i.formatting,i),l["_"+i._id+"treeGridTemplating"]=J.proxy(i._gridTemplate,null,i),l["_"+i._id+"getCheckboxState"]=Z.proxy(i._getCheckboxState,i),l["_"+i._id+"UnboundTemplate"]=Z.proxy(i._unboundTemplateRendering,i),l["_"+i._id+"isTrimCell"]=Z.proxy(i._checkIsTrimCell,i),l["_"+i._id+"getRowHeight"]=Z.proxy(i._getTemplateRowHeight,i),Z.views.helpers(l),s.allowTextWrap&&(o=i.model.allowTextWrap),s.parseRowTemplate&&(0<s.rowTemplateID.length||0<s.altRowTemplateID.length)){var d=J.buildTag("tbody","",{},{}),h=J.buildTag("tbody","",{},{}),c="",u="",p=0<s.altRowTemplateID.length?Z("#"+s.altRowTemplateID):Z("#"+s.rowTemplateID),m=0<s.rowTemplateID.length?Z("#"+s.rowTemplateID):Z("#"+s.altRowTemplateID),g=p[0].innerHTML,f=m[0].innerHTML;if(Z(d[0]).html(g),Z(h[0]).html(f),0<h[0].childNodes.length)for(var _=0;_<h[0].childNodes.length;_++)if("TR"==h[0].childNodes[_].nodeName&&(h[0].className=h[0].childNodes[_].className,h[0].style.cssText=h[0].childNodes[_].style.cssText,0<h[0].childNodes[_].childNodes.length))for(var v,b=0,x=0;x<h[0].childNodes[_].childNodes.length;x++)"TD"==(y=h[0].childNodes[_].childNodes[x]).nodeName&&(w=y.innerHTML,C=i._id+"RowTemplateElement"+b,Z("#"+C).remove(),j=this._createRowTemplateElement(w,C,m[0].type),y.innerHTML="{{:~_"+i._id+"treeGridTemplating('"+j.id+"')}}",y.className+=" e-rowcell e-templatecell",n[b]&&(e=(t=n[b]).field,D=t.visible==P||t.visible,S="",t.headerText==i._visibleColumns[0]&&(S="{{if isSummaryRow || footerSummaryRowRecord}}<div class='e-summarytitle{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}} {{if "+o+"}} e-textwrapcell{{/if}}'style='float:left;display:block;'>{{:~_"+i._id+"summaryTitle()}}</div>{{/if}}"),b==s.treeColumnIndex?(T="<div class='e-inner-treecolumn-container' style='min-height:20px;' data-unselectable='on'>{{if hasChildRecords && hasFilteredChildRecords}}<div class='e-dragintend'{{if filterLevel > -1}}style='height:1px; float:left; width:{{:((filterLevel)*"+i.treeIndentLevelWidth+")}}px; display:inline-block;'>{{else}}style='height:1px; float:left; width:{{:((level)*"+i.treeIndentLevelWidth+")}}px; display:inline-block;'>{{/if}}{{if !~_"+i._id+"getState() || !hasChildRecords }}<div class={{:~_"+i._id+"rowName()}} ><span class='e-aboveIcon e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon e-icon' style='position:relative;float:right;display:none;'></span><span class='e-childIcon e-icon' style='position:relative;float:right;display:none;'></span><span class='e-cancelIcon e-icon' style='position:relative;float:right;display:none;'></span></div>{{/if}}</div>{{else !hasChildRecords || (!hasFilteredChildRecords && hasChildRecords)}}<div class='e-dragintend'{{if filterLevel > -1}}style='height:1px; float:left; width:{{:(filterLevel*"+i.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{else}}style='height:1px; float:left; width:{{:(level*"+i.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{/if}}{{if !~_"+i._id+"getState() || !hasChildRecords || !hasFilteredChildRecords }}<div class={{:~_"+i._id+"rowName()}} ><span class='e-aboveIcon iconMargin e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon iconMargin e-icon' style='float:right;display:none;'></span><span class='e-childIcon iconMargin e-icon' style='float:right;display:none;'></span><span class='e-cancelIcon iconMargin e-icon' style='float:right;display:none;'></span></div>{{/if}}</div>{{/if}}{{if ~_"+i._id+"getState() && hasChildRecords && hasFilteredChildRecords}}<div class='e-intendparent'><div class={{:~_"+i._id+"rowName()}} ><span class='e-aboveIcon e-icon'  style='position:relative;float:left;display:none;'></span><span class='e-belowIcon e-icon' style='float:left;display:none;'></span><span class='e-childIcon e-icon' style='float:left;display:none;'></span><span class='e-cancelIcon e-icon' style='float:left;display:none;'></span></div></div>{{/if}}<div class='{{if expanded && hasFilteredChildRecords}}e-treegridexpand e-icon{{else hasChildRecords && hasFilteredChildRecords}}e-treegridcollapse e-icon{{/if}}' style='float:left;display:inline-block;font-size:10px;'></div><div class='e-cell{{if "+(t.showCheckbox&&this.model.selectionSettings.selectionType==J.TreeGrid.SelectionType.Checkbox)+"}} e-treecheckboxcolumn{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+o+"}} e-textwrapcell{{/if}}' style='overflow: hidden;'>",y.style.cssText="padding-left:0px;",c+="<td class='"+y.className+"{{if isSummaryRow || footerSummaryRowRecord}} e-summaryrowcell{{/if}}{{if isSelected && ~_"+i._id+"SelectState()}} e-selectionbackground{{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}} e-hide{{/if}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+o+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}} e-summaryintend{{/if}}' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+y.style.cssText+"'>"+T+"{{else}}'>{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"collapsibleSummary('"+b+"',#data)}}<div class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}"+y.innerHTML+"{{else}}"+S+"{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",c+="{{if isSummaryRow || footerSummaryRowRecord}}{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"')}}{{/if}}",c+="{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}}</div>{{/if}}</div></div></td>"):(c+="<td class='"+y.className+"{{if isSummaryRow || footerSummaryRowRecord}} e-summaryrowcell{{/if}}{{if isSelected && ~_"+i._id+"SelectState()}} e-selectionbackground{{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}} e-hide{{/if}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+o+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}} e-summaryintend{{/if}}' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+y.style.cssText+"{{/if}}'>{{if footerSummaryRowRecord && ~_"+i._id+"collapsibleSummary('"+b+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}"+y.innerHTML+"{{else}}"+S+"{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",c+="{{if isSummaryRow || footerSummaryRowRecord}}{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"')}}{{/if}}",c+="{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}}</div>{{/if}}</td>"),0<this._frozenColumnsLength&&this._frozenColumnsLength==b+1&&(v="",v+=c,v+="</tr>",c=""),b++));if(0<d[0].childNodes.length)for(_=0;_<d[0].childNodes.length;_++)if("TR"==d[0].childNodes[_].nodeName){d[0].className=d[0].childNodes[_].className,d[0].style.cssText=d[0].childNodes[_].style.cssText;for(var y,w,C,S,T,R,b=0,x=0;x<d[0].childNodes[_].childNodes.length;x++)"TD"==(y=d[0].childNodes[_].childNodes[x]).nodeName&&(w=y.innerHTML,C=i._id+"AltRowTemplateElement"+b,Z("#"+C).remove(),j=this._createRowTemplateElement(w,C,p[0].type),y.innerHTML="{{:~_"+i._id+"treeGridTemplating('"+j.id+"')}}",y.className+=" e-rowcell e-templatecell",n[b]&&(e=(t=n[b]).field,D=t.visible==P||t.visible,S="",t.headerText==i._visibleColumns[0]&&(S="{{if isSummaryRow || footerSummaryRowRecord}}<div class='e-summarytitle{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}} {{if "+o+"}} e-textwrapcell{{/if}}'style='float:left;display:block;'>{{:~_"+i._id+"summaryTitle()}}</div>{{/if}}"),b==s.treeColumnIndex?(T="<div class='e-inner-treecolumn-container' style='min-height:20px;'>{{if hasChildRecords && hasFilteredChildRecords}}{{if filterLevel > -1}}<div class='e-dragintend' style='height:1px; float:left;width:{{:((filterLevel)*"+i.treeIndentLevelWidth+")}}px; display:inline-block;'>{{else}}<div class='e-dragintend' style='height:1px; float:left;width:{{:((level)*"+i.treeIndentLevelWidth+")}}px; display:inline-block;'>{{/if}}{{if !~_"+i._id+"getState() || !hasChildRecords }}<div class={{:~_"+i._id+"rowName()}} ><span class='e-aboveIcon e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon e-icon' style='position:relative;float:right;display:none;'></span><span class='e-childIcon e-icon' style='position:relative;float:right;display:none;'></span><span class='e-cancelIcon e-icon' style='position:relative;float:right;display:none;'></span></div>{{/if}}</div>{{else !hasChildRecords || (!hasFilteredChildRecords && hasChildRecords)}}<div class='e-dragintend'{{if filterLevel > -1}}style='height:1px; float:left; width:{{:(filterLevel*"+i.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{else}}style='height:1px; float:left; width:{{:(level*"+i.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{/if}}{{if !~_"+i._id+"getState() || !hasChildRecords || !hasFilteredChildRecords}}<div class={{:~_"+i._id+"rowName()}} ><span class='e-aboveIcon iconMargin e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon iconMargin e-icon' style='float:right;display:none;'></span><span class='e-childIcon iconMargin e-icon' style='float:right;display:none;'></span><span class='e-cancelIcon iconMargin e-icon' style='float:right;display:none;'></span></div>{{/if}}</div>{{/if}}{{if ~_"+i._id+"getState() && hasChildRecords && hasFilteredChildRecords}}<div class='e-intendparent'><div class={{:~_"+i._id+"rowName()}} ><span class='e-aboveIcon e-icon'  style='position:relative;float:left;display:none;'></span><span class='e-belowIcon e-icon' style='float:left;display:none;'></span><span class='e-childIcon e-icon' style='float:left;display:none;'></span><span class='e-cancelIcon e-icon' style='float:left;display:none;'></span></div></div>{{/if}}<div class='{{if expanded&& hasFilteredChildRecords}}e-treegridexpand e-icon{{else hasChildRecords && hasFilteredChildRecords}}e-treegridcollapse e-icon{{/if}}' style='float:left;display:inline-block;font-size:10px;'></div><div class='e-cell{{if "+t.showCheckbox+"}} e-treecheckboxcolumn{{/if}}{{if  ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}} {{if "+o+"}} e-textwrapcell{{/if}}' style='overflow:hidden'>",y.style.cssText="padding-left:0px;",u+="<td class='"+y.className+"{{if isSummaryRow || footerSummaryRowRecord}} e-summaryrowcell{{/if}}{{if isSelected && ~_"+i._id+"SelectState()}} e-selectionbackground{{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}} e-hide{{/if}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+o+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}} e-summaryintend{{/if}}' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+y.style.cssText+"'>"+T+"{{else}}'>{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"collapsibleSummary('"+b+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}"+y.innerHTML+"{{else}}"+S+"{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",u+="{{if isSummaryRow || footerSummaryRowRecord}}{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"')}}{{/if}}",u+="{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}}</div>{{/if}}</div></div></td>"):(u+="<td class='"+y.className+"{{if isSummaryRow || footerSummaryRowRecord}} e-summaryrowcell{{/if}}{{if isSelected && ~_"+i._id+"SelectState()}} e-selectionbackground{{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}} e-hide{{/if}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+o+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}} e-summaryintend{{/if}}' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+y.style.cssText+"{{/if}}'>{{if footerSummaryRowRecord && ~_"+i._id+"collapsibleSummary('"+b+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}"+y.innerHTML+"{{else}}"+S+"{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",u+="{{if isSummaryRow || footerSummaryRowRecord}}{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"')}}{{/if}}",u+="{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+b+")}}</div>{{/if}}</td>"),0<this._frozenColumnsLength&&this._frozenColumnsLength==b+1&&(R="",R+=u,R+="</tr>",u=""),b++))}s.showDetailsRow&&s.detailsTemplate&&s.showDetailsRowInfoColumn&&(u+="<td class='{{if isSelected && ~_"+i._id+"SelectState()}}e-selectionbackground{{/if}} {{if isDetailsExpanded}}e-detailsrowexpand{{else}}e-detailsrowcollapse{{/if}}  e-detailsrowcell{{if isLastSummary}} e-lastsummaryrow{{/if}}'>{{if !isSummaryRow && !footerSummaryRowRecord}}<div class='e-detailsiconcell e-icon {{if isDetailsExpanded}}e-detailsinfoiconhide{{else}}e-detailsinfoiconshow{{/if}}'></div>{{/if}}",c+="<td class='{{if isSelected && ~_"+i._id+"SelectState()}}e-selectionbackground{{/if}} {{if isDetailsExpanded}}e-detailsrowexpand{{else}}e-detailsrowcollapse{{/if}}  e-detailsrowcell{{if isLastSummary}} e-lastsummaryrow{{/if}}'>{{if !isSummaryRow && !footerSummaryRowRecord}}<div class='e-detailsiconcell e-icon {{if isDetailsExpanded}}e-detailsinfoiconhide{{else}}e-detailsinfoiconshow{{/if}}'></div>{{/if}}");var k="{{if isAltRow}}<tr class='{{:~_"+i._id+"rowClassName()}} {{if expanded && hasFilteredChildRecords}}e-treegridrowexpand {{else hasChildRecords && hasFilteredChildRecords}} e-treegridrowcollapse {{/if}} e-templaterow "+d[0].className+"' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+d[0].style.cssText+"{{else}}height:"+s.rowHeight+"px;{{/if}}display:{{if footerSummaryRowRecord}}{{:~_"+i._id+"summaryExpandStatus(#data)}}{{else}}{{:~_"+i._id+"expandStatus(#data)}}{{/if}}''>"+u+"</tr>{{else}}<tr class='{{:~_"+i._id+"rowClassName()}} {{if expanded && hasFilteredChildRecords}}e-treegridrowexpand {{else hasChildRecords && hasFilteredChildRecords}} e-treegridrowcollapse {{/if}} e-templaterow "+h[0].className+"' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+h[0].style.cssText+"{{else}}height:"+s.rowHeight+"px;{{/if}}display:{{if footerSummaryRowRecord}}{{:~_"+i._id+"summaryExpandStatus(#data)}}{{else}}{{:~_"+i._id+"expandStatus(#data)}}{{/if}}''>"+c+"</tr>{{/if}}",O="{{if isAltRow}}<tr class='{{:~_"+i._id+"rowClassName()}} {{if expanded && hasFilteredChildRecords}}e-treegridrowexpand {{else hasChildRecords && hasFilteredChildRecords}} e-treegridrowcollapse {{/if}} e-templaterow "+d[0].className+"' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+d[0].style.cssText+"{{else}}height:"+s.rowHeight+"px;{{/if}} display:{{if footerSummaryRowRecord}}{{:~_"+i._id+"summaryExpandStatus(#data)}}{{else}}{{:~_"+i._id+"expandStatus(#data)}}{{/if}}''>"+v+"</tr>{{else}}<tr class='{{:~_"+i._id+"rowClassName()}} {{if expanded && hasFilteredChildRecords}}e-treegridrowexpand {{else hasChildRecords && hasFilteredChildRecords}} e-treegridrowcollapse {{/if}} e-templaterow "+h[0].className+"' style='{{if !isSummaryRow && !footerSummaryRowRecord}}"+h[0].style.cssText+"{{else}}height:"+s.rowHeight+"px;{{/if}} display:{{if footerSummaryRowRecord}}{{:~_"+i._id+"summaryExpandStatus(#data)}}{{else}}{{:~_"+i._id+"expandStatus(#data)}}{{/if}}''>"+R+"</tr>{{/if}}"}else if(!s.parseRowTemplate&&(0<s.rowTemplateID.length||0<s.altRowTemplateID.length))s.rowTemplateID&&s.altRowTemplateID?k="{{if isAltRow}}"+Z.trim(Z("#"+s.rowTemplateID).html())+"{{else}}"+Z.trim(Z("#"+s.altRowTemplateID).html())+"{{/if}}":0<s.rowTemplateID.length?k=Z.trim(Z("#"+s.rowTemplateID).html()):0<s.altRowTemplateID.length&&(k=Z.trim(Z("#"+s.altRowTemplateID).html()));else{k="<tr class='e-treegridrows {{:~_"+i._id+"rowClassName()}} ";s.enableAltRow&&(k+="{{if isAltRow}}e-alt-row{{/if}} ");for(var D,I,j,L,A,E="",a=0;a<r;a++)n[a]&&(e=n[a].field,t=n[a],D=n[a].visible==P||n[a].visible,I=n[a].textAlign,S="",t.headerText==i._visibleColumns[0]&&(S="{{if isSummaryRow || footerSummaryRowRecord}}<div class='e-summarytitle{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}} {{if "+o+"}} e-textwrapcell{{/if}}'style='float:left;display:block;'>{{:~_"+i._id+"summaryTitle()}}</div>{{/if}}"),t.isTemplateColumn&&(t.angularTemplate||t.templateID||t.template)?(k+="e-templaterow ",A=t.headerText,J.isNullOrUndefined(A)||J.isNullOrUndefined(A.match(/(\\|[^0-9A-z-_])/g))||(A=A.replace(/(\\|[^0-9A-z-_])/g,"")),Z("#"+i._id+A+Z.inArray(t,this.model.columns)+"_Template").remove(),j=this._createTemplateElement(t),L="<td class='{{if !isSummaryRow && !footerSummaryRowRecord}} e-intend{{/if}} e-rowcell e-templatecell{{if isSelected && ~_"+i._id+"SelectState()}} e-selectionbackground{{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}} e-hide{{/if}}{{:~_"+i._id+"SummaryRowtdClassName()}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+o+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}} e-summaryintend{{/if}}{{if ~_"+i._id+"batchEditState(#data,'"+e+"')}}e-updatedtd e-tgupdatenotify{{/if}}'style='text-Align:"+I+";'role='row'>{{if footerSummaryRowRecord && ~_"+i._id+"collapsibleSummary('"+a+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}{{:~_"+i._id+"treeGridTemplating('"+j.id+"','"+a+"')}}{{else}}"+S+"{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",L+="{{if isSummaryRow || footerSummaryRowRecord}}{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"')}}{{/if}}",L+="{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}}</div>{{/if}}</td>"):a===s.treeColumnIndex?(L="<td class='{{if isSelected && ~_"+i._id+"SelectState()}}e-rowcell e-selectionbackground e-intend {{else}}e-rowcell {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if !isSummaryRow && !footerSummaryRowRecord}} e-intend{{/if}} {{/if}} {{:~_"+i._id+"SummaryRowtdClassName()}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+o+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}} e-summaryintend{{/if}}{{if ~_"+i._id+"batchEditState(#data,'"+e+"')}}e-updatedtd e-tgupdatenotify{{/if}} {{if hasChildRecords && hasFilteredChildRecords}} e-parentcell{{/if}}'style='padding-left:{{if ~_"+i._id+"isTreeColumnIndex('"+e+"') && isSummaryRow }}{{:((level)*"+i.treeIndentLevelWidth+")}}px{{/if}};background-color:{{if cellBackgroundColor && ~_"+i._id+"checkColumn('"+e+"',#data)=='"+e+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};'role='row'>{{if footerSummaryRowRecord && ~_"+i._id+"collapsibleSummary('"+a+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}<div class='e-inner-treecolumn-container' style='min-height:20px;'>{{if hasChildRecords && hasFilteredChildRecords}}<div class='e-dragintend'{{if filterLevel > -1}}style='height:1px; float:left; width:{{:((filterLevel)*"+i.treeIndentLevelWidth+")}}px; display:inline-block;'>{{else}}style='height:1px; float:left; width:{{:((level)*"+i.treeIndentLevelWidth+")}}px; display:inline-block;'>{{/if}}{{if !~_"+i._id+"getState() || !hasChildRecords}}<div class={{:~_"+i._id+"rowName()}} ><span class='e-aboveIcon {{if level == 1 && hasChildRecords}} e-firstLevIconMargin {{/if}}  e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon {{if level == 1 && hasChildRecords}} e-firstLevIconMargin {{/if}}  e-icon' style='position:relative;float:right;display:none;'></span><span class='e-childIcon {{if level == 1 && hasChildRecords}} e-firstLevIconMargin {{/if}}  e-icon' style='position:relative;float:right;display:none;'></span><span class='e-cancelIcon {{if level == 1 && hasChildRecords}} e-firstLevIconMargin {{/if}} e-icon' style='position:relative;float:right;display:none;'></span></div>{{/if}}</div>{{else !hasChildRecords || (!hasFilteredChildRecords && hasChildRecords)}}<div class='e-dragintend'{{if filterLevel > -1}}style='height:1px; float:left; width:{{:(filterLevel*"+i.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{else}}style='height:1px; float:left; width:{{:(level*"+i.treeIndentLevelWidth+")+24}}px; display:inline-block;'>{{/if}}{{if !~_"+i._id+"getState() || !hasChildRecords || !hasFilteredChildRecords}}<div class={{:~_"+i._id+"rowName()}} ><span class='e-aboveIcon e-iconMargin e-icon'  style='position:relative;float:right;display:none;'></span><span class='e-belowIcon e-iconMargin e-icon' style='float:right;display:none;'></span><span class='e-childIcon e-iconMargin e-icon' style='float:right;display:none;'></span><span class='e-cancelIcon e-iconMargin e-icon' style='float:right;display:none;'></span></div>{{/if}}</div>{{/if}}{{if ~_"+i._id+"getState() && hasChildRecords && hasFilteredChildRecords}}<div class='e-intendparent'><div class={{:~_"+i._id+"rowName()}} ><span class='e-aboveIcon e-icon'  style='position:relative;float:left;display:none;'></span><span class='e-belowIcon e-icon' style='float:left;display:none;'></span><span class='e-childIcon e-icon' style='float:left;display:none;'></span><span class='e-cancelIcon e-icon' style='float:left;display:none;'></span></div></div>{{/if}}<div class='{{if expanded && hasFilteredChildRecords}}e-treegridexpand e-icon{{else hasChildRecords && hasFilteredChildRecords}}e-treegridcollapse e-icon{{/if}}'style='float:left;display:inline-block; font-size:10px;'></div><div class='e-cell{{if "+(t.showCheckbox&&this.model.selectionSettings.selectionType==J.TreeGrid.SelectionType.Checkbox)+"}} e-treecheckboxcolumn{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}} {{if "+o+"}} e-textwrapcell{{/if}}'style='overflow: hidden;padding-left:{{if ~_"+i._id+"isTreeColumnIndex('"+e+"') && isSummaryRow}}{{:(level*"+i.treeIndentLevelWidth+")+24}}px{{/if}};'>{{/if}}{{:~_"+i._id+"getCheckboxState(#data, '"+e+"', '"+i._checkboxColumnName+"')}}",J.isNullOrUndefined(t.format)?s.isFromGantt&&t.mappingName===s.resourceInfoMapping?((l={})["_"+i._id+"resourceName"]=i._getResourceName,Z.views.helpers(l),L+="{{:~_"+i._id+"resourceName('"+i._id+"Object','"+s.resourceNameMapping+"','"+s.resourceUnitMapping+"','"+e+"')}}</div></div></td>"):s.isFromGantt&&t.mappingName===s.predecessorMapping?((l={})["_"+i._id+"predecessor"]=Z.proxy(i._getPredecessorsValue,i),Z.views.helpers(l),L+="{{:~_"+i._id+"predecessor(#data)}}</div></div></td>"):(L+=S+"{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"')}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}}</div>{{/if}}{{if !isSummaryRow && !footerSummaryRowRecord}}</div></div></td>{{/if}}",S=""):L+="{{if !isSummaryRow && !footerSummaryRowRecord}}{{:~_"+i._id+"formatting('"+t.format+"',~_"+i._id+"TemplateCellValue(#data,'"+e+"'),'"+this.model.locale+"')}}{{else}}{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"')}}{{/if}}"):s.isFromGantt&&t.mappingName===s.resourceInfoMapping?((l={})["_"+i._id+"resourceName"]=i._getResourceName,Z.views.helpers(l),L="<td  class='{{if isSelected && ~_"+i._id+"SelectState()}}e-rowcell e-selectionbackground{{else}}e-rowcell {{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}}e-hide{{/if}}'style='background-color:{{if cellBackgroundColor && ~_"+i._id+"checkColumn('"+e+"',#data)=='"+e+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};'role='row'>{{:~_"+i._id+"resourceName('"+i._id+"Object','"+s.resourceNameMapping+"','"+s.resourceUnitMapping+"','"+e+"')}}</td>"):s.isFromGantt&&t.mappingName===s.predecessorMapping?((l={})["_"+i._id+"predecessor"]=Z.proxy(i._getPredecessorsValue,i),Z.views.helpers(l),L="<td class='{{if isSelected && ~_"+i._id+"SelectState()}}e-rowcell e-selectionbackground{{else}}e-rowcell {{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}}e-hide{{/if}}' style='background-color:{{if cellBackgroundColor && ~_"+i._id+"checkColumn('"+e+"',#data)=='"+e+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};'role='row'>{{:~_"+i._id+"predecessor(#data)}}</td>"):s.isFromGantt&&t.mappingName===s.durationMapping?((l={})["_"+i._id+"getDurationString"]=Z.proxy(i._getDurationString,i),Z.views.helpers(l),L="<td class='{{if isSelected && ~_"+i._id+"SelectState()}}e-rowcell e-selectionbackground{{else}}e-rowcell {{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}}e-hide{{/if}}' style='background-color:{{if cellBackgroundColor && ~_"+i._id+"checkColumn('"+e+"',#data)=='"+e+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};'role='row'>{{:~_"+i._id+"getDurationString(#data)}}</td>"):"booleanedit"==t.editType&&i._checkboxSelection&&"checkboxState"==e?L="<td class='{{if isSelected && ~_"+i._id+"SelectState()}}e-rowcell e-selectionbackground{{else}}e-rowcell{{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}}e-hide{{/if}}{{:~_"+i._id+"SummaryRowtdClassName()}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+o+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}} e-summaryintend {{/if}}{{if ~_"+i._id+"batchEditState(#data,'"+e+"')}}e-updatedtd e-tgupdatenotify{{/if}}'style='background-color:{{if cellBackgroundColor && ~_"+i._id+"checkColumn('"+e+"',#data)=='"+e+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};text-Align: center;'role='row'> {{if footerSummaryRowRecord && ~_"+i._id+"collapsibleSummary('"+a+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}"+S+"{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"', '"+i._checkboxColumnName+"')}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}}</div>{{/if}}":i._isCommandColumn(t)?(Z("#"+this._id+a+"_UnboundTemplate").remove(),A=i._createCommandElement(t,a),L="<td class='{{if isSelected && ~_"+i._id+"SelectState()}}e-rowcell e-unboundcell e-selectionbackground {{else}}e-rowcell e-unboundcell {{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}}e-hide{{/if}}{{:~_"+i._id+"SummaryRowtdClassName()}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}} e-summaryintend{{/if}}'style='background-color:{{if cellBackgroundColor && ~_"+i._id+"checkColumn('"+e+"',#data)=='"+e+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};text-Align:"+I+"'role='row'> {{if !isSummaryRow && !footerSummaryRowRecord}}{{:~_"+i._id+"UnboundTemplate('"+A.id+"')}}{{else}}{{if footerSummaryRowRecord && ~_"+i._id+"collapsibleSummary('"+a+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}"+S+"{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"', '"+i._checkboxColumnName+"')}}{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}}</div>{{/if}}",i._commandColumnLength=i._commandColumnLength+1,L+="</td>"):(L="<td class='{{if isSelected && ~_"+i._id+"SelectState()}}e-rowcell e-selectionbackground{{else}}e-rowcell {{/if}} {{:~_"+i._id+"isSelectedCell(#data,'"+a+"')}} {{if "+!D+"}}e-hide{{/if}} {{:~_"+i._id+"SummaryRowtdClassName()}}{{if isLastSummary}} e-lastsummaryrow{{/if}}{{if ~_"+i._id+"isTrimCell('"+t.clipMode+"')}} e-treegridtrimcell{{/if}}{{if "+o+"}} e-textwrapcell{{/if}}{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}} e-summaryintend{{/if}}{{if ~_"+i._id+"batchEditState(#data,'"+e+"')}}e-updatedtd e-tgupdatenotify{{/if}}'style='background-color:{{if cellBackgroundColor && ~_"+i._id+"checkColumn('"+e+"',#data)=='"+e+"'}}{{:cellBackgroundColor}}{{else}}none{{/if}};text-Align:"+I+"'role='row'>{{:~_"+i._id+"getCheckboxState(#data, '"+e+"', '"+i._checkboxColumnName+"')}}{{if footerSummaryRowRecord && ~_"+i._id+"collapsibleSummary('"+a+"',#data)}}<div  class= '{{if summaryExpanded}} e-summarytreegridexpand e-icon{{else}} e-summarytreegridcollapse e-icon {{/if}}'style='float:left;display:inline-block; font-size:10px;'></div>{{/if}}"+S+"{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}}<div class='e-summarycell'style='overflow: hidden;padding-left:25px;'>{{/if}}",J.isNullOrUndefined(t.format)?L+="{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"')}}":L+="{{if !isSummaryRow && !footerSummaryRowRecord}}{{:~_"+i._id+"formatting('"+t.format+"',~_"+i._id+"TemplateCellValue(#data,'"+e+"'),'"+this.model.locale+"')}}{{else}}{{:~_"+i._id+"TemplateCellValue(#data,'"+e+"')}}{{/if}}",L+="{{if footerSummaryRowRecord && ~_"+i._id+"summaryIndendCell("+a+")}}</div>{{/if}}</td>",S=""),E+=L),0<this._frozenColumnsLength&&this._frozenColumnsLength==a+1&&(O="",O+=E,O+="</tr>",E="");s.showDetailsRow&&s.detailsTemplate&&s.showDetailsRowInfoColumn&&(E+="<td class='{{if isSelected && ~_"+i._id+"SelectState()}}e-selectionbackground{{/if}} {{if isDetailsExpanded}}e-detailsrowexpand{{else}}e-detailsrowcollapse{{/if}}  e-detailsrowcell{{if isLastSummary}} e-lastsummaryrow{{/if}}'>{{if !isSummaryRow && !footerSummaryRowRecord}}<div class='e-detailsiconcell e-icon {{if isDetailsExpanded}}e-detailsinfoiconhide{{else}}e-detailsinfoiconshow{{/if}}'></div>{{/if}}"),O=(k+="{{if expanded && hasFilteredChildRecords}}e-treegridrowexpand {{else hasChildRecords && hasFilteredChildRecords}} e-treegridrowcollapse {{/if}}{{if isBatchDelete}}e-batchdisable {{/if}}'style='background-color:{{if rowBackgroundColor }}{{:rowBackgroundColor}}{{else}}none{{/if}}; height:{{:~_"+i._id+"getRowHeight(#data)}}px;display:{{if footerSummaryRowRecord}}{{:~_"+i._id+"summaryExpandStatus(#data)}}{{else}}{{:~_"+i._id+"expandStatus(#data)}}{{/if}}'role='treegrid'>")+O,k+=E,s.isFromGantt?k+="<td class='e-extendcolumn'></td></tr>":k+="</tr>"}s.showDetailsRow&&s.detailsTemplate&&(k+="{{if isDetailsExpanded}}"+i._createDetailsRowTemplate()+"{{/if}}",O+="{{if isDetailsExpanded}}"+i._createDetailsRowTemplate(!0)+"{{/if}}"),i._summaryExpanded=!0;f={};f[i._id+"_Template"]=k,f[i._id+"_JSONFrozenTemplate"]=O,Z.templates(f)},_gridTemplate:function(e,t,i){var s;return J.isNullOrUndefined(i)||(s=e.model.columns[i]),e._renderEjTemplate("#"+t,this.data,this.data.index,s)},_getIndentWidth:function(e){return e.level*this.treeIndentLevelWidth+"px"},_createDetailRowTemplateElement:function(e){var t=/^#([\w-]*)/.exec(e),i={name:"SCRIPT",type:"text/x-template",text:e,id:"treeGridDetailsRowTemplateElement"+this._id},e=t&&t[1]?document.getElementById(t[1]):(/^<script/i.test(e)?Z(e):J.buildTag(i.name,i.text)).get(0);return e.id=e.id||i.id,e.type=e.type||i.type,Z("body").append(e),e},_createRowTemplateElement:function(e,t,i){var s=document.createElement("script");return s.id=t,s.type=i||"text/x-template",s.text=e,Z("body").append(s),s},_createTemplateElement:function(e,t){var i=t?"Pager":e.headerText+Z.inArray(e,this.model.columns)+"_Template",t="template"in e?"template":"templateID"in e?"templateID":"angularTemplate",e=e[t];"templateID"==t&&-1==e.indexOf("#")&&(e="#"+e);t=/^#([\w-]*)/.exec(e),i={name:"SCRIPT",type:"text/x-template",text:e,id:(this._id+i).replace(/(\\|[^0-9A-z-_])/g,"")};return(e=t&&t[1]?document.getElementById(t[1]):(/^<script/i.test(e)?Z(e):J.buildTag(i.name,i.text)).get(0)).id=e.id||i.id,e.type=e.type||i.type,Z("#"+e.id).remove(),Z("body").append(e),e},_getCheckboxState:function(e,t,i){if(t==i&&1!=e.isSummaryRow&&!e.summaryColumn&&!e.summaryRow){e="indeterminate"==e.checkboxState?'<span class="e-chkbox-wrap e-widget" style="padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-indeter"><span class="e-checkbox e-chk-image e-icon e-stop" id ='+this._id+"_checkbox"+e.ejRowId+"></span></span></div></span>":"unchecked"==e.checkboxState?'<span class="e-chkbox-wrap e-widget" style="padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-inact"><span class="e-checkbox e-chk-image e-icon" id ='+this._id+"_checkbox"+e.ejRowId+"></span></span></div></span>":'<span class="e-chkbox-wrap e-widget" style="padding-right:10px;color:#c8c8c8;"><div class="e-chkbox-small"><span class="e-chk-act"><span class=" e-checkbox e-chk-image e-icon e-checkmark" id ='+this._id+"_checkbox"+e.ejRowId+"></span></span></div></span>";return e}},_checkIsTrimCell:function(e){return!(!e||"ellipsis"!=e)},_getTemplateRowHeight:function(e){return this.model.isFromGantt&&"resourceView"==this.model.viewType?e.eOverlapIndex*this.model.rowHeight:this.model.rowHeight},_getCustomCellValue:function(e,t){if(!J.isNullOrUndefined(e)){var i,s=(t||"").split(".");if(s.length<=1)i=e[t];else{if(i=e[s[0]],J.isNullOrUndefined(i))return null;for(var n=1;n<s.length;n++)if(i=i[s[n]],J.isNullOrUndefined(i))return null}return i}},_restoreCustomData:function(e,t,i){var s=0;J.isNullOrUndefined(i)&&(i=this._cellEditingDetails.fieldName);var n=(i||"").split("."),a={};if(n.length<=1)J.isNullOrUndefined(e)?(e={})[i]=t:e[i]=t;else{for(s=J.isNullOrUndefined(e)?(a=e={},0):(a=e[n[0]],J.isNullOrUndefined(a)&&(a={},e[n[0]]=a),1);s<n.length-1;s++)J.isNullOrUndefined(a[n[s]])&&(a[n[s]]={}),a=a[n[s]];a[n[s]]=t}return e},_getTemplateCellValue:function(e,t,i){var s,n,a=this.getColumnByField(t),r=a.editType,o=this._getCustomCellValue(e,t);if(J.isNullOrUndefined(o)&&(o=e.item&&e.item[t]),r==J.TreeGrid.EditingType.Boolean&&t==i?o=this._getCheckboxState(e,t,i):e.isSummaryRow||e.footerSummaryRowRecord||r!=J.TreeGrid.EditingType.Boolean||t==i||!J.isNullOrUndefined(a.displayAsCheckbox)&&!a.displayAsCheckbox||(o="true"==o||1==o?"<input class='e-treegrid-chekboxcell' type='checkbox' disabled='disabled' checked/>":"<input class='e-treegrid-chekboxcell' type='checkbox' disabled='disabled'/>"),this.model.isFromGantt&&("work"==t&&(o+=" "+this.model.workUnit),"taskMode"==t&&(o=!e.isAutoSchedule),"unit"==t&&(o+="%"),"duration"==t&&(o=this._getDurationString(e)),"startDate"!=t&&"endDate"!=t&&"duration"!=t||!J.isNullOrUndefined(o)&&""!=o||(o=a.showNullText?this.model.nullText:"")),r==J.TreeGrid.EditingType.Dropdown&&!e.isSummaryRow&&!e.footerSummaryRowRecord){e=a.editParams,o=null!=o||o!=P?o:"";if(e&&e.fields?(n=e.fields.text||"text",s=e.fields.value||"value"):(s="value",n="text"),e&&(e.showCheckbox||e.multiSelectMode)){var l,d,h,c=a.dropdownData,u=e&&!J.isNullOrUndefined(e.delimiterChar)?e.delimiterChar:",";if("string"==typeof o&&-1<o.indexOf(u)?d=(l=o.split(u)).length:l=o,o="",a.dropdownData)if(d)for(var p=0;p<d;p++)(h=Z.map(c,function(e){if(J.isNullOrUndefined(e[s])){if(e[n]==l[p])return e[n]}else if(e[s].toString()==l[p].toString())return e[n]}))[0]=h[0]||"",o+=0==p?h[0]:u+h[0];else Z.map(c,function(e){(J.isNullOrUndefined(e[s])||l.toString()!==e[s].toString())&&l!==e[n]||(o=e[n])})}else a.dropdownData&&(c=a.dropdownData,(h=Z.map(c,function(e){if(J.isNullOrUndefined(e[s])){if(e[n].toString()==o)return e[n]}else if(e[s].toString()==o.toString())return e[n]}))[0]=J.isNullOrUndefined(h[0])?"":h[0],o=h[0])}return o},_getCellValue:function(e,t){var i=this._getCustomCellValue(e,t);return i||0===i?i:e.item&&e.item[t]},_isCommandColumn:function(e){this.model;e=e.commands;return!(!J.isNullOrUndefined(e)&&0==e.length||J.isNullOrUndefined(e))},_isTreeColumnIndex:function(e){var t=this.model,t=t.columns[t.treeColumnIndex];return!(!t||t.field!=e)},_getSummaryTitle:function(){var e=this.data.summaryRow.title;return e||this.data.item&&this.data.item.summaryRow.title},_getCellColumn:function(e,t){return-1!==t.treeMappingName.indexOf(e)?e:"none"},_getResourceName:function(e,t,i,s){var n,a,r=this.data[s],o=0,l=r&&r.length,d=[];if(r&&0<r.length)for(;o<l;o++)n=r[o][t],100!=(a=r[o][i])&&(n+="["+a+"%]"),d.push(n);return d},_removeSeparator:function(e){var t=e.toString(),e=J.preferredCulture(this.model.locale).numberFormat;return t=t.replace(".",e["."])},_getDurationString:function(e){var t,i="";return J.isNullOrUndefined(e.duration)||""===e.duration?i=this.getColumnByField("duration").showNullText?this.model.nullText:i:("string"==typeof e.duration?(t=parseFloat(e.duration),i+=isNaN(t)?"":this._removeSeparator(parseFloat(t.toFixed(2)))+" "):i=this._removeSeparator(parseFloat(e.duration.toFixed(2)))+" ",null!=e.durationUnit&&(t=1!=e.duration,"day"==e.durationUnit?i+=t?this.model.durationUnitTexts.days:this.model.durationUnitTexts.day:"hour"==e.durationUnit?i+=t?this.model.durationUnitTexts.hours:this.model.durationUnitTexts.hour:i+=t?this.model.durationUnitTexts.minutes:this.model.durationUnitTexts.minute)),i},_getPredecessorsValue:function(e){var t=e.predecessor,i="";if(t)for(var s=t.length,n=0;n<s;n++){var a,r=t[n],o="";r.from!=e.taskId&&(o=r.from+r.predecessorsType,0!=r.offset&&(o+=0<r.offset?"+"+r.offset+" ":r.offset+" ",a=1!=Math.abs(r.offset),"day"==r.offsetDurationUnit?o+=a?this.model.durationUnitTexts.days:this.model.durationUnitTexts.day:"hour"==r.offsetDurationUnit?o+=a?this.model.durationUnitTexts.hours:this.model.durationUnitTexts.hour:o+=a?this.model.durationUnitTexts.minutes:this.model.durationUnitTexts.minute),i=0<i.length?i+","+o:o)}return i},_getExpandStatusRecord:function(e){return this.getExpandStatus(e)||this._isHierarchyFiltering&&e.isDisplay?"table-row":"none"},_createRecords:function(e){var t,i=this,s=i.model,n=i.model.ids,a=s.flatRecords,r=e.length,o=0,l=!0,d=s.parentRecords;for(!s.isFromGantt&&s.enableCollapseAll&&(l=!1);o<r;o++)(t=i._createRecord(e[o],0,null,l)).hierarchyRowIndex=o,i._storedIndex++,t.isAltRow=i._storedIndex%2!=0,d.push(t),t.index=i._storedIndex,n[i._storedIndex]=t.index,a.push(t),t.hasChildRecords&&i._parentRecords.push(t),t.childRecords&&i._addNestedRecords(t.childRecords),this.dataSource()instanceof J.DataManager&&i._isLoadonDemand&&(!t.item[s.hasChildMapping]&&-1==i._assignedParendIDs.indexOf(t.item[s.idMapping])||(t.hasChildRecords=!0,t.childRecords=[],t.isChildRetrieved=!1));s.allowPaging&&!i._isRemoteData&&i._updateTotalRecordsCount(),i._maxRowIndex=this.model.flatRecords.length},_updateTotalRecordsCount:function(){var e,t=this.model,i=t.flatRecords;!J.isNullOrUndefined(t.pageSettings.totalRecordsCount)&&t.pageSettings.totalRecordsCount<=i.length?(e=t.pageSettings.totalRecordsCount,t.flatRecords=i.slice(0,e),t.flatRecords[e-1].hasChildRecords&&(t.flatRecords[e-1].hasChildRecords=!1,t.flatRecords[e-1].expanded=!1,t.flatRecords[e-1].childRecords=null,t.flatRecords[e-1].hasFilteredChildRecords=!1)):J.isNullOrUndefined(t.pageSettings.totalRecordsCount)&&(t.pageSettings.totalRecordsCount=i.length)},_createRecord:function(e,t,i,s){var n,a=e[this.model.childMapping],r=this.model,o=Z.extend({},e);return r.parentIdMapping&&"load"===this._createdAt||this.dataSource()instanceof J.DataManager&&this.dataSource().dataSource.json&&this.dataSource().dataSource.offline&&"load"===this._createdAt&&r.parentIdMapping?(n=e[r.idMapping],n=this._taskIds.indexOf(n),o.item=-1<n?this._retrivedData[n]:[]):o.item=e,o.parentItem=i,o.childRecords=a&&0<a.length&&this._createChildRecords(a,t+1,o),o.hasChildRecords=!!(a&&0<a.length),e=!r.expandStateMapping||!o.hasChildRecords||(J.isNullOrUndefined(e[r.expandStateMapping])?J.isNullOrUndefined(e[r.expandStateMapping])&&!r.enableCollapseAll?o[r.expandStateMapping]=o.item[r.expandStateMapping]=e[r.expandStateMapping]=!0:J.isNullOrUndefined(e[r.expandStateMapping])&&r.enableCollapseAll&&(o[r.expandStateMapping]=o.item[r.expandStateMapping]=e[r.expandStateMapping]=!1):o[r.expandStateMapping]=o.item[r.expandStateMapping]=e[r.expandStateMapping],e[r.expandStateMapping]),o.expanded=s!==P&&a!==P&&1==o.hasChildRecords&&e?s:!(!e||!a)&&0<a.length,o.dragState=!0,o.isSelected=!1,o.hasFilteredChildRecords=!0,o.level=t,o.canDrag=!0,o.canDrop=!0,o.cellBackgroundColor=null,o.rowBackgroundColor=null,o.textWrapRowHeight=r.rowHeight,o.treeMappingName=[],r.showDetailsRow&&r.detailsTemplate?o.isDetailsExpanded=!r.showDetailsRowInfoColumn:o.isDetailsExpanded=!1,r.isFromGantt||(o.ejRowId=++this._idGenerator),o.checkboxState="unchecked",delete o[r.childMapping],o},_createChildRecords:function(e,t,i){var s,n,a,r=this.model,o=[],l=0,d=e.length;for(!r.isFromGantt&&r.enableCollapseAll&&(n=!1),l=0;l<d;l++)(s=e[l])&&((a=this._createRecord(s,t,i,n)).hierarchyRowIndex=l,o.push(a));return o},_addNestedRecords:function(e){for(var t,i,s=this,n=s.model,a=s.model.ids,r=n.flatRecords,o=n.updatedRecords,l=0,d=e.length,l=0;l<d;l++)if(i=e[l],s._storedIndex++,i.isAltRow=s._storedIndex%2!=0,i.index=s._storedIndex,a[s._storedIndex]=i.index,r.push(i),o.push(i),i.hasChildRecords&&s._parentRecords.push(i),t=i.childRecords)for(var h=0,c=t.length,u=null,h=0;h<c;h++)u=t[h],s._storedIndex++,u.index=s._storedIndex,a[s._storedIndex]=u.index,u.isAltRow=s._storedIndex%2!=0,r.push(u),o.push(i),u.hasChildRecords&&s._parentRecords.push(u),u.childRecords&&s._addNestedRecords(u.childRecords)},_enableColumnResizeEvents:function(){this.model.allowColumnResize?this._on(this.element,"mousemove",this._mouseMove):this._off(this.element,"mousemove",this._mouseMove)},_wireEvents:function(){var e=this,t=e.model;jQuery.uaMatch(navigator.userAgent);J.isTouchDevice()?(e._on(e.element,"tap",e._onRecordClick),e._on(e.element,"doubletap",".e-gridcontent > div",e._onRecordDoubleClick),e._on(e.element,"tap",e._onClick)):(e._on(e.element,"click",e._onRecordClick),e._on(e.element,"dblclick",".e-gridcontent > div",e._onRecordDoubleClick),e._on(e.element,"click",e._onClick)),e._on(e.element,"keydown",e._keyDown),e._on(e.element,"click","#"+e._id+"e-gridheader",e._onHeaderClick),e._on(e.element,"mousedown touchstart","#"+e._id+"e-gridheader",e._headerMouseDown),e._on(Z(document),"mousedown touchstart",e._mouseDownHandler),e._on(e.element,"mousedown touchstart",".e-gridcontent",e._contentMouseDown),J.isTouchDevice()&&this.model.allowPaging&&this._on(this.element,"swipeleft swiperight",".e-gridcontent div > .e-table",Z.proxy(this._swipeAction,this)),e.model.allowColumnResize&&e._on(e.element,"mousemove",e._mouseMove),"immediate"==t.filterSettings.filterBarMode&&(e._on(e.element,"keyup",".e-filterbarcell input",e._filterBarHandler),e._off(e.element,"click",".e-filterbarcell .e-checkbox")._on(e.element,"click",".e-filterbarcell .e-checkbox",e._filterBarHandler)),e._on(e.element,"focus click",".e-filterbarcell input",e._filterBarClose),e._on(e.element,"click",".e-filterbarcell .e-cancel",e._filterBarClose),(e.model.showGridCellTooltip||e.model.showGridExpandCellTooltip)&&e._on(e.element,"mousemove",".e-rowcell",e._mouseHover),e.model.showGridCellTooltip&&e._on(e.element,"mousemove",".e-headercelldiv",e._headermouseHover),e._on(e.element,"mouseleave",".e-rowcell",e._cellMouseLeave),e._on(e.element,"mouseleave",e._cellMouseLeave),e._on(e.element,"mouseleave",".e-headercelldiv",e._headerMouseLeave),e._on(e.element,"mouseleave",e._headerMouseLeave),(t.isFromGantt||this._frozenColumnsLength)&&e._on(e.element,"mousewheel DOMMouseScroll",e._mouseWheel),t.enableResize&&t.isResponsive&&!t.isFromGantt&&e._on(Z(window),"resize",e._windowResize),e._enableEditingEvents(),this._on(this.element,"click",".e-unboundcelldiv button",this._unboundClickHandler),t.contextMenuSettings.showContextMenu&&e._on(e.element,"keyup contextmenu taphold",this._preventContextMenu)},_preventContextMenu:function(e){if(93==e.keyCode||"contextmenu"==e.type||"taphold"==e.type)return e.preventDefault(),e.stopPropagation(),!1},_mouseDownHandler:function(e){var t=this,i=Z(e.target);0!=i.closest("div.e-tgheaderContextmenu").length||0!=i.closest("div.e-columnmenuitem").length||0!=i.closest("div.e-columnMenuListDiv").length||(i.hasClass("e-columnmenu-icon")||i.hasClass("e-column-filter-icon")||i.hasClass("e-column-filtered-icon"))&&0!=Z(e.target).closest("#"+t._id).length||0!=i.closest("div.e-"+t._id+"filterStringSelector").length||0!=i.closest("div#"+t._id+"filterStringDropDown_popup_list_wrapper").length||0!=i.closest("div#"+t._id+"filterStringInputBox_suggestion").length||0!=i.closest("div.e-"+t._id+"filterNumericSelector").length||0!=i.closest("div#"+t._id+"filterNumericDropDown_popup_list_wrapper").length||0!=i.closest("div.e-"+t._id+"filterDatepickerSelector").length||0!=i.closest("div#"+t._id+"filterDatepickerDropDown_popup_list_wrapper").length||0!=i.closest("div#e-"+t._id+"filterDatepickerInputBox").length||0!=i.closest("div.e-"+t._id+"filterDatetimepickerSelector").length||0!=i.closest("div#"+t._id+"filterDatetimepickerDropDown_popup_list_wrapper").length||0!=i.closest("div#"+t._id+"filterDatetimepickerInputBox_popup").length||0!=i.closest("div.e-"+t._id+"filterDropdownSelector").length||0!=i.closest("div#"+t._id+"filterDropdownDropDown_popup_list_wrapper").length||0!=i.closest("div.e-"+t._id+"filterBooleanSelector").length||0!=i.closest("div.e-excelfilter").length||t._isExcelFilterClick(i)||t._clearColumnMenu(),i.hasClass("e-tgheaderContextmenu")||0==i.closest("div.e-menuitem").length&&0==i.closest("div.e-columnmenuselection").length&&0==i.closest("div.e-columnMenuListDiv").length&&t._clearContextMenu(),0==i.closest("div.e-detailscellwrapperfly").length&&t._removeDetailsRow(e)},_isExcelFilterClick:function(e){var t=this._id;return 0!=e.closest("#"+t+"number_CustomDrop1_popup").length||0!=e.closest("#"+t+"number_CustomDrop2_popup").length||0!=e.closest("#"+t+"datetime_CustomDrop1_popup").length||0!=e.closest("#"+t+"datetime_CustomDrop2_popup").length||0!=e.closest("#"+t+"date_CustomDrop1_popup").length||0!=e.closest("#"+t+"date_CustomDrop2_popup").length||0!=e.closest("#"+t+"string_CustomDrop1_popup").length||0!=e.closest("#"+t+"string_CustomDrop2_popup").length||0!=e.closest("#"+t+"datetime_CustomValue2_popup").length||0!=e.closest("#"+t+"datetime_CustomValue1_popup").length||0!=e.closest("#e-"+t+"date_CustomValue2").length||0!=e.closest("#e-"+t+"date_CustomValue1").length||0!=e.closest("#"+t+"string_CustomValue1_suggestion").length||0!=e.closest("#"+t+"string_CustomValue1_suggestion").length},_mouseout:function(e){var t,i,s,n,a=this,r=a.model,o=a._gridPosition,l=o.top,d=a._gridHeight,h=a._$gridHeaderContent.outerHeight()+l;r.toolbarSettings.showToolbar&&(i=r.isFromGantt?a._id.replace("ejTreeGrid",""):a._id,h+=0<Z("#"+i+"_toolbarItems").length?Z("#"+i+"_toolbarItems").outerHeight():0),r.allowPaging&&(d-=a.element.find(".e-pager").first().outerHeight()),r.showTotalSummary&&(d-=a._$totalSummaryRowContainer.outerHeight()),a._dragMouseDown&&(o.left,e=e.pageY,l=a.model.isFromGantt?(i=a._id.replace("ejTreeGrid",""),s=Z("#"+i).find(".e-ganttviewerbodyContianer"),n=s.ejScroller("isVScroll")?s.find(".e-content").get(0).scrollHeight-1:0,s.ejScroller("isHScroll")?d+l-r.rowHeight/2-18:d+l-r.rowHeight/2):(n=a.isVScroll()?a.getMaxScrollHeight()+1:0,a.getScrollElement().ejScroller("isHScroll")?d+l-r.rowHeight/2-18:d+l-r.rowHeight/2),r=h+r.rowHeight/2,l<e&&n>a._scrollTop?a._timerDragDown||(a._timerDragDown=window.setInterval(function(){n>a._scrollTop&&(t=a._scrollTop+20,t=n<t?n:t,(a.model.isFromGantt?s:a.getScrollElement()).ejScroller("scrollY",t,!0))},100)):a._timerDragDown&&(a._timerDragDown=window.clearInterval(a._timerDragDown)),e<r&&0!=a._scrollTop&&0<a._scrollTop?a._timerDragUp||(a._timerDragUp=window.setInterval(function(){0<a._scrollTop&&((t=a._scrollTop-20)<0&&(t=0),(a.model.isFromGantt?s:a.getScrollElement()).ejScroller("scrollY",t,!0))},100)):a._timerDragUp&&(a._timerDragUp=window.clearInterval(a._timerDragUp)))},getRange:function(e,t,i){var s,n=this,a=n.model,r=0,o=0,l=0==i.length?a.rowHeight:i[0].offsetHeight;d=n.getOffsetRect(Z("#"+n._id)[0]),s=n._$gridHeaderContent.outerHeight()+d.top,l+=n._detailsRowHeight,a.enableVirtualization||(n._scrollTop=n.getScrollElement().ejScroller("scrollTop")),a.toolbarSettings.showToolbar&&(s+=0<Z("#"+n._id+"_toolbarItems").length?Z("#"+n._id+"_toolbarItems").outerHeight():0),o=a.allowTextWrap?(0==i.length&&(i=n._lastRow),i.offset().top):0!=n._scrollTop?t*l+s+(r=l-n._scrollTop%l):t*l+s+r;var d,a=((0==i.length?o+a.rowHeight:o+i[0].offsetHeight)-o)/3,i=o+a,o=i+a;return d={topRowSegment:i,middleRowSegment:o,bottomRowSegment:o+a}},_childValidation:function(e){var t,i=this._draggedRecord.parentItem;i&&(t=i.childRecords.indexOf(this._draggedRecord),e==i&&-1!=t&&(this._childItem=!0))},_isColumnHidable:function(e){this.model;var t=!0,i=this._frozenColumns.filter(function(e){return 1==e.visible}),s=this._unFrozenColumns.filter(function(e){return 1==e.visible});return 1==i.length&&i[0].field==e.field&&(t=!1),1==s.length&&s[0].field==e.field&&(t=!1),t},_updateColumnMenuVisibility:function(){var e,t=this.model,i=[],s=[];(t.showColumnChooser||t.contextMenuSettings.showContextMenu)&&(i=this._frozenColumns.filter(function(e){return 1==e.visible}),s=this._unFrozenColumns.filter(function(e){return 1==e.visible}),1==i.length&&(e=Z("#"+this._id+"_columnMenu_"+i[0].field.split(".").join("")).data("ejCheckBox"))&&e.option("enabled",!1),1==s.length&&(e=Z("#"+this._id+"_columnMenu_"+s[0].field.split(".").join("")).data("ejCheckBox"))&&e.option("enabled",!1))},_validDrop:function(e,t){var i=this;e.filter(function(e){e.hasChildRecords&&1==t.dragState&&(-1==Z.inArray(t,e.childRecords)?i._validDrop(e.childRecords,t):t.dragState=!1)})},_renderToolTip:function(e,t,i,s){var n=this,a=this.model,r=[],o=(document,n.model.columns,a.dragTooltip.tooltipItems.length,s.closest("tr"));Z(".e-dragintend").find(".e-icon").css({display:"none"}),Z(".e-intendparent").find(".e-icon").css({display:"none"}),Z(".e-error").css({display:"none"}),Z(".e-treegridexpand").css({display:"inline-block"}),Z(".e-treegridcollapse").css({display:"inline-block"}),n._isHierarchyFiltering&&Z("#"+n._id+"e-gridcontent").css({cursor:"no-drop"}),n._isHierarchyFiltering?(c=n.getIndexByRow(o),n._currentRecord=a.currentViewData[c]):0==o.length&&(s.hasClass("e-movablecontainer")||s.hasClass("e-gridcontent")||s.hasClass("e-content"))&&(c=n._recordIndex,n._currentRecord.parentItem||n._currentRecord.hasChildRecords&&(n._currentRecord.expanded?n._lastRow.find(".e-treegridexpand"):n._lastRow.find(".e-treegridcollapse")).css({display:"none"}));var r={},l=n.getUpdatedRecords();n._insertAbove=!1,n._insertAsChild=!1,n._insertBelow=!1,n._childItem=!1,n._draggedRecord,c!=n._draggedIndex&&(n._displayContextMenu=!1);var d=n.getExpandedRecords(l);n.getVisibleRange();var h=d.slice(n._visibleRange.top,n._visibleRange.bottom);a=0!=n._scrollTop?(l.indexOf(n._draggedRecord),h.indexOf(n._currentRecord)-1):(l.indexOf(n._draggedRecord),h.indexOf(n._currentRecord));var s=l.indexOf(n._currentRecord),c=n._currentRecord&&n._checkPrevNextRecord(n._draggedRecord,s,n._currentRecord.level,"next"),d=n._currentRecord&&n._checkPrevNextRecord(n._draggedRecord,s,n._currentRecord.level,"prev"),h=n._gridPosition.left,l=e.pageY;n._currentRecord&&(r=n.getRange(n._currentRecord,a,o));s=l<=r.topRowSegment,e=l>r.topRowSegment&&l<=r.middleRowSegment,a=l>r.middleRowSegment&&l<=r.bottomRowSegment;n._currentRecord&&(n.data=n._currentRecord,r=this._getrowName(),n._childValidation(n._currentRecord),n._isHierarchyFiltering||(n._currentRecord.parentItem?n._currentRecord.hasChildRecords&&(n._currentRecord.expanded?o.find(".e-treegridexpand"):o.find(".e-treegridcollapse")).css({display:"inline-block"}):n._currentRecord.hasChildRecords&&(n._currentRecord.expanded?o.find(".e-treegridexpand"):o.find(".e-treegridcollapse")).css({display:"none"}),n._validDrop(n._draggedRecords,n._currentRecord),1==n._currentRecord.dragState&&0!=i.canDrop?s&&!d?i.dropPosition="insertAbove":e&&0==n._childItem?i.dropPosition="insertAsChild":(!e||1!=n._childItem)&&(a&&!c||0==o.length)?i.dropPosition="insertBelow":i.dropPosition="invalidPosition":i.dropPosition="invalidPosition",n._trigger("rowDrag",i),1==n._currentRecord.dragState&&0!=i.canDrop?s&&!d?(Z(n.element).find("."+r).find(".e-aboveIcon").css({display:"block"}),n._insertAbove=!0):e&&0==n._childItem?(Z(n.element).find("."+r).find(".e-childIcon").css({display:"block"}),n._insertAsChild=!0):e&&1==n._childItem?(Z(n.element).find("."+r).find(".e-cancelIcon").css({display:"block"}),n.cancelDrop=!0):(a&&!c||0==o.length)&&(Z(n.element).find("."+r).find(".e-belowIcon").css({display:"block"}),n._insertBelow=!0):(Z(n.element).find("."+r).find(".e-cancelIcon").css({display:"block"}),n.cancelDrop=!0))),Z(n._dragmouseOverTooltip).css({top:l+20+"px",left:h+15+"px",position:"absolute","z-index":n.getMaxZIndex()+1,padding:"0","border-right":"0","border-bottom":"0","border-radius":"3px",height:"auto"})},_checkPrevNextRecord:function(e,t,i,s){this.model;var n=this.getUpdatedRecords(),a=t;for("next"==s?t++:t--;n[t];){if(n[t].level==i)return n[t]==e&&e.parentItem==n[a].parentItem;"next"==s?t++:t--}return!1},_createDragTooltipTemplate:function(){var e,t=this.model.dragTooltip.tooltipTemplate;t&&(e="#"==t.charAt(0)?Z(this.model.dragTooltip.tooltipTemplate)[0].innerHTML:this.model.dragTooltip.tooltipTemplate);t={};t[this._id+"dragtooltipTemplate"]=e,Z.templates(t)},_updateDragStateFalse:function(e,t){var i,s;if(e.dragState=!1,e.hasChildRecords){s=e.childRecords.length;for(var n=0;n<s;n++)(i=e.childRecords[n]).dragState=!1,i.hasChildRecords&&(t=this._updateDragStateFalse(i,t))}},_updateDragStateTrue:function(e,t){var i,s;if(!J.isNullOrUndefined(e)&&(e.dragState=!0,e.hasChildRecords)){s=e.childRecords.length;for(var n=0;n<s;n++)(i=e.childRecords[n]).dragState=!0,i.hasChildRecords&&(t=this._updateDragStateTrue(i,t))}},_getCoordinate:function(e){var t=e;return"touchmove"!=e.type&&"touchstart"!=e.type&&"touchend"!=e.type&&"taphold"!=e.type&&"tap"!=e.type||(t=e.originalEvent.changedTouches[0]),t},_getElementByPosition:function(e,t){return Z(document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset))},dragRecord:function(e){if(e.ctrlKey||e.shiftKey||2==e.which||3==e.which)return!0;var t=this,i=t.model,s={},n=t._getCoordinate(e),a=Z(e.target),r=a.closest("tr"),o=t.getUpdatedRecords(),l=!0;if(window.clearTimeout(this._dragTooltipTimer),this._dragTooltipTimer=null,!t._mouseDown)return!0;if(!r.hasClass("e-editedrow")&&t.editFormValidate()&&("cell"==i.selectionSettings.selectionMode&&t.clearSelection(),t._clearColumnMenu(),t._removeDetailsRow(),t._saveCellHandler(e),t._posx=n.pageX,t._posy=n.pageY,!(a.hasClass("e-summaryrowcell")||a.hasClass("e-footersummaryrowcell")||a.hasClass("e-summarytitle")||a.closest("tr").hasClass("e-detailsrowexpanded")||(i.enableVirtualization?(t._currentIndex=t.getIndexByRow(r),d=i.currentViewData[t._currentIndex],t._currentIndex=o.indexOf(d)):t._currentIndex=t.getIndexByRow(r),t._draggedIndex=h=t.getIndexByRow(r),t._draggedRecord=t.model.currentViewData[h],J.isNullOrUndefined(t._draggedRecord))))){s.draggedRowIndex=h,s.draggedRow=t._draggedRecord,!i.isFromGantt&&("checkbox"==i.selectionSettings.selectionType&&1<i.selectedItems.length&&"checked"==i.currentViewData[t.getIndexByRow(r)].checkboxState||"multiple"==i.selectionSettings.selectionType)?t._draggedRecords=Z.extend([],i.selectedItems).reverse():t._draggedRecords.push(t._draggedRecord),s.draggedRecords=t._draggedRecords,t._trigger("rowDragStart",s),s.draggedRow&&s.draggedRow.isSummaryRow&&(s.cancel=!0,s.draggedRow.canDrag=!1),0==s.draggedRow.canDrag&&(l=!1),Z.extend([],t._draggedRecords).filter(function(e){0==e.canDrag&&(t._draggedRecords.splice(t._draggedRecords.indexOf(e),1),e.canDrag=!0)}),t._gridPosition=t.getOffsetRect(Z("#"+t._id)[0]),0<t._frozenColumnsLength&&-1!=h&&(r.index(),c=(0<r.closest(".e-movablecontentdiv").length?Z(t._gridRows[0]):Z(t._gridRows[1]))[h],r=r.add(c));var o=t._gridPosition.left,d=n.pageY,h=i.isFromGantt?i.ganttElement.width():t._gridWidth,c=r.clone();h-=50,c.find(".e-hide").remove();var u=i.dragTooltip.tooltipItems.length,n=J.buildTag("table.e-zerospace","",{padding:"1",width:h-1,"border-collapse":"collapse"});if(t.model.dragTooltip.showTooltip&&0==t._dragTooltip)if(t.model.dragTooltip.tooltipTemplate||0!=t.model.dragTooltip.tooltipItems.length)if(0!=u){for(var p=i.columns,m=J.buildTag("tbody","",{},{}),g=J.buildTag("tr.e-dragtooltipbackground","",{},{}),f=0;f<u;f++)for(var _=0;_<p.length;_++)if(0!=p[_].visible&&(b=i.isFromGantt?p[_].mappingName:p[_].field,i.dragTooltip.tooltipItems[f]==b)){var v,b=t._getCustomCellValue(t._draggedRecord,p[_].field);p[_].format&&(b=t.formatting(p[_].format,b,i.locale)),J.isNullOrUndefined(b)||(v=J.buildTag("td.e-dragrowcell",b.toString(),{padding:"5px",width:t.columnsWidthCollection[_],height:i.rowHeight},{}),g.append(v)),g.append(v);break}m.append(g),n.append(m),t._dragmouseOverTooltip=J.buildTag("div.e-tooltipgantt e-js#tooltiptreegrid"+t._id,n,{top:d+20+"px",left:o+15+"px",position:"absolute","z-index":t.getMaxZIndex()+1,padding:"0","border-right":"0","border-bottom":"0","border-radius":"3px",height:"auto",width:h,overflow:"hidden"},{}),i.cssClass&&Z(t._dragmouseOverTooltip).addClass(i.cssClass),Z(t._dragmouseOverTooltip).addClass("e-dragtooltipbackground").addClass("e-dragrowcell"),t._dragTooltip=!0}else t.model.dragTooltip.tooltipTemplate&&(t._dragmouseOverTooltip=J.buildTag("div.e-tooltipgantt e-js#tooltiptreegrid"+t._id,"",{top:d+20+"px",left:o+15+"px",position:"absolute","z-index":t.getMaxZIndex()+1,padding:"0","border-right":"0","border-bottom":"0","border-radius":"3px",height:"auto"},{}),i.cssClass&&Z(t._dragmouseOverTooltip).addClass(i.cssClass),t.tooltipState="TemplateID",m=J.buildTag("tbody",Z.render[t._id+"dragtooltipTemplate"](t._draggedRecord),{},{}),t._dragmouseOverTooltip[0].innerHTML="<table>"+m[0].innerHTML+"</table>",t._dragTooltip=!0);else m=J.buildTag("tbody","",{},{}),c.find(".e-treegridexpand").css({display:"none"}),c.find("td.e-unboundcell").css({display:"none"}),c.find("td.e-detailsrowcell").css({display:"none"}),c.find(".e-treegridcollapse").css({display:"none"}),Z(c.find(".e-dragintend")).css({width:0}),c.find(".e-intend").removeClass("e-intend"),c.find(".e-rowcell ").removeClass("e-rowcell ").addClass("e-dragrowcell"),c.addClass("e-dragtooltipbackground"),i.isFromGantt&&c.find("td:last").remove(),2==c.length&&0<this._frozenColumnsLength&&(Z(c[0]).append(Z(c[1].childNodes)),c.splice(1,1)),m.append(c),n.append(m),t._dragmouseOverTooltip=J.buildTag("div.e-tooltipgantt e-js#tooltiptreegrid"+t._id,n,{top:d+20+"px",left:o+15+"px",position:"absolute",overflow:"hidden","z-index":t.getMaxZIndex()+1,padding:"0","border-radius":"3px","border-right":"0","border-bottom":"0",width:h},{}),i.cssClass&&Z(t._dragmouseOverTooltip).addClass(i.cssClass),Z(t._dragmouseOverTooltip).addClass("e-dragtooltipbackground").addClass("e-dragrowcell"),t._dragTooltip=!0;t._draggedRecord&&(t._draggedElement=r,t._updateDragStateFalse(t._draggedRecord),t._dragMouseDown=!0,"touchstart"==e.type?(t._isHierarchyFiltering||Z(document.body).append(t._dragmouseOverTooltip),t._off(t.element,"touchmove","#"+t._id+"e-gridcontent",t._touchScroll),t._on(t.element,"touchmove",".e-treegridrows, .e-templatecell",t.dragToolTip)):(t._off(t.element,"mousemove","#"+t._id+"e-gridcontent",t._touchScroll),t._on(t.element,"mousemove",".e-gridcontent, .e-templatecell",t.dragToolTip))),!s.cancel&&l||(t._dragMouseDown=!1,t._updateDragStateTrue(t._draggedRecord),t._dragTooltip=!1,t._dragmouseOverTooltip&&t._dragmouseOverTooltip.remove(),t._dragmouseOverTooltip=null,"touchstart"==e.type?t._off(t.element,"touchmove",".e-treegridrows, .e-templatecell",t.dragToolTip):t._off(t.element,"mousemove",".e-gridcontent, .e-templatecell",t.dragToolTip))}},dragToolTip:function(e){var t,i,s,n=this,a=n.model,r=a.currentViewData,o={},l=n._getCoordinate(e);e.preventDefault();var d,h=Math.abs(l.pageX-n._posx),c=Math.abs(l.pageY-n._posy);if(!(J.isNullOrUndefined(n._posx)||J.isNullOrUndefined(n._posy)||h<10&&c<10)&&1==n._dragMouseDown&&1==n.model.allowDragAndDrop){if(n._batchEditStarts)return n._batchSaveLostWarning("Drag"),!0;"touchmove"==e.type?s=n._getElementByPosition(l.pageX,l.pageY):(s=Z(e.target),Z(document.body).append(n._dragmouseOverTooltip)),c=s.closest("tr"),1!=a.allowSelection||J.isNullOrUndefined(n._draggedRecord)||0!=n._draggedRecord.isSelected||(n.clearSelection(-1),n._selectDraggedRow(c),n._cancelSaveTools()),0==c.length&&(s.hasClass("e-movablecontainer")||s.hasClass("e-gridcontent")||s.hasClass("e-content"))?(a.enableVirtualization?(n._currentRecord=r[r.length-1],n._insertBelow=!0,n._lastRow=J.TreeGrid.getRowByIndex(n,r.length-1),n._recordIndex=r.length-1):(e=n.getExpandedRecords(r),n._currentRecord=e[e.length-1],a.allowPaging?n._lastRow=J.TreeGrid.getRowByIndex(n,r.length-1):(d=a.updatedRecords.indexOf(n._currentRecord),n._lastRow=J.TreeGrid.getRowByIndex(n,d)),n._recordIndex=n._indexOfLastRow=n.getIndexByRow(n._lastRow)),d=n._recordIndex):(d=n.getIndexByRow(c),n._currentRecord=a.currentViewData[d]);a=n.getUpdatedRecords();-1!=d?(t=n.model.currentViewData[d],(i=(c=J.TreeGrid.getRowByIndex(n,n._currentIndex)).clone()).find(".e-hide").remove(),n._dragTargetItem=t,o.targetRowIndex=d,o.targetRow=t,o.canDrop=!0,o.draggedRow=n._draggedRecord,o.draggedRowIndex=a.indexOf(n._draggedRecord),o.draggedRecords=n._draggedRecords,n._renderToolTip(l,i,o,s),o.targetRow&&o.targetRow.isSummaryRow?(n._draggedRecord.canDrop=!1,Z(".e-dragintend").find(".e-icon").css({display:"none"}),Z(".e-intendparent").find(".e-icon").css({display:"none"})):0==o.canDrop?n._draggedRecord.canDrop=!1:n._draggedRecord.canDrop=!0):n._draggedRecord&&n._dragMouseDown&&(t=null,i=(c=J.TreeGrid.getRowByIndex(n,n._currentIndex)).clone(),c=s.closest("tr"),o.targetRowIndex=null,o.targetRow=null,n._dragTargetItem=null,o.canDrop=!0,o.draggedRow=n._draggedRecord,o.draggedRowIndex=n._draggedRecord.index,o.dropPosition="invalidPosition",n._trigger("rowDrag",o),c.hasClass("e-footersummaryrow")||n._renderToolTip(l,i,o,s)),n._mouseout(l)}},_mouseupHandler:function(e){var t=this,i=t.model;"touchend"==e.type?t._off(t.element,"touchmove","#"+t._id+"e-gridcontent",t._touchScroll):t._off(t.element,"mousemove","#"+t._id+"e-gridcontent",t._touchScroll),t._off(Z(document),"mouseup touchend",t._mouseupHandler),t._mouseDown=!1,t._isTouchEvent=!1,window.clearTimeout(t._dragTooltipTimer),i.allowDragAndDrop&&t._dragMouseDown&&t.dragMouseUp(e),i.contextMenuSettings.showContextMenu&&t._contextMenuHandler&&t._displayContextMenu?t._rightClick(e):t._contextMenuHandler=!1,t._displayContextMenu=!0,t._dy=t._dx=0},_performDragAndDrop:function(e,t,i,s,n){for(var a,r,o=this,l=o.model,d=(l.editSettings.editMode.toLowerCase(),0),h=l.selectedItems.length,c=o._draggedRecords.length,u=[],p={},m=0;m<c;m++){e=o._draggedRecord=o._draggedRecords[m];var g=l.flatRecords;s.previousParentItem=e.parentItem&&Z.extend({},e.parentItem),J.isNullOrUndefined(e.parentItem)||(s.previousParentItem.childRecords=Z.extend([],e.parentItem.childRecords),s.parentChildState=e.parentItem.hasChildRecords,s.parentExpandedState=e.parentItem.expanded),"rowIndexUpdate"!=s.requestType&&(n.targetRow=Z.extend({},o._droppedRecord),n.targetRow.item=Z.extend({},o._droppedRecord.item),n.targetRowIndex=l.updatedRecords.indexOf(t),n.draggedRow=Z.extend({},o._draggedRecord),n.draggedRow.item=Z.extend({},o._draggedRecord.item),n.draggedRowIndex=l.updatedRecords.indexOf(e)),s.previousItem=J.isNullOrUndefined(n)?Z.extend({},o._draggedRecord):n.draggedRow,s.previousItemIndex=g.indexOf(o._draggedRecord),s.previousTarget=o._droppedRecord,s.previousTargetItemIndex=g.indexOf(o._droppedRecord),s.clonedTarget=Z.extend({},o._droppedRecord),s.hasChildRecords=t.hasChildRecords,s.expanded=t.expanded,s.childIndex=s.previousParentItem?s.previousParentItem.childRecords.indexOf(e):0,s.previousLevel=e.level;if(1==t.dragState){if(o._updateDragStateTrue(e),1==o._insertAbove||1==o._insertBelow||1==o._insertAsChild){o.model.isEdit||o._isRowEdit||o._cancelSaveTools();for(var f=0;f<h;f++)o.clearSelection(l.selectedItems[f]);o._deleteDragRow();var _,v=g.indexOf(t);o._checkboxSelection&&l.selectionSettings.enableHierarchySelection&&e.parentItem&&o._updateParentSelection(e.parentItem),1==o._insertAbove?(s.index=v,e.parentItem=g[v].parentItem,e.level=g[v].level,g.splice(v,0,e),l.updatedRecords.splice(v,0,e),l.isFromGantt&&l.ids.splice(v,0,e.taskId.toString()),e.hasChildRecords&&(_=1,o._updateChildRecord(e,v),o._updateChildRecordLevel(e,_)),t.parentItem&&(r=(a=t.parentItem.childRecords).indexOf(t),a.splice(r,0,e),o._updateHierarchyRowIndexData(s,a,r))):1==o._insertBelow?(s.index=v+1,t.hasChildRecords?(d=o.getChildCount(t,0),g.splice(v+d+1,0,e),l.updatedRecords.splice(v+d+1,0,e),l.isFromGantt&&l.ids.splice(v+d+1,0,e.taskId.toString())):(g.splice(v+1,0,e),l.updatedRecords.splice(v+1,0,e),l.isFromGantt&&l.ids.splice(v+1,0,e.taskId.toString())),e.parentItem=g[v].parentItem,e.level=g[v].level,e.hasChildRecords&&(_=1,o._updateChildRecordLevel(e,_),o._updateChildRecord(e,v+d+1)),t.parentItem&&(r=(a=t.parentItem.childRecords).indexOf(t)+1,a.splice(r,0,e),o._updateHierarchyRowIndexData(s,a,r))):1==o._insertAsChild&&(s.index=v+1,e.hasChildRecords?(g.splice(v+1,0,e),l.updatedRecords.splice(v+1,0,e),l.isFromGantt&&l.ids.splice(v+1,0,e.taskId.toString()),o._recordLevel(i,s),t.hasChildRecords&&(t.expanded=o._isLoadonDemand?t.isChildRetrieved:t.expanded),o._updateChildRecord(e,v+1,t.expanded)):(g.splice(v+1,0,e),l.updatedRecords.splice(v+1,0,e),l.isFromGantt&&l.ids.splice(v+1,0,e.taskId.toString()),o._recordLevel(i,s)))}o._checkboxSelection&&l.selectionSettings.enableHierarchySelection&&(e.parentItem&&o._updateParentSelection(e.parentItem),o.selectAllRows()),null==e.parentItem&&(v=(g=l.parentRecords).indexOf(o._droppedRecord),1==o._insertBelow?g.splice(v+1,0,e):1==o._insertAbove&&g.splice(v,0,e),v=1==o._insertBelow?v+1:v,o._updateHierarchyRowIndexData(s,g,v))}u.push(e)}return p.draggedRecords=u,p.draggedRecord=e,p.droppedRecord=t,p},_updatedMovedRow:function(e,t,i,s,n,a){var r,o,l=this,d=l.model;if(s.draggedRow=e,s.targetRow=t,s.droppedPosition=i,!d.isFromGantt&&a)for(var h=0;h<a.length;h++)l._draggedRecord=a[h],l._updateDataSource();else l._updateDataSource();d.showSummaryRow&&1==l._insertAsChild&&l._createSummaryRow(s),d.enableWBS&&(o=(r=e.parentItem?e.parentItem.childRecords:d.flatRecords.filter(function(e){return e&&0==e.level})).indexOf(e),t=r.slice(o,r.length),r=e.parentItem?e.parentItem.WBS:null,o=o+1,l.reCalculateWBS(t,o,r)),d.isFromGantt&&(n=(e=d.flatRecords.indexOf(e))<n?e:n,l.updateSerialNumber(n),d.enableSerialNumber&&("insertAsChild"==i&&--n,l.updateSerialNumberPredecessors(n))),l.processBindings(s),d.enableAltRow&&0<d.currentViewData.length&&J.TreeGrid.updateAltRow(l,l.model.currentViewData[0],0,0)},_navigatePager:function(e){var t,i=this.model,s=i.pageSettings.pageSize;i.pageSettings.pageSizeMode==J.TreeGrid.PageSizeMode.Root&&(t=this._getRootParent(i.updatedRecords[e]),e=i.parentRecords.indexOf(t)),s=Math.ceil((e+1)/s),this.gotoPage(s)},_getRootParent:function(e){return J.isNullOrUndefined(e.parentItem)?e:this._getRootParent(e.parentItem)},moveRow:function(e,t,i){var s=this,n=s.model,a={},r={};if(s._cancelEditState(),"batchediting"==n.editSettings.editMode.toLowerCase()&&s._batchEditStarts)return!1;J.isNullOrUndefined(t)&&("above"==i||"child"==i?t=e-1:"below"==i&&(t=e+1));var o=n.updatedRecords[e],l=n.updatedRecords[t];if(l&&l.isSummaryRow&&(l=s._getNextRecord(t,n.updatedRecords,i)),J.isNullOrUndefined(o)||J.isNullOrUndefined(l)||1==o.isSummaryRow||1==l.isSummaryRow||!s.getExpandStatus(o)||!s.getExpandStatus(l))return!1;if(s._draggedRecord=o,s._droppedRecord=l,s._draggedRecords.push(o),a.currentRecord=o,a.targetRecord=l,a.currentRowIndex=e,a.targetRowIndex=t,a.dropPosition=i,a.requestType="rowIndexUpdate",s._moveRow=!0,!s._trigger("actionBegin",a)){if(s._validDrop(s._draggedRecords,l),1!=l.dragState)return l.dragState=!0,s._resetPrivateProperties(),!1;if("above"==i)s._insertAbove=!0;else if("below"==i)s._insertBelow=!0;else{if("child"!=i||-1!=Z.inArray(o,l.childRecords))return s._resetPrivateProperties(),!1;s._insertAsChild=!0}s._performDragAndDrop(o,l,e,a),s._updatedMovedRow(o,l,i,a),n.allowPaging&&s._navigatePager(n.updatedRecords.indexOf(o)),s.updateScrollBar(s.getUpdatedRecords().indexOf(o)),1==n.allowSelection&&(s.clearSelection(-1),s._selectDraggedRow(),s._cancelSaveTools()),r.currentRecord=o,r.targetRecord=l,r.currentRowIndex=n.updatedRecords.indexOf(o),r.targetRowIndex=n.updatedRecords.indexOf(l),r.dropPosition=a.dropPosition,r.requestType=a.requestType,s._trigger("actionComplete",r);a={};return a.draggedRowIndex=r.currentRowIndex,a.targetRowIndex=r.targetRowIndex,a.requestType="dragAndDrop",s._updateAction(a),s._resetPrivateProperties(),!0}},dragMouseUp:function(e){var t,i,s,n={},a={},r={},o=this,l=o.model,d=o._draggedRecord,h=(o._currentRecord,o._getCoordinate(e)),c=l.flatRecords.indexOf(d);d.isDragged=!0,o._timerDragDown&&(o._timerDragDown=window.clearInterval(o._timerDragDown)),o._timerDragUp&&(o._timerDragUp=window.clearInterval(o._timerDragUp)),l.allowDragAndDrop&&("touchstart"==e.type?o._off(o.element,"touchmove",".e-treegridrows, .e-templatecell",o.dragToolTip):o._off(o.element,"mousemove",".e-gridcontent, .e-templatecell",o.dragToolTip),u=!!(J.isNullOrUndefined(d)||1<o._draggedRecords.length)||d.canDrop),window.clearTimeout(o._dragTooltipTimer),o._dragMouseDown=!1,Z(o._dragmouseOverTooltip).remove(),o._dragTooltip=!1,i=(t="touchend"==e.type?o._getElementByPosition(h.pageX,h.pageY):Z(e.target)).closest("tr"),o._isHierarchyFiltering&&Z("#"+o._id+"e-gridcontent").css({cursor:"default"}),Z(".e-dragintend").find(".e-icon").css({display:"none"}),Z(".e-intendparent").find(".e-icon").css({display:"none"});var u,p,m,g,f,h=l.currentViewData[o.getIndexByRow(i)];if(1!=this.cancelDrop||J.isNullOrUndefined(h)||null!=h.parentItem||(e=J.TreeGrid.getRowByIndex(this,l.updatedRecords.indexOf(h)),(h.expanded?e.find(".e-treegridexpand"):e.find(".e-treegridcollapse")).css({display:"inline-block"})),o._dragMouseLeave=!0,1!=t.closest("#"+o._id).length||1!=t.closest(".e-gridcontent").length||J.isNullOrUndefined(d)||0!=o._dropCancel)o._updateDragStateTrue(d);else{if(!l.allowDragAndDrop||!u)return o._updateDragStateTrue(d),o._resetPrivateProperties(),0;o._dragMouseLeave=!1,0==i.length?(p=g=o._indexOfLastRow,l.enableVirtualization?o._droppedRecord=l.currentViewData[l.currentViewData.length-1]:l.currentViewData[l.currentViewData.length-1].expanded?(o._insertBelow=!0,o._droppedRecord=l.currentViewData[l.currentViewData.length-1]):(u=o.getExpandedRecords(l.currentViewData),o._droppedRecord=u[u.length-1])):(g=o.getIndexByRow(i),o._droppedRecord=l.currentViewData[g],p=l.updatedRecords.indexOf(o._droppedRecord)),p!=o._currentIndex&&-1!=g&&0!=o._draggedRecords.length?(1==o._droppedRecord.dragState&&(-1!=Z.inArray(o._droppedRecord,o._draggedRecords)&&(p=o._draggedRecords.indexOf(o._droppedRecord),o._draggedRecords.splice(p,1)),"checkbox"==l.selectionSettings.selectionType&&1==l.selectionSettings.enableHierarchySelection&&Z.extend([],o._draggedRecords).filter(function(e){e.parentItem&&"checked"==e.parentItem.checkboxState&&o._draggedRecords.splice(o._draggedRecords.indexOf(e),1)})),1==o._insertAbove&&1<o._draggedRecords.length&&o._draggedRecords.reverse(),o._insertAbove?s="insertAbove":o._insertBelow?s="insertBelow":o._insertAsChild&&(s="insertAsChild"),r.draggedRecords=o._draggedRecords,r.draggedRow=d,r.draggedRow.item=d.item,r.targetRow=o._droppedRecord,r.draggedRowIndex=l.updatedRecords.indexOf(d),r.targetRowIndex=l.updatedRecords.indexOf(o._droppedRecord),r.dropPosition=s,f=o._droppedRecord,o._trigger("rowDropActionBegin",r)||(Z.extend([],o._draggedRecords).filter(function(e){0==e.canDrop&&(o._draggedRecords.splice(o._draggedRecords.indexOf(e),1),e.canDrop=!0),0==o._draggedRecords.length&&(f.dragState=!1)}),d=(r=this._performDragAndDrop(d,f,g,n,a)).draggedRecord,g=r.draggedRecords,f=r.droppedRecord,n.requestType="dragAndDrop",1!=f.dragState||o._isHierarchyFiltering?o._updateDragStateTrue(d):(o._updatedMovedRow(d,f,s,n,c,g),l.isFromGantt||(a.draggedRecords=g),a.draggedRow=n.draggedRow,a.draggedRow.item=n.draggedRow.item,a.draggedRowIndex=l.updatedRecords.indexOf(d),a.targetRowIndex=l.updatedRecords.indexOf(f),a.requestType=s,n.isFromRevertDragging=!1,o._trigger("rowDragStop",a),a.cancel?(n.isFromRevertDragging=!0,o._revertDragging(n)):((m={}).draggedRecords=g,m.draggedRowIndex=a.draggedRowIndex,m.targetRowIndex=a.targetRowIndex,m.requestType="dragAndDrop",o._updateAction(m)),l.allowSelection&&("row"==l.selectionSettings.selectionMode&&(!l.isFromGantt&&("checkbox"==l.selectionSettings.selectionType&&-1!=Z.inArray(d,l.selectedItems)||"multiple"==l.selectionSettings.selectionType)&&1<l.selectedItems.length?(m=l.selectedItems.filter(function(e){if(1==e.isDragged)return e.isDragged=!1,e}),m=o.getUpdatedRecords().indexOf(m[0]),o.clearSelection(m),o._multiSelectCtrlRequest=!0,-1!=m&&l.allowSelection&&!o._rowSelectingEventTrigger(this.selectedRowIndex(),m)&&(o.selectRows(m),o._rowSelectedEventTrigger(m))):o._selectDraggedRow(i)),"cell"==l.selectionSettings.selectionMode&&o.updateScrollBar(l.updatedRecords.indexOf(o._draggedRecord)))))):(o._updateDragStateTrue(d),o.model.isEdit||o._isRowEdit||o._cancelSaveTools())}J.isNullOrUndefined(o._currentRecord)||null==o._currentRecord.parentItem&&(i=l.allowPaging?J.TreeGrid.getRowByIndex(o,o.getUpdatedRecords().indexOf(o._currentRecord)):J.TreeGrid.getRowByIndex(o,l.updatedRecords.indexOf(o._currentRecord)),(o._currentRecord.expanded?i.find(".e-treegridexpand"):i.find(".e-treegridcollapse")).css({display:"inline-block"})),l.showSummaryRow&&"dragAndDrop"==n.requestType&&1!=o._insertAsChild&&!o._isHierarchyFiltering&&o._updateSummaryRow(n),o._dropCancel=!1,J.isNullOrUndefined(f)||(f.dragState=!0),o._resetPrivateProperties(),J.isNullOrUndefined(d)||o.model.isEdit||o._isRowEdit||o._cancelSaveTools(),J.isNullOrUndefined(d)||1!=d.isDragged||(d.isDragged=!1)},dragColumn:function(e){var t=Z(e.target),i=this,s=i._getCoordinate(e);if(i._posx=s.pageX,i._posy=s.pageY,e.ctrlKey||e.shiftKey||2==e.which||3==e.which)return!0;var n=i.model,a=n.columns,r={};if("col-resize"!=t.css("cursor")&&t.closest(".e-headercelldiv")&&!t.hasClass("e-columnmenu-icon")){s=t.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname");if(!J.isNullOrUndefined(s)||!J.isNullOrUndefined(this.getColumnByField(s))){if(i._saveEditedElements(),t.hasClass("e-checkbox"))return!1;i._draggedColumn=this.getColumnByField(s),a=a.indexOf(i._draggedColumn),r.draggedColumnIndex=a,r.draggedColumn=i._draggedColumn,r.requestType="columnDragStart",J.isNullOrUndefined(i._draggedColumn.headerTemplateID)?i._draggedColumnTemplate=null:i._draggedColumnTemplate=t.closest(".e-headertemplate"),J.isNullOrUndefined(i._draggedColumn.nonColumn)&&(i._trigger("columnDragStart",r),r.cancel||("cell"==n.selectionSettings.selectionMode&&i.clearSelection(),i._headerDragStatus="mousedown",i._dragMouseDown=!0,i._mouseDragged=!1,n=i.getOffsetRect(i.element[0]),i._gridLeft=n.left,i._gridTop=n.top,i._touchstart=!0,"touchstart"!=e.type&&i._on(i.element,"mousemove",i.dragColumnToolTip)))}}},dragColumnToolTip:function(e){var t,i,s,n,a,r,o=this,l=o.model,d={},h=l.columns,c={},u=o._getCoordinate(e),p=u.pageX,m=u.pageY;o._touchstart?o._touchstart=!1:(r="touchmove"==e.type?(e.preventDefault(),o._getElementByPosition(u.pageX,u.pageY)):Z(e.target),0<o._headerDragStatus.length&&1==l.allowColumnReordering&&("cell"==l.selectionSettings.selectionMode&&"mousemove"!=o._headerDragStatus&&o.clearSelection(),n=(t=r.closest(".e-headercell")).find(".e-headercelldiv").attr("data-ej-mappingname"),i=o._gridLeft+o._gridWidth-10,s=o._gridHeight+o._gridTop,a=p,u=m,J.isNullOrUndefined(o._dragmouseOverTooltip)||(e=o._dragmouseOverTooltip.width/2,r=o._dragmouseOverTooltip.height+5,a-e<o._gridLeft?a=o._gridLeft:i<a+e?a=i-2*e-4:a-=e,s<u+r&&(u=s-r)),J.isNullOrUndefined(n)||J.isNullOrUndefined(this.getColumnByField(n))?J.isNullOrUndefined(o._dragmouseOverTooltip)||Z(o._dragmouseOverTooltip).css({top:u+"px",left:a+"px"}):(n=this.getColumnByField(n),o._currentIndex=h.indexOf(n),d.targetColumnIndex=o._currentIndex,d.draggedColumnIndex=h.indexOf(o._draggedColumn),d.draggedColumn=o._draggedColumn,d.targetColumn=n,d.requestType="columnDrag",d.canDrop=!0,o._trigger("columnDrag",d),d.cancel||(d.direction=d.draggedColumnIndex>=d.targetColumnIndex?"left":"right",c.pos=o.getOffsetRect(t[0]),c.height=Z(t).height(),c.width=Z(t).outerWidth(),c.pos.top=o.getOffsetRect(t.closest(".e-gridheader")[0]).top,c.display="block","left"==d.direction&&o._gridLeft>c.pos.left?c.pos.left=o._gridLeft:"right"==d.direction&&i<c.pos.left+c.width?c.pos.left=i-10:c.pos.left=d.draggedColumnIndex>d.targetColumnIndex?c.pos.left-2:c.pos.left+c.width-2,d.column=c,o._autoHscroll(p,m,d),d.draggedColumnIndex!=d.targetColumnIndex&&(o._displayContextMenu=!1),(d.draggedColumnIndex==d.targetColumnIndex||!J.isNullOrUndefined(d.targetColumn.nonColumn)||c.pos.left-8>o._gridWidth+o._gridLeft)&&(c.display="none"),"mousemove"==o._headerDragStatus||o._dragTooltip?(Z(o._reordervline).css({height:o._reordervline.height,width:0,"border-width":0,position:"absolute",top:c.pos.top+"px",left:c.pos.left+"px","border-left-width":"3px","border-style":"solid",display:c.display}),Z(o._dragmouseOverTooltip).css({top:u+"px",left:a+"px"})):(u=o._gridHeight-1,o.model.toolbarSettings.showToolbar&&(u-=J.isNullOrUndefined(Z("#"+o._id+"_toolbarItems").outerHeight())?0:Z("#"+o._id+"_toolbarItems").outerHeight()),u-=o.getScrollElement().ejScroller("isHScroll")?18:0,a=J.buildTag("div",o._draggedColumn.headerText,{"margin-top":"5px"}),J.isNullOrUndefined(o._draggedColumnTemplate)||J.isNullOrUndefined(o._draggedColumn)||J.isNullOrUndefined(o._draggedColumn.headerTemplateID)||(a[0].innerHTML=o._draggedColumnTemplate[0].innerHTML),o._dragmouseOverTooltip=J.buildTag("div.e-tooltipgantt e-js#columnreordertooltip"+o._id,a,{top:m+10+"px",left:p-57+"px",position:"absolute","z-index":o.getMaxZIndex()+1},{}),l.cssClass&&o._dragmouseOverTooltip.addClass(l.cssClass),o._reordervline=J.buildTag("div.e-vline e-js#reorderline"+o._id,{height:u,width:0,"border-width":0,position:"absolute",top:c.pos.top+"px",left:c.pos.left+"px","border-left-width":"3px","border-style":"solid",display:c.display}),l.cssClass&&o._reordervline.addClass(l.cssClass),Z(document.body).append(o._dragmouseOverTooltip),Z(document.body).append(o._reordervline),Z(o._dragmouseOverTooltip).addClass("e-headertooltip"),Z(o._reordervline).addClass("e-headervline"),o._dragmouseOverTooltip.width=Z(o._dragmouseOverTooltip).outerWidth(),o._dragmouseOverTooltip.height=Z(o._dragmouseOverTooltip).outerHeight(),o._reordervline.height="auto"==l.sizeSettings.height?Z("#"+o._id+"e-gridcontent").height()+Z("#"+o._id+"e-gridheader").height():u,o._dragTooltip=!0),o._headerDragStatus="mousemove"))))},reorderColumn:function(e,t){var i,s,n,a,r,o=this,l=o.model,d=l.columns;if(l.showTotalSummary&&l.collapsibleTotalSummary&&(r=d[o._summaryColumnIndex]),a=d[l.treeColumnIndex],i=o.getColumnByField(e),s=d.indexOf(i),n=o.columnsWidthCollection[s],e=d[t],!(J.isNullOrUndefined(i)||J.isNullOrUndefined(e)||e&&e.nonColumn)){if(0<o._frozenColumnsLength)if(e=this._getFrozenColumnWidth(),o._frozenColumnsLength<=s&&o._frozenColumnsLength>t&&-1==o._frozenColumns.indexOf(i)){if((e+=this.columnsWidthCollection[s]+18)>this._gridWidth)return!1;i.isFrozen=!0,o._frozenColumns.splice(t,0,i)}else o._frozenColumnsLength>s&&o._frozenColumnsLength<=t&&-1!=o._frozenColumns.indexOf(i)&&(i.isFrozen=!1,o._frozenColumns.splice(s,1),o._checkboxSelection&&1==o._frozenColumns.length&&o._frozenColumns[0].nonColumn&&(o._frozenColumns[0].isFrozen=!1,o._frozenColumns.splice(0,1)));d.splice(s,1),o.columnsWidthCollection.splice(s,1),d.splice(t,0,i),o.columnsWidthCollection.splice(t,0,n),l.treeColumnIndex=d.indexOf(a),l.showTotalSummary&&l.collapsibleTotalSummary&&(o._summaryColumnIndex=d.indexOf(r)),o._refreshFrozenColumns(),o._updateWrapRowHeights(null,"virtualRefresh")}},_refreshStackedHeader:function(){var e=this,t=e.model;if(t.showStackedHeader){for(var i,s,n,a,r=t.stackedHeaderRows,o=0;o<r.length;o++)0!=e._frozenColumnsLength?(i=Z(e.getHeaderContent().find(".e-frozenheaderdiv")),s=Z(e.getHeaderContent().find(".e-movableheader")),n=e._createStackedRow(r[o],!0),a=e._createStackedRow(r[o],!1),Z(i.find("tr.e-stackedHeaderRow")[o]).replaceWith(n),Z(s.find("tr.e-stackedHeaderRow")[o]).replaceWith(a)):(a=e._createStackedRow(r[o],!1),e.getHeaderTable().find("tr.e-stackedHeaderRow")[o]?Z(e.getHeaderTable().find("tr.e-stackedHeaderRow")[o]).replaceWith(a):a.insertBefore(e.getHeaderTable().find("tr.e-columnheader:last")));e._updateScrollCss()}},_autoHscroll:function(e,t,i){var s=this,n=(s.model.columns,0),a=(s.columnsWidthCollection,s.getScrollElement()),r=a.ejScroller("isHScroll")?a.find(".e-content").get(0).scrollWidth:0;s._viewPortWidth=a.find(".e-content").width(),0<s._frozenColumnsLength&&(n=this._getFrozenColumnWidth());var o=Math.round(10*(s._gridLeft+s._gridWidth)/100)+18,a=Math.round(10*s._gridLeft/100)+18,l=0;s._gridLeft+s._gridWidth-o<e?s._timerDragDown||(s._timerDragDown=window.setInterval(function(){r>s._scrollLeft+s._viewPortWidth&&(l=s._scrollLeft,l+=50,s.getScrollElement().ejScroller("scrollX",l,!0))},300)):s._timerDragDown&&(s._timerDragDown=window.clearInterval(s._timerDragDown)),e<s._gridLeft+n+a&&e>s._gridLeft+n&&0!=s._scrollLeft&&0<s._scrollLeft?s._timerDragUp||(s._timerDragUp=window.setInterval(function(){0<s._scrollLeft&&(l=s._scrollLeft,(l-=50)<0&&(l=0),s.getScrollElement().ejScroller("scrollX",l,!0))},300)):s._timerDragUp&&(s._timerDragUp=window.clearInterval(s._timerDragUp))},_resetPrivateProperties:function(){this._timerDragDown&&(this._timerDragDown=window.clearInterval(this._timerDragDown)),this._timerDragUp&&(this._timerDragUp=window.clearInterval(this._timerDragUp));var e=this,t=e.model;e.cancelDrop=!1,e._draggedRecord=null,e._draggedRecords=[],e._dragMouseDown=!1,e._timerDragDown=null,e._timerDragUp=null,e._childItem=!1,e._dragMouseLeave=!1,e._moveRow=!1,e._currentRecord=null,e._currentIndex=null,e._droppedRecord=null,e._insertAsChild=!1,e._insertAbove=!1,e._insertBelow=!1,t.allowDragAndDrop&&t.enableVirtualization&&("chrome"==J.browserInfo().name||J.isTouchDevice())&&(e._dummyElement&&Z(e._draggedElement).remove(),e._dummyElement=!1,e._draggedElement=null),e._dragTooltipTimer=null,e._dragColumnTooltipTimer=null,e._dragmouseOverTooltip=null},_selectDraggedRow:function(e){var t=this.model,i=this.getUpdatedRecords().indexOf(this._draggedRecord);-1!=i&&(this._focusTreeGridElement(),t.allowSelection&&"row"==t.selectionSettings.selectionMode&&!this._rowSelectingEventTrigger(this.selectedRowIndex(),i)&&(this.selectRows(i),this._rowSelectedEventTrigger(i)))},_addChildItem:function(e){for(var t,i=e.childRecords.length,s=0;s<i;s++)t=e.childRecords[s],this.dataSource()instanceof J.DataManager?this.dataSource().dataSource.offline&&this.dataSource().dataSource.json&&(this.dataSource().dataSource.json.push(t.item),t.hasChildRecords&&this._addChildItem(t)):(this.dataSource().push(t.item),t.hasChildRecords&&this._addChildItem(t))},_updateDataSource:function(){var e,t,i=this,s=i.model,n=i._draggedRecord,a=i._droppedRecord;if(i.dataSource()instanceof J.DataManager?i.dataSource().dataSource.offline&&i.dataSource().dataSource.json&&(e=i.dataSource().dataSource.json):e=i.dataSource(),e&&!a.parentItem)t=e.indexOf(a.item),i._insertAbove?s.parentIdMapping||e.splice(t,0,n.item):i._insertBelow&&(s.parentIdMapping||e.splice(t+1,0,n.item));else if(!s.parentIdMapping&&a.parentItem&&(i._insertAbove||i._insertBelow)){a.parentItem.item[i.model.childMapping]=[];for(var r=a.parentItem.childRecords,o=0;o<r.length;o++)a.parentItem.item[i.model.childMapping].splice(o,0,r[o].item)}s.parentIdMapping&&(n.parentItem?i._insertAbove||i._insertBelow?1==s.isFromGantt?n.item[s.parentIdMapping]=a.item[i.model.parentIdMapping]:(n[s.parentIdMapping]=a[i.model.parentIdMapping],n.item[s.parentIdMapping]=a[i.model.parentIdMapping]):1==s.isFromGantt?n.item[s.parentIdMapping]=a.item[i.model.idMapping]:(n[s.parentIdMapping]=a[i.model.idMapping],n.item[s.parentIdMapping]=a[i.model.idMapping]):(n.item[s.parentIdMapping]=null,n[s.parentIdMapping]=null),i.dataSource()instanceof J.DataManager?i.dataSource().dataSource.offline&&i.dataSource().dataSource.json&&i.dataSource().dataSource.json.push(n.item):((i._insertAbove||i._insertBelow||i._insertAsChild)&&i.dataSource().push(n.item),n.hasChildRecords&&i._addChildItem(n)))},_deleteDragRow:function(e){var t=this.model,i={},s=this.getUpdatedRecords(),t=t.flatRecords,n=-1!=s.indexOf(this._draggedRecord)?(n=s.indexOf(this._draggedRecord),s[n]):(n=t.indexOf(this._draggedRecord),t[n]);i.tr=e,i.data=n,i.requestType=J.TreeGrid.Actions.Delete,i.isDragAndDropDelete=!0,this._removeRecords(i),this._previousIndex=-1},_revertDragging:function(e){var t,i,s=this,n=s.model,a=n.flatRecords;s._draggedRecord=e.draggedRow,s._deleteDragRow(),s._draggedRecord.hasChildRecords?(a.splice(e.previousItemIndex,0,s._draggedRecord),n.isFromGantt&&n.ids.splice(e.previousItemIndex,0,s._draggedRecord.taskId.toString()),J.isNullOrUndefined(a[e.previousItemIndex].parentItem)||(a[e.previousItemIndex].parentItem=e.previousParentItem,J.isNullOrUndefined(e.previousParentItem)||a[e.previousItemIndex].parentItem.childRecords.splice(e.childIndex,0,s._draggedRecord)),t=n.flatRecords.indexOf(s._draggedRecord),s._updateChildRecord(s._draggedRecord,t,e.previousItem.index),s._draggedRecord.level=e.previousLevel,s._updateChildRecordLevel(s._draggedRecord,e.previousLevel)):(a.splice(e.previousItemIndex,0,s._draggedRecord),n.isFromGantt&&n.ids.splice(e.previousItemIndex,0,s._draggedRecord.taskId.toString()),a[e.previousItemIndex].parentItem=e.previousItem.parentItem,J.isNullOrUndefined(e.previousParentItem)||(a[e.previousItemIndex].parentItem.childRecords.splice(e.childIndex,0,s._draggedRecord),a[e.previousItemIndex].parentItem.hasChildRecords=!0,a[e.previousItemIndex].parentItem.hasFilteredChildRecords=!0,a[e.previousItemIndex].parentItem.expanded=!0),a[e.previousItemIndex].level=e.previousLevel),n.parentIdMapping&&(a[e.previousItemIndex][n.parentIdMapping]=e.previousItem[n.parentIdMapping],a[e.previousItemIndex].item[n.parentIdMapping]=e.previousItem[n.parentIdMapping]),J.isNullOrUndefined(e.previousItem.parentItem)||(e.previousItem.parentItem.hasChildRecords=e.parentChildState,e.previousItem.parentItem.expanded=e.parentExpandedState,n.childMapping&&e.previousItem.parentItem.item[s.model.childMapping]&&e.previousItem.parentItem.item[s.model.childMapping].splice(e.childIndex,0,e.previousItem.item)),n.isFromGantt&&(a[e.previousTargetItemIndex]=e.previousTarget,1==e.previousTarget.isAutoSchedule?(e.previousTarget.startDate=e.previousTarget.item[e.model.startDateMapping]=new Date(e.clonedTarget.startDate),e.previousTarget.endDate=new Date(e.clonedTarget.endDate),e.previousTarget.duration=e.clonedTarget.duration,e.previousTarget.status=e.clonedTarget.status,e.model.endDateMapping&&(e.previousTarget.item[e.model.endDateMapping]=new Date(e.clonedTarget.endDate)),e.model.progressMapping&&(e.previousTarget.item[e.model.progressMapping]=e.clonedTarget.status),e.model.durationMapping&&(e.previousTarget.item[e.model.durationMapping]=e.clonedTarget.duration),e.previousTarget.expanded=e.clonedTarget.expanded,Z("#"+s._id.replace("ejTreeGrid","")).data("ejGantt")._updateTargetGanttRecord(e.previousTarget)):(e.previousTarget.manualStartDate=new Date(e.clonedTarget.manualStartDate),e.previousTarget.manualEndDate=new Date(e.clonedTarget.manualEndDate),e.previousTarget.manualDuration=e.clonedTarget.manualDuration,e.previousTarget.status=e.clonedTarget.status,e.model.progressMapping&&(e.previousTarget.item[e.model.progressMapping]=e.clonedTarget.status),e.previousTarget.expanded=e.clonedTarget.expanded,Z("#"+s._id.replace("ejTreeGrid","")).data("ejGantt")._updateGanttRecord(e.previousTarget))),n.enableWBS&&(a=(t=(i=s._draggedRecord).parentItem?i.parentItem.childRecords:n.flatRecords.filter(function(e){return e&&0==e.level})).indexOf(i),t=t.slice(a,t.length),i=i.parentItem?i.parentItem.WBS:null,a=a+1,s.reCalculateWBS(t,a,i)),s.processBindings(e),0<n.currentViewData.length&&J.TreeGrid.updateAltRow(s,n.currentViewData[0],0,0)},_updateChildRecord:function(e,t,i){var s,n,a=this.model;if(!e.hasChildRecords)return 0;n=e.childRecords.length;for(var r=0;r<n;r++)s=e.childRecords[r],t++,a.flatRecords.splice(t,0,s),a.updatedRecords.splice(t,0,s),a.isFromGantt&&a.ids.splice(t,0,s.taskId.toString()),s.hasChildRecords&&(t=this._updateChildRecord(s,t));return t},_recordLevel:function(e,t){var i,s=this,n=s.model,a=s._draggedRecord,r=s._droppedRecord,o=s.model.childMapping;r.hasChildRecords||(r.hasChildRecords=!0,r.hasFilteredChildRecords=!0,s._isLoadonDemand&&(r.isChildRetrieved=!0),(J.util.isNullOrUndefined(r.childRecords)||Z.isEmptyObject(r.childRecords))&&(r.childRecords=[],n.parentIdMapping||(r.item[o]=[]))),s._insertAsChild&&((a.parentItem=r).childRecords.splice(0,0,a),i=r.childRecords,s._updateHierarchyRowIndexData(t,i,0),J.isNullOrUndefined(a)||J.isNullOrUndefined(r.item[o])||n.parentIdMapping||r.item[o].splice(0,0,a.item),a.hasChildRecords?(a.level=r.level+1,s._updateChildRecordLevel(a,1)):a.level=r.level+1,!r.expanded&&r.hasChildRecords&&n.isFromGantt&&!n.enableVirtualization&&s.updateExpandStatus(r,!0),r.expanded=!0,s._isLoadonDemand&&!r.isChildRetrieved&&(r.expanded=!1),s._parentRecords.push(r))},_updateChildRecordLevel:function(e,t){var i,s;if(t++,!e.hasChildRecords)return 0;i=e.childRecords.length;for(var n=0;n<i;n++)(s=e.childRecords[n]).level=e.parentItem?e.parentItem.level+t:e.level+1,s.hasChildRecords&&(t--,t=this._updateChildRecordLevel(s,t));return t},_filterBarClose:function(e){var t,i=Z(e.target);"click"==e.type&&i.hasClass("e-cancel")&&((t=i.prev()).focus().val(""),t.prop("checked",!1),t.trigger("keyup"),e.stopPropagation()),"focusin"==e.type&&(i=Z(e.target).next(),this.getHeaderTable().find(".e-cancel").addClass("e-hide"),i.removeClass("e-hide"))},_checkIdenticalValue:function(e,t){for(var i,s=this.model.filterSettings.filteredColumns,n=s.length,a=0;a<n;a++)if(s[a].value===e&&s[a].field==t.field){i=!0;break}return i},_filterBarHandler:function(e){var t,i=this,s=i.model;if(i.model.isEdit?i.cancelEditCell():i._isRowEdit&&i.cancelRowEditCell(),i._isRefreshAddedRecord=!1,i.clearAllSelection(),t=e.target==P?Z(e):Z(e.target),this.model.allowFiltering){i.model.columns,i._cellEditingDetails,i._queryManagar.queries[0];var n=t.hasClass("e-ddl")?t.find("input.e-field"):t;i._fieldName=n[0].id.replace(i._id+"_","").replace("_filterbarcell",""),this._currentFilterColumn=J.TreeGrid.getColumnByField(s.columns,i._fieldName),i._fieldName=this._currentFilterColumn.field;var a=this._currentFilterColumn;if(t.hasClass("e-checkbox"))i._filterString=t[0].checked;else if(t.hasClass("e-ddl")){t=t.find("input.e-dropdownlist");n=Z("#"+t[0].id).data("ejDropDownList");if(-1==n.selectedIndexValue||i._checkIdenticalValue(n._selectedValue,this._currentFilterColumn))return!0;i._filterString=n._selectedValue}else if(t.hasClass("e-dropdownlist")){var r=Z("#"+t[0].id).data("ejDropDownList");if(-1==r.selectedIndexValue||i._checkIdenticalValue(r._selectedValue,this._currentFilterColumn))return!0;r._selectedValue==i._dropDownListClearText?i._filterString="":i._filterString=r._selectedValue}else if(t.hasClass("e-numerictextbox")){var r=Z("#"+t[0].id).data("ejNumericTextbox"),o=null==r.model.value?"":r.model.value.toString();if(J.isNullOrUndefined(e.type)){var l=s.filterSettings.filteredColumns,d=l.length,h=!1;""==o&&0==d&&(h=!0);for(var c=0;c<d;c++)if((J.isNullOrUndefined(l[c].value)?"":l[c].value.toString())==o&&l[c].field==this._currentFilterColumn.field){h=!0;break}if(h)return!0}i._filterString=t.closest("input").val()}else i._filterString=t.closest("input").val();if("datepicker"!=this._currentFilterColumn.filterEditType&&"datetimepicker"!=this._currentFilterColumn.filterEditType||""==i._filterString||i._filterString&&(a=a.format?i._getDateFormat(this._currentFilterColumn.format):i.model.dateFormat,J.isNullOrUndefined(J.parseDate(i._filterString,a,s.locale))?i._filterString="":i._filterString=J.parseDate(i._filterString,a,s.locale)),""==i._filterString&&!s.filterSettings.filteredColumns.filter(function(e){if(e.field===i._fieldName)return!0}).length)return i._resizeFilteringElements(),!0;i._validateFilterValue(i._filterString),i._batchEditStarts&&(i._batchTempDetails.filterTarget=t),i.filterColumn(i._fieldName,this._operator,i._filterString,this._predicate),i._storePreviousFilteredValue(i._fieldName,i._filterString,this._operator),0<i.model.currentViewData.length&&i.model.enableAltRow&&J.TreeGrid.updateAltRow(i,i.model.currentViewData[0],0,0),i._cancelSaveTools()}},_validateFilterValue:function(e){switch(this._predicate="and",this._currentFilterColumn.filterEditType){case"numericedit":this._operator=J.FilterOperators.equal;break;case"datepicker":this._operator=J.FilterOperators.equal,t=""==this._currentFilterColumn.format||this._currentFilterColumn.format==P?J.preferredCulture().calendar.patterns.d:this._currentFilterColumn.format.split(":")[1].replace("}",""),""!=this._currentFilterbarValue&&(this._currentFilterbarValue=J.format(e,t,this.model.locale));break;case"datetimepicker":this._operator=J.FilterOperators.equal,t=""==this._currentFilterColumn.format||this._currentFilterColumn.format==P?J.preferredCulture().calendar.patterns.f:this._currentFilterColumn.format.split(":")[1].replace("}",""),""!=this._currentFilterbarValue&&(this._currentFilterbarValue=J.format(e,t,this.model.locale));break;case"stringedit":this._operator=J.FilterOperators.startsWith;break;case"dropdownedit":var t=this._currentFilterColumn;"dropdownedit"==t.editType&&t.editParams&&t.editParams.showCheckbox?this._operator=J.FilterOperators.contains:this._operator=J.FilterOperators.equal;break;case"booleanedit":1==this._filterString||"1"==this._filterString?this._filterString=!0:"false"!=this._filterString&&"0"!=this._filterString||(this._filterString=!1),this._operator=J.FilterOperators.equal;break;default:this._operator=J.FilterOperators.equal}},_getStackedColumnByTarget:function(e){e=(e.get(0)||{}).className,e=/e-row([0-9])-column([0-9])/.exec(e),e=[e[1],"stackedHeaderColumns",e[2]].join(".");return J.getObject(e,this.model.stackedHeaderRows)},_headermouseHover:function(e){e.preventDefault();var t,i,s,n,a,r,o,l,d,h,c=this,u=c.model;u.showGridCellTooltip&&(c._dragTooltip||(t=Z(e.target),s=i=0,l=t.closest("div.e-headercelldiv"),c._headerMouseLeave(),(e=e||window.event).originalEvent.pageX||e.originalEvent.pageY?(i=e.originalEvent.pageX,s=e.originalEvent.pageY):(e.originalEvent.clientX||e.originalEvent.clientY)&&(i=e.originalEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,s=e.originalEvent.clientY+document.body.scrollTop+document.documentElement.scrollTop),0<(h=l.clone()).find(".e-ascending").length?h.find(".e-ascending").remove():0<h.find(".e-descending").length&&h.find(".e-descending").remove(),h.find(".e-chkbox-wrap").remove(),h=(t.closest(".e-headercell").hasClass("e-headertemplate")?h:h.find("span")).clone(),t.hasClass("e-stackedtooltip")&&(d=c._getStackedColumnByTarget(t),h=J.isNullOrUndefined(d.tooltip)||"#"===d.tooltip.slice(0,1)?Z(d.tooltip).clone().html():d.tooltip),e=J.buildTag("table.e-tooltiptable e-zerospace","",{padding:"0"}),l=J.buildTag("tbody",h,{},{}),e.append(l),d=0<Z(h).text().replace(/[ \t\r]+/g,"").length,l&&(h=t.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),(h=this.getColumnByField(h))&&(J.isNullOrUndefined(h.headerTooltip)||""==h.headerTooltip)&&u.showGridCellTooltip&&d||t.hasClass("e-stackedtooltip")?(c._headerMouseOverTooltip=J.buildTag("div.e-tooltipgantt e-js#headertooltip"+c._id,e,{top:s+10+"px",left:i+15+"px",position:"absolute","z-index":c.getMaxZIndex()+1,padding:"0","border-radius":"3px"},{}),u.cssClass&&c._headerMouseOverTooltip.addClass(u.cssClass),c._headerTooltipTimer=setTimeout(function(){Z(document.body).append(c._headerMouseOverTooltip);var e=Z("#"+c._id.replace("ejTreeGrid","")),t=c.getOffsetRect(e[0]);r=Z(e).width()+t.left,o=Z(e).height()+t.top,n=Z(c._headerMouseOverTooltip).width(),a=Z(c._headerMouseOverTooltip).height(),r<=i+n+15&&(i=i-n-15),o<=s+a+10&&(s=s-a-10),Z(c._headerMouseOverTooltip).css({top:s,left:i})},700)):h&&!J.isNullOrUndefined(h.headerTooltip)&&""!=h.headerTooltip&&((e={}).column=h,c._createColumnTooltipTemplate(h.headerTooltip),c._headerMouseOverTooltip=J.buildTag("div.e-tooltipgantt e-js#headertooltip"+c._id,"",{top:s+10+"px",left:i+15+"px",position:"absolute","z-index":c.getMaxZIndex()+1,padding:"0","border-radius":"3px"},{}),u.cssClass&&c._headerMouseOverTooltip.addClass(u.cssClass),l=J.buildTag("tbody",Z.render[c._id+"columnTooltipTemplate"](e),{},{}),c._headerMouseOverTooltip[0].innerHTML="<table>"+l[0].innerHTML+"</table>",(d=0<Z(l).text().replace(/[ \t\r]+/g,"").length)&&(c._headerTooltipTimer=setTimeout(function(){var e,t;Z(document.body).append(c._headerMouseOverTooltip),o=u.isFromGantt?(e=Z("#"+c._id.replace("ejTreeGrid","")),t=c.getOffsetRect(e[0]),r=Z(e).width()+t.left,Z(e).height()+t.top):(t=c.getOffsetRect(c.element[0]),r=Z(c.element).width()+t.left,Z(c.element).height()+t.top),n=Z(c._headerMouseOverTooltip).width(),a=Z(c._headerMouseOverTooltip).height(),r<=i+n+15&&(i=i-n-15),o<=s+a+10&&(s=s-a-10),Z(c._headerMouseOverTooltip).css({top:s,left:i})},700))))))},_mouseHover:function(e){var s,n,t,i,a,r,o,l,d,h,c,u,p,m,g,f=this,_=f.model;_.showGridCellTooltip&&1!=this._dragMouseDown&&(u=Z(e.target),n=s=0,f.getRows(),t=u.closest("tr"),i=u.closest("td.e-rowcell"),c=this.getIndexByRow(t),a=_.currentViewData[c],h=_.columns,t.hasClass("e-footersummaryrow")&&(c=f._getFooterRows().index(t),a=f._footerSummaryRecord[c]),(0<=c||t.hasClass("e-footersummaryrow"))&&(u=f.getCellIndex(e),f._cellMouseLeave(),c=h[u],(e=e||window.event).originalEvent.pageX||e.originalEvent.pageY?(s=e.originalEvent.pageX,n=e.originalEvent.pageY):(e.originalEvent.clientX||e.originalEvent.clientY)&&(s=e.originalEvent.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.originalEvent.clientY+document.body.scrollTop+document.documentElement.scrollTop),(a||t.hasClass("e-footersummaryrow"))&&(u!=_.treeColumnIndex?((p=i.clone()).find(".e-chkbox-wrap").remove(),g=(p.children().length?p.children():p).clone()):0<i.find(".e-cell").length?(g=i.find(".e-cell").clone()).find(".e-chkbox-wrap").remove():i.hasClass("e-summaryrowcell")&&(0<i.find(".e-summarytitle").length?g=i.find(".e-summarytitle").clone():(g=i.clone(),Z(g).css({cssText:"padding-left: 0px;"}))),g&&g.addClass("e-treegrid-textWrap"),p=J.buildTag("table.e-tooltiptable e-zerospace","",{padding:"0"}),(!_.showGridExpandCellTooltip||_.showGridExpandCellTooltip&&u==f.model.treeColumnIndex)&&(m=J.buildTag("tbody",g,{},{})),p.append(m),g=0<Z(g).text().replace(/[ \t\r]+/g,"").length,m&&0==Z(i).find("#"+f._id+"EditForm").length&&!f._isCommandColumn(c)&&(!_.cellTooltipTemplate&&(J.isNullOrUndefined(c.tooltip)||""==c.tooltip)||_.cellTooltipTemplate&&!J.isNullOrUndefined(c.tooltip)&&""==c.tooltip?(!_.showGridExpandCellTooltip&&g||_.showGridExpandCellTooltip&&g)&&(Z("#"+this._id+"detailscellwrapper").length,f._mouseOverTooltip=J.buildTag("div.e-tooltipgantt e-js#tooltipgantt"+f._id,p,{top:n+10+"px",left:"auto",position:"absolute","z-index":f.getMaxZIndex()+1,padding:"0","border-radius":"3px"},{}),_.cssClass&&f._mouseOverTooltip.addClass(_.cssClass),f._tooltipTimer=setTimeout(function(){var e;Z(document.body).append(f._mouseOverTooltip),d=_.isFromGantt?(i=Z("#"+f._id.replace("ejTreeGrid","")),e=f.getOffsetRect(i[0]),l=Z(i).width()+e.left,Z(i).height()+e.top):(e=f.getOffsetRect(f.element[0]),l=Z(f.element).width()+e.left,Z(f.element).height()+e.top),r=Z(f._mouseOverTooltip).width(),o=Z(f._mouseOverTooltip).height();var t=Z(window).width(),i=e.left+s,t=t-(e.left+s);l<=s+r+15&&t<i&&(s=l-r-15)<0&&(s=e.left),d<=n+o+10&&(n=n-o-10),Z(f._mouseOverTooltip).css({top:n,left:s})},700)):(_.cellTooltipTemplate||!J.isNullOrUndefined(c.tooltip)&&""!=c.tooltip)&&(Z("#"+this._id+"detailscellwrapper").length,(p={}).record=a,p.column=h[u],J.isNullOrUndefined(c.tooltip)||f._createColumnTooltipTemplate(c.tooltip),f._mouseOverTooltip=J.buildTag("div.e-tooltipgantt e-js#tooltipgantt"+f._id,"",{top:n+10+"px",left:s+15+"px",position:"absolute","z-index":f.getMaxZIndex()+1,padding:"0","border-radius":"3px"},{}),_.cssClass&&f._mouseOverTooltip.addClass(_.cssClass),f.tooltipState="Template",m=J.isNullOrUndefined(c.tooltip)?J.buildTag("tbody",Z.render[f._id+"tooltipTemplate"](p),{},{}):J.buildTag("tbody",Z.render[f._id+"columnTooltipTemplate"](p),{},{}),f._mouseOverTooltip[0].innerHTML="<table>"+m[0].innerHTML+"</table>",(g=0<Z(m).text().replace(/[ \t\r\n]+/g,"").length)&&(f._tooltipTimer=setTimeout(function(){var e,t;Z(document.body).append(f._mouseOverTooltip),d=_.isFromGantt?(e=Z("#"+f._id.replace("ejTreeGrid","")),t=f.getOffsetRect(e[0]),l=Z(e).width()+t.left,Z(e).height()+t.top):(t=f.getOffsetRect(f.element[0]),l=Z(f.element).width()+t.left,Z(f.element).height()+t.top),r=Z(f._mouseOverTooltip).width(),o=Z(f._mouseOverTooltip).height(),l<=s+r+15&&(s=s-r-15),d<=n+o+10&&(n=n-o-10),Z(f._mouseOverTooltip).css({top:n,left:s})},700)))))))},_cellMouseLeave:function(){null!=this._mouseOverTooltip&&(Z("#tooltipgantt").remove(),window.clearTimeout(this._tooltipTimer),Z(this._mouseOverTooltip).remove())},_headerMouseLeave:function(){null!=this._headerMouseOverTooltip&&(Z("#headertooltip").remove(),window.clearTimeout(this._headerTooltipTimer),Z(this._headerMouseOverTooltip).remove())},disableTooltip:function(){this._cellMouseLeave(),this._headerMouseLeave()},_createTooltipTemplate:function(){this.model.columnHeaderTexts;var e={},t=this.model.cellTooltipTemplate,i=null;e["_"+this._id+"getTaskName"]=this._tooltipTaskName,Z.views.helpers(e);t?i=document.getElementById(t)?Z("#"+t)[0].innerHTML:t:(i="<tr class='e-tooltip_rowcell'>",i+="{{if ~_"+this._id+"getTaskName()}}<td class='e-tooltiptaskname' style='height:auto;width:auto;font-weight:normal;'>{{:ttiptaskname}}</td>{{/if}}",i+="</tr>");t={};t[this._id+"tooltipTemplate"]=i,Z.templates(t)},_tooltipTaskName:function(){return this.data.ttiptaskname},_createColumnTooltipTemplate:function(e){var t=null;e&&(t=document.getElementById(e)?Z("#"+e)[0].innerHTML:"#"===e.slice(0,1)&&document.getElementById(e.slice(1,e.length))?Z(e)[0].innerHTML:e);e={};e[this._id+"columnTooltipTemplate"]=t,Z.templates(e)},getMaxZIndex:function(){var e=document.getElementsByTagName("div"),t=0,i=e.length;if(0==this._maxZIndex){for(var s=0;s<i;s++){var n=e[s].style.zIndex,a=parseInt(n);t<a&&"auto"!=n&&!isNaN(a)&&(t=a)}this._maxZIndex=t}return this._maxZIndex},_onScroll:function(e){var t,i=this,s=this.model;if(i._popupHide(),i._clearContextMenu(),0<Z("#"+this._id+"detailscellwrapper").length&&this._removeDetailsRow(),i.model.showGridCellTooltip&&(i._cellMouseLeave(),i._headerMouseLeave()),s.isFromGantt||!i._dragTooltip||i._timerDragDown||i._timerDragUp)if(i.isVScroll()||i.model.isFromGantt||"wheel"!==e.source){if(e.scrollLeft!=P&&(i._scrollLeft=e.scrollLeft,t=Math.abs(i._scrollLeft-i._prevScrollLeft)),e.scrollTop!=P&&(i._scrollTop=e.scrollTop,Math.abs(i._scrollTop-i._preVScrollTop)),t&&(i._updateHeaderScrollLeft(i._scrollLeft),i._prevScrollLeft=i._scrollLeft),e.scrollTop!=P){if(i.model.isEdit?(i.cancelEditCell(),i._focusTreeGridElement()):i._isRowEdit&&(i.cancelRowEditCell(),i._focusTreeGridElement()),i._vScrollDist=Math.abs(i._scrollTop-i._prevScrollTop),i._preVScrollTop=i._scrollTop,i.model.enableVirtualization){if(i._vScrollDir=i._prevScrollTop<=i._scrollTop?1:-1,s.allowPaging&&!i.model.sizeSettings.height)return;i._vScrollDist&&i._scrollTop!=i._prevScrollTop&&(i._updateCurrentViewData(J.TreeGrid.Actions.Scroll),i._prevScrollTop=i._scrollTop)}i._scrollTop=e.scrollTop,this._frozenColumnsLength&&i.getContent().find("#e-frozencontainer"+i._id).scrollTop(i._scrollTop),i._vScrollDist=0}}else e.cancel=!0;else e.cancel=!0},editFormValidate:function(){var e=this.model.editSettings;if(Z.isFunction(Z.validator)){if(!(0<this._frozenColumnsLength)){if(0<Z("#"+this._id+"EditFormDialog").length){if("dialogEditing"==e.editMode||"batchediting"==e.editMode.toLowerCase()&&"dialog"==e.batchEditSettings.editMode.toLowerCase())if(!Z("#"+this._id+"_dialogEdit").ejDialog("isOpen"))return!0;return this.setValidation(),Z("#"+this._id+"EditFormDialog").validate().form()}return!(0<Z("#"+this._id+"EditForm").length)||(this.setValidation(),Z("#"+this._id+"EditForm").validate().form())}var t=this.element.find(".e-treegridform");if(0==t.length)return!0;if(this.setValidation(),1<t.length){var i=t.eq(0).validate().form(),e=t.eq(1).validate().form();return!(!i||!e)}if(0<t.length)return t.validate().form()}return!0},_checkModfiedCellValue:function(e,i,t){var s,n,a=this.model,r=!1;return"datepicker"==t.editType||"datetimepicker"==t.editType?e instanceof Date&&i instanceof Date?"datepicker"==t.editType?(s=new Date(e),n=new Date(i),s.setHours(0,0,0,0)!=n.setHours(0,0,0,0)&&(r=!0)):e.getTime()!=i.getTime()&&(r=!0):e!==i&&(r=!0):"dropdownedit"==t.editType?e!==i&&(r=!0):(e=J.isNullOrUndefined(e)?"":e,i=J.isNullOrUndefined(i)?"":i,!a.isFromGantt||"duration"!=t.field||(t=i.match(/(\d*\.*\d+|[A-z]+)/g))&&t.length<=2&&(i=parseFloat(t[0])),e instanceof Array&&i instanceof Array?Z.each(e,function(e,t){-1==Z.inArray(t,i)&&(r=!0)}):e.toString()!==i.toString()&&(r=!0)),r},saveRow:function(){var e,t,i,s=this,n=s.model,a=n.editSettings.editMode.toLowerCase();if(s.model.editSettings.allowEditing&&("dialogediting"==a||"batchediting"==a&&"dialog"==n.editSettings.batchEditSettings.editMode)?(e=Z("#"+s._id+"EditFormDialog"),t=s._currentEditRecordDialogIndex,i=!0):(e=Z("#"+s._id+"EditForm"),t=this.getIndexByRow(e.closest("tr"))),e&&!s.editFormValidate())return!0;var r,o=Z("#"+s._id+"EditFrozenForm"),l=(o.add(e).find("td"),e.closest("tr").hasClass("e-addedrow")),d=n.columns,h=d.length,c=n.currentViewData[t],u={},p=J.copyObject({},c.item),m=!0,g=!1;if(s._focusTreeGridElement(),!(e.length<=0&&-1==t)){for(var f=0;f<h;f++){var _=d[f],v=_.field;""==v||s._checkboxSelection&&_.nonColumn||(_.visible||("dialogEditing"==n.editSettings.editMode||"batchediting"==s.model.editSettings.editMode.toLowerCase()&&"dialog"==n.editSettings.batchEditSettings.editMode.toLowerCase())&&!J.isNullOrUndefined(n.editSettings.dialogEditorTemplateID)&&""!=n.editSettings.dialogEditorTemplateID)&&(r=J.isNullOrUndefined(_.editType)?"stringedit":_.editType,r=s.getCurrentEditCellDataForRowEdit(v,r,f),r=J.isNullOrUndefined(r)||_.editType==J.TreeGrid.EditingType.Numeric&&isNaN(r)?null:r,n.idMapping&&n.parentIdMapping&&v==n.idMapping&&s._validateIdValue(r)&&(r=c[v]),s._checkModfiedCellValue(J.getObject(v,p),r,_)&&(-1!=v.indexOf(".")?J.createObject(v,r,p):p[v]=r,g=!0,"batchediting"!=a||l||(s._createBatchEditedFields(c,v,r,_),s._batchEditStarts=!0,s._updateBatchChanges(c))))}if(l){if(s._isEmptyRow=s._checkIsEmptyRow(p),u.rowIndex=s.selectedRowIndex(),u.previousValue=c.item,u.requestType="addNewRow",u.addedRow=s._isEmptyRow?null:p,u.rowElement=e.closest("tr"),!s._isEmptyRow){if("batchediting"==a)s.batchChanges.added.push(c),s._batchEditStarts=!0;else if(s._trigger("actionComplete",u))return!0;J.copyObject(c,p),J.copyObject(c.item,p),m=s._updateAction(u),n.idMapping&&n.parentIdMapping&&s._updateLastInsertedId(c[n.idMapping])}}else if(u.requestType="update",u.rowIndex=s.getUpdatedRecords().indexOf(c),u.currentValue=p,u.previousValue=c.item,i){if(u.element=Z("#"+s._id+"_dialogEdit"),s._isRemoteData||(g=!0),g&&s._trigger("actionBegin",u))return!0;m=s._updateAction(u),n.idMapping&&n.parentIdMapping&&s._updateLastInsertedId(u.currentValue[n.idMapping]);for(var b,x=0;x<d.length;x++)d[x].editType!=J.TreeGrid.EditingType.Dropdown&&d[x].editType!=J.TreeGrid.EditingType.DatePicker&&d[x].editType!=J.TreeGrid.EditingType.DateTimePicker||(b=Z("#"+s._id+s._getFieldValue(d[x].field))).data("ejWidgets")&&b[b.data("ejWidgets")[0]]("destroy")}else u.rowElement=e.add(o).closest("tr"),!g&&s._isRemoteData||(g&&"batchediting"==a||"batchediting"!=a&&!s._trigger("endEdit",u))&&(m=s._updateAction(u),n.idMapping&&n.parentIdMapping&&s._updateLastInsertedId(u.currentValue[n.idMapping]));m&&s._refreshAfterSaveRow(u,!0)}},_refreshAfterSaveRow:function(e,t){var i,s=this,n=s.model,a=n.columns,r=s.getUpdatedRecords()[e.rowIndex],o=n.currentViewData.indexOf(r);s._isEmptyRow&&"addNewRow"==e.requestType?(i=!1,n.editSettings.allowDeleting||(i=!0,n.editSettings.allowDeleting=!0),s.deleteRow(null,!0,null),s._isEmptyRow=!1,s._isEmptyRowDeleted=!0,i&&(n.editSettings.allowDeleting=!1)):(J.TreeGrid.refreshRow(s,o),"addNewRow"==e.requestType&&r.parentItem&&1==r.parentItem.childRecords.length&&J.TreeGrid.refreshRow(s,n.currentViewData.indexOf(r.parentItem)),n.showSummaryRow&&(e.editType="rowedit","addNewRow"==e.requestType&&"child"==n.editSettings.rowPosition&&s._createAndRenderSummaryRecords(e),s._updateSummaryRow(e)),n.showTotalSummary&&(e.editType="rowedit",s._updateTotalSummaryRow(e)),t&&"dialogEditing"==n.editSettings.editMode&&((t={}).data=r,t.item=r.item,t.requestType="recordUpdate",s._trigger("actionComplete",t),n.idMapping&&n.parentIdMapping&&s._updateLastInsertedId(t.item[n.idMapping]))),s._isRowEdit=!1,0<n.currentViewData.length&&n.enableAltRow&&!n.enableVirtualization&&J.TreeGrid.updateAltRow(s,n.currentViewData[0],0,0),s._cancelSaveTools();a=a.filter(function(e){if("dropdownedit"==e.filterEditType&&"dropdownedit"!=e.editType)return!0});n.allowFiltering&&a.length&&s._resizeFilteringElements(),0<s._commandColumnLength&&(a=J.TreeGrid.getRowByIndex(s,s.getUpdatedRecords().indexOf(r)),s._refreshUnboundTemplate(a),"addNewRow"==e.requestType&&n.editSettings.rowPosition==J.TreeGrid.RowPosition.Child&&(r=J.TreeGrid.getRowByIndex(s,s.getUpdatedRecords().indexOf(r.parentItem)),s._refreshUnboundTemplate(r))),n.allowTextWrap&&0<s._$frozenTableContent.length?(s._updateRowHeight(o),s._updateGridContentHeight(),s.getScrollElement().ejScroller("refresh"),o=s.getScrollElement().ejScroller("model.scrollTop"),s._getFrozenScrollElement().scrollTop(o),s.model.enableVirtualization&&s.updateHeight()):n.allowTextWrap&&(n.allowPaging&&!n.sizeSettings.height?s.updateHeight():s.getScrollElement().ejScroller("refresh")),n.allowTextWrap&&0==s._$frozenTableContent.length&&(n=s._getViewPortHeight(),s._$gridContainer.css({height:n+"px"}),Z("#"+s._id+"e-gridcontent").css("height",n),s.getScrollElement().ejScroller("refresh"))},_updateAction:function(i){var e,t,s,n=this,a=n.model,r=a.idMapping,o="dragAndDrop"==i.requestType?i.draggedRowIndex:i.rowIndex,l=n.getUpdatedRecords()[o],d=!1,h={added:[],changed:[],deleted:[]};if(n._isRemoteData&&(e=a.selectionSettings.selectionType,o=n._dataManager.dataSource.batchUrl,J.isNullOrUndefined(o)&&"multiple"!=e&&"checkbox"!=e||(d=!0)),"addNewRow"==i.requestType)n._isRemoteData&&(d?h.added.push(i.addedRow):s=n._dataManager.insert(i.addedRow,n.model.query));else if("update"==i.requestType)n._isRemoteData?d?h.changed.push(i.currentValue):s=this._dataManager.update(r,i.currentValue,n.model.query):(J.copyObject(l,i.currentValue),J.copyObject(l.item,i.currentValue));else if("dragAndDrop"==i.requestType){if(n._isRemoteData)if(d)for(var c=i.draggedRecords,u=0;u<c.length;u++)h.changed.push(c[u].item);else s=this._dataManager.update(r,l.item,n.model.query)}else"saveCellValue"==i.requestType?(t=i.data.item,n._isRemoteData&&Z.isPlainObject(t)&&(d?h.changed.push(t):s=n._dataManager.update(r,t,n.model.query))):i.requestType==J.TreeGrid.Actions.Delete&&n._isRemoteData&&(d?h.deleted=n._getParentChildItem(i.deletedItems):(t=i.data.item,s=n._dataManager.remove(r,t[r],this.model.query)));return d&&(s=n._dataManager.saveChanges(h,r,this.model.query._fromTable,this.model.query)),s&&Z.isFunction(s.promise)&&!n._dataManager.dataSource.offline&&(n._waitingPopupObj.show(),s.done(function(e){var t;i.requestType==J.TreeGrid.Actions.Delete?(n._updateDeleteAction(i),n._cancelSaveTools()):"addNewRow"==i.requestType||"update"==i.requestType?(t="addNewRow"==i.requestType?i.addedRow:i.currentValue,J.isNullOrUndefined(e)||J.isNullOrUndefined(e.record)||!Z.isPlainObject(e.record)||J.copyObject(t,e.record),J.copyObject(l,t),J.copyObject(l.item,t),n._refreshAfterSaveRow(i,!0)):"saveCellValue"==i.requestType&&n._refreshAfterSaveCell(i,!0),n._waitingPopupObj.hide()}),s.fail(function(e){i.error=e&&e.error?e.error:e,"update"==i.requestType?n._refreshAfterSaveRow(i,!0):"addNewRow"==i.requestType?(e=n.getUpdatedRecords().indexOf(l),n._isEmptyRow=!0,n.deleteRow(null,!0,e),n._isEmptyRow=!1):"saveCellValue"==i.requestType&&(i.data[i.columnName]=i.previousValue,i.data.item[i.columnObject.field]=i.previousValue,n.selectRows(n.selectedRowIndex()),J.TreeGrid.refreshRow(n,a.currentViewData.indexOf(i.data))),n._waitingPopupObj.hide(),n._trigger("actionFailure",i)})),!n._isRemoteData},_getParentChildItem:function(e,t){for(var i=e.length,t=J.isNullOrUndefined(t)?[]:t,s=0;s<i;s++){var n=e[s];-1==t.indexOf(n.item)&&t.push(n.item),n.hasChildRecords&&this._getParentChildItem(n.childRecords,t)}return t},_excludeDetailRows:function(){var e=Z(),t=this.model;return this.getTreeGridRows()&&0<this.getTreeGridRows().length&&(e=t.showDetailsRow&&t.detailsTemplate?0<this._frozenColumnsLength?[Z(this.getTreeGridRows()[0]).not(".e-detailsrow"),Z(this.getTreeGridRows()[1]).not(".e-detailsrow")]:Z(this.getTreeGridRows()).not(".e-detailsrow"):0<this._frozenColumnsLength?[Z(this.getTreeGridRows()[0]),Z(this.getTreeGridRows()[1])]:Z(this.getTreeGridRows())),e},getIndexByRow:function(e){var t=this._excludeDetailRows(),i=-1;return 0<this._frozenColumnsLength?(-1==(i=Z(t[0]).index(e))&&(i=Z(t[1]).index(e)),i):t.index(e)},getTreeGridRows:function(){return this._gridRows},_keyDown:function(e){if(e.shiftKey&&-1==this._shiftKeyFirstElementDetails.firstElementRowIndex)this._shiftKeyFirstElementDetails.firstElementRowIndex=this._focusingRowIndex,this._shiftKeyFirstElementDetails.firstElementCellIndex=this._cellIndex;else{if(13!=e.which||null==this._excelFilter||J.isNullOrUndefined(this._excelFilter._openedFltr)||!this._excelFilter._openedFltr.length||!this._excelFilter._openedFltr.is(":visible"))return 13===e.which&&Z(e.target).hasClass("e-searchinput")&&Z(e.target).closest("#"+this._id+"_toolbarItems")?(this._toolbarOperation(this._id+"_search",e.currentTarget),e.preventDefault(),!1):"click"==e.type&&Z(e.target).hasClass("e-searchitem")?(this._toolbarOperation(this._id+"_search",Z(e.currentTarget).prev()[0].firstChild),e.preventDefault(),!1):void 0;e=this._id+this._excelFilter._$colType;this._excelFilter._openedFltr.hasClass("e-dlgcustom")&&(e+="Custom"),this._excelFilter._openedFltr.find("#"+e+"_OkBtn").trigger("click")}},_focusTreeGridElement:function(){if("msie"==J.browserInfo().name)try{this.element[0].setActive()}catch(e){}else{var e=Z(window).scrollTop();this.element[0].focus(),Z(window).scrollTop(e)}},_onRecordClick:function(e){this._recordClickAction(e,"recordClick")},_onRecordDoubleClick:function(e){this._recordClickAction(e,"recordDoubleClick")},_recordClickAction:function(e,t){var i=Z(e.target),s=this.model,n=i.closest("td"),a={},r=i.closest("tr");!(i.hasClass("e-rowcell")||i.parent().hasClass("e-rowcell")||i.closest("td").hasClass("e-rowcell")||i.closest("td").hasClass("e-rowcell")&&i.hasClass("e-cell"))||0!=r.find(".e-editedcell").length||r.hasClass("e-summaryrow")||n.hasClass("e-unboundcell")||(a.cell=n,a.cellIndex=this.getCellIndex(e),a.row=r,a.rowIndex=this.getIndexByRow(a.row),a.data=this.model.currentViewData[a.rowIndex],s=s.columns[a.cellIndex],a.columnName=s.headerText,a.cellValue=J.isNullOrUndefined(a.data)?"":a.data[s.field],a.targetElement=i,this._trigger(t,a))},_addRemoveAnimateClass:function(e){this._$gridContentTable&&this._$gridContentTable.find(".e-treegrid-animate").removeClass("e-treegrid-animate"),this._$gridHeaderContainer&&this._$gridHeaderContainer.find(".e-treegrid-animate").removeClass("e-treegrid-animate"),Z(e).addClass("e-treegrid-animate")},_onClick:function(e){var t=this,i=t.model,s=Z(e.target),n={},a=-1,r=s.closest(".e-treegrid").attr("id"),o=t.getUpdatedRecords();if(s.closest(".e-treegrid").attr("id")!==this._id)return!1;if(t._clearContextMenu(),this._removeDetailsRow(e),i.allowDragAndDrop&&window.clearTimeout(t._dragTooltipTimer),i.allowColumnReordering&&(window.clearTimeout(this._dragColumnTooltipTimer),this._dragColumnTooltipTimer=null),t._cellIndex=t.getCellIndex(e),s.hasClass("e-filtertext")||s.hasClass("e-cancel")||t.getHeaderTable().find(".e-cancel").addClass("e-hide"),"cell"==i.selectionSettings.selectionMode&&"dialogEditing"!=i.editSettings.editMode&&(i.editSettings.editMode="cellEditing"),a=t.getRowIndex(e),("click"==i.editSettings.beginEditAction||s.hasClass("e-treegridexpand")||s.hasClass("e-treegridcollapse"))&&0==s.closest(".e-scrollbar").length&&0==s.closest(".e-toolbaricons").length&&0==s.closest(".e-treegridtoolbaritem").length&&(("cellediting"==i.editSettings.editMode.toLowerCase()||"batchediting"==i.editSettings.editMode.toLowerCase()&&"cell"==i.editSettings.batchEditSettings.editMode.toLowerCase())&&(t._cellEditingDetails.rowIndex=a),l=i.currentViewData&&i.currentViewData[a]),!t.model.allowSelection||"multiple"!=t.model.selectionSettings.selectionType||t.model.isFromGantt||s.hasClass("e-downtail")||(s.hasClass("e-rowselect")?s.hasClass("e-spanclicked")?t._clearMultiSelectPopup():s.addClass("e-spanclicked"):Z("#"+r+"_selectionpopup").find(".e-rowselect").hasClass("e-spanclicked")||this._multiSelectPopup.hide()),t._saveCellHandler(e),s.hasClass("e-summarytreegridexpand")||s.hasClass("e-summarytreegridcollapse"))return n.expanded=!s.hasClass("e-summarytreegridexpand"),t._isInManualExpandCollapse=!0,t.expandCollapseTotalSummary(n.expanded),t._isInManualExpandCollapse=!1,void t._addRemoveAnimateClass(s);if(!(s.hasClass("e-summaryrowcell")||s.hasClass("e-footersummaryrowcell")||s.hasClass("e-summarytitle"))){if((s.hasClass("e-treegridexpand")||s.hasClass("e-treegridcollapse"))&&-1!=a&&t.editFormValidate()){var l,d=s.closest("tr"),h=o.indexOf(l),n={};s.removeClass("e-treegrid-animate"),n.data=p,n.data=l,n.recordIndex=h,n.expanded=!d.hasClass("e-treegridrowexpand"),0!=Z("#"+t._id+"EditForm").length||!s.hasClass("e-rowcell")&&s.closest(".e-rowcell").hasClass("e-templatecell")?t._cancelEditState():t._focusTreeGridElement(),(n.expanded?t._trigger("expanding",n):t._trigger("collapsing",n))||i.isFromGantt||(t._isRefreshAddedRecord?(n.data.expanded=n.expanded,t.updateExpandStatus(n.data,n.expanded),t.refreshContent(),t.renderRecords(),i.allowTextWrap&&0<t._frozenColumnsLength&&(t._updateRowHeight(),"auto"==i.sizeSettings.height&&t._updateContentHeight(),t.getScrollElement().ejScroller("refresh"),t._updateScrollCss()),t._isRefreshAddedRecord=!1):J.TreeGrid.sendExpandCollapseRequest(t,n)),i.allowPaging||i.enableVirtualization?(d=t.getUpdatedRecords(),(l=J.TreeGrid.getRowByIndex(this,d.indexOf(l)))&&t._addRemoveAnimateClass(Z(l).find(".e-treegridcollapse,.e-treegridexpand"))):t._addRemoveAnimateClass(s)}else if(s.hasClass("e-rowcell")||s.parent().hasClass("e-rowcell")||s.closest("td").hasClass("e-rowcell")||s.parent().hasClass("e-detailsrowcell")||s.hasClass("e-detailsrowcell")||s.closest("td").hasClass("e-rowcell")&&s.hasClass("e-cell")){if(this._shiftSelectedRecord=null,Z("#"+r+"_selectionpopup").is(":visible")&&(Z("#"+r+"_selectionpopup").find(".e-rowselect").hasClass("e-spanclicked")?(e.ctrlKey=!0,i.selectionSettings.selectionMode==J.TreeGrid.SelectionMode.Row&&(t._multiSelectCtrlRequest=!0)):(e.ctrlKey=!1,t._multiSelectCtrlRequest=!1)),i.isFromGantt&&t._ganttTouchTrigger&&(n={target:s,ctrlKey:e.ctrlKey},t._trigger("getCtrlRequestValue",n),e.ctrlKey=n.ctrlKey),0!=Z("#"+t._id+"EditForm").length||!s.hasClass("e-rowcell")&&s.closest(".e-rowcell").hasClass("e-templatecell")||t._focusTreeGridElement(),r=t.getIndexByRow(s.closest("tr")),i.selectionSettings.selectionMode==J.TreeGrid.SelectionMode.Row&&(t._checkboxSelection&&(0==Z("#"+t._id+"EditForm").length||"click"==i.editSettings.beginEditAction)&&t.editFormValidate()&&(p=t.model.currentViewData[r],h=o.indexOf(p),u=!1,s.hasClass("e-checkbox")&&(u=!0),-1==h||t._rowSelectingEventTrigger(this.selectedRowIndex(),h,u,e.type)||(t.selectRows(h,null,u),t._cancelSaveTools(),t._rowSelectedEventTrigger(h,null,u,e.type))),i.selectionSettings.selectionType==J.TreeGrid.SelectionType.Multiple&&(t._multiSelectCtrlRequest=!!e.ctrlKey,e.shiftKey&&1==i.allowSelection&&(r=t.getIndexByRow(s.closest("tr")),p=i.currentViewData[r],r=o.indexOf(p),t._multiSelectShiftRequest=!0,t._rowSelectingEventTrigger(this.selectedRowIndex(),r,!1,e.type)||(t.getRows()&&null!=t._prevSelectedItem?t.getExpandStatus(t._prevSelectedItem)?t.selectRows(o.indexOf(t._prevSelectedItem),r):t.selectRows(r):t.getRows()&&null==t._prevSelectedItem&&t.selectRows(0,r),t._cancelSaveTools(),i.isFromGantt&&e.shiftKey?t._rowSelectedEventTrigger(r,J.isNullOrUndefined(t._prevSelectedItem)?0:i.updatedRecords.indexOf(t._prevSelectedItem)):t._rowSelectedEventTrigger(r,null,!1,e.type)))),t._checkboxSelection||t._multiSelectShiftRequest||0!=Z("#"+t._id+"EditForm").length||-1!=a&&(p=i.currentViewData[a],r=o.indexOf(p),i.allowSelection&&!t._rowSelectingEventTrigger(this.selectedRowIndex(),r,!1,e.type)&&(t.selectRows(r),t._cancelSaveTools(),t._rowSelectedEventTrigger(r,null,!1,e.type))),t._multiSelectShiftRequest=!1),i.selectionSettings.selectionMode==J.TreeGrid.SelectionMode.Cell&&0==Z("#"+t._id+"EditForm").length&&-1!=t._cellIndex&&-1!=r&&i.allowSelection){var c=t._cellIndex>=t._frozenColumnsLength?1:0,u=(0<t._frozenColumnsLength?t.getRows()[c]:t.getRows())[r],a=i.columns,p=i.currentViewData&&i.currentViewData[r],c=o.indexOf(p),o=t._cellIndex>=t._frozenColumnsLength?t._cellIndex-t._frozenColumnsLength:t._cellIndex,o=u.childNodes[o],o=(t._previousSelectedCellDetails.rowIndex,t._previousSelectedCellDetails.cellIndex,Z(o).closest("td"));if(t._focusingRowIndex=c,-1!=r){if(p.isSummaryRow)return;n={rowIndex:c,cellIndex:t._cellIndex,rowElement:u,cellElement:o[0]},p={rowIndex:c,cellIndex:t._cellIndex,cellElement:o[0],data:p};!t._cellSelectingEventTrigger(n)&&a[t._cellIndex].allowCellSelection&&("multiple"==i.selectionSettings.selectionType&&(e.ctrlKey||e.shiftKey)?e.ctrlKey?-1==(a=("msie"==J.browserInfo().name&&J.browserInfo().version<9?t._getCellIndex(t._selectedCellDetails,"cellElement"):t._selectedCellDetails.map(function(e){return e.cellElement})).indexOf(o[0]))?(Z(o[0]).addClass("e-selectingcell"),t._selectedCellDetails.push(p),i.selectedCellIndexes.push({rowIndex:p.rowIndex,cellIndex:p.cellIndex}),t._cellSelectedEventTrigger(n,t._previousSelectedCellDetails)):(Z(o[0]).removeClass("e-selectingcell"),t._selectedCellDetails.splice(a,1),i.selectedCellIndexes.splice(a,1)):e.shiftKey&&(n={rowIndex:c,cellIndex:t._cellIndex},t._shiftKeySelectCells(n),t._rowIndexOfLastSelectedCell=c,t._focusingRowIndex=t._shiftKeyFirstElementDetails.firstElementRowIndex):(t._selectedCellDetails=[],i.selectedCellIndexes=[],Z("#"+t._id).find(".e-selectingcell").removeClass("e-selectingcell"),Z(o[0]).addClass("e-selectingcell"),t._selectedCellDetails.push(p),i.selectedCellIndexes.push({rowIndex:p.rowIndex,cellIndex:p.cellIndex}),t._cellSelectedEventTrigger(n,t._previousSelectedCellDetails),t._shiftKeyFirstElementDetails={firstElementRowIndex:-1,firstElementCellIndex:-1},t._updateSecondRowIndexBy=1),e.shiftKey||(t._previousSelectedCellDetails={rowElement:u,cellElement:o[0],cellIndex:n.cellIndex,rowIndex:c},t._rowIndexOfLastSelectedCell=t._focusingRowIndex,t._isShiftKeyNavigation=!1)),e.shiftKey||(t._rowIndexOfLastSelectedCell=t._focusingRowIndex),t._cancelSaveTools(),t._lastSelectedCellIndex=t._cellIndex}}t._isTouchTrigger&&t.model.allowSelection&&"multiple"==this.model.selectionSettings.selectionType&&!t.model.isFromGantt&&(t._isTouchTrigger&&null!=this._multiSelectPopup&&!this._multiSelectPopup.is(":visible")&&this._multiSelectPopup.find(".e-rowselect").hasClass("e-spanclicked")&&this._multiSelectPopup.show(),t._isTouchTrigger&&null!=this._multiSelectPopup&&!this._multiSelectPopup.find(".e-rowselect").hasClass("e-spanclicked")&&(s.hasClass("e-detailsrowcell")||s.parent("td").hasClass("e-detailsrowcell")||s.closest("tr").hasClass("e-detailsrow")||(this._multiSelectPopup.removeAttr("style"),c=s.closest(".e-rowcell").offset(),this._multiSelectPopup.offset({top:0,left:0}).offset({left:c.left+(s.closest(".e-rowcell").outerWidth()/2-this._multiSelectPopup.width()/2),top:c.top-this._multiSelectPopup.outerHeight()-10}).show())),t._isTouchTrigger=!1)}!s.hasClass("e-detailsrowcell")&&!s.parent("td").hasClass("e-detailsrowcell")||s.closest("tr").hasClass("e-detailsrow")||e.ctrlKey||e.shiftKey||0<Z("#"+this._id+"EditForm").length&&!this.editFormValidate()||(t._isRowEdit?this.saveRow():t._detailsExpandCollapse(s)),t._isRowEdit&&s.focus(),s.closest("#"+t._id+"_ColumnMenu").hasClass("e-columnmenu")||0!=s.closest("div.e-excelfilter").length||s.hasClass("e-overlay")||t._clearColumnMenu(),"click"!=i.editSettings.beginEditAction||0!=s.closest("#"+t._id+"EditForm").length||t._isShiftKeyNavigation||t._isEmptyRowDeleted||t._editdblClickHandler(e),t._isEmptyRowDeleted=!1}},_isInFilteredState:function(){return this.model.allowFiltering&&0<this.model.filterSettings.filteredColumns.length||0<this._searchString.length},selectAllRows:function(e){var t,i=this,s=i.model,n=i._isInFilteredState()?i._flatFilteredRecords:s.flatRecords,a=(i.getUpdatedRecords(),0);if(s.selectionSettings.enableSelectAll||i._isFromSetmodel){if(s.showSummaryRow&&(n=i._spliceSummaryRows(n)),!J.isNullOrUndefined(e)){e||(n=i._isInFilteredState()?i._flatFilteredRecords:Z.extend([],s.selectedItems));for(var r=0;r<n.length;r++)e?"checked"!=n[r].checkboxState&&(n[r].checkboxState="checked",s.selectedItems.push(n[r]),Z("#"+this._id+"_checkbox"+n[r].ejRowId).removeClass("e-stop").addClass("e-checkmark"),Z("#"+this._id+"_checkbox"+n[r].ejRowId).parent("span").removeAttr("class").addClass("e-chk-act")):-1<(t=s.selectedItems.indexOf(n[r]))&&(n[r].checkboxState="unchecked",s.selectedItems.splice(t,1),Z("#"+this._id+"_checkbox"+n[r].ejRowId).removeClass("e-checkmark"),Z("#"+this._id+"_checkbox"+n[r].ejRowId).parent("span").removeAttr("class").addClass("e-chk-inact"),(s.selectionSettings.enableHierarchySelection||i._isFromSetmodel)&&i._updateParentSelection(n[r]));i._cancelSaveTools()}0<(a=(i._isInFilteredState()&&0<i._flatFilteredRecords.length&&0<s.selectedItems.length?i._flatFilteredRecords.filter(function(e){return"checked"==e.checkboxState}):s.selectedItems).length)&&0<n.length?a!=n.length?(Z("#"+this._id+"_headerCheckbox").removeClass("e-checkmark").addClass("e-stop"),Z("#"+this._id+"_headerCheckbox").parent("span").removeAttr("class").addClass("e-chk-indeter")):(Z("#"+this._id+"_headerCheckbox").removeClass("e-stop").addClass("e-checkmark"),Z("#"+this._id+"_headerCheckbox").parent("span").removeAttr("class").addClass("e-chk-act")):(Z("#"+this._id+"_headerCheckbox").removeClass("e-stop e-checkmark"),Z("#"+this._id+"_headerCheckbox").parent("span").removeAttr("class").addClass("e-chk-inact"))}},_updateSelectedItems:function(e,t){var i,s=this.model,n=this.getUpdatedRecords().indexOf(e);e.checkboxState=t,i=Z.inArray(e,s.selectedItems),"unchecked"==e.checkboxState?(-1!=i&&s.selectedItems.splice(i,1),-1<n&&(Z("#"+this._id+"_checkbox"+e.ejRowId).removeClass("e-checkmark e-stop"),Z("#"+this._id+"_checkbox"+e.ejRowId).parent("span").removeAttr("class").addClass("e-chk-inact"))):"checked"==e.checkboxState&&(-1==i&&s.selectedItems.push(e),-1<n&&(Z("#"+this._id+"_checkbox"+e.ejRowId).removeClass("e-stop").addClass("e-checkmark"),Z("#"+this._id+"_checkbox"+e.ejRowId).parent("span").removeAttr("class").addClass("e-chk-act")))},_traverseSelection:function(e,t,i){var s,n,a=this,r=this.model;if(a._updateSelectedItems(e,t),!i&&e.parentItem&&r.selectionSettings.enableHierarchySelection&&a._updateParentSelection(e.parentItem),e.hasChildRecords&&r.selectionSettings.enableHierarchySelection){n=e.childRecords,0<a._flatFilteredRecords.length&&(n=n.filter(function(e){return-1<a._flatFilteredRecords.indexOf(e)})),s=n.length;for(var o=0;o<s;o++)n[o].hasChildRecords?a._traverseSelection(n[o],t,!0):n[o].isSummaryRow||a._updateSelectedItems(n[o],t)}},_updateParentSelection:function(e){var t,i=this,s=this.model,n=[];e&&e.childRecords&&(n=i._spliceSummaryRows(e.childRecords)),0<i._flatFilteredRecords.length&&s.selectionSettings.enableHierarchySelection&&(n=n.filter(function(e){return-1<i._flatFilteredRecords.indexOf(e)})),t=n&&n.length;var a=!1,s=n.filter(function(e){return"indeterminate"==e.checkboxState}),n=n.filter(function(e){return"checked"==e.checkboxState});0<s.length||0<n.length&&n.length!=t?("checked"==e.checkboxState?(this._updateSelectedItems(e,"unchecked"),a=!0):"unchecked"==e.checkboxState&&(a=!0),a&&(Z("#"+this._id+"_checkbox"+e.ejRowId).addClass("e-stop"),Z("#"+this._id+"_checkbox"+e.ejRowId).parent("span").removeAttr("class").addClass("e-chk-indeter"),e.checkboxState="indeterminate",e.parentItem&&this._updateParentSelection(e.parentItem))):(0==n.length&&0==s.length?(Z("#"+this._id+"_checkbox"+e.ejRowId).removeClass("e-stop e-checkmark").parent("span").removeClass("e-chk-indeter"),"checked"==e.checkboxState?this._updateSelectedItems(e,"unchecked"):e.checkboxState="unchecked"):(e.checkboxState="checked",this._updateSelectedItems(e,"checked")),e.parentItem&&this._updateParentSelection(e.parentItem))},_removeInnerDetailRows:function(e,t){for(var i=Z(".e-detailscellwrapperfly"),s=i.length,n=0;n<s&&(!Z.contains(i[n],e[0])&&e!=i[n]);n++);var a=!1;J.isNullOrUndefined(i[n])&&(n=i.index(Z("#"+this._id+"detailscellwrapper")),a=!0);var r=a?"":",",a=Z(i[n]).attr("parentTreeGridIds"),a=Z("[parentTreeGridIds$='"+r+a+"']");a.length;this._triggerDetailRowHideEvent(a,t)},_triggerDetailRowHideEvent:function(e,t){var i=this.model,s=e.length,n=0;if(0<s&&0<Z("#"+this._id+"detailscellwrapper").length){Z("#"+this._id+"detailscellwrapper");var a=i.selectedItem,i={};if(i.rowData=a,!this._trigger("detailsHidden",i)||t)for(;n<s;n++){var r=Z(e[n]).attr("id").replace("detailscellwrapper","");Z("#"+r).find(".e-detailsrowexpand").removeClass("e-detailsrowexpand").addClass("e-detailsrowcollapse"),Z("#"+r).find(".e-detailsinfoiconhide").removeClass("e-detailsinfoiconhide").addClass("e-detailsinfoiconshow"),Z(e[n]).remove()}}},_removeDetailsRow:function(e,t){this.model;if(e){var i=Z(e.target),s=i;if(i.parent("td").hasClass("e-detailsrowcell")&&(s=i.parent("td")),0==i.closest(".e-popup").length&&i[0]!=Z("html").get(0)){for(var n=Z(".e-detailscellwrapperfly"),a=n.length,r=0,o=!1;r<a;r++)if(Z.contains(n[r],i[0])||i[0]==n[r]){o=!0;break}i.hasClass("e-detailscellwrapperfly")||s.hasClass("e-detailsrowexpand")||s.hasClass("e-detailsrowcollapse")||o||this._removeInnerDetailRows(Z("#"+this._id+"detailscellwrapper"),t),(i.hasClass("e-detailscellwrapperfly")||s.hasClass("e-detailsrowcollapse")||!s.hasClass("e-detailsrowexpand")&&o)&&(e=!1,J.isNullOrUndefined(n[r])&&(r=n.index(Z("#"+this._id+"detailscellwrapper")),e=!0),s=e?"":",",e=Z(n[r]).attr("parentTreeGridIds"),e=Z("[parentTreeGridIds$='"+s+e+"']"),this._triggerDetailRowHideEvent(e,t))}}else 0<Z("#"+this._id+"detailscellwrapper").length&&this._removeInnerDetailRows(Z("#"+this._id+"detailscellwrapper")[0],t),this._triggerDetailRowHideEvent(Z("#"+this._id+"detailscellwrapper"),t)},showHideDetailsRow:function(e){var t,i=this.model;this._saveEditedElements(),i.showDetailsRow&&i.detailsTemplate&&i.showDetailsRowInfoColumn&&!J.isNullOrUndefined(e)&&e<=i.updatedRecords.length&&this.getExpandStatus(i.updatedRecords[e])&&(e!=this.selectedRowIndex()&&-1!=e&&Z.inArray(e,-1==this._selectedRowsIndexes)&&i.allowSelection&&i.updatedRecords.length>e&&(this._rowSelectingEventTrigger(this.selectedRowIndex(),e)||(this.selectRows(e),this._rowSelectedEventTrigger(e))),this.updateScrollBar(e),0<(t=Z(J.TreeGrid.getRowByIndex(this,e))).length&&i.updatedRecords[e]&&this.getExpandStatus(i.updatedRecords[e])&&(t=Z(t).find(".e-detailsrowcell"),0<Z(t).length&&Z(t).hasClass("e-detailsrowcell")&&(this.element.find(".e-detailsrowexpand")[0]!=t[0]&&this._removeDetailsRow(),this._detailsExpandCollapse(Z(t)))))},_detailsExpandCollapse:function(e){var t=this.model;e.parent("td").hasClass("e-detailsrowcell")&&(e=e.parent("td"));var i=e.closest("tr"),s=i.find(".e-detailsrowcell");if(s.hasClass("e-detailsrowcollapse")){var n=this.getIndexByRow(i),a=this.model.currentViewData[n];if(!J.isNullOrUndefined(a)&&!a.isSummaryRow){for(var r,o=this.getOffsetRect(i[0]),l=Z(Z.render[this._id+"_detailRowTemplate"](a)),d=Z(l).find(".e-detailscellwrapper").attr({id:this._id+"detailscellwrapper"}),h=this._gridWidth-(0<this.element.find(".e-scrollcss").length?18:0)-2,c=this.element.parents().filter(".e-detailscellwrapperfly"),u=this._id;0<c.length;)u+=","+(r=c.attr("id").replace("detailscellwrapper","")),c=Z("#"+r).parents().filter(".e-detailscellwrapperfly");d.attr("parentTreeGridIds",u);n=this.getOffsetRect(this._$gridContent[0]);n.bottom=n.top+this._$gridContent[0].offsetHeight,i=(l=o.top+i[0].offsetHeight)+t.detailsRowHeight,!(l>n.bottom||i>n.bottom)||(p=o.top-t.detailsRowHeight)>n.top&&(l=p),d.removeClass("e-detailscellwrapper").addClass("e-detailscellwrapperfly"),t.cssClass&&d.addClass(t.cssClass);var p=this.getScrollElement().ejScroller("isHScroll")?this.getScrollElement().ejScroller("option","scrollLeft"):0,t=this.getMaxScrollWidth();0<t&&t<p&&(p=t);t=0;0<this._frozenColumnsLength&&(t=Z(this.element).find("#e-frozencontentdiv"+this._id).width()),d.css({top:l,left:o.left+p-t,"z-index":this.getMaxZIndex()+1,position:"absolute",width:h}).appendTo(this.element),this._trigger("refresh");h={};h.detailsElement=d,h.data=a,h.rowIndex=this.selectedRowIndex(),this._trigger("detailsDataBound",h);h={};h.detailsElement=d,h.data=a,h.rowIndex=this.selectedRowIndex(),h.appendTarget=null,this._trigger("detailsShown",h)?this._removeInnerDetailRows(e):(s.find(".e-detailsinfoiconshow").removeClass("e-detailsinfoiconshow").addClass("e-detailsinfoiconhide"),s.removeClass("e-detailsrowcollapse").addClass("e-detailsrowexpand"),h.appendTarget&&(Z(d).css({top:"auto",left:"auto",position:"auto"}),Z(d).detach().appendTo(Z("#"+h.appendTarget))))}}else this._removeInnerDetailRows(e)},_onHeaderClick:function(e){var t=this,i=t.model;t._cellMouseLeave(),t._headerMouseLeave(),t._clearContextMenu(),this._removeDetailsRow(),Z(e.target).is(".e-ascending, .e-descending")&&(e.target=e.target.parentNode);var s,n=Z(e.target),a=!0;if(t.getHeaderTable().find(".e-columnheader").find(".e-headercellactive").removeClass("e-headercellactive"),t._mouseDragged&&i.allowColumnReordering&&(a=!1),t._checkboxSelection&&i.allowSelection&&i.selectionSettings.enableSelectAll&&n.hasClass("e-headerCheckbox")&&(t.selectAllRows(!n.hasClass("e-checkmark")&&!n.hasClass("e-stop")),a=!1),!n.closest(".e-headercelldiv")||n.hasClass("e-columnmenu-icon")||n.hasClass("e-column-filter-icon")||n.hasClass("e-column-filtered-icon")||(d=n.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),!a||J.isNullOrUndefined(d)&&J.isNullOrUndefined(this.getColumnByField(d))||0==this.getColumnByField(d).allowSorting?t._saveEditedElements():a&&i.allowSorting&&(s=this.getColumnByField(d),o=n.closest(".e-headercell").find("span").hasClass("e-ascending")?J.sortOrder.Descending:J.sortOrder.Ascending,i.allowMultiSorting&&e.ctrlKey&&(t._multiSortRequest=!0),t._isRefreshAddedRecord=!1,i.isFromGantt?t.sortColumn(s.mappingName||s.field,o):t.sortColumn(s.field,o),t.model.isFromGantt&&0<=this.selectedRowIndex()&&((l={}).data=t.model.selectedItem,l.target="ejTreeGrid",l.recordIndex=this.selectedRowIndex(),t._trigger("rowSelected",l)))),n.hasClass("e-column-filter-icon")||n.hasClass("e-column-filtered-icon")){if(t._batchEditStarts)return t._batchSaveLostWarning("Filtering"),t._batchTempDetails.filterTarget=e,!1;if(d=n.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),s=t.getColumnByField(d),t._checkFilterType(s),n.data("isClicked"))t._clearColumnMenu(),n.data("isClicked",!1);else if("menu"==i.filterSettings.filterType&&"excel"!=s.filterType||"excel"==i.filterSettings.filterType&&"menu"==s.filterType)t._updateFilterMenuList(e),Z(".e-filtericon").data("isClicked",!1),n.data("isClicked",!0);else{var r=n.offset(),a=n.offsetParent(),o={top:(o=a.offset()).top+jQuery.css(a[0],"borderTopWidth",!0),left:o.left+jQuery.css(a[0],"borderLeftWidth",!0)},l=r.left-o.left-jQuery.css(n[0],"marginLeft",!0)+18,d=r.top-o.top-jQuery.css(n[0],"marginTop",!0)+2;"relative"==n.closest(".e-headercell").css("position")&&(l=n.offset().left+15,d=n.offset().top+20);var h,a=n[0].offsetWidth,r=t.getOffsetRect(t.element[0]).left+t.element.width(),o=s.filterEditType||s.editType;switch(o=o.toLowerCase()){case"numericedit":o="number";break;case"stringedit":case"maskedit":case"dropdownedit":o="string";break;case"booleanedit":o="boolean";break;case"datepicker":case"datetimepicker":o=o.replace("picker","")}"excel"==i.filterSettings.filterType&&t._saveEditedElements(),Z(window).width()<=t._responsiveMinWidth&&i.isResponsive&&i.enableResize?(t._renderResponsiveExcelFilter(s,o),Z(".e-filtericon").data("isClicked",!1),t._mediaStatus=!0):(-1==Z.inArray(o,t._excelColTypes)&&(t._clearFilterMenu(),Z("#"+t._id+o+"_excelDlg").remove(),Z("#"+t._id+o+"_CustomFDlg_wrapper").remove(),Z("#"+t._id+o+"_CustomFDlg").remove(),t._excelFilter._openedFltr=null,t._excelColTypes.push(o),t._excelFilter.renderDialog(o)),i={True:t.localizedLabels.trueText,False:t.localizedLabels.falseText},h=[],Z.grep(t.model.flatRecords,function(e){e.isSummaryRow||h.push(e.item)}),r<l+(r=Z("#"+t._id+o+"_excelDlg").width())&&(l=l-r-a),t._excelFilter.openXFDialog({field:s.field,enableResponsiveRow:!0,displayName:s.headerText,dataSource:h,query:null,position:{X:l,Y:d},dimension:{height:Z(window).height(),width:Z(window).width()},cssClass:"resFilter",type:o,format:s.format,localizedStrings:i}),Z(".e-filtericon").data("isClicked",!1),n.data("isClicked",!0),t._customFilter=null),t._filterIconTarget=e}this._addRemoveAnimateClass(n)}else n.hasClass("e-columnmenu-icon")?(n.data("isClicked")?(t._clearColumnMenu(),n.data("isClicked",!1)):(t._renderColumnMenu(e),Z(".e-columnicon").data("isClicked",!1),n.data("isClicked",!0)),this._addRemoveAnimateClass(n)):t._clearColumnMenu();return!!n.hasClass("e-checkbox")||!(n.hasClass("e-columnmenu-icon")||n.hasClass("e-column-filter-icon")||n.hasClass("e-column-filtered-icon"))&&void 0},_renderResponsiveExcelFilter:function(a,r){var o=this,e=Z.inArray(r,o._excelColTypes),l=Z(window).width(),d=Z(window).height();-1!=e&&(Z("#"+o._id+r+"_excelDlg").remove(),o._excelColTypes.splice(e,1),o._excelFilter._openedFltr=null),o._excelFilter.renderDialog(r);var t=J.buildTag("div.e-treegird-filterDialogHeaderDiv","",{width:"100%"}),i=J.buildTag("div.e-treegrid-label","<span>"+o._columnMenuTexts.menuFilter+"</span>",{"padding-top":"10px","font-weight":"bold","font-family":"Segoe UI, Helvetica Neue, Ubuntu, Arial"});0<Z(".e-filterMenuBtn").length&&Z(".e-filterMenuBtn").remove();var h,c=J.buildTag("div.e-filterMenuBtn"),u=J.buildTag("input.e-responsiveFilterBtnLeft e-flat e-btnsub","",{"margin-left":"15px"}),p=J.buildTag("input.e-responsiveFilterBtnRight e-flat e-btncan","",{"margin-right":"12px"});t.append(i),o._excelDlg=h="#"+o._id+r+"_excelDlg",u.ejButton({text:o.localizedLabels.okButtonText,type:"button",click:function(e){o._excelFilter._fltrBtnHandler(),Z(h).css("display","none")}}),p.ejButton({text:o.localizedLabels.cancelButtonText,type:"button",click:function(){Z(h).css("display","none"),o.element.css("display","block")}}),Z(h).children().not(".e-searchcontainer").remove();var m=o._excelFilter,s=J.buildTag("div.e-treegrid-resFilterleftIcon","",{"padding-top":"10px"},{closeDialogue:h.slice(1),openDialogue:"responsiveFilter"}),n=J.buildTag("span.e-icon e-treegrid-resIcon e-treegrid-responsiveBack","",{},{closeDialogue:h.slice(1),openDialogue:"responsiveFilter"});s.click(function(e){Z.proxy(o._closeDivIcon(e),this)}),t.append(s.append(n));var g=J.buildTag("div.e-treegrid-resFilterRigthIcon","",{"padding-top":"10px"},{closeDialogue:h.slice(1),gridEle:!0}),f=J.buildTag("span.e-icon e-treegrid-resIcon e-responsiveCustomFilter","",{},{closeDialogue:h.slice(1),gridEle:!0});"boolean"!=r&&t.append(g.append(f));e=Z(h).css({height:d-20,padding:"0px",width:"99.7%"});(i=e.find(".e-searchcontainer .e-searchbox").css("margin-top","10px")).children().css("margin-top","10px");s=e.find(".e-checkboxlist"),n=.65*d;o._checkBoxDiv=s,Z(e.find(".e-searchcontainer")).addClass("e-treegrid-resultSearch");e.find(".e-treegrid-resultSearch .e-btncontainer").remove();u.addClass("e-treegrid-responsiveFilterBtnLeft").css({width:"43.6%"}),p.addClass("e-treegrid-responsiveFilterBtnRight").css("width","43.6%"),e.find(".e-excelLabel").remove();f=J.buildTag("div.e-excelLabel",a.headerText,{"margin-top":"10px"}),i=e.find(".e-searchcontainer");f.insertBefore(i.find(".e-searchbox")),e.prepend(t),e.find(".e-searchbox span").css("top","23px"),Z(h).append(c.append(u).append(p)),s.ejScroller({height:n,width:"98%"}).ejScroller("refresh");var n={True:o.localizedLabels.trueText,False:o.localizedLabels.falseText},_=[];Z.grep(o.model.flatRecords,function(e){e.isSummaryRow||_.push(e.item)}),o._excelFilter.openXFDialog({field:a.field,enableResponsiveRow:!0,displayName:a.headerText,dataSource:_,query:null,position:{X:0,Y:0},dimension:{height:d,width:l},cssClass:"resFilter",type:r,format:a.format,localizedStrings:n}),Z(h).insertAfter(o.element),g.click(function(e){Z.proxy(o._closeDivIcon(e),this);var t=d-30;m._openCustomFilter("customfilter");var s=Z("#"+o._id+r+"_CustomFDlg").addClass("e-responsviesExcelFilter");o._customFilter=s,J.isNullOrUndefined(s.find(".e-treegird-filterDialogHeaderDiv")[0])&&(n=J.buildTag("div.e-treegird-filterDialogHeaderDiv"),e=J.buildTag("div.e-treegrid-label","<span>"+m.localizedLabels.title+"</span>",{"font-weight":"bold","font-family":"Segoe UI, Helvetica Neue, Ubuntu, Arial"}),n.append(e),i=J.buildTag("div.e-treegrid-resFilterleftIcon","",{},{closeDialogue:o._id+r+"_CustomFDlg",openDialogue:h.slice(1)}),e=J.buildTag("span.e-icon e-treegrid-resIcon e-treegrid-responsiveBack","",{},{closeDialogue:o._id+r+"_CustomFDlg",openDialogue:h.slice(1)}),i.click(function(e){s.css("display","none"),Z("#"+o._id+r+"_CustomFDlg_wrapper").css("display","none");var t={True:o.localizedLabels.trueText,False:o.localizedLabels.falseText},i=[];Z.grep(o.model.flatRecords,function(e){e.isSummaryRow||i.push(e.item)}),o._excelFilter.openXFDialog({field:a.field,enableResponsiveRow:!1,displayName:a.headerText,dataSource:i,query:null,position:{X:0,Y:0},dimension:{height:d,width:l},type:r,format:a.format,localizedStrings:t})}),n.append(i.append(e)),i=J.buildTag("div.e-treegrid-resFilterRigthIcon","",{},{closeDialogue:o._id+r+"_CustomFDlg",gridEle:!0}),e=J.buildTag("span.e-icon e-treegrid-resIcon e-treegrid-responsiveClose","",{},{closeDialogue:o._id+r+"_CustomFDlg",gridEle:!0}),n.append(i.append(e)),i.click(function(e){s.css("display","none"),Z("#"+o._id+r+"_CustomFDlg_wrapper").css("display","none"),o.element.css("display","block")}),s.prepend(n),s.insertAfter(o.element),s.find(".e-dlgfields").css("width","98%"),(i=s.find(".e-dlgfields:first").css("width","92%").css({"margin-left":"6px","font-family":"Segoe UI, Helvetica Neue, Ubuntu, Arial"})).css("margin-top","4%"),n=s.find(".e-dlgfields").find(".e-fieldset legend").text(),J.buildTag("div.e-responsiveLabelDiv",n,{"margin-left":"6px","font-family":"Segoe UI, Helvetica Neue, Ubuntu, Arial"}).insertAfter(i),n=s.find(".e-dlgfields").find(".e-fieldset").find("table").css("width","100%"),s.find(".e-dlgfields").find(".e-fieldset").replaceWith(n),n.parent("div").addClass("e-responsiveExcelFilterFieldDiv"),n.find(".e-dropdownlist"),n.find(".e-dropdownlist").each(function(e,t){var i=Z(t).ejDropDownList("model.dataSource");Z(t).ejDropDownList("destroy").ejDropDownList({width:"80%",dataSource:i})}),n.find(".e-autocomplete").each(function(e,t){var i=Z(t).ejAutocomplete("model");Z(t).ejAutocomplete("destroy").ejAutocomplete({width:"90%",dataSource:i.dataSource,fields:i.fields,enableDistinct:!0})}),n.find(".e-datepicker").each(function(e,t){Z(t).ejDatePicker("instance").option("width","90%")}),n.find(".e-datetimepicker").each(function(e,t){Z(t).ejDateTimePicker("instance").option("width","90%")}),n.find(".e-numerictextbox").each(function(e,t){Z(t).ejNumericTextbox("instance").option("width","90%")}));var i=u.clone(),n=p.clone();i.ejButton({text:o.localizedLabels.okButtonText,type:"button",click:function(e){o._excelFilter._openedFltr=s,o._excelFilter._fltrBtnHandler(),s.css("display","none"),Z("#"+o._id+r+"_CustomFDlg_wrapper").css("display","none")}}),n.ejButton({text:o.localizedLabels.cancelButtonText,type:"button",click:function(){s.css("display","none"),Z("#"+o._id+r+"_CustomFDlg_wrapper").css("display","none")}}),s.append(c.clone().append(i).append(n)),i.css("width","43.6%"),n.css("width","43.6%");n=s.find(".e-dlgfields .e-btncontainer").remove();n.find("input:first").addClass("e-responsiveFilterBtnLeft").css("width","45.6%"),n.find("input:last").addClass("e-responsiveFilterBtnRight"),s.ejDialog({enableModal:!1,height:t,width:"100%",position:{X:0,Y:0},enableResize:!1,showHeader:!1}).ejDialog("open");n=o.getMaxZIndex()+1,t=Z("#"+o._id+r+"_CustomFDlg_wrapper").css("z-index"),n=t<n?n:t;s.css({position:"absolute",top:"0px",left:"0px","z-index":n,width:"95.5%"}),o._mediaStatus=!0})},_closeDivIcon:function(e){var t,e=Z(e.target);J.isNullOrUndefined(e.attr("closeDialogue"))||(t=Z("#"+e.attr("closeDialogue")),J.isNullOrUndefined(t.data("ejDialog"))?t.css("display","none"):t.ejDialog("close")),J.isNullOrUndefined(e.attr("gridEle"))||this.element.css("display","block"),J.isNullOrUndefined(e.attr("openDialogue"))||(this.model.enableResponsiveRow||-1!=e.attr("closeDialogue").indexOf("Custom")?(t=Z("#"+e.attr("openDialogue")),J.isNullOrUndefined(t.data("ejDialog"))?t.css("display","block"):t.ejDialog("open")):this.element.css("display","block"))},_getExcelPredicate:function(e){var t=this.model,i=Z.extend(!0,[],t.filterSettings.filteredColumns),s=i.length;this._excelFilter.getPredicate(i,null,!0);for(var n=this._excelFilter._predicates[0],a=0;a<s;a++){var r,o=i[a],l=o.value==this._dropDownListBlanksText?(r=(r=J.Predicate(o.field,"equal",null,!0)).or(o.field,"equal","",!0),n[o.field]=r,l!=P?l.and(r):r):J.isNullOrUndefined(l)?J.Predicate(o.field,o.operator,o.value,!o.matchcase):o.isComplex?l.and(o):l[o.predicate](o.field,o.operator,o.value,!o.matchcase);J.isNullOrUndefined(e)&&this._storePreviousFilteredValue(o.field,o.value,o.operator)}return l},_checkFilterType:function(e){var t,i,s=this.model.filterSettings,n=(n=e.filterEditType||e.editType).toLowerCase();if("excel"==s.filterType&&"menu"==e.filterType&&-1==Z.inArray(n,this._menuColTypes)){switch(n){case"stringedit":t="String";break;case"numericedit":t="Numeric";break;case"datepicker":t="Datepicker";break;case"datetimepicker":t="Datetimepicker";break;case"dropdownedit":t="Dropdown",i=e;break;case"booleanedit":t="Boolean";break;default:t="String",n="stringedit"}this._renderEdittypeFilterMenu(t,i),this._menuColTypes.push(n)}else"menu"==s.filterType&&"excel"==e.filterType&&J.isNullOrUndefined(this._excelFilter)&&this._renderExcelFilter()},_triggerColumnResize:function(e,t,i){var s=this,n=s.model,a=s.getHeaderTable().find(".e-columnheader"),r=a.find(".e-headercell"),o=s._cellIndex,l=(Z(s._target),0),d=Z(i.target);if("columnResizeStart"==e&&(this._isFrozenStackedResize=!1,s._orgX=t,-1!=(o=s._currentCell=s._cellIndex=s.getCellIndex(i))&&0<this._frozenColumnsLength&&n.showStackedHeader&&0<n.stackedHeaderRows.length&&(0<d.closest(".e-movablecontentdiv").length||0<d.closest(".e-movableheaderdiv").length||0<d.closest(".e-movablefooterdiv").length?l+=this._frozenColumnsLength:0<d.closest(".e-frozenheaderdiv").length&&(d.hasClass("e-stackedHeaderCell")?this._isFrozenStackedResize=!0:l+=Z(this.getHeaderTable()[0]).find(".e-stackedHeaderCell").length))),-1!=s._currentCell){r=r[s._currentCell+l],l=r.offsetWidth;if("columnResizeStart"==e){s._isStackedResize=Z(r).hasClass("e-stackedHeaderCell");var h={};return h={columnIndex:o,column:s.model.columns[o],target:Z(r),oldWidth:l},s._trigger("columnResizeStart",h)}if("columnResizeEnd"==e){a.find(".e-headercell").not(".e-detailheadercell").filter(":visible");var c=t-s._orgX;s._newWidth=l+c,s.__oldWidth=l;h={};return h={columnIndex:o,column:n.columns[o],target:Z(r),oldWidth:l,newWidth:s._newWidth,extra:c},s._trigger("columnResizeEnd",h)}this.model.columnResizeSettings.columnResizeMode!=J.TreeGrid.ColumnResizeMode.FixedColumns||this.model.isFromGantt?!this.model.isFromGantt&&this.model.columnResizeSettings.columnResizeMode==J.TreeGrid.ColumnResizeMode.NextColumn&&this.model.showTotalSummary&&this._colgroupRefresh():this._updateTableWidth();h={},c=t-s._orgX;return h={columnIndex:o,column:n.columns[o],oldWidth:s.__oldWidth,newWidth:s._newWidth},s._trigger("columnResized",h)}},_headerMouseDown:function(e){var t,i=this,s=i._getCoordinate(e),n=i.model;if(i._cellMouseLeave(),i._headerMouseLeave(),!i.model.isFromGantt&&n.contextMenuSettings.showContextMenu&&i._contextMenuEventBinding(e),"touchstart"==e.type?(a=i._getElementByPosition(s.pageX,s.pageY),i._on(i.element,"touchmove",i._mouseMove),i._resizer&&i._resizer._touchStart(e)):a=Z(e.target),i._on(Z(document),"mouseup touchend",i._headerMouseUp),n.allowColumnReordering&&(0<a.closest(".e-columnheader").length&&i.dragColumn(e),"touchstart"==e.type&&(i._dragColumnTooltipTimer=window.setTimeout(function(){i._touchstart=!1,i._dragTooltip||"touchstart"!=e.type||(i.dragColumnToolTip(e),i._dragTooltip&&i._on(i.element,"touchmove",i.dragColumnToolTip))},550))),i.model.allowColumnResize){n.isFromGantt?i._on(i.element.closest(".e-gantt"),"mouseup touchend",i._mouseUp):i._on(i.element,"mouseup touchend",i._mouseUp),t=a.closest("tr"),this._target=a;var a,n=s.pageX;s.pageY;if(-1!=navigator.userAgent.indexOf("WebKit")&&(n=s.pageX,s.pageY,document.body.scrollTop),0<t.length&&Z(t[0]).hasClass("e-resizedragicon")&&!a.hasClass("e-columnicon"))if(a.is(".e-headercelldiv")&&(a=Z(a[0].parentNode)),e.target=a,0<i._frozenColumnsLength&&(a=a.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),i.getColumnByField(a)),this._triggerColumnResize("columnResizeStart",n,e))return;"touchstart"!=e.type&&i._resizer._mouseDown(e)}},_headerMouseUp:function(e){var t,i=this,s=i.model,n={},a=i._getCoordinate(e);"touchend"==e.type?(t=i._getElementByPosition(a.pageX,a.pageY),i._off(i.element,"touchmove",i._mouseMove)):t=Z(e.target),i._off(Z(document),"mouseup touchend",i._headerMouseUp),s.contextMenuSettings.showContextMenu&&i._contextMenuHandler&&i._displayContextMenu?i._headerRightClick(e):i._contextMenuHandler=!1,i._displayContextMenu=!0,i.model.allowColumnResize&&(s.isFromGantt?i._off(i.element.closest(".e-gantt"),"mouseup touchend",i._mouseUp):i._off(i.element,"mouseup touchend",i._mouseUp),this.element.find(".e-reSizeColbg").remove(),this.element.find(".e-columnheader").removeClass("e-resizedragicon"),i._resizer._expand=!1),s.allowColumnReordering&&(window.clearTimeout(this._dragColumnTooltipTimer),this._dragColumnTooltipTimer=null,i._off(i.element,"mousemove touchmove",i.dragColumnToolTip),Z(i._reordervline).remove(),Z(i._dragmouseOverTooltip).remove(),i._posx==a.pageX&&i._posy==a.pageY||(i._mouseDragged=!0),s.allowColumnReordering&&0<t.closest(".e-headercell").length&&"mousemove"==i._headerDragStatus&&(s=s.columns,n.targetColumn=s[i._currentIndex],n.targetColumnIndex=i._currentIndex,n.draggedColumn=i._draggedColumn,n.draggedColumnIndex=s.indexOf(i._draggedColumn),J.isNullOrUndefined(n.targetColumn.nonColumn)&&!J.isNullOrUndefined(n.targetColumnIndex)&&n.targetColumnIndex!=n.draggedColumnIndex&&(i._trigger("columnDrop",n),n.cancel||i.reorderColumn(n.draggedColumn.field,n.targetColumnIndex)))),i._resetHeaderPrivateProperties()},_resetHeaderPrivateProperties:function(){this._timerDragDown&&(this._timerDragDown=window.clearInterval(this._timerDragDown)),this._timerDragUp&&(this._timerDragUp=window.clearInterval(this._timerDragUp));this.model;this._draggedColumn=null,this._dragMouseDown=!1,this._dragTooltip=!1,this._headerDragStatus="",this._timerDragDown=null,this._timerDragUp=null,this._currentIndex=null,this._dragmouseOverTooltip=null},_contentMouseDown:function(e){var t=Z(e.target),i=this,s=i.model,n=i._getCoordinate(e),a=t.closest(".e-treegrid").attr("id");if(i._contentPageY=n.pageY,i._contentPageX=n.pageX,i._on(Z(document),"mouseup touchend",i._mouseupHandler),s.isFromGantt&&("touchstart"==e.type&&(i._ganttTouchTrigger=!0),n={ctrlKey:e.ctrlKey},i._trigger("touchHandler",n),e.ctrlKey=n.ctrlKey),"touchstart"==e.type&&(i._isTouchEvent=!0,i._isTouchTrigger=!0),Z("#"+a+"_selectionpopup").is(":visible")&&(Z("#"+a+"_selectionpopup").find(".e-rowselect").hasClass("e-spanclicked")?(e.ctrlKey=!0,i.model.selectionSettings.selectionMode==J.TreeGrid.SelectionMode.Row&&(i._multiSelectCtrlRequest=!0)):(e.ctrlKey=!1,i._multiSelectCtrlRequest=!1)),!i.model.isFromGantt&&s.contextMenuSettings.showContextMenu&&i._contextMenuEventBinding(e),!(t.hasClass("e-vhandle")||t.hasClass("e-vscrollbar")||t.hasClass("e-vup")||t.hasClass("e-vdown")||t.hasClass("e-vhandlespace")||t.hasClass("e-hhandle")||t.hasClass("e-hscrollbar")||t.hasClass("e-hdown")||t.hasClass("e-hhandlespace")||0<t.closest(".e-editedcell").length||0<t.closest(".e-unboundeditedcell").length||t.parent().hasClass("e-unboundcelldiv"))&&(i._mouseDown=!0,s.allowDragAndDrop&&(0<t.closest(".e-treegridrows").length||0<t.closest(".e-templatecell").length)&&("touchstart"==e.type?i._dragTooltipTimer=window.setTimeout(function(){i.dragRecord(e),i._multiSelectPopup&&i._multiSelectPopup.is(":visible")&&i._dragTooltip&&i._clearMultiSelectPopup()},550):i.dragRecord(e)),s.isFromGantt||"touchstart"==e.type&&i._on(i.element,"touchmove","#"+i._id+"e-gridcontent",i._touchScroll),e.ctrlKey||e.shiftKey||2==e.which||3==e.which))return!0},_touchScroll:function(e){var t,i,s=this,n=s.model,a=s._getCoordinate(e),r=s._contentPageX,o=s._contentPageY,l=a.pageX,d=a.pageY;s._isTouchTrigger=!1,t=l-r,i=d-o,"touchmove"==e.type&&e.preventDefault(),s._mouseDown&&!s._dragMouseDown&&(window.clearTimeout(this._dragTooltipTimer),this._dragTooltipTimer=null,window.clearTimeout(this._dragColumnTooltipTimer),this._dragColumnTooltipTimer=null,e="touchmove"==e.type?s._getElementByPosition(a.pageX,a.pageY):Z(e.target),!n.isFromGantt&&e.closest("div").find(".e-content")&&(i=o<d?-Math.abs(i):Math.abs(i),t=r<l?-Math.abs(t):Math.abs(t),s._contentPageX=l,s._contentPageY=d,s._updateScrollPosition(e,t,i)))},_updateScrollPosition:function(e,t,i){var s=this,n=s.getScrollElement().ejScroller("option","scrollTop"),a=s.getScrollElement().ejScroller("option","scrollLeft"),r=a+t,o=n+i,t=s.isVScroll()?s.getMaxScrollHeight():null,i=s.getScrollElement().ejScroller("isHScroll")?s.getScrollElement().find(".e-content").get(0).scrollWidth:null;t&&(0<(o=t<o?t:o<0?0:o)&&0<n||o<t&&n<t)&&(s._$gridContent.scrollTop(0),s.getScrollElement().ejScroller("scrollY",o,!0)),i&&(0<(r=i<r?i:r<0?0:r)&&0<a||r<i&&a<i)&&(s._$gridContent.scrollLeft(0),s.getScrollElement().ejScroller("scrollX",r,!0))},_mouseMove:function(e){var t=this,i=this.model;window.clearTimeout(this._dragColumnTooltipTimer),this._dragColumnTooltipTimer=null,"touchmove"==e.type&&t._resizer&&t._resizer._allowStart&&(t._headerDragStatus=""),t.model.allowColumnResize&&0==t._headerDragStatus.length&&(t._resizer._mouseMove(e),t._resizer._expand&&t._cancelEditState(),"col-resize"!==Z(e.target).parent().css("cursor")&&(!(i.allowSorting||i.showColumnChooser||!i.showColumnChooser&&i.allowFiltering&&"menu"==i.filterSettings.filterType)||Z(e.target).closest("th").hasClass("e-detailheadercell")||Z(e.target).closest("th").hasClass("e-stackedHeaderCell")?t.getHeaderTable().find(".e-columnheader").css({cursor:"default"}):t.getHeaderTable().find(".e-columnheader").css({cursor:"pointer"})))},_frozenWidth:function(){for(var e=this.getContentTable().find("colgroup").find("col").slice(0,this.model.scrollSettings.frozenColumns),t=0,i=0;i<e.length;i++)t+="none"==e[i].style.display?0:parseInt(e[i].style.width.replace("px",""));return t},_mouseUp:function(e){var t=this,i=t.model;if("mousemove"!=t._headerDragStatus&&i.allowColumnResize)if((Z(e.target).hasClass("e-headercelldiv")||Z(e.target).hasClass("e-reSizeColbg"))&&(t._focusTreeGridElement(),t._clearColumnMenu()),Z(e.target).hasClass("e-reSizeColbg")||0<Z(e.target).closest(".e-gridheader").length){if(t._resizer._expand){var s,n,a=e.clientX;e.clientY;if(-1!=navigator.userAgent.indexOf("WebKit")&&(a=e.pageX,e.pageY),"touchend"==e.type&&(a=e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY),!J.isNullOrUndefined(t._currentCell)&&this._triggerColumnResize("columnResizeEnd",a,e))return this.element.find(".e-reSizeColbg").remove(),t._resizer._expand=!1,void(i.isFromGantt?t._off(t.element.closest(".e-gantt"),"mouseup touchend",t._mouseUp):t._off(t.element,"mouseup touchend",t._mouseUp));!J.isNullOrUndefined(t._currentCell)&&1==i.columns[t._currentCell].isFrozen&&a+100>this._gridWidth||(t._resizer._mouseUp(e),s=parseInt(i.columns[t._currentCell].width),i.isFromGantt&&"msie"==J.browserInfo().name&&i.showColumnChooser&&!J.isNullOrUndefined(s)&&(n=Z(t.getHeaderTable().find("thead").find("th")[t._currentCell]),s<42?this._getColWidth(t._currentCell,n):n.hasClass("e-column-menu-padding")||n.addClass("e-column-menu-padding")),!J.isNullOrUndefined(t._currentCell)&&0<=t._currentCell&&t._currentCell<i.columns.length&&i.columns[t._currentCell]&&(i.columns[t._currentCell].width=t._resizer._newWidth),J.isNullOrUndefined(t._currentCell)||this._triggerColumnResize("columnResized",a,e),i.allowTextWrap&&i.allowColumnResize&&t._updateRowHeight(),"auto"==i.sizeSettings.height&&i.allowColumnResize&&(t.getScrollElement().ejScroller("refresh"),t._updateContentHeight()),t.getScrollElement().ejScroller("refresh"),t._updateHeaderScrollLeft(),t._updateScrollCss(),i.isFromGantt&&t._trigger("refreshScrollCss"))}}else this.element.find(".e-reSizeColbg").remove(),t._resizer._expand=!1,i.isFromGantt?t._off(t.element.closest(".e-gantt"),"mouseup touchend",t._mouseUp):t._off(t.element,"mouseup touchend",t._mouseUp)},_resizeFilteringElements:function(){if(this.model.allowFiltering){var e={},t=this.model.columns.length;e.requestType=J.TreeGrid.Actions.Filter;for(var i=0;i<t;i++)this.model.columns[i].width=this.columnsWidthCollection[i],e.fieldname=this.model.columns[i].field,this._filteringElements(e)}},_enableEditingEvents:function(){var e=this;e.model.editSettings.allowEditing?J.isTouchDevice()?(e._off(e.element,"doubletap ",".e-gridcontent",e._editdblClickHandler),e._on(e.element,"doubletap ",".e-gridcontent",e._editdblClickHandler)):(e._off(e.element,"dblclick ",".e-gridcontent",e._editdblClickHandler),e._on(e.element,"dblclick ",".e-gridcontent",e._editdblClickHandler)):J.isTouchDevice()?e._off(e.element,"doubletap ",".e-gridcontent",e._editdblClickHandler):e._off(e.element,"dblclick ",".e-gridcontent",e._editdblClickHandler)},_saveCellHandler:function(e){var t,i=Z(e.target),s=this,e=s.model;e.isFromGantt&&i.closest("tr").length&&(t=i.closest("tr"),s.getRows(),t=this.getIndexByRow(t),t=e.currentViewData&&e.currentViewData[t],t=e.updatedRecords.indexOf(t)),i.hasClass("e-vhandle")||i.hasClass("e-vscrollbar")||i.hasClass("e-vup")||i.hasClass("e-vdown")||i.hasClass("e-vhandlespace")||i.hasClass("e-vscroll")||i.hasClass("e-hhandle")||i.hasClass("e-hscrollbar")||i.hasClass("e-hup")||i.hasClass("e-hdown")||i.hasClass("e-hhandlespace")||i.hasClass("e-hscroll")||((0<i.closest(".e-gridcontent").length||i.hasClass(".e-gridcontent")||i.hasClass("e-summarytreegridexpand")||i.hasClass("e-summarytreegridcollapse"))&&(s._isRowEdit?0==i.closest("form#"+s._id+"EditForm").length&&0==i.closest("form#"+s._id+"EditFrozenForm").length&&0<Z("#"+s._id+"EditForm").length&&s.saveRow():0==i.closest(".e-popup").length&&0==i.closest(".e-rowcell").find("#"+s._id+"EditForm").length&&0==i.closest("form#"+s._id+"EditFrozenForm").length&&0<Z("#"+s._id+"EditForm").length&&s.saveCell()),"row"!=e.selectedMode||!e.isFromGantt||!e.updatedRecords.length||J.isNullOrUndefined(t)||i.hasClass("e-treegridexpand")||i.hasClass("e-treegridcollapse")||this.selectedRowIndex()==t||s._rowSelectingEventTrigger(this.selectedRowIndex(),t)||(e.allowSelection&&s.selectRows(t),s._rowSelectedEventTrigger(t)))},_contextMenuAction:function(e){var t=this.model,i=this._getCoordinate(e),i="taphold"==e.type?this._getElementByPosition(i.pageX,i.pageY):Z(e.target);if(t.contextMenuSettings.showContextMenu){if(this._multiSelectCtrlRequest&&(this._multiSelectCtrlRequest=!1),3!=e.which||this._isTouchEvent)return this._contextMenuHandler=!0;0<i.closest(".e-gridcontent").length?this._rightClick(e):0<i.closest(".e-gridheader").length&&this._headerRightClick(e)}else e.stopPropagation()},_rightClick:function(e){var t,i,s=this,n=s.model,a=Z(e.target),r=(a[0].parentNode,{}),o=!1,l=s.getUpdatedRecords();if(a.closest(".e-treegrid").attr("id")!==this._id)return!1;if("cell"==n.selectionSettings.selectionMode&&"dialogEditing"!=n.editSettings.editMode&&(n.editSettings.editMode="cellEditing"),s.model.contextMenuSettings.showContextMenu){if(s._clearContextMenu(),this._removeDetailsRow(),s.disableTooltip(),a.hasClass("e-summaryrowcell")||a.hasClass("e-summarytitle"))return;if((a.hasClass("e-cell")||a.hasClass("e-treegridexpand"))&&a.closest("tr"),i=a.closest("tr"),t=s.getIndexByRow(i),s.model.currentViewData=s.getCurrentViewData(),i=s.model.currentViewData[t],t=l.indexOf(i),r.data=i,r.recordIndex=t,n.isEdit?o=0<a.closest(".e-rowcell").find("form#"+s._id+"EditForm").length||0<a.closest(".e-rowcell").find("form#"+s._id+"EditFrozenForm").length:this._isRowEdit&&(o=0<a.closest(".e-rowedit").find("form#"+s._id+"EditForm").length||0<a.closest(".e-rowedit").find("form#"+s._id+"EditFrozenForm").length||0<a.closest(".e-addedrow").find("form#"+s._id+"EditForm").length||0<a.closest(".e-addedrow").find("form#"+s._id+"EditFrozenForm").length),!o&&(n.isEdit||this._isRowEdit)){if(!this.editFormValidate())return!0;s._saveEditedElements()}null==s.dataSource()||0==s.dataSource().length||o||0==n.flatRecords.length?(s._contextMenuItems=[],s._contextMenuItems=s._getContextMenuItems(),s._subContextMenuItems=[],s._updateContextmenuOption(t,i),s._clearContextMenu(),0<s._contextMenuItems.length&&s._renderContextMenu(e,t,i,o)):i&&(e.preventDefault(),s._contextMenuItems=[],s._contextMenuItems=s._getContextMenuItems(),s._subContextMenuItems=[],s._subContextMenuItems=s._getsubContextMenuItems(),s._updateContextmenuOption(t,i),s._clearContextMenu(),"row"==n.selectionSettings.selectionMode&&n.allowSelection&&!s._rowSelectingEventTrigger(this.selectedRowIndex(),t,!1,e.type)&&(s.selectRows(t),s._rowSelectedEventTrigger(t,null,!1,e.type)),"cell"==n.selectionSettings.selectionMode&&(a=s.getCellIndex(e),s.selectCells([{rowIndex:t,cellIndex:a}]),s._rowIndexOfLastSelectedCell=t),0<s._contextMenuItems.length&&s._renderContextMenu(e,t,i,o),s.editFormValidate()&&s._cancelSaveTools())}s._clearColumnMenu(),s._contextMenuHandler=!1,!s.model.isFromGantt&&n.contextMenuSettings.showContextMenu&&(J.isTouchDevice()?s._off(s.element,"taphold",s._contextMenuAction):s._off(s.element,"contextmenu",s._contextMenuAction))},_contextMenuEventBinding:function(e){var t=this;J.isTouchDevice()?(t._off(t.element,"taphold",t._contextMenuAction),t._on(t.element,"taphold",t._contextMenuAction)):(t._off(t.element,"contextmenu",t._contextMenuAction),t._on(t.element,"contextmenu",t._contextMenuAction))},_headerRightClick:function(e){var t=this,i=t.model,s=Z(e.target);e.preventDefault(),i.contextMenuSettings.showContextMenu&&(t._clearColumnMenu(),t._removeDetailsRow(),t.disableTooltip(),t._headerContextMenuItems=[],t._headerContextMenuItems=t._getHeaderContextMenuItems(e),s=s.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),s=t.getColumnByField(s),0<t._headerContextMenuItems.length&&!s.nonColumn&&t._renderHeaderContextMenu(e),t.editFormValidate()&&t._cancelSaveTools(),t._contextMenuHandler=!1,!i.isFromGantt&&i.contextMenuSettings.showContextMenu&&(J.isTouchDevice()?t._off(t.element,"taphold",t._contextMenuAction):t._off(t.element,"contextmenu",t._contextMenuAction)))},_editdblClickHandler:function(e){var t=this,i=t.model,s=Z("#"+t._id+"EditForm"),n={},a=Z(e.target),r=a.closest("tr"),o=t._cellEditingDetails;if(i.isFromGantt&&1==i.readOnly||a.hasClass("e-unboundcelldiv")||a.hasClass("e-unboundcell")||a.closest("td").hasClass("e-unboundcell")||e.ctrlKey)return!0;var l=t.getUpdatedRecords();if(!(a.hasClass("e-vhandle")||a.hasClass("e-vscrollbar")||a.hasClass("e-vup")||a.hasClass("e-vdown")||a.hasClass("e-vhandlespace")||a.hasClass("e-treegridexpand")||a.hasClass("e-treegridcollapse")||a.hasClass("e-hhandle")||a.hasClass("e-hscrollbar")||a.hasClass("e-hup")||a.hasClass("e-hdown")||a.hasClass("e-hhandlespace")||a.hasClass("e-summaryrowcell")||a.hasClass("e-footersummaryrowcell")||a.hasClass("e-summarytitle")||a.hasClass("e-lastsummaryrow"))){if(a.closest(".e-treegrid").length&&a.closest(".e-treegrid").attr("id")!==this._id)return!1;if(a.hasClass("e-rowcell")||a.parent().hasClass("e-rowcell")||a.closest("td").hasClass("e-rowcell")||a.closest("td").hasClass("e-rowcell")&&a.hasClass("e-cell")){if("normal"===i.editSettings.editMode&&i.editSettings.allowEditing){if("resourceView"==i.viewType)return!0;n.requestType=J.TreeGrid.Actions.BeginEdit,t._trigger("actionBegin",n)}if(t._cellEditingDetails.cancelSave)t._cellEditingDetails.cancelSave=!1;else{if(0===s.length&&null!==t.getRows()){if("cellediting"==i.editSettings.editMode.toLowerCase()||"batchediting"==i.editSettings.editMode.toLowerCase()&&"cell"==i.editSettings.batchEditSettings.editMode.toLowerCase()){if(t._focusTreeGridElement(),t._cellEditingDetails.columnIndex=t.getCellIndex(e),"click"!=i.editSettings.beginEditAction&&(t._cellEditingDetails.rowIndex=t.getRowIndex(e)),(d=i.currentViewData[t._cellEditingDetails.rowIndex]).summaryRow)return;if(i.selectedItem=d,0==i.columns[o.columnIndex].allowEditing||"resourceView"==i.viewType&&"unassignedTask"==d.eResourceTaskType)return;var d=0<=t._cellEditingDetails.columnIndex&&i.columns[t._cellEditingDetails.columnIndex].field;d&&(t.updateScrollBar(),i.editSettings.allowEditing&&t.cellEdit(t._cellEditingDetails.rowIndex,d))}else"rowediting"!=i.editSettings.editMode.toLowerCase()&&"dialogediting"!=i.editSettings.editMode.toLowerCase()&&("batchediting"!=i.editSettings.editMode.toLowerCase()||"row"!=i.editSettings.batchEditSettings.editMode.toLowerCase()&&"dialog"!=i.editSettings.batchEditSettings.editMode.toLowerCase())||(i.currentViewData=t.getCurrentViewData(),-1!=t.getCellIndex(e)&&-1!=t.getRowIndex(e)&&(t._cellEditingDetails.columnIndex=t.getCellIndex(e),d=t.getRowIndex(e),i.enableVirtualization&&(e="row"==i.selectionSettings.selectionMode?i.selectedItem:i.updatedRecords[t._rowIndexOfLastSelectedCell],d=l.indexOf(e)),"dialogediting"==t.model.editSettings.editMode.toLowerCase()||"batchediting"==t.model.editSettings.editMode.toLowerCase()&&"dialog"==i.editSettings.batchEditSettings.editMode.toLowerCase()?t._showTreeGridAddEditDialog(d):(t.updateScrollBar(),t._editRow(d,P,t._cellEditingDetails.columnIndex))));0<(s=Z("#"+t._id+"EditForm")).length&&t._editAddTools(),Z.isFunction(Z.validator)&&t._initValidator()}t.model.allowSelection||r.find(".e-active").removeClass("e-active").removeClass("e-selectionbackground"),t._clearContextMenu(),this._removeDetailsRow()}}}},_popupHide:function(e){var t=this.model.columns,i=null,s=null,n=null,a=e&&Z(e).closest("td");this.model.allowFiltering&&"filterbar"==this.model.filterSettings.filterType&&(a=e&&Z(e).closest("td, th")),0<Z("#"+this._id+"_ColumnMenu").length&&(J.isTouchDevice()||this._clearColumnMenu());for(var r=0;r<t.length;r++){var o,i=null;t[r]&&(n=t[r].field.split(".").join(""),"datepicker"==t[r].editType||"datetimepicker"==t[r].editType?i=Z("#"+this._id+n).data("ejDatePicker"):"dropdownedit"==t[r].editType&&(o=Z("#"+this._id+n).data("ejDropDownList"))&&0==Z(a).find("#"+o._id).length&&o.model&&o.hidePopup(),i&&0==Z(a).find("#"+i._id).length&&i.hide(),"datepicker"!=t[r].filterEditType&&"datetimepicker"!=t[r].filterEditType||(s=Z("#"+this._id+"_"+n+"_filterbarcell").data("ejDatePicker"))&&0==Z(a).find("#"+s._id).length&&s.hide(),"dropdownedit"==t[r].filterEditType&&(o=Z("#"+this._id+"_"+n+"_filterbarcell").data("ejDropDownList"))&&0==Z(a).find("#"+o._id).length&&o.hidePopup())}},_mouseWheel:function(e){var t=this.model,i=null,s=e;if(this._popupHide(),e=e.originalEvent,!Z(e.target).hasClass("e-footersummaryrowcell")){if(!(this.getScrollElement().height()>this._$gridContainer.height())){if(e.wheelDelta?(i=-e.wheelDelta/120,window.opera&&parseFloat(window.opera.version,10)<10&&(i=-i)):e.detail&&(i=e.detail/3),!i)return!1;var n=this.getScrollElement().ejScroller("option","scrollTop"),i=n+57*i,t=this.model.isFromGantt?parseInt(this.getRecordsHeight())-(this._viewPortHeight-18):"auto"==t.sizeSettings.height?0:this.getMaxScrollHeight();if(t<i&&(i=t),i<0&&(i=0),n!=i)try{(e.preventDefault?e:s).preventDefault()}catch(e){}return this.updateScrollTop(i),!0}this.getScrollElement().ejScroller("scrollY",0,!0)}},_getCollapsedParentItem:function(e){e=e.parentItem;return e?!0===this.getExpandStatus(e)?e:this._getCollapsedParentItem(e):null},_getRecordTopPosition:function(e,t){var i={},s=0,n=this.model;if("resourceView"==n.viewType){for(var a=0;a<=t;a++)a==t?i.bottom=s+this._getTemplateRowHeight(e[a]):s+=this._getTemplateRowHeight(e[a]);i.top=s}else i.top=t*(n.rowHeight+this._detailsRowHeight),i.bottom+=n.rowHeight+this._detailsRowHeight;return i},updateScrollBar:function(e){var t,i,s=this,n=s.model,a=0,r=s.getUpdatedRecords(),o=!n.allowSelection||"row"==n.selectionSettings.selectionMode?this.selectedItem():r[s._rowIndexOfLastSelectedCell],l=n.allowPaging?r:s._isHierarchyFiltering&&n.enableVirtualization?s._updateFilterParent:s.getExpandedRecords(r);r=e||0==e?l.indexOf(r[e]):l.indexOf(o),n.allowTextWrap?(r=(e=s.getUpdatedRecords()).indexOf(o),n.enableVirtualization?(t=s._getAvgTextWrapRowHeight("updateHeight",r).height,i=e[r].textWrapRowHeight+s._detailsRowHeight):t=0<(d=J.TreeGrid.getRowByIndex(s,r)).length?(i=d.height()+s._detailsRowHeight,d[0].offsetTop):r*(i=n.rowHeight+s._detailsRowHeight)):(h=this._getRecordTopPosition(l,r),i=n.rowHeight+this._detailsRowHeight,t=h.top);var d=t+i,l=s.getScrollElement().children(".e-content").length,r=(l?s.getScrollElement().children(".e-content"):s.getScrollElement()).scrollTop(),h=n.allowTextWrap?s.model.enableVirtualization?s._getAvgTextWrapRowHeight("updateHeight").height:s._$gridContentTable.height():this.getRecordsHeight();(s.getScrollElement().ejScroller("isHScroll")||0<s.element.find(".e-borderbox").length)&&(a=18),i=t<r,d="auto"!=n.sizeSettings.height&&r+s._viewPortHeight-a<d,(i||d)&&(t+s._viewPortHeight>h&&(t=h-s._viewPortHeight,d&&(t+=a)),a={requestType:J.TreeGrid.Actions.Scroll,delta:t},l?s.updateScrollTop(t):(s.getScrollElement().scrollTop(a.delta),s._completeAction(a)),n.enableVirtualization&&s._focusTreeGridElement())},_selectedItemDown:function(e){var t,i=this,s=this.model,n=i.getUpdatedRecords(),a=i.getExpandedRecords(n),r=i._prevSelectedItem&&this._getExpandStatusRecord(i._prevSelectedItem)?s.updatedRecords.indexOf(i._prevSelectedItem):0;((t=(t=i._shiftSelectedRecord&&this._getExpandStatusRecord(i._shiftSelectedRecord)?a.indexOf(i._shiftSelectedRecord):a.indexOf(s.updatedRecords[r]),s.updatedRecords.indexOf(a[t+1])))>=n.length||-1==t)&&(t=n.length-1),i.updateScrollBar(t),i._multiSelectShiftRequest=!0,i.selectRows(r,t),i._rowSelectedEventTrigger(r,t,!1,e),i._multiSelectShiftRequest=!1,i._shiftSelectedRecord=s.updatedRecords[t]},_selectedItemUp:function(e){var t=this,i=this.model,s=t.getUpdatedRecords(),n=t.getExpandedRecords(s),a=t._prevSelectedItem&&this._getExpandStatusRecord(t._prevSelectedItem)?i.updatedRecords.indexOf(t._prevSelectedItem):0;(s=(s=t._shiftSelectedRecord&&this._getExpandStatusRecord(t._shiftSelectedRecord)?n.indexOf(t._shiftSelectedRecord):n.indexOf(i.updatedRecords[a]),i.updatedRecords.indexOf(n[s-1])))<0&&(s=0),t.updateScrollBar(s),t._multiSelectShiftRequest=!0,t.selectRows(a,s),t._rowSelectedEventTrigger(a,s,!1,e),t._multiSelectShiftRequest=!1,t._shiftSelectedRecord=i.updatedRecords[s]},_keyPressed:function(e,t,i){var s=this,n=this.model,a=[],r=[],o=s.getUpdatedRecords(),l=n.allowPaging?o:s.getExpandedRecords(n.updatedRecords);if(this._removeDetailsRow(),!n.allowKeyboardNavigation)return!1;if("dialogEditing"==this.model.editSettings.editMode&&Z(t).closest("#"+this._id+"_dialogEdit").length)return!0;var d,h,c,u,p,m,g,f,_,v,b,x,y,w,C,S,T,R,k,O,D,I,j,L=!1,A=Z(t),E=Z("#"+s._id+"EditForm");if("downArrow"!=e&&"upArrow"!=e&&"saveRequest"!=e&&"moveCellLeft"!=e&&"moveCellRight"!=e&&"cancelRequest"!=e&&"INPUT"==A.prop("tagName"))return!0;switch(u=n.isFromGantt?(c=Z("#"+s._id.replace("ejTreeGrid","")+"_ContextMenu"),Z("#"+s._id.replace("ejTreeGrid","")+"_SubContextMenu")):(c=Z("#"+s._id+"_ContextMenu"),Z("#"+s._id+"_SubContextMenu")),p=Z("#"+s._id+"_ColumnMenu"),m=Z("#"+s._id+"ccDiv_wrapper"),d=Z("#"+s._id+"_headerContextMenu"),h=Z("#"+s._id+"ccDiv_wrapper"),s._columnMenuTarget&&(N=Z.trim(s._columnMenuTarget.prev("div.e-headercelldiv").attr("data-ej-mappingname")),(z=s.getColumnByField(N))&&(w=z.filterEditType?(V=z.filterEditType.indexOf("edit"),z.filterEditType):(V=z.editType.indexOf("edit"),z.editType),T=(g=-1!=V?(f=w.slice(0,V)).charAt(0).toUpperCase()+f.slice(1):w.charAt(0).toUpperCase()+w.slice(1),Z("#"+s._id+"filter"+g+"MenuDiv_wrapper"))),f=!J.isNullOrUndefined(T)&&T.is(":visible")),w="visible"==u.css("visibility"),g=m.is(":visible"),u=h.is(":visible"),!s._isRowEdit||"moveCellRight"!=e&&"moveCellLeft"!=e||(r=n.columns.filter(function(e){return 1==e.isFrozen&&1==e.visible}),a=n.columns.filter(function(e){return 1==e.visible})),e){case"saveRequest":if(0==c.length&&0==p.length&&0==d.length)(s._isRowEdit||s.model.isEdit)&&(A.blur(),s._endEdit(),s._focusTreeGridElement()),"onEnter"==n.filterSettings.filterBarMode&&"filterbar"==n.filterSettings.filterType&&n.allowFiltering&&A.closest("th").hasClass("e-filterbarcell")&&s._filterBarHandler(t);else if(c.length)s._moveToNextMenuItem("save");else if(d.length)"contextMenu_Columns"==Z("#"+s._activeMenuItemId).attr("id")?(M=null,F=h.find("div.e-columnmenuselection"),g?M=F.data("column"):0<(P=d.find("div.e-columnmenuselection")).length&&(M=P[0].id),J.isNullOrUndefined(M)||(z=s._contextMenuColumnDetails,"contextMenu_Columns"===M?s._showKeyboardColumnChooser(!1,d,h,Z("#contextMenu_Columns")):F.find("span").hasClass("e-disable")||("true"==F.find("span").attr("aria-checked")?s.hideColumn(M):s.showColumn(M)))):s._moveToNextMenuItem("save");else if(p.length){var P,M=null,F=m.find("div.e-columnmenuselection");if(g?M=F.data("column"):0<(P=p.find("div.e-columnmenuselection")).length&&(M=P[0].id),!J.isNullOrUndefined(M)){A=s._columnMenuTarget;var N=Z.trim(A.prev("div.e-headercelldiv").attr("data-ej-mappingname")),z=s.getColumnByField(N);switch(M){case s._id+"_SortAscendingChooser":s.model.allowMultiSorting&&(s._multiSortRequest=!0),n.isFromGantt?s.sortColumn(z.mappingName||z.field,J.sortOrder.Ascending):s.sortColumn(z.field,J.sortOrder.Ascending),s._multiSortRequest=!1;break;case s._id+"_SortDescendingChooser":s.model.allowMultiSorting&&(s._multiSortRequest=!0),n.isFromGantt?s.sortColumn(z.mappingName||z.field,J.sortOrder.Descending):s.sortColumn(z.field,J.sortOrder.Descending),s._multiSortRequest=!1;break;case s._id+"_FreezeColumnsChooser":z&&!Z(s._id+"_FreezeColumnChooser").hasClass("e-disable")&&(s._checkboxSelection&&n.columns[0].nonColumn&&!n.columns[0].isFrozen&&(n.columns[0].isFrozen=!0),s.freezeColumn(z.field,!0));break;case s._id+"_UnfreezeColumnsChooser":z&&!Z(s._id+"_UnfreezeColumnChooser").hasClass("e-disable")&&(s._checkboxSelection&&2==s._frozenColumnsLength&&n.columns[0].nonColumn&&n.columns[0].isFrozen&&(n.columns[0].isFrozen=!1),s.freezeColumn(z.field,!1));break;case s._id+"_FreezePrecedingColumnsChooser":z&&!Z(s._id+"_FreezePrecedingColumnsChooser").hasClass("e-disable")&&s.freezePrecedingColumns(z.field);break;case s._id+"_ColumnLeftChooser":z&&!Z(s._id+"_ColumnLeftChooser").hasClass("e-disable")&&s.insertColumnChooser(z,"left");break;case s._id+"_ColumnRightChooser":z&&!Z(s._id+"_ColumnRightChooser").hasClass("e-disable")&&s.insertColumnChooser(z,"right");break;case s._id+"_DeleteColumnChooser":z&&!Z(s._id+"_DeleteColumnChooser").hasClass("e-disable")&&(s._targetColumnIndex=n.columns.indexOf(z),s._updateConfirmDialog.ejDialog("open"),s._clearColumnMenu());break;case s._id+"_RenameColumnChooser":z&&!Z(s._id+"_RenameColumnChooser").hasClass("e-disable")&&(s._targetColumnIndex=n.columns.indexOf(z),s._renderColumnRenameDialog(z),s._columnRenameDialog.ejDialog("open"),s._clearColumnMenu());break;case s._id+"_FilterChooser":z&&Z("#"+s._id+"_ColumnMenu").find(".e-expander").hasClass("e-treegridadaptivesubicon")&&(N=T[0].id.substring(s._id.length,T[0].id.indexOf("MenuDiv")),s._showFilterMenu(null,N,null,null,null,null,null,null,z,null));break;case s._id+"_ColumnsChooser":z&&Z("#"+s._id+"_ColumnMenu").find(".e-expander").hasClass("e-treegridadaptivesubicon")&&!s.model.isFromGantt&&s._adaptiveColumnChooser();break;default:F.find("span").hasClass("e-disable")||("true"==F.find("span").attr("aria-checked")?s.hideColumn(M):s.showColumn(M))}}}break;case"cancelRequest":0==c.length&&0==p.length&&0==d.length?(0<E.length&&("cellediting"==(H=n.editSettings.editMode).toLowerCase()||"batchediting"==H.toLowerCase()&&"cell"==n.editSettings.batchEditSettings.editMode?s._isRowEdit?s.cancelRowEditCell():s.cancelEditCell():("rowediting"==H.toLowerCase()||"batchediting"==H.toLowerCase()&&"row"==n.editSettings.batchEditSettings.editMode)&&s.cancelRowEditCell(),s._cancelSaveTools()),s._focusTreeGridElement(),1==s._dragMouseDown&&(Z(s._dragmouseOverTooltip).remove(),Z(".e-dragintend").find(".e-icon").css({display:"none"}),Z(".e-intendparent").find(".e-icon").css({display:"none"}),s._dropCancel=!0,s._dragMouseDown=!1,s._dragTooltip=!1,s._headerDragStatus="",s._dragTargetItem&&s._dragTargetItem.hasChildRecords&&0==s._dragTargetItem.level&&(B=J.TreeGrid.getRowByIndex(this,o.indexOf(s._dragTargetItem)),(s._dragTargetItem?B.find(".e-treegridexpand"):B.find(".e-treegridcollapse")).css({display:"inline-block"})),s._off(s.element,"touchmove",".e-treegridrows, .e-templatecell",s.dragToolTip),s._off(s.element,"mousemove",".e-gridcontent, .e-templatecell",s.dragToolTip))):(s._clearContextMenu(),s._clearColumnMenu());break;case"editRecord":if(n.isFromGantt&&1==n.readOnly)return;if(0==c.length&&0==p.length){"cell"==n.selectionSettings.selectionMode&&"dialogEditing"!=n.editSettings.editMode&&(n.editSettings.editMode="cellEditing");var V,B=n.editSettings,H=B.editMode;if(B.allowEditing&&1==n.selectedItems.length||B.allowEditing&&"cell"==n.selectionSettings.selectionMode||B.allowEditing&&n.selectedItem&&s._checkboxSelection)if("cellediting"==H.toLowerCase()||"cell"==n.selectionSettings.selectionMode){z=s.model.columns[s._cellIndex];if(J.isNullOrUndefined(z)||!z.visible||0==z.allowEditing)return;"cell"===n.selectionSettings.selectionMode?s._cellEditingDetails.rowIndex=this._rowIndexOfLastSelectedCell:s._cellEditingDetails.rowIndex=this.selectedRowIndex(),s._cellEditingDetails.columnIndex=s._cellIndex,n.selectedItem=o[this.selectedRowIndex()],-1<s._cellEditingDetails.columnIndex&&(s.updateScrollBar(),B=z.field,"dialogEditing"==s.model.editSettings.editMode?B&&s._showTreeGridAddEditDialog():B&&s.cellEdit(s._cellEditingDetails.rowIndex,B),s._editAddTools())}else"rowediting"!=H.toLowerCase()||s._isRowEdit||"cell"==n.selectionSettings.selectionMode?"dialogediting"==H.toLowerCase()&&"cell"!=n.selectionSettings.selectionMode&&0<=(V=s.selectedRowIndex())&&s._showTreeGridAddEditDialog(V):0<=(V=s.selectedRowIndex())&&(s.updateScrollBar(),s._editRow(V))}break;case"topRowSelection":if(n.allowPaging&&0==c.length&&0==p.length){if(s._isRowEdit||s.model.isEdit)return!0;0<o.length&&(o[V=0].isSummaryRow&&(Y=s._getNextRecord(V+1,o,e),V=o.indexOf(Y)),s._rowSelectingEventTrigger(this.selectedRowIndex(),V,!1,e)||(s.selectRows(V),s._focusTreeGridElement(),s.updateScrollBar(),s._rowSelectedEventTrigger(V,null,!1,e)))}break;case"nextPage":if(s._currentPage()<n.pageSettings.totalPages&&s.model.pageSettings.pageSizeMode==J.TreeGrid.PageSizeMode.Root&&s._batchEditStarts&&!s._confirmDialog.is(":visible"))return s._batchSaveLostWarning("Paging"),s._batchTempDetails.currentPage=s._currentPage()+1,!0;n.allowPaging&&(_=s._currentPage(),s._focusTreeGridElement(),_<n.pageSettings.totalPages&&s.gotoPage(_+1));break;case"prevPage":if(1!=s._currentPage()&&s.model.pageSettings.pageSizeMode==J.TreeGrid.PageSizeMode.Root&&s._batchEditStarts&&!s._confirmDialog.is(":visible"))return s._batchSaveLostWarning("Paging"),s._batchTempDetails.currentPage=s._currentPage()-1,!0;n.allowPaging&&(_=s._currentPage(),s._focusTreeGridElement(),1!=_&&s.gotoPage(_-1));break;case"bottomRowSelection":if(0==c.length&&0==p.length){if(s._isRowEdit||s.model.isEdit)return!0;0<o.length&&(o[b=o.length-1].isSummaryRow&&(Y=s._getNextRecord(b-1,o,e),b=o.indexOf(Y)),s._rowSelectingEventTrigger(this.selectedRowIndex(),b,!1,e)||(s.selectRows(b),s._focusTreeGridElement(),s.updateScrollBar(),s._rowSelectedEventTrigger(b,null,!1,e)))}break;case"firstRowSelection":if(0==c.length&&0==p.length){if(s._isRowEdit||s.model.isEdit)return!0;0<o.length&&("row"==n.selectionSettings.selectionMode?(n.allowPaging&&s.gotoPage(1),n.allowSelection&&!s._rowSelectingEventTrigger(this.selectedRowIndex(),0,!1,e)&&(s.selectRows(0),s.updateScrollBar(),s._focusTreeGridElement(),s._rowSelectedEventTrigger(0,null,!1,e))):"cell"==n.selectionSettings.selectionMode&&(x={rowIndex:U=s._focusingRowIndex,cellIndex:0},s._isShiftKeyNavigation=!1,s._cellIndex=0,s.selectCells([x])),s._cancelSaveTools())}break;case"lastRowSelection":if(0==c.length&&0==p.length){if(s._isRowEdit||s.model.isEdit)return!0;0<o.length&&((v=l[C=l.length-1]).isSummaryRow&&(v=s._getNextRecord(C-1,l,e)),n.allowPaging&&v&&(s.gotoPage(n.pageSettings.totalPages),o=s._updatedPageData),y=o.indexOf(v),"row"==n.selectionSettings.selectionMode?n.allowSelection&&!s._rowSelectingEventTrigger(this.selectedRowIndex(),y,!1,e)&&(s.selectRows(y),s._focusTreeGridElement(),s.updateScrollBar(),s._rowSelectedEventTrigger(y,null,!1,e)):"cell"==n.selectionSettings.selectionMode&&(U=s._focusingRowIndex,j=n.columns,s._isShiftKeyNavigation=!1,s._cellIndex=s._getLastVisibleColumnIndex(),x={rowIndex:U,cellIndex:s._cellIndex},s.selectCells([x])),s._cancelSaveTools())}break;case"moveCellLeft":0==c.length&&0==p.length&&(s._isRowEdit?(I=0<A.closest("td").prev("td").length?A.closest("td").prev("td")[0].cellIndex:-1,0<this._frozenColumnsLength&&0<Z("#"+s._id+"EditForm").has(A).length&&(I+=r.length),(b=-1!=I&&s._getPreviousElement(A,I,a)).length&&s._focusElementsForRowEdit(b)):n.editSettings.allowEditing&&"cellediting"==n.editSettings.editMode.toLowerCase()&&0<E.length&&s.editFormValidate()&&(A.blur(),L=s._moveCurrentCell("left")),!n.allowSelection||"cell"!=n.selectionSettings.selectionMode||s._isRowEdit||0==s._focusingRowIndex&&0==s._cellIndex||(s.model.isEdit?(Y=n.currentViewData[s._cellEditingDetails.rowIndex],s._focusingRowIndex=o.indexOf(Y),s._cellIndex=s._cellEditingDetails.columnIndex,x={rowIndex:s._focusingRowIndex,cellIndex:s._cellIndex},s.selectCells([x])):s._selectNextCell("left",e)));break;case"moveCellRight":0==c.length&&0==p.length&&(s._isRowEdit?(I=-1==(I=0<A.closest("td").next("td").length?A.closest("td").next("td")[0].cellIndex:-1)&&0<Z("#"+s._id+"EditFrozenForm").has(A).length?Z("#"+s._id+"EditForm").find("td").eq(0).index():I,0<this._frozenColumnsLength&&-1!=I&&0<Z("#"+s._id+"EditForm").has(A).length&&(I+=r.length),(r=-1!=I&&s._getNextElement(A,I,a,r)).length&&s._focusElementsForRowEdit(r)):n.editSettings.allowEditing&&("cellEditing"==n.editSettings.editMode||"batchEditing"==n.editSettings.editMode||"cell"==n.selectionSettings.selectionMode)&&A&&0<E.length&&this.editFormValidate()&&(A.blur(),L=s._moveCurrentCell("right")),!n.allowSelection||"cell"!=n.selectionSettings.selectionMode||s._isRowEdit||s._focusingRowIndex==s.getRows().length-1&&s._cellIndex==D-1||(s.model.isEdit?(Y=n.currentViewData[s._cellEditingDetails.rowIndex],s._focusingRowIndex=o.indexOf(Y),s._cellIndex=s._cellEditingDetails.columnIndex,x={rowIndex:s._focusingRowIndex,cellIndex:s._cellIndex},s.selectCells([x])):s._selectNextCell("right",e)));break;case"downArrow":if(n.allowSelection)if(0==c.length&&0==p.length&&0==d.length){if(s._isRowEdit||s.model.isEdit)return!0;0<o.length&&n.selectedItem&&-1<s.selectedRowIndex()&&"row"==n.selectionSettings.selectionMode?(C=o.length-1,s.selectedRowIndex()!=C&&($=o[s.selectedRowIndex()],y=l.indexOf($),(v=l[y+1])&&v.isSummaryRow&&(v=s._getNextRecord(y+1,l)),y=o.indexOf(v),v&&y<=C&&n.allowSelection&&!s._rowSelectingEventTrigger(this.selectedRowIndex(),y,!1,e)&&(s.selectRows(y),s.updateScrollBar(),s._focusTreeGridElement(),s._rowSelectedEventTrigger(s.selectedRowIndex(),null,!1,e))),s._cancelSaveTools()):"cell"==n.selectionSettings.selectionMode&&0<s.selectedCellIndexes().length&&(U=s._focusingRowIndex+1,I=s._cellIndex,X=o.length,s._isShiftKeyNavigation=!1,U<X&&($=o[s._rowIndexOfLastSelectedCell],y=l.indexOf($),(v=l[y+1])&&v.isSummaryRow&&(v=s._getNextRecord(y+1,l)),U=o.indexOf(v),v&&(x={rowIndex:U,cellIndex:I},s._focusingRowIndex=U,s.selectCells([x]),s.updateScrollBar())))}else c.length?s._moveToNextMenuItem("next"):d.length?u?0<(S=(k=h.find("div.e-columnmenuselection")).next("div.e-columnMenuListDiv")).length&&(k.removeClass("e-columnmenuselection"),S.addClass("e-columnmenuselection")):s._moveToNextMenuItem("next"):p.length&&(g?0<(S=(F=m.find("div.e-columnmenuselection")).next("div.e-columnMenuListDiv")).length&&(F.removeClass("e-columnmenuselection"),S.addClass("e-columnmenuselection")):(P=p.find("div.e-columnmenuselection"),0<(S=s._findNextColumnMenuItem(P,"next",!0)).length&&(P.removeClass("e-columnmenuselection"),S.addClass("e-columnmenuselection"),s._focusTreeGridElement(),s._isCloseFilterMenu=!0,s._clearFilterMenu())));break;case"rightArrow":if(n.allowSelection)if(0==c.length&&0==p.length&&0==d.length){if(s._isRowEdit||s.model.isEdit)return!0;var Y=o[U=s.selectedRowIndex()];(K={}).data=Y,K.recordIndex=U,K.expanded=!0,Y&&Y.hasChildRecords&&!Y.expanded&&0<=s.selectedRowIndex()&&(s._trigger("expanding",K)||n.isFromGantt||J.TreeGrid.sendExpandCollapseRequest(s,K),n.enableVirtualization&&s._focusTreeGridElement(),s.updateScrollBar()),s._cancelSaveTools(),!n.allowSelection||"cell"!=n.selectionSettings.selectionMode||s._focusingRowIndex==s.getRows().length-1&&s._cellIndex==D-1||s._selectNextCell("right",e)}else c.length&&!w?s._moveToNextMenuItem("expand"):d.length&&!u?(s._moveToNextMenuItem("expand"),s._showKeyboardColumnChooser(!1,d,h,Z("#contextMenu_Columns"))):p.length&&!g&&(s._showKeyboardColumnChooser(!0,p,m,Z("#"+s._id+"_ColumnsChooser")),P=p.find("div.e-columnmenuselection"),m.find("div.e-columnMenuListDiv"),s._columnListPosX,E=s._columnFilterPosX,s._columnChooserListIndex,C=Z(document).width(),0<P.length&&P[0].id==s._id+"_FilterChooser"&&!Z("#"+s._id+"_ColumnMenu").find(".e-expander").hasClass("e-treegridadaptivesubicon")&&("menu"==n.filterSettings.filterType&&"excel"!=z.filterType?(S=T[0].id.indexOf("_"),R="#"+T[0].id.slice(0,S),w=Z(R).ejDialog("instance"),s=this,S={width:"auto",height:"auto",minWidth:"0px",minHeight:"0px",showHeader:!1,position:{X:1,Y:1},enableModal:!1,isResponsive:!1,enableResize:!1},Z(R+"_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css("height","100%").removeClass("e-widget-content"),Z(R).ejDialog(S),C<E+Z("#"+T[0].id).width()&&(E=E-p.width()-Z("#"+T[0].id).width()),p.find("div.e-columnmenuselection").closest("li").index(),C={X:E,Y:s._columnMenuPopupY+Z("#"+s._id+"_FilterChooser").position().top},w.option({position:C}),w.open(),s._updatePreviousFilteredValue(z),T.css("z-index",s.getMaxZIndex()+1),s._focusTreeGridElement(),s._renderedSubMenuType=R+"Desktop"):(T=n.isFromGantt?Z(this.element).closest(".e-gantt"):Z(this.element),(R=this.getOffsetRect(T[0])).right=R.left+Z(T).width(),s._openExcelFilter(z,E,s._columnMenuPopupY,R,p.width()))));break;case"leftArrow":if(n.allowSelection)if(0==c.length&&0==p.length&&0==d.length){if(s._isRowEdit||s.model.isEdit)return!0;var U,Y=o[U=s.selectedRowIndex()];(K={}).data=Y,K.recordIndex=U,K.expanded=!1,Y&&Y.hasChildRecords&&Y.expanded&&0<=s.selectedRowIndex()&&(s._trigger("collapsing",K)||n.isFromGantt||J.TreeGrid.sendExpandCollapseRequest(s,K),n.enableVirtualization&&s._focusTreeGridElement(),s.updateScrollBar()),s._cancelSaveTools(),!n.allowSelection||"cell"!=n.selectionSettings.selectionMode||0==s._focusingRowIndex&&0==s._cellIndex||s._selectNextCell("left",e)}else c.length?s._moveToNextMenuItem("collapse"):d.length?(s._moveToNextMenuItem("collapse"),Z("#"+s._id+"ccDiv").ejDialog("close")):p.length&&(g||f)&&(Z("#"+s._id+"ccDiv").ejDialog("close"),s._isCloseFilterMenu=!0,s._clearFilterMenu());break;case"upArrow":if(n.allowSelection)if(0==c.length&&0==p.length&&0==d.length){if(s._isRowEdit||s.model.isEdit)return!0;"row"==n.selectionSettings.selectionMode&&0<this.selectedRowIndex()&&0<o.length&&n.selectedItem?($=o[s.selectedRowIndex()],y=l.indexOf($),(v=l[y-1]).isSummaryRow&&(v=s._getNextRecord(y-1,l,e)),-1==(y=o.indexOf(v))||s._rowSelectingEventTrigger(this.selectedRowIndex(),y,!1,e)||(s.selectRows(y),s.updateScrollBar(),s._focusTreeGridElement(),s._rowSelectedEventTrigger(s.selectedRowIndex(),null,!1,e)),s._cancelSaveTools()):"cell"==n.selectionSettings.selectionMode&&(U=s._focusingRowIndex-1,I=s._cellIndex,X=n.flatRecords.length,s._isShiftKeyNavigation=!1,-1!=U&&($=o[s._rowIndexOfLastSelectedCell],y=l.indexOf($),(v=l[y-1])&&v.isSummaryRow&&(v=s._getNextRecord(y-1,l,e)),U=o.indexOf(v),v&&(x={rowIndex:U,cellIndex:I},s._focusingRowIndex=U,s.selectCells([x]),s.updateScrollBar())))}else c.length?s._moveToNextMenuItem("prev"):d.length?u?0<(O=(k=h.find("div.e-columnmenuselection")).prev("div.e-columnMenuListDiv")).length&&(k.removeClass("e-columnmenuselection"),O.addClass("e-columnmenuselection")):s._moveToNextMenuItem("prev"):p.length&&(g?0<(O=(F=m.find("div.e-columnmenuselection")).prev("div.e-columnMenuListDiv")).length&&(F.removeClass("e-columnmenuselection"),O.addClass("e-columnmenuselection")):(P=p.find("div.e-columnmenuselection"),0<(O=s._findNextColumnMenuItem(P,"prev",!0)).length&&(P.removeClass("e-columnmenuselection"),O.addClass("e-columnmenuselection"),s._isCloseFilterMenu=!0,s._clearFilterMenu())));break;case"deleteRecord":if(n.isFromGantt&&1==n.readOnly)return;if(n.editSettings.allowDeleting&&0==c.length&&0==p.length){if(s._isRowEdit||s.model.isEdit)return!0;0<=s.selectedRowIndex()&&(s.deleteRow(),s._cancelSaveTools(),s._focusTreeGridElement())}break;case"totalRowCollapse":if(0==c.length&&0==p.length){s.model.isFromGantt?(K={requestType:"collapseAll"},s._trigger("expandAllCollapseAllRequest",K)):s.collapseAll();break}case"totalRowExpand":0==c.length&&0==p.length&&(s.model.isFromGantt?(K={requestType:"expandAll"},s._trigger("expandAllCollapseAllRequest",K)):s.expandAll());break;case"spaceBar":M=null;p.length&&g&&(M=(F=m.find("div.e-columnmenuselection")).data("column"),J.isNullOrUndefined(M)||F.find("span").hasClass("e-disable")||("true"==F.find("span").attr("aria-checked")?s.hideColumn(M):s.showColumn(M))),s._checkboxSelection&&A.hasClass("e-treegrid")&&0==Z("#"+s._id+"EditForm").length&&(s._rowSelectingEventTrigger(this.selectedRowIndex(),this.selectedRowIndex(),!0,e)||(s.selectRows(this.selectedRowIndex(),null,!0),s._cancelSaveTools(),s._rowSelectedEventTrigger(this.selectedRowIndex(),null,!0,e)));break;case"shiftDownArrow":if(n.allowSelection&&"multiple"==n.selectionSettings.selectionType)if("cell"==n.selectionSettings.selectionMode){var W,X=o.length,G=s._selectedCellDetails.length,$=o[s._rowIndexOfLastSelectedCell];if(y=l.indexOf($),(v=l[y+1])&&v.isSummaryRow&&(v=s._getNextRecord(y+1,l)),!v)return;if(W=o.indexOf(v),s._focusingRowIndex>s._rowIndexOfLastSelectedCell){s._rowIndexOfLastSelectedCell=W,s._selectedCellDetails.sort(function(e,t){return parseFloat(e.rowIndex)-parseFloat(t.rowIndex)}),s._getSelectedCellsinARow(s._selectedCellDetails[0].data.index,s._selectedCellDetails);for(var q=0;q<s._selectedCellsinARow.length;q++){var Q=s._selectedCellDetails.indexOf(s._selectedCellsinARow[q]);Z(s._selectedCellsinARow[q].cellElement).removeClass("e-selectingcell"),s._selectedCellDetails.splice(Q,1)}s.updateScrollBar()}else W<X&&(K={rowIndex:W,cellIndex:s._lastSelectedCellIndex},s.updateScrollBar(),s._shiftKeySelectCells(K),s._rowIndexOfLastSelectedCell=W)}else s._selectedItemDown(e);break;case"shiftUpArrow":if(n.allowSelection&&"multiple"==n.selectionSettings.selectionType)if("cell"==n.selectionSettings.selectionMode){var K,G=s._selectedCellDetails.length,$=o[s._rowIndexOfLastSelectedCell];if(y=l.indexOf($),(v=l[y-1])&&v.isSummaryRow&&(v=s._getNextRecord(y-1,l,"upArrow")),!v)return;if(W=o.indexOf(v),0<G&&s._focusingRowIndex<s._rowIndexOfLastSelectedCell){s._rowIndexOfLastSelectedCell=W,s._getSelectedCellsinARow(s._selectedCellDetails[G-1].data.index,s._selectedCellDetails);for(q=0;q<s._selectedCellsinARow.length;q++){Q=s._selectedCellDetails.indexOf(s._selectedCellsinARow[q]);Z(s._selectedCellsinARow[q].cellElement).removeClass("e-selectingcell"),s._selectedCellDetails.splice(Q,1)}s.updateScrollBar()}else 0<=W&&(K={rowIndex:W,cellIndex:s._lastSelectedCellIndex},s._rowIndexOfLastSelectedCell=W,s.updateScrollBar(),s._shiftKeySelectCells(K))}else s._selectedItemUp(e);break;case"shiftRightArrow":n.allowSelection&&"cell"==n.selectionSettings.selectionMode&&"multiple"==n.selectionSettings.selectionType&&(D=n.columns.length,!((I=s._lastSelectedCellIndex+1)<D-1)||n.columns[I].visible&&n.columns[I].allowCellSelection||(I=s.getUpNextVisibleColumnIndex(I)),I<D&&(K={rowIndex:s._rowIndexOfLastSelectedCell,cellIndex:I},s._shiftKeyFirstElementDetails.firstElementRowIndex=s._focusingRowIndex,s._shiftKeySelectCells(K),s._lastSelectedCellIndex=I));break;case"shiftLeftArrow":n.allowSelection&&"cell"==n.selectionSettings.selectionMode&&"multiple"==n.selectionSettings.selectionType&&(-1==(I=s._lastSelectedCellIndex-1)||n.columns[I].visible&&n.columns[I].allowCellSelection||(I=s.getPreviousVisibleColumnIndex(I)),K={rowIndex:s._rowIndexOfLastSelectedCell,cellIndex:I},-1!=I&&(s._shiftKeyFirstElementDetails.firstElementRowIndex=s._focusingRowIndex,s._shiftKeySelectCells(K),s._lastSelectedCellIndex=I));break;case"shiftHomeButton":"cell"==n.selectionSettings.selectionMode&&"multiple"==n.selectionSettings.selectionType&&(K={rowIndex:U=s._rowIndexOfLastSelectedCell,cellIndex:0},s._cellIndex=0,s._lastSelectedCellIndex=0,s._shiftKeySelectCells(K));break;case"shiftEndButton":"cell"==n.selectionSettings.selectionMode&&"multiple"==n.selectionSettings.selectionType&&(U=s._rowIndexOfLastSelectedCell,j=n.columns,s._cellIndex=j.length-1,K={rowIndex:U,cellIndex:s._cellIndex},s._lastSelectedCellIndex=s._cellIndex,s._shiftKeySelectCells(K));break;default:L=!0}return L},_showKeyboardColumnChooser:function(e,t,i,s){var n=this,a=n.model,r={width:"auto",height:"auto",minWidth:"0px",minHeight:"0px",showHeader:!1,position:{X:1,Y:1},enableModal:!1,isResponsive:!1,enableResize:!1};r.cssClass=a.cssClass,Z("#"+n._id+"ccDiv_wrapper").addClass("e-treegridadaptivedialog"),Z("#"+n._id+"ccDiv_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css("height","100%").removeClass("e-widget-content"),Z("#"+n._id+"ccDiv").ejDialog(r),Z("#"+n._id+"ccDiv").css({height:"auto"});var o=t.find("div.e-columnmenuselection"),l=i.find("div.e-columnMenuListDiv"),d=n._columnListPosX,h=n._columnMenuPopupY,a=Z(document).width(),r=e?t.width():n._headerContextMenuWidth;if(n._updateColumnMenuVisibility(),!(0<o.length&&o[0].id==s[0].id)||t.find(".e-expander").hasClass("e-treegridadaptivesubicon"))return!1;e=Z("#"+n._id+"ccDiv").ejDialog("instance"),o=Z("#"+n._id+"ccDiv_wrapper").width();e.open(),a<d+t.width()&&(d=d-r-o);s={X:d,Y:h+s.position().top};e.option({position:s}),i.css("z-index",n.getMaxZIndex()+1),l.removeClass("e-columnmenuselection"),l.eq(0).addClass("e-columnmenuselection"),n._focusTreeGridElement(),n._renderedSubMenuType="ColumnDesktop"},_getNextElement:function(e,t,i,s){this.model.columns;return e=e.closest("td").next("td"),0<this._frozenColumnsLength&&0==e.length&&(e=Z("#"+this._id+"EditForm").find("td").eq(0),t=s.length),0!=e.length&&(J.isNullOrUndefined(i[t])||!J.isNullOrUndefined(i[t].allowEditing)&&!i[t].allowEditing?t+1<i.length&&this._getNextElement(e,t+1,i,s):e)},_getPreviousElement:function(e,t,i){this.model.columns;return e=e.closest("td").prev("td"),0<this._frozenColumnsLength&&0==e.length&&(e=Z("#"+this._id+"EditFrozenForm").find("td").last()),0!=e.length&&-1<t&&(J.isNullOrUndefined(i[t])||!J.isNullOrUndefined(i[t].allowEditing)&&!i[t].allowEditing?this._getPreviousElement(e,t-1,i):e)},_clearAllFilter:function(e){var t=this.model.filterSettings.filteredColumns[0];this.model.allowFiltering=!0,this.model.filterSettings.filteredColumns=[],this.filterColumn(t.field,t.operator,"","and"),this._filteredColumnValue=[],this._filteredColumnValueID=[]},filterColumn:function(e,t,i,s,n,a){var r=(u=this).model.filterSettings.filteredColumns;if(this.model.allowFiltering){if(u._batchEditStarts&&!u._confirmDialog.is(":visible")){u._batchSaveLostWarning("Filtering");var o=u._batchTempDetails;return o.fieldName=e,o.filterOperator=t,o.filterValue=i,o.predicate=s,o.matchcase=n,o.actualFilterValue=a,!1}var l={};l.requestType=J.TreeGrid.Actions.Filter,l.currentFilterObject=[],Array.isArray(t)||(t=Z.makeArray(t)),Array.isArray(i)||(i=Z.makeArray(i));var d=!1;this._filterCollection;J.util.isNullOrUndefined(this._currentFilterColumn)&&(this._currentFilterColumn=this.getColumnByField(e));for(var h=0;h<t.length;h++){var c={field:e,operator:t[h],value:i[h],matchcase:n,predicate:s,actualFilterValue:a};if(this._$colType="string",0==r.length&&""!==c.value)"date"!=this._$colType||"equal"!=t&&"notequal"!=t||"string"==typeof c.value?r.push(c):this._setDateFilters(c);else{var u=this;if(!d)for(var p=J.DataManager(r),m=(new J.Query).where("field",J.FilterOperators.equal,c.field),g=p.executeLocal(m),f=0;f<g.length;f++){var _=Z.inArray(g[f],r);-1!=_&&r.splice(_,1)}""!==c.value&&("date"!=this._$colType||"equal"!=t&&"notequal"!=t||"string"==typeof c.value?r.push(c):this._setDateFilters(c))}d=!0,l.currentFilterObject.push(c)}l.filterCollection=r,l.currentFilteringColumn=e,l.fieldName=e,this.processBindings(l)&&(r.reverse().splice(0,t.length),r.reverse()),u._setFilterFieldValues(c)}},filterContent:function(e){var t,i,s=this.model.filterSettings.filteredColumns;if(!(e instanceof J.Predicate))return!1;-1!=(t=s.indexOf(e))?s.splice(t,1):(i=[],(t=[]).push(e.toJSON()),this._addPredicateObject(t,i),J.merge(s,i));this.processBindings({requestType:"filtering"}),this._setFilterFieldValues(i)},_addPredicateObject:function(e,t,i){for(var s=e.length,n=0;n<s;n++){var a,r=e[n];r.isComplex?J.isNullOrUndefined(r.predicates)||this._addPredicateObject(r.predicates,t,r.condition):((a={}).field=r.field,a.operator=r.operator,a.value=r.value,a.matchcase=!r.ignoreCase,a.predicate=i,t.push(a))}},_setFilterFieldValues:function(e){var t,i=this.model.filterSettings.filterType,s=[];J.isNullOrUndefined(e.length)?s.push(e):s=e,t=s.length;for(var n=0;n<t;n++){var a,r,o=s[n];(a=this.getColumnByField(o.field))&&("menu"==i||"excel"==i?(this.model.showColumnChooser||(r=this.getHeaderTable().find("div[data-ej-mappingname='"+o.field+"']").next(".e-filtericon"),""!=o.value.toString()||"false"==o.value.toString()?r.removeClass("e-column-filter-icon").addClass("e-column-filtered-icon"):r.removeClass("e-column-filtered-icon").addClass("e-column-filter-icon")),"menu"==i?(this._storePreviousFilteredValue(o.field,o.value,o.operator),this._filterString=o.value):this._filteredColumnValueID.push(o.field)):"filterbar"==i&&(r=this.getHeaderTable().find("#"+this._id+"_"+o.field.split(".").join("")+"_filterbarcell"),"numericedit"==a.filterEditType?Z(r).ejNumericTextbox({value:o.value}):"datepicker"==a.filterEditType?Z(r).ejDatePicker({value:o.value}):"datetimepicker"==a.filterEditType?Z(r).ejDateTimePicker({value:o.value}):"dropdownedit"==a.filterEditType?Z(r).ejDropDownList({value:o.value}):""!=r.val()&&r.val()==o.value||r.val(o.value)))}},_cellSelectingEventTrigger:function(e){this.model;var t={},i=e.rowIndex,s=e.cellIndex,n=this.getUpdatedRecords();return t.data=n[i],t.targetRow=e.rowElement,t.targetCell=e.cellElement,t.rowIndex=i,t.cellIndex=s,this._trigger("cellSelecting",t)},_cellSelectedEventTrigger:function(e,t){this.model;var i={},s=e.rowIndex,n=e.cellIndex,a=t.rowIndex,r=t.cellIndex,o=this.getUpdatedRecords();return i.PreviousTargetRow=t.rowElement,i.previousTargetCell=t.cellElement,i.previousData=o[a],i.previousRowIndex=a,i.previousCellIndex=r,i.data=o[s],i.targetRow=e.rowElement,i.targetCell=e.cellElement,i.rowIndex=s,i.cellIndex=n,this._trigger("cellSelected",i)},_rowSelectingEventTrigger:function(e,t,i,s){var n=this.model,a={},r=this.getUpdatedRecords();i=i||!1,a.targetRow=J.TreeGrid.getRowByIndex(this,t),a.previousTreeGridRow=J.TreeGrid.getRowByIndex(this,e),a.data=r[t],a.previousData=r[e],a.recordIndex=t,a.previousIndex=e,a.actionType=J.isNullOrUndefined(s)?null:s,this.model.isFromGantt?a.target="ejTreeGrid":a.isCheckboxUpdate=i;i=this._trigger("rowSelecting",a);return i&&(n.selectedItem=a.data),i},_rowSelectedEventTrigger:function(e,t,i,s){var n=this.model,a={},r=this.getUpdatedRecords(),r=Z.extend({},r[e]);delete r.childRecords,delete r.parentItem,(a={targetRow:J.TreeGrid.getRowByIndex(this,e),recordIndex:e}).actionType=J.isNullOrUndefined(s)?null:s,i=i||!1,J.isNullOrUndefined(t)||(a.toIndex=t),this.model.isFromGantt?(a.target="ejTreeGrid",a.data=n.updatedRecords[e],a.selectedItems=n.selectedItems):(a.data=r,a.isCheckboxUpdate=i),this._trigger("rowSelected",a)},_eventBindings:function(e){var t,i=this.model,s=0,n=this.getUpdatedRecords(),a=this.getRows();if(J.isNullOrUndefined(e)?(t=(0<this._frozenColumnsLength?Z(a[0]):Z(a)).length,e=i.currentViewData):t=e.length,0<this._commandColumnLength&&this._refreshUnboundTemplate(this.getContentTable()),null!=i.queryCellInfo||null!=i.rowDataBound||i.detailsDataBound)for(;s<t;s++){var r=n.indexOf(e[s]),r=J.TreeGrid.getRowByIndex(this,r);this._rowEventTrigger(r,e[s])}},_rowEventTrigger:function(e,t){var i=this.model;i.rowDataBound&&this._trigger("rowDataBound",{rowElement:e,data:t});e.cells;var s=Z(e).find(".e-rowcell"),n=0,a=s.length,r=null,o=this.model.columns;if(i.queryCellInfo)for(;n<a;n++)Z(s[n]).hasClass("e-rowcell")&&(r=o[n]),r&&this._cellEventTrigger(s[n],t,r);i.detailsDataBound&&Z(e).next("tr").hasClass("e-detailsrow")&&(e=Z(e).next("tr"),0<this._frozenColumnsLength&&(e=Z(e[1])),this._trigger("detailsDataBound",{detailsElement:e,data:t}))},_cellEventTrigger:function(e,t,i){i={cellElement:e,data:t,column:i};i.cellValue=i.column&&this._getCustomCellValue(t,i.column.field),this._trigger("queryCellInfo",i)},_completeAction:function(e){var t,i=this,s=i.model,n=s.sortSettings.sortedColumns,a=Z("#"+i._id.replace("ejTreeGrid","")).data("ejGantt");if(s.isEdit=!1,s.allowPaging&&e.requestType!=J.TreeGrid.Actions.Scroll&&this._refreshGridPager(),J.TreeGrid.Actions.Sorting==e.requestType&&s.allowSorting||J.TreeGrid.Actions.Refresh==e.requestType){if(s.allowSorting){i._multiSortRequest||(i.getHeaderTable().find(".e-columnheader").find(".e-headercelldiv").find(".e-ascending,.e-descending").remove(),i.getHeaderTable().find("[aria-sort]").removeAttr("aria-sort"));for(var r=0;r<n.length;r++)i._addSortElementToColumn(n[r].field,n[r].direction)}i._multiSortRequest=!1}else J.TreeGrid.Actions.BeginEdit==e.requestType||J.TreeGrid.Actions.Add==e.requestType?(t=Z("#"+i._id+"EditForm"),i.model.isEdit=!0,i.setWidthToColumns(),J.TreeGrid.Actions.Add==e.requestType&&t.find(".e-field:disabled").not(".e-identity").removeAttr("disabled").removeClass("e-disable"),Z.isFunction(Z.validator)&&this._initValidator()):s.isFromGantt&&e.requestType===J.TreeGrid.Actions.Scroll&&i._updateCurrentViewData();s.isFromGantt&&(a.model.sortSettings=s.sortSettings),(i._moveRow||"batchediting"==s.editSettings.editMode.toLowerCase())&&e.requestType!==J.TreeGrid.Actions.Refresh||i._trigger("actionComplete",e)},sendDataRenderingRequest:function(e){var t=this,i=this.model;if(t.model.currentViewData.length)switch(e.requestType){case J.TreeGrid.Actions.Delete:case J.TreeGrid.Actions.Refresh:case J.TreeGrid.Actions.Save:case J.TreeGrid.Actions.Filter:case J.TreeGrid.Actions.Sorting:case J.TreeGrid.Actions.Searching:case J.TreeGrid.Actions.ExpandCollapse:case J.TreeGrid.Actions.RefreshDataSource:case J.TreeGrid.Actions.DragAndDrop:case J.TreeGrid.Actions.Paging:case J.TreeGrid.Actions.Scroll:case J.TreeGrid.Actions.RowIndexUpdate:var s,n,a,r,o,l,d,h,c,u=document.createElement("div");e.requestType!=J.TreeGrid.Actions.Scroll?0<this._frozenColumnsLength?t._renderFrozenRecords():(t.getContentTable().find("colgroup").first().replaceWith(t._getMetaColGroup()),(s=t.getContentTable().children("tbody")).empty(),u.innerHTML=["<table>",Z.render[t._id+"_Template"](t.model.currentViewData),"</table>"].join(""),t.getContentTable().get(0).replaceChild(u.firstChild.firstChild,t.getContentTable().get(0).lastChild),t.setGridRows(Z(t.getContentTable().get(0).rows))):(s=t.getContentTable().children("tbody"),n=t.model.currentViewData,a=t._visibleRange,r=(0<this._frozenColumnsLength?Z(s[0]):s).children("tr:not(.e-detailsrow)").length,u=!1,0!=n.length&&0!=s.find(".e-emptyText").length&&s.find(".e-emptyText").remove(),u=t._scrollTop>t._prevScrollTop?(o=a.top-t._prevRTop,d=0<=(l=a.bottom-t._prevRBottom)?l?n.slice(-l):[]:(0<this._frozenColumnsLength?(Z(s.get(0)).children(":visible:gt("+(r+(l-1))+")").remove(),Z(s.get(1)).children(":visible:gt("+(r+(l-1))+")").remove()):i.showDetailsRow&&!i.showDetailsRowInfoColumn?(h=2*(r+(l-1)),s.children(":visible:gt("+h+")").remove()):s.children(":visible:gt("+(r+(l-1))+")").remove(),[]),!0):(o=r-(t._prevRBottom-a.bottom+1),d=0<=(l=t._prevRTop-a.top)?n.slice(0,l):[],o=0<=o?o:-r-1,!1),0<this._frozenColumnsLength?t._renderFrozenRecords(d,l,o,u):(t.getContentTable().find("colgroup").first().replaceWith(t._getMetaColGroup()),u?(i.showDetailsRow&&!i.showDetailsRowInfoColumn?(h=2*o,s.children(":visible:lt("+h+")").remove()):s.children(":visible:lt("+o+")").remove(),c=Z.render[t._id+"_Template"](d),s.append(c)):(i.showDetailsRow&&!i.showDetailsRowInfoColumn?(h=2*o+1,s.children(":visible:gt("+h+")").remove()):s.children(":visible:gt("+o+")").remove(),c=Z.render[t._id+"_Template"](d),s.prepend(c)),t._gridRows=t.getContentTable().find("tr"),t.setGridRows(t._gridRows))),this._gridRows=this.getContentTable().get(0).rows,0<this._frozenColumnsLength&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),t._$gridContent&&t._isRendered&&(t._trigger("refresh"),t._eventBindings(d),this._hideCollapsedDetailsRows())}else 0<t._frozenColumnsLength?(c=J.buildTag("td",i.emptyRecordText,{},{colSpan:this._frozenColumns.length}),d=document,t.getContent().find("#e-frozencontentdiv"+t._id+" .e-table tbody").empty().append(Z(d.createElement("tr")).addClass("e-emptyText").height(30).append(c)),c=J.buildTag("td",i.emptyRecordText,{visibility:"hidden"},{colSpan:this._unFrozenColumns.length}),t.getContent().find("#e-movablecontentdiv"+t._id+" .e-table tbody").empty().append(Z(d.createElement("tr")).addClass("e-emptyText").height(30).append(c)),0==i.updatedRecords.length&&t._$gridContainer.find("#e-movablecontentdiv"+t._id+",#e-frozencontentdiv"+t._id).css("height","30px")):(t.getContentTable().find("tbody").empty().append(t._getEmptyTbody()),0==i.updatedRecords.length&&t._$gridContainer&&t._$gridContainer.css({height:"30px"})),t._gridRows=null,t.setGridRows(null);(t.model.showGridCellTooltip||t.model.showGridExpandCellTooltip)&&(t._cellMouseLeave(),t._headerMouseLeave()),e.requestType==J.TreeGrid.Actions.Scroll&&(e.requestType,J.TreeGrid.Actions.Refresh),t._completeAction(e)},_renderFrozenRecords:function(e,t,i,s){this.getContent().find("#e-frozencontentdiv"+this._id+" .e-table colgroup").replaceWith(this._getMetaColGroup()[0]),this.getContent().find("#e-movablecontentdiv"+this._id+" .e-table colgroup").replaceWith(this._getMetaColGroup()[1]);var n,a,r,o,l=this.getContentTable().children("tbody");J.isNullOrUndefined(e)?(l.empty(),(n=document.createElement("div")).innerHTML=["<table>",Z.render[this._id+"_JSONFrozenTemplate"](this.model.currentViewData),"</table>"].join(""),this.getContentTable().get(0).replaceChild(n.firstChild.firstChild,this.getContentTable().get(0).lastChild),(n=document.createElement("div")).innerHTML=["<table>",Z.render[this._id+"_Template"](this.model.currentViewData),"</table>"].join(""),this.getContentTable().get(1).replaceChild(n.firstChild.firstChild,this.getContentTable().get(1).lastChild)):s?(this.model.showDetailsRow&&!this.model.showDetailsRowInfoColumn?(a=2*i,Z(l.get(0)).children(":visible:lt("+a+")").remove(),Z(l.get(1)).children(":visible:lt("+a+")").remove()):(Z(l.get(0)).children(":visible:lt("+i+")").remove(),Z(l.get(1)).children(":visible:lt("+i+")").remove()),r=Z.render[this._id+"_JSONFrozenTemplate"](e),o=Z.render[this._id+"_Template"](e),Z(l.get(0)).append(r),Z(l.get(1)).append(o)):(this.model.showDetailsRow&&!this.model.showDetailsRowInfoColumn?(a=2*i+1,Z(l.get(0)).children(":visible:gt("+a+")").remove(),Z(l.get(1)).children(":visible:gt("+a+")").remove()):(Z(l.get(0)).children(":visible:gt("+i+")").remove(),Z(l.get(1)).children(":visible:gt("+i+")").remove()),r=Z.render[this._id+"_JSONFrozenTemplate"](e),o=Z.render[this._id+"_Template"](e),Z(l.get(0)).prepend(r),Z(l.get(1)).prepend(o)),this.setGridContentTable(this.getContent().find(".e-table"))},_renderByFrozenDesign:function(){var e=Z(document.createElement("div")),t=this._getMetaColGroup().find("col"),i={};return i.colgroup1=e.append(J.buildTag("colgroup").append(t.splice(0,this._frozenColumnsLength))).html(),i.colgroup2=e.html(J.buildTag("colgroup").append(t)).html(),Z.render[this._id+"_FrozenTemplate"](i)},addFrozenTemplate:function(){var e="<div class='e-frozencontainer' id='e-frozencontainer"+this._id+"' style='overflow:hidden;float:left;'><div class='e-frozencontentdiv' id='e-frozencontentdiv"+this._id+"' style='width:100%;'><table class='e-table e-zerospace' style='width:100%' id='"+this._id+"frozene-table'>{{:colgroup1}}<tbody></tbody></table></div></div><div class='e-movablecontainer' id='e-movablecontainer"+this._id+"'><div class='e-movablecontent' id='e-movablecontent"+this._id+"'><div class='e-movablecontentdiv' id='e-movablecontentdiv"+this._id+"'><table class='e-table e-zerospace' id='"+this._id+"movablee-table'>{{:colgroup2}}<tbody></tbody></table></div></div></div>",t={};t[this._id+"_FrozenTemplate"]=e,Z.templates(t)},sortSetting:function(e){var t=this.model,i=Z("#"+this._id).find(".e-ascending.e-icon"),s=Z("#"+this._id).find(".e-descending.e-icon");if(t.allowSorting=e,t.allowSorting||this.clearSorting(),0<i.length)for(var n=0;n<i.length;n++)Z(i[n]).css("visibility","hidden");if(0<s.length)for(n=0;n<s.length;n++)Z(s[n]).css("visibility","hidden")},columnIndex:function(e){var t=this.model,e=parseInt(e),i=t.columns;if(!isNaN(e)&&0<=e&&e<i.length&&i[e].visible&&!this._isCommandColumn(i[e])){if(i[e].nonColumn){if(!i[e+1]||!i[e+1].visible||this._isCommandColumn(i[e+1]))return;t.treeColumnIndex=e+1}else t.treeColumnIndex=e;this._addInitTemplate(),this.renderRecords(),t.showColumnChooser&&this._renderColumnChooserList(!0),this._updateWrapRowHeights("header","refreshAll")}},sortColumn:function(e,t){var i,s=this,n=s.model,a=n.sortSettings.sortedColumns,r={},o=0,l=a.length;if(s._cancelEditState(),s.clearSelection(),n.isFromGantt&&(i=J.TreeGrid.getColumnByMappingName(n.columns,e)),J.isNullOrUndefined(i)&&(i=this.getColumnByField(e)),n.allowSorting&&!J.isNullOrUndefined(i)&&0!=i.allowSorting){for(s._multiSortRequest||(n.sortSettings.sortedColumns=[]),r.requestType=J.TreeGrid.Actions.Sorting,r.columnName=e,s._cSortedColumn=e,s._cSortedDirection=r.columnSortDirection=t===P?J.sortOrder.Ascending:t;o<l;o++)if(a[o].field==s._cSortedColumn){a.splice(o,1);break}n.sortSettings.sortedColumns.push({field:s._cSortedColumn,direction:s._cSortedDirection}),s.processBindings(r)&&(s._cSortedDirection=s._cSortedColumn=null),0<=s.selectedRowIndex()&&s._isRendered&&s.selectedRowIndex(s._sortedRecords.indexOf(this.selectedItem())),s._clearColumnMenu(),s._clearContextMenu()}},clearSorting:function(){this.model.sortSettings.sortedColumns=[];var e={};e.requestType=J.TreeGrid.Actions.Sorting,this.processBindings(e)},deleteRow:function(e,t,i){var s=this,n=s.model,a=n.editSettings.editMode.toLowerCase(),r=s.getUpdatedRecords(),o=[];if(!n.editSettings.allowDeleting)return!1;if(n.editSettings.showDeleteConfirmDialog&&!s._confirmDialog.is(":visible")&&"batchediting"!=a&&!s._isEmptyRow)return s._isFromContextmenu=t,s._deleteRowIndex=i,void s._confirmDialog.ejDialog("open");var l={};if(l.requestType=J.TreeGrid.Actions.Delete,l.isFromContextmenu=t){if(n.isFromGantt||!n.allowSelection&&!J.isNullOrUndefined(i)&&-1<i?l.data=r[i]:l.data="row"==n.selectionSettings.selectionMode?n.selectedItem:-1<s._rowIndexOfLastSelectedCell?r[s._rowIndexOfLastSelectedCell]:r[s._emptyRowIndex],o.push(l.data),s._isEmptyRow)return l.deletedItems=o,s._updateDeleteAction(l),!0}else{o=Z.extend([],n.selectedItems);l.data=n.selectedItem}if(o.length||o.push(l.data),l.deletedItems=o,"batchediting"==a)if("save"==s._batchSaveCancel)l.data={},l.deletedItems=s.batchChanges.deleted;else{if("cancel"!=s._batchSaveCancel){for(var d=0;d<o.length;d++)s._batchDeleteAction(o[d]),s._updateBatchDeletedRecords(o[d]);return s.clearSelection(),s._batchEditStarts=!0,s._cancelSaveTools(),!0}l.data={},l.deletedItems=s.batchChanges.added}if(s._trigger("actionBegin",l))return!0;s._updateAction(l)&&s._updateDeleteAction(l)},_batchDeleteAction:function(e){var t=this.model,t=(t.allowPaging?this._updatedPageData:t.updatedRecords).indexOf(e);if(e.isBatchDelete=!0,this.refreshRow(t),e.hasChildRecords)for(var i=e.childRecords,s=0;s<i.length;s++)this._batchDeleteAction(i[s])},_updateBatchDeletedRecords:function(e){var t=this.batchChanges.changed,i=this.batchChanges.added;0<i.length&&-1!=i.indexOf(e)?i.splice(i.indexOf(e),1):0<t.length&&-1!=t.indexOf(e)&&t.splice(t.indexOf(e),1),-1==this.batchChanges.deleted.indexOf(e)&&this.batchChanges.deleted.push(e)},_updateDeleteAction:function(e){for(var t=this,i=t.model,s=i.editSettings.editMode.toLowerCase(),n=e.deletedItems.length,a=0;a<n;a++)e.data=e.deletedItems[a],t._selectedCellDetails=[],t._removeRecords(e);if("batchediting"==s&&("save"==t._batchSaveCancel||"cancel"==t._batchSaveCancel))return!0;t._ensureDataSource(e),t.updateHeight(),0<i.currentViewData.length&&i.enableAltRow&&J.TreeGrid.updateAltRow(t,i.currentViewData[0],0,0),t._checkboxSelection?(i.selectedCellIndexes=[],t._prevSelectedItem=null,e.isFromContextmenu||(i.selectedItems=[]),i.selectedItem=null,t.selectedRowIndex(-1),t.selectAllRows()):(i.selectedItems=[],i.selectedCellIndexes=[],i.selectedItem=null,t.selectedRowIndex(-1),t._prevSelectedItem=null,t._multiSelectPopup&&t._multiSelectPopup.is(":visible")&&!t.model.isFromGantt&&t._clearMultiSelectPopup()),t._isLoadonDemand&&i.allowPaging&&t._refreshDataSource()},_removeRecords:function(e){var t=this,i=t.model,s=i.editSettings.editMode.toLowerCase(),n=!1,a=this.dataSource();if(e&&(i.editSettings.allowDeleting||e.isDragAndDropDelete)&&e.requestType===J.TreeGrid.Actions.Delete){var r,o,l,d=e.data;if(i.isFromGantt&&t.model.enableWBS&&(o=!1,d&&d.parentItem?f=(l=d.parentItem.childRecords).indexOf(d):i.flatRecords.length&&(f=(l=i.flatRecords.filter(function(e){return e&&0==e.level})).indexOf(d)),f!=l.length-1&&(o=!0)),r=i.flatRecords.indexOf(d),"resourceView"==i.viewType&&(p={data:e.data},t._trigger("updateResource",p),t.dataSource(p.returnObj.dataSource),t._jsonData=p.returnObj.jsondata,0<p.returnObj.tasks.length&&(n=!0)),d.parentItem){var h=d.parentItem.childRecords;if(h&&0<h.length){_=h.indexOf(d),d.parentItem.childRecords.splice(_,1),e.updatedHierarchyRowIndexData=[];for(var c,u=_;u<h.length;u++)h[u].hierarchyRowIndex=u,i.hierarchyRowIndexMapping&&(h[u].item[i.hierarchyRowIndexMapping]=u),d.isBatchAdd||("batchediting"!=s?e.updatedHierarchyRowIndexData.push(h[u]):-1==t.batchChanges.updatedHierarchyRowIndexData.indexOf(h[u])&&t.batchChanges.updatedHierarchyRowIndexData.push(h[u]));!i.showSummaryRow||(c=i.summaryRows.length)==h.length&&(d.parentItem.childRecords.splice(0,c),i.flatRecords.splice(r,c)),i.parentIdMapping||"resourceView"==i.viewType||d.parentItem.item[i.childMapping].splice(_,1)}}if(t._checkboxSelection&&!e.isDragAndDropDelete)if(e.isFromContextmenu)t._removeChildRecords(i.selectedItems,e.data);else for(;0<i.selectedItems.length;)t._removeChildRecords(i.selectedItems,i.selectedItems[0]);var p,m,g,f,_=i.parentRecords.indexOf(d);if(-1!==_){i.parentRecords.splice(_,1);var v=i.parentRecords;e.updatedHierarchyRowIndexData=[];for(u=_;u<v.length;u++)v[u].hierarchyRowIndex=u,i.hierarchyRowIndexMapping&&(v[u].item[i.hierarchyRowIndexMapping]=u),d.isBatchAdd||("batchediting"!=s?e.updatedHierarchyRowIndexData.push(v[u]):-1==t.batchChanges.updatedHierarchyRowIndexData.indexOf(v[u])&&t.batchChanges.updatedHierarchyRowIndexData.push(v[u]))}-1!==r&&(_=t.getChildCount(d,0),i.flatRecords.splice(r,_+1),i.ids&&i.ids.splice(r,_+1),n&&(i.flatRecords.push.apply(i.flatRecords,p.returnObj.tasks),i.ids&&i.ids.push.apply(i.ids,p.returnObj.ids),i.parentRecords.push.apply(i.parentRecords,p.returnObj.tasks)),"resourceView"==i.viewType&&"resourceTask"==d.eResourceTaskType&&d.parentItem&&0==d.parentItem.childRecords.length&&(p=i.flatRecords.indexOf(d.parentItem),i.flatRecords.splice(p,1),i.ids&&i.ids.splice(p,1),-1!=(p=i.parentRecords.indexOf(d.parentItem))&&i.parentRecords.splice(p,1))),i.updatedRecords=i.enableVirtualization?t.getExpandedRecords(i.flatRecords):i.flatRecords.slice(),t.updateCollapsedRecordCount(),i.parentIdMapping||"resourceView"==i.viewType?"resourceView"!=i.viewType&&(d.hasChildRecords&&0<d.childRecords.length&&t._removeChildItem(d),a instanceof J.DataManager?a.dataSource.offline&&a.dataSource.json?-1!==(m=a.dataSource.json.indexOf(d.item))&&a.dataSource.json.splice(m,1):t._isDataManagerUpdate&&-1!==(m=t._jsonData.indexOf(d.item))&&t._jsonData.splice(m,1):-1!==(m=a.indexOf(d.item))&&a.splice(m,1)):a instanceof J.DataManager?a.dataSource.offline&&a.dataSource.json?-1!==(g=a.dataSource.json.indexOf(d.item))&&a.dataSource.json.splice(g,1):t._isDataManagerUpdate&&(g=t._jsonData.indexOf(d.item),t._jsonData.splice(g,1)):-1!==(g=a.indexOf(d.item))&&a.splice(g,1),d.parentItem&&d.parentItem.childRecords&&0==d.parentItem.childRecords.length&&(d.parentItem.expanded=!1,d.parentItem.hasChildRecords=!1,d.parentItem.hasFilteredChildRecords=!0,i.isFromGantt&&(g=Z("#"+t._id.replace("ejTreeGrid","")).data("ejGantt"),d.parentItem._updateWorkWithDuration(g))),i.showSummaryRow&&t._updateSummaryRow(e),i.showTotalSummary&&t._updateTotalSummaryRow(e),o&&(d.parentItem||l.splice(f,1),f=l[f],t.updateWBSdetails(f)),i.isFromGantt&&(t.updateSerialNumber(r),i.enableSerialNumber&&t.updateSerialNumberPredecessors(r))}},updateSerialNumberPredecessors:function(e){if(-1!=e){for(var t,i=this.model.flatRecords,s=i.length,n=[],a=e;a<s;a++)if(i[a].predecessor)for(var r,o=i[a].predecessor,l=i[a].taskId,d=0;d<o.length;d++)!o[d].to||(r=+o[d].to!=l?+o[d].to:null)&&-1==n.indexOf(r)&&n.push(r);if(n.length)for(var h=(t=i.filter(function(e){if(-1<n.indexOf(e.taskId))return e})).length,c=0;c<h;c++){var u=t[c];this.predecessorToSerialPredecessor(u)}}},predecessorToSerialPredecessor:function(e){for(var t=this.model.flatRecords,i=Z("#"+this._id.replace("ejTreeGrid","")).data("ejGantt"),s=e.predecessorsName?e.predecessorsName.split(","):[],n=null,a=0;a<s.length;a++){l=(o=s[a]).split("+"),0<=o.indexOf("-")&&(l=o.split("-"));var r,o,l,d=l[0].match(/(\d+|[A-z]+)/g);d&&d.length&&(r=+d[0],o=d[1],(l=(d=t.filter(function(e){return e&&e.taskId==r}))[0]&&d[0].serialNumber+o+(l[1]?"+"+l[1]:""))&&(n=n?n+","+l:l))}e.serialNumberPredecessor=n,e.item.serialNumberPredecessor=n,i.refreshGanttRecord(e)},updateWBSdetails:function(e){var t,i,s,n=this.model,a=e,e=a.WBS;a.parentItem?(i=(s=a.parentItem.childRecords).indexOf(a),s=(t=s).length):n.flatRecords.length&&(i=(t=n.flatRecords.filter(function(e){return e&&0==e.level})).indexOf(a),s=t.length),(s=t.slice(i,s)).length&&(e=-1!=e.lastIndexOf(".")?parseInt(e.substr(e.lastIndexOf(".")+1)):parseInt(e),a=a.parentItem?a.parentItem.WBS:null,e--,this.reCalculateWBS(s,e,a))},reCalculateWBS:function(e,t,i){var s,n=this.model,a=(n.currentViewData,Z("#"+this._id.replace("ejTreeGrid","")).data("ejGantt")),r="";if(i)for(var o=0;o<e.length;o++)s=t+o,r=e[o].WBS,e[o].WBS=i+"."+s,e[o].item.WBS=i+"."+s,n.enableWBSPredecessor&&this._getPredecessorIds(e[o]),r!=e[o].WBS&&a.refreshGanttRecord(e[o]),e[o].hasChildRecords&&this._updateChildWBS(e[o]);else for(o=0;o<e.length;o++)s=(t+o).toString(),r=e[o].WBS,e[o].WBS=s,e[o].item.WBS=s,n.enableWBSPredecessor&&this._getPredecessorIds(e[o]),r!=e[o].WBS&&a.refreshGanttRecord(e[o]),e[o].hasChildRecords&&this._updateChildWBS(e[o])},_updateChildWBS:function(e){for(var t,i=this.model,s=(i.currentViewData,e.childRecords),n=e.WBS,a=Z("#"+this._id.replace("ejTreeGrid","")).data("ejGantt"),r=0;r<s.length;r++)t=s[r].WBS,s[r].WBS=n+"."+(r+1),s[r].item.WBS=n+"."+(r+1),i.enableWBSPredecessor&&this._getPredecessorIds(s[r]),t!=s[r].WBS&&a.refreshGanttRecord(s[r]),s[r].hasChildRecords&&this._updateChildWBS(s[r])},_getPredecessorIds:function(e){for(var t=this.model,s=e.taskId,e=t.flatRecords,i=t.updatedRecords,n=e.filter(function(e){if(e.predecessorsName)for(var t=e.predecessorsName.split(","),i=0;i<t.length;i++)if(+t[i].match(/(\d+|[A-z]+)/g)[0]==s)return e}),a=0;a<n.length;a++)this.updateWBSPredecessor(n[a]),this.refreshRow(i.indexOf(n[a]))},updateSerialNumber:function(e){if(-1!=e)for(var t=this.model.flatRecords,i=Z("#"+this._id.replace("ejTreeGrid","")).data("ejGantt"),s=e;s<t.length;s++){var n=t[s];n.serialNumber=s+1,n.item.serialNumber=s+1,i.refreshGanttRecord(n,null,!0)}},search:function(e){var t={},i=this.model.searchSettings;this.model.allowSearching&&(t.requestType=J.TreeGrid.Actions.Searching,t.keyValue=e,""!=(this._searchString=e)?(i.key=e.toLowerCase()==this.localizedLabels.trueText.toLowerCase()?"true":e.toLowerCase()==this.localizedLabels.falseText.toLowerCase()?"false":e,i.fields=0!=this.model.searchSettings.fields.length?this.model.searchSettings.fields:this.getColumnFieldNames()):(i.key="",i.fields=[]),this.processBindings(t))},endEdit:function(){var e=this.model;return"cellediting"!=this.model.editSettings.editMode.toLowerCase()||this._isRowEdit?"dialogediting"!=this.model.editSettings.editMode.toLowerCase()&&("batchediting"!=e.editSettings.editMode.toLowerCase()||"dialog"!=e.editSettings.batchEditSettings.editMode)||this.saveRow():!this.editFormValidate()||this.saveCell()},updateReadOnly:function(e){this.model.readOnly=e},updateShowGridExpandCellTooltip:function(e){this.model.showGridExpandCellTooltip=e,this.refreshContent()},updateShowGridCellTooltip:function(e){this.model.showGridCellTooltip=e,this.refreshContent()},getVisibleRange:function(e){var t,i,s,n,a=this,r=this.model,o=r.rowHeight+a._detailsRowHeight,l=a._isHierarchyFiltering&&a.model.enableVirtualization?a._updateFilterParent:a.getUpdatedRecords();if("auto"!=r.sizeSettings.height||(a._viewPortHeight=a._getViewPortHeight(),0==a._viewPortHeight))return r.allowTextWrap?(s=(t=a._getVisibleTextWrapRows(a._scrollTop)).top,"scroll"==e&&a._scrollTop>a._prevScrollTop&&(t.bottom=t.bottom+4),n=t.bottom,a._offset=t.offSet):"resourceView"==r.viewType?(s=(i=this._getVisibleRangeForResourceGantt(a._scrollTop)).top,n=i.bottom,a._offset=i.topOffset):(s=a._scrollTop/o,n=a._getRowPosition(a._scrollTop+a._viewPortHeight),i=s-Math.floor(s),a._offset=i*o),s=Math.floor(s),s=Math.max(0,s),n=Math.min(l.length,n),a._visibleRange={top:s,bottom:n},a._visibleRange;a._visibleRange={top:0,bottom:a.getExpandedRecords(a.getUpdatedRecords()).length}},_getVisibleRangeForResourceGantt:function(e){for(var t,i,s,n,a={},r=this.model,o=e+this._viewPortHeight,l=e,d=r.updatedRecords,h=0;h<d.length&&(t=this._getTemplateRowHeight(d[h]),0==l&&J.isNullOrUndefined(i)?s=i=0:e<0&&J.isNullOrUndefined(i)&&(i=h-1,s=this._getTemplateRowHeight(d[i])- -1*e),o<=0&&J.isNullOrUndefined(n)&&(n=h),e-=t,o-=t,J.isNullOrUndefined(i)||J.isNullOrUndefined(n));h++);return a.top=i,a.topOffset=s,a.bottom=J.isNullOrUndefined(n)?d.length:n,a},_getVisibleTextWrapRows:function(e){for(var t,i=this.model,s=0,n=0,a=0,r=!0,o=0,l=!0,d=0,h=0,s=i.allowPaging?(t=this._updatedPageData,this._updatedPageData.length):(t=i.updatedRecords).length,c=0;c<s;c++)if(o+=t[c].textWrapRowHeight,i.detailsTemplate&&!i.showDetailsRowInfoColumn&&(t[c].isSummaryRow||(o+=this._detailsRowHeight)),e<=o&&r&&(a=c,n=parseInt(e)-parseInt(o-t[c].textWrapRowHeight),r=!r),r||(h+=t[c].textWrapRowHeight),o>=e+this._viewPortHeight&&l||l&&c==t.length-1){d=c+1,l=!l;break}return h<this._viewPortHeight&&(0<parseInt((this._viewPortHeight-h)/i.rowHeight)?a-=parseInt((this._viewPortHeight-h)/i.rowHeight):--a),{top:a,offSet:n,bottom:d}},_getAvgTextWrapRowHeight:function(e,t){var i={};if(0<this.getRows().length){var s,n,a,r=this.model,o=0,l=!1,d=0,h=r.currentViewData;if(r.allowPaging?r.allowPaging&&(n=this._updatedPageData):n=r.updatedRecords,a=0<Z("#"+this._id).find(".e-frozencontainer").length?(r.showDetailsRow&&r.detailsTemplate&&!r.showDetailsRowInfoColumn?this.getTreeGridRows():this.getRows())[0]:r.showDetailsRow&&r.detailsTemplate&&!r.showDetailsRowInfoColumn?this.getTreeGridRows():this.getRows(),o="updateHeight"==e&&J.isNullOrUndefined(t)?n.length:"updateHeight"!=e||J.isNullOrUndefined(t)?a.length:t,0<a.length)for(var c=0;c<o;c++)"getAvgHeight"==e?(h[s=this.getIndexByRow(a[c])]&&(h[s].textWrapRowHeight!=Z(a[c]).height()&&Z(a[c]).height()>=r.rowHeight&&(h[s].textWrapRowHeight=Z(a[c]).height()),n.indexOf(h[s])>n.length-5&&!this._textWrapNoCalculate&&(l=!0)),d+=Z(a[c]).height()):"updateHeight"==e&&(d+=n[c].textWrapRowHeight);i="getAvgHeight"==e?{avgHeight:d/=o,isEnd:l}:{height:d}}else i={avgHeight:this.model.rowHeight,isEnd:!0,height:this.model.rowHeight};return i},_setWidthToHeaders:function(){var e=this._gridWidth;if(0<this._frozenColumnsLength){for(var t,i=0,s=this.getHeaderContent().find(".e-headercell"),n=0;n<this.columnsWidthCollection.length;n++)i+=this.columnsWidthCollection[n],this._frozenColumnsLength-1==n&&(t=Math.ceil(i)),this.model.headerTextOverflow&&Z(s[n]).css({width:this.columnsWidthCollection[n]+"px"});this.getHeaderContent().find("#e-frozenheaderdiv"+this._id).width(e).next().css("margin-left",t+"px"),this.getHeaderContent().find("#e-frozenheaderdiv"+this._id).outerWidth(t).end().find("#e-movableheaderdiv"+this._id).css("width","100%")}},setWidthToColumns:function(){for(var e,t=this,i=t.model,s=t.getContentTable().children("colgroup").find("col"),n=t.getHeaderTable().children("colgroup").find("col"),a=t._gridWidth,r=i.columns.length,o=0;o<n.length;o++)J.isNullOrUndefined(t.columnsWidthCollection[o])||(s.eq(o).width(t.columnsWidthCollection[o]),n.eq(o).width(t.columnsWidthCollection[o]));i.isFromGantt||(s.length>r&&s.eq(r).width(t._detailsColumnWidth),n.length>r&&n.eq(r).width(t._detailsColumnWidth)),i.showTotalSummary&&this._$totalSummaryRowContainer&&(e=Z(this.getHeaderTable()).find("colgroup"),e=Z(e).clone(),0<this._frozenColumnsLength?this._$footertableContent&&(Z(this._$footertableContent).find("colgroup").remove(),Z(e[0]).prependTo(this._$footertableContent[0]),Z(e[1]).prependTo(this._$footertableContent[1])):this._$footertableContent&&(Z(this._$footertableContent).find("colgroup").remove(),Z(e).prependTo(this._$footertableContent))),0<this._frozenColumnsLength&&((e=this._getFrozenColumnWidth())<this._gridWidth&&(this.getContent().find("#e-movablecontainer"+this._id).css("margin-left",e+"px"),this.getContent().find("#e-frozencontainer"+this._id).outerWidth(e),this.getScrollElement().data("ejScroller")&&(this.getScrollElement().ejScroller("option","width",this._gridWidth-e-this._totalBorderWidth-1),this.getScrollElement().ejScroller("option","scrollTop",t._scrollTop),this.getScrollElement().ejScroller("option","scrollLeft",t._scrollLeft)),this.getHeaderContent().find("#e-frozenheaderdiv"+this._id).next().css("margin-left",e+"px"),this.getHeaderContent().find("#e-frozenheaderdiv"+this._id).outerWidth(e).end().find("#e-movableheaderdiv"+this._id).css("width","100%"),this._$totalSummaryRowContainer&&(this._$totalSummaryRowContainer.find("#e-frozenfooterdiv"+this._id).width(a).next().css("margin-left",e+"px"),this._$totalSummaryRowContainer.find("#e-frozenfooterdiv"+this._id).outerWidth(e).end().find("#e-movablefooterdiv"+this._id).css("width","100%"),this.mobileDevice()||"safari"!=this.getBrowserDetails().browser||this._$totalSummaryRowContainer.find("#e-movablefooter"+this._id).css("margin-left","auto")),this.mobileDevice()||"safari"!=this.getBrowserDetails().browser||this.getHeaderContent().find("#e-movableheader"+this._id).add(this.getContent().find("#e-movablecontainer"+this._id)).css("margin-left","auto"))),i.columnResizeSettings.columnResizeMode!=J.TreeGrid.ColumnResizeMode.FixedColumns||i.isFromGantt||this._updateTableWidth()},_updateTableWidth:function(e){for(var t,i,s,n=0,a=this.model,r=this._getFrozenColumnWidth(),o=a.columns.length,l=0;l<o;l++)!a.columns[l].isFrozen&&0==a.columns[l].visible||(n+=a.columns[l].width);s=0<this._frozenColumnsLength?(n-=r,t=Z(this.getHeaderTable()[1]),i=Z(this.getContentTable()[1]),a.showTotalSummary?Z(this._$footertableContent[1]):null):(t=this.getHeaderTable(),i=this.getContentTable(),a.showTotalSummary?Z(this._$footertableContent[0]):null),a.showDetailsRow&&a.showDetailsRowInfoColumn&&a.detailsTemplate&&(n+=this._detailsColumnWidth),e||(t.width(n),i.width(n),s&&s.width(n)),n<this._gridWidth-r&&a.columns[o-1].visible?(t.addClass("e-tableLastCell"),0<a.currentViewData.length?i.addClass("e-tableLastCell"):i.removeClass("e-tableLastCell"),i.addClass("e-fixed-border")):(t.removeClass("e-tableLastCell"),i.removeClass("e-tableLastCell"),i.removeClass("e-fixed-border"))},_convertHtml:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},cellEdit:function(e,t){var i=this,s=i.model,n=e,a=i.getUpdatedRecords(),r=1!=s.allowSelection||"row"==s.selectionSettings.selectionMode?this.selectedItem():a[i._rowIndexOfLastSelectedCell];if(i.model.showGridCellTooltip&&i._cellMouseLeave(),i.model.isEdit&&i.saveCell(),0<Z("#"+i._id+"EditForm").length)return!0;if(!r)return!1;if(s.isFromGantt&&r.hasChildRecords&&("status"===t||"startDate"===t&&r.isAutoSchedule||"endDate"===t&&r.isAutoSchedule||"duration"===t&&r.isAutoSchedule||"work"===t||"effortDriven"===t||"taskType"===t||"predecessor"===t||"taskId"===t))return!1;if(s.isFromGantt){if(r.isAutoSchedule&&"fixedWork"==r.taskType&&"effortDriven"==t)return!1;if(!r.isAutoSchedule&&("taskType"==t||"effortDriven"==t))return!1}if(!s.enableVirtualization&&"cell"!==s.selectionSettings.selectionMode||(n=a.indexOf(r),e=s.currentViewData.indexOf(r)),(u=J.TreeGrid.getRowByIndex(this,n))&&0<Z(u).find(".e-rowcell").length){var o=Z(u),l=i.getColumnIndexByField(t),d=o.find(".e-rowcell").eq(l),h=i.model.columns[l],c=r,a=i._getCustomCellValue(c,h.field),n={},u={validationRules:J.isNullOrUndefined(h.validationRules)?{}:Z.extend(!0,{},h.validationRules),columnName:h.field,value:J.isNullOrUndefined(a)?J.isNullOrUndefined(c.item[t])?null:c.item[t]:a,data:c,columnObject:h,cell:d},r=!0;return("notesText"==h.field?(u.value=J.isNullOrUndefined(c[t])?c.item&&c.item[t]:c[t],u.value=u.value&&i._convertHtml(u.value)):u.value=J.isNullOrUndefined(a)?J.isNullOrUndefined(c.item[t])?null:c.item[t]:a,s.isFromGantt&&"predecessor"===u.columnName&&(a=u.data.item[i.model.predecessorMapping],u.value=a||""),s.isFromGantt&&"taskMode"===u.columnName&&(s=!u.data.isAutoSchedule,u.value=s),n.data=c,n.columnIndex=l,n.rowElement=o,n.cellElement=d,i._cellEventTrigger(d,c,u.columnObject),i._trigger("beginEdit",n))?!1:(o.hasClass("e-insertedrow")&&!u.columnObject.isTemplateColumn&&(r=!0),r&&Z.extend(i._cellEditingDetails,{rowIndex:e,cellValue:u.value,columnIndex:l,fieldName:t,cellEditType:u.columnObject.editType,data:c}),u.columnIndex=l,i._renderCellEditObject(u,d),o.addClass("e-editedrow"),u.cell&&u.cell.addClass("e-editedcell"),i._updateHorizontalScrollBar(t),i._updateWrapRowHeights("total,header",null,i._cellEditingDetails.rowIndex,"cellEdit"),!0)}},_updateHorizontalScrollBar:function(e){var t=this.getScrollElement();if(t.ejScroller("isHScroll")){var i=this.model,s=i.columns,n=(s.length,this.getColumnIndexByField(e)),a=0,r=0,o=0,l=0,d=t.find(".e-content").width(),h=t.ejScroller("option","scrollLeft"),c=Z("#"+this._id+"EditForm"),u=[],u="cell"==i.selectionSettings.selectionMode&&0==c.length?Z("#"+this._id).find(".e-selectingcell"):(e=Z(c).closest("tr.e-treegridrows"),Z(e).find("td.e-rowcell"));if(0<this._frozenColumnsLength&&n<this._frozenColumnsLength)return!1;for(var p,m=this._frozenColumnsLength;m<=n;m++)p="cell"==i.selectionSettings.selectionMode&&0==c.length?u[u.length-1]:Z(u[m-this._frozenColumnsLength]),m==n&&(o=(r=a)+Z(p).width()+parseFloat(Z(p).css("padding-left"))+parseFloat(Z(p).css("padding-right"))+1),s[m].visible&&(a=a+Z(p).width()+parseFloat(Z(p).css("padding-left"))+parseFloat(Z(p).css("padding-right"))+1);(r<h||h+d<o)&&(l=r<h?h-(h-r)-3:h+(o-(h+d)+3),t.ejScroller("option",{scrollLeft:l}))}},updateAllowColumnResize:function(e){var t=this.model;t.allowColumnResize=e,t.allowColumnResize&&(this._resizer=new J.gridFeatures.gridResize(this)),this._enableColumnResizeEvents()},_predecessorFromSerialPredecessor:function(e){var t,i,s,n=this.model.flatRecords,a=[],r="";return!J.isNullOrUndefined(e)&&0<e.length&&(e.split(",").forEach(function(e){t=e.split("+"),0<=e.indexOf("-")&&(t=e.split("-")),(i=t[0].match(/(\d+|[A-z]+)/g))&&i[0]&&(Z.map(n,function(e){if(e.serialNumber==i[0])return s=e.taskId,!1}),s&&a.push(s+(i[1]||"")+(t[1]?"+"+t[1]:"")))}),r=a.length&&a.join(",")),r},_validatePredecessorString:function(e){var t,i,s=this.model,n=s.flatRecords.length,a=!1;return!(0<e.length)||(e.split(",").forEach(function(e){return i=e.split("+"),0<=e.indexOf("-")&&(i=e.split("-")),!!(i=i[0].match(/(\d+|[A-z]+)/g))&&(s.enableSerialNumber?+i[0]<=n&&(a=!0):-1!=s.ids.indexOf(i[0])&&(a=!0),void(i&&a?i[1]&&("FS"==i[1].toUpperCase()||"FF"==i[1].toUpperCase()||"SF"==i[1].toUpperCase()||"SS"==i[1].toUpperCase()||(t=!1)):t=!1))}),!(t!==P&&!t))},saveCell:function(){var e,t,i,s,n,a,r=this,o=r.model,l=Z("#"+r._id+"EditForm");if(0<l.length){if(!r.editFormValidate())return!0;r._isRowEdit||0<=r._cellEditingDetails.columnIndex&&(r._focusTreeGridElement(),i=r.getUpdatedRecords().indexOf(r._cellEditingDetails.data),e=J.TreeGrid.getRowByIndex(this,i),t=l.closest("td"),s={},n=o.columns[r._cellEditingDetails.columnIndex],i=Z("#"+r._id+r._cellEditingDetails.fieldName.split(".").join("")),l=!0,s={columnName:n.field,value:r.getCurrentEditCellData(),data:r._cellEditingDetails.data,previousValue:r._cellEditingDetails.cellValue,rowIndex:r._cellEditingDetails.rowIndex,columnObject:n,cellElement:t,rowElement:e},"datetimepicker"!=r._cellEditingDetails.cellEditType&&"dropdownedit"!=r._cellEditingDetails.cellEditType&&"datepicker"!=r._cellEditingDetails.cellEditType||i.data("ejWidgets")&&i[i.data("ejWidgets")[0]]("destroy"),J.isNullOrUndefined(n.format)?"boolean"==s.columnObject.type?((i={})[s.columnObject.field]=s.value,s.cellElement.empty().html(Z(Z.templates.Grid_JSONTemplate.render(i))[0].cells[r._cellEditingDetails.columnIndex].innerHTML)):"notesText"==s.columnObject.field?s.cellElement.empty().html(r._convertHtml(s.value)):s.cellElement.empty().html(s.value):(a=r.formatting(n.format,s.value,o.locale),s.cellElement.empty().html(a)),r._cellEditingDetails.cellEditType,n=r._cellEditingDetails.fieldName,a=r._checkModfiedCellValue(s.previousValue,s.value,s.columnObject),!o.isFromGantt&&o.idMapping&&o.parentIdMapping&&n==o.idMapping&&r._validateIdValue(s.value)&&(s.value=s.previousValue,a=!1),o.isFromGantt?r._setGanttCellValue(s,n,a):!a&&r._isRemoteData||(a&&"batchediting"==r.model.editSettings.editMode.toLowerCase()&&(s.data.isBatchAdd||r._createBatchEditedFields(s.data,n,s.value,s.columnObject),r._batchEditStarts=!0),-1!=n.indexOf(".")?J.createObject(n,s.value,s.data[n]):s.data[n]=s.value,s.data.item[n]=s.data[n],s.requestType="saveCellValue",l=r._updateAction(s)),l&&r._refreshAfterSaveCell(s,!0))}},_createBatchEditedFields:function(e,t,i,s){this.model;e.batchEditedFields?e.batchEditedFields&&J.isNullOrUndefined(e.batchEditedFields[t])?e.batchEditedFields[t]=e[t]:e.batchEditedFields&&!J.isNullOrUndefined(e.batchEditedFields[t])&&(this._checkModfiedCellValue(e.batchEditedFields[t],i,s)||delete e.batchEditedFields[t]):(e.batchEditedFields={},e.batchEditedFields[t]=e[t]||""),this._updateBatchChanges(e)},_updateBatchChanges:function(e){this.model;var t=this.batchChanges.changed,i=this.batchChanges.added;Z.isEmptyObject(e.batchEditedFields)?-1!=t.indexOf(e)&&t.splice(t.indexOf(e),1):-1==i.indexOf(e)&&-1==t.indexOf(e)&&t.push(e)},_refreshAfterSaveCell:function(e,t){var i,s=this,n=s.model,a=0<this._frozenColumnsLength?(n.allowSelection||(e.data.isSelected=!1),s._cellEditingDetails.columnIndex<this._frozenColumnsLength?Z(Z.render[s._id+"_JSONFrozenTemplate"](e.data))[0].cells[s._cellEditingDetails.columnIndex]:Z(Z.render[s._id+"_Template"](e.data))[0].cells[s._cellEditingDetails.columnIndex-this._frozenColumnsLength]):(n.allowSelection||(e.data.isSelected=!1),Z(Z.render[s._id+"_Template"](e.data))[0].cells[s._cellEditingDetails.columnIndex]);e.cellElement.removeClass("e-editedcell").replaceWith(a),e.cellElement=Z(a),n.showDetailsRow&&!n.showDetailsRowInfoColumn&&n.detailsTemplate&&this._refreshDetailsRow(n.currentViewData.indexOf(e.data)),s._trigger("refresh"),e.data.treeMappingName||(e.data.treeMappingName=[]),0==e.data.treeMappingName.length&&e.data.treeMappingName.push(e.columnName),(t||e.isModified)&&"batchediting"!=n.editSettings.editMode.toLowerCase()&&s._trigger("endEdit",e)?(e.data[e.columnName]=e.previousValue,e.data.item[e.columnObject.field]=e.previousValue,s.selectRows(this.selectedRowIndex()),J.TreeGrid.refreshRow(s,n.currentViewData.indexOf(e.data))):n.idMapping&&n.parentIdMapping&&s._updateLastInsertedId(e.data[n.idMapping]),n.isEdit=!1,s._cellEventTrigger(e.cellElement[0],e.data,e.columnObject),Z(e.rowElement).removeClass("e-editedrow"),n.showSummaryRow&&(e.editType="celledit",s._updateSummaryRow(e)),n.showTotalSummary&&(e.editType="celledit",s._updateTotalSummaryRow(e)),n.allowTextWrap&&(0<s._$frozenTableContent.length?(s._updateRowHeight(s._cellEditingDetails.rowIndex,"savecell"),s._updateGridContentHeight(),s.getScrollElement().ejScroller("refresh"),i=s.getScrollElement().ejScroller("model.scrollTop"),s._getFrozenScrollElement().scrollTop(i),n.enableVirtualization&&s.updateHeight()):s.getScrollElement().ejScroller("refresh"),n.allowPaging&&!n.sizeSettings.height&&s.updateHeight()),n.allowTextWrap&&0==s._$frozenTableContent.length&&(i=s._getViewPortHeight(),s._$gridContainer.css({height:i+"px"}),Z("#"+s._id+"e-gridcontent").css("height",i),"auto"==n.sizeSettings.height&&s.getScrollElement().ejScroller("refresh")),s._cancelSaveTools();e=e.columnObject;n.allowFiltering&&e&&"filterbar"==n.filterSettings.filterType&&"dropdownedit"==e.filterEditType&&"dropdownedit"!=e.editType&&s._resizeFilteringElements()},_setGanttCellValue:function(e,t,i){var s=this,n=s.model;if("taskMode"===t&&(i=e.value!==e.previousValue),"predecessor"===t){var a={};e.value=Z.trim(e.value),s._validatePredecessorString(e.value)?(a.predecessorString=e.value.split(","),a.currentRecord=e.data,a.requestType="validatePredecessor",s._trigger("actionComplete",a),a.result||(e.value=e.previousValue)):e.value=e.previousValue;var r,o=[],l=[],d=0;e.previousValue=e.data.predecessor,r=e.previousValue,0<e.value.length&&(g=Z("#"+this._id.replace("ejTreeGrid","")).data("ejGantt"),l=e.data._calculatePredecessor(e.value,n.durationUnitEditText,n.durationUnit,g)),u=l.length;var h=0,c=e.previousValue&&e.previousValue.length;for(h=0;h<c;h++)(p=r[h]).from===e.data.taskId.toString()&&o.push(p);for(d=0;d<u;d++)o.push(l[d]);e.data[s._cellEditingDetails.fieldName]=o,g&&!g._isValidPredecessorString&&(e.value=s._getPredecessorsValue(e.data),g._isValidPredecessorString=!0),e.data.item[n.predecessorMapping]=e.value,e.data.predecessorsName=e.value,n.enableWBS&&n.enableWBSPredecessor&&s.updateWBSPredecessor(e.data)}else if("serialNumberPredecessor"===t){a={};e.value=Z.trim(e.value),e.value=s._checkSerialPredecessor(e.value),s._validatePredecessorString(e.value)?(a.predecessorString=e.value.split(","),a.currentRecord=e.data,a.requestType="validateSerialPredecessor",s._trigger("actionComplete",a),a.result||(e.value=e.previousValue)):e.value=e.previousValue,f=s._predecessorFromSerialPredecessor(e.value);var u,p,o=[],l=[],d=0,m=e.data.predecessor;e.prevDefaultPredecessors=m,e.previousValue=e.data.serialNumberPredecessor,0<f.length&&(g=Z("#"+this._id.replace("ejTreeGrid","")).data("ejGantt"),l=e.data._calculatePredecessor(f,n.durationUnitEditText,n.durationUnit,g)),u=l.length;h=0,c=m&&m.length;for(h=0;h<c;h++)(p=m[h]).from===e.data.taskId.toString()&&o.push(p);for(d=0;d<u;d++)o.push(l[d]);e.data.predecessor=o,e.data.item[n.predecessorMapping]=f,e.data.predecessorsName=f,e.data.item.serialNumberPredecessor=e.value,e.data.serialNumberPredecessor=e.value,n.enableWBS&&n.enableWBSPredecessor&&s.updateWBSPredecessor(e.data)}else if("duration"===t){var a=e.value,g=e.data.duration,f=e.data.durationUnit;""==a?(g=a,n.allowUnscheduledTask?g=null:i=!1):(a=","!=J.globalize.findCulture(n.locale).numberFormat[","]?a.match(/(\d*\.*\,*\d+|[A-z]+)/g):a.match(/(\d*\.*\d+|[A-z]+)/g))&&a.length<=2&&(g=J.parseFloat(a[0],null,n.locale),f=a[1]?a[1].toLowerCase():"",f=-1!=n.durationUnitEditText.minute.indexOf(f)?J.Gantt.DurationUnit.Minute:-1!=n.durationUnitEditText.hour.indexOf(f)?J.Gantt.DurationUnit.Hour:-1!=n.durationUnitEditText.day.indexOf(f)?J.Gantt.DurationUnit.Day:n.durationUnit),i=isNaN(g)||!i&&e.data.durationUnit.toLowerCase()==f?(e.data.item[n.durationMapping]=e.previousValue,!1):(e.data.item[n.durationMapping]=e.data.duration=g,e.data.durationUnit=f,!0)}else if(i){switch(t){case"taskId":e.data.item[n.idMapping]=e.value;break;case"taskName":e.data.item[n.taskNameMapping]=e.value;break;case"startDate":case"endDate":n.allowUnscheduledTask||e.value&&""!=e.value?"startDate"==t?e.data.item[n.startDateMapping]=e.value:"endDate"==t&&(e.data.item[n.endDateMapping]=e.value):(i=!1,e.value=e.previousValue);break;case"resourceInfo":e.data.item[n.resourceInfoMapping]=s._getResourceId(e.value);break;case"status":e.data.item[n.progressMapping]=e.value;break;case"notesText":e.data.item[n.notesMapping]=e.value,e.data.notes=e.value,e.data.notesText=e.value;break;case"taskMode":e.data.item[n.taskSchedulingModeMapping]=e.value,e.data.isAutoSchedule=1!=e.value;break;case"work":n.workMapping?e.data.item[n.workMapping]=e.value:e.data.item[s._cellEditingDetails.fieldName]=e.value;break;case"baselineStartDate":e.data.item[n.baselineStartDateMapping]=e.value;break;case"baselineEndDate":e.data.item[n.baselineEndDateMapping]=e.value;break;case"eResourceName":"groupTask"==e.data.eResourceTaskType?e.data.item[n.groupNameMapping]=e.value:"resourceTask"==e.data.eResourceTaskType&&(e.data.item[n.resourceNameMapping]=e.value),e.data.eResourceName=e.value;break;default:e.data.item[s._cellEditingDetails.fieldName]=e.value}e.data[t]=e.value}"startDate"!==e.columnName&&"endDate"!==e.columnName&&"duration"!==e.columnName&&"taskMode"!==e.columnName&&"predecessor"!==e.columnName&&"serialNumberPredecessor"!==e.columnName&&"status"!=e.columnName&&"baselineStartDate"!=e.columnName&&"baselineEndDate"!=e.columnName||(e.isModified=i)},_checkSerialPredecessor:function(e){var t,i,s="",n=[];return 0<e.length&&(e.split(",").forEach(function(e){i=e.split("+"),0<=e.indexOf("-")&&(i=e.split("-")),t=i[0].match(/(\d+|[A-z]+)/g),n.push(t[0]+(t[1]?t[1].toUpperCase():"FS")+(i[1]?"+"+i[1]:""))}),s=n.join(",")),s},updateWBSPredecessor:function(e){var t=this.model,i=e.predecessorsName,s=null;if(i&&0<i.length){for(var n=i.split(","),a=0;a<n.length;a++){var r=n[a].match(/(\d+|[A-z]+)/g),o=+r[0],l=r[1],r=t.flatRecords.filter(function(e){return e&&e.taskId==o}),r=l?r[0]&&r[0].WBS+l:r[0]&&r[0].WBS;r&&(s=s?s+","+r:r)}e.WBSPredecessor=s,e.item.WBSPredecessor=s}else e.WBSPredecessor="",e.item.WBSPredecessor=""},getCurrentEditCellData:function(){var e=this,t=e.model,i=t.columns;if(Z("#"+e._id+"EditForm").length){var s=Z("#"+e._id+e._cellEditingDetails.fieldName.split(".").join("")),n=i[e._cellEditingDetails.columnIndex];switch(e._cellEditingDetails.cellEditType){case J.TreeGrid.EditingType.String:o=s.val();break;case J.TreeGrid.EditingType.Numeric:o=parseFloat(s.val()),o=t.isFromGantt&&("work"==n.field||"status"==n.field||"duration"==n.field)||"unit"==n.field?isNaN(o)?e._cellEditingDetails.cellValue:o:s.ejNumericTextbox("model.value");break;case J.TreeGrid.EditingType.Maskedit:o=s.ejMaskEdit("model.value");break;case J.TreeGrid.EditingType.Dropdown:o=t.isFromGantt&&"resourceInfo"===e._cellEditingDetails.fieldName?e._getSelectedItem(s.ejDropDownList("model.selectedItems")):t.isFromGantt&&"taskMode"===e._cellEditingDetails.fieldName?"true"==s.ejDropDownList("model.value"):0==s.ejDropDownList("model.showCheckbox")&&s.ejDropDownList("model.multiSelectMode")==J.MultiSelectMode.None?s.ejDropDownList("model.itemValue"):s.ejDropDownList("getSelectedValue");break;case J.TreeGrid.EditingType.Boolean:o=s.is(":checked");break;case J.TreeGrid.EditingType.DatePicker:""==(o=n&&!n.format?J.format(s.ejDatePicker("model.value"),this.model.dateFormat,this.model.locale):s.ejDatePicker("model.value"))&&t.isFromGantt&&(o=e._cellEditingDetails.cellValue);break;case J.TreeGrid.EditingType.DateTimePicker:var a=s.ejDateTimePicker("model.value"),r=s.ejDateTimePicker("model.dateTimeFormat"),i=s.ejDateTimePicker("model.locale"),o=n&&!n.format?J.format(s.ejDateTimePicker("model.value"),this.model.dateFormat,this.model.locale):s.ejDateTimePicker("model.value");J.format(s.val(),r,i)!==J.format(a,r,i)&&t.isFromGantt&&!t.allowUnscheduledTask&&(o=e._cellEditingDetails.cellValue);break;case"edittemplate":n=n.editTemplate.read;"string"==typeof n&&(n=J.util.getObject(n,window)),o=n(s)}return"string"==typeof o&&o.length&&"number"==t.columns[e._cellEditingDetails.columnIndex].type&&(o=parseFloat(o)),o}return null},getCurrentEditCellDataForRowEdit:function(e,t,i){var s,n,a,r=this.model,o=r.columns,e=e.split(".").join("");if(this.model.editSettings.allowEditing&&("dialogEditing"==this.model.editSettings.editMode||"batchediting"==r.editSettings.editMode.toLowerCase()&&"dialog"==r.editSettings.batchEditSettings.editMode)?(s=Z("#"+this._id+"EditFormDialog").length,n=Z("#"+this._id+e),a=!0):(s=Z("#"+this._id+"EditForm").length,n=Z("#"+this._id+e)),s){var l,o=o[i];switch(t){case J.TreeGrid.EditingType.String:l=n.val();break;case J.TreeGrid.EditingType.Numeric:l=parseFloat(n.val()),n.data("ejNumericTextbox")&&(l=n.ejNumericTextbox("model.value"));break;case J.TreeGrid.EditingType.Dropdown:l=n.data("ejDropDownList")?0==n.ejDropDownList("model.showCheckbox")&&n.ejDropDownList("model.multiSelectMode")==J.MultiSelectMode.None?n.ejDropDownList("model.itemValue"):n.ejDropDownList("getSelectedValue"):n.val(),a||n.data("ejWidgets")&&n[n.data("ejWidgets")[0]]("destroy");break;case J.TreeGrid.EditingType.Boolean:l=n.is(":checked");break;case J.TreeGrid.EditingType.DatePicker:t=n.hasClass("e-datepicker")?-1==r.dateFormat.toLowerCase().indexOf("hh")?n.ejDatePicker("model.value"):n.ejDateTimePicker("model.value"):n.val(),l=o&&!o.format?this.getFormatedDate(t):t,a||n.data("ejWidgets")&&n[n.data("ejWidgets")[0]]("destroy");break;case J.TreeGrid.EditingType.DateTimePicker:l=n.hasClass("e-datetimepicker")?o&&!o.format?J.format(n.ejDateTimePicker("model.value"),this.model.dateFormat,this.model.locale):n.ejDateTimePicker("model.value"):n.val(),a||n.data("ejWidgets")&&n[n.data("ejWidgets")[0]]("destroy");break;case J.TreeGrid.EditingType.Maskedit:l=n.ejMaskEdit("model.value");break;case"edittemplate":o=o.editTemplate.read;"string"==typeof o&&(o=J.util.getObject(o,window)),l=o(n)}return"string"==typeof l&&l.length&&"number"==r.columns[i].type&&(l=parseFloat(l)),l}return null},_getResourceId:function(e){for(var t=[],i=0,s=e.length,i=0;i<s;i++)t.push(e[i][this.model.resourceIdMapping]);return t},_getSelectedItem:function(i){var e,t=this.model,s=0,n=i.length,a=t.resourceUnitMapping,r=t.resourceIdMapping,o=t.columns[this._cellEditingDetails.columnIndex].dropdownData,l=t.selectedItem.resourceInfo,d=[];if(o)for(s=0;s<n;s++){if(l)for(var h=0;h<l.length;h++){if(l[h][r]===i[s]+1){e=h;break}e=-1}J.isNullOrUndefined(e)||-1==e?Z.each(o,function(e,t){i[s]===e&&((t=Z.extend({},t))[a]=100,d.push(t))}):d.push(l[e])}return d},getFormatedDate:function(e){return J.format(e,this.model.dateFormat,this.model.locale)},getDateFromFormat:function(e){return"object"==typeof e?new Date(e):e?null==J.parseDate(e,this.model.dateFormat,this.model.locale)?new Date(e):J.parseDate(e,this.model.dateFormat,this.model.locale):void 0},formatting:function(e,t,i){e=e.replace(/%280/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">"),i=J.preferredCulture[i]?i:"en-US";var s=e,n=e.split("{0:"),a=e.split("}"),n=n[0],a=a[1];if("string"==typeof t&&Z.isNumeric(t)&&(t=Number(t)),-1==e.indexOf("{0:"))return null!=this.data&&null==this.data.Value?(Z.each(this.data,function(e,t){s=s.replace(new RegExp("\\{"+e+"\\}","gm"),t)}),s):this.data.Value;e=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(e);return null!=e&&null!=t?t=null!=n&&null!=a?n+J.format(t,e[2],i)+a:J.format(t,e[2],i):null!=t||(t=""),t},getColumnIndexByField:function(e){for(var t=this.model.columns,i=t.length,s=0;s<i&&t[s].field!=e;s++);return s==t.length?-1:s},getUpNextVisibleColumnIndex:function(e,t){var i=this.model.columns;for(e=e||0;e<=i.length;e++)if(e!=i.length||"rightArrow"!=t&&"moveCellRight"!=t||(e=0,this._focusingRowIndex+=1),i[e].visible&&i[e].allowCellSelection)return i.indexOf(i[e])},getPreviousVisibleColumnIndex:function(e,t){var i=this.model.columns;for(e=e||i.length-1;e<i.length;e--)if(e<0&&("leftArrow"==t||"moveCellLeft"==t)&&(e=i.length-1,--this._focusingRowIndex),i[e].visible&&i[e].allowCellSelection)return i.indexOf(i[e])},getBrowserDetails:function(){var e=navigator.userAgent.match(/(firefox|chrome|opera|msie|safari)\s?\/?(\d+(.\d+)*)/i);return navigator.userAgent.match(/Trident\/7\./)?{browser:"msie",version:jQuery.uaMatch(navigator.userAgent).version}:{browser:e[1].toLowerCase(),version:e[2]}},mobileDevice:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},getFieldNameByHeaderText:function(e){return J.isNullOrUndefined(this._fieldColumnNames[e])?null:this._fieldColumnNames[e]},clearSelection:function(e){var t=this,i=t.model,s=t.getUpdatedRecords();if(-1!=this.selectedRowIndex()||-1==this.selectedRowIndex()&&-1!=t._previousIndex||-1==e){var n=this._frozenColumnsLength?Z(t.getRows()[0]).add(t.getRows()[1]):t.getRows();if(J.isNullOrUndefined(e)||-1==e){n&&n.find(".e-rowcell,.e-detailsrowcell").removeClass("e-selectionbackground").removeClass("e-active");var a=new J.DataManager(i.flatRecords),r=new J.Query;r.search(!0,["isSelected"],J.FilterOperators.Equals,!0);var o=a.executeLocal(r),l=o&&o.length;if(0<l)for(var d=0,d=0;d<l;d++)o[d].isSelected=!1}else{J.TreeGrid.getRowByIndex(t,e).find(".e-selectionbackground").removeClass("e-selectionbackground").removeClass("e-active");var h=s[e];h&&(h.isSelected=!1)}t._checkboxSelection?(t.selectedRowIndex(-1),i.selectedItem=null,t._cancelSaveTools()):0<i.selectedItems.length&&-1!=e&&!J.isNullOrUndefined(e)?-1!=(h=Z.inArray(s[e],i.selectedItems))&&(i.selectedItems.splice(h,1),s[e].isSelected=!1,i.selectedItem=0<i.selectedItems.length?i.selectedItems[i.selectedItems.length-1]:null,t.selectedRowIndex(s.indexOf(i.selectedItem))):(!i.selectedItems.length||i.selectedItems.length&&!t._multiSelectCtrlRequest||-1==e||J.isNullOrUndefined(e))&&(t.selectedRowIndex(-1),i.selectedItem=null,i.selectedItems=[],t._cancelSaveTools()),t.model.allowSelection&&"multiple"==t.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&!n.find(".e-rowcell,.e-detailsrowcell").hasClass("e-selectionbackground")&&!Z("#"+t._id+"_selectionpopup").find(".e-rowselect").hasClass("e-spanclicked")&&t._clearMultiSelectPopup()}"cell"==i.selectionSettings.selectionMode&&(t._selectedCellDetails=[],i.selectedCellIndexes=[],Z("#"+t._id).find(".e-selectingcell").removeClass("e-selectingcell"),t._rowIndexOfLastSelectedCell=-1,t._lastSelectedCellIndex=-1,t._focusingRowIndex=-1),t.model.allowSelection&&"multiple"==t.model.selectionSettings.selectionType&&J.isNullOrUndefined(e)&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&t._clearMultiSelectPopup()},_clearMultiSelectPopup:function(){Z("#"+this._id+"_selectionpopup").find(".e-rowselect").removeClass("e-spanclicked"),this._multiSelectPopup.hide(),this._multiSelectCtrlRequest=!1,this._isTouchTrigger=!1},getChildRecordsCount:function(e){for(var t=e.childRecords,i=0,s=t?t.length:0;i<s;i++)0<this._filteredRecords.length&&-1==this._filteredRecords.indexOf(t[i])||(++this._removedCount,t[i].hasChildRecords&&t[i].expanded&&this.getChildRecordsCount(t[i]));return this._removedCount},getExpandStatus:function(e){e=e.parentItem;return null==e||!1!==e.expanded&&(!e.parentItem||!1!==e.parentItem.expanded&&this.getExpandStatus(e.parentItem))},getColumnFieldNames:function(){var e=[],t=this.model,i=t.columns,s=0,t=t.searchSettings.fields,n=i.length;if(0<t.length)return t;for(;s<n;s++)i[s].field&&"resourceInfo"!=i[s].field&&"predecessor"!=i[s].field?e.push(i[s].field):"resourceInfo"==i[s].field?e.push("resourceNames"):"predecessor"==i[s].field&&e.push("predecessorsName");return e},_getColumnMappingNames:function(){for(var e=[],t=this.model.columns,i=0,s=t.length;i<s;i++)t[i].field&&"resourceInfo"!=t[i].field&&"predecessor"!=t[i].field&&"work"!=t[i].field&&"taskType"!=t[i].field&&"effortDriven"!=t[i].field?e.push(t[i].mappingName):"resourceInfo"==t[i].field?e.push("resourceNames"):"work"==t[i].field||"taskType"==t[i].field||"effortDriven"==t[i].field?e.push(t[i].field):"predecessor"==t[i].field&&e.push("predecessorsName");return e},renderRecords:function(e){var t=this.model;e||(e={},!t.isFromGantt&&t.enableCollapseAll?(e.requestType=J.TreeGrid.Actions.ExpandCollapse,this._isInExpandCollapseAll=!0):e.requestType=J.TreeGrid.Actions.Refresh),this.sendDataRenderingRequest(e),this._isInExpandCollapseAll=!1},_shiftKeySelectCells:function(e,t){var i=this.model,s=this.getUpdatedRecords(),n=this._shiftKeyFirstElementDetails.firstElementRowIndex,a=J.isNullOrUndefined(this._shiftKeyFirstElementDetails.firstElementCellIndex)?-1:this._shiftKeyFirstElementDetails.firstElementCellIndex,r=[n,e.rowIndex],o=[a,e.cellIndex];r.sort(function(e,t){return e-t}),o.sort(function(e,t){return e-t}),this._isShiftKeyNavigation=!0,this._selectedCellDetails=[],i.selectedCellIndexes=[],Z("#"+this._id).find(".e-selectingcell").removeClass("e-selectingcell");for(var l=r[0];l<=r[1];l++){var d=s&&s[l];i.currentViewData.indexOf(d);if(!J.isNullOrUndefined(d)&&!d.isSummaryRow)for(var h=o[0];h<=o[1];h++)this.selectCells([{rowIndex:l,cellIndex:h}])}},selectCells:function(e,t){var i=this,s=i.model,n=i.getUpdatedRecords(),a=i.getRows(),r=e.length,o=s.columns;if("single"==s.selectionSettings.selectionType&&(r=1),t&&!J.isNullOrUndefined(t)||0!=i._isShiftKeyNavigation||(i._selectedCellDetails=[],s.selectedCellIndexes=[],Z("#"+i._id).find(".e-selectingcell").removeClass("e-selectingcell")),"cell"==s.selectionSettings.selectionMode&&s.allowSelection&&0<a.length)for(var l,d,h,c,u,p=0;p<r;p++)-1!=e[p].rowIndex&&(l=n&&n[e[p].rowIndex],u=s.currentViewData.indexOf(l),J.isNullOrUndefined(l)||l.isSummaryRow||(d=e[p].cellIndex>=i._frozenColumnsLength?1:0,h=e[p].cellIndex>=i._frozenColumnsLength?e[p].cellIndex-i._frozenColumnsLength:e[p].cellIndex,u=(0<i._frozenColumnsLength?a[d]:a)[u],!J.isNullOrUndefined(l)&&J.isNullOrUndefined(u)&&(u=Z(Z.render[i._id+"_Template"](l))[0]),h=u.childNodes[h],-1!=e[p].cellIndex&&o[e[p].cellIndex].allowCellSelection&&o[e[p].cellIndex].visible&&!i._cellSelectingEventTrigger({rowIndex:e[p].rowIndex,cellIndex:e[p].cellIndex,rowElement:u,cellElement:h})&&(Z(h).addClass("e-selectingcell"),c={rowIndex:e[p].rowIndex,cellIndex:e[p].cellIndex,cellElement:h,data:l},-1==("msie"==J.browserInfo().name&&J.browserInfo().version<9?i._getCellIndex(i._selectedCellDetails,"cellElement"):i._selectedCellDetails.map(function(e){return e.cellElement})).indexOf(h)&&(i._selectedCellDetails.push(c),s.selectedCellIndexes.push({rowIndex:c.rowIndex,cellIndex:c.cellIndex})),i._cellSelectedEventTrigger({rowIndex:e[p].rowIndex,cellIndex:e[p].cellIndex,rowElement:u,cellElement:h},i._previousSelectedCellDetails),i._previousSelectedCellDetails={rowElement:u,cellElement:h,cellIndex:e[p].cellIndex,rowIndex:e[p].rowIndex},i._updateHorizontalScrollBar(o[e[p].cellIndex].field))));0==i._isShiftKeyNavigation&&(i._shiftKeyFirstElementDetails.firstElementRowIndex=i._focusingRowIndex,i._shiftKeyFirstElementDetails.firstElementCellIndex=i._cellIndex,i._rowIndexOfLastSelectedCell=c?c.rowIndex:i._rowIndexOfLastSelectedCell,i._lastSelectedCellIndex=i._cellIndex)},selectRows:function(e,t,i){var s=this,n=s.model;s.getRows();if(("cell"!=n.selectionSettings.selectionMode||-1==e)&&!J.TreeGrid.getRowByIndex(s,e).hasClass("e-summaryrow")){if(!((n.editSettings.allowEditing||n.editSettings.allowAdding)&&!s._isRowEdit&&"click"!=n.editSettings.beginEditAction&&0<Z("#"+s._id+"EditForm").length&&s.endEdit())){0<this._frozenColumnsLength&&Z(s.getRows()[0]);var a=s.getUpdatedRecords();if(J.isNullOrUndefined(t)||J.isNullOrUndefined(e)){switch(e=J.isNullOrUndefined(e)?t:e,n.selectionSettings.selectionType){case J.TreeGrid.SelectionType.Checkbox:var r=a[e];return s.clearSelection(-1),i&&(o="unchecked"==r.checkboxState?"checked":"unchecked",s._traverseSelection(r,o,!1),s.selectAllRows()),a[e]&&!a[e].isSelected&&(n.allowSelection&&J.TreeGrid.getRowByIndex(s,e).find(".e-rowcell,.e-detailsrowcell").addClass(" e-selectionbackground e-active"),a[e].isSelected=!0,n.selectedItem=a[e]),s._prevSelectedItem&&s._prevSelectedItem!=n.selectedItem&&(s._prevSelectedItem.isSelected=!1),s._prevSelectedItem=a[e],s.selectedRowIndex(e),n.selectedItems=s.getSelectedRecords(),!1;case J.TreeGrid.SelectionType.Multiple:if(s._multiSelectCtrlRequest&&-1!=e){var r=a[e],o=Z.inArray(r,n.selectedItems);s._prevSelectedItem=a[e],-1!=o&&s.clearSelection(e),-1==o&&(n.selectedItems.push(r),n.allowSelection&&J.TreeGrid.getRowByIndex(s,e).attr("aria-selected","true").find(".e-rowcell,.e-detailsrowcell").addClass(" e-selectionbackground e-active").attr("tabindex","0"),r.isSelected=!0,n.selectedItem=a[e]);break}case J.TreeGrid.SelectionType.Single:s.clearSelection(-1),n.selectedItem=null,e<=a.length-1&&(-1!=e&&n.selectedItems.push(a[e]),s._prevSelectedItem=a[e],s._shiftSelectedRecord=null,n.allowSelection&&J.TreeGrid.getRowByIndex(s,e).find(".e-rowcell,.e-detailsrowcell").addClass(" e-selectionbackground e-active"),a[e]&&(a[e].isSelected=!0,n.selectedItem=a[e]),s._prevSelectedItem&&s._prevSelectedItem!=n.selectedItem&&(s._prevSelectedItem.isSelected=!1))}n.selectedItems.length&&-1!=n.selectedItems.indexOf(a[e])?(s._prevSelectedItem=a[e],s._shiftSelectedRecord=null,this.selectedRowIndex()!=e&&this.selectedRowIndex(e)):0==n.selectedItems.length&&-1!=this.selectedRowIndex()?this.selectedRowIndex(-1):this.selectedRowIndex(n.updatedRecords.indexOf(n.selectedItems[n.selectedItems.length-1]))}else if(n.selectionSettings.selectionType==J.TreeGrid.SelectionType.Multiple){s.clearSelection(-1);for(var l,d,h,c=e-t<0?a.slice(e,t+1):a.slice(t,e+1),u=0;u<c.length;u++)s.getExpandStatus(c[u])&&(c[u].isSelected=!0,d=a.indexOf(c[u]),l=J.TreeGrid.getRowByIndex(s,d),this._frozenColumnsLength?(h=Z(l[0]).add(l[1]),l=l[0]):h=l,h&&Z(h).find(".e-rowcell,.e-detailsrowcell").addClass(" e-selectionbackground e-active"),n.selectedItem=n.updatedRecords[d],this.selectedRowIndex(d))}return n.selectedItems=s.getSelectedRecords(),n.isFromGantt||(s._multiSelectCtrlRequest=!1),n.isFromGantt&&s._cancelSaveTools(),!1}s.getRows()}},getSelectedRecords:function(){var e,t=this.model,i=t.selectionSettings.selectionType;return t.allowFiltering&&0<t.filterSettings.filteredColumns.length||0<this._searchString.length?t.isFromGantt||i==J.TreeGrid.SelectionType.Single?e=t.updatedRecords:i!=J.TreeGrid.SelectionType.Multiple&&i!=J.TreeGrid.SelectionType.Checkbox||(e=this._flatFilteredRecords):e=t.flatRecords,("checkbox"==i?e.filter(function(e){return"checked"==e.checkboxState}):e.filter(function(e){return e.isSelected})).slice()},clearAllSelection:function(){var e=this,t=this.model;e.model.allowSelection&&"multiple"==e.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&e._clearMultiSelectPopup(),e.selectRows(-1),t.selectedItem=null,e._selectedCellDetails=[],t.selectedCellIndexes=[],e._rowIndexOfLastSelectedCell=-1,e._lastSelectedCellIndex=-1,e._focusingRowIndex=-1,Z("#"+e._id).find(".e-selectingcell").removeClass("e-selectingcell"),e._cancelSaveTools()},getCellIndex:function(e,t){var i,s=Z(e.target),n=-1;this.model;return t&&(s=Z(t)),s.hasClass("e-detailsrowcell")||s.closest("td").hasClass("e-detailsrowcell")?-1:("TD"==s.prop("tagName")?n=s.index():"DIV"==s.prop("tagName")&&s.hasClass("e-cell")||"DIV"==s.prop("tagName")&&Z(s.closest("td")[0]).hasClass("e-templatecell")||Z(s.closest("td")[0]).hasClass("e-templatecell")&&Z(s.closest("tr")[0]).hasClass("e-templaterow")?n=s.closest("td").index():"TD"==s.parent().prop("tagName")?(s.closest("td"),n=s.parent().index()):"TH"==s.prop("tagName")||"DIV"==s.prop("tagName")&&"col-resize"==Z(s.closest("th")[0]).css("cursor")?(i="TH"==s.prop("tagName")?Z(s):s.closest("th"),e=s[0].getBoundingClientRect(),t=(-1!=navigator.userAgent.indexOf("WebKit")?document.body:document.documentElement).scrollLeft,n=this._orgX<e.left+5+t&&i.prevAll(":visible:first")[0]?i.prevAll(":visible:first")[0].cellIndex:i.index()):0<s.closest("td.e-rowcell").length&&(n=s.closest("td.e-rowcell").index()),-1!=n&&0<this._frozenColumnsLength&&(0<s.closest(".e-movablecontentdiv").length||0<s.closest(".e-movableheaderdiv").length||0<s.closest(".e-movablefooterdiv").length)&&(n+=this._frozenColumnsLength),n)},getRowIndex:function(e){var t=Z(e.target),i=this.getRows(),e=-1;this.model;if(0<t.closest(".e-gridcontainer").length){if(0<this._frozenColumnsLength)if(0<t.closest(".e-frozencontentdiv").length||0<t.closest(".e-frozencontainer").length)i=Z(i[0]);else{if(!(0<t.closest(".e-movablecontentdiv").length||0<t.closest(".e-movablecontainer").length))return e;i=Z(i[1])}return-1==(e=i.index(t))&&(t=t.closest("tr"),e=i.index(t)),e}},_cancelEditState:function(e){var t=this;J.isNullOrUndefined(e)||(e=0,t.getScrollElement().ejScroller("option","scrollLeft")!=(e=(0<this._frozenColumnsLength?t._$gridHeaderContainer.find("#e-movableheader"+this._id):t._$gridHeaderContainer).scrollLeft())&&(t.getScrollElement().ejScroller("option","scrollLeft",e),t.model.showTotalSummary&&t._$footerContainer&&(0<this._frozenColumnsLength?t._$footerContainer.find("#e-movablefooter"+this._id):t._$footerContainer).scrollLeft(e))),t.model.isEdit?t.cancelEditCell():t._isRowEdit&&t.cancelRowEditCell()},cancelEditCell:function(e){var t,i,s,n=this,a=n.model,r=(n.model.selectedItem,n._cellEditingDetails.columnIndex),o=a.columns[r];if(a.isFromGantt&&!a.isEdit)return!0;s={columnName:o.field,value:n.getCurrentEditCellData(),data:n._cellEditingDetails.data,previousValue:n._cellEditingDetails.cellValue,columnObject:o},0<this._frozenColumnsLength?this._frozenColumnsLength<=n._cellEditingDetails.columnIndex?(r=n._cellEditingDetails.columnIndex-this._frozenColumnsLength,t=Z(n.getRows()[1])[n._cellEditingDetails.rowIndex],Z(t).hasClass("e-editedrow")&&Z(t).removeClass("e-editedrow"),i=t.cells[r],Z(i).removeClass("e-editedcell").empty().html(Z(Z.render[n._id+"_Template"](s.data))[0].cells[r].innerHTML)):(t=Z(n.getRows()[0])[n._cellEditingDetails.rowIndex],Z(t).hasClass("e-editedrow")&&Z(t).removeClass("e-editedrow"),i=t.cells[r],Z(i).removeClass("e-editedcell").empty().html(Z(Z.render[n._id+"_JSONFrozenTemplate"](s.data))[0].cells[r].innerHTML)):(t=Z(n.getRows())[n._cellEditingDetails.rowIndex],Z(t).hasClass("e-editedrow")&&Z(t).removeClass("e-editedrow"),i=t.cells[r],Z(i).removeClass("e-editedcell").empty().html(Z(Z.render[n._id+"_Template"](s.data))[0].cells[r].innerHTML)),n._cellEventTrigger(Z(i)[0],s.data,s.columnObject),n.model.isEdit=!1,n._cancelSaveTools(),n._trigger("refresh")},_destroyWidgetElements:function(){for(var e=this.model.columns,t=e.length,i=0;i<t;i++){s=this._getFieldValue(e[i].field,i);var s=Z("#"+this._id+s);s.data("ejWidgets")&&s[s.data("ejWidgets")[0]]("destroy")}},cancelRowEditCell:function(){var e,t,i=this,s=this.model,n=s.editSettings.allowDeleting,a=Z(document.getElementById(i._id+"EditForm")),r=Z("#"+i._id+"EditFrozenForm");0<a.length&&this._destroyWidgetElements(),e=Z(a.closest("tr")),t=r.closest("tr");var o=i.getIndexByRow(e),r=s.currentViewData[o];-1==o&&0==a.length||(e.hasClass("e-addedrow")&&(i.model.editSettings.allowDeleting||(i.model.editSettings.allowDeleting=!0)),e.hasClass("e-editedrow")?(e.removeClass("e-editedrow").empty().html(Z(Z.render[i._id+"_Template"](r))[0].innerHTML),0<t.length&&t.removeClass("e-editedrow").empty().html(Z(Z.render[i._id+"_JSONFrozenTemplate"](r))[0].innerHTML),i._rowEventTrigger(e,r)):e.hasClass("e-rowedit")?(e.removeClass("e-rowedit").empty().html(Z(Z.render[i._id+"_Template"](r))[0].innerHTML),0<t.length&&t.removeClass("e-rowedit").empty().html(Z(Z.render[i._id+"_JSONFrozenTemplate"](r))[0].innerHTML),i._rowEventTrigger(e,r)):e.hasClass("e-addedrow")&&(i._isRefreshAddedRecord=!1,i._isEmptyRow=!0,i.deleteRow(null,!0,null),i._isEmptyRow=!1),s.isEdit=i._isRowEdit=!1,s.editSettings.allowDeleting=n,i._updateWrapRowHeights("total,header",null,o),i._cancelSaveTools(),i._trigger("refresh"),0<i._commandColumnLength&&(o=J.TreeGrid.getRowByIndex(i,i.getUpdatedRecords().indexOf(s.currentViewData[o])),i._refreshUnboundTemplate(o)))},refreshRow:function(e){var t=this.model,i=(t.allowPaging?this._updatedPageData:t.updatedRecords)[e],s=this.getIndexByRow(Z("#"+this._id+"EditForm").closest("tr"));(t.enableVirtualization||t.allowPaging)&&(e=t.currentViewData.indexOf(i)),i&&-1<e&&(J.TreeGrid.refreshRow(this,e),s==e&&(this._isRowEdit=this.model.isEdit=!1,this._cancelSaveTools()))},_refreshDetailsRow:function(e){var t,i=this.model,s=this.model.currentViewData[e],n={};s&&(n=0<this._frozenColumnsLength?Z(this.getRows()[1]):Z(this.getRows()),(t=Z(n[e]).next("tr")).hasClass("e-detailsrow")&&(t.remove(),t=Z(Z.render[this._id+"_detailRowTemplate"](s)),Z(n[e]).after(t),this.setGridRows(Z(this.getContentTable().get(0).rows)),this._gridRows=this.getContentTable().get(0).rows,0<this._frozenColumnsLength&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),this._trigger("refresh"),i.detailsDataBound&&this._trigger("detailsDataBound",{detailsElement:t,data:s})))},_refreshedCellEventTrigger:function(e){var t=this.model;if(null!=t.queryCellInfo||null!=t.rowDataBound||null!=t.detailsDataBound){null!=t.rowDataBound&&this._trigger("rowDataBound",{rowElement:e.rowElement,data:e.data});var i=e.rowElement.cells,s=Z(e.rowElement).find(".e-rowcell"),n=0,a=i.length,r=null,o=this.model.columns;if(null!=t.queryCellInfo)for(;n<a;n++)Z(i[n]).hasClass("e-rowcell")&&(r=o[s.index(i[n])]),r&&this._cellEventTrigger(i[n],e.data,r);t.detailsDataBound&&Z(e.rowElement).next("tr").hasClass("e-detailsrow")&&(t=Z(e.rowElement).next("tr"),0<this._frozenColumnsLength&&(t=Z(t[1])),this._trigger("detailsDataBound",{detailsElement:Z(e.rowElement).next("tr"),data:e.data}))}},_refreshGridPager:function(){var e,t,i,s,n;null!=this.getPager()&&(t=(e=this).model,i=this.getPager().ejPager("model"),(s={}).currentPage=this._currentPage(),n=(e._isHierarchyFiltering?e.getExpandedRecords(e._filterParentRecords):t.updatedRecords).length,0==t.currentViewData.length&&0<n&&1!=i.totalPages?e.gotoPage(s.currentPage-1):(s.totalRecordsCount=e._isLoadonDemand?e._pageRecordCountOnDemand:e._isRemoteData?t.pageSettings.totalRecordsCount:e._gridRecordsCount,this.getPager().ejPager("option",s).ejPager("refreshPager"),t.pageSettings.totalPages=i.totalPages||null,e._isRemoteData||(t.pageSettings.totalRecordsCount=i.totalRecordsCount||null),e._updatePagerTextAlignment()))},_getVisibleChildRecordCount:function(e,t,i){var s,n;this.model;if(e.hasChildRecords){n=(s=e.childRecords).length;for(var a=0;a<n;a++)-1!==i.indexOf(s[a])&&t++,s[a].hasChildRecords&&(t=this._getVisibleChildRecordCount(s[a],t,i))}else-1!==i.indexOf(e)&&t++;return t},_renderAddedRow:function(e,t){var i=this.model;this._updateCurrentViewData(),i.enableVirtualization||i.allowPaging?(this.updateAltRow(),(i={}).requestType=J.TreeGrid.Actions.Refresh,this.sendDataRenderingRequest(i)):this.renderNewAddedRow(e,t),this.updateHeight(),this._updateFixedTableBorder()},renderNewAddedRow:function(e,t){var i,s,n,a=this,r=(this.model,a.getRows()),o=Z.render[this._id+"_Template"](t),l=0<this._frozenColumnsLength;l&&(r=Z(a.getRows()[1]),i=Z(a.getRows()[0]),n=Z.render[this._id+"_JSONFrozenTemplate"](t)),!J.isNullOrUndefined(r)&&0<r.length?r.length==e?(t=r.eq(e-1),l&&(s=i.eq(e-1)),Z(t).next("tr").hasClass("e-detailsrow")?(Z(t).next("tr").after(o),l&&Z(s).next("tr").after(n)):(Z(t).after(o),l&&Z(s).after(n))):(r.eq(e).before(o),l&&i.eq(e).before(n)):0<this._frozenColumnsLength?a._renderFrozenRecords():(a.getContentTable().find("tbody").empty().append(a._getEmptyTbody()),n=document.createElement("div"),a.getContentTable().find("colgroup").first().replaceWith(a._getMetaColGroup()),a.getContentTable().children("tbody").empty(),n.innerHTML=["<table>",Z.render[a._id+"_Template"](a.model.currentViewData),"</table>"].join(""),a.getContentTable().get(0).replaceChild(n.firstChild.firstChild,a.getContentTable().get(0).lastChild)),this._gridRows=this.getContentTable().get(0).rows,0<this._frozenColumnsLength&&(this._gridRows=[this._gridRows,this.getContentTable().get(1).rows]),a.setGridRows(Z(a.getContentTable().get(0).rows))},onScrollHelper:function(e,t){this._isFromChart=t,this.getScrollElement().ejScroller("scrollY",e,!0),!this.getScrollElement().ejScroller("isHScroll")&&this.model.isFromGantt&&this.getScrollElement().scrollTop(e)},isVScroll:function(){return!!this.getScrollElement().hasClass("e-scroller")&&this.getScrollElement().ejScroller("isVScroll")},refreshScroller:function(e){var t=this;t._$gridContent.removeClass("e-borderbox");var i=t.getScrollElement().ejScroller("option","scrollTop"),s=t.getScrollElement().ejScroller("option","scrollLeft");t.getScrollElement().ejScroller("option",{persist:!0}),t.getScrollElement().ejScroller("option",{width:e});e=t.getMaxScrollWidth();e<s&&(s=0<e?e:0),t._$gridContent.css("height",t._viewPortHeight),t.getScrollElement().ejScroller("refresh");e=t.getScrollElement().ejScroller("isHScroll");t.getScrollElement().ejScroller("option",{scrollTop:i}),e&&t.getScrollElement().ejScroller("option",{scrollLeft:s}),t._$gridHeaderContainer.scrollLeft(s),e?this.getScrollElement().scrollTop(0):this.getScrollElement().scrollTop(i)},getMaxScrollHeight:function(){return this.getScrollElement().children(".e-content").children().height()-this.getScrollElement().children(".e-content").height()},getMaxScrollWidth:function(){return this.getScrollElement().children(".e-content").find(".e-table").width()-this.getScrollElement().children(".e-content").width()},refreshHeight:function(){this.getScrollElement().ejScroller("refresh")},getColumnByHeaderText:function(e){for(var t=this.model.columns.length,i=this.model.columns,s=0;s<t&&i[s].headerText!=e;s++);return s==i.length?null:i[s]},hideColumn:function(e){var t,i,s,n,a,r,o=this,l=o.model,d=this.getColumnByHeaderText(e),h=Z.inArray(d,l.columns),c=Z.inArray(e,o._hiddenColumns);d&&!o._isColumnHidable(d)||(-1!=h&&h!=l.treeColumnIndex&&-1==c&&(o._cancelEditState(),o._hiddenColumns.push(e),o.model.columns[h].visible=!1,t=o.getHeaderTable().find("colgroup").find("col"),Z(t).eq(h).hide(),c=o.getHeaderTable().find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),Z(c).eq(h).addClass("e-hide"),l.allowFiltering&&"filterbar"==l.filterSettings.filterType&&(r=o.getHeaderTable().find("thead").find("th.e-filterbarcell"),Z(r).eq(h).addClass("e-hide")),1==o.model.columns[h].isFrozen&&o.setWidthToColumns(),c=o.getContentTable().find("colgroup").find("col"),i=!0,s=h,Z(c).eq(h).hide(),c=o.getRows(),r=this._getFooterRows(),0<this._frozenColumnsLength?h<this._frozenColumnsLength?(c=Z(o.getRows()[0]),r=Z(r[0]),o._gridRows&&0<Z(o.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length?(n=parseInt(Z(o.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan")),Z(o.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",n-1)):0!=o.model.currentViewData.length||!J.isNullOrUndefined(o._gridRows)&&0!=o._gridRows.length||(n=parseInt(Z(o.getContentTable()[0]).find("tbody").find("td").attr("colspan")),Z(o.getContentTable()[0]).find("tbody").find("td").attr("colspan",n-1))):(c=Z(o.getRows()[1]),r=Z(r[1]),i=!1,s=h-this._frozenColumnsLength,o._gridRows&&0<Z(o.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length?(n=parseInt(Z(o.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan")),Z(o.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",n-1)):0!=o.model.currentViewData.length||!J.isNullOrUndefined(o._gridRows)&&0!=o._gridRows.length||(n=parseInt(Z(o.getContentTable()[1]).find("tbody").find("td").attr("colspan")),Z(o.getContentTable()[1]).find("tbody").find("td").attr("colspan",n-1))):0!=o.model.currentViewData.length||!J.isNullOrUndefined(o._gridRows)&&0!=o._gridRows.length?o._gridRows&&0<Z(o.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length&&(n=parseInt(Z(o.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan")),Z(o.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",n-1)):o.getContentTable().find("tbody").find("td").attr("colspan",o.model.columns.length-o._hiddenColumns.length),c.each(function(){var e=Z(this).children("td").eq(s);Z(e).addClass("e-hide"),l.showSummaryRow&&Z(e).hasClass("e-summaryrowcell")&&i&&o._updateSummaryRowTitleCell(t,e[0].parentElement)}),l.showTotalSummary&&(a=o._$footertableContent.find("colgroup").find("col"),Z(a).eq(h).hide(),r.each(function(){var e=Z(this).children("td").eq(s);Z(e).addClass("e-hide"),Z(e).hasClass("e-footersummaryrowcell")&&o._updateSummaryRowTitleCell(a,e[0].parentElement)})),r=o.getScrollElement(),l.isFromGantt&&o._trigger("refreshScrollCss"),l.columnResizeSettings.columnResizeMode!=J.TreeGrid.ColumnResizeMode.FixedColumns||l.isFromGantt||this._updateTableWidth(),r.ejScroller("refresh"),o._updateScrollCss(),o._updateHeaderScrollLeft(),l.isFromGantt&&!r.ejScroller("isHScroll")&&r.scrollTop(r.data("ejScroller").scrollTop()),-1!=(h=Z.inArray(e,o._visibleColumns))&&o._visibleColumns.splice(h,1),(l.showColumnChooser||l.contextMenuSettings.showContextMenu)&&(o._renderColumnChooserList(!0,e),o._updateColumnMenuVisibility()),o._addInitTemplate(),l.showTotalSummary&&l.collapsibleTotalSummary&&o._updateSummaryTitleColumn(),l.editSettings.allowEditing&&"dialogEditing"==l.editSettings.editMode&&(J.isNullOrUndefined(l.editSettings.dialogEditorTemplateID)||""==l.editSettings.dialogEditorTemplateID)?o._treeGridAddEditDialog():l.editSettings.allowEditing&&"dialogEditing"==l.editSettings.editMode&&!J.isNullOrUndefined(l.editSettings.dialogEditorTemplateID)&&""!=l.editSettings.dialogEditorTemplateID&&o._treeGridAddEditDialogTemplate()),this.model.showStackedHeader&&this._refreshStackedHeader(),l.isFromGantt&&o.updateToGanttColumns())},clearFilter:function(i){var e=this,t=e.model;if(J.isNullOrUndefined(i)){var s=t.filterSettings.filteredColumns;for(s&&s.length;s&&0<s.length;)e.clearFilter(s[0].field);e._filteredColumnValue=[],e._filteredColumnValueID=[]}else{var n,a=e.getColumnByField(i),r=Z.grep(t.filterSettings.filteredColumns,function(e,t){return e.field===i});a&&0<r.length&&("immediate"==t.filterBarMode&&"numericedit"==a.filterEditType||(e._filterString="",e._fieldName="",e.filterColumn(i,"equal","","and"),e._storePreviousFilteredValue(e._fieldName,e._filterString,this._operator)),e._clearFilterElementValue(a),"menu"==t.filterSettings.filterType&&"excel"!=a.filterType||"excel"==t.filterSettings.filterType&&"menu"==a.filterType?(n=e._filteredColumnValueID.indexOf(a.field),e._filteredColumnValue.splice(n,1),e._filteredColumnValueID.splice(n,1)):("excel"==t.filterSettings.filterType&&"menu"!=a.filterType||"menu"==t.filterSettings.filterType&&"excel"==a.filterType)&&(n=e._filteredColumnValueID.indexOf(a.field),e._filteredColumnValueID.splice(n,1)),e._isExcelFilter&&e._excelFilter._predicates[0]&&delete e._excelFilter._predicates[0][a.field],t.showColumnChooser||e.getHeaderTable().find("div[data-ej-mappingname='"+a.field+"']").next(".e-filtericon").removeClass("e-column-filtered-icon").addClass("e-column-filter-icon"))}},getColumnByField:function(e){for(var t=this.model.columns,i=0;i<t.length&&t[i].field!=e;i++);return i==t.length?null:t[i]},_clearFilterElementValue:function(e){var t=e.field.split(".").join(""),t=Z("#"+this._id+"_"+t+"_filterbarcell");if(t&&t.length)switch(e.filterEditType){case"stringedit":Z(t).val("");break;case"booleanedit":Z(t).prop("checked",!1);break;case"numericedit":Z(t).ejNumericTextbox("instance").option("value","");break;case"dropdownedit":Z(t).ejDropDownList("instance").option("value","");break;case"datepicker":Z(t).ejDatePicker("instance").option("value","");break;case"datetimepicker":Z(t).ejDateTimePicker("instance").option("value","")}},_updateSummaryRowTitleCell:function(e,t){for(var i=e.length,s=0;s<i;s++)if("none"!=Z(e[s]).css("display")){var n=Z(t).find(".e-summarytitle")[0];return Z(t.childNodes[s]).find(".e-summarytitle")[0]?void 0:void Z(t.childNodes[s]).prepend(n)}},_updateFrozenColumnOnResize:function(e){var t=this.model,i=t.columns;if(this._getFrozenColumnWidth()+18>this._gridWidth){for(var s=0,n=-1,a=0;a<this._frozenColumnsLength;a++)1==i[a].visible&&s<i[a].width&&(s=i[a].width,n=a);if(i[e].width<s-t.commonWidth)i[n].width==s&&(i[n].width=this.columnsWidthCollection[n]=i[n].width-i[e].width);else{t.columns[e].width>t.commonWidth&&(t.columns[e].width=t.commonWidth);for(var r=Math.round(i[e].width/this._frozenColumnsLength),a=0;a<this._frozenColumnsLength;a++)1==i[a].isFrozen&&1==i[a].visible&&(i[a].width=this.columnsWidthCollection[a]=i[a].width-r)}}},showColumn:function(e){var t,i,s,n,a,r,o=this,l=o.model,d=this.getColumnByHeaderText(e),h=Z.inArray(d,l.columns),d=Z.inArray(e,o._visibleColumns);-1!=h&&-1==d&&(o._cancelEditState(),o._visibleColumns.push(e),o.model.columns[h].visible=!0,t=o.getHeaderTable().find("colgroup").find("col"),Z(t).eq(h).show(),d=o.getHeaderTable().find("tr").not(".e-stackedHeaderRow").find(".e-headercell"),Z(d).eq(h).removeClass("e-hide"),l.allowFiltering&&"filterbar"==l.filterSettings.filterType&&(r=o.getHeaderTable().find("thead").find("th.e-filterbarcell"),Z(r).eq(h).removeClass("e-hide")),1==o.model.columns[h].isFrozen&&(o._updateFrozenColumnOnResize(h),o.setWidthToColumns()),d=o.getContentTable().find("colgroup").find("col"),i=!0,s=h,Z(d).eq(h).show(),d=o.getRows(),r=this._getFooterRows(),0<this._frozenColumnsLength?h<this._frozenColumnsLength?(d=Z(o.getRows()[0]),r=Z(r[0]),o._gridRows&&0<Z(o.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length&&(n=parseInt(Z(o.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan")),Z(o.getTreeGridRows()[0]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",n+1))):(d=Z(o.getRows()[1]),r=Z(r[1]),i=!1,s=h-this._frozenColumnsLength,o._gridRows&&0<Z(o.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length&&(n=parseInt(Z(o.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan")),Z(o.getTreeGridRows()[1]).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",n+1))):o._gridRows&&0<Z(o.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").length&&(n=parseInt(Z(o.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan")),Z(o.getTreeGridRows()).find(".e-detailscellwrapper").parent(".e-detailsrowcell").attr("colspan",n+1)),d.each(function(){var e=Z(this).children("td").eq(s);Z(e).removeClass("e-hide"),l.showSummaryRow&&Z(e).hasClass("e-summaryrowcell")&&i&&o._updateSummaryRowTitleCell(t,e[0].parentElement)}),l.showTotalSummary&&(a=o._$footertableContent.find("colgroup").find("col"),Z(a).eq(h).show(),r.each(function(){var e=Z(this).children("td").eq(s);Z(e).removeClass("e-hide"),Z(e).hasClass("e-footersummaryrowcell")&&o._updateSummaryRowTitleCell(a,e[0].parentElement)})),o._addInitTemplate(),l.showTotalSummary&&l.collapsibleTotalSummary&&o._updateSummaryTitleColumn(),r=o.getScrollElement(),l.isFromGantt&&o._trigger("refreshScrollCss"),l.columnResizeSettings.columnResizeMode!=J.TreeGrid.ColumnResizeMode.FixedColumns||l.isFromGantt||this._updateTableWidth(),r.ejScroller("refresh"),o._updateScrollCss(),o._updateHeaderScrollLeft(),l.isFromGantt&&!r.ejScroller("isHScroll")&&r.scrollTop(r.data("ejScroller").scrollTop()),-1!=(h=Z.inArray(e,o._hiddenColumns))&&o._hiddenColumns.splice(h,1),(l.showColumnChooser||l.contextMenuSettings.showContextMenu)&&(o._renderColumnChooserList(!0,e),o._updateColumnMenuVisibility()),l.editSettings.allowEditing&&"dialogEditing"==l.editSettings.editMode&&(J.isNullOrUndefined(l.editSettings.dialogEditorTemplateID)||""==l.editSettings.dialogEditorTemplateID)?o._treeGridAddEditDialog():l.editSettings.allowEditing&&"dialogEditing"==l.editSettings.editMode&&!J.isNullOrUndefined(l.editSettings.dialogEditorTemplateID)&&""!=l.editSettings.dialogEditorTemplateID&&o._treeGridAddEditDialogTemplate()),this.model.showStackedHeader&&this._refreshStackedHeader(),l.isFromGantt&&o.updateToGanttColumns()},getHiddenColumns:function(){this.model;for(var e=this._hiddenColumns,t=e.length,i=[],s=0;s<t;s++)i.push(this.getColumnByHeaderText(e[s]));return i},getColumnByIndex:function(e){var t=this.model.columns;return t.length>e?t[e]:null},getVisibleColumns:function(){this.model;for(var e=this._visibleColumns,t=e.length,i=[],s=0;s<t;s++)i.push(this.getColumnByHeaderText(e[s]));return i},_getLastVisibleColumnIndex:function(){for(var e=this.model.columns,t=-1,i=e.length-1;0<=i;i--)if(0!=e[i].visible){t=i;break}return t},cancelEdit:function(){this._isRowEdit?this.cancelRowEditCell():this.model.isEdit&&this.cancelEditCell()},redraw:function(){this.resetModelCollections(),this._clearColumnMenu(),this._clearContextMenu(),this._removeDetailsRow(),this.element.empty(),this.element.off();jQuery.uaMatch(navigator.userAgent);var e=this,t=this.model;e._off(e.element,"click",e._onClick),e._off(e.element,"keydown",e._keyDown),e._off(e.element,"click","#"+e._id+"e-gridheader",e._onHeaderClick),e._off(e.element,"mousedown touchstart","#"+e._id+"e-gridheader",e._headerMouseDown),e._off(Z(document),"mousedown touchstart",e._mouseDownHandler),e._off(e.element,"mousedown touchstart",".e-gridcontent",e._contentMouseDown),e._off(e.element,"click",e._onRecordClick),e._off(e.element,"dblclick",".e-gridcontent > div",e._onRecordDoubleClick),"immediate"==t.filterSettings.filterBarMode&&(e._off(e.element,"keyup",".e-filterbarcell input",e._filterBarHandler),e._off(e.element,"click",".e-filterbarcell .e-checkbox")._off(e.element,"click",".e-filterbarcell .e-checkbox",e._filterBarHandler)),e._off(e.element,"focus click",".e-filterbarcell input",e._filterBarClose),e._off(e.element,"click",".e-filterbarcell .e-cancel",e._filterBarClose),!e.model.showGridCellTooltip||e.model.showGridExpandCellTooltip||"msie"==J.browserInfo().name?e._off(e.element,"mouseenter",".e-rowcell",e._mouseHover):e._off(e.element,"mousemove",".e-rowcell",e._mouseHover),e.model.showGridCellTooltip&&("msie"==J.browserInfo().name?e._off(e.element,"mouseenter",".e-headercelldiv",e._headermouseHover):e._off(e.element,"mousemove",".e-headercelldiv",e._headermouseHover)),e._off(e.element,"mouseleave",".e-rowcell",e._cellMouseLeave),e._off(e.element,"mouseleave",e._cellMouseLeave),e._off(e.element,"mouseleave",".e-headercelldiv",e._headerMouseLeave),e._off(e.element,"mouseleave",e._headerMouseLeave),(t.isFromGantt||this._frozenColumnsLength)&&e._off(e.element,"mousewheel DOMMouseScroll",e._mouseWheel),t.enableResize&&t.isResponsive&&!t.isFromGantt&&e._off(Z(window),"resize",e._windowResize),J.isTouchDevice()?e._off(e.element,"doubletap ",".e-gridcontent",e._editdblClickHandler):e._off(e.element,"dblclick ",".e-gridcontent",e._editdblClickHandler),t.contextMenuSettings.showContextMenu&&e._off(e.element,"keyup contextmenu taphold",this._preventContextMenu),this._init()},clearColumnMenu:function(){this._clearColumnMenu()},export:function(e,t,i){var s=this,n=s.model;s.contextMenuOperations("Cancel");var a=s._getExportModel(n),n={action:e,method:"post","data-ajax":"false"};Z("form#"+s._id+"export").remove();var r,o=J.buildTag("form#"+s._id+"export","",null,n);return J.raiseWebFormsServerEvents?(e={model:a,originalEventType:t},n={model:JSON.stringify(a)},J.raiseWebFormsServerEvents(t,e,n)):(r={},i?Z("body").find(".e-treegrid").each(function(e,t){t=Z(t).data("ejTreeGrid");J.isNullOrUndefined(t)||(t=t.model,t=s._getExportModel(t),r[e]=JSON.stringify(t),t={name:"TreeGridModel",type:"hidden",value:JSON.stringify(t)},t=J.buildTag("input","",null,t),o.append(t))}):(a={name:"TreeGridModel",type:"hidden",value:JSON.stringify(a)},a=J.buildTag("input","",null,a),o.append(a),o.append(this)),Z("body").append(o),o.submit()),!0},_getExportModel:function(e){var t=e,i=t.updatedRecords,s=t.currentViewData,n=t.flatRecords,a=t.parentRecords,r=t.summaryRowRecords,o=t.selectedItem,e=t.selectedItems;delete t.updatedRecords,delete t.currentViewData,delete t.flatRecords,delete t.parentRecords,delete t.summaryRowRecords,delete t.selectedItem,delete t.selectedItems;var l=Z.extend(!0,{},t);t.updatedRecords=i,t.currentViewData=s,t.flatRecords=n,t.parentRecords=a,t.selectedItem=o,t.selectedItems=e,t.summaryRowRecords=r;for(var d=l.columns,h=d.length,c=l.stackedHeaderRows,u=l.filterSettings.filteredColumns,p=u.length,m=0;m<h;m++){if(l.columns[m].editType!=P)switch(d[m].editType){case"stringedit":case"edittemplate":d[m].editType="string";break;case"numericedit":d[m].editType="numeric";break;case"dropdownedit":d[m].editType="dropdown";break;case"booleanedit":d[m].editType="boolean"}if(d[m].filterEditType!=P)switch(d[m].filterEditType){case"stringedit":d[m].filterEditType="string";break;case"numericedit":d[m].filterEditType="numeric";break;case"dropdownedit":d[m].filterEditType="dropdown";break;case"booleanedit":d[m].filterEditType="boolean"}}for(m=0;m<p;m++)"equal"==u[m].operator?u[m].operator="equals":"notequal"==l.filterSettings.filteredColumns[m].operator&&(u[m].operator="notequals");if(t.showStackedHeader&&0<c.length)for(var g=0;g<c.length;g++)for(var f=c[g].stackedHeaderColumns,_=0;_<f.length;_++){var v=Array.isArray(f[_].column)?f[_].column:Z.map(f[_].column.split(","),Z.trim);f[_].column=v}if(l.showStackedHeader){l.stackedHeaderRow=l.stackedHeaderRows;for(m=0;m<l.stackedHeaderRow.length;m++){l.stackedHeaderRow[m].stackedHeaderColumn=l.stackedHeaderRow[m].stackedHeaderColumns;for(var b=l.stackedHeaderRow[m].stackedHeaderColumn,x=0;x<b.length;x++)l.stackedHeaderRow[m].stackedHeaderColumn[x].column=Z.isArray(b[x].column)?b[x].column:b[x].column.split(",")}}var y=this.ignoreOnExport,w=y.length;if(this.ignoreOnExport)for(m=0;m<w;m++)delete l[y[m]];return l},_getNonContentHeight:function(){var e=this.model,t=0,i=this.model.isFromGantt?0:1,t=this._$gridHeaderContent.outerHeight()+parseFloat(i);return this.model.toolbarSettings.showToolbar&&(t+=J.isNullOrUndefined(Z("#"+this._id+"_toolbarItems").outerHeight())?0:Z("#"+this._id+"_toolbarItems").outerHeight()),e.allowPaging&&(t+=this.element.find(".e-pager").outerHeight()),t},_getViewPortHeight:function(){return"auto"==this.model.sizeSettings.height?0<this._frozenColumnsLength?1==Z("#"+this._id+"e-gridcontent").find(".e-hscrollbar").length?Z("#"+this._id+"movablee-table").height()+18:Z("#"+this._id+"movablee-table").height():1==Z("#"+this._id+"e-gridcontent").find(".e-hscrollbar").length?Z("#"+this._id+"e-table").height()+18:Z("#"+this._id+"e-table").height():this.element.height()-this._getNonContentHeight()},updateViewPortHeight:function(){this._viewPortHeight=this._getViewPortHeight()},_updateScrollCss:function(){var e,t,i=this,s=i.model;s.isFromGantt||(e=i.isVScroll(),i._$gridHeaderContent.hasClass("e-scrollcss"),(t=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor))&&i._$gridHeaderContent.removeClass("e-gridheader"),e?(this.mobileDevice()||i._$gridHeaderContent.addClass("e-scrollcss"),s.showTotalSummary&&i._$totalSummaryRowContainer&&i._$totalSummaryRowContainer.height()<=s.totalSummaryHeight&&0==i._$totalSummaryRowContainer.find(".e-vscrollbar").length&&(this.mobileDevice()?i._$totalSummaryRowContainer.width(i._$gridContent.width()):(i._$totalSummaryRowContainer.addClass("e-scrollcss"),i._$totalSummaryRowContainer.width(i._$gridContent.width()-17)))):(i._$gridHeaderContent.removeClass("e-scrollcss"),s.showTotalSummary&&i._$totalSummaryRowContainer&&i._$totalSummaryRowContainer.height()<=s.totalSummaryHeight&&(i._$totalSummaryRowContainer.removeClass("e-scrollcss"),i._$totalSummaryRowContainer.width(i._$gridContent.width()))),i.getScrollElement().hasClass("e-scroller")&&this._updateHeaderScrollLeft(this.getScrollElement().ejScroller("model.scrollLeft")),!this._frozenColumnsLength||(s=("auto"==s.sizeSettings.height?Z("#"+i._id+"movablee-table"):this.getContent().find("#e-movablecontent"+i._id)).height())!=this.getContent().find("#e-frozencontainer"+i._id).height()&&this.getContent().find("#e-frozencontainer"+i._id).height(s),t&&(i._$gridHeaderContent[0].style.width=i._gridWidth+"px",i._$gridHeaderContent.addClass("e-gridheader")),i._resizeFilteringElements())},_updatePagerIndex:function(){var e,t,i,s,n,a=this,r=a.model,o=[],l=-1,d=-1,h=r.updatedRecords;r.allowPaging&&(e=r.pageSettings.pageSize,r.pageSettings.pageSizeMode===J.TreeGrid.PageSizeMode.Root?(t=a._isHierarchyFiltering?a._filterParentRecords:r.parentRecords.slice(),s=i=-1,a._gridRecordsCount=t.length,n=0==a._isLoadonDemand?a._gridRecordsCount<1||0==e?0:Math.ceil(a._gridRecordsCount/e):Math.ceil(a._pageRecordCountOnDemand/e),a._currentPage()>n&&a._currentPage(n),i=a._currentPage()*e>a._gridRecordsCount?a._gridRecordsCount:a._currentPage()*e,s=a._gridRecordsCount<=e?0:a._currentPage()*e-e,l=h.indexOf(t[i]),i<s?s=i-e:a._gridRecordsCount==i&&(l=h.length),d=h.indexOf(t[s]),a._updatedPageData=a._isHierarchyFiltering&&a.model.enableVirtualization?a._updateFilterParent.slice(d,l):this.getExpandedRecords(h.slice(d,l))):(o=this.getExpandedRecords(h),r.enableVirtualization?a._gridRecordsCount=(a._isHierarchyFiltering?a._updateFilterParent:h).length:a._gridRecordsCount=o.length,h=a._gridRecordsCount<1||0==e?0:Math.ceil(a._gridRecordsCount/e),a._currentPage()>h&&a._currentPage(h),(l=a._currentPage()*e>a._gridRecordsCount?a._gridRecordsCount:a._currentPage()*e)<(d=a._gridRecordsCount<e?0:a._currentPage()*e-e)&&(d=l-e),a._updatedPageData=(a._isHierarchyFiltering&&a.model.enableVirtualization?a._updateFilterParent:o).slice(d,l)),a.updateHeight())},_updateCurrentViewData:function(e){var t,i,s=this,n=s.model,a={},r=!1;n.enableVirtualization?(n.allowPaging?(e!=J.TreeGrid.Actions.Scroll&&s._updatePagerIndex(),s.getVisibleRange(e),n.sizeSettings.height?n.currentViewData=s._updatedPageData.slice(s._visibleRange.top,s._visibleRange.bottom):n.currentViewData=s._isHierarchyFiltering&&s.model.enableVirtualization?s._updateFilterParent:s._updatedPageData):(s.getVisibleRange(e),t=s._isHierarchyFiltering&&s.model.enableVirtualization?s._updateFilterParent:s.model.updatedRecords,n.currentViewData=t.slice(s._visibleRange.top,s._visibleRange.bottom)),n.allowDragAndDrop&&s._dragMouseDown&&s._isTouchEvent&&(t=s.getUpdatedRecords().indexOf(s._draggedRecord),(s._visibleRange.top>t+1||s._visibleRange.bottom<t)&&(s._dummyElement||(i=s._draggedElement.clone(),s._draggedElement.before(i),s._draggedElement.hide(),Z(s.element).append(s._draggedElement),s._dummyElement=!0))),0!==s._vScrollDist&&(i=s._scrollTop-s._offset,e&&e==J.TreeGrid.Actions.Scroll?a.requestType=J.TreeGrid.Actions.Scroll:e&&e==J.TreeGrid.Actions.ExpandCollapse?a.requestType=J.TreeGrid.Actions.ExpandCollapse:a.requestType=J.TreeGrid.Actions.Refresh,"expandcollapse"!=e&&s.sendDataRenderingRequest(a),n.allowTextWrap&&n.enableVirtualization&&"scroll"==e&&(s._updateWrapRowHeights("total,header"),s._textWrapRowsDatas=s._getAvgTextWrapRowHeight("getAvgHeight")),r=!0,0<this._frozenColumnsLength?(s._$frozenTableContent.css({top:i}),s._$movableTableContent.css({top:i})):s._$tableContent.css({top:i}),n.allowTextWrap&&n.enableVirtualization&&(s._textWrapRowsDatas.isEnd&&!s._textWrapNoCalculate?(s.updateHeight(),s._textWrapNoCalculate=!0):parseInt(s._scrollTop)>=parseInt(s.getMaxScrollHeight()-10)&&!s._textWrapRowsDatas.isEnd&&!s._textWrapNoCalculate&&(s.updateHeight("extendHeight"),s._textWrapNoCalculate=!1),s._scrollTop>=s.getMaxScrollHeight()-10&&"expandcollapse"!=e&&(i=(e=s.getMaxScrollHeight())-(0<this._frozenColumnsLength?e+Z("#"+s._id+"frozene-table").height()-Z("#"+s._id+"e-gridcontainer").height():e+Z("#"+s._id+"e-table").height()-Z("#"+s._id+"e-gridcontainer").height()),0<this._frozenColumnsLength?(s._$frozenTableContent.css({top:i}),s._$movableTableContent.css({top:i})):s._$tableContent.css({top:i})),s._scrollTop<30&&(s._textWrapNoCalculate=!1))),s._prevRTop=s._visibleRange.top,s._prevRBottom=s._visibleRange.bottom):n.allowPaging?(s._updatePagerIndex(),n.currentViewData=s._updatedPageData):n.currentViewData=s.model.updatedRecords.slice(),s._isEnterKeyPressed&&(s._isEnterKeyPressed=!1,n.allowSelection&&n.editSettings.allowEditing&&(r||(s._cellEditingDetails.rowIndex+=1),s._rowSelectingEventTrigger(this.selectedRowIndex(),s._cellEditingDetails.rowIndex)||(s.selectRows(s._cellEditingDetails.rowIndex),s._rowSelectedEventTrigger(s._cellEditingDetails.rowIndex)),s.cellEdit(s._cellEditingDetails.rowIndex,s.model.columns[s._cellEditingDetails.columnIndex].field)))},_findFilteredParentRecords:function(e){for(var t=e.length,i=[],s=0;s<t;s++)e[s].hasChildRecords&&i.push(e[s]);return i},_getRowPosition:function(e){return Math.ceil(e/(this.model.rowHeight+this._detailsRowHeight))},_getMetaColGroup:function(){return this.getHeaderTable().find("colgroup").clone()},_getEmptyTbody:function(){var e=J.buildTag("td",this.model.emptyRecordText,{},{colSpan:this.model.columns.length-this._hiddenColumns.length}),t=document.createElement("tr");return t.className="e-emptyText",Z(t).height(30).append(e)},_addSortElementToColumn:function(e,t){this.model.isFromGantt?(i=J.TreeGrid.getColumnByMappingName(this.model.columns,e),J.isNullOrUndefined(i)&&(i=this.getColumnByField(e))):i=J.TreeGrid.getColumnByField(this.model.columns,e),i=Z.inArray(i,this.model.columns);var i=this.getHeaderTable().find("thead tr:not('.e-stackedHeaderRow')").find(".e-headercell").not(".e-detailheadercell").eq(i).find(".e-headercelldiv");i.find(".e-ascending,.e-descending").remove(),i.append(this._createSortElement().addClass("e-"+t).addClass("e-icon")),i.parent().attr("aria-sort",t)},_createSortElement:function(){return J.buildTag("span","&nbsp;")},_renderCellEditObject:function(e,t){var i=J.buildTag("form.e-treegridform#"+this._id+"EditForm","",{},{}),s=this._cellEditTemplate,n={},a=e.columnObject,r=a.field.split(".").join(""),o=e.value;"dropdownedit"==a.editType&&0==o&&(o=o.toString()),n[r]=o,this.getColumnIndexByField(a.field),t.empty(),t.addClass("e-validError"),s=s.find("#"+r+"_CellEdit").html(),"SELECT"==(s="predecessor"===a.field||"duration"===a.field?Z(Z.templates(s).render(e.data)):Z(Z.templates(s).render(n))).get(0).tagName&&(s.val(n[r]),null==s.val()&&s.val(s.find("option").first().val())),"INPUT"==s.get(0).tagName&&this.model.isFromGantt?"predecessor"!=a.field&&"duration"!=a.field&&s.val(n[r]):"INPUT"==s.get(0).tagName&&s.val(n[r]),i.append(s),t.append(i);i={};i.columnIndex=e.columnIndex,i.data=e.data.item,i.requestType="beginEdit",this._refreshEditForm(i),Z.isFunction(Z.validator)&&!Z.isEmptyObject(e.validationRules)&&(this._initValidator(),this.setValidation()),this.model.isEdit=!0},getIndexofresourceInfo:function(e){for(var t=this.model.resourceIdMapping,i=this._cellEditingDetails.data.resourceInfo,s=0,n=i&&i.length,a=[];s<n;s++)for(var r=0;r<e.length;r++)e[r][t]==i[s][t]&&a.push(r);return a},_refreshEditForm:function(e){var t,i,s,n=this,a=n.model;n.model.editSettings.allowEditing&&("dialogEditing"==n.model.editSettings.editMode||"batchediting"==a.editSettings.editMode.toLowerCase()&&"dialog"==a.editSettings.batchEditSettings.editMode)?(t=Z("#"+n._id+"EditFormDialog"),s=!(i="")):(t=Z("#"+n._id+"EditForm"),i=n.model.rowHeight-5);for(var r,o,l,d,h,c=!1,u=Z("#"+n._id+"EditFrozenForm").add(t).find("input,select,textarea"),p=0,m=u.length,a=n.model,g={};p<m;p++)if(h=(r=u.eq(p)).attr("data-edittype"),o=J.TreeGrid.getColumnByField(a.columns,r.prop("name")),J.isNullOrUndefined(o)&&("dialogEditing"==n.model.editSettings.editMode||"batchediting"==a.editSettings.editMode.toLowerCase()&&"dialog"==a.editSettings.batchEditSettings.editMode)){if(r.hasClass("e-btn")||"dialogEditing"==n.model.editSettings.editMode&&!J.isNullOrUndefined(a.editSettings.dialogEditorTemplateID)&&""!=a.editSettings.dialogEditorTemplateID)return;r.closest("tr").addClass("e-hide")}else{switch("dialogEditing"!=n.model.editSettings.editMode&&("batchediting"!=a.editSettings.editMode.toLowerCase()||"dialog"!=a.editSettings.batchEditSettings.editMode)||J.isNullOrUndefined(a.editSettings.dialogEditorTemplateID)||""==a.editSettings.dialogEditorTemplateID||(h=o.editType),x="100%",h){case J.TreeGrid.EditingType.Numeric:g={},v=r.val(),g.width="100%",g.locale=a.locale,g.height=i,g.showSpinButton=!0,g.cssClass=a.cssClass,v.length&&(g.value=parseFloat(v)),a.isFromGantt&&"status"===o.field&&(g.minValue=0,g.maxValue=100,g.decimalPlaces=0),J.isNullOrUndefined(o.editParams)||Z.extend(g,o.editParams),r.ejNumericTextbox(g),r.prop("name",r.prop("name").replace(n._id,""));break;case J.TreeGrid.EditingType.DatePicker:(g={}).width=x,g.height=i,g.locale=a.locale,g.cssClass=a.cssClass,g.dateFormat=a.dateFormat,g.enableStrictMode=!0,a.isFromGantt&&(g.startDay=a.weekStartDay),r.val().length&&(g.value=n.getDateFromFormat(r.val())),o.format!==P&&0<o.format.length&&(d=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(o.format),g.dateFormat=d[2],r.val().length&&(g.value=J.format(new Date(r.val()),g.dateFormat,g.locale),r.val(g.value))),J.isNullOrUndefined(o.editParams)||Z.extend(g,o.editParams),l=-1==a.dateFormat.toLowerCase().indexOf("hh")?(r.ejDatePicker(g),r.ejDatePicker("instance")):(r.ejDateTimePicker(g),r.ejDateTimePicker("instance")),Z(r).keydown(function(e){var t=Z("#e-"+r[0].id);0<t.length&&"none"!==t.css("display")&&13==e.keyCode&&l.option("value",J.parseDate(e.currentTarget.value,l.model.dateFormat))});break;case J.TreeGrid.EditingType.DateTimePicker:(g={}).width=x,g.height=i,g.locale=a.locale,g.cssClass=a.cssClass,g.displayDefaultDate=!0,g.dateTimeFormat=a.dateFormat,g.enableStrictMode=!0,a.isFromGantt&&(g.startDay=a.weekStartDay),r.val().length&&(g.value=n.getDateFromFormat(r.val())),o.format!==P&&0<o.format.length&&(d=new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(o.format),g.dateTimeFormat=d[2],r.val().length&&(g.value=J.format(new Date(r.val()),g.dateTimeFormat,g.locale),r.val(g.value))),J.isNullOrUndefined(o.editParams)||Z.extend(g,o.editParams),r.ejDateTimePicker(g);break;case J.TreeGrid.EditingType.Dropdown:var f,_,v=(n._isRowEdit,f=o.dropdownData,o.field);a.isFromGantt&&"resourceInfo"===v?((g={}).width=x,g.height=i,g.showCheckbox=!0,g.dataSource=f,g.fields={id:a.resourceIdMapping,text:a.resourceNameMapping,value:a.resourceNameMapping},g.selectedItems=n.getIndexofresourceInfo(f),J.isNullOrUndefined(o.editParams)||Z.extend(g,o.editParams),r.ejDropDownList(g)):((_={}).cssClass=a.cssClass,_.width=x,_.height=i,_.dataSource=f,J.isNullOrUndefined(o.editParams)||Z.extend(_,o.editParams),r.ejDropDownList(_),r.ejDropDownList("instance")._setValue(r.attr("data-cellvalue")));break;case J.TreeGrid.EditingType.String:n.model.editSettings.allowEditing&&"dialogEditing"==n.model.editSettings.editMode?r.outerWidth("100%").height(27):r.outerWidth(x).height(a.rowHeight-9),r.css({margin:"0px",padding:"1px"});break;case J.TreeGrid.EditingType.Boolean:n._checkboxSelection&&o.nonColumn?r[0].style.display="none":((_={}).cssClass=a.cssClass,_.size="small",J.isNullOrUndefined(o.editParams)||Z.extend(_,o.editParams),r.ejCheckBox(_),f=(b=r.parent(".e-chkbox-wrap")).parent("form"),s||(0<f.length?f:b).css("margin-left","45%"));break;case J.TreeGrid.EditingType.Maskedit:(_={}).locale=a.locale,_.cssClass=a.cssClass,_.width=x,_.height=i,J.isNullOrUndefined(o.editParams)||Z.extend(_,o.editParams),r.ejMaskEdit(_);break;case"edittemplate":var b={rowdata:e.data,column:o,element:r,requestType:e.requestType},x=o.editTemplate.write;J.isNullOrUndefined(e)||"add"!=e.requestType||(b.rowdata={}),"string"==typeof x&&(x=J.util.getObject(x,window)),x(b)}r.is(":disabled")||c||r.is(":hidden")&&"object"!=typeof(r.data("ejDropDownList")||r.data("ejNumericTextbox")||r.data("ejDatePicker")||r.data("ejCheckBox"))||(n._isEnterKeyPressed||o!=a.columns[e.columnIndex])&&(e.columnIndex&&-1!=e.columnIndex||n._isEnterKeyPressed)||(n._focusElements(r.closest("td")),c=!0)}},_getRecordIndex:function(){var e=this.model,t=e.allowPaging?this._updatedPageData:this.getExpandedRecords(e.updatedRecords);return this.getVisibleRange(),t.slice(this._visibleRange.top,this._visibleRange.bottom).indexOf(e.selectedItem)},_initValidator:function(){for(var i=this,e=0<this._frozenColumnsLength?this.element.find(".e-treegridform"):0<Z("#"+this._id+"EditForm").length?Z("#"+this._id+"EditForm"):Z("#"+this._id+"EditFormDialog"),t=0;t<e.length;t++)e.eq(t).validate({ignore:".e-hide",errorClass:"e-field-validation-error",errorElement:"div",wrapper:"div",errorPlacement:function(e,t){i._renderValidator(e,t)}})},_renderValidator:function(e,t){var i,s,n,a,r,o,l;t.is(":hidden")&&(t=t.siblings("input:visible")),t.length&&(i=this.model,l=t.closest(".e-rowcell"),s=Z(e).addClass("e-error"),n=J.buildTag("div.e-errortail"),(l=0==l.length?t.closest("td"):l).removeClass(".e-error"),l="dialogEditing"!=i.editSettings.editMode?(a=((r=this._getRecordIndex())+1)*i.rowHeight,i.enableVirtualization||(e=this.getExpandedRecords(i.updatedRecords),r=(i.allowPaging?this._updatedPageData:e).indexOf(i.selectedItem)),-1==r&&("bottom"==i.editSettings.rowPosition?r=i.updatedRecords.length-1:"top"==i.editSettings.rowPosition&&(r=0),a=(r+1)*i.rowHeight),this._viewPortHeight<a+45?(n.addClass("e-bottomarrow"),o=r*i.rowHeight-45,"append"):(n.addClass("e-toparrow"),o=(r+1)*i.rowHeight,"prepend")):(o=l.offset().top-Z("#"+this._id+"EditFormDialog").offset().top+l.parent()[0].offsetHeight,n.addClass("e-toparrow"),"prepend"),Z(s).css({top:o}),t.parent().hasClass("e-in-wrap")?s.insertAfter(t.closest(".e-widget")):s.insertAfter(t),s[l](n),s.show("slow"))},setValidation:function(){for(var e=this.model,t=0;t<this.model.columns.length;t++)if(!J.isNullOrUndefined(e.columns[t].validationRules)&&1==e.columns[t].visible)if(e.editSettings.editMode==J.TreeGrid.EditMode.RowEditing||e.editSettings.editMode==J.TreeGrid.EditMode.DialogEditing||0<this.element.find(".e-rowedit").length||0<this.element.find(".e-addedrow").length||e.editSettings.editMode==J.TreeGrid.EditMode.BatchEditing&&("dialog"==e.editSettings.batchEditSettings.editMode||"row"==e.editSettings.batchEditSettings.editMode))this.setValidationToField(e.columns[t].field,e.columns[t].validationRules);else if((e.editSettings.editMode==J.TreeGrid.EditMode.CellEditing||e.editSettings.editMode==J.TreeGrid.EditMode.BatchEditing&&"cell"==e.editSettings.batchEditSettings.editMode)&&this._cellEditingDetails.columnIndex==t)return void this.setValidationToField(e.columns[t].field,e.columns[t].validationRules)},setValidationToField:function(e,t){var i=e;J.isNullOrUndefined(e)||(i=i.replace(/[^a-z0-9\s_]/gi,""));var s=0<Z("#"+this._id+"EditForm").length?Z("#"+this._id+"EditForm"):Z("#"+this._id+"EditFormDialog"),n=this.getColumnByField(e);!J.isNullOrUndefined(n)&&n.isFrozen&&(s=0<Z("#"+this._id+"EditFrozenForm").length?Z("#"+this._id+"EditFrozenForm"):0<Z("#"+this._id+"EditFormDialog").length?Z("#"+this._id+"EditFormDialog"):Z("#"+this._id+"EditForm")),s=0<s.find("#"+this._id+i).length?s.find("#"+this._id+i):s.find("#"+i),t.regex&&(t[e+"regex"]=t.regex,delete t.regex,Z.validator.addMethod(i+"regex",function(e,t,i){return(i instanceof RegExp?i:new RegExp(i)).test(e)},J.getObject("messages.regex",t)||this.getColumnByField(e).headerText+" should match the given pattern")),s.attr("name")||s.attr("name",e),s.rules("add",t);i=(0<Z("#"+this._id+"EditForm").length?Z("#"+this._id+"EditForm"):Z("#"+this._id+"EditFormDialog")).validate();i.settings.messages[e]=i.settings.messages[e]||{},J.isNullOrUndefined(t.required)||(0==(t=(J.isNullOrUndefined(t.messages&&t.messages.required)?Z.validator:t).messages.required).indexOf("This field")&&(t=t.replace("This field",this.getColumnByField(e).headerText)),i.settings.messages[e].required=t,s.hasClass("e-datepicker")&&s.ejDatePicker({watermarkText:""}))},_focusElements:function(e){e.length&&(e.focus(),(t=e.children())[0]&&("select"==t[0].tagName.toLowerCase()||"input"==t[0].tagName.toLowerCase()?(t.focus().select(),t[0].focus()):t.find(".e-field.e-dropdownlist").length?t.find(".e-ddl").focus():t.find(".e-chkbox-wrap.e-widget").length?t.find(".e-chkbox-wrap.e-widget").focus():t.find(".e-datepicker").length<=0?t.find("input,select").select().focus():t.find("input,select").select()));var e=this.getScrollElement().children(".e-content").scrollLeft(),t=this.getScrollElement().ejScroller("option","scrollLeft");this.getScrollElement().hasClass("e-scroller")&&e!=t&&(J.isNullOrUndefined(e)||this.getScrollElement().ejScroller("option","scrollLeft",e)),this._updateHeaderScrollLeft(this.getScrollElement().children(".e-content").scrollLeft())},_focusElementsForRowEdit:function(e){e.length&&("select"==(e=e.children())[0].tagName.toLowerCase()||"input"==e[0].tagName.toLowerCase()?(e.focus().select(),e[0].focus()):e.find(".e-field.e-dropdownlist").length||e.hasClass("e-chkbox-wrap")?e[0].focus():e.find(".e-datepicker").length<=0?e.find("input:visible,select").first().select().focus():e.find("input,select").select())},_getHeightforResourceView:function(e){for(var t=0,i=0;i<e.length;i++)t+=this._getTemplateRowHeight(e[i]);return t},getRecordsHeight:function(){var e=this.model;return"resourceView"==e.viewType?e.enableVirtualization?this._getHeightforResourceView(e.updatedRecords):this._getHeightforResourceView(this.getExpandedRecords(e.updatedRecords)):e.enableVirtualization?this._isHierarchyFiltering&&this.model.enableVirtualization?this._updateFilterParent.length*e.rowHeight:this.getUpdatedRecords().length*e.rowHeight:e.rowHeight*(e.updatedRecords.length-this.getCollapsedRecordCount())},updateHeight:function(e){var t,i=this,s=this.model,n=0,a=0;if(i._isInExpandCollapseAll)return!0;i._$gridContainer&&i._$gridContent&&(n=!s.allowPaging||i.model.allowTextWrap&&s.enableVirtualization?s.enableVirtualization?"auto"==s.sizeSettings.height?i._getViewPortHeight():s.allowTextWrap?s.allowPaging&&!i._textWrapRowsDatas.isEnd?(i._textWrapRowsDatas=i._getAvgTextWrapRowHeight("getAvgHeight"),i._textWrapRowsDatas.avgHeight*i._updatedPageData.length):i._textWrapRowsDatas.isEnd?i._getAvgTextWrapRowHeight("updateHeight").height:"extendHeight"==e?Z("#"+i._id+"e-gridcontainer").height()+(i.model.updatedRecords.length-i._visibleRange.bottom)*i.model.rowHeight:(i._textWrapRowsDatas=i._getAvgTextWrapRowHeight("getAvgHeight"),"auto"==s.sizeSettings.height?i._getViewPortHeight():s.updatedRecords.length*i._textWrapRowsDatas.avgHeight):this.getRecordsHeight():"auto"==s.sizeSettings.height?i._getViewPortHeight():this.getRecordsHeight():"auto"==s.sizeSettings.height?i._getViewPortHeight():s.rowHeight*i._updatedPageData.length,s.showDetailsRow&&s.detailsTemplate&&!s.showDetailsRowInfoColumn&&"auto"!=s.sizeSettings.height&&(a=i._getExpandedDetailsRowHeight()),0!=(n+=a)||0!=s.currentViewData.length&&0!=s.flatRecords.length||(n=30),s.allowPaging&&!s.sizeSettings.height&&(s.allowTextWrap&&!s.enableVirtualization?0<i._$frozenTableContent.length?(t=i._$gridContainer.find("#e-frozencontentdiv"+i._id).outerHeight())<i._$gridContainer.find("#e-movablecontentdiv"+i._id).outerHeight()&&(t=i._$gridContainer.find("#e-movablecontentdiv"+i._id).outerHeight()):t=i._$gridContainer.find(".e-table").outerHeight():t=n,0<this._frozenColumnsLength?(i._$gridContent.css("height",t),s.allowPaging&&!s.sizeSettings.height&&i.getScrollElement().ejScroller("instance").option("height",t)):i.getScrollElement().hasClass("e-scroller")&&(i.getScrollElement().ejScroller("isHScroll")&&(t=n+i._scrollBarHeight),i.getScrollElement().ejScroller({height:t})),i._viewPortHeight=t,i._gridHeight=n+i._getNonContentHeight(),0<i._summaryRowsCount&&s.showTotalSummary&&(i._gridHeight+=i._$totalSummaryRowContainer.outerHeight()),i.element.height(i._gridHeight)),i.model.allowTextWrap&&!i.model.enableVirtualization?(i._$gridContainer.css({height:"auto",width:"auto"}),this._frozenColumnsLength&&i._$gridContainer.find("#e-movablecontentdiv"+i._id+",#e-frozencontentdiv"+i._id).css("height","auto")):(i._$gridContainer.css({height:n+"px",width:"auto"}),this._frozenColumnsLength&&i._$gridContainer.find("#e-movablecontentdiv"+i._id+",#e-frozencontentdiv"+i._id).css("height",n+"px")),"auto"==s.sizeSettings.height&&(i.getScrollElement().hasClass("e-scroller")&&i.getScrollElement().ejScroller("instance").option("height",0),i._updateContentHeight()),i.getScrollElement().hasClass("e-scroller")&&(i.getScrollElement().ejScroller("refresh"),i._textWrapRowsDatas.isEnd&&(i._textWrapRowsDatas.isEnd=!1),i._updateScrollCss()))},_updateFixedTableBorder:function(e){var t;"sorting"!=e&&"dragAndDrop"!=e&&(t=0<this._frozenColumnsLength?Z(this.getContentTable()[1]):Z(this.getContentTable()),!(e=this.model).isFromGantt&&t&&t.hasClass("e-fixed-border")&&(0<e.currentViewData.length&&!t.hasClass("e-tableLastCell")?t.addClass("e-tableLastCell"):0==e.currentViewData.length&&t.removeClass("e-tableLastCell")))},_setScrollTop:function(e){var t=this,i=this.model,s=0,n=t._scrollTop,a=i.rowHeight,r=i.currentViewData.length,o=i.isFromGantt?t._id.replace("ejTreeGrid",""):t._id,o=Z("#"+o).find(".e-ganttviewerbodyContianer");i.showDetailsRow&&i.detailsTemplate&&!i.showDetailsRowInfoColumn&&(a+=t._detailsRowHeight),i.allowPaging&&t._isNextPage&&(n=0,t._isNextPage=!1,t.getScrollElement().ejScroller("scrollY",n,!0)),0!==n&&(i.enableVirtualization?r*a<t._viewPortHeight&&("expandcollapse"==e&&i.allowTextWrap&&i.enableVirtualization?n=0:0<r&&(s=n-(t._viewPortHeight-(r-1)*a))<0&&(s=0),(i.isFromGantt?o:t.getScrollElement()).ejScroller("scrollY",s,!0)):i.isFromGantt?o.ejScroller("scrollY",n,!0):("delete"==e&&(s=t.getUpdatedRecords().length*a-t._viewPortHeight)<0&&(n=0),t.getScrollElement().ejScroller("scrollY",n,!0)))},rowHeightRefresh:function(){var e;this.model;this._updateWrapRowHeights(null,"virtualRefresh",null,"resize"),0<this._$frozenTableContent.length&&(this.getScrollElement().ejScroller("refresh"),e=this.getScrollElement().ejScroller("model.scrollTop"),this._getFrozenScrollElement().scrollTop(e))},_updateGridContentHeight:function(){var e=this,t=this.model;e._$totalSummaryRowContainer&&(e._$totalSummaryRowContainer.ejScroller({height:"auto"}),e._$footerContainer.css({overflow:"hidden"}),e._$totalSummaryRowContainer.find(".e-footercontainer").height()<t.totalSummaryHeight?e.isVScroll()&&e._$totalSummaryRowContainer.addClass("e-scrollcss"):(e._$totalSummaryRowContainer.removeClass("e-scrollcss"),e._$totalSummaryRowContainer.ejScroller({height:"auto"==t.sizeSettings.height?0:t.totalSummaryHeight}),e._$totalSummaryRowContainer.width(e._$gridContent.width()),"auto"!=t.sizeSettings.height&&e._$totalSummaryRowContainer.width("auto"))),t.allowPaging&&!t.sizeSettings.height?0<e._$frozenTableContent.length?(e._viewPortHeight=e._$gridContainer.find("#e-frozencontentdiv"+e._id).outerHeight())<e._$gridContainer.find("#e-movablecontentdiv"+e._id).outerHeight()&&(e._viewPortHeight=e._$gridContainer.find("#e-movablecontentdiv"+e._id).outerHeight()):e._viewPortHeight=e._$gridContainer.find(".e-table").outerHeight():(e._viewPortHeight=e._getViewPortHeight(),e._$totalSummaryRowContainer&&(e._viewPortHeight="auto"==t.sizeSettings.height?e._viewPortHeight:e._viewPortHeight-e._$totalSummaryRowContainer.outerHeight())),e._$gridContent.css({height:e._viewPortHeight+"px"}),e.getScrollElement().hasClass("e-scroller")&&e.getScrollElement().ejScroller("instance").option("height","auto"==t.sizeSettings.height?0:e._viewPortHeight),e._frozenColumnsLength&&("auto"==t.sizeSettings.height&&e._updateContentHeight(),(t=this.getContent().find("#e-movablecontent"+e._id).height())!=this.getContent().find("#e-frozencontainer"+e._id).height()&&(this.getContent().find("#e-frozencontainer"+e._id).height(t),e.getScrollElement().ejScroller("refresh"))),e._updateScrollCss()},_updateContentHeight:function(){var e=this,t=e._getViewPortHeight();1==Z("#"+e._id+"e-gridcontent").find(".e-hscrollbar").length?(Z("#e-movablecontainer"+e._id).css("height",t),Z("#e-movablecontent"+e._id).css("height",t-18),Z("#e-movablecontentdiv"+e._id).css("height",t-18)):(Z("#e-movablecontainer"+e._id).css("height",t),Z("#e-movablecontent"+e._id).css("height",t)),Z("#"+e._id+"e-gridcontent").css("height",t),Z("#"+e._id+"e-gridcontainer").css("height",t),Z("#"+e._id+"e-table").css("top",0),e.getScrollElement().ejScroller("refresh"),e._updateScrollCss()},getChildCount:function(e,t){var i;if(!e.hasChildRecords)return 0;for(var s=0;s<e.childRecords.length;s++)t++,(i=e.childRecords[s]).hasChildRecords&&(t=this.getChildCount(i,t));return t},_updateFilteredRecords:function(e,t){var i,s=this,n=0,a=e.length,r=s.model.enableVirtualization;for(s._filteredData=e,s._flatFilteredRecords=[],s._filteredRecords=[],s._filteredGanttRecords=[],s._filterParentRecords=[],s._updateFilterParent=[];n<a;n++)i=e[n],(t||"child"!=s.model.filterSettings.filterHierarchyMode&&"none"!=s.model.filterSettings.filterHierarchyMode)&&(!t||"child"!=s.model.searchSettings.searchHierarchyMode&&"none"!=s.model.searchSettings.searchHierarchyMode)||(s._isHierarchyFiltering=!0),s._addParentRecord(i,t),this.model.isFromGantt||(i.hasChildRecords&&0<i.childRecords.length&&(this._checkChildExsist(i,e,t)?i.hasFilteredChildRecords=!0:i.hasFilteredChildRecords=!1),i.parentItem&&(i.parentItem.hasFilteredChildRecords=!0));0!=e.length&&s._isHierarchyFiltering&&s._updateFilterLevel(),s._filteredRecords=r?s._isHierarchyFiltering?s._flatFilteredRecords:s.getExpandedRecords(s._flatFilteredRecords):s._flatFilteredRecords.slice(),0!=e.length&&s._isHierarchyFiltering&&s._updateFilterExpandState(s._filteredRecords)},_updateFilterExpandState:function(e){for(var t=e.length,i=0;i<t;i++)-1==Z.inArray(e[i].parentItem,this._flatFilteredRecords)||e[i].parentItem.expanded&&-1!=Z.inArray(e[i].parentItem,this._updateFilterParent)?(this._updateFilterParent.push(e[i]),e[i].isDisplay=!0):e[i].isDisplay&&(e[i].isDisplay=!1)},_updateFilterLevel:function(){for(var e=this._flatFilteredRecords,t=this._flatFilteredRecords.length,i=0;i<t;i++)-1!=Z.inArray(e[i].parentItem,this._flatFilteredRecords)?e[i].filterLevel=e[i].parentItem.filterLevel+1:(e[i].filterLevel=0,this._filterParentRecords.push(e[i]))},_checkChildExsist:function(e,t,i){for(var s=e.childRecords,n=s.length,a=!1,r=0;r<n;r++)if(!i&&("child"==this.model.filterSettings.filterHierarchyMode||"both"==this.model.filterSettings.filterHierarchyMode)||i&&("child"==this.model.searchSettings.searchHierarchyMode||"both"==this.model.searchSettings.searchHierarchyMode)){if(-1!=Z.inArray(s[r],this._flatFilteredRecords)){a=!0;break}s[r].isSummaryRow||this._flatFilteredRecords.push(s[r]),a=!0,s[r].hasChildRecords&&(a=this._checkChildExsist(s[r],t,i))}else{if(-1!=Z.inArray(s[r],t)){a=!0;break}s[r].hasChildRecords&&(a=this._checkChildExsist(s[r],t,i))}return a},_clearFilterLevel:function(e){for(var t,i=0,s=e.length;i<s;i++)!(t=e[i]).filterLevel&&0!=t.filterLevel||(t.hasChildRecords&&!t.hasFilteredChildRecords&&(t.hasFilteredChildRecords=!0),delete t.filterLevel),t.isDisplay&&delete t.isDisplay,this._isHierarchyFiltering=!1},_updateHasFilteredChildRecordsStatus:function(e){for(var t,i=0,s=e.length;i<s;i++)(t=e[i]).hasChildRecords&&!t.hasFilteredChildRecords&&(t.hasFilteredChildRecords=!0),0<t.filterLevel&&delete t.filterLevel},_addParentRecord:function(e,t){var i=this;"none"==i.model.filterSettings.filterHierarchyMode&&!t||"none"==i.model.searchSettings.searchHierarchyMode&&t?null==e.parentItem?-1!=Z.inArray(e,i._filteredData)&&-1==Z.inArray(e,i._flatFilteredRecords)&&(i._flatFilteredRecords.push(e),e.hasFilteredChildRecords=!0):(i._addParentRecord(e.parentItem,t),-1!=Z.inArray(e.parentItem,i._filteredData)||-1!=Z.inArray(e.parentItem,i._flatFilteredRecords)?-1==Z.inArray(e,i._flatFilteredRecords)&&i._flatFilteredRecords.push(e):-1!=Z.inArray(e,i._filteredData)&&-1==Z.inArray(e,i._flatFilteredRecords)&&i._flatFilteredRecords.push(e)):(!e.parentItem||("child"==i.model.filterSettings.filterHierarchyMode&&!t||"child"==i.model.searchSettings.searchHierarchyMode&&t)&&-1==Z.inArray(e.parentItem,i._filteredData)||i._addParentRecord(e.parentItem,t),-1===Z.inArray(e,i._flatFilteredRecords)&&i._flatFilteredRecords.push(e))},_updateExpandCollapseForSortedRecords:function(e,t){var i,s=0,n=this._sortedRecords.length,a=this._sortedRecords.indexOf(e);if(t)this._addNestedSortRecords(e,a);else{for(var r=0,s=a+1;s<n&&(i=this._sortedRecords[s]).level!==e.level;s++)this.getExpandStatus(i)||r++;this._sortedRecords.splice(a+1,r)}},_addNestedSortRecords:function(e,t){var i=this.model.sortSettings.sortedColumns;if(i.length){r=i.length-1,this._queryManagar.queries=[];for(var s=r;0<=s;s--)this._queryManagar.sortBy(i[s].field,i[s].direction)}if(e.hasChildRecords)for(var n,a,r=(a=J.DataManager(e.childRecords).executeLocal(this._queryManagar).result).length,o=0;o<r;o++)n=a[o],this._filteredRecords.length&&-1===Z.inArray(n,this._filteredRecords)||this._sortedRecords.splice(++t,0,n),n.hasChildRecords&&n.expanded&&this._addNestedSortRecords(n,t)},updateEditSettings:function(e){e&&(e.editMode&&("normal"===this.model.editSettings.editMode&&"cellEditing"===e.editMode?(this.model.editSettings.editMode=e.editMode,this._processEditing()):this.model.editSettings.editMode=e.editMode),J.isNullOrUndefined(e.allowAdding)||(this.model.editSettings.allowAdding=e.allowAdding),J.isNullOrUndefined(e.allowEditing)||(this.model.editSettings.allowEditing=e.allowEditing),J.isNullOrUndefined(e.allowDeleting)||(this.model.editSettings.allowDeleting=e.allowDeleting),J.isNullOrUndefined(e.beginEditAction)||(this.model.editSettings.beginEditAction=e.beginEditAction),this._enableEditingEvents())},updateAltRow:function(){for(var e,t=0,i=this.model.updatedRecords,s=i.length,n=!0,t=0;t<s;t++)!(e=i[t]).isSummaryRow&&this.getExpandStatus(e)&&(e.isAltRow=!n,n=e.isAltRow)},_getFilteredChildRecordsCount:function(e){for(var t,i=this.model,s=e&&e.childRecords&&e.childRecords.length,n=0,n=0;n<s;n++)t=e.childRecords[n],i.enableVirtualization&&!this.getExpandStatus(t)||this._removedCount++,t.childRecords&&this._getFilteredChildRecordsCount(t);return this._removedCount},_sortingRecords:function(e){var t=this,i=t.model,s=i.sortSettings.sortedColumns;if(t._queryManagar.queries=[],s.length)for(var n=s.length-1;0<=n;n--){var a=i.isFromGantt?(a=J.TreeGrid.getColumnByMappingName(t.model.columns,s[n].field),J.isNullOrUndefined(a)&&(a=this.getColumnByField(s[n].field)),a.field):s[n].field;i.isFromGantt&&("resourceInfo"===a?a="resourceNames":"predecessor"===a&&(a="predecessorsName")),t._queryManagar.sortBy(a,s[n].direction)}var r=new J.DataManager(i.parentRecords).executeLocal(t._queryManagar).result;return t._sortedRecords=[],t._storedIndex=-1,t._rowIndex=-1,t._createSortedRecords(r),t._tempsortedrecords=t._sortedRecords,t.model.updatedRecords=t._sortedRecords,t._isHierarchyFiltering&&(t._updateFilterParent=t._sortedRecords),i.allowPaging&&i.pageSettings.pageSizeMode===J.TreeGrid.PageSizeMode.Root&&(i.parentRecords=t._getParentRecords(t.model.updatedRecords,t,!0)),!0},_createSortedRecords:function(e){var s=this,n=s.model,a=s._sortedRecords,r=s.model.enableAltRow,n=this.model;e=s._spliceSummaryRows(e),Z.each(e,function(e,t){var i;t.isSummaryRow?(i=t.parentItem.childRecords.indexOf(t),t.parentItem.childRecords.splice(i,1)):((!(0<s._filterString.length||0<s._searchString.length||0<n.filterSettings.filteredColumns.length)||0<s._filteredRecords.length&&-1!==s._filteredRecords.indexOf(t))&&(s._storedIndex++,s._rowIndex++,r&&(t.isAltRow=s._rowIndex%2!=0),a[s._storedIndex]=t),t.hasChildRecords&&t.expanded?(t.childRecords=s._spliceSummaryRows(t.childRecords),i=J.DataManager(t.childRecords).executeLocal(s._queryManagar).result,s._createSortedRecords(i)):!t.hasChildRecords||t.expanded||n.enableVirtualization||(t.childRecords=s._spliceSummaryRows(t.childRecords),s._setChildRecords(t,a)))})},_setChildRecords:function(e,t){for(var i=this,s=i.model,n=i.model.enableAltRow,a=e.childRecords.length,r=J.DataManager(e.childRecords).executeLocal(i._queryManagar).result,o=0;o<a;o++)(!(0<i._filterString.length||0<i._searchString.length||0<s.filterSettings.filteredColumns.length)||0<i._filteredRecords.length&&-1!==i._filteredRecords.indexOf(r[o]))&&(i._storedIndex++,n&&(r[o].isAltRow=i._storedIndex%2!=0),t[i._storedIndex]=r[o],r[o].hasChildRecords&&this._setChildRecords(r[o],t))},_updateSortedRecords:function(e){for(var t=0,i=e.length,s=this.model;t<i;t++){var n=e[t];s.enableVirtualization||(0<this._filteredRecords.length?-1!==Z.inArray(n,this._filteredRecords)&&-1===Z.inArray(n,this._sortedRecords)&&this._sortedRecords.push(n):-1===Z.inArray(n,this._sortedRecords)&&this._sortedRecords.push(n),n.hasChildRecords&&0<n.childRecords.length&&(n=J.DataManager(n.childRecords).executeLocal(this._queryManagar).result,this._updateSortedRecords(n)))}},_removeSortElementFromColumn:function(e){e=J.TreeGrid.getColumnByField(this.model.columns,e),e=Z.inArray(e,this.model.columns),e=this.getHeaderTable().find("thead").find(".e-headercell").eq(e).find(".e-headercelldiv");e.find(".ascending,.descending").remove(),e.parent().removeAttr("aria-sort")},_addEmptyColumntoGrid:function(){Z(this.element).find(".e-gridheadercontainer table colgroup").append(J.buildTag("col","",{width:"auto"},{})),this._$gridContainer.find("table colgroup").append(J.buildTag("col","",{width:"auto"},{})),Z(this.element).find(".e-gridheadercontainer table thead tr").append(J.buildTag("th.e-headercell"))},updateScrollTop:function(e,t){var i={};i.requestType=J.TreeGrid.Actions.Scroll,i.delta=e,!this.getScrollElement().ejScroller("isHScroll")&&this.model.isFromGantt?this._$gridContent.scrollTop(e):this._$gridContent.scrollTop(0),this.getScrollElement().ejScroller("scrollY",e,!0),this.model.isFromGantt&&!t?(this._completeAction(i),this._focusTreeGridElement()):this._isFromChart=!1},_selectNextCell:function(e,t){var i=this,s=i.model,n=s.columns,a=n.length,r=Z("#"+i._id+"EditForm"),o=i.getUpdatedRecords(),s=s.allowPaging?o:i.getExpandedRecords(s.updatedRecords);switch(i._isShiftKeyNavigation=!1,e){case"right":if(i._focusingRowIndex>=o.length-1&&i._cellIndex>=a-1||-1==i._focusingRowIndex||-1==i._cellIndex)return void i.element[0].focus();if(i._cellIndex+=1,i._cellIndex==a){i._cellIndex=0;var l,d=o[i._rowIndexOfLastSelectedCell],h=s.indexOf(d);if((l=s[h+1])&&l.isSummaryRow&&(l=i._getNextRecord(h+1,s)),!l)return;i._focusingRowIndex=o.indexOf(l)}if(i._focusingRowIndex>=o.length)return;n[i._cellIndex].visible&&n[i._cellIndex].allowCellSelection||!(r.length<=0)||(i._cellIndex=i.getUpNextVisibleColumnIndex(i._cellIndex,t)),0<r.length&&n[i._cellEditingDetails.columnIndex].allowCellSelection&&(i._cellIndex=i._cellEditingDetails.columnIndex);var c={rowIndex:i._focusingRowIndex,cellIndex:i._cellIndex};i.selectCells([c]),i.updateScrollBar();break;case"left":if(--i._cellIndex,a=n.length,i._cellIndex<0){i._cellIndex=a-1;d=o[i._rowIndexOfLastSelectedCell];if(h=s.indexOf(d),(l=s[h-1])&&l.isSummaryRow&&(l=i._getNextRecord(h-1,s,"upArrow")),!l)return;i._focusingRowIndex=o.indexOf(l)}if(i._focusingRowIndex<0)return;i._focusingRowIndex>=o.length&&(i._focusingRowIndex=o.length-1),n[i._cellIndex].visible&&n[i._cellIndex].allowCellSelection||!(r.length<=0)||(i._cellIndex=i.getPreviousVisibleColumnIndex(i._cellIndex,t)),0<r.length&&n[i._cellEditingDetails.columnIndex].allowCellSelection&&(i._cellIndex=i._cellEditingDetails.columnIndex);c={rowIndex:i._focusingRowIndex,cellIndex:i._cellIndex};i.selectCells([c]),i.updateScrollBar()}},_moveCurrentCell:function(e){var t,i=this,s=i._cellEditingDetails.rowIndex,n=i._cellEditingDetails.columnIndex,a=i.model,r=i.getUpdatedRecords();if(-1==s&&-1==n)return!1;switch(i.model.isEdit&&(i.saveCell(),i.model.isEdit=!1),a.enableVirtualization&&(t=a.currentViewData[s],i._cellEditingDetails.rowIndex=s=r.indexOf(t)),e){case"right":var o,l=(c=a.columns).length,d=i.getHiddenColumns(),h=Z.extend([],c);if(d&&d.forEach(function(e){h.splice(h.indexOf(e),1)}),g=h.indexOf(c[n]),m=h.length,s==r.length-1&&g==m-1)return!0;if(g==m-1){for(o=0;!c[o].visible;)o++;if(i._cellEditingDetails.columnIndex=o,i._getNextRow(e,s,i))return!0}else{for(o=n+1;!c[o].visible;)o++;i._cellEditingDetails.columnIndex=o}for(;0==a.columns[o].allowEditing||!c[o].visible;)if(o+1!=a.columns.length)i._cellEditingDetails.columnIndex=++o;else if(i._cellEditingDetails.columnIndex=o=0,i._getNextRow(e,s,i))return!0;i.updateScrollBar(),i.cellEdit(i._cellEditingDetails.rowIndex,a.columns[i._cellEditingDetails.columnIndex].field),i._editAddTools();break;case"left":var c,u,l=(c=a.columns).length,d=i.getHiddenColumns(),h=Z.extend([],c);if(d&&d.forEach(function(e){h.splice(h.indexOf(e),1)}),g=h.indexOf(c[n]),m=h.length,0==s&&0==g)return!0;if(0==g){for(u=a.columns.length-1;!c[u].visible;)u--;if(i._cellEditingDetails.columnIndex=u,i._getNextRow(e,s,i))return!0}else{for(u=n-1;!c[u].visible;)u--;i._cellEditingDetails.columnIndex=u}for(;0==a.columns[u].allowEditing||!c[u].visible;)if(u-1!=-1)i._cellEditingDetails.columnIndex=--u;else if(i._cellEditingDetails.columnIndex=u=l-1,i._getNextRow(e,s,i))return!0;i.updateScrollBar(),i.cellEdit(i._cellEditingDetails.rowIndex,a.columns[i._cellEditingDetails.columnIndex].field),i._editAddTools();break;case"up":if(0==s)return!0;i._cellEditingDetails.rowIndex=s-1,i.selectRows(i._cellEditingDetails.rowIndex),i._rowSelectedEventTrigger(i._cellEditingDetails.rowIndex),i.cellEdit(i._cellEditingDetails.rowIndex,a.columns[i._cellEditingDetails.columnIndex].field);break;case"down":if(s+1==r.length&&(i._focusTreeGridElement(),i._isEnterKeyPressed=!0),a.showSummaryRow&&s+1==r.length-a.summaryRows.length&&(i._isEnterKeyPressed=!0),i._isEnterKeyPressed)i._isEnterKeyPressed=!1;else{if(r.length>s+1)if(a.enableVirtualization){if((p=r[s+1])&&p.isSummaryRow&&(p=i._getNextRecord(s+1,r)),-1==(f=r.indexOf(p)))return!0;i._cellEditingDetails.rowIndex=f}else{var p,m=r[s],g=a.allowPaging?r:i.getExpandedRecords(a.updatedRecords);(p=g[g.indexOf(m)+1])&&p.isSummaryRow&&(p=i._getNextRecord(s+1,g));var f=r.indexOf(p);if(s==g.length-1&&n==a.columns.length-1||-1==f)return!0;i._cellEditingDetails.rowIndex=f}i._rowSelectingEventTrigger(i.selectedRowIndex(),i._cellEditingDetails.rowIndex)||(i.selectRows(i._cellEditingDetails.rowIndex),i._rowSelectedEventTrigger(i._cellEditingDetails.rowIndex)),i.updateScrollBar();f={};f.requestType=J.TreeGrid.Actions.Scroll,f.delta=i._$gridContent.children(".e-content").scrollTop(),i._trigger("actionComplete",f),i.cellEdit(i._cellEditingDetails.rowIndex,a.columns[i._cellEditingDetails.columnIndex].field),i._editAddTools()}}return!1},_getNextRecord:function(e,t,i){for(var s;s=t[e],"upArrow"==i||"lastRowSelection"==i||"bottomRowSelection"==i||"child"==i||"above"==i?e--:e++,s&&s.isSummaryRow;);return s},_getNextRow:function(e,t,i){var s,n=i.model,a=i.getUpdatedRecords(),r="right"==e?1:-1;if(n.enableVirtualization){if((o=a[t+r])&&o.isSummaryRow&&(l=0<r?"":"lastRowSelection",o=i._getNextRecord(t+r,a,l)),n.allowPaging&&o&&((s=a.indexOf(o))<0&&1==r?i.gotoPage(i._currentPage()+1):s<0&&-1==r&&i.gotoPage(i._currentPage()-1)),-1==(s=a.indexOf(o)))return!0;i._cellEditingDetails.rowIndex=s}else{var o,l,d=a[t],e=n.allowPaging?a:i.getExpandedRecords(n.updatedRecords);if((o=e[e.indexOf(d)+r])&&o.isSummaryRow&&(l=0<r?"":"lastRowSelection",o=i._getNextRecord(t+r,e,l)),n.allowPaging&&o&&((s=a.indexOf(o))<0&&1==r?i.gotoPage(i._currentPage()+1):s<0&&-1==r&&i.gotoPage(i._currentPage()-1)),-1==(s=a.indexOf(o)))return!0;i._cellEditingDetails.rowIndex=s}n.allowSelection&&"cell"==n.selectionSettings.selectionMode?(n.selectedItem=a[i._cellEditingDetails.rowIndex],i._rowIndexOfLastSelectedCell=i._cellEditingDetails.rowIndex):i._rowSelectingEventTrigger(i.selectedRowIndex(),i._cellEditingDetails.rowIndex)||(i.selectRows(i._cellEditingDetails.rowIndex),i._rowSelectedEventTrigger(i._cellEditingDetails.rowIndex))},_findColumnsWidth:function(e){for(var t=this.model.columns.length,i=this.getHeaderTable().find("colgroup").find("col"),s=0;s<t;s++)this.columnsWidthCollection[s]=i.eq(s).width()},_calculateWidth:function(){for(var e=this.getHeaderTable().find("colgroup").find("col"),t=0,i=0;i<e.length;i++)t+=e.eq(i).width();return t},getScrollObject:function(){return this.getScrollElement().data("ejScroller")},_updateElementHeight:function(){this._calculateDimensions(),this.updateViewPortHeight()},getScrollElement:function(){return 0<this._frozenColumnsLength?this.element.find("#e-movablecontainer"+this._id):this._$gridContent},_getFrozenScrollElement:function(){return 0<this._frozenColumnsLength?this.element.find("#e-frozencontainer"+this._id):null},_getFrozenColumnWidth:function(e){var t=0,e=J.isNullOrUndefined(e)?this._frozenColumnsLength:e,i=J.isNullOrUndefined(e)?this._frozenColumns:this.model.columns;if(0<e)for(var s=0;s<e;s++)1==i[s].visible&&(t+=i[s]?this.columnsWidthCollection[s]:0);return t},_renderScroller:function(e){var t,i=this,s=i.model,n=(s.flatRecords.length,s.rowHeight,i._viewPortHeight),a=!1;s.allowPaging&&!s.sizeSettings.height&&s.allowTextWrap&&!s.enableVirtualization&&(0<i._$frozenTableContent.length?(n=i._$gridContainer.find("#e-frozencontentdiv"+i._id).outerHeight())<i._$gridContainer.find("#e-movablecontentdiv"+i._id).outerHeight()&&(n=i._$gridContainer.find("#e-movablecontentdiv"+i._id).outerHeight()):n=i._$gridContainer.find(".e-table").outerHeight()),!i._$gridContent.hasClass("e-scroller")||s.allowPaging&&!s.sizeSettings.height?(t=i._gridHeight?n:"auto",n=this._gridWidth,0<this._frozenColumnsLength&&(i._$gridContent.css("width",n-i._totalBorderWidth),n=n-this._getFrozenColumnWidth()-1),s.isFromGantt,this.mobileDevice()&&!s.isFromGantt&&(a=!0,i._scrollBarHeight=10),i.getScrollElement().ejScroller({enableTouchScroll:!1,autoHide:a,scrollerSize:i._scrollBarHeight,height:i.model.isFromGantt||"auto"==s.sizeSettings.height?0:t,width:i.model.isFromGantt?n:n-i._totalBorderWidth,scroll:Z.proxy(i._onScroll,i)})):i.getScrollElement().ejScroller("refresh"),i.getScrollElement().ejScroller("model.keyConfigs",{up:"",down:"",left:"",right:""}),J.isNullOrUndefined(e)&&i._updateScrollCss();e=i.getScrollElement().ejScroller("isHScroll");s.allowPaging&&!s.sizeSettings.height&&e&&(e=t+i._scrollBarHeight,i.getScrollElement().ejScroller({height:e}),i.getScrollElement().ejScroller("refresh")),!this.mobileDevice()&&"safari"==this.getBrowserDetails().browser&&0<this._frozenColumnsLength&&(this.getHeaderContent().find("#e-movableheader"+i._id).add(this.getContent().find("#e-movablecontainer"+i._id)).css("margin-left","auto"),this._$totalSummaryRowContainer&&this._$totalSummaryRowContainer.find("#e-movablefooter"+i._id).css("margin-left","auto")),0<this._frozenColumnsLength&&(i._$gridContent.height(t),i.getContent().find("#e-frozencontainer"+i._id).height(i.getContent().find("#e-movablecontent"+i._id).height()))},_destroy:function(){var e=this,t=this.model,i=t.columns;if(e.element.off(),e._off(e.element,"click",e._onClick),e._off(e.element,"keydown",e._keyDown),e._off(e.element,"click","#"+e._id+"e-gridheader",e._onHeaderClick),e._off(e.element,"mousedown touchstart","#"+e._id+"e-gridheader",e._headerMouseDown),e._off(Z(document),"mousedown touchstart",e._mouseDownHandler),e._off(e.element,"mousedown touchstart",".e-gridcontent",e._contentMouseDown),e._off(e.element,"click",e._onRecordClick),e._off(e.element,"dblclick",".e-gridcontent > div",e._onRecordDoubleClick),"immediate"==t.filterSettings.filterBarMode&&(e._off(e.element,"keyup",".e-filterbarcell input",e._filterBarHandler),e._off(e.element,"click",".e-filterbarcell .e-checkbox")._off(e.element,"click",".e-filterbarcell .e-checkbox",e._filterBarHandler)),J.isTouchDevice()&&this.model.allowPaging&&e._off(this.element,"swipeleft swiperight",".e-gridcontent div > .e-table",Z.proxy(this._swipeAction,this)),e._off(e.element,"mousemove",e._mouseMove),e._off(e.element,"touchmove",e._mouseMove),e._off(e.element,"focus click",".e-filterbarcell input",e._filterBarClose),e._off(e.element,"click",".e-filterbarcell .e-cancel",e._filterBarClose),!e.model.showGridCellTooltip||e.model.showGridExpandCellTooltip||"msie"==J.browserInfo().name?e._off(e.element,"mouseenter",".e-rowcell",e._mouseHover):e._off(e.element,"mousemove",".e-rowcell",e._mouseHover),e.model.showGridCellTooltip&&("msie"==J.browserInfo().name?e._off(e.element,"mouseenter",".e-headercelldiv",e._headermouseHover):e._off(e.element,"mousemove",".e-headercelldiv",e._headermouseHover)),e._off(e.element,"mouseleave",".e-rowcell",e._cellMouseLeave),e._off(e.element,"mouseleave",e._cellMouseLeave),e._off(e.element,"mouseleave",".e-headercelldiv",e._headerMouseLeave),e._off(e.element,"mouseleave",e._headerMouseLeave),(t.isFromGantt||this._frozenColumnsLength)&&e._off(e.element,"mousewheel DOMMouseScroll",e._mouseWheel),t.enableResize&&t.isResponsive&&!t.isFromGantt&&e._off(Z(window),"resize",e._windowResize),J.isTouchDevice()?e._off(e.element,"doubletap ",".e-gridcontent",e._editdblClickHandler):e._off(e.element,"dblclick ",".e-gridcontent",e._editdblClickHandler),t.contextMenuSettings.showContextMenu&&e._off(e.element,"keyup contextmenu taphold",this._preventContextMenu),e.getScrollElement().ejScroller("content").stop(!0),this._clearColumnMenu(),this._clearContextMenu(),this._removeDetailsRow(),Z("#"+this._id+"_toolbarItems_Main").remove(),e._columnRenameDialog&&(Z("#"+e._columnRenameDialog.attr("id")+"_wrapper").clearQueue(),Z("#"+e._columnRenameDialog.attr("id")+"_wrapper").stop(),e._columnRenameDialog.data("ejDialog")&&e._columnRenameDialog.data("ejDialog").destroy(),Z("#"+e._columnRenameDialog.attr("id")+"_wrapper").remove(),Z("#"+e._id+"ColumnRenameDialog").remove()),this.model.showColumnChooser&&(Z("#"+e._id+"ccDiv_wrapper").clearQueue(),Z("#"+e._id+"ccDiv_wrapper").stop(),Z("#"+this._id+"ccDiv").data("ejDialog")&&Z("#"+this._id+"ccDiv").data("ejDialog").destroy(),Z("#"+e._id+"ccDiv_wrapper").remove(),Z("#"+this._id+"ccDiv").remove()),e._updateConfirmDialog&&(Z("#"+e._updateConfirmDialog.attr("id")+"_wrapper").clearQueue(),Z("#"+e._updateConfirmDialog.attr("id")+"_wrapper").stop(),e._updateConfirmDialog.data("ejDialog")&&e._updateConfirmDialog.data("ejDialog").destroy(),Z("#"+e._updateConfirmDialog.attr("id")+"_wrapper").remove(),Z("#"+e._id+"ConfirmDialog").remove()),e._confirmDialog&&(Z("#"+e._confirmDialog.attr("id")+"_wrapper").clearQueue(),Z("#"+e._confirmDialog.attr("id")+"_wrapper").stop(),e._confirmDialog.data("ejDialog")&&e._confirmDialog.data("ejDialog").destroy(),Z("#"+e._confirmDialog.attr("id")+"_wrapper").remove(),Z("#"+e._id+"_ConfirmDialog").remove()),0<Z("#"+e._id+"_dialogColumnAdd_wrapper").length&&(Z("#"+e._id+"_dialogColumnAdd_wrapper").clearQueue(),Z("#"+e._id+"_dialogColumnAdd_wrapper").stop(),Z("#"+e._id+"_dialogColumnAdd").find(".e-datepicker").ejDatePicker("destroy"),Z("#"+e._id+"_dialogColumnAdd").find(".e-datetimepicker").ejDateTimePicker("destroy"),Z("#"+e._id+"_dialogColumnAdd").find(".e-numerictextbox").ejNumericTextbox("destroy"),Z("#"+e._id+"_dialogColumnAdd").find(".e-dropdownlist").ejDropDownList("destroy"),Z("#"+e._id+"_dialogColumnAdd").find(".e-treegrid").ejTreeGrid("destroy"),Z("#"+e._id+"_dialogColumnAdd").data("ejDialog")&&Z("#"+e._id+"_dialogColumnAdd").data("ejDialog").destroy(),Z("#"+e._id+"_dialogColumnAdd_wrapper").remove(),Z("#"+e._id+"_dialogColumnAdd").remove()),t.allowFiltering&&!t.isFromGantt)for(var s=0;s<i.length;s++){var n=Z("#"+this._id+"_"+i[s].field.split(".").join("")+"_filterbarcell");n.data("ejWidgets")&&Z(n).data(Z(n).data("ejWidgets")[0]).destroy()}if(e.model.allowFiltering&&"menu"==e.model.filterSettings.filterType)for(var a,r,o=e._renderedFilterMenuDialog,l=0;l<o.length;l++)o[l]&&(a=o[l].indexOf("edit"),r=o[l],r=-1!=a?(a=r.slice(0,a)).charAt(0).toUpperCase()+a.slice(1):r.charAt(0).toUpperCase()+r.slice(1)),"String"==r?Z("#"+this._id+"filter"+r+"MenuDiv").find(".e-autocomplete").ejAutocomplete("destroy"):"Datepicker"==r?Z("#"+this._id+"filter"+r+"MenuDiv").find(".e-datepicker").ejDatePicker("destroy"):"Datetimepicker"==r?Z("#"+this._id+"filter"+r+"MenuDiv").find(".e-datetimepicker").ejDateTimePicker("destroy"):"Numeric"==r&&Z("#"+this._id+"filter"+r+"MenuDiv").find(".e-numerictextbox").ejNumericTextbox("destroy"),Z("#"+this._id+"filter"+r+"MenuDiv_wrapper").clearQueue(),Z("#"+this._id+"filter"+r+"MenuDiv_wrapper").stop(),Z("#"+this._id+"filter"+r+"MenuDiv").find(".e-dropdownlist").ejDropDownList("destroy"),Z("#"+this._id+"filter"+r+"MenuDiv").data("ejDialog")&&Z("#"+this._id+"filter"+r+"MenuDiv").data("ejDialog").destroy(),Z("#"+this._id+"filter"+r+"MenuDiv_wrapper").remove(),Z("#"+this._id+"filter"+r+"MenuDiv").remove();if(0<e._commandColumnLength)for(l=0;l<i.length;l++)i[l].commands&&0<i[l].commands.length&&Z("#"+this._id+l+"_UnboundTemplate").remove();for(var d=["number","string","date","datetime","boolean"],h=d.length,l=0;l<h;l++)switch(Z("#"+e._id+d[l]+"_CustomDrop1_popup_wrapper").clearQueue(),Z("#"+e._id+d[l]+"_CustomDrop1_popup_wrapper").stop(),Z("#"+e._id+d[l]+"_CustomDrop1").data("ejDropDownList")&&Z("#"+e._id+d[l]+"_CustomDrop1").data("ejDropDownList").destroy(),Z("#"+e._id+d[l]+"_CustomDrop2_popup_wrapper").clearQueue(),Z("#"+e._id+d[l]+"_CustomDrop2_popup_wrapper").stop(),Z("#"+e._id+d[l]+"_CustomDrop2").data("ejDropDownList")&&Z("#"+e._id+d[l]+"_CustomDrop2").data("ejDropDownList").destroy(),Z("#"+e._id+d[l]+"_CheckBoxList_WaitingPopup").remove(),d[l]){case"string":Z("#"+e._id+d[l]+"_CustomValue1_suggestion").remove(),Z("#"+e._id+d[l]+"_CustomValue2_suggestion").remove();break;case"date":Z("#e-"+e._id+d[l]+"_CustomValue1").remove(),Z("#e-"+e._id+d[l]+"_CustomValue2").remove();break;case"datetime":Z("#"+e._id+d[l]+"_CustomValue1_popup").remove(),Z("#"+e._id+d[l]+"_CustomValue2_popup").remove()}e.element.empty().removeClass("e-treegrid-core e-treegrid "+e.model.cssClass),e.element.data("ejWaitingPopup")&&e.element.ejWaitingPopup("destroy");for(var c,l=0;l<i.length;l++)i[l].isTemplateColumn&&(c=i[l].headerText,J.isNullOrUndefined(c)||J.isNullOrUndefined(c.match(/(\\|[^0-9A-z-_])/g))||(c=c.replace(/(\\|[^0-9A-z-_])/g,"")),0<Z("#"+e._id+c+Z.inArray(i[l],e.model.columns)+"_Template").length&&Z("#"+e._id+c+Z.inArray(i[l],e.model.columns)+"_Template").remove()),i[l].headerTemplateID&&(c=this._id+(i[l].field||"")+Z.inArray(i[l],this.model.columns)+"_HeaderTemplate",Z("#"+c).remove());var u,p=Z.views.helpers;for(u in p)-1!=u.indexOf(this._id)&&delete p[u];e._columnChooserList.remove()},collapseAll:function(){var e=this,t=e.model,i={};t.enableVirtualization,e.getRows();e.editFormValidate()&&(e._expandCollapseSettings.state="collapseAll",e._expandCollapseSettings.atLevel="",e._expandCollapseSettings.level=0,e._expandCollapsePages=[],(e._isRowEdit||e.model.isEdit)&&(e._isRowEdit?e.cancelRowEditCell():e.cancelEditCell(),e.selectRows(-1),e._cancelSaveTools()),i.requestType=J.TreeGrid.Actions.ExpandCollapse,e._isInExpandCollapseAll=!0,e._collapseAllData(),0<t.flatRecords.length&&e._refreshTreeGridOnExpandCollapseAll(i),e._isInExpandCollapseAll=!1,e.updateHeight())},_triggerExpandingCollapsingEvent:function(e){e=e.expanded?this._trigger("expanding",e):this._trigger("collapsing",e);return e},_collapseAllData:function(){var e=this,t=e.model,i={};if(i.requestType=J.TreeGrid.Actions.ExpandCollapse,t.allowPaging&&t.pageSettings.pageSizeMode==J.TreeGrid.PageSizeMode.Root&&t.enableVirtualization){var s=t.pageSettings.pageSize,n=e._currentPage(),a=s*n,s=s*(n-1);for(e._expandCollapsePages.push(n),o=s;o<a;o++)(l=(e._isHierarchyFiltering?e._filterParentRecords:e.model.parentRecords)[o])&&(i.data=l,i.recordIndex=t.updatedRecords.indexOf(l),i.expanded=!1,l.hasChildRecords&&(e._triggerExpandingCollapsingEvent(i)||(e._expandCollapseInnerLevelRecord(l,i.expanded),J.TreeGrid.sendExpandCollapseRequest(e,i))))}else for(var r=e._isHierarchyFiltering?e._filterParentRecords:e.model.parentRecords,o=0;o<r.length;o++){var l=r[o];i.data=l,i.recordIndex=t.updatedRecords.indexOf(l),i.expanded=!1,l.hasChildRecords&&(e._triggerExpandingCollapsingEvent(i)||(e._expandCollapseInnerLevelRecord(l,i.expanded),J.TreeGrid.sendExpandCollapseRequest(e,i)))}},_getContextMenuItems:function(){var e=this._contextMenuTexts;return[{headerText:e.addRowText,eventHandler:null,isDefault:!0,disable:!1,menuId:"Add",parentMenuId:null},{iconClass:"e-edit",headerText:e.editText,eventHandler:null,isDefault:!0,disable:!1,menuId:"Edit",parentMenuId:null},{headerText:e.deleteText,eventHandler:null,isDefault:!0,disable:!1,menuId:"Delete",parentMenuId:null},{iconClass:"e-save",headerText:e.saveText,eventHandler:null,isDefault:!0,isEdit:!0,disable:!1,menuId:"Save",parentMenuId:null},{iconClass:"e-cancel",headerText:e.cancelText,eventHandler:null,isDefault:!0,isEdit:!0,disable:!1,menuId:"Cancel",parentMenuId:null},{iconPath:null,headerText:e.aboveText,eventHandler:null,menuId:"Above",parentMenuId:"Add"},{iconPath:null,headerText:e.belowText,eventHandler:null,menuId:"Below",parentMenuId:"Add"}]},_getHeaderContextMenuItems:function(e){var t,i,s=[],n=this.model,a=Z(e.target),r=this._columnMenuTexts,o=a.closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),e=this.getColumnByField(o);return null!=e&&(a=e.allowSorting==P||e.allowSorting,n.allowSorting&&a&&(s.push({iconClass:"e-columnmenu-ascending",headerText:r.sortAscendingText,eventHandler:null,isDefault:!1,disable:!1,menuId:"contextMenu_SortAscending",parentMenuId:null}),s.push({iconClass:"e-columnmenu-descending",headerText:r.sortDescendingText,eventHandler:null,isDefault:!1,disable:!1,menuId:"contextMenu_SortDescending",parentMenuId:null})),(n.showColumnChooser||n.contextMenuSettings.showContextMenu)&&(s.length,s.push({iconClass:"e-columnchooser-icon",headerText:r.columnsText,eventHandler:null,isDefault:!1,disable:!1,menuId:"contextMenu_Columns",parentMenuId:null,isExpanderIcon:!0})),n.isFromGantt||(e.allowFreezing||this._allowFreezingDefault&&J.isNullOrUndefined(e.allowFreezing))&&(this._frozenColumnsLength!=n.columns.length-1||e.isFrozen||(t=!0),o=this._getFrozenColumnWidth(),a=n.columns.indexOf(e),(o=o+this.columnsWidthCollection[a]+18)>this._gridWidth&&(t=!0),s.push({iconClass:"e-freezecolumn-icon",headerText:r.freezeText,eventHandler:null,isDefault:!1,disable:!(!t&&!e.isFrozen),menuId:"contextMenu_Freeze",parentMenuId:null}),s.push({iconClass:"e-unfreezecolumn-icon",headerText:r.unfreezeText,eventHandler:null,isDefault:!1,disable:!(1==e.isFrozen),menuId:"contextMenu_Unfreeze",parentMenuId:null}),this._checkboxSelection&&n.columns[0].nonColumn?1!=n.columns.indexOf(e)&&n.columns.indexOf(e)>this._frozenColumnsLength&&(i=!0):0!=n.columns.indexOf(e)&&n.columns.indexOf(e)>this._frozenColumnsLength&&(i=!0),o=this._getFrozenColumnWidth(a),(o+=18)>this._gridWidth&&(i=!1),s.push({iconClass:"e-freezecolumnbefore-icon",headerText:r.freezePrecedingColumnsText,eventHandler:null,menuId:"contextMenu_FreezePreceding",isDefault:!1,disable:!i,parentMenuId:null})),s)},_getsubContextMenuItems:function(){var e=this._contextMenuTexts;return[{iconPath:null,headerText:e.aboveText,eventHandler:null,menuId:"Above",parentMenuId:"Add"},{iconPath:null,headerText:e.belowText,eventHandler:null,menuId:"Below",parentMenuId:"Add"}]},_clearContextMenu:function(){Z(".e-tgcontextmenu").remove(),Z(".e-tginnerContextmenu").remove(),Z(".e-tgheaderContextmenu").remove(),Z("#"+this._id+"ccDiv").ejDialog("close")},_renderContextMenu:function(e,t,i,s){var n,a,r,o=this,l=o.model,d={},h=o._getCoordinate(e);if(o._contextMenuSelectedIndex=t,o._contextMenuSelectedItem=i,o._contextMenuEvent=e,s||this.editFormValidate()){e=e||window.event,n=h.pageX,a=h.pageY;var c=this.getOffsetRect(o.element[0]);if(c.bottom=c.top+this.element[0].offsetHeight,c.right=c.left+Z(this.element).width(),d.targetElement=e,d.item=i,d.index=t,d.columnIndex=o.getCellIndex(e),d.requestType="ContextMenuOpen",d.contextMenuItems=o._contextMenuItems,o._trigger("contextMenuOpen",d))return!1;o._activeMenuItemId=null,o._contextMenuItems=d.contextMenuItems,r=J.buildTag("div.e-tgcontextmenu e-js","",{display:"table",position:"absolute","z-index":o.getMaxZIndex()+1},{id:o._id+"_ContextMenu"}),l.cssClass&&r.addClass(l.cssClass);s=d.contextMenuItems.filter(function(e){if(null==e.parentMenuId||e.parentMenuId==P)return!0});this._isContextMenuItems=!0,h=J.buildTag("ul.e-treegrid-contextmenu",Z.render[o._id+"contextMenuTemplate"](s),{margin:"0px","padding-left":"0px","list-style-type":"none"},{"data-icon":!1,"data-role":"list-divider"}),r.append(h),Z(document.body).append(r),"msie"==J.browserInfo().name&&J.browserInfo().version<9&&l.isResponsive&&o._off(Z(window),"resize",o.windowResize);i=Z(r).outerHeight(),t=Z(r).outerWidth(),s=r.find(".e-menuitem"),s.eq(0);s.outerWidth(t+2),(c.left>n||c.right<n+t)&&(c.right<n+t&&(n-=t),n<0&&(n=c.left+10)),c.bottom<a+i&&(h=a-i,c.bottom,t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,h>c.top?a=h:a+i>t+window.innerHeight&&(0<(t=a-(a+i-(t+window.innerHeight)))&&(a=parseInt(t)))),r.css({left:n+"px",top:a+"px"}),o._focusTreeGridElement(),Z(r).css({height:"auto"}),o._on(r,"contextmenu",function(e){e.preventDefault()}),Z(s).click(function(){o._contextMenuClickHandler(this)}),Z(s).mouseenter(function(){Z(this).hasClass("e-disable")||(r.find(".e-tgcontextmenu-mouseover").removeClass("e-tgcontextmenu-mouseover"),Z(this).addClass("e-tgcontextmenu-mouseover"),o._activeMenuItemId=Z(this).attr("id"),o._showSubContextMenu(this,d.contextMenuItems))}),o.model.allowSelection&&"multiple"==o.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&o._clearMultiSelectPopup(),"msie"==J.browserInfo().name&&J.browserInfo().version<9&&l.isResponsive&&o._on(Z(window),"resize",o.windowResize),e.preventDefault()}},_renderHeaderContextMenu:function(e){var t,i,s,n=this,a=n.model,r={},o=Z(e.target).closest(".e-headercell").find(".e-headercelldiv").attr("data-ej-mappingname"),l=n.getColumnByField(o);if(n._contextMenuColumnDetails=l,a.isEdit||this._isRowEdit){if(!this.editFormValidate())return!0;n._saveEditedElements()}var d=n._getCoordinate(e);e=e||window.event,t=d.pageX,i=d.pageY;var h=n.getOffsetRect(n.element[0]);if(h.bottom=h.top+n.element[0].offsetHeight,h.right=h.left+Z(this.element).width(),r.targetElement=e,r.headerContextMenuItems=n._headerContextMenuItems,r.columnIndex=n.getColumnIndexByField(o),r.requestType="ContextMenuOpen",n._trigger("contextMenuOpen",r))return!1;r.headerContextMenuItems=n._headerContextMenuItems,n._headerContextMenuItems=r.headerContextMenuItems,d=J.buildTag("div.e-tgheaderContextmenu e-js","",{display:"table",position:"absolute","z-index":n.getMaxZIndex()+1},{id:n._id+"_headerContextMenu"}),a.cssClass&&d.addClass(a.cssClass);e=r.headerContextMenuItems.filter(function(e){if(null==e.parentMenuId||e.parentMenuId==P)return!0});this._isContextMenuItems=!1,o=J.buildTag("ul.e-treegrid-headercontextmenu",Z.render[n._id+"contextMenuTemplate"](e),{margin:"0px","padding-left":"0px","list-style-type":"none"},{"data-icon":!1,"data-role":"list-divider"}),d.append(o),Z(document.body).append(d),"msie"==J.browserInfo().name&&J.browserInfo().version<9&&a.isResponsive&&n._off(Z(window),"resize",n.windowResize);var c,e=Z(d).outerHeight(),u=Z(".e-tgheaderContextmenu").outerWidth()+.5,o=(c=d.find(".e-menuitem")).eq(0);n._activeMenuItemId=Z(o).attr("id"),c.outerWidth(u),(h.left>t||h.right<t+u)&&(h.right<t+u&&(t-=u),t<0&&(t=h.left+10)),h.bottom<i+e&&(0<(e=i-e)&&(i=e)),d.css({left:t+"px",top:i+"px"}),n._focusTreeGridElement(),Z(d).css({height:"auto"}),n._on(d,"contextmenu",function(e){e.preventDefault()}),s=t+u,n._columnListPosX=s,n._headerContextMenuWidth=u,n._posx=t,n._posy=i,n._columnMenuPopupY=i,Z("#contextMenu_SortAscending").on("click",function(){a.allowMultiSorting&&(n._multiSortRequest=!0),0==Z(this).find(".e-expander").length&&(a.isFromGantt?n.sortColumn(l.mappingName||l.field,J.sortOrder.Ascending):n.sortColumn(l.field,J.sortOrder.Ascending),n._multiSortRequest=!1)}),Z("#contextMenu_SortDescending").on("click",function(){a.allowMultiSorting&&(n._multiSortRequest=!0),0==Z(this).find(".e-expander").length&&(a.isFromGantt?n.sortColumn(l.mappingName||l.field,J.sortOrder.Descending):n.sortColumn(l.field,J.sortOrder.Descending),n._multiSortRequest=!1)}),Z("#contextMenu_Freeze").click(function(){0==Z(this).find(".e-expander").length&&(Z(this).hasClass("e-disable")||(n._checkboxSelection&&a.columns[0].nonColumn&&!a.columns[0].isFrozen&&(a.columns[0].isFrozen=!0),n.freezeColumn(l.field,!0)))}),Z("#contextMenu_Unfreeze").click(function(){0==Z(this).find(".e-expander").length&&(Z(this).hasClass("e-disable")||(n._checkboxSelection&&2==n._frozenColumnsLength&&a.columns[0].nonColumn&&a.columns[0].isFrozen&&(a.columns[0].isFrozen=!1),n.freezeColumn(l.field,!1)))}),Z("#contextMenu_FreezePreceding").click(function(){0==Z(this).find(".e-expander").length&&(Z(this).hasClass("e-disable")||n.freezePrecedingColumns(l.field))}),a.isFromGantt||n.model.isResponsive&&Z(window).width()<=n._responsiveMinWidth&&Z("#"+n._id+"_headerContextMenu").find(".e-expander").removeClass("e-treegridadaptivesubicon"),Z("#contextMenu_Columns").mouseenter("click",function(e){n._showColumnChooser(e,h.right,s,u,i,t,Z("#contextMenu_Columns"),!0)}),o.addClass("e-columnmenuselection"),Z(c).mouseenter(function(){Z(this).hasClass("e-disable")||(c.removeClass("e-columnmenuselection"),Z(this).addClass("e-columnmenuselection"),n._activeMenuItemId=Z(this).attr("id"),n._showSubContextMenu(this,r.headerContextMenuItems))}),Z(".e-tgheaderContextmenu .e-menuitem").on("mouseenter click",function(e){e=Z(e.target).closest(".e-menuitem").attr("id");"contextMenu_Columns"==e?Z(".e-tginnerContextmenu").remove():Z("#"+n._id+"ccDiv").ejDialog("close")}),Z(c).click(function(){n._contextMenuClickHandler(this)}),n.model.allowSelection&&"multiple"==n.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&n._clearMultiSelectPopup(),"msie"==J.browserInfo().name&&J.browserInfo().version<9&&a.isResponsive&&n._on(Z(window),"resize",n.windowResize)},_showSubContextMenu:function(e,t){var i,s,n=this.model,a=this,r=[],o=Z(e).attr("id"),l=[],l=t.filter(function(e){if(e.menuId==o&&(r=e),e.parentMenuId==o)return!0});r.parentMenuId||Z(".e-tginnerContextmenu").remove(),r.parentMenuId&&this._removeContextMenu(r,t),0<l.length&&(i=J.buildTag("div.e-tginnerContextmenu e-js","",{display:"table",position:"absolute","z-index":a.getMaxZIndex()+1},{id:this._id+"_SubContextMenu"+o}),n.cssClass&&i.addClass(n.cssClass),s=J.buildTag("ul",Z.render[a._id+"contextMenuTemplate"](l),{margin:"0px","padding-left":"0px"},{"data-icon":!1,type:"none","data-role":"list-divider"}),i.append(s),Z(document.body).append(i),l=i.find(".e-menuitem"),s=Z(i).outerWidth(),l.outerWidth(100<s?s:100),e=a._getSubContextMenuPosition(e,i),Z(i).css({top:e.top,left:e.left}),Z(l).mouseenter(function(){Z(this).hasClass("e-disable")||(a._showSubContextMenu(this,t),Z(this).closest(".e-tginnerContextmenu").find(".e-tgcontextmenu-mouseover").removeClass("e-tgcontextmenu-mouseover"),Z(this).addClass("e-tgcontextmenu-mouseover"),a._activeMenuItemId=Z(this).attr("id"))}),a._on(i,"contextmenu",function(e){e.preventDefault()}),Z(l).click(function(){a._contextMenuClickHandler(this)}),"msie"==J.browserInfo().name&&J.browserInfo().version<9&&n.isResponsive&&a._on(Z(window),"resize",a.windowResize))},_removeContextMenu:function(e,t){var i,e=Z("#"+this._id+"_SubContextMenu"+e.parentMenuId),s=Z(e).find(".e-tgcontextmenu-mouseover");0<Z(s).length&&(0<(i=t.filter(function(e){if(e.menuId==Z(s).attr("id"))return!0})).length&&(0<(e=t.filter(function(e){if(e.parentMenuId==i[0].menuId)return!0})).length&&this._removeContextMenu(e[0],t)),Z("#"+this._id+"_SubContextMenu"+Z(s).attr("id")).remove())},_getSubContextMenuPosition:function(e,t){var i,s=this.model,n={top:"",left:""},a=this._isContextMenuItems?Z(e).closest(".e-tgcontextmenu"):Z(e).closest(".e-tgheaderContextmenu");0==a.length&&(a=Z(e).closest(".e-tginnerContextmenu")),"msie"==J.browserInfo().name&&J.browserInfo().version<9&&s.isResponsive&&this._off(Z(window),"resize",this.windowResize),r=Z(t).outerWidth(),i=Z(t).height(),s=this.getOffsetRect(e),t=Z(a).outerWidth(),n.top=s.top-1,n.bottom=s.top+Z(e).outerHeight(),n.left=s.left+Z(a).width()+1,s=n.left;var r,a=this.getOffsetRect(this.element[0]);return a.bottom=a.top+this.element[0].offsetHeight,a.right=a.left+Z(this.element).width(),(a.left>s||a.right<s+r)&&(a.right<s+r&&(s=s-t-r),0<s&&(n.left=s)),a.bottom<n.top+i&&(r=n.bottom-i,n.top,a.bottom,s=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r>a.top?n.top=r:n.top+i>s+window.innerHeight&&(s=n.top+i-(s+window.innerHeight),0<(s=n.top-s)&&(n.top=parseInt(s)-2))),n},_contextMenuClickHandler:function(e){var t=Z(e).attr("id");if(!Z(e).hasClass("e-disable")&&0==Z(e).find(".e-expander").length)switch(t){case"Delete":this.contextMenuOperations("Delete");break;case"Above":this.contextMenuOperations("Above");break;case"Below":this.contextMenuOperations("Below");break;case"Add":this.contextMenuOperations("Add");break;case"Edit":this.contextMenuOperations("Edit");break;case"Save":this.contextMenuOperations("Save");break;case"Cancel":this.contextMenuOperations("Cancel");break;default:this.contextMenuOperations(t)}},_triggerMenuEventHandler:function(t,e,i){var i=i?this._contextMenuItems:this._headerContextMenuItems;J.isNullOrUndefined(i)||0<(i=i.filter(function(e){if(e.menuId.toString()===t)return!0})).length&&((i=i[0].eventHandler)&&("string"==typeof i&&(i=J.util.getObject(i,window)),Z.isFunction(i)&&(e=J.event("customContextMenuHandler",this.model,e),i.call(this,e))))},_createContextMenuTemplate:function(){var e={};e["_"+this._id+"getHeaderName"]=Z.proxy(this._getHeaderName,this),Z.views.helpers(e);var t="<li style='list-style-type:none;margin:0px;'>";t+="<div class='e-menuitem {{if disable}}e-disable{{/if}}{{if ~_"+this._id+"getHeaderName(#data)}} e-parent-menuitem{{/if}}' id={{:menuId}}  style='display:table;cursor:{{if disable}}default{{else}}pointer{{/if}};min-width:100px;'>{{if iconPath}}<div class='e-icon e-tgcontextmenu-image' style='background-image:{{:iconPath}};background-repeat:no-repeat;'/> {{else}}<div class='e-icon {{:iconClass}} e-tgcontextmenu-icon'/>{{/if}}<div class='e-tgcontextmenu-label'><span>{{:headerText}}</span></div>{{if ~_"+this._id+"getHeaderName(#data)}}<div class='e-icon e-expander'/> {{/if}}",t+="</div></li>";e={};e[this._id+"contextMenuTemplate"]=t,Z.templates(e)},_getHeaderName:function(t){return 0<(this._isContextMenuItems?this._contextMenuItems:this._headerContextMenuItems).filter(function(e){if(null!=t.menuId&&t.menuId==e.parentMenuId||t.isExpanderIcon)return!0}).length},_getColumnId:function(e){return e.name.replace(/\s/g,"")},_updateContextmenuOption:function(e){Array.prototype.clean=function(e){for(var t=0;t<this.length;t++)this[t]==e&&(this.splice(t,1),t--);return this};var t=this;if(t._isRowEdit||t.model.isEdit)t._contextMenuItems.splice(0,3);else{t._contextMenuItems.splice(3,2);var i=t.model.editSettings,s=Z.extend(!0,[],t._contextMenuItems),n=t.model.contextMenuSettings.contextMenuItems.clean("").clean(P),a=[];if(Z.each(n,function(e,t){-1===Z.inArray(t.toLowerCase(),a)&&a.push(t.toLowerCase())}),t._contextMenuItems=[],-1==e)-1==a.indexOf("add")&&0!=a.length||(t._contextMenuItems[0]=s[0]),i.allowAdding||(t._contextMenuItems[0].disable=!0),t._contextAddMenuIndex=0;else if(0==a.length)t._contextMenuItems[0]=s[0],i.allowAdding||(t._contextMenuItems[0].disable=!0),t._contextAddMenuIndex=0,t._contextMenuItems[1]=s[2],i.allowDeleting||(t._contextMenuItems[1].disable=!0),t._contextMenuItems.push.apply(t._contextMenuItems,t._subContextMenuItems);else{for(var r=0;r<a.length;r++)switch(a[r].toLowerCase()){case"add":t._contextMenuItems[r]=s[0],t._contextAddMenuIndex=r,i.allowAdding||(t._contextMenuItems[r].disable=!0);break;case"delete":t._contextMenuItems[r]=s[2],i.allowDeleting||(t._contextMenuItems[r].disable=!0);break;case"edit":t._contextMenuItems[r]=s[1],i.allowEditing||(t._contextMenuItems[r].disable=!0)}t._contextMenuItems.push.apply(t._contextMenuItems,t._subContextMenuItems)}}},_setInitialData:function(){for(var e=this.model,t=[],i={},s=0;s<e.columns.length;s++){var n=e.columns[s];switch(n.editType){case"booleanedit":i[n.field]=!1;break;case"stringedit":i[n.field]=null;break;case"datepicker":i[n.field]=J.format(new Date,this.model.dateFormat,this.model.locale);break;case"datetimepicker":i[n.field]=J.format(new Date,"MM/dd/yyyy hh:mm tt",this.model.locale);break;case"numericedit":i[n.field]=0;break;default:i[n.field]=null}}t.push(i),null!=this.dataSource()&&0!=this.dataSource().length&&0!=e.flatRecords.length||((t=this._createRecord(t[0],0,null)).index=0,this._addRecord(t,J.TreeGrid.RowPosition.Top),this._clearContextMenu(),this._removeDetailsRow())},_subContextMenuAction:function(e,t,i,s){var n=this.model,e=jQuery.extend(!0,{},e.item);e[this.model.childMapping]=null,n.idMapping&&n.parentIdMapping&&e[n.parentIdMapping]&&delete e[n.parentIdMapping],"Above"==i?this._addRecord(e,J.TreeGrid.RowPosition.Above,null,"contextMenu"):"Below"==i&&this._addRecord(e,J.TreeGrid.RowPosition.Below,null,"contextMenu"),this._clearContextMenu()},_appendEditTemplateRow:function(e,t,i,s,n){var a,r,o,l,d=this.model,h=this,c=h.model.rowHeight,u=[],p=h.getUpdatedRecords();this._editedRowIndex=i,r=J.buildTag("table.e-table e-zerospace","",{}),0<this._frozenColumnsLength?s?(a=J.buildTag("form.e-treegridform#"+h._id+"EditFrozenForm","",{margin:"-2px 0px"},{}),r.append(h._$gridHeaderContainer.find("#e-frozenheaderdiv"+h._id).find("colgroup").clone())):(a=J.buildTag("form.e-treegridform#"+h._id+"EditForm","",{margin:"-2px 0px"},{}),r.append(h._$gridHeaderContainer.find("#e-movableheaderdiv"+h._id).find("colgroup").clone())):(a=J.buildTag("form.e-treegridform#"+h._id+"EditForm","",{margin:"-2px 0px"},{}),r.append(h.getHeaderTable().find("colgroup").clone())),!s&&d.showDetailsRow&&d.showDetailsRowInfoColumn&&d.detailsTemplate&&(o=t.find("td.e-detailsrowcell")),t.empty(),n?(t.addClass("e-addedrow"),t.next("tr").hasClass("e-detailsrow")&&t.next("tr").remove()):t.addClass("e-rowedit"),u=e.filter(function(e){return!(!1===e.visible)}),u=J.buildTag("td","",{padding:"1px"},{colspan:o?u.length+1:u.length}),l=d.allowSelection?J.buildTag("tr.e-treegridrows e-selectionbackground e-active",{height:c},{}):J.buildTag("tr.e-treegridrows",{height:c},{});for(var m,g,f,_,v,b=J.buildTag("tbody"),x=h._cellEditTemplate,y=e.length,w=0;w<y;w++)J.isNullOrUndefined(w)||e[w].visible&&(m={},g=h._getFieldValue(e[w].field,d.columns.indexOf(e[w])),_=x.find("#"+g+"_CellEdit").html(),f=h._getCustomCellValue(p[i],e[w].field),m[g]=f,"dropdownedit"==e[w].editType&&0==m[e[w].field]&&(m[g]=m[g].toString()),_=Z(Z.templates(_).render(m)),h._isCommandColumn(e[w])?v=J.buildTag("td.e-rowcell e-unboundcell e-unboundeditedcell","",{height:c,"vertical-align":"middle;",overflow:"hidden"},{}):(v=J.buildTag("td.e-rowcell e-editedcell","",{height:c,"vertical-align":"middle;",overflow:"hidden"},{})).addClass("e-validError"),h._isCommandColumn(e[w])||0!=e[w].allowEditing||_.attr("disabled",!0).addClass("e-disable"),"SELECT"==_.get(0).tagName&&(_.val(m[e[w].field]),null==_.val()&&_.val(_.find("option").first().val())),"INPUT"==_.get(0).tagName&&_.val(m[g]),l.append(v.append(_)),b.append(l));o&&l.append(o),r.append(b),a.append(r),u.append(a),t.append(u)},_editRow:function(e,t,i){var s=this,n=s.model,a=(n.rowHeight,s.getUpdatedRecords()),r=!1;s._editedRowIndex=e;var o=J.TreeGrid.getRowByIndex(s,e);if(o.hasClass("e-summaryrow"))s._editAddTools();else{if(J.isNullOrUndefined(t)){if((l={}).data=a[e],l.rowElement=o,l.rowIndex=e,l.columnIndex=i,r=!1,s._trigger("beginEdit",l))return!1}else r=!0;0<this._frozenColumnsLength?(s._appendEditTemplateRow(s._frozenColumns,Z(o[0]),e,!0,t),s._appendEditTemplateRow(s._unFrozenColumns,Z(o[1]),e,!1,t)):s._appendEditTemplateRow(n.columns,Z(o),e,!1,t),s._isRowEdit=!0,s._editAddTools();var l={};r?(l.data={},l.requestType="add"):(l.columnIndex=i,l.data=a[e],l.requestType="beginEdit"),s._refreshEditForm(l),s._updateWrapRowHeights("total,header",null,e,"rowEdit"),Z.isFunction(Z.validator)&&(s._initValidator(),s.setValidation()),n.selectedItem=a[e];for(var d=0;d<n.columns.length;d++)s._isCommandColumn(n.columns[d])&&1==n.columns[d].isFrozen?this._refreshUnboundTemplate(o.find("#"+this._id+"EditFrozenForm")):s._isCommandColumn(n.columns[d])&&this._refreshUnboundTemplate(o.find("#"+this._id+"EditForm"))}},_renderColumnChooser:function(){var e=J.buildTag("div.e-columnSelector","","",{id:this._id+"ccDiv"});Z("#"+this._id+"ccDiv_wrapper").remove(),this._renderColumnChooserList(!1),e.append(this._columnChooserList),e.insertAfter(this.element),e.data("columnMenuDialog","TreeGrid"),e.ejDialog({showOnInit:!1,allowKeyboardNavigation:!1,enableResize:!1,enableRTL:!1,showHeader:!1,width:"auto",allowDraggable:!1,position:{X:1,Y:1},enableAnimation:!1,minWidth:"0px",minHeight:"0px"}),Z("#"+this._id+"ccDiv_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css("height","100%").removeClass("e-widget-content").addClass("e-treegrid-columnchooser")},_renderFilterMenu:function(e){var t,i=this,s=0,n=0,a=0,r=0,o=0,l=0,d=this.model.columns;if(!e)for(var h=0;h<d.length;h++)"numericedit"!=d[h].filterEditType&&"numericedit"!=d[h].editType||s++,"stringedit"!=d[h].filterEditType&&"stringedit"!=d[h].editType||n++,"datepicker"!=d[h].filterEditType&&"datepicker"!=d[h].editType||a++,"datetimepicker"!=d[h].filterEditType&&"datetimepicker"!=d[h].editType||o++,"booleanedit"!=d[h].filterEditType&&"booleanedit"!=d[h].editType||l++,"dropdownedit"!=d[h].filterEditType&&"dropdownedit"!=d[h].editType||(r++,t=d[h]);(0<n||"stringedit"==e)&&(i._renderEdittypeFilterMenu("String"),i._renderedFilterMenuDialog.push("stringedit")),(0<s||"numericedit"==e)&&(i._renderEdittypeFilterMenu("Numeric"),i._renderedFilterMenuDialog.push("numericedit")),(0<a||"datepicker"==e)&&(i._renderEdittypeFilterMenu("Datepicker"),i._renderedFilterMenuDialog.push("datepicker")),(0<o||"datetimepicker"==e)&&(i._renderEdittypeFilterMenu("Datetimepicker"),i._renderedFilterMenuDialog.push("datetimepicker")),(0<r||"dropdownedit"==e)&&(i._renderEdittypeFilterMenu("Dropdown",t),i._renderedFilterMenuDialog.push("dropdownedit")),(0<l||"booleanedit"==e)&&(i._renderEdittypeFilterMenu("Boolean"),i._renderedFilterMenuDialog.push("booleanedit"))},_renderEdittypeFilterMenu:function(e,t){var i=J.buildTag("div.e-"+this._id+"filter"+e+"Selector e-filterMenuDiv e-treegridmenufilterwraper","",{},{id:this._id+"filter"+e+"MenuDiv"}),s=this._filterMenuTexts,n="Dropdown"==e?"<div class='e-filter-container'><div class='e-dropdown-filter-container'><input id='"+this._id+"filter"+e+"DropDown'/></div><div class='e-filter-button-container'><div class='e-filter-btn-filter'><button id='"+this._id+"filter"+e+"MenuButton' class='e-filterMenuDiv'>"+s.filterButton+"</button></div><div class='e-filter-btn-clear'><button id='"+this._id+"filter"+e+"ClearButton' class='e-filterMenuDiv'>"+s.clearButton+"</button></div></div></div>":"Boolean"==e?"<div class='e-filter-container'><div class='e-checkbox-filter-container'><span class='e-checkbox-filter-text'>"+s.filterValue+"</span><div class='e-checkbox-filter-control' style='padding-bottom:14px;padding-left: 48%;'><input id='"+this._id+"filter"+e+"InputBox'/></div><div class='e-filter-button-container'><div class='e-filter-btn-filter'><button id='"+this._id+"filter"+e+"MenuButton' class='e-filterMenuDiv'>"+s.filterButton+"</button></div><div class='e-filter-btn-clear'><button id='"+this._id+"filter"+e+"ClearButton' class='e-filterMenuDiv'>"+s.clearButton+"</button></div></div></div>":"<div class='e-filter-container'><div class='e-filter-operator'><input id='"+this._id+"filter"+e+"DropDown'/></div><span class='e-filter-text'>"+s.filterValue+"</span><div class='e-filter-value'><input id='"+this._id+"filter"+e+"InputBox'/></div><div class='e-filter-button-container'><div class='e-filter-btn-filter'><button id='"+this._id+"filter"+e+"MenuButton' class='e-filterMenuDiv'>"+s.filterButton+"</button></div><div class='e-filter-btn-clear'><button id='"+this._id+"filter"+e+"ClearButton' class='e-filterMenuDiv'>"+s.clearButton+"</button></div></div></div>";i.append(n),i.insertAfter(this.element),this._renderFilterMenuDialog(e+"MenuDiv",e,t,s),i.data("filter"+e+"MenuDialog","TreeGrid"),i.ejDialog({showOnInit:!1,allowKeyboardNavigation:!1,enableResize:!1,enableRTL:!1,showHeader:!1,width:"auto",allowDraggable:!1,position:{X:1,Y:1},enableAnimation:!1,cssClass:this.model.cssClass}),Z("#"+this._id+"filter"+e+"MenuDiv_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css({height:"auto",width:"auto"}).removeClass("e-widget-content"),Z("#"+this._id+"filter"+e+"MenuDiv_wrapper").css("outline","none").addClass("e-treegrid-columnchooser")},_renderFilterMenuDialog:function(e,t,i,s){var n,a,r,o=this;"String"==t&&(n=s.stringMenuOptions,a="endswith",r={value:"value",text:"text"}),"Numeric"!=t&&"Datepicker"!=t&&"Datetimepicker"!=t||(n=s.numberMenuOptions,a="GreaterThan",r={value:"value",text:"text"}),"Dropdown"==t&&(n=i.dropdownData,r=i.editParams?{value:i.editParams.fields.value,text:i.editParams.fields.text}:{value:"value",text:"text"}),"String"==t&&Z("#"+o._id+"filter"+e).find("#"+o._id+"filter"+t+"InputBox").ejAutocomplete({width:"100%",watermarkText:s.enterValueText,filterType:a,enableResize:!1,enableDistinct:!0,locale:o.model.locale,cssClass:o.model.cssClass}),"Numeric"==t&&Z("#"+o._id+"filter"+e).find("#"+o._id+"filter"+t+"InputBox").ejNumericTextbox({decimalPlaces:2,width:"100%",locale:o.model.locale}),"Boolean"==t&&Z("#"+o._id+"filter"+e).find("#"+o._id+"filter"+t+"InputBox").ejCheckBox({size:"small"}),"Datetimepicker"==t&&Z("#"+o._id+"filter"+e).find("#"+o._id+"filter"+t+"InputBox").ejDateTimePicker({width:"100%",locale:o.model.locale,cssClass:o.model.cssClass}),"Datepicker"==t&&Z("#"+o._id+"filter"+e).find("#"+o._id+"filter"+t+"InputBox").ejDatePicker({width:"100%",locale:o.model.locale,cssClass:o.model.cssClass}),"Boolean"!=t&&Z("#"+o._id+"filter"+e).find("#"+o._id+"filter"+t+"DropDown").ejDropDownList({dataSource:n,selectedIndex:1,fields:r,select:function(e){"String"==t&&Z("#"+o._id+"filter"+t+"InputBox").data("ejAutocomplete").option("filterType",e.value)},cssClass:o.model.cssClass,width:"100%"}),Z("#"+o._id+"filter"+e).find("#"+o._id+"filter"+t+"MenuButton").ejButton({size:"normal",width:"100%",cssClass:o.model.cssClass,click:function(e){var t,i,s=Z.trim(o._columnMenuTarget.prev("div.e-headercelldiv").attr("data-ej-mappingname")),s=o.getColumnByField(s);e.e.target.id==o._id+"filterStringMenuButton"&&(t=Z("#"+o._id+"filterStringInputBox").data("ejAutocomplete"),i=Z("#"+o._id+"filterStringMenuDiv").find("#"+o._id+"filterStringDropDown").data("ejDropDownList"),o._performMenuFilter(s,t.value(),i.model.value)),e.e.target.id==o._id+"filterNumericMenuButton"&&(t=Z("#"+o._id+"filterNumericInputBox").data("ejNumericTextbox"),i=Z("#"+o._id+"filterNumericMenuDiv").find("#"+o._id+"filterNumericDropDown").data("ejDropDownList"),o._performMenuFilter(s,t.model.value,i.model.value)),e.e.target.id==o._id+"filterDropdownMenuButton"&&(i=Z("#"+o._id+"filterDropdownMenuDiv").find("#"+o._id+"filterDropdownDropDown").data("ejDropDownList"),o._performMenuFilter(s,i.model.value,"equal")),e.e.target.id==o._id+"filterDatepickerMenuButton"&&(t=Z("#"+o._id+"filterDatepickerInputBox").data("ejDatePicker"),i=Z("#"+o._id+"filterDatepickerMenuDiv").find("#"+o._id+"filterDatepickerDropDown").data("ejDropDownList"),o._performMenuFilter(s,t.model.value,i.model.value)),e.e.target.id==o._id+"filterDatetimepickerMenuButton"&&(t=Z("#"+o._id+"filterDatetimepickerInputBox").data("ejDateTimePicker"),i=Z("#"+o._id+"filterDatetimepickerMenuDiv").find("#"+o._id+"filterDatetimepickerDropDown").data("ejDropDownList"),o._performMenuFilter(s,t.model.value,i.model.value)),e.e.target.id==o._id+"filterBooleanMenuButton"&&("uncheck"==(t=Z("#"+o._id+"filterBooleanInputBox").data("ejCheckBox")).model.checkState?o._performMenuFilter(s,!1,"equal"):"check"==t.model.checkState&&o._performMenuFilter(s,!0,"equal"))}}),Z("#"+o._id+"filter"+e).find("#"+o._id+"filter"+t+"ClearButton").ejButton({size:"normal",width:"100%",cssClass:o.model.cssClass,click:function(e){var t,i=Z.trim(o._columnMenuTarget.prev("div.e-headercelldiv").attr("data-ej-mappingname")),i=o.getColumnByField(i);o._isExcelFilter&&delete o._excelFilter._predicates[0][i.field],e.e.target.id==o._id+"filterStringClearButton"&&(t=Z("#"+o._id+"filterStringMenuDiv").find("#"+o._id+"filterStringDropDown").data("ejDropDownList"),o._performMenuFilter(i,"",t.model.value)),e.e.target.id==o._id+"filterNumericClearButton"&&(t=Z("#"+o._id+"filterNumericMenuDiv").find("#"+o._id+"filterNumericDropDown").data("ejDropDownList"),o._performMenuFilter(i,"",t.model.value)),e.e.target.id==o._id+"filterDropdownClearButton"&&(t=Z("#"+o._id+"filterDropdownMenuDiv").find("#"+o._id+"filterDropdownDropDown").data("ejDropDownList"),o._performMenuFilter(i,"","equal")),e.e.target.id==o._id+"filterDatepickerClearButton"&&(t=Z("#"+o._id+"filterDatepickerMenuDiv").find("#"+o._id+"filterDatepickerDropDown").data("ejDropDownList"),o._performMenuFilter(i,"",t.model.value)),e.e.target.id==o._id+"filterDatetimepickerClearButton"&&(t=Z("#"+o._id+"filterDatetimepickerMenuDiv").find("#"+o._id+"filterDatetimepickerDropDown").data("ejDropDownList"),o._performMenuFilter(i,"",t.model.value)),e.e.target.id==o._id+"filterBooleanClearButton"&&o._performMenuFilter(i,"","equal")}})},_renderExcelFilter:function(){var e=this.model,t=e.filterSettings,i=0!=t.filteredColumns.length?t.filteredColumns[0].field:null,i={instance:this,showSortOptions:!!e.allowSorting&&!e.showColumnChooser,allowCaseSensitive:t.enableCaseSensitivity,maxFilterLimit:t.maxFilterChoices,interDeterminateState:!0,enableComplexBlankFilter:t.enableComplexBlankFilter,blankValue:t.blankValue,allowAccent:!0,filteredColumns:t.filteredColumns,filterHandler:Z.proxy(this._filterHandler,this),cancelHandler:Z.proxy(this._cancelHandler,this),initFilterCol:i,actionBegin:"actionBegin",actionComplete:"actionComplete"};this._excelFilter=new J.excelFilter(i),this._isExcelFilter=!0},_cancelHandler:function(e){Z("#"+this._id).find(".e-filtericon").data("isClicked",!1),this._mediaStatus=!1,this.model.showColumnChooser&&!this._isCloseFilterMenu&&this._clearColumnMenu("cancelHandler"),this._isCloseFilterMenu=!1},_filterHandler:function(e){var t,i=this,s=i.model,n={};n.requestType="sorting"==e.action?e.action:"filtering";var a=s.filterSettings.filteredColumns;switch(e.action){case"sorting":0!=i.getColumnByField(e.sortDetails.field).allowSorting&&(s.allowMultiSorting&&(i._multiSortRequest=!0),i.sortColumn(e.sortDetails.field,e.sortDetails.direction),i._multiSortRequest=!1);break;case"filtering":i.clearAllSelection(),t=J.DataManager(s.filterSettings.filteredColumns);for(var r=(new J.Query).where("field",J.FilterOperators.equal,e.fieldName),o=t.executeLocal(r),l=0;l<o.length;l++){var d=Z.inArray(o[l],s.filterSettings.filteredColumns);-1!=d&&s.filterSettings.filteredColumns.splice(d,1)}J.merge(s.filterSettings.filteredColumns,e.filterCollection),e.currentFilterCollection=e.filterCollection,n.currentFilteringColumn=e.fieldName,n.predicated=e.ejpredicate,i.processBindings(n)&&(s.filterSettings.filteredColumns=a),i._filterIconTarget&&(i._filterIconTarget.target.className="e-column-filtered-icon e-icon e-filtericon"),i._filteredColumnValueID.push(e.fieldName);break;case"clearfiltering":i.clearAllSelection();a=e.filterDetails;delete i._excelFilter._predicates[0][e.fieldName],i.filterColumn(a.field,a.operator,a.value,a.predicate),i._storePreviousFilteredValue(a.field,a.value,a.operator),i._filterIconTarget&&(i._filterIconTarget.target.className="e-column-filter-icon e-icon e-filtericon"),-1!=i._filteredColumnValueID.indexOf(e.fieldName)&&(e=i._filteredColumnValueID.indexOf(e.fieldName),i._filteredColumnValueID.splice(e,1))}Z("#"+i._id).find(".e-filtericon").data("isClicked",!1),i._mediaStatus=!1,s.showColumnChooser&&i._clearColumnMenu()},_renderColumnChooserList:function(e,t){for(var i,s,n,a,r=this,o=r.model.columns.length,l=r.model.columns,d=J.buildTag("div","",{"margin-left":"0px",width:"auto"}),h=0;h<o;h++)r.model.treeColumnIndex!=h&&1==l[h].showInColumnChooser&&((i=l[h]).nonColumn||J.isNullOrUndefined(i)||(s=J.buildTag("div","","",{class:"e-columnMenuListDiv"}),a=J.isNullOrUndefined(i.headerText)?i.field:i.headerText,n=J.buildTag("input","",{},{id:r._id+"_columnMenu_"+i.field.split(".").join(""),value:a,type:"checkbox"}),a=J.buildTag("label",a,{width:"auto"},{for:r._id+"_columnMenu_"+i.field.split(".").join("")}),s.append(n),s.append(a),s.data("column",i.headerText),d.append(s),i.headerText==t&&s.addClass("e-columnmenuselection"),n.ejCheckBox({checked:!!J.isNullOrUndefined(i.visible)||i.visible,cssClass:r.model.cssClass,change:function(e){var t="",t="msie"==J.browserInfo().name&&J.browserInfo().version<9?this.element.closest(".e-columnMenuListDiv").data().column:e.model.value;e.isChecked?r.showColumn(t):r.hideColumn(t),r._updateWrapRowHeights(null,"virtualRefresh")}})));e?(r._columnChooserList.empty().append(d.children()),r._focusTreeGridElement()):r._columnChooserList=d;var c=r._columnChooserList.find("div.e-columnMenuListDiv");Z(c).mouseenter(function(){c.removeClass("e-columnmenuselection"),Z(this).addClass("e-columnmenuselection")})},_createColumnMenuTemplate:function(){var e="<li style='list-style-type:none;'><div class='e-columnmenuitem{{if enabled==false}} e-disable{{/if}}{{if (menuId =='Columns' || menuId =='Filter')}} e-parent-menuitem{{/if}}' style='display:table;cursor:pointer' id='"+this._id+"_{{:menuId}}Chooser'><div class='e-icon {{:icon}} e-treegridicon' style='display:inline-block;'></div><div class='e-menuitem-label' style='display:inline-block;width:auto'><span>{{:name}}</span></div>{{if (menuId =='Columns' || menuId =='Filter')}}<div class='e-icon e-expander e-treegridicon' style='display:inline-block;float:right;'/> {{/if}}</div>{{if menuId == 'RenameColumn' || menuId == 'SortDescending'}}<hr class='e-menuitem-hr'>{{/if}}</li>",t={};t[this._id+"columnMenuTemplate"]=e,Z.templates(t)},_updateFilterMenuList:function(e){var t,i=this,s=i.model,n=Z(e.target),a=r=0,a=n[0].offsetWidth,r=n[0].offsetHeight,o=Z.trim(n.prev("div.e-headercelldiv").attr("data-ej-mappingname")),l=i.getColumnByField(o);o=0;i._clearFilterMenu(),i._clearColumnMenu("columnmenu"),i._columnMenuTarget=n,i._filterIconTarget=e,i._saveEditedElements(),(n=i.getOffsetRect(n[0])).top=n.top+r,o=(i.model.isFromGantt,n.top+r),r=s.isFromGantt?Z(this.element).closest(".e-gantt"):Z(this.element),(s=this.getOffsetRect(r[0])).bottom=s.top+r[0].offsetHeight,s.right=s.left+Z(r).width(),r=l.filterEditType?(t=l.filterEditType.indexOf("edit"),l.filterEditType):(t=l.editType.indexOf("edit"),l.editType),r=-1!=t?(t=r.slice(0,t)).charAt(0).toUpperCase()+t.slice(1):r.charAt(0).toUpperCase()+r.slice(1),i._showFilterMenu("filtermenu","filter"+r,n,a,s.right,0,null,null,l,o),i._updatePreviousFilteredValue(l)},_showColumnChooser:function(e,t,i,s,n,a,r,o){var l=this,d=l.model,h=Z(window).width();("mouseenter"==e.type&&h>l._responsiveMinWidth||o||!l.model.isResponsive||"click"==e.type&&h<=l._responsiveMinWidth&&l.model.isResponsive||d.isFromGantt)&&(h>l._responsiveMinWidth||o||!l.model.isResponsive||d.isFromGantt?((h={width:"auto",height:"auto",minWidth:"0px",minHeight:"0px",showHeader:!1}).position={X:a,Y:n},h.enableModal=!1,h.isResponsive=!1,h.enableResize=!1,h.cssClass=l.model.cssClass,Z("#"+l._id+"ccDiv_wrapper").addClass("e-treegridadaptivedialog"),Z("#"+l._id+"ccDiv_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css("height","100%").removeClass("e-widget-content"),Z("#"+l._id+"ccDiv").ejDialog(h),Z("#"+l._id+"ccDiv").css({height:"auto"}),l._updateColumnMenuVisibility(),o=Z("#"+l._id+"ccDiv").ejDialog("instance"),h=(a=Z("#"+l._id+"ccDiv_wrapper")).find("div.e-columnMenuListDiv"),o.open(),t<i+a.width()&&(i=i-a.width()-s),r={X:i,Y:n+r.position().top},o.option({position:r}),a.css("z-index",l.getMaxZIndex()+1),h.removeClass("e-columnmenuselection"),h.eq(0).addClass("e-columnmenuselection"),l._focusTreeGridElement(),l._renderedSubMenuType="ColumnDesktop"):l._adaptiveColumnChooser(),!d.allowFiltering||"menu"!=d.filterSettings.filterType&&"excel"!=d.filterSettings.filterType||(l._isCloseFilterMenu=!0,l._clearFilterMenu()))},_renderColumnMenu:function(e){var t,i,s,n,a,r=this,o=r.model,l=Z(e.target),d=u=0,h=[],c=0,d=l[0].offsetWidth,u=l[0].offsetHeight,p=r._columnMenuTexts,m=Z.trim(l.prev("div.e-headercelldiv").attr("data-ej-mappingname")),g=r.getColumnByField(m),m=g.allowSorting==P||g.allowSorting;if(r._batchEditStarts&&!r._confirmDialog.is(":visible"))return r._batchSaveLostWarning("ColumnMenu"),r._batchTempDetails.menuTarget=e,!0;if(v=_=0,r._clearColumnMenu("columnmenu"),r._columnMenuTarget=l,o.isEdit||this._isRowEdit){if(!this.editFormValidate())return!0;r._saveEditedElements()}o.showColumnChooser&&o.showColumnOptions&&(a=r._enableDisableInsertLabel(),h.push({name:p.insertColumnLeft,icon:"e-column-insertleft-icon",menuId:"ColumnLeft",enabled:a}),h.push({name:p.insertColumnRight,icon:"e-column-insertright-icon",menuId:"ColumnRight",enabled:a}),h.push({name:p.deleteColumn,icon:"e-column-delete-icon",menuId:"DeleteColumn",enabled:r._enableDisableDEL(g)}),h.push({name:p.renameColumn,icon:"e-column-rename-icon",menuId:"RenameColumn"})),!o.allowFiltering||!J.isNullOrUndefined(g.allowFiltering)&&!g.allowFiltering||"menu"!=o.filterSettings.filterType&&"excel"!=o.filterSettings.filterType||(s=(-1!=r._filteredColumnValueID.indexOf(g.field)?h.push({name:p.menuFilter,icon:"e-column-filtered-icon",menuId:"Filter"}):h.push({name:p.menuFilter,icon:"e-column-filter-icon",menuId:"Filter"}),h.length)),o.allowSorting&&m&&(h.push({name:p.sortAscendingText,icon:"e-columnmenu-ascending",menuId:"SortAscending"}),h.push({name:p.sortDescendingText,icon:"e-columnmenu-descending",menuId:"SortDescending"})),o.showColumnChooser&&(c=h.length,h.push({name:p.columnsText,icon:"e-columnchooser-icon",menuId:"Columns"})),o.isFromGantt||(g.allowFreezing||r._allowFreezingDefault&&J.isNullOrUndefined(g.allowFreezing))&&(f=!1,r._frozenColumnsLength!=o.columns.length-1||g.isFrozen||(n=!0),a=this._getFrozenColumnWidth(),m=o.columns.indexOf(g),(a=a+this.columnsWidthCollection[m]+18)>this._gridWidth&&(n=!0),h.push({name:p.freezeText,icon:"e-freezecolumn-icon",menuId:"FreezeColumns",enabled:!n&&!g.isFrozen}),h.push({name:p.unfreezeText,icon:"e-unfreezecolumn-icon",menuId:"UnfreezeColumns",enabled:1==g.isFrozen}),r._checkboxSelection&&o.columns[0].nonColumn?1!=o.columns.indexOf(g)&&o.columns.indexOf(g)>this._frozenColumnsLength&&(f=!0):0!=o.columns.indexOf(g)&&o.columns.indexOf(g)>this._frozenColumnsLength&&(f=!0),a=this._getFrozenColumnWidth(m),(a+=18)>this._gridWidth&&(f=!1),h.push({name:p.freezePrecedingColumnsText,icon:"e-freezecolumnbefore-icon",menuId:"FreezePrecedingColumns",enabled:f}));var p=r.getOffsetRect(l[0]),f=r.getOffsetRect(r.element[0]),_=(r.model.isFromGantt,p.top+u);r._columnChooserListIndex=c;l=J.buildTag("div.e-columnmenu e-js","",{display:"table",position:"absolute",top:_,"z-index":1e4},{id:r._id+"_ColumnMenu"}),u=J.buildTag("ul.e-treegrid-columnmenu","",{},{}),h=Z.render[r._id+"columnMenuTemplate"](h);o.cssClass&&l.addClass(o.cssClass),u.append(h),l.append(u),Z(document.body).append(l);l.height();var v,b=l.outerWidth()+1;(v=p.left+d-b)<=f.left&&(v=f.left),i=t=v+b,r._columnListPosX=t,r._columnFilterPosX=i,r._columnMenuPopupY=_,l.css({left:v}),l.find(".e-columnmenuitem").outerWidth(b);var l=o.isFromGantt?Z(this.element).closest(".e-gantt"):Z(this.element),x=this.getOffsetRect(l[0]);x.bottom=x.top+l[0].offsetHeight,x.right=x.left+Z(l).width(),o.isFromGantt||(r.model.isResponsive&&Z(window).width()<=r._responsiveMinWidth?Z("#"+r._id+"_ColumnMenu").find(".e-expander").addClass("e-treegridadaptivesubicon"):Z("#"+r._id+"_ColumnMenu").find(".e-expander").removeClass("e-treegridadaptivesubicon")),Z("#"+r._id+"_ColumnsChooser").on("mouseenter click",function(e){r._showColumnChooser(e,x.right,t,b,_,v,Z("#"+r._id+"_ColumnsChooser"))}),Z("#"+r._id+"_FilterChooser").on("mouseenter click",function(e){var t;("mouseenter"==e.type&&Z(window).width()>r._responsiveMinWidth||!r.model.isResponsive||"click"==e.type&&Z(window).width()<=r._responsiveMinWidth&&r.model.isResponsive)&&(r._updateColumnMenuVisibility(),r._checkFilterType(g),"menu"==o.filterSettings.filterType&&"excel"!=g.filterType||"excel"==o.filterSettings.filterType&&"menu"==g.filterType?(e=g.filterEditType?(t=g.filterEditType.indexOf("edit"),g.filterEditType):(g.editType="edittemplate"==g.editType?"stringedit":g.editType,t=g.editType.indexOf("edit"),g.editType),e=-1!=t?(t=e.slice(0,t)).charAt(0).toUpperCase()+t.slice(1):e.charAt(0).toUpperCase()+e.slice(1),r._showFilterMenu("columnchooser","filter"+e,i,b,x.right,v,c,s,g,_),r._updatePreviousFilteredValue(g),Z("#"+r._id+"ccDiv").ejDialog("close")):r._openExcelFilter(g,i,_,x,b))}),Z("#"+r._id+"_SortAscendingChooser,#"+r._id+"_SortDescendingChooser,#"+r._id+"_FreezeColumnsChooser,#"+r._id+"_UnfreezeColumnsChooser,#"+r._id+"_FreezePrecedingColumnsChooser,#"+r._id+"_ColumnLeftChooser,#"+r._id+"_ColumnRightChooser,#"+r._id+"_DeleteColumnChooser,#"+r._id+"_RenameColumnChooser").mouseenter(function(){Z("#"+r._id+"ccDiv").ejDialog("close"),!o.allowFiltering||"menu"!=o.filterSettings.filterType&&"excel"!=o.filterSettings.filterType||(r._isCloseFilterMenu=!0,r._clearFilterMenu())}),Z("#"+r._id+"_SortAscendingChooser").click(function(){o.allowMultiSorting&&(r._multiSortRequest=!0),o.isFromGantt?r.sortColumn(g.mappingName||g.field,J.sortOrder.Ascending):r.sortColumn(g.field,J.sortOrder.Ascending),r._multiSortRequest=!1}),Z("#"+r._id+"_SortDescendingChooser").click(function(){o.allowMultiSorting&&(r._multiSortRequest=!0),o.isFromGantt?r.sortColumn(g.mappingName||g.field,J.sortOrder.Descending):r.sortColumn(g.field,J.sortOrder.Descending),r._multiSortRequest=!1}),Z("#"+r._id+"_FreezeColumnsChooser").click(function(){Z(this).hasClass("e-disable")||(r._checkboxSelection&&o.columns[0].nonColumn&&!o.columns[0].isFrozen&&(o.columns[0].isFrozen=!0),r.freezeColumn(g.field,!0))}),Z("#"+r._id+"_UnfreezeColumnsChooser").click(function(){Z(this).hasClass("e-disable")||(r._checkboxSelection&&2==r._frozenColumnsLength&&o.columns[0].nonColumn&&o.columns[0].isFrozen&&(o.columns[0].isFrozen=!1),r.freezeColumn(g.field,!1))}),Z("#"+r._id+"_FreezePrecedingColumnsChooser").click(function(){Z(this).hasClass("e-disable")||r.freezePrecedingColumns(g.field)}),Z("#"+r._id+"_ColumnLeftChooser").click(function(){return!Z(this).hasClass("e-disable")&&void r.insertColumnChooser(g,"left")}),Z("#"+r._id+"_ColumnRightChooser").click(function(){return!Z(this).hasClass("e-disable")&&void r.insertColumnChooser(g,"right")}),Z("#"+r._id+"_DeleteColumnChooser").click(function(){return!Z(this).hasClass("e-disable")&&(r._targetColumnIndex=o.columns.indexOf(g),r._updateConfirmDialog.ejDialog("open"),void r._clearColumnMenu())}),Z("#"+r._id+"_RenameColumnChooser").click(function(){r._targetColumnIndex=o.columns.indexOf(g),r._renderColumnRenameDialog(g),r._columnRenameDialog.ejDialog("open"),r._clearColumnMenu()});var y=Z("#"+r._id+"_ColumnMenu").find("div.e-columnmenuitem");y.eq(0).addClass("e-columnmenuselection"),Z(y).mouseenter(function(){Z(this).hasClass("e-disable")||(y.removeClass("e-columnmenuselection"),Z(this).addClass("e-columnmenuselection"))})},_openExcelFilter:function(e,t,i,s,n){var a,r=this,o=r.model,l=Z(document).width(),d=t,t=(t=e.filterEditType||e.editType).toLowerCase();switch(s.right<d+266||l<d+266?0<d-n-266&&(d=d-n-266-2):d+=2,i={X:d,Y:i+Z("#"+r._id+"_FilterChooser").position().top},t){case"numericedit":t="number";break;case"stringedit":case"maskedit":case"dropdownedit":t="string";break;case"booleanedit":t="boolean";break;case"datepicker":case"datetimepicker":t=t.replace("picker","")}l<=r._responsiveMinWidth&&o.isResponsive&&o.enableResize?(r._renderResponsiveExcelFilter(e,t),r._mediaStatus=!0,r._clearColumnMenu()):(-1==Z.inArray(t,r._excelColTypes)&&(Z("#"+r._id+t+"_excelDlg").remove(),Z("#"+r._id+t+"_CustomFDlg_wrapper").remove(),Z("#"+r._id+t+"_CustomFDlg").remove(),r._excelFilter._openedFltr=null,r._excelColTypes.push(t),r._excelFilter.renderDialog(t)),o={True:r.localizedLabels.trueText,False:r.localizedLabels.falseText},a=[],Z.grep(r.model.flatRecords,function(e){e.isSummaryRow||a.push(e.item)}),r._isCloseFilterMenu=!0,r._excelFilter.openXFDialog({field:e.field,enableResponsiveRow:!0,displayName:e.headerText,dataSource:a,query:"",position:{X:i.X,Y:i.Y},dimension:{height:Z(window).height(),width:Z(window).width()},cssClass:"resFilter",type:t,format:e.format,localizedStrings:o}),r._isCloseFilterMenu=!1,Z("#"+r._id+t+"_CheckBoxList").css("display","inline-block"),r._customFilter=null),Z("#"+r._id+"ccDiv").ejDialog("close")},_adaptiveColumnChooser:function(){var e=this,t={},i=e.getOffsetRect(Z("#"+e._id)[0]),s=e._columnMenuTexts;t.cssClass=e.model.cssClass,t.enableModal=!1,t.enableResize=!1,t.enableResize=!1,t.contentSelector="#"+e._id,t.rtl=e.model.rtl,t.allowDraggable=!1,t.showHeader=!0,t.minHeight="50px",t.minWidth="50px",t.width=Z("#"+e._id).width()+"px",t.height=Z("#"+e._id).height()+"px",t.position={X:i.left+"px",Y:i.top+"px"},t.isResponsive=!1,t.allowKeyboardNavigation=!1,t.title=s.columnsText,Z("#"+e._id+"ccDiv_wrapper").removeClass("e-treegridadaptivedialog"),Z("#"+e._id+"ccDiv_wrapper").addClass("e-dialog").addClass("e-shadow").find("div.e-dialog-scroller").css("height","100%"),Z("#"+e._id+"ccDiv_wrapper").find("div.e-dialog-scroller").addClass("e-treegridadaptivedialog"),Z("#"+e._id+"ccDiv").ejDialog(t),Z("#"+e._id+"ccDiv").ejDialog("open"),Z("#"+e._id+"ccDiv").css({width:"100%",height:"100%"}),e.model.isResponsive&&(t=Z("#"+e._id).height()-50+"px",Z("#"+e._id+"ccDiv_wrapper").css({width:Z("#"+e._id).width(),height:Z("#"+e._id).height()}),Z("#"+e._id+"ccDiv_wrapper").find("div.e-dialog-scroller").removeClass("e-treegridadaptivedialog"),Z("#"+e._id+"ccDiv").css({width:"100%",height:"auto"}),Z("#"+e._id+"ccDiv").height()>Z("#"+e._id+"ccDiv_wrapper").height()-48?(Z("#"+e._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({height:Z("#"+e._id).height()-48+"px",width:"auto",padding:"0px"}),Z("#"+e._id+"ccDiv").removeClass("e-columnSelector"),Z("#"+e._id+"ccDiv").ejDialog("refresh")):(Z("#"+e._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({height:t,width:"auto"}),Z("#"+e._id+"ccDiv").css({padding:"8px 16px"})),Z("#"+e._id+"ccDiv_wrapper").removeClass("e-shadow"),Z("#"+e._id+"ccDiv").removeClass("e-shadow")),e._renderedSubMenuType="AdaptiveColChooser",Z("#"+e._id+"_ColumnMenu").remove()},_updatePreviousFilteredValue:function(e){var t,i,s,n,a,r,o=this,l=[],d=e.filterEditType||e.editType;"stringedit"==d&&(r=Z("#"+o._id+"filterStringInputBox").data("ejAutocomplete"),t=Z("#"+o._id+"filterStringMenuDiv").find("#"+o._id+"filterStringDropDown").data("ejDropDownList"),i=J.Query().select(e.field),i=new J.DataManager(o.model.flatRecords.slice()).executeLocal(i),r.option("dataSource",i),-1!=o._filteredColumnValueID.indexOf(e.field)?(s=o._filteredColumnValueID.indexOf(e.field),""==o._filteredColumnValue[s].value?t.option("value","startswith"):t.option("value",o._filteredColumnValue[s].dropdown),r.option("value",o._filteredColumnValue[s].value),Z("#"+o._id+"filterStringInputBox").val(o._filteredColumnValue[s].value)):(t.option("value","startswith"),r.option("value",null))),"numericedit"==d&&(r=Z("#"+o._id+"filterNumericInputBox").data("ejNumericTextbox"),t=Z("#"+o._id+"filterNumericMenuDiv").find("#"+o._id+"filterNumericDropDown").data("ejDropDownList"),-1!=o._filteredColumnValueID.indexOf(e.field)?(s=o._filteredColumnValueID.indexOf(e.field),""==o._filteredColumnValue[s].value?t.option("value","lessthan"):t.option("value",o._filteredColumnValue[s].dropdown),r.option("value",o._filteredColumnValue[s].value),Z("#"+o._id+"filterNumericInputBox").val(o._filteredColumnValue[s].value)):(r.option("value",null),t.option("value","lessthan"))),"datepicker"==d&&(r=Z("#"+o._id+"filterDatepickerInputBox").data("ejDatePicker"),t=Z("#"+o._id+"filterDatepickerMenuDiv").find("#"+o._id+"filterDatepickerDropDown").data("ejDropDownList"),-1!=o._filteredColumnValueID.indexOf(e.field)?(s=o._filteredColumnValueID.indexOf(e.field),""==o._filteredColumnValue[s].value?t.option("value","lessthan"):t.option("value",o._filteredColumnValue[s].dropdown),r.option("value",o._filteredColumnValue[s].value)):(r.option("value",null),t.option("value","lessthan")),e.format&&r.option("dateFormat",o._getDateFormat(e.format))),"datetimepicker"==d&&(r=Z("#"+o._id+"filterDatetimepickerInputBox").data("ejDateTimePicker"),t=Z("#"+o._id+"filterDatetimepickerMenuDiv").find("#"+o._id+"filterDatetimepickerDropDown").data("ejDropDownList"),-1!=o._filteredColumnValueID.indexOf(e.field)?(s=o._filteredColumnValueID.indexOf(e.field),""==o._filteredColumnValue[s].value?t.option("value","lessthan"):t.option("value",o._filteredColumnValue[s].dropdown),r.option("value",o._filteredColumnValue[s].value)):(r.option("value",null),t.option("value","lessthan")),e.format&&r.option("dateFormat",o._getDateFormat(e.format))),"dropdownedit"==d&&(Z.extend(l,e.dropdownData),e.editParams?(n={value:e.editParams.fields.value,text:e.editParams.fields.text},(a={})[e.editParams.fields.text]=o._dropDownListBlanksText,a[e.editParams.fields.value]="(Blanks)"):(n={value:"value",text:"text"},a={text:o._dropDownListBlanksText,value:"(Blanks)"}),t=Z("#"+o._id+"filterDropdownDropDown").data("ejDropDownList"),!J.isNullOrUndefined(l)&&0!=l.length||(l=o._dropDownArrayCollection(e,e.field)),(e.allowFilteringBlankContent||J.isNullOrUndefined(e.allowFilteringBlankContent))&&l.unshift(a),t.option("dataSource",l),t.option("fields",n),-1!=o._filteredColumnValueID.indexOf(e.field)?(s=o._filteredColumnValueID.indexOf(e.field),t.option("value",o._filteredColumnValue[s].value)):t.option("value",null)),"booleanedit"==d&&(r=Z("#"+o._id+"filterBooleanInputBox").data("ejCheckBox"),-1!=o._filteredColumnValueID.indexOf(e.field)?(s=o._filteredColumnValueID.indexOf(e.field),""==o._filteredColumnValue[s].value?r.option("checkState","uncheck"):r.option("value",o._filteredColumnValue[s].value)):r.option("selectedIndex",""))},_performMenuFilter:function(e,t,i){var s,n=this;n.clearAllSelection(),s=e.filterEditType||e.editType,J.isNullOrUndefined(t)&&(t=""),n._filterString=t,-1==n._filteredColumnValueID.indexOf(e.field)&&""==t.toString()?(n.clearColumnMenu(),n._clearFilterMenu()):(("numericedit"==s||"datepicker"==s||"datetimepicker"==s)&&("datepicker"!=s&&"datetimepicker"!=s||"equal"!=i&&"notequal"!=i)?n.filterColumn(e.field,i,t,"and",!0):n.filterColumn(e.field,i,t,"and"),n.clearColumnMenu(),n._clearFilterMenu(),n._cancelSaveTools())},_storePreviousFilteredValue:function(e,t,i){var s,n=this;-1!=n._filteredColumnValueID.indexOf(e)||""==t.toString()&&"false"!=t.toString()?""!=t.toString()||"false"==t.toString()?(s=n._filteredColumnValueID.indexOf(e),n._filteredColumnValue[s].value=t,n._filteredColumnValue[s].dropdown=i):-1!=n._filteredColumnValueID.indexOf(e)&&(s=n._filteredColumnValueID.indexOf(e),n._filteredColumnValue.splice(s,1),n._filteredColumnValueID.splice(s,1)):(n._filteredColumnValue.push({column:e,value:t,dropdown:i}),n._filteredColumnValueID.push(e))},_showFilterMenu:function(e,t,i,s,n,a,r,o,l,d){var h,c,u,p;this.editFormValidate()&&(Z(window).width()<=this._responsiveMinWidth&&this.model.isResponsive&&!this.model.isFromGantt?(u={},c=(h=this).getOffsetRect(Z("#"+h._id)[0]),u.cssClass=this.model.cssClass,u.enableModal=!1,u.isResponsive=!1,u.enableRTL=this.model.enableRTL,u.enableResize=!1,u.allowDraggable=!1,u.minWidth="50px",u.minHeight="50px",u.width=Z("#"+h._id).width()+"px",u.height=Z("#"+h._id).height()+"px",u.position={X:c.left+"px",Y:c.top+"px"},u.contentSelector="#"+h._id,u.rtl=h.model.rtl,u.allowKeyboardNavigation=!1,u.showHeader=!0,u.title=l.headerText,Z("#"+h._id+t+"MenuDiv").removeClass("e-treegridadaptivedialog"),Z("#"+h._id+t+"MenuDiv").ejDialog(u),Z("#"+h._id+t+"MenuDiv_wrapper").addClass("e-dialog").addClass("e-shadow").find("div.e-dialog-scroller").addClass("e-treegridadaptivewidth"),Z("#"+h._id+t+"MenuDiv").css({width:"100%",height:"auto"}),c=Z("#"+h._id).height()-50+"px",Z("#"+h._id+t+"MenuDiv").ejDialog("open"),Z("#"+h._id+t+"MenuDiv_wrapper").find("div.e-dialog-scroller").css({height:c}),Z("#"+h._id+t+"MenuDiv_wrapper").removeClass("e-shadow"),Z("#"+h._id+t+"MenuDiv").removeClass("e-shadow"),Z("#"+h._id+t+"MenuDiv").height()>Z("#"+h._id+t+"MenuDiv_wrapper").height()-48&&Z("#"+h._id+t+"MenuDiv").ejDialog("refresh"),h._renderedSubMenuType="#"+h._id+t+"MenuDiv",Z("#"+h._id+"_ColumnMenu").remove()):((u={width:"auto",height:"auto",minWidth:"0px",minHeight:"0px",showHeader:!1,position:{X:1,Y:1},enableModal:!1,isResponsive:!1,enableResize:!1}).cssClass=(h=this).model.cssClass,Z("#"+h._id+t+"MenuDiv_wrapper").removeClass("e-dialog").removeClass("e-shadow").find("div.e-dialog-scroller").css("height","100%").removeClass("e-widget-content"),Z("#"+h._id+t+"MenuDiv").ejDialog(u),l=Z("#"+h._id+t+"MenuDiv").ejDialog("instance"),c=Z("#"+h._id+t+"MenuDiv_wrapper"),p="columnchooser"==e?(u=Z(document).width(),(n<i+c.width()||u<i+c.width())&&0<i-s-c.width()&&(i=i-s-c.width()),{X:i,Y:d+Z("#"+h._id+"_FilterChooser").position().top}):(e="filtermenu",s=s,a=(p=i).left+s-c.width(),p.left=a+c.width()+4,n<p.left+c.width()&&(p.left=p.left-c.width()-s),{X:p.left,Y:p.top}),l.option({position:p}),l.open(),h._renderedSubMenuType="#"+h._id+t+"MenuDivDesktop"))},_clearResponsiveColumnMenu:function(){Z("div[id$='ccDiv']").each(function(){"TreeGrid"==Z(this).data("columnMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("#"+this._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({padding:"0px"}),Z("#"+this._id+"ccDiv").addClass("e-columnSelector"),Z("div[id$='filterStringMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterStringMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='filterNumericMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterNumericMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='filterBooleanMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterBooleanMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='filterDatepickerMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterDatepickerMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='filterDatetimepickerMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterDatetimepickerMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='filterDropdownMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterDropdownMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='ColumnRenameDialog']").each(function(){Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='dialogColumnAdd']").each(function(){Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("#"+this._id).find(".e-filtericon").data("isClicked",!1)},_clearColumnMenu:function(e){var t=this,i=t.model;"columnmenu"===e&&Z(window).width()<t._responsiveMinWidth&&t._clearResponsiveColumnMenu(),i.isResponsive&&Z(window).width()<t._responsiveMinWidth?(Z("#"+t._id+"_ColumnMenu").remove(),t._renderedSubMenuType&&-1==t._renderedSubMenuType.indexOf("AdaptiveColChooser")&&(Z("div[id$='"+t._id+"ccDiv']").each(function(){"TreeGrid"==Z(this).data("columnMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("#"+t._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({padding:"0px"}),Z("#"+t._id+"ccDiv").addClass("e-columnSelector"))):(Z("#"+t._id+"_ColumnMenu").remove(),"resize"!=e&&(Z("div[id$='"+t._id+"ccDiv']").each(function(){"TreeGrid"==Z(this).data("columnMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("#"+t._id+"ccDiv_wrapper").find("div.e-dialog-scroller").css({padding:"0px"}),Z("#"+t._id+"ccDiv").addClass("e-columnSelector"),"resize"!=e&&"cancelHandler"!=e&&(!i.allowFiltering||"menu"!=i.filterSettings.filterType&&"excel"!=i.filterSettings.filterType||t._clearFilterMenu()))),Z("#"+t._id).find(".e-columnicon").data("isClicked",!1),Z("#"+t._id).find(".e-filtericon").data("isClicked",!1)},_clearFilterMenu:function(){var e,t=this;t.model.allowFiltering&&(Z("div[id$='"+t._id+"filterStringMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterStringMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='"+t._id+"filterNumericMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterNumericMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='"+t._id+"filterBooleanMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterBooleanMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='"+t._id+"filterDatepickerMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterDatepickerMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='"+t._id+"filterDatetimepickerMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterDatetimepickerMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("div[id$='"+t._id+"filterDropdownMenuDiv']").each(function(){"TreeGrid"==Z(this).data("filterDropdownMenuDialog")&&Z(this).data("ejDialog")&&Z(this).ejDialog("close")}),Z("#"+t._id+"filterStringDropDown_popup_list_wrapper").hide(),Z("#"+t._id+"filterStringInputBox_suggestion").hide(),Z("#"+t._id+"filterNumericDropDown_popup_list_wrapper").hide(),Z("#"+t._id+"filterNumericInputBox_suggestion").hide(),Z("#"+t._id+"filterDatepickerDropDown_popup_list_wrapper").hide(),Z("#"+t._id+"filterDatepickerInputBox_suggestion").hide(),Z("#"+t._id+"filterDatetimepickerDropDown_popup_list_wrapper").hide(),Z("#"+t._id+"filterDatetimepickerInputBox_suggestion").hide(),Z("#"+t._id+"filterDropdownDropDown_popup_list_wrapper").hide(),Z("#"+t._id).find(".e-filtericon").data("isClicked",!1),(e=Z("#"+t._id+"filterDatetimepickerInputBox").data("ejDateTimePicker"))&&e.hide(),(e=Z("#"+t._id+"filterDatepickerInputBox").data("ejDatePicker"))&&e.hide(),t._isExcelFilter&&(t._excelFilter.closeXFDialog(),t._mediaStatus=!1))},_getDateFormat:function(e){return new RegExp("\\{0(:([^\\}]+))?\\}","gm").exec(e)[2]},_enableDisableDEL:function(e){var t=this.model,i=e.field,e=t.columns.indexOf(e);return t.isFromGantt?!("taskId"==i||"serialNumber"==i||"taskName"==i||"startDate"==i||"endDate"==i||"duration"==i&&!t.endDateMapping||e==t.treeColumnIndex):e!=t.treeColumnIndex},_enableDisableInsertLabel:function(){if(!this.model.isFromGantt&&0<this._frozenColumnsLength){var e=this._getFrozenColumnWidth();return!((e+=250)>this._gridWidth)}return!0},insertColumnChooser:function(e,t){var i,s=this,n=s.model;0===Z("#"+s._id+"_dialogColumnAdd").length&&(i=J.buildTag("div.e-dialog e-dialog-content e-widget-content","",{display:"none"},{id:s._id+"_dialogColumnAdd"}),s.element.append(i),s._on(Z("#"+s._id+"_dialogColumnAdd"),"click keypress","#ColumnAddDialog_"+s._id+"_Ok ,#ColumnAddDialog_"+s._id+"_Cancel",s._buttonClick)),s.renderColumnAddDialog(),s._targetColumnIndex=n.columns.indexOf(e),s._insertPosition=t},renameColumn:function(e,t){var i=this.model,s=i.columns,n={requestType:"renameColumn"};n.columnObject=s[e],n.previousName=s[e].headerText,n.currentName=t,this._trigger("actionComplete",n)||(s[e].headerText=t,this._refreshFrozenColumns()),this._updateWrapRowHeights(),!i.allowTextWrap&&"wrap"!=i.headerTextOverflow||this._updateGridContentHeight()},_renderColumnRenameDialog:function(e){var t=this,i=t._columnMenuTexts,s=J.buildTag("div.e-treegridrenamedialog","",{},{"data-unselectable":"on"}),n=Z("#"+t._id).width(),a=Z("#"+t._id).height(),r=J.buildTag("form","",{height:"100%",width:"100%","font-size":"14px"},{id:t._id+"ColumnRenameForm",onsubmit:"return false"}),o=J.buildTag("span.e-buttons","<input class='e-treegrid-rename-dialog-btn-ok' type='button' id="+t._id+"RenameDialogOK value="+t._okButtonText+" /> <input class='e-treegrid-rename-dialog-btn-cancel' type='button' id="+t._id+"RenameDialogCancel value='"+t._cancelButtonText+"' />"),l=J.buildTag("div","",{},{class:"e-treegrid-rename-dialog-btn"}),d=J.buildTag("table","",{outline:"none",width:"100%","margin-top":"0px"},{"data-unselectable":"on"}),h=J.buildTag("tr"),c=J.buildTag("td.e-editLabel","",{outline:"none"},{"data-unselectable":"on"});c.append("<label style='font-weight:normal;'>"+t._columnDialogTitle.renameColumn+"</label>"),h.append(c),d.append(h);c=J.buildTag("tr"),h=J.buildTag("td.e-editValue"),e=J.buildTag("input.e-field e-ejinputtext","",{},{value:e.headerText,id:t._id+"RenameHeaderText",name:e.field,"data-dialog":"RenameHeaderText"});e.css({margin:"0px",padding:"1px 4px 1px 0px"}),h.html(e),c.append(h),d.append(c),r.append(d),s.append(r),t._columnRenameDialog=J.buildTag("div","","",{title:i.renameColumn,id:t._id+"ColumnRenameDialog"}),l.append(o),t._columnRenameDialog.append(s).append(l),t.element.append(t._columnRenameDialog),o.find("input").ejButton({cssClass:t.model.cssClass,showRoundedCorner:!0,size:"normal",click:Z.proxy(t._triggerRenameColumn,t)}),Z(window).width()<=t._responsiveMinWidth&&t.model.isResponsive&&!t.model.isFromGantt?t.model.isResponsive&&(o=t.getOffsetRect(Z("#"+t._id)[0]),Z("#"+t._id+"ColumnRenameDialog").removeClass("e-treegridadaptivedialog"),t._columnRenameDialog.ejDialog({width:n+"px",height:a+"px",position:{X:o.left+"px",Y:o.top+"px"},minHeight:"50px",minWidth:"50px",showOnInit:!1,allowDraggable:!1,enableResize:!1,enableModal:!1,isResponsive:!1,cssClass:this.model.cssClass}),Z("#"+t._id+"ColumnRenameDialog_wrapper").removeClass("e-shadow").addClass("e-treegrid-dialog"),Z("#"+t._id+"ColumnRenameDialog").removeClass("e-shadow")):(t._columnRenameDialog.ejDialog({width:"auto",height:"auto",minHeight:0,minWidth:240,showOnInit:!1,enableResize:!1,allowDraggable:!0,enableModal:!0,isResponsive:!0,cssClass:this.model.cssClass}),Z("#"+t._id+"ColumnRenameDialog_wrapper").addClass("e-treegrid-dialog")),e.focus().select()},_triggerRenameColumn:function(e){var t=this;e!==P&&e.model.text==t._okButtonText&&(e=t._columnRenameDialog.find("#"+t._id+"RenameHeaderText").val(),t.renameColumn(t._targetColumnIndex,e),this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&(J.isNullOrUndefined(t.model.editSettings.dialogEditorTemplateID)||""==t.model.editSettings.dialogEditorTemplateID)?t._treeGridAddEditDialog():this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&!J.isNullOrUndefined(t.model.editSettings.dialogEditorTemplateID)&&""!=t.model.editSettings.dialogEditorTemplateID&&t._treeGridAddEditDialogTemplate()),t._columnRenameDialog.ejDialog("close")},renderColumnAddDialog:function(){var e,t,i=this,s=i.model.columnDialogFields,n={},a=i.getOffsetRect(Z("#"+i._id)[0]);if(n.requestType="openColumnAddDialog",s.length){n.data={};for(var r=0;r<s.length;r++){var o=s[r];n.data[o]=""}}else n.data={field:"",headerText:"",editType:""};i._trigger("actionBegin",n)||(n.requestType="columnAdd",t=document.createElement("div"),Z(t).addClass("e-addedColumn"),t.innerHTML=Z.render[i._id+"_ColumnAddTemplate"](n.data),Z("#"+i._id+"_dialogColumnAdd").html(Z(t)),(e={}).cssClass=this.model.cssClass,e.enableResize=!1,e.width="auto",e.height="auto",e.contentSelector="#"+i._id,e.rtl=i.model.rtl,e.allowKeyboardNavigation=!1,t=i._columnDialogTitle.insertColumn,e.title=t,(Z(window).width()>i._responsiveMinWidth||!i.model.isResponsive||i.model.isFromGantt)&&(e.enableModal=!0,e.allowDraggable=!0,e.isResponsive=!0,Z("#"+i._id+"_dialogColumnAdd").ejDialog(e),Z("#"+i._id+"_dialogColumnAdd").addClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogColumnAdd_wrapper").addClass("e-treegridadaptivedialog e-treegrid-dialog"),Z("#"+i._id+"_dialogColumnAdd_wrapper").find("div.e-dialog-scroller").addClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogColumnAdd").ejDialog("open"),Z("#"+i._id+"_dialogColumnAdd").find(".e-dropdowntreegrid").css("width","438px")),Z(window).width()<=i._responsiveMinWidth&&i.model.isResponsive&&!i.model.isFromGantt&&(e.isResponsive=!1,e.enableResize=!1,e.enableModal=!1,e.allowDraggable=!1,e.width=Z("#"+i._id).width()+"px",e.height=Z("#"+i._id).height()+"px",e.minHeight="150px",e.minWidth="150px",Z("#"+i._id+"_dialogColumnAdd").removeClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogColumnAdd").find(".e-dropdowntreegrid").css({width:Z("#"+i._id).width()-80+"px",height:"150px"}),Z("#"+i._id+"_dialogColumnAdd").ejDialog(e),Z("#"+i._id+"_dialogColumnAdd").ejDialog("open"),Z("#"+i._id+"_dialogColumnAdd_wrapper").removeClass("e-treegridadaptivedialog").addClass("e-treegrid-dialog"),Z("#"+i._id+"_dialogColumnAdd_wrapper").find("div.e-dialog-scroller").removeClass("e-treegridadaptivedialog"),Z("#"+i._id+"_dialogColumnAdd_wrapper").css({left:a.left+"px",top:a.top+"px"}),Z("#"+i._id+"_dialogColumnAdd_wrapper").removeClass("e-shadow"),Z("#"+i._id+"_dialogColumnAdd").removeClass("e-shadow"),Z("#"+i._id+"_dialogColumnAdd_wrapper").find("div.e-dialog-scroller").css({height:Z("#"+i._id).height()-50+"px"})),i._clearColumnMenu(),i._refreshColumnAddForm(),Z("#"+i._id+"_dialogColumnAdd").ejDialog("refresh"))},setAddColumnFields:function(){var e=this,t=e.model;if(t.columnDialogFields.length){e._addColumnFields=t.columnDialogFields;for(var i=["field","headerText","editType"],s=0;s<i.length;s++)if(-1==Z.inArray(i[s],e._addColumnFields))switch(i[s]){case"field":e._addColumnFields.splice(0,0,i[s]);break;case"headerText":e._addColumnFields.splice(1,0,i[s]);break;case"editType":e._addColumnFields.splice(2,0,i[s])}t.isFromGantt?t.allowSorting||-1==e._addColumnFields.indexOf("allowSorting")||e._addColumnFields.splice(e._addColumnFields.indexOf("allowSorting"),1):(t.allowSorting||-1==e._addColumnFields.indexOf("allowSorting")||e._addColumnFields.splice(e._addColumnFields.indexOf("allowSorting"),1),t.allowFiltering||-1==e._addColumnFields.indexOf("allowFiltering")||e._addColumnFields.splice(e._addColumnFields.indexOf("allowFiltering"),1)),"row"==t.selectionSettings.selectionMode&&-1!=e._addColumnFields.indexOf("allowCellSelection")&&e._addColumnFields.splice(e._addColumnFields.indexOf("allowCellSelection"),1),-1!=e._addColumnFields.indexOf("displayAsCheckbox")&&e._addColumnFields.push(e._addColumnFields.splice(e._addColumnFields.indexOf("displayAsCheckbox"),1)[0]),e._addColumnFieldsTxt=[];for(s=0;s<e._addColumnFields.length;s++)switch(e._addColumnFields[s]){case"field":e._addColumnFieldsTxt.push(e._columnDialogTexts.field);break;case"headerText":e._addColumnFieldsTxt.push(e._columnDialogTexts.headerText);break;case"editType":e._addColumnFieldsTxt.push(e._columnDialogTexts.editType);break;case"filterEditType":e._addColumnFieldsTxt.push(e._columnDialogTexts.filterEditType);break;case"allowFiltering":e._addColumnFieldsTxt.push(e._columnDialogTexts.allowFiltering);break;case"allowFilteringBlankContent":e._addColumnFieldsTxt.push(e._columnDialogTexts.allowFilteringBlankContent);break;case"allowSorting":e._addColumnFieldsTxt.push(e._columnDialogTexts.allowSorting);break;case"visible":e._addColumnFieldsTxt.push(e._columnDialogTexts.visible);break;case"width":e._addColumnFieldsTxt.push(e._columnDialogTexts.width);break;case"textAlign":e._addColumnFieldsTxt.push(e._columnDialogTexts.textAlign);break;case"headerTextAlign":e._addColumnFieldsTxt.push(e._columnDialogTexts.headerTextAlign);break;case"isFrozen":e._addColumnFieldsTxt.push(e._columnDialogTexts.isFrozen);break;case"allowFreezing":e._addColumnFieldsTxt.push(e._columnDialogTexts.allowFreezing);break;case"allowCellSelection":e._addColumnFieldsTxt.push(e._columnDialogTexts.allowCellSelection);break;case"showInColumnChooser":e._addColumnFieldsTxt.push(e._columnDialogTexts.showInColumnChooser);break;case"clipMode":e._addColumnFieldsTxt.push(e._columnDialogTexts.clipMode);break;case"tooltip":e._addColumnFieldsTxt.push(e._columnDialogTexts.tooltip);break;case"headerTooltip":e._addColumnFieldsTxt.push(e._columnDialogTexts.headerTooltip);break;case"displayAsCheckbox":e._addColumnFieldsTxt.push(e._columnDialogTexts.displayAsCheckbox);break;case"priority":e._addColumnFieldsTxt.push(e._columnDialogTexts.priority)}}else e._addColumnFields=["field","headerText","editType"],e._addColumnFieldsTxt=[e._columnDialogTexts.field,e._columnDialogTexts.headerText,e._columnDialogTexts.editType]},setColumnCelEditType:function(e){var t;this.model.columns;return"field"==e||"filterEditType"==e||"editType"==e||"textAlign"==e||"headerTextAlign"==e||"clipMode"==e?t=J.buildTag("input.e-field e-dropdownlist","",{},{value:"{{:#data['"+e+"']}}",id:this._id+e+"ColumnAdd",name:e,"data-dialog":"ColumnAdd"}):"headerText"==e||"tooltip"==e||"headerTooltip"==e?(t=J.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:#data['"+e+"']}}",id:this._id+e+"ColumnAdd",name:e,"data-dialog":"ColumnAdd"})).css({margin:"0px",padding:"1px 4px 1px 0px"}):"allowFiltering"==e||"allowSorting"==e||"isFrozen"==e||"allowFreezing"==e?t=' <input type ="checkbox" id="'+this._id+e+'ColumnAdd" data-dialog ="ColumnAdd" name="'+e+'" data-edittype="booleanedit">':"allowFilteringBlankContent"==e||"visible"==e||"allowCellSelection"==e||"showInColumnChooser"==e||"displayAsCheckbox"==e?t=' <input type ="checkbox" id="'+this._id+e+'ColumnAdd" data-dialog = "ColumnAdd" checked = "checked" name="'+e+'" data-edittype="booleanedit">':"width"!=e&&"priority"!=e||((t=J.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:#data['"+e+"']}}",id:this._id+e+"ColumnAdd",name:e,"data-dialog":"ColumnAdd"})).attr("data-edittype","numericedit"),t.css({margin:"0px",padding:"1px 4px 1px 0px"})),t},columnAddDialogTemplate:function(){var e,t=this,i=t.model;if(0!=i.columns.length){t.setAddColumnFields();for(var s,n,a,r,o=J.buildTag("div","",{},{"data-unselectable":"on"}),l=J.buildTag("form","",{height:"100%",width:"100%","font-size":"14px"},{id:t._id+"ColumnAddForm"}),d=J.buildTag("table","",{width:"100%","margin-top":"0px"},{"data-unselectable":"on"}),h=J.buildTag("tr","",{width:"100%"}),c=0;c<t._addColumnFields.length;c++)h.children("td").length<2?(u=J.buildTag("td.e-add-property-container","",{},{"data-unselectable":"on"}),p=J.buildTag("table","",{width:"100%",outline:"none","margin-top":"0px"},{"data-unselectable":"on"}),s=J.buildTag("tr"),(n=J.buildTag("td.e-editLabel","",{outline:"none"},{"data-unselectable":"on"})).append("<label style='font-weight:normal;'>"+t._addColumnFieldsTxt[c]+"</label>"),s.append(n),p.append(s),a=J.buildTag("tr"),r=J.buildTag("td.e-editValue"),e=t.setColumnCelEditType(t._addColumnFields[c]),r.html(e),a.append(r),p.append(a),"displayAsCheckbox"==t._addColumnFields[c]&&p.addClass("e-display-checkbox-conatiner").css("display","none"),u.append(p),h.append(u)):(d.append(h),h=J.buildTag("tr"),c--);d.append(h);var u,p,m,g,f=J.buildTag("tr");i.showColumnChooser&&(u=J.buildTag("td.e-add-property-container","",{},{colspan:2,"data-unselectable":"on"}),p=J.buildTag("table#"+t._id+"dropdownDataTable","",{width:"100%",outline:"none"},{"data-unselectable":"on"}),m=J.buildTag("tr"),(i=J.buildTag("td.e-editLabel","",{outline:"none"},{"data-unselectable":"on"})).append("<label for='dropdownData' style='font-weight:normal;'>"+t._columnDialogTexts.columnsDropdownData+"</label>"),m.append(i),p.append(m),s=J.buildTag("tr"),(n=J.buildTag("td.e-editLabel","",{outline:"none"},{"data-unselectable":"on"})).append("<span class='e-addpre e-icon e-enable e-add-dialog' style='cursor:pointer; width: auto;'>"+t._columnDialogTexts.addData+"</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class='e-deletepre e-icon e-disable e-add-dialog' style='cursor:pointer; width: auto;'>&nbsp;&nbsp;"+t._columnDialogTexts.deleteData+"</span>"),s.append(n),p.append(s),a=J.buildTag("tr"),r=J.buildTag("td.e-editValue"),i=Z("#"+t._id).width()<=t._responsiveMinWidth?(g=Z("#"+t._id).width()-80+"px",J.buildTag("div.e-dropdowntreegrid","",{width:g,overflow:"hidden"})):J.buildTag("div.e-dropdowntreegrid","",{width:"438px",overflow:"hidden"}),g=J.buildTag("div#treegrid"+t._id+"dropdownData","",{width:"100%",height:"150px"},{}),i.append(g),r.append(i),a.append(r),p.append(a),u.append(p),f.append(u),d.append(f)),l.append(d),o=t.renderColumnAddDialogButton(l,o),Z.templates(t._id+"_ColumnAddTemplate",o.html())}},renderColumnAddDialogButton:function(e,t){var i="ColumnAddDialog_",s=this.model,n=J.buildTag("div.e-add-dialog-btn-ok","",{},{}),a=J.buildTag("div","",{},{}),r=J.buildTag("input","",{"border-radius":"3px"},{type:"button",id:i+this._id+"_Ok"}),o=this._okButtonText;r.ejButton({cssClass:s.cssClass,text:o,width:"100%"});var l=J.buildTag("div.e-add-dialog-btn-cancel","",{},{}),d=J.buildTag("div","",{},{}),o=this._cancelButtonText,i=J.buildTag("input","",{"border-radius":"3px"},{type:"button",id:i+this._id+"_Cancel"});i.ejButton({cssClass:s.cssClass,text:o,width:"100%"});o=J.buildTag("div","",{},{class:"e-treegrid-add-btn"});return a.append(r),n.append(a),o.append(n),d.append(i),l.append(d),o.append(l),e.appendTo(t),o.appendTo(t),t},_buttonClick:function(e){if(0!=e.keyCode&&e.keyCode!==P&&13!=e.keyCode)return!0;var t,i=this,s=i.model,n=s.treeColumnIndex,a=!1,r={},o=i._addColumnFields,l=s.columns,d={};if(e.target.id=="ColumnAddDialog_"+i._id+"_Ok"){for(var h=document.getElementById(i._id+"ColumnAddForm"),c=0;c<o.length;c++){var u,p,m=o[c],g=Z(h).find("#"+i._id+m+"ColumnAdd");"editType"==m||"filterEditType"==m||"textAlign"==m||"headerTextAlign"==m||"clipMode"==m?(u=g.data("ejDropDownList"),r[m]=u._selectedValue,"editType"!=m||"dropdownedit"!=r[m]||0<(p=Z(h).find("#treegrid"+i._id+"dropdownData").data("ejTreeGrid").model.dataSource).length&&(r.dropdownData=p)):"showInColumnChooser"==m||"allowCellSelection"==m||"allowSorting"==m||"allowFiltering"==m||"allowFilteringBlankContent"==m||"visible"==m||"isFrozen"==m||"allowFreezing"==m||"displayAsCheckbox"==m?(p=g.data("ejCheckBox"),r[m]=p._isChecked):""!=g.val()||"headerText"!=m&&"field"!=m?r[m]="priority"==m?g.ejNumericTextbox("getValue"):g.val():"field"==m?r[m]="Column"+(s.columns.length+1):"headerText"==m&&(r[m]="Column "+(s.columns.length+1))}"left"==i._insertPosition?t=i._targetColumnIndex:"right"==i._insertPosition&&(t=i._targetColumnIndex+1),t<=n&&(s.treeColumnIndex=n+1),s.isFromGantt||t<=i._frozenColumnsLength-1&&(a=!0);n={},n=s.isFromGantt?{field:r.field,headerText:r.headerText,editType:r.editType,allowSorting:J.isNullOrUndefined(r.allowSorting)?null:r.allowSorting,visible:0!=r.visible,width:r.width||150,textAlign:r.textAlign||"left",headerTextAlign:r.headerTextAlign||"left",dropdownData:r.dropdownData||null,allowCellSelection:J.isNullOrUndefined(r.allowCellSelection)?null:r.allowCellSelection,mappingName:r.field,displayAsCheckbox:0!=r.displayAsCheckbox,clipMode:r.clipMode||"clip",tooltip:r.tooltip,headerTooltip:r.headerTooltip}:{field:r.field,headerText:r.headerText,editType:r.editType,filterEditType:r.filterEditType||"stringedit",allowFiltering:J.isNullOrUndefined(r.allowFiltering)?null:r.allowFiltering,allowFilteringBlankContent:J.isNullOrUndefined(r.allowFilteringBlankContent)?null:r.allowFilteringBlankContent,allowSorting:J.isNullOrUndefined(r.allowSorting)?null:r.allowSorting,visible:0!=r.visible,width:r.width||150,textAlign:r.textAlign||"left",headerTextAlign:r.headerTextAlign||"left",clipMode:r.clipMode||"clip",tooltip:r.tooltip,headerTooltip:r.headerTooltip,isFrozen:1==r.isFrozen||1==a,allowFreezing:J.isNullOrUndefined(r.allowFreezing)?null:r.allowFreezing,dropdownData:r.dropdownData||null,allowCellSelection:J.isNullOrUndefined(r.allowCellSelection)?null:r.allowCellSelection,showInColumnChooser:0!=r.showInColumnChooser,displayAsCheckbox:0!=r.displayAsCheckbox,priority:r.priority||""};d.requestType="insertColumn",d.columnObject=n,d.insertIndex=t,i._trigger("actionComplete",d)||(l.splice(d.insertIndex,0,d.columnObject),i._refreshFrozenColumns(),i._updateWrapRowHeights(null,"virtualRefresh"),s.isFromGantt&&i._updateAddEditDialogTemplate()),Z("#"+i._id+"_dialogColumnAdd").ejDialog("close"),s.allowFiltering&&"menu"==s.filterSettings.filterType&&(d=d.columnObject.filterEditType||d.columnObject.editType,-1==i._renderedFilterMenuDialog.indexOf(d)&&i._renderFilterMenu(d)),this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&(J.isNullOrUndefined(s.editSettings.dialogEditorTemplateID)||""==s.editSettings.dialogEditorTemplateID)?i._treeGridAddEditDialog():this.model.editSettings.allowEditing&&"dialogEditing"==this.model.editSettings.editMode&&!J.isNullOrUndefined(s.editSettings.dialogEditorTemplateID)&&""!=s.editSettings.dialogEditorTemplateID&&i._treeGridAddEditDialogTemplate()}else e.target.id=="ColumnAddDialog_"+i._id+"_Cancel"&&Z("#"+i._id+"_dialogColumnAdd").ejDialog("close");if("dialogEditing"==this.model.editSettings.editMode||"batchediting"==s.editSettings.editMode.toLowerCase()&&"dialog"==s.editSettings.batchEditSettings.editMode)if(e.target.id=="EditFormDialog_"+this._id+"_Save"){if(!i.editFormValidate())return!0;0<this.element.find(".e-dialogaddrow .e-treegridform").length?(i.model.allowSelection&&"multiple"==i.model.selectionSettings.selectionType&&this._multiSelectPopup&&this._multiSelectPopup.is(":visible")&&i._clearMultiSelectPopup(),i._treegridDialogAddRow()&&(i._isTreeAddEditDialogSave=!0,Z("#"+this._id+"_dialogEdit").ejDialog("close"))):0<this.element.find(".e-dialogeditedrow .e-treegridform").length&&(i.endEdit()||(i._isTreeAddEditDialogSave=!0,Z("#"+this._id+"_dialogEdit").ejDialog("close")))}else e.target.id=="EditFormDialog_"+this._id+"_Cancel"&&Z("#"+this._id+"_dialogEdit").ejDialog("close");return!1},_treegridDialogAddRow:function(){for(var e,t=this.model.columns,i={},s=0;s<t.length;s++){var n=t[s],a=n.field;J.isNullOrUndefined(n)||""==a||this._isCommandColumn(n)||this._checkboxSelection&&n.nonColumn||(e=this.getCurrentEditCellDataForRowEdit(a,n.editType,s),e=J.isNullOrUndefined(e)||n.editType==J.TreeGrid.EditingType.Numeric&&isNaN(e)?null:e,-1!=a.indexOf(".")?J.createObject(a,e,i):i[a]=e)}return!!this._addRecord(i,this.model.editSettings.rowPosition,null,"dialog")},_refreshColumnAddForm:function(){for(var t,s,n=this,e=Z("#"+n._id+"ColumnAddForm"),i=e.find("input,select"),a=0,r=!1,o=i.length,l=n.model,d={},h=[],c=(n.model.rowHeight,n._editTypeText),u=n._textAlignTypeText,p=n._clipModeText;a<o;a++){var m,g,f,_="100%",v=(m=i.eq(a)).prop("name");if(m.hasClass("e-dropdownlist"))if("field"==v){var b=[],x=[];l.columns.length&&(h=Z.map(l.columns,function(e){return l.isFromGantt&&e.mappingName||e.field})),n._dataSourcefields.length||(n._dataSourcefields=Z.extend(!0,[],h),n.getAllDataSourceFields());for(var y=0;y<n._dataSourcefields.length;y++)-1==Z.inArray(n._dataSourcefields[y],h)&&n._dataSourcefields[y]!=l.notesMapping&&(l.isFromGantt&&"serialNumber"!=n._dataSourcefields[y]||!l.isFromGantt)&&x.push(n._dataSourcefields[y]);for(var w=0;w<x.length;w++)b.push({text:x[w]});m.ejDropDownList({width:_,cssClass:l.cssClass,dataSource:b,fields:{text:"text",value:"text"}})}else"editType"==v||"filterEditType"==v?(b=[{text:c.string,value:"stringedit"},{text:c.numeric,value:"numericedit"},{text:c.datePicker,value:"datepicker"},{text:c.dateTimePicker,value:"datetimepicker"},{text:c.dropdown,value:"dropdownedit"},{text:c.boolean,value:"booleanedit"}],m.ejDropDownList({width:_,dataSource:b,cssClass:l.cssClass,fields:{text:"text",value:"value"},selectedIndex:0,change:function(e){var t=!1;1==Z(s).is(":hidden")&&"dropdownedit"==e.value?(Z(s).attr("hidden",!1),t=!0):0==Z(s).is(":hidden")&&"dropdownedit"!=e.value&&(Z(s).attr("hidden",!0),t=!0);var i=Z("#"+n._id+"_dialogColumnAdd").find(".e-display-checkbox-conatiner");"booleanedit"==e.value&&0<i.length&&"none"==i.css("display")?(i.css("display","block"),t=!0):"booleanedit"!=e.value&&0<i.length&&"block"==i.css("display")&&(i.css("display","none"),t=!0),t&&Z("#"+n._id+"_dialogColumnAdd").ejDialog("refresh")}})):"textAlign"==v||"headerTextAlign"==v?(g=[{text:u.left,value:"left"},{text:u.right,value:"right"},{text:u.center,value:"center"}],m.ejDropDownList({width:_,dataSource:g,cssClass:l.cssClass,fields:{text:"text",value:"value"},selectedIndex:0})):"clipMode"==v&&(f=[{text:p.clip,value:"clip"},{text:p.ellipsis,value:"ellipsis"}],m.ejDropDownList({width:_,dataSource:f,cssClass:l.cssClass,fields:{text:"text",value:"value"},selectedIndex:0}));else m.hasClass("e-numerictextbox")?(f=m.val(),d.width=_,d.showSpinButton=!0,d.cssClass=l.cssClass,"width"==v?(d.maxValue=250,d.minValue=30,f.length?d.value=parseFloat(f):d.value=150):"priority"==v&&(d.maxValue=6,d.minValue=1,f.length?d.value=parseFloat(f):d.value=null),m.ejNumericTextbox(d)):"showInColumnChooser"!=v&&"allowCellSelection"!=v&&"allowFiltering"!=v&&"allowFilteringBlankContent"!=v&&"allowSorting"!=v&&"visible"!=v&&"isFrozen"!=v&&"allowFreezing"!=v&&"displayAsCheckbox"!=v||((v={}).cssClass=l.cssClass,v.size="small",m.ejCheckBox(v));m.is(":disabled")||r||m.is(":hidden")&&"object"!=typeof m.data("ejDropDownList")||n._isEnterKeyPressed||(n._focusElements(m.closest("td")),r=!0)}t="#treegrid"+n._id+"dropdownData",Z(t).length&&(Z(t).ejTreeGrid({dataSource:[],allowSorting:!1,allowAdding:!0,columns:[{headerText:n._columnDialogTexts.dropdownTableText,field:"text",editType:J.TreeGrid.EditingType.String,width:"150px"},{headerText:n._columnDialogTexts.dropdownTableValue,field:"value",editType:J.TreeGrid.EditingType.String,width:"150px"}],enableAltRow:!0,allowColumnResize:!0,cssClass:l.cssClass,enableResize:!0,editSettings:{allowAdding:!0,allowDeleting:!0,allowEditing:!0,editMode:"cellEditing"},locale:l.locale,treeColumnIndex:5,emptyRecordText:"Add values for dropdown",rowSelected:function(e){e.data&&(Z(".e-deletepre").addClass("e-enable").removeClass("e-disable"),Z(".e-deletepre").bind("click",Z.proxy(n._deleteDropDownRow,n,Z(t))))}}),s=e.find("#"+n._id+"dropdownDataTable").parent()[0],Z(s).attr("hidden",!0),Z(".e-addpre").bind("click",Z.proxy(n._addDropDownRow,n,Z(t))))},_addDropDownRow:function(e,t){var i=e.data("ejTreeGrid"),e=i.model.dataSource.length,e={text:"Text "+(e+1),value:"Value"+(e+1)};i.addRow(e,"bottom")},_deleteDropDownRow:function(e,t){var i=e.data("ejTreeGrid"),s=i.model.updatedRecords.length,n=i.model.selectedItem;0!=s&&n&&(i.deleteRow(),Z(".e-deletepre").addClass("e-disable").removeClass("e-enable"),Z(".e-deletepre").unbind("click",Z.proxy(this._deleteDropDownRow,this,e)))},getAllDataSourceFields:function(){for(var e=this.model,t=e.dataSource,i=0;i<t.length;i++){var s,n=t[i];for(s in n)s==e.childMapping?this.getChildKeys(n[s]):-1==Z.inArray(s,this._dataSourcefields)&&(e.isFromGantt?"undefined"!=s&&s!=e.notesMapping&&this._dataSourcefields.push(s):"object"!=typeof n[s]&&"ejvalue"!=s&&this._dataSourcefields.push(s))}},getChildKeys:function(e){var t=this.model;if(e)for(var i=0;i<e.length;i++){var s,n=e[i];for(s in n)s==t.childMapping?this.getChildKeys(n[s]):-1==Z.inArray(s,this._dataSourcefields)&&"object"!=typeof n[s]&&"ejvalue"!=s&&this._dataSourcefields.push(s)}},_renderUpdateConfirmDialog:function(){var e=this,t=e._confirmDeleteText,i=J.buildTag("div.e-content",e._deleteColumnText),s=J.buildTag("span.e-buttons","<input class='e-confirm-dialog-btn-ok' type='button' id="+e._id+"ConfirmDialogOK value="+e._okButtonText+" /> <input class='e-confirm-dialog-btn-cancel' type='button' id="+e._id+"ConfirmDialogCancel value='"+e._cancelButtonText+"' />"),n=J.buildTag("div","",{},{class:"e-confirm-dialog-btn"});n.append(s),e._updateConfirmDialog=J.buildTag("div","","",{title:t,id:e._id+"ConfirmDialog"}),e._updateConfirmDialog.append(i).append(n),e.element.append(e._updateConfirmDialog),s.find("input").ejButton({cssClass:e.model.cssClass,showRoundedCorner:!0,size:"normal",click:Z.proxy(e._triggerUpdateConfirm,e)}),e._updateConfirmDialog.ejDialog({width:"auto",minHeight:0,minWidth:0,showOnInit:!1,isResponsive:!0,enableResize:!1,enableModal:!0,cssClass:e.model.cssClass}),Z("#"+e._id+"ConfirmDialog_wrapper").addClass("e-treegrid-dialog")},_triggerUpdateConfirm:function(e){e!==P&&e.model.text==this._okButtonText&&this._updateConfirmDialog.find(".e-content").text()==this._deleteColumnText&&this.deleteColumn(this._targetColumnIndex),this._updateConfirmDialog.ejDialog("close")},deleteColumn:function(e){var t,i=this,s=i.model,n=s.columns,a=s.sortSettings&&s.sortSettings.sortedColumns.length?s.sortSettings.sortedColumns:null,r=n[e],o={};e==s.treeColumnIndex||n[e].nonColumn||(o.requestType="deleteColumn",o.columnObject=r,o.deleteIndex=e,i._trigger("actionComplete",o)||(!s.isFromGantt&&s.allowSorting&&0<s.filterSettings.filteredColumns.length&&i.clearFilter(r.field),t=n.splice(e,1),!a||(n=Z.grep(a,function(e){return s.isFromGantt?e.field==t[0].mappingName:e.field==t[0].field})).length&&(a.splice(a.indexOf(n[0]),1),i.processBindings(),s.isFromGantt&&(o.requestType="sorting",i._trigger("actionComplete",o))),e<=s.treeColumnIndex&&(s.treeColumnIndex=s.treeColumnIndex-1),s.showTotalSummary&&s.collapsibleTotalSummary&&e==i._summaryColumnIndex&&(i._summaryColumnIndex=0),i._refreshFrozenColumns(),i._updateWrapRowHeights(null,"virtualRefresh"),s.isFromGantt&&i._updateAddEditDialogTemplate()))},getOffsetRect:function(e){var t=e.getBoundingClientRect(),i=document.body,s=document.documentElement,n=window.pageYOffset||s.scrollTop||i.scrollTop,a=window.pageXOffset||s.scrollLeft||i.scrollLeft,e=s.clientTop||i.clientTop||0,i=s.clientLeft||i.clientLeft||0,e=t.top+n-e,i=t.left+a-i;return{top:Math.round(e),left:Math.round(i)}},_moveToNextMenuItem:function(e){var t,i,s,n=this.model,a={},r=this._isContextMenuItems||n.isFromGantt?(i=n.isFromGantt?(t=Z("#"+this._id.replace("ejTreeGrid","")).data("ejGantt"),Z("#"+this._id.replace("ejTreeGrid","")+"_ContextMenu")):Z("#"+(t=this)._id+"_ContextMenu"),t._contextMenuItems):(i=Z("#"+(t=this)._id+"_headerContextMenu"),t._headerContextMenuItems),o=Z("#"+t._activeMenuItemId);switch(e){case"next":0==o.length?a=i.find("div.e-menuitem:not(.e-disable)").first():0<(a=o.closest("li").next("li").find("div.e-menuitem")).length&&a.hasClass("e-disable")&&(a=this._findContextMenuItem(a,"next")),Z("#"+t._id+"_SubContextMenu"+t._activeMenuItemId).remove();break;case"prev":a=this._findContextMenuItem(o,"prev"),Z("#"+t._id+"_SubContextMenu"+t._activeMenuItemId).remove();break;case"expand":0<o.length&&(t._showSubContextMenu(o[0],r),0<(s=Z("#"+t._id+"_SubContextMenu"+t._activeMenuItemId)).length&&(a=s.find("div.e-menuitem:not(.e-disable)").first()));break;case"collapse":0<(s=Z(o).closest(".e-tginnerContextmenu")).length&&(i=s.attr("id").replace(t._id+"_SubContextMenu",""),a=Z("#"+i),Z("#"+t._id+"_SubContextMenu"+t._activeMenuItemId).remove(),s.remove());break;case"save":0<o.length&&(0==Z("#"+t._activeMenuItemId).find(".e-expander").length?(n.isFromGantt?t._contextMenuClickHandler(Z("#"+t._activeMenuItemId)):t.contextMenuOperations(t._activeMenuItemId),t._clearContextMenu()):(t._showSubContextMenu(o[0],r),0<(s=Z("#"+t._id+"_SubContextMenu"+t._activeMenuItemId)).length&&(a=s.find("div.e-menuitem:not(.e-disable)").first())))}0<a.length&&(n=this._isContextMenuItems||n.isFromGantt?"e-tgcontextmenu-mouseover":"e-columnmenuselection","next"!=e&&"prev"!=e||o.removeClass(n),a.addClass(n),t._activeMenuItemId=Z(a).attr("id"))},_findNextColumnMenuItem:function(e,t,i){var s=i?e.closest("li").next("li").find("div.e-columnmenuitem"):e.closest("li").next("li").find("div.e-menuitem "),e=i?e.closest("li").prev("li").find("div.e-columnmenuitem"):e.closest("li").prev("li").find("div.e-menuitem");return"next"===t?0<s.length&&s.hasClass("e-disable")?i?this._findNextColumnMenuItem(s,"next",!0):this._findNextColumnMenuItem(s,"next",!1):s:0<e.length&&e.hasClass("e-disable")?i?this._findNextColumnMenuItem(e,"prev",!0):this._findNextColumnMenuItem(e,"prev",!1):e},_getFieldValue:function(e,t){return""!=e?e.split(".").join(""):"TGcolumn"+t},_findContextMenuItem:function(e,t){return"next"===t?0<(t=e.closest("li").next("li").find("div.e-menuitem")).length&&t.hasClass("e-disable")?this._findContextMenuItem(t,"next"):t:0<(e=e.closest("li").prev("li").find("div.e-menuitem")).length&&e.hasClass("e-disable")?this._findContextMenuItem(e,"prev"):e},updateRecordByIndex:function(e,t){var a=this,r=a.model,i=r.updatedRecords,s={},e=e,o=-1<e&&0<i.length?i[e]:null;if(a._isRowEdit?a.cancelRowEditCell():a.model.isEdit&&a.cancelEditCell(),J.isNullOrUndefined(o)||o.isSummaryRow)return!1;var i=o.item,i=Z.extend(!0,{},i),l=Z.extend(!0,{},r.columns);Z.each(t,function(e,t){var i,s,n=e,e=t;J.isNullOrUndefined(n)||(i=!1,Z.each(l,function(e,t){if(t.field==n)return i=!0,delete l[parseInt(e)],!1}),i&&("batchEditing"==r.editSettings.editMode&&(s={},t=J.copyObject({},o.item),r.columns.filter(function(e){e.field==n&&(s=e)}),s.editType!=J.TreeGrid.EditingType.DatePicker&&s.editType!=J.TreeGrid.EditingType.DateTimePicker||(e=J.parseDate(e,r.dateFormat,r.locale)),a._checkModfiedCellValue(J.getObject(n,t),e,s)&&(a._createBatchEditedFields(o,n,e,s),a._batchEditStarts=!0,a._updateBatchChanges(o.item))),(o=a._restoreCustomData(o,e,n)).item=a._restoreCustomData(o.item,e,n)))});t=r.currentViewData.indexOf(o);(!r.enableVirtualization||-1<t)&&J.TreeGrid.refreshRow(a,t),r.idMapping&&r.parentIdMapping&&a._updateLastInsertedId(o[r.idMapping]),s.editType="rowedit",s.previousValue=i,s.currentValue=o.item,s.rowIndex=e,r.showSummaryRow&&a._updateSummaryRow(s),r.showTotalSummary&&a._updateTotalSummaryRow(s),"batchEditing"==r.editSettings.editMode&&a._cancelSaveTools()},_saveEditedElements:function(){this.model.isEdit?this.saveCell():this._isRowEdit&&this.saveRow()}}),J.TreeGrid.Actions={Sorting:"sorting",BeginEdit:"beginedit",Save:"save",Add:"add",Delete:"delete",Cancel:"cancel",Refresh:"refresh",Searching:"searching",ExpandCollapse:"expandcollapse",Selection:"selection",rowHover:"rowHover",Scroll:"scroll",ContextMenuAdd:"contextMenuAdd",RefreshDataSource:"refreshDataSource",DragAndDrop:"dragAndDrop",Paging:"paging",Filter:"filtering",RowIndexUpdate:"rowIndexUpdate"},J.TreeGrid.SelectionType={Single:"single",Multiple:"multiple",Checkbox:"checkbox"},J.TreeGrid.FilterType={FilterBar:"filterbar",Menu:"menu",Excel:"excel"},J.TreeGrid.FilterHierarchyMode={Parent:"parent",Child:"child",Both:"both",None:"none"},J.TreeGrid.SearchHierarchyMode={Parent:"parent",Child:"child",Both:"both",None:"none"},J.TreeGrid.HeaderTextOverflow={None:"none",Wrap:"wrap"},J.TreeGrid.EditMode={CellEditing:"cellEditing",RowEditing:"rowEditing",DialogEditing:"dialogEditing",BatchEditing:"batchEditing"},J.TreeGrid.BatchEditMode={Cell:"cell",Row:"row",Dialog:"dialog"},J.TreeGrid.ClipMode={Clip:"clip",Ellipsis:"ellipsis"},J.TreeGrid.PageSizeMode={All:"all",Root:"root"},J.TreeGrid.PrintMode={AllPages:"allPages",CurrentPage:"currentPage"},J.TreeGrid.RowPosition={Top:"top",Bottom:"bottom",Above:"aboveSelectedRow",Below:"belowSelectedRow",Child:"child"},J.TreeGrid.BeginEditAction={DblClick:"dblClick",Click:"click"},J.TreeGrid.EditingType={String:"stringedit",Boolean:"booleanedit",Numeric:"numericedit",Dropdown:"dropdownedit",DatePicker:"datepicker",DateTimePicker:"datetimepicker",Maskedit:"maskedit"},J.TreeGrid.ContextMenuItems={Add:"add",Edit:"edit",Delete:"delete"},J.TreeGrid.ColumnResizeMode={Normal:"normal",FixedColumns:"fixedcolumns",NextColumn:"nextcolumn"},J.TreeGrid.UnboundType={Edit:"edit",Save:"save",Delete:"delete",Cancel:"cancel"},J.TreeGrid=J.TreeGrid||{},J.TreeGrid._initCellEditType=function(e,t,i,s,n,a,r){var o,l=e,d=l.model,e=a?r:d.columns,a=e[s],n=n||"";(e[s].field||"").split(".");switch(e[s].editTemplate?e[s].editType="edittemplate":J.isNullOrUndefined(e[s].editType)&&(a.editType="stringedit"),r="dialogEditing"==l.model.editSettings.editMode?e[s].field:l._getFieldValue(e[s].field,s),a.editType){case"stringedit":(h=d.isFromGantt?(h={},"predecessor"===a.field&&(h["_"+i+"predecessorCell"]=Z.proxy(l._getPredecessorsValue,l)),Z.views.helpers(h),"predecessor"===a.field?J.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+i+"predecessorCell(#data)}}",id:i+a.field+n,name:a.field,"data-dialog":n}):"duration"===a.field?((h={})["_"+i+"getDurationStringValue"]=Z.proxy(J.Gantt._getDurationStringValue,l),Z.views.helpers(h),J.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+i+"getDurationStringValue(#data)}}",id:i+a.field+n,name:a.field,"data-dialog":n})):J.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+l._id+"cellValue(#data,'"+r+"')}}",id:i+e[s].field+n,name:e[s].field,"data-dialog":n})):J.buildTag("input.e-field e-ejinputtext","",{},{value:"{{:~_"+l._id+"cellValue(#data,'"+r+"')}}",id:i+l._getFieldValue(a.field,s)+n,name:a.field,autocomplete:"off","data-dialog":n})).attr("data-edittype",e[s].editType),t.html(h);break;case"maskedit":(h=J.buildTag("input.e-field e-maskedit","",{},{value:"{{:~_"+l._id+"cellValue(#data,'"+r+"')}}",id:i+l._getFieldValue(a.field,s)+n,name:a.field,"data-dialog":n})).attr("data-edittype",e[s].editType),t.html(h);break;case"booleanedit":t.html("{{if true===~_"+l._id+'cellValue(#data,"'+r+'")}}<input type ="checkbox" id="'+i+l._getFieldValue(e[s].field,s)+n+'" data-dialog ="'+n+'" name="'+e[s].field+'" checked="checked" data-edittype="'+e[s].editType+'"></input> {{else}}<input type ="checkbox" id="'+i+l._getFieldValue(e[s].field,s)+n+'" data-dialog ="'+n+'" name="'+e[s].field+'" data-edittype="'+e[s].editType+'">{{/if}}');break;case"numericedit":var h=J.buildTag("input.e-numerictextbox e-field","",{},{type:"text",value:"{{:~_"+l._id+"cellValue(#data,'"+r+"')}}",id:i+l._getFieldValue(e[s].field,s)+n,name:e[s].field,"data-dialog":n});h.attr("data-edittype",e[s].editType),t.append(h);break;case"datepicker":(o=J.buildTag("input.e-datepicker e-field","",{},{type:"text",value:"{{:~_"+l._id+"cellValue(#data,'"+r+"')}}",id:i+l._getFieldValue(e[s].field,s)+n,name:e[s].field,"data-dialog":n})).attr("data-edittype",e[s].editType),t.append(o);break;case"datetimepicker":(o=J.buildTag("input.e-datetimepicker e-field","",{},{type:"text",value:"{{:~_"+l._id+"cellValue(#data,'"+r+"')}}",id:i+l._getFieldValue(e[s].field,s)+n,name:e[s].field,"data-dialog":n})).attr("data-edittype",e[s].editType),t.append(o);break;case"dropdownedit":var c=J.buildTag("input.e-field e-dropdownlist","",{},{type:"text",id:i+l._getFieldValue(e[s].field,s)+n,name:e[s].field,"data-dialog":n});c.attr("data-edittype",e[s].editType).attr("data-cellvalue","{{:~_"+l._id+"cellValue(#data,'"+r+"')}}"),t.append(c);break;case"edittemplate":r=e[s].editTemplate.create;(a="string"==typeof r?(c=J.util.getObject(r,window),(Z.isFunction(c)?Z(c()):1==Z(r).length&&"SCRIPT"==Z(r).get(0).tagName?Z(Z(r).html()):Z(r)).attr({id:i+l._getFieldValue(a.field,s),name:a.field})):Z(r()).attr({id:i+l._getFieldValue(a.field,s),name:a.field})).attr("data-edittype",e[s].editType),t.append(a)}},J.TreeGrid.ToolbarItems={Add:"add",Edit:"edit",Delete:"delete",Update:"update",Cancel:"cancel",ExpandAll:"expandAll",CollapseAll:"collapseAll",PdfExport:"pdfExport",ExcelExport:"excelExport",Print:"print",Search:"search"},J.TreeGrid.SummaryType={Sum:"sum",Average:"average",Maximum:"maximum",Minimum:"minimum",Count:"count",MinimumDate:"minimumDate",MaximumDate:"maximumDate",TrueCount:"trueCount",FalseCount:"falseCount",Custom:"custom"},J.TreeGrid.SelectionMode={Row:"row",Cell:"cell"},J.TreeGrid.Locale=J.TreeGrid.Locale||{},J.TreeGrid.Locale.default=J.TreeGrid.Locale["en-US"]={toolboxTooltipTexts:{addTool:"Add",editTool:"Edit",updateTool:"Update",deleteTool:"Delete",cancelTool:"Cancel",expandAllTool:"Expand All",collapseAllTool:"Collapse All",pdfExportTool:"PDF Export",excelExportTool:"Excel Export",printTool:"Print",searchTool:"Search"},contextMenuTexts:{addRowText:"Add Row",editText:"Edit",deleteText:"Delete",saveText:"Save",cancelText:"Cancel",aboveText:"Above",belowText:"Below"},filterMenuTexts:{stringMenuOptions:[{text:"Starts With",value:"startswith"},{text:"Ends With",value:"endswith"},{text:"Contains",value:"contains"},{text:"Equals",value:"equal"},{text:"Does Not Equal",value:"notequal"}],numberMenuOptions:[{text:"Less Than",value:"lessthan"},{text:"Greater Than",value:"greaterthan"},{text:"Less Than Or Equal To",value:"lessthanorequal"},{text:"Greater Than Or Equal To",value:"greaterthanorequal"},{text:"Equals",value:"equal"},{text:"Does Not Equal",value:"notequal"}],filterValue:"Filter Value",filterButton:"Filter",clearButton:"Clear",enterValueText:"enter value"},columnMenuTexts:{sortAscendingText:"Sort Ascending",sortDescendingText:"Sort Descending",columnsText:"Columns",freezeText:"Freeze",unfreezeText:"Unfreeze",freezePrecedingColumnsText:"Freeze Preceding Columns",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteColumn:"Delete Column",renameColumn:"Rename Column",menuFilter:"Filter"},columnDialogTexts:{field:"Field",headerText:"Header Text",editType:"Edit Type",filterEditType:"Filter Edit Type",allowFiltering:"Allow Filtering",allowFilteringBlankContent:"Allow Filtering Blank Content",allowSorting:"Allow Sorting",visible:"Visible",width:"Width",textAlign:"Text Alignment",headerTextAlign:"Header Text Alignment",isFrozen:"Is Frozen",allowFreezing:"Allow Freezing",columnsDropdownData:"Column Dropdown Data",dropdownTableText:"Text",dropdownTableValue:"Value",addData:"Add",deleteData:"Remove",allowCellSelection:"Allow Cell Selection",showInColumnChooser:"Show In Column Chooser",clipMode:"Clip Mode",tooltip:"Tooltip",headerTooltip:"Header Tooltip",displayAsCheckbox:"Display As Checkbox",priority:"Priority"},columnDialogTitle:{insertColumn:"Insert Column",deleteColumn:"Delete Column",renameColumn:"Rename Column"},editTypeTexts:{string:"String",numeric:"Numeric",datePicker:"Date Picker",dateTimePicker:"Date Time Picker",dropdown:"Dropdown",boolean:"Boolean"},textAlignTypes:{right:"Right",left:"Left",center:"Center"},clipModeTexts:{clip:"Clip",ellipsis:"Ellipsis"},deleteColumnText:"Are you sure you want to delete this column?",deleteRecordText:"Are you sure you want to delete record?",okButtonText:"OK",cancelButtonText:"Cancel",confirmDeleteText:"Confirm Delete",batchSaveConfirmText:"Are you sure you want to save changes?",batchSaveLostChangesText:"Unsaved changes will be lost. Are you sure you want to continue?",cancelEditText:"Are you sure you want to cancel the changes?",dropDownListBlanksText:"(Blanks)",dropDownListClearText:"(Clear Filter)",trueText:"True",falseText:"False",emptyRecord:"No records to display"},J.TreeGrid._getrowClassName=function(){var e="gridrowIndex";return this.data.parentItem&&(e+=this.data.parentItem.index.toString()),e+="level",e+=this.data.level.toString(),this.data.isSummaryRow&&(e+=" ",e+="e-summaryrow"),this.data.footerSummaryRowRecord&&(e+=" ",e+="e-footersummaryrow"),this.data.isFirstFooterSummary&&(e+=" ",e+="e-firstfootersummaryrow"),e},J.TreeGrid._getSummaryRowtdClassName=function(){var e="";return this.data.isSummaryRow&&(e+=" ",e+="e-summaryrowcell"),this.data.footerSummaryRowRecord&&(e+=" ",e+="e-footersummaryrowcell"),e},J.TreeGrid.getColumnByField=function(e,t){for(var i=0;i<e.length&&e[i].field.split(".").join("")!=t.split(".").join("");i++);return i==e.length?null:e[i]},J.TreeGrid.getColumnByMappingName=function(e,t){for(var i=0;i<e.length&&e[i].mappingName!=t;i++);return i==e.length?null:e[i]},J.TreeGrid.sendExpandCollapseRequest=function(e,t){var i=e,s=i.model;s.toolbarSettings.toolbarItems;if(t.requestType=J.TreeGrid.Actions.ExpandCollapse,i._isRowEdit?i.cancelRowEditCell():i.model.isEdit&&i.cancelEditCell(),s.enableVirtualization){if(i._isFromGantt){if(i._isLoadonDemand&&!t.data.isChildRetrieved&&1==t.expanded)return void J.TreeGrid.expandRowsonDemand(i,t.data,t);i._$treegridHelper.ejTreeGrid("processBindings",t)}else{if(i._isLoadonDemand&&!t.data.isChildRetrieved&&1==t.expanded)return void J.TreeGrid.expandRowsonDemand(i,t.data,t);i.processBindings(t)}i._isFromGantt?!1===i._isInExpandCollapseAll&&(s.enableAltRow&&i._$treegridHelper.ejTreeGrid("updateAltRow"),i._$treegridHelper.ejTreeGrid("sendDataRenderingRequest",t),i._$treegridHelper.ejTreeGrid("updateHeight"),i.model.updatedGanttRecords=i.getUpdatedRecords(),i.model.currentViewData=i.getCurrentViewData(),i._$ganttchartHelper.ejGanttChart("clearConnectorLines"),i._$ganttchartHelper.ejGanttChart("refreshHelper",i.model.currentViewData,i.model.updatedGanttRecords)):!1===i._isInExpandCollapseAll&&(s.enableAltRow&&i.updateAltRow(),i.sendDataRenderingRequest(t),i._updateWrapRowHeights("total,header"),i._setScrollTop(),i.updateHeight())}else{var n=t.data,a=0,e=(n.expanded,t.expanded,i.model.currentViewData.indexOf(n));if(i._frozenColumnsLength&&i.getRows()?r=Z(i.getRows()[0][e]).add(i.getRows()[1][e]):i.getRows()&&(r=i.getRows()&&Z(i.getRows()[e])),t.expanded){if(n.expanded=t.expanded,i._isLoadonDemand&&!n.isChildRetrieved)return void J.TreeGrid.expandRowsonDemand(i,n,t);r&&J.TreeGrid.expandRecord(i,n,t.expanded,t),n.hasFilteredChildRecords&&(r&&r.find(".e-treegridcollapse").removeClass("e-treegridcollapse").addClass("e-treegridexpand"),r&&r.removeClass("e-treegridrowcollapse").addClass("e-treegridrowexpand")),s.enableAltRow&&!1===i._isInExpandCollapseAll&&!s.allowPaging&&J.TreeGrid.updateAltRow(i,n,e,1)}else i._collapsedRecordCount=0,r&&J.TreeGrid.collapseRecord(i,n,t.expanded),n.expanded=t.expanded,n.hasFilteredChildRecords&&(r&&r.find(".e-treegridexpand").removeClass("e-treegridexpand").addClass("e-treegridcollapse"),r&&r.removeClass("e-treegridrowexpand").addClass("e-treegridrowcollapse")),s.enableAltRow&&!1===i._isInExpandCollapseAll&&0!=i._collapsedRecordCount&&!s.allowPaging&&J.TreeGrid.updateAltRow(i,n,e,i._collapsedRecordCount);var r=0,r=i._isFromGantt?(i._$treegridHelper.ejTreeGrid("updateExpandStatus",n,t.expanded),i._$treegridHelper.ejTreeGrid("updateCollapsedRecordCount"),i._$treegridHelper.ejTreeGrid("getCollapsedRecordCount")):(i.updateExpandStatus(n,t.expanded),i.updateCollapsedRecordCount(),i.getCollapsedRecordCount());!s.allowPaging||!1!==i._isInExpandCollapseAll||"ejTreeGridcollapsing"!=t.type&&"ejTreeGridexpanding"!=t.type||(J.isNullOrUndefined(i.getPager())||i.gotoPage(),s.enableAltRow&&J.TreeGrid.updateAltRow(i,n,e,1)),i._isFromGantt?!1===i._isInExpandCollapseAll&&(i._totalCollapseRecordCount=r,i._$ganttchartHelper.ejGanttChart("clearConnectorLines"),i._$treegridHelper.ejTreeGrid("updateHeight"),a=i._$treegridHelper.ejTreeGrid("getRecordsHeight"),i._$ganttchartHelper.ejGanttChart("updateHeight",a),i._$ganttchartHelper.ejGanttChart("setCollapsedRecordCount",r),i._$ganttchartHelper.ejGanttChart("refreshGridLinesTable",i.model.updatedRecords.length-r)):!1===i._isInExpandCollapseAll&&(s.allowTextWrap&&0<i._$frozenTableContent.length?(i._updateWrapRowHeights("total,header"),i._updateScrollCss()):i.updateHeight())}i._isFromGantt&&i.model.predecessorMapping&&!1===i._isInExpandCollapseAll&&i._refreshConnectorLines(!1,!1,!0),i._isFromGantt&&(a=i._$treegridHelper.ejTreeGrid("instance"),r=i._$ganttchartHelper.ejGanttChart("instance"),o=a._$gridContent.ejScroller("option","scrollTop"),r._$bodyContainer.ejScroller("option","scrollTop",o),a.getScrollElement().ejScroller("isHScroll")||a.getScrollElement().scrollTop(o));var o={};o.recordIndex=t.recordIndex,o.data=t.data,o.requestType=t.requestType,o.expanded=t.expanded,J.isNullOrUndefined(o.data.item[s.expandStateMapping])||(o.data[s.expandStateMapping]=t.expanded,o.data.item[s.expandStateMapping]=t.expanded),t.expanded?i._trigger("expanded",o):i._trigger("collapsed",o);o=i.selectedItem();i._isFromGantt||!o||1!=s.selectedItems.length&&!i._checkboxSelection||(i.getExpandStatus(o)||t.expanded||(i.selectRows(-1),i.selectedRowIndex(-1),o.isSelected=!1,o=s.selectedItem=null),t=s.allowPaging?i._updatedPageData:i.model.updatedRecords,s.enableVirtualization&&o&&t.indexOf(o)!==i.selectedRowIndex()&&i.selectRows(t.indexOf(o)),i._cancelSaveTools())},J.TreeGrid.expandRowsonDemand=function(e,d,h){var t,c,u=e,p=u.model,e=J.Query().select(u._fieldNamesToQuery),m=p.flatRecords;p.updatedRecords;return u._isFromGantt?(t=J.Predicate(p.parentTaskIdMapping,J.FilterOperators.equal,d.item[p.taskIdMapping]),c=p.taskIdMapping,p.parentTaskIdMapping):(t=J.Predicate(p.parentIdMapping,J.FilterOperators.equal,d.item[p.idMapping]),c=p.idMapping,p.parentIdMapping),d.isChildRetrieved?(d.expanded=!0,J.TreeGrid.sendExpandCollapseRequest(u,h),!0):!!u._trigger("actionBegin",h)||(e.where(t),u._waitingPopupObj.show(),e.requiresCount(),void u.dataSource().executeQuery(e).done(J.proxy(function(e){for(var t,i,s=e.result,n=s.length,a=[],r=[],o=[],e=m.indexOf(d),l=(d.childRecords&&d.childRecords.length,0);l<n;l++)u._isFromGantt?(i=u._createGanttRecord(s[l],d.level+1,d),p.enableWBS&&(t=d.WBS,i.WBS=t+"."+(l+1))):i=u._createRecord(s[l],d.level+1,d),i.index=m.length+a.length,d.childRecords.push(i),!i.item[p.hasChildMapping]&&-1==u._assignedParendIDs.indexOf(i.item[c])||(i.hasChildRecords=!0,i.childRecords=[],i.isChildRetrieved=!1,u._allParentItems.push(i),u._isFromGantt&&(i.manualStartDate=i.startDate,i.manualEndDate=i.endDate,i.manualDuration=i.duration,i.isAutoSchedule||u._updateManualParentItem(i,null,!0))),i.item[c]&&r.push(i.item[c]),a.push(i),o.push(s[l]);u._taskIds.splice.apply(u._taskIds,[e+1,0].concat(r)),u._isFromGantt&&p.ids.splice.apply(p.ids,[e+1,0].concat(r.toString().split(","))),m.splice.apply(m,[e+1,0].concat(a)),u._isDataManagerUpdate&&u._jsonData.splice.apply(u._jsonData,[e+1,0].concat(o)),d.isChildRetrieved=!0,d.expanded=!0;e={recordIndex:e,data:d,requestType:"expandcollapse",expanded:!0};h&&(h.isExpandingParticularLevelParent||u._isInExpandCollapseAll)?J.TreeGrid.expandMultipleRecordsonDemand(u,d,h,e):(u._renderExpandedChildRecords(h),u._trigger("expanded",e))})).fail(J.proxy(function(e){u._triggerFailureEvent(e,u)})))},J.TreeGrid.expandMultipleRecordsonDemand=function(e,t,i,s){var n=e;if(i.isExpandingParticularLevelParent)for(var a=n._allParentItems.filter(function(e){if(e.level==i.recordLevel&&!e.expanded&&e.hasChildRecords)return e}),r=t.parentItem,o=0;o<i.recordLevel;o++)r&&r.isChildRetrieved&&(r.expanded=!0),r=r&&r.parentItem;n._isInExpandCollapseAll&&(a=n._allParentItems.filter(function(e){if(!e.expanded&&e.hasChildRecords)return e}));for(var l=0;l<a.length;l++){var d={};if(d.data=a[l],d.recordIndex=n.model.updatedRecords.indexOf(a[l]),d.expanded=!0,i.isExpandingParticularLevelParent&&(d.recordLevel=i.recordLevel,d.isExpandingParticularLevelParent=!0),d.requestType=J.TreeGrid.Actions.ExpandCollapse,!J.TreeGrid.expandRowsonDemand(n,a[l],d))break;n._allParentItems.splice(n._allParentItems.indexOf(a[l]),1),a.splice(a.indexOf(a[l]),1),0<a.length&&(l=-1)}0==a.length&&(n._isInExpandCollapseAll=!1,n._renderExpandedChildRecords(i),n._trigger("expanded",s))},J.TreeGrid.expandRecord=function(e,t,i,s){var n,a,r=e,o=".gridrowIndex"+t.index.toString()+"level"+(t.level+1).toString(),l=".detailsrowgridrowIndex"+t.index.toString()+"level"+(t.level+1).toString(),d=Z(r.element).find(o),h=0,c=d.length,u=r.model,e=Z(r.element).find(l),l=Z(r.element).find(o),o=r.getRows(),o=Z(o[a]);for(a=u.currentViewData.indexOf(t),t.hasChildRecords&&0<t.childRecords.length&&(o.find(".e-treegridcollapse").removeClass("e-treegridcollapse").addClass("e-treegridexpand"),o.removeClass("e-treegridrowcollapse").addClass("e-treegridrowexpand")),r._expandedRecordsCount+=r._isFromGantt||0<r._frozenColumnsLength?l.length/2:l.length,l.css({display:"table-row"}),e.filter("tr.e-detailsrowexpanded").css("display","table-row"),(r._isFromGantt||0<r._frozenColumnsLength)&&(c/=2);h<c;h++)n=d[h],(a=-1)!==(a=(0<r._frozenColumnsLength?Z(r.getRows()[0]):r.getRows()).index(n))&&(r._isFromGantt,(n=r.model.updatedRecords[a]).isExpanded=!0,n.expanded&&J.TreeGrid.expandRecord(r,n,i))},J.TreeGrid.collapseRecord=function(e,t,i){var s,n,a,r=e,e=(r.model,".gridrowIndex"+t.index.toString()+"level"+(t.level+1).toString()),t=".detailsrowgridrowIndex"+t.index.toString()+"level"+(t.level+1).toString(),o=Z(r.element).find(e),l=0,d=o.length,t=Z(r.element).find(t),e=Z(r.element).find(e);r.getRows();for(r._collapsedRecordCount+=r._isFromGantt||0<r._frozenColumnsLength?e.length/2:e.length,e.css({display:"none"}),t.css({display:"none"}),(r._isFromGantt||0<r._frozenColumnsLength)&&(d/=2);l<d;l++)s=o[l],(n=-1)!==(n=(0<r._frozenColumnsLength?Z(r.getRows()[0]):r.getRows()).index(s))&&(a=r.getUpdatedRecords()[n]).expanded&&J.TreeGrid.collapseRecord(r,a,i)},J.TreeGrid.updateAltRow=function(e,t,i,s){var n,a=e,r=0,e=a.model,o=a.getUpdatedRecords(),l=o.length,d=t.isAltRow,h=a.getRows(),c=a._frozenColumnsLength?a.getRows()[0]:a.getRows();if(!e.rowTemplateID&&!e.altRowTemplateID)for(r=i+s;r<l;r++)Z(c[r]).hasClass("e-summaryrow")||"none"!==Z(c[r]).css("display")&&(n=o[r],0!=r&&(n.isAltRow=!d),d=n.isAltRow,n={},n=a._frozenColumnsLength?Z(h[0][r]).add(h[1][r]):Z(h[r]),d?Z(n).addClass("e-alt-row"):Z(n).removeClass("e-alt-row"))},J.TreeGrid.refreshRow=function(e,t){var i,s,n=e,a=n.model,r=n.model.currentViewData[t];r&&(0<n._frozenColumnsLength?(e=Z(n.getRows()[0][t]),i=Z(n.getRows()[1][t]),a.showDetailsRow&&a.detailsTemplate&&r.isDetailsExpanded&&(s=e.next("tr")).hasClass("e-detailsrow")&&(s.remove(),i.next("tr").remove()),e.replaceWith(Z(Z.render[n._id+"_JSONFrozenTemplate"](r)))):(i=Z(n.getRows()[t]),a.showDetailsRow&&a.detailsTemplate&&r.isDetailsExpanded&&(s=i.next("tr")).hasClass("e-detailsrow")&&s.remove(),a.allowSelection||(r.isSelected=!1)),i.replaceWith(Z(Z.render[n._id+"_Template"](r))),n.setGridRows(Z(n.getContentTable().get(0).rows)),n._gridRows=n.getContentTable().get(0).rows,0<n._frozenColumnsLength&&(n._gridRows=[n._gridRows,n.getContentTable().get(1).rows]),t=J.TreeGrid.getRowByIndex(n,n.getUpdatedRecords().indexOf(a.currentViewData[t])),n._trigger("refresh"),n._rowEventTrigger(t,r))},J.TreeGrid.getRowByIndex=function(e,t,i){try{var s,n="ejTreeGrid"==e.pluginName?e:e._$treegridHelper.data("ejTreeGrid"),a=n.getRows(),r=(n.model,n.getUpdatedRecords()),o=Z();return n.model.enableVirtualization&&(s=r[t],t=n.model.currentViewData.indexOf(s)),J.isNullOrUndefined(i)?0<n._frozenColumnsLength?(a[0][t]&&(o.push(a[0][t]),o.push(a[1][t])),o):Z(a[t]):(n.model.enableVirtualization&&(r=r[i],i=n.model.currentViewData.indexOf(r)),0<n._frozenColumnsLength?(o.push(Z(a[0]).slice(t,i)),o.push(Z(a[1]).slice(t,i)),o):Z(a.slice(t,i)))}catch(e){return Z()}}}(jQuery,Syncfusion),function(b,x,l){x.widget("ejAutocomplete","ej.Autocomplete",{element:null,model:null,validTags:["input"],_ignoreOnPersist:["fields","dataSource","query","focusIn","focusOut","change","select","create","destroy","open","close","actionComplete","actionSuccess","actionFailure"],_setFirst:!1,_rootCSS:"e-autocomplete",type:"editor",angular:{require:["?ngModel","^?form","^?ngModelOptions"]},_requiresID:!0,defaults:{dataSource:null,query:null,fields:{text:null,key:null,category:null,groupBy:null,htmlAttributes:null},locale:"en-US",name:null,template:null,allowGrouping:!1,enableDistinct:!1,ignoreAccent:!1,allowSorting:!0,sortOrder:"ascending",htmlAttributes:{},multiSelectMode:"none",delimiterChar:",",allowAddNew:!1,addNewText:"Add New",showRoundedCorner:!1,readOnly:!1,cssClass:"",watermarkText:null,value:"",selectValueByKey:null,filterType:"startswith",caseSensitiveSearch:!1,showLoadingIcon:!0,showResetIcon:!1,itemsCount:0,minCharacter:1,delaySuggestionTimeout:200,showPopupButton:!1,highlightSearch:!1,enableAutoFill:!1,enableRTL:!1,enabled:!0,visible:!0,height:"",width:"",emptyResultText:"No suggestions",animateType:"slide",showEmptyResultText:!0,enablePersistence:!1,popupHeight:"152px",popupWidth:"auto",autoFocus:!1,isChangeOnBlur:!1,multiColumnSettings:{enable:!1,showHeader:!0,stringFormat:"{0}",searchColumnIndices:[],columns:[{field:null,headerText:null,textAlign:"left",headerTextAlign:"left",cssClass:"",type:"string",filterType:"startswith",visible:!0}]},validationRules:null,validationMessage:null,focusIn:null,focusOut:null,change:null,select:null,create:null,open:null,close:null,destroy:null,actionBegin:null,actionComplete:null,actionSuccess:null,actionFailure:null},dataTypes:{autoFocus:"boolean",watermarkText:"string",locale:"string",cssClass:"string",filterType:"enum",caseSensitiveSearch:"boolean",showLoadingIcon:"boolean",template:"string",allowGrouping:"boolean",enableDistinct:"boolean",allowSorting:"boolean",sortOrder:"enum",allowAddNew:"boolean",addNewText:"string",showRoundedCorner:"boolean",showResetIcon:"boolean",readOnly:"boolean",itemsCount:"number",animateType:"enum",minCharacter:"number",showPopupButton:"boolean",highlightSearch:"boolean",enableAutoFill:"boolean",enableRTL:"boolean",multiSelectMode:"enum",delimiterChar:"string",emptyResultText:"string",showEmptyResultText:"boolean",enabled:"boolean",visible:"boolean",enablePersistence:"boolean",isChangeOnBlur:"boolean",dataSource:"data",query:"data",fields:"data",validationRules:"data",validationMessage:"data",htmlAttributes:"data",multiColumnSettings:"data",columns:"data",searchColumnIndices:"array"},observables:["value","selectValueByKey"],value:x.util.valueFunction("value"),_selectValueByKey:x.util.valueFunction("selectValueByKey"),enable:function(){this.model.enabled||(this.model.enabled=!0,this.target.disabled=!1,this.element.removeClass("e-disable").attr({"aria-disabled":!1}),this.element.removeAttr("disabled"),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-disable").attr({"aria-disabled":!1}),"visualmode"==this.model.multiSelectMode&&this._ulBox.removeClass("e-disable").attr({"aria-disabled":!1}),this.wrapper.removeClass("e-disable-wrap"))},disable:function(){this.model.enabled&&(this._hideResult(),this.model.enabled=!1,this.target.disabled=!0,this.element.attr("disabled","disabled"),this.element.addClass("e-disable").attr({"aria-disabled":!0}),this.model.showPopupButton&&this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),"visualmode"==this.model.multiSelectMode&&this._ulBox&&this._ulBox.addClass("e-disable").attr({"aria-disabled":!0}),this.wrapper.addClass("e-disable-wrap"))},clearText:function(){"visualmode"==this.model.multiSelectMode&&this._deleteBox(this._ulBox.children("li")),this.element.val(""),this._preVal="",this._valueChange(),this._isFocused||this._focusOutAction(),this._hideResult()},getValue:function(){var e=this.value();return null==e?"":e},getSelectedItems:function(){return this._isFocused&&"visualmode"!=this.model.multiSelectMode&&this._updateSelectedItemArray(this.getValue()),this._selectedItems},_setValue:function(e){if(this._isWatermark||this._hiddenSpan.css("display","none"),("object"==typeof e||"number"==typeof e&&isNaN(e)||""==b.trim(e))&&(e=""),"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(""),this.element.val(""),this._hiddenInput||(this._hiddenInput=x.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden",name:this.element.attr("name")}).insertBefore(this.element)),e)if("visualmode"==this.model.multiSelectMode){this._selectedItems=[],this._modelValue=e,this._deleteBox(this._ulBox.children("li"));var t=e.split(this.model.delimiterChar);if(this.element.width(1).val("").removeAttr("placeholder"),x.DataManager&&this.model.dataSource instanceof x.DataManager)this._createBoxForObjectType(t);else if(this.suggestionListItems=this.model.dataSource,this.suggestionListItems&&"object"!=typeof this.suggestionListItems[0]){this._hiddenInput.val(e);for(var i=0,s=t.length;i<s;i++)t[i]&&(this._ulBox.append(this._createBox(t[i])),this._selectedItems.push(t[i]))}else this._createBoxForObjectType(t)}else this.element.val(e),this._updateSelectedItemArray(e);return"visualmode"!=this.model.multiSelectMode&&this.value(this.element.val()),this._preVal=this.element.val(),this._isWatermark||this._setWatermarkTxt(),e},_createBoxForObjectType:function(e){for(var t=this,i=this._declareVariable(),s=0,n=e.length;s<n;s++){var a=b.trim(e[s]);""!=a&&(x.DataManager&&this.model.dataSource instanceof x.DataManager?(this._dataQuery=this._getQuery().where(i[0],"equal",a,!1),this._promise=this.model.dataSource.executeQuery(this._dataQuery),this._promise.done(function(e){e=e.result;t._strData=e instanceof Array&&e.length?e[0]:a,x.isNullOrUndefined(t._strData[i[1]])||t._selectKeyInit(),t._selectedItems.push(t._strData)}).fail(function(e){t._selectedItems.push(a)})):(this._dataQuery=x.Query().where(i[0],"equal",a,!1),this._promise=x.DataManager(this.suggestionListItems).executeLocal(this._dataQuery),this._strData=this._promise instanceof Array&&this._promise.length?this._promise[0]:a,x.isNullOrUndefined(this._strData[i[1]])||this._selectKeyInit(),this._selectedItems.push(this._strData)),"visualmode"==this.model.multiSelectMode&&this._ulBox.append(this._createBox(a)))}},_selectKeyInit:function(){var e,t=this._declareVariable(),i=this._delimiterChar();"visualmode"==this.model.multiSelectMode&&this._hiddenInput.val(this._hiddenInput.val()+(x.isNullOrUndefined(this._strData[t[1]]||this._strData[t[0]])?"":(this._strData[t[1]]||this._strData[t[0]])+this.model.delimiterChar)),x.isNullOrUndefined(this._strData[t[1]])||("none"!=this.model.multiSelectMode?(e=(e=null!=this._selectValueByKey()?this._selectValueByKey()+this._strData[t[1]]+i:this._strData[t[1]]+i).split(i).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]),this._selectValueByKey(e.join(i))):this._selectValueByKey(this._strData[t[1]]))},_declareVariable:function(){var e=this.model.fields,t={_key:null,_text:null,_attr:null},i=[];if(!x.isNullOrUndefined(e))return t._text=e&&e.text?e.text:"text",t._key=e&&e.key?e.key:"key",i.push(t._text,t._key),i},selectValueByKey:function(e){var i;x.isNullOrUndefined(e)||(i=this,e=e.toString(),e="none"!=this.model.multiSelectMode?e.split(this.model.delimiterChar):e.split(","),"[object Array]"===Object.prototype.toString.call(e)&&b.each(e,function(e,t){i._setOperation(b.trim(t),"key")}))},selectValueByText:function(e){this._setOperation(e,"text")},_eventTrigger:function(){var e="visualmode"==this.model.multiSelectMode?this._modelValue:""==this.element.val()?null:this.element.val();this._trigger("select",{isInteraction:!0,value:this.value(),text:e,key:this._selectValueKey,item:this._selectedItems})},setValue:function(e){this._setText(e)},_setOperation:function(e,t){var i,s,n="",a=this,r=this.model.dataSource;if(x.isNullOrUndefined(r))return!1;if("object"==typeof r[0]||r instanceof x.DataManager)var o=this.model.fields,n=o&&o[t]?o[t]:t;else if("key"==t)return!1;if(e)if(x.DataManager&&r instanceof x.DataManager)s=this._getQuery().where(n,"equal",e,!this.model.caseSensitiveSearch),(i=r.executeQuery(s)).done(function(e){a._setText(e.result[0]),a._eventTrigger()});else{if(!r||!r.length||r.length<1)return!1;s=x.Query().where(n,"equal",e,!this.model.caseSensitiveSearch),i=x.DataManager(r).executeLocal(s),this._setText(i[0]),this._eventTrigger()}},_setText:function(e){if(!e)return!1;var t,i,s=this.model.fields;if("object"==typeof this.model.dataSource[0]||"object"==typeof e?(t="string"==typeof e?e:s&&s.text?e[s.text]:e.text,i="string"==typeof e?e:s&&s.key?e[s.key]:e.key):t=e,t){if("visualmode"==this.model.multiSelectMode&&this._removeDuplicates(e))return!1;this._valueToTextBox(t,e,!0);e="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();this.value(e),this.model.showResetIcon&&this._showReset()}this._selectValueKey=i,this._selectkey.push(i),x.isNullOrUndefined(i)||this._selectValueByKey(this._selectkey+this.model.delimiterChar)},_textFormateString:function(e,t){var i=this.model.multiColumnSettings.stringFormat;if(this._columnsIndex(),x.isNullOrUndefined(e)||"object"!=typeof e)i=x.isNullOrUndefined(e)||"object"==typeof e?this._currList[this._activeItem-1]:i.replace("{"+this._columnIndex[0]+"}",e);else for(var s=0,n=this._columnIndex.length;s<n;s++)i=i.replace("{"+this._columnIndex[s]+"}",e[this.model.multiColumnSettings.columns[parseInt(this._columnIndex[s])].field]);return i},_columnsIndex:function(){var i=this;this._columnIndex=[],b.each(this.model.multiColumnSettings.stringFormat.match(/\{.+?\}/g),function(e,t){i._columnIndex[e]=t.slice(1,-1)}),this._searchColumnIndex=[],b.each(this.model.multiColumnSettings.searchColumnIndices,function(e,t){i._searchColumnIndex.push(t)})},_valueToTextBox:function(e,t,i){!this._addNewTemplate&&this.model.multiColumnSettings.enable&&"string"!=typeof t&&(e=this._textFormateString(t)),n=this.model.delimiterChar;var s,n,a=(a=this._getUniqueKey())||(this.model.fields&&this.model.fields.key?t[this.model.fields.key]:x.isNullOrUndefined(t.key)?a:t.key);this._hiddenInput||(this._hiddenInput=x.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden",name:this.element.attr("name")}).insertBefore(this.element)),(this._hiddenInput.val()!=a&&null!=a||-1<s)&&("none"==this.model.multiSelectMode?this._hiddenInput.val(a||e):this._hiddenInput.val(this._hiddenInput.val()+(a||e)+n)),"visualmode"==this.model.multiSelectMode?(t="string"==typeof t&&this._addNewTemplate&&t.substr(t.length-this._addNewTemplate.length)==this._addNewTemplate?t.replace(this._addNewTemplate,""):t,"number"==typeof e&&(e=this._textFormateString(e)),s=e.indexOf(this._addNewTemplate),this._addNewTemplate&&(e=e.substr(0,e.length-this._addNewTemplate.length)),(this._selectValueByKey()!=a&&null!=a||-1<s)&&this._selectValueByKey(null!=this._selectValueByKey()?this._selectValueByKey()+(-1<s?e:a)+n:(-1<s?e:a)+n),this._modelValue=x.isNullOrUndefined(this.value())?e+n:this.value()+e+n,this.element.val("").removeAttr("placeholder").width(1),this._ulBox.append(this._createBox(e)),""!=this.model.height&&(b(this._ulBox).parent().css("overflow","auto"),this.model.showPopupButton&&0!=this._ulBox.parent()[0].scrollHeight&&this.dropdownbutton.css("height",this._ulBox.parent()[0].scrollHeight)),this._addNewTemplate=null):"delimiter"==this.model.multiSelectMode?(n=this.target.value.lastIndexOf(this.model.delimiterChar),this._typed||""==this.element.val()||i||!this.model.showPopupButton?i?this.element.val(""==this.element.val()?e+this.model.delimiterChar:this.element.val()+e+this.model.delimiterChar):-1==n?this.element.val(this._queryString.substr(0,n+1)+e+this.model.delimiterChar):this.element.val(this._queryString.substr(0,n+this.model.delimiterChar.length)+e+this.model.delimiterChar):!this.model.enableAutoFill||this.showSuggestionBox?this._checkDeli()?this.element.val(this._queryString.substr(0,n)+this.model.delimiterChar+e+this.model.delimiterChar):this.element.val(this.element.val()+this.model.delimiterChar):this._checkDeli()||this.element.val(this.element.val()+this.model.delimiterChar),this._typed=!1):(this.element.val(e),this._selectedItems=[]),this._selectedItems.push(t),this._originalval.push(e),this._moveCaretToEnd(this.element[0])},_removeDuplicates:function(e){return 0!=this._selectedItems.length&&(-1!=this._selectedItems.indexOf(e)||void 0)},search:function(){this.model.enabled&&this._checkDelimiter()&&(this._hideResult(),this._autoFill=!1,this._queryString=b.trim(this._queryString),0<this._queryString.length&&this._OnTextEnter())},setVisible:function(e){e?this.wrapper.show():this.wrapper.hide()},hide:function(){this._hideResult()},open:function(){this._showFullList()},_changeWatermark:function(e){this._isWatermark?this.element.attr("placeholder",e):this._hiddenSpan.text(e)},_changeSkin:function(e){this.wrapper.removeClass(this.model.cssClass).addClass(e),this.suggestionList.removeClass(this.model.cssClass).addClass(e)},_setDropdown:function(e){(this.model.showPopupButton=e)?this._renderDropdown():this._destroyDropdown()},_changeHeight:function(e){this.wrapper.height(e)},_changeWidth:function(e){this.wrapper.width(e),this._setListWidth()},_setCulture:function(){this._localizedLabels=this._getLocalizedLabels(),x.isNullOrUndefined(this._options)||(x.isNullOrUndefined(this._options.addNewText)||(this._localizedLabels.addNewText=this._options.addNewText),x.isNullOrUndefined(this._options.emptyResultText)||(this._localizedLabels.emptyResultText=this._options.emptyResultText),x.isNullOrUndefined(this._options.watermarkText)||(this._localizedLabels.watermarkText=this._options.watermarkText)),this.model.addNewText=this._localizedLabels.addNewText,this.model.emptyResultText=this._localizedLabels.emptyResultText,this.model.watermarkText=this._localizedLabels.watermarkText},_init:function(e){if(this._options=e,this._selectkey=[],this._hiddenColumns=[],this._setCulture(),!this.element.is("input")||this.element.attr("type")&&"text"!=this.element.attr("type"))return!1;this.model.fields.groupBy=this.model.fields.groupBy||this.model.fields.category,this._initialize(),this._render(),this._wireEvents(),this.initialRender=!1,null!=this.model.validationRules&&(this._initValidator(),this._setValidation())},_initValidator:function(){this.element.closest("form").data("validator")||this.element.closest("form").validate()},_setValidation:function(){if(this.model.validationRules){var e="visualmode"==this.model.multiSelectMode?this._hiddenInput:this.element;e.rules("add",this.model.validationRules);var t,i=(i=this.element.closest("form").data("validator"))||this.element.closest("form").validate(),s=e.attr("name");for(t in i.settings.messages[s]={},this.model.validationRules){var n=null;if(!x.isNullOrUndefined(this.model.validationRules[t])){if(x.isNullOrUndefined(this.model.validationRules.messages&&this.model.validationRules.messages[t]))for(var a in i.settings.messages[s][t]=b.validator.messages[t],this.model.validationMessage)t==a&&(n=this.model.validationMessage[t]);else n=this.model.validationRules.messages[t];i.settings.messages[s][t]=null!=n?n:b.validator.messages[t]}}}},_removeDuplicateValue:function(e){return e.split(this.model.delimiterChar).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[]).join(this.model.delimiterChar)},_delimiterChar:function(){return"none"!=this.model.multiSelectMode?this.model.delimiterChar:""},_setModel:function(e){for(var t in e){switch(t){case"dataSource":this.model.dataSource=null;break;case"watermarkText":this._changeWatermark(e[t]);break;case"delaySuggestionTimeout":this.model.delaySuggestionTimeout=parseInt(e[t]);break;case"value":var i=x.util.getVal(e[t]),s=this._delimiterChar();"none"!=this.model.multiSelectMode&&(r=i.substr(i.length-s.length)==s?i:i+s,i=""==i?this.value():(this.value()?this.value():"")+r,"visualmode"==this.model.multiSelectMode&&(i=(i=i.split(s).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])).join(s))),this.value(this._setValue(i));i=this.model.dataSource;x.DataManager&&i instanceof x.DataManager?this._loadInitData():this._setHiddenkeyByValue(i),this._modelValue=this.value();i=("visualmode"==this.model.multiSelectMode?this._hiddenInput:this.element).val();this._changeEvtTrigger(i),this.model.showResetIcon&&this._showReset();break;case"showPopupButton":this._setDropdown(e[t]);break;case"enableRTL":this._RightToLeft(e[t]);break;case"showRoundedCorner":this._setRoundedCorner(e[t]);break;case"readOnly":this._checkReadOnly(e[t]);break;case"delimiterChar":i=this.model.delimiterChar;e[t]=this._validateDelimiter(e[t]),this.model.delimiterChar=e[t],this.element.val(this.value().replace(new RegExp(i,"g"),this.model.delimiterChar)),this.value(this.element.val());break;case"validationRules":null!=this.model.validationRules&&(this.element.rules("remove"),this.model.validationMessage=null),this.model.validationRules=e[t],null!=this.model.validationRules&&(this._initValidator(),this._setValidation());break;case"validationMessage":this.model.validationMessage=e[t],null!=this.model.validationRules&&null!=this.model.validationMessage&&(this._initValidator(),this._setValidation());break;case"locale":x.Autocomplete.Locale[e[t]]?(this.model.locale=e[t],this._setCulture(),this._setWatermark()):this.model.locale=e[t];break;case"filterType":var n=[];for(a in x.filterType)x.filterType.hasOwnProperty(a)&&n.push(x.filterType[a]);-1<n.indexOf(e[t])?this.model.filterType=e[t]:e[t]=this.model.filterType;break;case"multiSelectMode":this.model.multiSelectMode=e[t];var a,r,o=this._delimiterChar();"none"!=this.model.multiSelectMode&&(a=this._selectValueByKey(),(r=this.value())&&(r=r.substr(r.length-o.length)==o?r:r+o,this.value(r),"visualmode"==this.model.multiSelectMode&&this.value(this._removeDuplicateValue(this.value()))),a&&(this._selectValueByKey(a.substr(a.length-o.length)==o?a:a+o),"visualmode"==this.model.multiSelectMode&&this._selectValueByKey(this._removeDuplicateValue(this._selectValueByKey())))),"visualmode"==e[t]?(null!=this.model.validationRules&&this.element.rules("remove"),""!=this.element.val()&&this._isWatermark&&this.element.removeAttr("placeholder")):this.element.hasClass("e-visual-mode")&&this._destroyBoxModel(),this._destroy(),this._init(),this._setValue(this.value()),this._setValidation(),x.isNullOrUndefined(this.element.attr("placeholder"))&&this._isWatermark&&this._setWatermark();break;case"enabled":this._disabled(!e[t]);break;case"visible":this.setVisible(e[t]);break;case"height":this._changeHeight(e[t]);break;case"width":this._changeWidth(e[t]);break;case"cssClass":this._changeSkin(e[t]);break;case"itemsCount ":(e[t]<=0||isNaN(e[t]))&&(e[t]=0);break;case"popupHeight":this.suggestionList.css({"max-height":isNaN(e[t])?e[t]:e[t]+"px"});break;case"popupWidth":this.model.popupWidth=e[t],this._setListWidth();break;case"selectValueByKey":s=this._delimiterChar(),a=x.util.getVal(e[t]),this.selectValueByKey(a);o="none"!=this.model.multiSelectMode?this._selectValueByKey()+e[t]:e[t];o=(o=o.split(s).reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])).join(s),e[t]=o.substr(o.length-s.length)==s?o:o+s;break;case"htmlAttributes":this._addAttr(e[t]);break;case"emptyResultText":x.isNullOrUndefined(this._options)&&(this._options={}),this._options.emptyResultText=this.model.emptyResultText=e[t],this._setCulture();break;case"addNewText":x.isNullOrUndefined(this._options)&&(this._options={}),this._options.addNewText=this.model.emptyResultText=e[t],this._setCulture();break;case"multiColumnSettings":x.isNullOrUndefined(e[t].enable)||(this.model.multiColumnSettings.enable=e[t].enable),x.isNullOrUndefined(e[t].showHeader)||(this.model.multiColumnSettings.showHeader=e[t].showHeader),x.isNullOrUndefined(e[t].stringFormat)||(this.model.multiColumnSettings.stringFormat=e[t].stringFormat),x.isNullOrUndefined(e[t].searchColumnIndices)||(this.model.multiColumnSettings.searchColumnIndices=e[t].searchColumnIndices),x.isNullOrUndefined(e[t].columns)||(this.model.multiColumnSettings.columns=e[t].columns),this.suggestionList.remove(),this._renderSuggestionList();break;case"showResetIcon":this.model.showResetIcon=e[t],e[t]&&!x.isNullOrUndefined(this.value())&&""!=this.value()?this._showReset():this._removeReset()}this._hideResult()}},_destroy:function(){this.element.width("").removeAttr("role aria-label aria-expanded aria-haspopup aria-autocomplete autocomplete placeholder aria-owns aria-disabled disabled"),this.element.insertAfter(this.wrapper),"visualmode"==this.model.multiSelectMode&&this.element.removeClass("e-visual-mode").attr("name",this._hiddenInput.attr("name")),this.model.enabled||this.element.removeClass("e-disable"),this.wrapper.remove(),this.element.removeClass("e-input").val(""),this._isWatermark&&this.element.removeAttr("placeholder"),this._hideResult(),this.suggestionList.remove()},_initialize:function(){this.value(""===this.value()?this.element[0].value:this.value()),this.element.attr("role","combobox").attr("aria-label","Autocomplete textbox").attr("aria-expanded",!1).attr("aria-autocomplete","list"),x.isNullOrUndefined(this.element.attr("tabindex"))&&this.element.attr("tabindex",0),/Edge\/12./i.test(navigator.userAgent)&&this.element.addClass("edge-browser"),this.target=this.element[0],this.dropdownbutton=null,this._isIE8="msie"==x.browserInfo().name&&"8.0"==x.browserInfo().version,this.showSuggestionBox=!1,this.noresult=!0,this._queryString=null,this.suggLen=0,this._selectedItems=[],this._modelValue="",this._activeItem=0,this._originalval=[],this.ctrlKeyPressed=!1,this._isFocused=!1,this._isOpened=!1,this._typed=!1,this._cancelEvent=!1,this._isWatermark=this._checkWatermarkSupport(),this._selectedObj=[],this.eleClick=!1},_render:function(){this._renderWrapper(),this._addAttr(this.model.htmlAttributes),this._setDimentions(),this._renderDropdown(),this._checkProperties(),this._isWatermark?this._setWatermark():this._setWatermarkTxt(),this._renderSuggestionList(),this._RightToLeft(this.model.enableRTL),this._setRoundedCorner(this.model.showRoundedCorner),this.setVisible(this.model.visible),this._setListPosition()},_renderWrapper:function(){var e,t;this.element.addClass("e-input").attr("autocomplete","off"),"visualmode"==this.model.multiSelectMode?(this.wrapper=x.buildTag("div.e-atc e-widget "+this.model.cssClass+"#"+this.target.id+"_wrapper").insertAfter(this.element),this.container=x.buildTag("div.e-in-wrap e-box").append(this.element)):(this.wrapper=x.buildTag("span.e-atc e-widget "+this.model.cssClass+"#"+this.target.id+"_wrapper").insertAfter(this.element),this.container=x.buildTag("span.e-in-wrap e-box").append(this.element)),document.activeElement==this.element[0]&&(e=!0),this.wrapper.append(this.container),this._isWatermark||(this._hiddenSpan=x.buildTag("span.e-input e-placeholder ").insertAfter(this.element),this._hiddenSpan.text(this.model.watermarkText),this._hiddenSpan.css("display","none"),(t=this)._hiddenSpan.click(function(e){this._isFocused||t.element.focus()})),e&&this.element.focus()},_renderDropdown:function(){var e;this.model.showPopupButton&&(e=x.buildTag("span.e-icon e-search").attr(this._isIE8?{unselectable:"on"}:{}),this.dropdownbutton=x.buildTag("span.e-select#"+this.target.id+"_dropdown").attr(this._isIE8?{unselectable:"on"}:{}).append(e),this.container.append(this.dropdownbutton).addClass("e-padding"),this.model.enabled||this.dropdownbutton.addClass("e-disable").attr({"aria-disabled":!0}),this.dropdownbutton.on("mousedown",b.proxy(this._OnDropdownClick,this)))},_addAttr:function(e){var i=this;b.map(e,function(e,t){"required"==t&&i.element.attr(t,e),"class"==t?i.wrapper.addClass(e):"name"==t?i.element.attr(t,e):"disabled"==t&&"disabled"==e?i._disabled(!0):"readOnly"==t&&!0===e?i._checkReadOnly(!0):"id"==t?(i.wrapper.attr(t,e+"_wrapper"),i.element.attr(t,e)):i.wrapper.attr(t,e)})},_setDimentions:function(){this.model.height&&this.wrapper.height(this.model.height),this.model.width&&this.wrapper.width(this.model.width)},_renderBoxModel:function(){this._ulBox=x.buildTag("ul.e-ul e-boxes");var e=this.model.enabled?"":"e-disable";this._ulBox.addClass(e),this._hiddenInput=x.buildTag("input#"+this.target.id+"_hidden","",{},{type:"hidden"}).insertBefore(this.element),this._hiddenInput.attr("name",this.element.attr("name")),this.element.val("").removeAttr("name").addClass("e-visual-mode"),this._isWatermark||this.element.width(1),this.container.prepend(this._hiddenInput,this._ulBox),""!=this.model.height?this.wrapper.height(this.model.height):this.wrapper.height("auto"),this._on(this.container,"mousedown",function(e){if(!this.model.enabled)return!1;var t=b(e.target);t.is(this.element)||(e.preventDefault(),this._isFocused||this.element.focus(),t.hasClass("e-options")?(!e.ctrlKey&&t.siblings().hasClass("e-active")&&this._removeActive(),t.hasClass("e-active")?t.removeClass("e-active"):t.addClass("e-active")):this._moveCaretToEnd(this.element[0])),e.ctrlKey||!t.hasClass("e-boxes")&&!t.hasClass("e-input")||this._removeActive()})},_destroyBoxModel:function(){this.container.prepend(this.element),this.element.attr({name:this._hiddenInput.attr("name")}).removeAttr("style").removeClass("e-visual-mode"),this.wrapper.height(this.model.height),this._hiddenInput.remove(),this._hiddenInput=null,this._ulBox.remove(),this._off(this.container,"mousedown")},_deleteLastBox:function(){var e=this._ulBox.children().last(),t=e.hasClass("e-active");this._removeActive(),t?this._deleteBox(e):e.addClass("e-active")},_deleteBox:function(e){for(var t=0,i=e.length;t<i;t++){var s=this._ulBox.children().index(e[t]);this._selectedItems.splice(s,1);var n=this.model.delimiterChar,a=this._hiddenInput.val().split(n);a.splice(s,1),this._hiddenInput.val(a.join(n)),this._selectValueByKey(a.join(n));a=this._modelValue.split(n);a.splice(s,1),this._modelValue=a.join(n),b(e[t]).remove(),this.deletedItem=b(e)[0].innerText}this.showSuggestionBox&&this._refreshPopup(),this._valueChange(),""==this.value()&&""!=this.model.height&&(b(this._ulBox).parent().css("overflow","hidden"),this.dropdownbutton.css("height",this.model.height)),""==this._hiddenInput.val()&&this._setWatermark()},_removeActive:function(){this._ulBox.children("li.e-active").removeClass("e-active")},_adjustWidth:function(){var e,t=x.buildTag("span",this.element.val());this.container.append(t),e=t.width()+30,this.element.width()!=e&&this.element.width(e),""==this._hiddenInput.val()&&this._setWatermark(),t.remove()},_checkProperties:function(){var e,t;this._checkReadOnly(this.model.readOnly),this.model.delimiterChar=this._validateDelimiter(this.model.delimiterChar),this.model.enabled?this.model.enabled&&b(this.element).hasClass("e-disable")&&(this.model.enabled=!1,this._disabled(!1)):(this.model.enabled=!0,this._disabled(!0)),this._checkNameAttr(),"visualmode"==this.model.multiSelectMode&&this._renderBoxModel(),x.isNullOrUndefined(this._selectValueByKey())?(e=x.isNullOrUndefined(this.value())?this.value():this.value().toString(),"none"==this.model.multiSelectMode||x.isNullOrUndefined(e)||""==e||(e=e.substr(e.length-this.model.delimiterChar.length)==this.model.delimiterChar?e:e+this.model.delimiterChar),this.value(this._setValue(e)),e&&(t=this.model.dataSource,x.DataManager&&t instanceof x.DataManager?this._loadInitData(e):this._setHiddenkeyByValue(t)),this.model.showResetIcon&&""!=this.value()&&this._showReset()):(t=this._selectValueByKey().toString(),"none"!=this.model.multiSelectMode&&(t=t.substr(t.length-this.model.delimiterChar.length)==this.model.delimiterChar?t:t+this.model.delimiterChar,"visualmode"==this.model.multiSelectMode?this._selectValueByKey(null):this._selectValueByKey(t)),this.selectValueByKey(t),this.model.showResetIcon&&this._showReset())},_loadInitData:function(e){var t=this.model.dataSource,i=this,s=this.model.fields,n=s&&s.text?s.text:"text";if("none"!=this.model.multiSelectMode&&(e=e.split(this.model.delimiterChar)),x.DataManager&&t instanceof x.DataManager&&!i._trigger("actionBegin",{requestFrom:"default"})){var a,r=this._getQuery();if("object"==typeof e){for(var o=0;o<e.length-1;o++)r.queries.push(x.Predicate(n,"equal",e[o].trim(),!this.model.caseSensitiveSearch));a=t.executeQuery(r)}else a=t.executeQuery(this._getQuery().where(n,"equal",e,!this.model.caseSensitiveSearch));a.done(function(e){i._trigger("actionSuccess",{e:e,requestFrom:"default"}),(!e.result||0<e.result.length)&&i._setHiddenkeyByValue(e.result)})}},_setHiddenkeyByValue:function(e){x.isNullOrUndefined(this.value())&&this.value("");var t=this.value(),i=e,s=[],n=[],t="none"==this.model.multiSelectMode?t:t.split(this.model.delimiterChar);if(!x.isNullOrUndefined(i)){for(var a=0;a<i.length;a++){var r=this._getField(i[a],this.model.fields.text);if("number"==typeof r&&(r=r.toString()),x.isNullOrUndefined(this.model.fields.key)){if(x.isNullOrUndefined(this.model.fields.key))if("object"==typeof t){for(var o=0;o<t.length-1;o++)r==t[o].trim()&&n.push(r);n=this._removeDuplicateVal(n),this._hiddenInput.val(n)}else r==t&&this._hiddenInput.val(r)}else{var l=this._getField(i[a],this.model.fields.key);if("string"==typeof t)r==t&&this._hiddenInput.val(l);else for(var d=0;d<t.length-1;d++)r==t[d]&&(""==this._hiddenInput.val()?this._hiddenInput.val(l):this._hiddenInput.val(this._hiddenInput.val()+this.model.delimiterChar+l+this.model.delimiterChar))}s.push(r)}"object"!=typeof t&&-1==s.indexOf(t)&&this._hiddenInput.val(t)}},_checkNameAttr:function(){this.model.name=null!=this.element.attr("name")?this.element.attr("name"):null!=this.model.name?this.model.name:this.element[0].id,this.element.attr("name",this.model.name)},_disabled:function(e){e?this.disable():this.enable()},_destroyDropdown:function(){this.dropdownbutton.off("mousedown",b.proxy(this._OnDropdownClick,this)),this.dropdownbutton.remove(),this.dropdownbutton=null,this.container.removeClass("e-padding")},_validateDelimiter:function(e){if(b.trim(e).length==e.length||null!=e.length)if(!/^[a-zA-Z0-9]+$/.test(e))return e;return","},_checkWatermarkSupport:function(){return"placeholder"in document.createElement("input")},_setWatermark:function(){(this.model.watermarkText&&(""==this.value()||x.isNullOrUndefined(this.value()))||"visualmode"!=this.model.multiSelectMode)&&this.element.attr("placeholder",this.model.watermarkText).width("")},_setWatermarkTxt:function(){var e;null==this.model.watermarkText||""!=b.trim(this.element.val())||"visualmode"==this.model.multiSelectMode&&""!=b.trim(this._hiddenInput.val())||(e=(null!=this.model.watermarkText?this.model:this._localizedLabels).watermarkText,this._hiddenSpan.css("display","block").text(e))},_renderSuggestionList:function(){var e=b("#"+this.element[0].id+"_suggestion").get(0);e&&b(e).remove(),this.suggestionList=x.buildTag("div.e-atc-popup e-popup e-widget e-box "+this.model.cssClass+"#"+this.target.id+"_suggestion","",{display:"none"}).attr("role","listbox"),this.element.attr("aria-owns",this.target.id+"_suggestion"),this.popup=this.suggestionList;e=x.buildTag("div");if(this.model.multiColumnSettings.enable){if(this._tableColumn=x.buildTag("table","",{border:0,padding:0,"border-spacing":0},{role:"listbox",class:"e-atc-tableContent"}),this._listEventBind(this._tableColumn,"tr"),this._headerColGroup=document.createElement("colgroup"),this.model.multiColumnSettings.showHeader){this._tableHeaderDiv=x.buildTag("div",{},{},{class:"e-atc-tableHeader "+(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll")});var t=x.buildTag("div",{},{},{class:"e-atc-tableHeaderContent e-atc-tableHeaderBorder"}),i=document.createElement("tr");this._tableHeader=x.buildTag("table","",{"border-spacing":"0.25px"},{});for(var s,n=0,a=this.model.multiColumnSettings.columns.length;n<a;n++)0!=this.model.multiColumnSettings.columns[n].visible?(s=x.buildTag("th",this.model.multiColumnSettings.columns[n].headerText||"column"+n,{"text-align":this.model.multiColumnSettings.columns[n].headerTextAlign||"left"},{class:n==this.model.multiColumnSettings.columns.length-1?"":this.model.enableRTL?"e-atc-thleft":"e-atc-thright"}),b(i).append(s),s=document.createElement("col"),b(this._headerColGroup).append(s)):this._hiddenColumns.push(this.model.multiColumnSettings.columns[n]);b(this._tableHeaderDiv).append(b(t).append(b(this._tableHeader).append(i).append(this._headerColGroup))),this.suggestionList.append(this._tableHeaderDiv)}else{for(n=0,a=this.model.multiColumnSettings.columns.length;n<a;n++)b(this._headerColGroup).append(document.createElement("col"));this._tableColumn.append(this._headerColGroup)}t=x.buildTag("div");t.append(this._tableColumn),e.append(t)}else this.ul=x.buildTag("ul.e-ul").attr("role","listbox"),this._listEventBind(this.ul,"li:not('.e-category')"),e.append(this.ul);this.suggestionList.append(e),b("body").append(this.suggestionList),this._setListWidth(),this._setListHeight(),this.model.multiColumnSettings.enable?(e.ejScroller({height:0,width:0,scrollerSize:20}),this.scrollerObj=e.ejScroller("instance")):(this.suggestionList.ejScroller({height:0,width:0,scrollerSize:20}),this.scrollerObj=this.suggestionList.ejScroller("instance"))},_listEventBind:function(e,t){e.on({mouseenter:b.proxy(this._OnMouseEnter,this),mouseleave:b.proxy(this._OnMouseLeave,this),click:b.proxy(this._OnMouseClick,this)},t)},_checkEmptyList:function(){"visualmode"==this.model.multiSelectMode&&this._removeRepeated(),0==this.suggestionListItems.length?(this.suggestionListItems.push(this.model.emptyResultText),this.noresult=!0):this.noresult=!1},_showSuggestionList:function(e){this.suggestionListItems=this.model.enableDistinct?x.dataUtil.distinct(this.suggestionListItems,"object"!=typeof this.suggestionListItems[0]?"":this.model.fields&&this.model.fields.text?this.model.fields.text:"text",!0):this.suggestionListItems,0<this.model.itemsCount&&(this.suggestionListItems=x.DataManager(this.suggestionListItems).executeLocal(x.Query().take(this.model.itemsCount))),this._checkEmptyList(),this._addNewTemplate=null,this.noresult&&"visualmode"==this.model.multiSelectMode&&this.model.allowAddNew&&""!=this.element.val()&&!this._repeatRemove&&(this.noresult=!1,this.suggestionListItems.pop(),this._addNewTemplate="   ("+this.model.addNewText+")",this.suggestionListItems.push(this.element.val()+this._addNewTemplate),this._checkEmptyList()),this.noresult&&!this.model.showEmptyResultText||this._generateSuggestionList(e)},_generateSuggestionList:function(e){var s=this.suggestionListItems;this.model.multiColumnSettings.enable?this._tableColumn.empty()&&this.model.multiColumnSettings.showHeader&&this._tableHeaderDiv.css("display",""):this.ul.empty();var n=this,t=document.createDocumentFragment();if("object"!=typeof s[0]){if(n.model.multiColumnSettings.enable){for(var i=x.buildTag("tbody"),a=x.buildTag("tr").attr("role","option").attr(n._isIE8?{unselectable:"on"}:{}),r=x.buildTag("td",{},{},{role:"option"}),o=0,l=s.length;o<l;o++){var d=n.model.highlightSearch&&!n.noresult?n._highlightSuggestion(s[o]):s[o],h=a.clone(),c=r.clone();b(c).attr(n._isIE8?{unselectable:"on"}:{}).attr(s[o]!=s.length-1?{class:"e-atc-tdbottom"}:{}).html(d),h[0].appendChild(c[0]),i[0].appendChild(h[0]),t.appendChild(i[0]),n.model.showEmptyResultText&&n.model.emptyResultText==d&&n.model.multiColumnSettings.showHeader&&n._tableHeaderDiv.css("display","none")&&b(c).removeClass("e-atc-tdbottom"),n._addNewTemplate&&!x.isNullOrUndefined(n._tableHeaderDiv)&&n._tableHeaderDiv.css("display","none")}n._tableColumn[0].appendChild(t)}else{for(var u=x.buildTag("li",{},{},{role:"option"}).attr(n._isIE8?{unselectable:"on"}:{}),o=0,l=s.length;o<l;o++){var d=n.model.highlightSearch&&!n.noresult?n._highlightSuggestion(s[o]):s[o],p=u.clone();p[0].innerHTML=d,t.appendChild(p[0])}n.ul[0].appendChild(t)}this._currList=s,this._mapper={txt:null,key:null}}else{var m=this.model.fields,g={_key:null,_text:null,_attr:null};g._key=m&&m.key?m.key:"key",g._text=m&&m.text?m.text:"text",g._attr=m&&m.htmlAttributes?m.htmlAttributes:"htmlAttributes",this._mapper={txt:g._text,key:g._key},this._currList=[],this.model.fields.groupBy?(m=m&&m.groupBy?m.groupBy:"groupBy",m=x.Query().group(m),this._addSortingQuery(m,"key"),m=x.DataManager(s).executeLocal(m),this._swapUnCategorized(m),m.forEach(function(e,t){var i;e.key&&(n.model.multiColumnSettings.enable?((i=x.buildTag("tr.e-category").attr("role","option").attr(n._isIE8?{unselectable:"on"}:{})).append(x.buildTag("td",e.key).attr("role","option").attr(n._isIE8?{unselectable:"on"}:{}).attr(t!=s.length-1?{class:"e-atc-tdbottom"}:{})),n._tableColumn.append(i)):n.ul.append(x.buildTag("li.e-category",e.key).attr("role","option").attr(n._isIE8?{unselectable:"on"}:{}))),n._generateLi(e.items,g)})):this._generateLi(s,g)}for(o=0,l=s.length;o<l;o++)if(this.model.multiColumnSettings.enable)this._textFormateString(this._currList[o])==this.value()&&(f=this._getLiTags()[o],b(f).addClass("e-activeli"));else for(var f,_=this.value().split(this.model.delimiterChar),v=0;v<=_.length;v++)this._currList[o]==_[v]&&(f=this._getLiTags()[o],b(f).addClass("e-activeli"));0<this._getLiTags().length&&this._showResult(e)},_swapUnCategorized:function(e){for(var t=e.length,i=0;i<t;i++)if(!e[i].key){for(var s=i;0<s;s--)e[s]=e[s-1];return e[s]=e[i],!1}},_generateLi:function(e,t){var i=this,s=document.createDocumentFragment(),n=document.createDocumentFragment();if(i.model.multiColumnSettings.enable){var a=i.model.multiColumnSettings.columns.length;this._tableColumn.append(x.buildTag("tbody"));for(var r=x.buildTag("tr"),o=x.buildTag("td"),l=0,d=e.length;l<d;l++){var h=this._getField(e[l],t._text),c=this._getField(e[l],t._key);if(!x.isNullOrUndefined(h)||i.model.multiColumnSettings.enable){i._getField(e[l]);var u=r.clone();u[0].className=l%2?"e-atc-trbgcolor":"";for(var p,m=0;m<a;m++)0!=this.model.multiColumnSettings.columns[m].visible&&(p=o.clone(),0!=this.model.multiColumnSettings.searchColumnIndices.length?p[0].innerHTML=i.model.highlightSearch&&-1<b.inArray(m,i._searchColumnIndex)?i._highlightSuggestion(i._getField(e[l],i.model.multiColumnSettings.columns[m].field).toString()):i._getField(e[l],i.model.multiColumnSettings.columns[m].field):p[0].innerHTML=i.model.highlightSearch&&-1<b.inArray(m.toString(),i._columnIndex)?x.isNullOrUndefined(i._getField(e[l],i.model.multiColumnSettings.columns[m].field))?i._highlightSuggestion(""):i._highlightSuggestion(i._getField(e[l],i.model.multiColumnSettings.columns[m].field).toString()):i._getField(e[l],i.model.multiColumnSettings.columns[m].field),p[0].className=(l!=e.length-1?"e-atc-tdbottom ":"")+(m!=i.model.multiColumnSettings.columns.length-1?i.model.enableRTL?"e-atc-tdleft ":"e-atc-tdright ":"")+(i.model.multiColumnSettings.columns[m].cssClass||""),p[0].style.textAlign=i.model.multiColumnSettings.columns[m].textAlign||"left",n.appendChild(p[0]));u[0].appendChild(n),c&&u.attr("id",c),i._setAttributes(i._getField(e[l],t._attr),u[0]),s.appendChild(u[0]),i._currList=i._currList.concat([e[l]])}}b(i._tableColumn).find("tbody")[0].appendChild(s)}else{for(var g=b("<li></li>"),l=0,d=e.length;l<d;l++){var f,h=this._getField(e[l],t._text),c=this._getField(e[l],t._key);x.isNullOrUndefined(h)||(i.model.highlightSearch&&(h=i._highlightSuggestion(h)),i.model.template&&(h=i._getTemplatedString(e[l],t._text,h)),(f=g.clone())[0].innerHTML+=h,c&&f[0].setAttribute("id",c),i._setAttributes(i._getField(e[l],t._attr),f[0]),s.appendChild(f[0]),i._currList=i._currList.concat([e[l]]))}i.ul[0].appendChild(s)}},_getLiTags:function(){return this.model.multiColumnSettings.enable?this._tableColumn.find("tbody tr:not('.e-category')"):this.ul.children("li:not('.e-category')")},_getTemplatedString:function(e,t,i){for(var s=this.model.template,n=s.indexOf("${"),a=s.indexOf("}");-1!=n&&-1!=a;){var r=s.substring(n,a+1),o=r.replace("${","").replace("}",""),l=this._getField(e,o);t==o&&(l=i),l=l||"",n=(s=s.split(r).join(l)).indexOf("${"),a=s.indexOf("}")}return s},_getField:function(e,t){return x.pvt.getObject(t,e)},_setAttributes:function(e,t){if(e)for(var i in"string"==typeof e&&(e=b.parseJSON(e)),e)t.setAttribute(i,e[i])},_setListWidth:function(){var e=this.model.popupWidth;e&&"auto"!=e?this.suggestionList.css({width:e}):this.suggestionList.css({width:this.wrapper.width()})},_setListHeight:function(){this.suggestionList.css({"max-height":this.model.popupHeight})},_refreshPopup:function(){"auto"==this.model.popupWidth&&Math.floor(this.wrapper.outerWidth())!=Math.floor(this.suggestionList.outerWidth())&&(this.suggestionList.css({width:this.wrapper.width()}),this._refreshScroller()),this._setListPosition()},_showResult:function(e){var t;this._refreshScroller(),this._refreshPopup(),this._isOpened?b(document).on("mousedown",b.proxy(this._OnDocumentClick,this)):(this.suggestionList.css("display","none"),t=this,clearTimeout(this._typing),this._typing=setTimeout(function(){t.suggestionList["slide"==t.model.animateType?"slideDown":"fadeIn"]("none"==t.model.animateType?0:300,function(){b(document).on("mousedown",b.proxy(t._OnDocumentClick,t))})},this.model.delaySuggestionTimeout),i=e!=l?{event:e,isInteraction:!0}:{isInteraction:!1},this._trigger("open",i),this.wrapper.addClass("e-active")),this._isOpened=!0,this.showSuggestionBox=!0;var i=this._getLiTags();this._listSize=i.length,b(window).on("resize",b.proxy(this._OnWindowResize,this));i=x.getScrollableParents(this.wrapper);i[0]!=window&&this._on(i,"scroll",this._hideResult)},_hideResult:function(e){var t;this.showSuggestionBox&&(this.showSuggestionBox=!1,this._activeItem=0,clearTimeout(this._hiding),this.element.attr("aria-expanded",!1),(t=this)._isOpened?(this.suggestionList.css("display","none"),e=e!=l?{event:e,isInteraction:!0}:{isInteraction:!1},this._trigger("close",e)):this._hiding=setTimeout(function(){t.model&&t.suggestionList["slide"==t.model.animateType?"slideUp":"fadeOut"]("none"==t.model.animateType?0:100),t._activeItem=0},this.model.delaySuggestionTimeout),b(document).off("mousedown",b.proxy(this._OnDocumentClick,this)),b(window).off("resize",b.proxy(this._OnWindowResize,this)),this._off(x.getScrollableParents(this.wrapper),"scroll",this._hideResult),this.wrapper.removeClass("e-active"))},_refreshScroller:function(){this.suggestionList.css("height","auto"),this.suggestionList.find(".e-content , .e-scroller").removeAttr("style"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(b(this._tableColumn).css("width","auto"),b(this._tableHeader).css("width","auto")),this.suggestionList.css("display","block"),this.model.multiColumnSettings.enable&&(this.scrollerObj.option("height","auto"),this._columnBorderAlign());var e=this.suggestionList.height()>parseInt(b.isNumeric(this.model.popupHeight)?this.model.popupHeight:this.model.popupHeight.replace("px",""))-4;e||this.model.multiColumnSettings.enable&&(this.suggestionList.height()<=this._tableColumn.height()||this.suggestionList.width()<=this._tableColumn.width()||this.model.multiColumnSettings.showHeader&&this.suggestionList.width()<=this._tableHeader.width())?(e&&(this.scrollerObj.model.height=this.model.multiColumnSettings.showHeader&&this._tableHeader?parseInt(this.suggestionList.height())-parseInt(this._tableHeader.height()):this.suggestionList.height()),!this.model.multiColumnSettings.enable&&this.suggestionList.width()<this.suggestionList.find(".e-ul").width()&&this.suggestionList.find(".e-ul").width(this.suggestionList.find(".e-ul").width()),this.scrollerObj.model.width=this.suggestionList.width(),this.scrollerObj.refresh(),this.scrollerObj.option({enableRTL:this.model.enableRTL,scrollTop:0,scrollLeft:0}),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._addThBorder(),this.suggestionList.addClass("e-scroller"),!this.scrollerObj._vScroll&&this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()):(this.scrollerObj.setModel({height:"auto",width:this.suggestionList.width()}),this.scrollerObj.refresh(),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&this._removeThBorder()),this.suggestionList.css("height","auto"),this._isIE8&&this.suggestionList.find(".e-vscroll div, .e-hscroll div").attr("unselectable","on"),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this.suggestionList.find(".e-content").scroll(x.proxy(function(e){this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(b(e.currentTarget).scrollLeft())},this)),0<this.suggestionList.find(".e-content").length&&this._tableHeader.parent(".e-atc-tableHeaderContent").scrollLeft(this.model.enableRTL?this.suggestionList.find(".e-content")[0].scrollWidth-this.suggestionList.find(".e-content")[0].clientWidth:0))},_columnBorderAlign:function(){if(this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&"none"!=this._tableHeaderDiv.css("display")){this._tableWid=(this._tableHeader.outerWidth()>this._tableColumn.outerWidth()?this._tableHeader:this._tableColumn).outerWidth(),this._tableColumn.find("colgroup").remove(),b(this._headerColGroup.children).removeAttr("style");for(var e=0,t=this._headerColGroup.children.length;e<t;e++)b(this._headerColGroup.children[e]).css({width:(parseInt(b(this._tableColumn).find("tr:first td").eq(e).outerWidth())>parseInt(this._tableHeader.find("tr:first th").eq(e).outerWidth())?b(this._tableColumn).find("tr:first td"):this._tableHeader.find("tr:first th")).eq(e).outerWidth()});this._tableColumn.append(b(this._headerColGroup).clone());var i=this._tableWid>this.suggestionList.width()?this._tableWid:"100%";b(this._tableColumn).css("width",i),b(this._tableHeader).css("width",i)}else if(this.model.multiColumnSettings.enable&&!this.model.multiColumnSettings.showHeader){if(b(this._tableColumn).css("width","auto"),this._tableWid=this._tableColumn.outerWidth(),b(this._headerColGroup.children).removeAttr("style"),"100%"!=(i=this._tableWid>this.suggestionList.width()?this._tableWid:"100%")){for(e=0,t=this._headerColGroup.children.length;e<t;e++)b(this._headerColGroup.children[e]).css({width:b(this._tableColumn).find("tr:first td").eq(e).outerWidth()});this._tableColumn.append(this._headerColGroup)}b(this._tableColumn).css("width",i)}else b(this._tableColumn).css("width","100%")},_removeThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").removeClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.parent(".e-atc-tableHeaderContent").removeClass("e-atc-tableHeaderBorder")},_addThBorder:function(){this._tableHeader.parents(".e-atc-tableHeader").addClass(this.model.enableRTL?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll").removeClass(this.model.enableRTL?"e-atc-tableHeaderScroll":"e-atc-tableHeaderRTL"),this._tableHeader.parent(".e-atc-tableHeaderContent").addClass("e-atc-tableHeaderBorder")},_setListPosition:function(){var e=this.wrapper,t=this._getOffset(e),i=b(document).scrollTop()+b(window).height()-(t.top+b(e).outerHeight()),s=t.top-b(document).scrollTop(),n=this.suggestionList.outerHeight(),a=this.suggestionList.outerWidth(),r=t.left,o=e.outerHeight(),l=(o-e.height())/2,d=this._getZindexPartial(),n=(n<i||s<n?t.top+o+3:t.top-n-3)-l,l=b(document).scrollLeft()+b(window).width()-r;(this.model.enableRTL||l<a&&a<r+e.outerWidth())&&(r-=this.suggestionList.outerWidth()-e.outerWidth()),this.suggestionList.css({left:r+"px",top:n+"px","z-index":d})},_getOffset:function(e){return x.util.getOffset(e)},_getZindexPartial:function(){return x.util.getZindexPartial(this.element,this.suggestionList)},_targetFocus:function(e){"visualmode"==this.model.multiSelectMode&&this._setWatermarkWidth(30),this._isWatermark||this._hiddenSpan.css("display","none"),this.wrapper.addClass("e-focus"),this._focusValue=this.model.value,this._preVal=this.model.value,this._isFocused=!0,this._trigger("focusIn",{event:e,isInteraction:!0,value:this.value()})},_focusOutAction:function(e){var t,i="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();if(this._isFocused=!1,this.wrapper.removeClass("e-focus"),x.isNullOrUndefined(this.model.fields.key)&&("none"==this.model.multiSelectMode?(t=this.model.dataSource,x.DataManager&&t instanceof x.DataManager?this._loadInitData():this._setHiddenkeyByValue(t)):this._hiddenInput.val(i)),this._focusValue==this.model.value||this.model.isChangeOnBlur){if(!this.model.isChangeOnBlur||this._preVal==i)return!1;this.value(i),""==this._hiddenInput.val()&&this._hiddenInput.val(i),this._changeEvtTrigger(i,e)}else""==this._hiddenInput.val()&&this._hiddenInput.val(i),this._changeEvtTrigger(i,e);this.model.showPopupButton&&this.dropdownbutton.removeClass("e-active"),this._isWatermark||this._setWatermarkTxt(),this._removeSelection(),"visualmode"==this.model.multiSelectMode&&this.model.showResetIcon&&""!=this.element.val()&&this._removeReset(),"visualmode"==this.model.multiSelectMode?(this._removeActive(),this.element.val(""),this._setWatermarkWidth(1),this._preVal="",this._addNewTemplate=null):("delimiter"==this.model.multiSelectMode&&this._valueChange(e),this._updateSelectedItemArray(this.getValue())),x.isNullOrUndefined(this.value())||""==this.value()||(e=this.value().split(this.model.delimiterChar),"delimiter"!=this.model.multiSelectMode&&"none"!=this.model.multiSelectMode||(e=this._removeDuplicateVal(e),this._keyProcess(e))),""!=this.element.val()||""!=this.value()&&null!=this.value()||this._selectValueByKey(null)},_targetBlur:function(e){this._focusOutAction(e),this._trigger("focusOut",{event:e,isInteraction:!0,value:this.value()}),this._targetEle()},_setWatermarkWidth:function(e){this.model.watermarkText&&this.element.attr("placeholder")?this.element.width(""):this.element.val("").width(e)},_checkDeli:function(){var e=this.element.val(),t=this.model.delimiterChar;return e.substr(e.length-t.length,e.length)==t&&(this.element.val(e.substr(0,e.length-t.length)),!0)},_removeSelection:function(){var e;this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),(e=this._getCaretSelection()).end-e.start!=0&&e.end-e.start!=this.element.val().length&&(this.target.value=this.target.value.substr(0,e.start)))},_removeListHover:function(){this._getLiTags().removeClass("e-hover")},_addListHover:function(){var e=b(this._getLiTags()[this._activeItem-1]);e.addClass("e-hover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop()}),e.focus()},_calcScrollTop:function(){this.model.multiColumnSettings.enable?this.model.multiColumnSettings.showHeader?(this._tableColumn.outerHeight(),this._tableHeader.outerHeight()):this._tableColumn.outerHeight():this.ul.outerHeight();var e=this.model.multiColumnSettings.enable?this._tableColumn.find("tr"):this.ul.find("li"),t=(this.model.multiColumnSettings.enable?this._tableColumn.find("tr.e-hover"):this.ul.find("li.e-hover")).index();return e.eq(1).outerHeight()*t-((this.model.multiColumnSettings.enable?this._tableColumn.parent():this.suggestionList).outerHeight()-e.eq(t).outerHeight())/2},getActiveText:function(){if(0<this._activeItem)return this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):!x.isNullOrUndefined(this._mapper)&&this._mapper.txt?this._getField(this._currList[this._activeItem-1],this._mapper.txt):this._currList[this._activeItem-1]},_getUniqueKey:function(){var e=null;return x.isNullOrUndefined(this._mapper)||(this._mapper.key&&(e=this._getField(this._currList[this._activeItem-1],this._mapper.key)),x.isNullOrUndefined(e)&&(e=null)),e},_setTextBoxValue:function(){var e,t,i,s;this._activeItem&&!this.noresult&&(t=this.model.multiColumnSettings.enable?this._textFormateString(this._currList[this._activeItem-1]):this.getActiveText(),s=this._getCaretSelection(),this.suggLen=s.start,e=this.target.value.substr(0,this.suggLen),s=-1==(i=this.target.value.lastIndexOf(this.model.delimiterChar))?b.trim(e.substr(i+1,this.suggLen)):b.trim(e.substr(i+this.model.delimiterChar.length,this.suggLen)),!e||e.toLowerCase()!=t.substr(0,this.suggLen).toLowerCase()&&s.toLowerCase()!=t.substr(0,this.suggLen-(i+this.model.delimiterChar.length)).toLowerCase()?("delimiter"==this.model.multiSelectMode&&t&&s?this.element.val(this.element.val().replace(s,t)):t&&this.element.val(t),this._removeSelection()):(t="delimiter"==this.model.multiSelectMode?e+t.substr(s.length,t.length):e+t.substr(e.length,t.length),this.element.val(t),this._autofilSelection(),"visualmode"==this.model.multiSelectMode&&(this._adjustWidth(),this.model.enableAutoFill&&this._refreshPopup()),this.model.autoFocus&&!this.noresult&&this._addListHover()))},_enterTextBoxValue:function(e){var t,i,s;!this._activeItem||this.noresult||this.model.readOnly||(t=this.getActiveText(),i=this._currList[this._activeItem-1],this._preVal=t+("delimiter"==this.model.multiSelectMode?this.model.delimiterChar:""),this._valueToTextBox(t,i,!1),s="visualmode"==this.model.multiSelectMode?this._modelValue:""==this.element.val()?null:this.element.val(),this._trigger("select",{event:e,isInteraction:!0,value:s,text:t,key:this._getUniqueKey(),item:i}),this._valueChange(e),this.model.showResetIcon&&this._showReset()),this._isOpened&&this._trigger("close",{event:e,isInteraction:!0})},_createBox:function(e){var t=x.buildTag("span.e-icon e-close"),e=x.buildTag("li.e-options",e).append(t);return this._on(t,"click",function(e){return!!this.model.enabled&&void this._deleteBox(b(e.target).parent())}),e},_addLoadingClass:function(){this.model.showLoadingIcon&&this.element.addClass("e-load")},_removeLoadingClass:function(){this.element.removeClass("e-load")},_highlightSuggestion:function(e){if(""!=b.trim(this._queryString)){var t,i,s=this.model.caseSensitiveSearch?"g":"gi",n=b.trim(this._queryString);if(n=/^[a-zA-Z0-9- ]*$/.test(n)?n:n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n="startswith"==this.model.filterType?"^"+n:"endswith"==this.model.filterType?n+"$":n,(s=new RegExp(n,s)).test(e)){t=e.match(s),s=e.replace(s,"~^"),e="";for(var a=0,r=(i=s.split("~^")).length;a<r;a++)e+=t[a]?i[a]+"<span class='e-hilight-txt'>"+t[a]+"</span>":i[a]}}return e},_RightToLeft:function(e){e?(this.wrapper.addClass("e-rtl"),this.suggestionList.addClass("e-rtl")):(this.wrapper.removeClass("e-rtl"),this.suggestionList.removeClass("e-rtl")),this.model.multiColumnSettings.enable&&this.model.multiColumnSettings.showHeader&&(this._tableHeaderDiv.removeClass(e?"e-atc-tableHeaderRTL":"e-atc-tableHeaderScroll"),this._tableHeader.find("tr :not(th:last)").addClass(e?"e-atc-thleft":"e-atc-thright").removeClass(e?"e-atc-thright":"e-atc-thleft"))},_setRoundedCorner:function(e){e?(this.container.addClass("e-corner"),this.suggestionList.addClass("e-corner")):(this.container.removeClass("e-corner"),this.suggestionList.removeClass("e-corner"))},_checkReadOnly:function(e){this.model.readOnly=e,this.model.readOnly?(this.element.attr({readonly:"readonly","aria-readonly":!0}),this._off(this.element,"keydown",this._OnKeyDown),this._off(this.element,"keyup",this._OnKeyUp),this._off(this.element,"paste",this._OnPaste),this._off(this.element,"keypress",this._onkeyPress)):(this.element.removeAttr("readonly aria-readonly"),this._on(this.element,"keydown",this._OnKeyDown),this._on(this.element,"keyup",this._OnKeyUp),this._on(this.element,"paste",this._OnPaste),this._on(this.element,"keypress",this._onkeyPress))},_onkeyPress:function(e){13==e.keyCode&&this._PreventDefaultAction(e)},_OnPaste:function(e){var t=this;setTimeout(function(){t._OnKeyUp(e)},0)},_OnKeyDown:function(e){switch("startswith"!=this.model.filterType&&(this.model.enableAutoFill=!1),e.keyCode){case 37:case 35:case 36:this._removeSelection();case 13:case 39:break;case 38:this.showSuggestionBox&&this.suggestionList&&(this._removeListHover(),1<this._activeItem?--this._activeItem:this._activeItem=this._listSize,this._navigationHover()),this._PreventDefaultAction(e);break;case 40:this.showSuggestionBox&&this.suggestionList?(this._removeListHover(),this._activeItem<this._listSize?this._activeItem+=1:this._activeItem=1,this._navigationHover()):e.ctrlKey&&""==this.element.val()?this._showFullList(e):e.ctrlKey&&this._showSuggestionList(e),this._PreventDefaultAction(e);break;case 33:case 34:var t;this.showSuggestionBox&&this.suggestionList&&(this._removeListHover(),t=(this.model.multiColumnSettings.enable?this._tableColumn.parent():this.suggestionList).height(),i=(this.model.multiColumnSettings.enable?this._tableColumn.find("tr"):this.ul.children("li")).outerHeight(),i=0!=Math.round(t/i)?Math.round(t/i):this._listSize,this._activeItem=33==e.keyCode?this._activeItem-i:this._activeItem+i,this._activeItem<1&&(this._activeItem=1),this._activeItem>this._listSize&&(this._activeItem=this._listSize),this._navigationHover()),this._PreventDefaultAction(e);break;case 8:""==b.trim(this.element.val())&&(this._isOpened=!1),"visualmode"==this.model.multiSelectMode&&""==this.element.val()&&this._deleteLastBox();break;case 17:this.ctrlKeyPressed=!0;break;case 9:this.showSuggestionBox&&(this._queryString=this.element.val(),this._enterTextBoxValue(e),this._hideResult(e),this._isOpened=!1,this._PreventDefaultAction(e));break;case 27:this._isOpened=!1;var i=this.showSuggestionBox;this._hideResult(e),this._PreventDefaultAction(e),i&&this._trigger("close",{event:e,isInteraction:!0})}"visualmode"==this.model.multiSelectMode&&(17!=e.keyCode&&8!=e.keyCode&&46!=e.keyCode&&this._removeActive(),this._adjustWidth())},_PreventDefaultAction:function(e){e.preventDefault(),this._cancelEvent||(e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!0)},_bubbleEvent:function(e){return"boolean"==typeof e&&(this._cancelEvent=e),this._cancelEvent},_navigationHover:function(){this._addListHover(),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this._queryString=this.target.value,this._setTextBoxValue())},_OnKeyUp:function(e){if(this._keyDownComplete(e),this.ctrlKeyPressed&&"paste"!=e.type)return 17==e.keyCode&&(this.ctrlKeyPressed=!1),!1;if(""==b.trim(this.element.val())&&38==e.keyCode&&40==e.keyCode)return this._hideResult(e),!1;if(!this._checkDelimiter())return!1;switch(this._queryString=b.trim(this._queryString),e.keyCode){case 34:case 33:case 38:case 40:case 37:case 39:case 20:case 16:case 17:case 18:case 35:case 36:case 144:case 9:case 27:break;case 13:e.preventDefault(),this._queryString=this.element.val(),this._enterTextBoxValue(e),this.model.enableAutoFill&&(this.element.attr("aria-autocomplete","both"),this.suggLen=this.element.val().length,this._autofilSelection()),this._isOpened=!1,this._hideResult(e);break;case 46:if("visualmode"==this.model.multiSelectMode&&""==this.element.val()){this._deleteBox(this._ulBox.children("li.e-active"));break}case 8:this._queryString.length>=this.model.minCharacter?(this._autoFill=!1,this._OnTextEnter(e)):(this.noresult=!0,this._hideResult(e),""==b.trim(this.element.val())&&(this._isOpened=!1)),this._typed=!0;break;default:this._queryString.length>=this.model.minCharacter?(this._autoFill=!0,this._OnTextEnter(e)):(this.noresult=!0,this._isOpened=!1),this._typed=!0}},_getFilteredList:function(e,t){var i;clearTimeout(this.timeDelay),x.isNullOrUndefined(e)||"object"!=typeof e[0]||(i=this.model.fields.text||"text",this.model.actionFailure&&x.isNullOrUndefined(x.DataManager(e).executeLocal(x.Query().select(i))[0])&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})),!e||!e.length||e.length<1?(this.suggestionListItems=[],this.model.actionFailure&&this._trigger("actionFailure",{error:this._localizedLabels.actionFailure})):(i=x.Query(),this._addQuery(i,"object"==typeof e[0]),this.suggestionListItems=x.DataManager(e).executeLocal(i),this.model.actionSuccess&&this._trigger("actionSuccess")),this._doneRemaining(t),this.model.actionComplete&&this._trigger("actionComplete")},_performSearch:function(e){this.model.actionBegin&&this._trigger("actionBegin");var t,i=this.model.dataSource;x.DataManager&&i instanceof x.DataManager?i.dataSource.offline||i.dataSource.json&&0<i.dataSource.json.length?(this._getFilteredList(i.dataSource.json,e),this._selectedObj.push(i.dataSource.json)):(window.clearTimeout(this.timer),(t=this).timer=window.setTimeout(function(){t._fetchRemoteDat(i)},700)):this._getFilteredList(i,e)},_fetchRemoteDat:function(e){var t=this,i=this._getQuery();this._addQuery(i,!0),e.executeQuery(i).fail(function(e){t.suggestionListItems=null,t._removeLoadingClass(),t._trigger("actionFailure",e)}).done(function(e){t.suggestionListItems=e.result,"none"==t.model.multiSelectMode?t._selectedObj=e.result:"delimiter"==t.model.multiSelectMode&&(t._selectedObj=t._selectedObj.concat(e.result)),t._doneRemaining(e),t._trigger("actionSuccess",e)}).always(function(e){t._trigger("actionComplete",e)})},_addSortingQuery:function(e,t){var i;this.model.allowSorting&&(i="descending"==this.model.sortOrder,e.sortBy(t,i))},_addQuery:function(e,t){var i,s,n,a="";if(this._predicates=[],t&&(a=(n=this.model.fields)&&n.text?n.text:"text"),this._queryString)if(this.model.multiColumnSettings.enable)if(this._columnsIndex(),t){a=[];if(0!=this.model.multiColumnSettings.searchColumnIndices.length)for(var r=0,o=this._searchColumnIndex.length;r<o;r++)a.push(this.model.multiColumnSettings.columns[this._searchColumnIndex[r]].field),i=this._predicateConvertion(i,this.model.multiColumnSettings.columns[this._searchColumnIndex[r]].field,this.model.multiColumnSettings.columns[this._searchColumnIndex[r]].filterType||this.model.filterType,this._queryString,!this.model.caseSensitiveSearch,this.model.multiColumnSettings.columns[this._searchColumnIndex[r]].type||"string");else for(r=0,o=this._columnIndex.length;r<o;r++)a.push(this.model.multiColumnSettings.columns[this._columnIndex[r]].field),i=this._predicateConvertion(i,this.model.multiColumnSettings.columns[this._columnIndex[r]].field,this.model.multiColumnSettings.columns[this._columnIndex[r]].filterType||this.model.filterType,this._queryString,!this.model.caseSensitiveSearch,this.model.multiColumnSettings.columns[this._columnIndex[r]].type||"string");for(r=0;r<e.queries.length;r++)"onWhere"==e.queries[r].fn&&(s=e.queries.slice(r)[0].e);x.isNullOrUndefined(s)&&0!=this.model.multiColumnSettings.searchColumnIndices.length?0<this._predicates.length&&e.where(x.Predicate.or(this._predicates)):0!=this.model.multiColumnSettings.searchColumnIndices.length?e.where(s.and(this._predicates)):x.isNullOrUndefined(s)?e.where(i):e.where(s.and(i))}else e.where(a,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch,this.model.ignoreAccent);else e.where(a,this.model.filterType,this._queryString,!this.model.caseSensitiveSearch,this.model.ignoreAccent);this._addSortingQuery(e,a)},_predicateConvertion:function(e,t,i,s,n,a){var r,o=this.model.ignoreAccent;return"number"==a?r=Number(s):"boolean"==a?"true"==s||"yes"==s||"1"==s?r=!0:"false"!=s&&"no"!=s&&"0"!=s||(r=!1):r="date"==a?new Date(s):s,"number"==a&&isNaN(r)||"boolean"==a&&r==l||(0!=this.model.multiColumnSettings.searchColumnIndices.length?this._predicates.push(new x.Predicate(t,i,r,n,o)):e=e!=l?e.or(t,i,r,n,o):x.Predicate(t,i,r,n,o)),e},_getQuery:function(){if(x.isNullOrUndefined(this.model.query)){var e,t=[],i=x.Query(),s=this.model.fields;for(e in s)"tableName"!==e&&s[e]&&t.push(s[e]);0<t.length&&i.select(t),x.isNullOrUndefined(this.model.dataSource.dataSource.url)||this.model.dataSource.dataSource.url.match(s.tableName+"$")||x.isNullOrUndefined(s.tableName)||i.from(s.tableName)}else i=this.model.query.clone();return i},_OnTextEnter:function(e){var t=this;x.isDevice()?(clearTimeout(this.timeDelay),this.timeDelay=setTimeout(function(){t._onTextProcess(e)},t.model.delaySuggestionTimeout)):t._onTextProcess(e)},_onTextProcess:function(e){this._addLoadingClass(),this.element.attr("aria-expanded",!1),this._performSearch(e),this.model.showResetIcon&&this._showReset()},_showReset:function(){x.isNullOrUndefined(this.resetSpan)&&(this.resetSpan=x.buildTag("span.e-icon e-iclose"),this.model.showPopupButton?(this.dropdownbutton.before(this.resetSpan),this.container.addClass("e-popup e-reset")):this.container.append(this.resetSpan).addClass("e-reset"),this._on(this.resetSpan,"mousedown",this._refreshSearch))},_targetEle:function(){this.eleClick&&(this.element[0].focus(),this.eleClick=!1)},_refreshSearch:function(){this.model.enabled&&!this.model.readOnly&&(this.resetSpan=null,this.clearText(),this.eleClick=!0,this._refreshPopup())},_removeReset:function(){this.resetSpan=this.resetSpan&&this.resetSpan[0].remove(),this._refreshPopup()},_doneRemaining:function(e){this._showSuggestionList(e),this.element.attr({"aria-expanded":!0,"aria-haspopup":!0}),(this.model.enableAutoFill&&this._autoFill&&!this.noresult||this.model.autoFocus)&&(this.element.attr("aria-autocomplete","both"),this._activeItem=1,this._queryString=this.target.value),this.model.enableAutoFill&&this._autoFill&&!this.noresult&&this._setTextBoxValue(),this.model.autoFocus&&!this.noresult&&(this._addListHover(),0<this.wrapper.width()&&this.suggestionList.children("div.e-content").css({width:this.wrapper.width()})),this._removeLoadingClass(),this.noresult&&!this.model.showEmptyResultText&&this._hideResult(e)},_removeRepeated:function(){var e=this.suggestionListItems;if(!e||0==e.length||0==this._selectedItems.length||1==this.suggestionListItems.length&&this.suggestionListItems[0]==this.element.val()+this._addNewTemplate)return!1;this._repeatRemove=!1;for(var t,i,s,n=0,a=this._selectedItems.length;n<a;n++)x.DataManager&&this.model.dataSource instanceof x.DataManager?(i=this,s=0,e.forEach(function(e){(x.isNullOrUndefined(e[i.model.fields.text])?x.isNullOrUndefined(e[i.model.fields.key])?x.isNullOrUndefined(e[i.model.fields.htmlAttributes])?x.isNullOrUndefined(e[i.model.fields.groupBy])||e[i.model.fields.groupBy]==i._selectedItems[n][i.model.fields.groupBy]:e[i.model.fields.htmlAttributes]==i._selectedItems[n][i.model.fields.htmlAttributes]:e[i.model.fields.key]==i._selectedItems[n][i.model.fields.key]:e[i.model.fields.text]==i._selectedItems[n][i.model.fields.text])&&(t=s),s++})):(t=e.indexOf(this._selectedItems[n]),isNaN(parseFloat(this._selectedItems[n]))||(t=e.indexOf(parseFloat(this._selectedItems[n])))),-1==t||x.isNullOrUndefined(t)||this.suggestionListItems.splice(t,1),this.element.val()==this._selectedItems[n]&&(this._repeatRemove=!0)},_checkDelimiter:function(){this._queryString=this.element.val();var e="delimiter"!=this.model.multiSelectMode?-1:this._queryString.lastIndexOf(this.model.delimiterChar);return-1==e||(this._queryString=this._queryString.substr(e+this.model.delimiterChar.length,this._queryString.length)),!0},_autofilSelection:function(){var e=this.element[0],t=this.element.val().length;e.setSelectionRange?e.setSelectionRange(this.suggLen,t):e.createTextRange&&((e=e.createTextRange()).collapse(!0),e.moveEnd("character",t),e.moveStart("character",this.suggLen),e.select())},_OnDropdownClick:function(e){this.model.enabled&&!this.model.readOnly&&(e.preventDefault(),this.dropdownbutton.addClass("e-active"),this._iconEventBind(this.dropdownbutton,"span"),(e.which&&1==e.which||e.button&&0==e.button)&&(this._addLoadingClass(),this.showSuggestionBox?(this._hideResult(e),this._isOpened=!1,this._removeLoadingClass()):this._showFullList(e)))},_iconEventBind:function(e,t){e.on({mouseleave:b.proxy(this._OnMouseIconClick,this)},t)},_OnMouseIconClick:function(e){this.dropdownbutton.removeClass("e-active")},_showFullList:function(e){this._isFocused||this.element.focus(),this._queryString=null,this._autoFill=!1,this._performSearch(e)},_OnMouseEnter:function(e){this._getActiveItemIndex(e),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-active")},_getActiveItemIndex:function(e){var t=e.target;this.model.multiColumnSettings.enable&&"tr"!=e.target.tagName.toLowerCase()?t=b(e.target).parents("tr"):"li"!=e.target.tagName.toLowerCase()&&(t=b(e.target).parents("li")),this._getLiTags().removeClass("e-hover"),b(t).addClass("e-hover"),this._queryString=this.element.val(),this._activeItem=this._getLiTags().index(b(t))+1},_OnMouseLeave:function(e){this._getLiTags().removeClass("e-hover"),this.model.showPopupButton&&this.dropdownbutton.removeClass("e-active"),this.model.highlightSearch&&this._getLiTags().find(".e-hilight-txt").removeClass("e-hover")},_OnMouseClick:function(e){this._getActiveItemIndex(e),this.noresult||(this._enterTextBoxValue(e),this._isOpened=!1,this._hideResult(e))},_OnDocumentClick:function(e){b(e.target).is(this.suggestionList)||b(e.target).parents(".e-atc-popup").is(this.suggestionList)||b(e.target).is(this.element)||b(e.target).parents(".e-atc").is(this.wrapper)?(b(e.target).is(this.suggestionList)||b(e.target).parents(".e-atc-popup").is(this.suggestionList))&&e.preventDefault():(this._isOpened=!0,this._hideResult(e))},_OnWindowResize:function(e){this._refreshPopup()},_keyProcess:function(e){var t=this._declareVariable(),i=this._delimiterChar();if(!x.isNullOrUndefined(e))for(var s=0,n=e.length;s<n;s++){var a=e[s];x.DataManager&&this.model.dataSource instanceof x.DataManager?this._selectValueByKey(null):(this._dataQuery=this.model.multiColumnSettings.enable?x.Query():x.Query().where(t[0],this.model.filterType,a,!1),this._promise=x.DataManager(this.model.dataSource).executeLocal(this._dataQuery),this.model.multiColumnSettings.enable?this._formatStringKey(e,t,i):this._promise instanceof Array&&0==this._promise.length?null!=this._selectValueByKey()&&this._selectValueByKey():this._getFieldKey(this._promise[0],t[1],i))}},_formatStringKey:function(e,t,i){this._selectValueByKey(null);for(var s=0,n=e.length;s<n;s++)if(""!=e[s]){for(var a,r=e[s],o=0,l=this._promise.length;o<l;o++)r==this._textFormateString(this._promise[o])&&(a=o);a?this._getFieldKey(this._promise[a],t[1],i):null!=this._selectValueByKey()&&this._selectValueByKey()}},_getFieldKey:function(e,t,i){var s,n;!x.isNullOrUndefined(this.model.template)&&x.isNullOrUndefined(this._getField(e,t))||x.isNullOrUndefined(this._getField(e,t))||(n=this._getField(e,t).toString(),"none"!=this.model.multiSelectMode&&(n=this._selectValueByKey(),s=this.model.delimiterChar,t=this._getField(e,t).toString(),n=null!=n?(i=n.toString().split(i).filter(function(e){return""!==e}),-1==b.inArray(t,i)?(i.push(t),i.join(s)+s):t+s):t+s),this._selectValueByKey(n))},_removeDuplicateVal:function(e){var i=[];return b.each(e,function(e,t){-1==b.inArray(t,i)&&i.push(t)}),1!=e.length||x.isNullOrUndefined(this._originalval)||-1==b.inArray(e[0],this._originalval)&&this._selectValueByKey(null),i},_valueChange:function(e){var t="visualmode"==this.model.multiSelectMode?this._modelValue:this.element.val();(this.value()!=t||""==t&&""!=this.element.val())&&(this.value(t),!x.isNullOrUndefined(this.model.fields.key)&&""!=t||this._hiddenInput.val(t),this._changeEvtTrigger(t,e)),this.model.showResetIcon&&!t&&(this.wrapper.find("span.e-iclose").remove(),this.resetSpan=null)},_changeEvtTrigger:function(e,t){t=t!=l?{event:t,isInteraction:!0,value:e}:{isInteraction:!1,value:e,lastremovedItem:this.deletedItem};this.initialRender||(this._trigger("_change",{value:e}),this._trigger("change",t))},_updateSelectedItemArray:function(t){var e=[];if(this._selectedItems=[],this.suggestionListItems=this.model.dataSource,"delimiter"==this.model.multiSelectMode&&t)if(e=t.split(this.model.delimiterChar),x.DataManager&&this.model.dataSource instanceof x.DataManager||!x.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]){for(var i=0,s=e.length;i<s;i++)if(e[i]){for(var n=this,a=this._selectedObj.length,r={},o=0;o<a;o++)this._selectedObj[o][n.model.fields.text]==e[i]&&(r=this._selectedObj[o],o=a);this._selectedItems.push(b.isEmptyObject(r)?e[i]:r)}}else this._createBoxForObjectType(e);else"none"==this.model.multiSelectMode&&t&&(e.push(t),x.DataManager&&this.model.dataSource instanceof x.DataManager||!x.isNullOrUndefined(this.suggestionListItems)&&"object"!=typeof this.suggestionListItems[0]?(n=this,r=b.grep(this._selectedObj,function(e){if(e[n.model.fields.text]==t)return e}),this._selectedItems.push(0<r.length?r:t)):this._createBoxForObjectType(e))},_keyDownComplete:function(e){var t,i,s=this.element.val(),n=this.value();x.isNullOrUndefined(this.model.fields.key)||46!=e.keyCode&&8!=e.keyCode&&65!=e.keyCode||"delimiter"!=this.model.multiSelectMode||(i=this.value().split(","),t=this.model.delimiterChar,i=i.indexOf(n.replace(/,/g,"")),n=this._hiddenInput.val().split(t),this._hiddenInput.val(n.join(t)),n.splice(i,1)),this._preVal==s||this.model.isChangeOnBlur&&(13!=e.keyCode||this._activeItem&&!this.noresult&&!this.model.readOnly)||(this._preVal=s,"visualmode"==this.model.multiSelectMode&&this._adjustWidth(),this._valueChange(e))},_moveCaretToEnd:function(e){var t;e.scrollLeft=e.scrollWidth,e.createTextRange&&((t=e.createTextRange()).moveEnd("textedit"),t.moveStart("textedit"),t.select()),"number"==typeof e.selectionStart?e.selectionStart=e.selectionEnd=e.value.length:void 0!==e.createTextRange&&((e=e.createTextRange()).collapse(!1),e.select())},_getCaretSelection:function(){var e=this.element[0],t=0;if(!isNaN(e.selectionStart))return i=e.selectionStart,t=e.selectionEnd,{start:Math.abs(i),end:Math.abs(t)};var i=document.selection.createRange().getBookmark(),t=e.createTextRange();t.moveToBookmark(i);e=e.createTextRange();e.collapse(!0),e.setEndPoint("EndToStart",t);e=e.text.length;return{start:e,end:e+t.text.length}},_getLocalizedLabels:function(){return x.getLocalizedConstants(this.sfType,this.model.locale)},_wireEvents:function(){this._on(this.element,"focus",this._targetFocus),this._on(this.element,"blur",this._targetBlur)}}),x.Autocomplete.Locale=x.Autocomplete.Locale||{},x.Autocomplete.Locale.default=x.Autocomplete.Locale["en-US"]={addNewText:"Add New",emptyResultText:"No suggestions",actionFailure:"The specified field doesn't exist in given data source",watermarkText:""},x.filterType={StartsWith:"startswith",Contains:"contains",EndsWith:"endswith",LessThan:"lessthan",GreaterThan:"greaterthan",LessThanOrEqual:"lessthanorequal",GreaterThanOrEqual:"greaterthanorequal",Equal:"equal",NotEqual:"notequal"},x.SortOrder={Ascending:"ascending",Descending:"descending"},x.MultiSelectMode={None:"none",Delimiter:"delimiter",VisualMode:"visualmode"},x.Animation={None:"none",Slide:"slide",Fade:"fade"},x.Type={Number:"number",String:"string",Boolean:"boolean",Date:"date"}}(jQuery,Syncfusion),function(o,l){l.widget("ejDraggable","ej.Draggable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,dragArea:null,clone:!1,distance:1,dragOnTaphold:!1,cursorAt:{top:-1,left:-2},dragStart:null,drag:null,dragStop:null,create:null,destroy:null,autoScroll:!1,scrollSensitivity:20,scrollSpeed:20,helper:function(){return o('<div class="e-drag-helper" />').html("draggable").appendTo(document.body)}},_init:function(){this.handler=function(){},this.resizables={},this._wireEvents(),this._browser=l.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,"msie"==this._browser.name&&this.element.addClass("e-pinch"),"edge"==this._browser.name&&this.element.css("touch-action","none")},_setModel:function(e){for(var t in e)switch(t){case"dragArea":this.model.dragArea=e[t];break;case"dragOnTaphold":this.model.dragOnTaphold=e[t];break;case"autoScroll":this.model.autoScroll=e[t]}},_destroy:function(){o(document).off(l.eventType.mouseUp,this._destroyHandler).off(l.eventType.mouseUp,this._dragStopHandler).off(l.eventType.mouseMove,this._dragStartHandler).off(l.eventType.mouseMove,this._dragHandler).off("mouseleave",this._dragMouseOutHandler).off("selectstart",!1),l.widgetBase.droppables[this.scope]=null},_initialize:function(e){if(e.target&&e.target.nodeName&&o(e.target).closest("input[type='text'], input[type='checkbox'], textarea, select, option").length)return!0;var t,i=e;e.preventDefault(),e=this._getCoordinate(e),this.target=o(i.currentTarget),this._initPosition={x:e.pageX,y:e.pageY},o(document).on(l.eventType.mouseMove,this._dragStartHandler).on(l.eventType.mouseUp,this._destroyHandler),this.model.clone||(t=this.element.offset(),this._relXposition=e.pageX-t.left,this._relYposition=e.pageY-t.top),o(document.documentElement).trigger(l.eventType.mouseDown,i)},_setDragArea:function(){var e=o(this.model.dragArea)[0];if(e){var t,i,s,n,a=["left","right","bottom","top"];if(l.isNullOrUndefined(e.getBoundingClientRect)){t=o(this.model.dragArea).outerWidth(),i=o(this.model.dragArea).outerHeight();for(r=0;r<a.length;r++)this["border-"+a[r]+"-width"]=0,this["padding-"+a[r]]=0;s=n=0}else{t=(e=e.getBoundingClientRect()).width||e.right-e.left,i=e.height||e.bottom-e.top;for(var r=0;r<a.length;r++)this["border-"+a[r]+"-width"]=isNaN(parseFloat(o(o(this.model.dragArea)[0]).css("border-"+a[r]+"-width")))?0:parseFloat(o(o(this.model.dragArea)[0]).css("border-"+a[r]+"-width")),this["padding-"+a[r]]=isNaN(parseFloat(o(o(this.model.dragArea)[0]).css("padding-"+a[r])))?0:parseFloat(o(o(this.model.dragArea)[0]).css("padding-"+a[r]));s=o(this.model.dragArea).offset().top,n=o(this.model.dragArea).offset().left}this._left=l.isNullOrUndefined(o(this.model.dragArea).offset())?0+this["border-left-width"]+this["padding-left"]:n+this["border-left-width"]+this["padding-left"],this._top=l.isNullOrUndefined(o(this.model.dragArea).offset())?0+this["border-top-width"]+this["padding-top"]:s+this["border-top-width"]+this["padding-top"],this._right=n+t-[this["border-right-width"]+this["padding-right"]],this._bottom=s+i-[this["border-bottom-width"]+this["padding-bottom"]]}},_dragStart:function(e){if("touchmove"==e.type||"mousemove"==e.type&&1==(void 0!==e.buttons?e.buttons:e.which)||this._isIE8||this._isIE9){var t=e;e=this._getCoordinate(e),this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0},this.offset=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.position=this._getMousePosition(t);var i=this._initPosition.x-e.pageX,s=this._initPosition.y-e.pageY;if(Math.sqrt(i*i+s*s)>=this.model.distance){i=this.model.helper({sender:t,element:this.target});if(!i||l.isNullOrUndefined(i))return;s=this.model.handle=this.helper=i;if(this.model.dragStart){var n=null;if(n="touchmove"==t.type?(i=t.originalEvent.changedTouches[0],document.elementFromPoint(i.clientX,i.clientY)):t.originalEvent.target||t.target,0==this.model.cursorAt.top&&0==this.model.cursorAt.left&&(n=this._checkTargetElement(e)||n),this._trigger("dragStart",{event:t,element:this.element,target:n,currentTarget:this._getCurrTarget(e)}))return this._destroy(),!1}this.model.dragArea?this._setDragArea():(this._left=this._top=this._right=this._bottom=0,this["border-top-width"]=this["border-left-width"]=0),!l.isNullOrUndefined(s)&&0<s.length&&(n=s.offsetParent().offset(),o(document).off(l.eventType.mouseMove,this._dragStartHandler).off(l.eventType.mouseUp,this._destroyHandler).on(l.eventType.mouseMove,this._dragHandler).on(l.eventType.mouseUp,this._dragStopHandler).on("mouseleave",this._dragMouseOutHandler).on("selectstart",!1),l.widgetBase.droppables[this.model.scope]={draggable:this.element,helper:s.css({position:"absolute",left:this.position.left-n.left,top:this.position.top-n.top}),destroy:this._destroyHandler})}}(this.model.autoScroll&&"touchmove"==e.type||"mousemove"==e.type&&1==(void 0!==e.buttons?e.buttons:e.which)||this._isIE8||this._isIE9)&&this._getScrollParent(t.target)},_drag:function(e){var t,i;e.preventDefault(),this.position=this._getMousePosition(e),this.position.top<0&&(this.position.top=0),o(document).height()<this.position.top&&(this.position.top=o(document).height()),o(document).width()<this.position.left&&(this.position.left=o(document).width());var s,n=l.widgetBase.droppables[this.model.scope].helper;this.model.drag&&(r=null,r="touchmove"==e.type?(a=e.originalEvent.changedTouches[0],document.elementFromPoint(a.clientX,a.clientY)):e.originalEvent.target||e.target,0==this.model.cursorAt.top&&0==this.model.cursorAt.left&&(r=this._checkTargetElement(e)||r),s={event:e,element:this.target,target:r,currentTarget:this._getCurrTarget(e),position:{left:null,top:null}},this._trigger("drag",s));var a=this._checkTargetElement(e);l.isNullOrUndefined(a)?this._hoverTarget&&(e.target=e.toElement=this._hoverTarget,this._hoverTarget.object._out(e),this._hoverTarget=null):((e.target=e.toElement=a).object._over(e),this._hoverTarget=a);var r=(n=l.widgetBase.droppables[this.model.scope].helper).offsetParent().offset(),a=(l.isNullOrUndefined(e.pageX)||0===e.pageX&&"touchmove"==e.type?e.originalEvent.changedTouches[0]:e).pageX,e=(l.isNullOrUndefined(e.pageY)||0===e.pageY&&"touchmove"==e.type?e.originalEvent.changedTouches[0]:e).pageY;this.model.dragArea?(this._pageX!=a&&(t=this._left>this.position.left?this._left:this._right<this.position.left+n.outerWidth(!0)?this._right-n.outerWidth(!0):this.position.left),this._pageY!=e&&(i=this._top>this.position.top?this._top:this._bottom<this.position.top+n.outerHeight(!0)?this._bottom-n.outerHeight(!0):this.position.top)):(t=this.position.left,i=this.position.top),(i<0||i-[r.top+this["border-top-width"]]<0)&&(i=[r.top+this["border-top-width"]]),(t<0||t-[r.left+this["border-left-width"]]<0)&&(t=[r.left+this["border-left-width"]]),t=s&&s.position&&s.position.left?s.position.left:t,i=s&&s.position&&s.position.top?s.position.top:i,n.css({left:s&&s.position&&s.position.left?t:t-[r.left+this["border-left-width"]],top:s&&s.position&&s.position.top?i:i-[r.top+this["border-top-width"]]}),this.position.left=t,this.position.top=i,this._pageX=a,this._pageY=e,this.model.autoScroll&&(e-o(document).scrollTop()<this.model.scrollSensitivity?o(document).scrollTop(o(document).scrollTop()-this.model.scrollSpeed):o(window).height()-(e-o(document).scrollTop())<this.model.scrollSensitivity&&o(document).scrollTop(o(document).scrollTop()+this.model.scrollSpeed),a-o(document).scrollLeft()<this.model.scrollSensitivity?o(document).scrollLeft(o(document).scrollLeft()-this.model.scrollSpeed):o(window).width()-(a-o(document).scrollLeft())<this.model.scrollSensitivity&&o(document).scrollLeft(o(document).scrollLeft()+this.model.scrollSpeed))},_dragStop:function(e){var t,i;"mouseup"!=e.type&&"touchend"!=e.type||this._destroy(e),this.model.dragStop&&(i=null,i="touchend"!=e.type||0==this.model.cursorAt.top&&0==this.model.cursorAt.left?e.originalEvent.target||e.target:(t=e.originalEvent.changedTouches[0],document.elementFromPoint(t.clientX,t.clientY)),0==this.model.cursorAt.top&&0==this.model.cursorAt.left&&(i=this._checkTargetElement(e)||i),this._trigger("dragStop",{event:e,element:this.target,target:i,currentTarget:this._getCurrTarget(e)})),this._dragEnd(e)},_dragEnd:function(e){var t=this._checkTargetElement(e);l.isNullOrUndefined(t)||(e.target=e.toElement=t).object._drop(e,this.element)},_dragMouseEnter:function(e){o(document).off("mouseenter",this._dragMouseEnterHandler),this._isIE9?this._dragManualStop(e):this._isIE8?0==e.button&&this._dragManualStop(e):0==e.buttons&&this._dragManualStop(e)},_dragManualStop:function(e){null!=this.model.dragStop&&this._trigger("dragStop",{event:e,element:this.target,target:e.originalEvent.target||e.target,currentTarget:this._getCurrTarget(e)}),this._destroy(e)},_dragMouseOut:function(e){o(document).on("mouseenter",this._dragMouseEnterHandler)},_checkTargetElement:function(e){var t;return t="touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type?(t=e.originalEvent.changedTouches[0],document.elementFromPoint(t.clientX,t.clientY)):e.target,this.helper&&this._contains(this.helper[0],t)&&(this.helper.hide(),t=this._elementUnderCursor(e),this.helper.show()),this._withDropElement(t)},_getCurrTarget:function(e){var t=e.originalEvent&&e.originalEvent.target||e.target;if(!l.isNullOrUndefined(t.style)){var i=t.style.display;this.element.is(t)&&(t.style.display="none");var s=null;return l.isNullOrUndefined(e.pageX)||l.isNullOrUndefined(e.pageY)||(s=document.elementFromPoint(e.pageX,e.pageY)),t.style.display=i,s}},_withDropElement:function(e){if(e){var t=o(e).data("ejDroppable");if(l.isNullOrUndefined(t)&&(t=this._checkParentElement(o(e))),!l.isNullOrUndefined(t))return o.extend(e,{object:t})}},_checkParentElement:function(e){e=o(e).closest(".e-droppable");if(0<e.length){e=o(e).data("ejDroppable");if(!l.isNullOrUndefined(e))return e}},_elementUnderCursor:function(e){return"touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type?document.elementFromPoint(e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY):document.elementFromPoint(e.clientX,e.clientY)},_contains:function(e,t){try{return o.contains(e,t)||e==t}catch(e){return!1}},_wireEvents:function(){1==l.isDevice()&&1==this.model.dragOnTaphold?this._on(this.element,"taphold",this._initialize):this._on(this.element,l.eventType.mouseDown,this._initialize),this._dragStartHandler=o.proxy(this._dragStart,this),this._destroyHandler=o.proxy(this._destroy,this),this._dragStopHandler=o.proxy(this._dragStop,this),this._dragHandler=o.proxy(this._drag,this),this._dragMouseEnterHandler=o.proxy(this._dragMouseEnter,this),this._dragMouseOutHandler=o.proxy(this._dragMouseOut,this)},_getMousePosition:function(e){e=this._getCoordinate(e);var t=this.model.clone?e.pageX:e.pageX-this._relXposition,e=this.model.clone?e.pageY:e.pageY-this._relYposition;return{left:t-[this.margins.left+this.model.cursorAt.left],top:e-[this.margins.top+this.model.cursorAt.top]}},_getCoordinate:function(e){var t=e;return("touchmove"==e.type||"touchstart"==e.type||"touchend"==e.type||"taphold"==e.type&&"msie"!=l.browserInfo().name)&&(t=e.originalEvent.changedTouches[0]),t},_getScrollParent:function(e){return e&&e.scrollHeight>e.clientHeight?e:e&&e.parentNode?this._getScrollParent(e.parentNode):void 0}})}(jQuery,Syncfusion),function(r,a){a.widget("ejDroppable","ej.Droppable",{element:null,model:null,validTags:["div","span","a"],dropElements:[],defaults:{accept:null,scope:"default",drop:null,over:null,out:null,create:null,destroy:null},_init:function(){this._mouseOver=!1,this.dropElements.push(this)},_setModel:function(e){},_destroy:function(){r(this.element).off("mouseup",r.proxy(this._drop,this))},_over:function(e){this._mouseOver||(this._trigger("over",e),this._mouseOver=!0)},_out:function(e){this._mouseOver&&(this._trigger("out",e),this._mouseOver=!1)},_drop:function(e,t){var i=e.target,s=r(i).parents(".e-droppable");r(i).hasClass("e-droppable")&&s.push(i);for(var n=0;n<this.dropElements.length;n++)r(s).is(r(this.dropElements[n].element))&&this.dropElements[n]._dropEvent.call(this.dropElements[n],e,t)},_dropEvent:function(e,t){var i=a.widgetBase.droppables[this.model.scope],s=!a.isNullOrUndefined(i.helper)&&i.helper.is(":visible");s&&"touchend"==e.type&&r(i.helper).hide();var n=this._isDropArea(e);s&&"touchend"==e.type&&r(i.helper).show(),i&&!a.isNullOrUndefined(this.model.drop)&&s&&n.canDrop&&this.model.drop(r.extend(e,{dropTarget:n.target,dragElement:t},!0),i)},_isDropArea:function(e){var t={canDrop:!0,target:r(e.target)};if("touchend"==e.type){var e=e.originalEvent.changedTouches[0],i=document.elementFromPoint(e.clientX,e.clientY);t.canDrop=!1;for(var s=r(i).parents(),n=0;n<this.element.length;n++){if(r(i).is(r(this.element[n])))t={canDrop:!0,target:r(i)};else for(var a=0;a<s.length;a++)if(r(this.element[n]).is(r(s[a]))){t={canDrop:!0,target:r(i)};break}if(t.canDrop)break}}return t}})}(jQuery,Syncfusion),function(n,a){a.widget("ejResizable","ej.resizable",{element:null,model:null,validTags:["div","span","a"],defaults:{scope:"default",handle:null,distance:1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,cursorAt:{top:1,left:1},resizeStart:null,resize:null,resizeStop:null,create:null,destroy:null,helper:function(){return n('<div class="e-resize-helper" />').html("resizable").appendTo(document.body)}},_init:function(){this.target=this.element,this._browser=a.browserInfo(),this._isIE8="msie"==this._browser.name&&"8.0"==this._browser.version,this._isIE9="msie"==this._browser.name&&"9.0"==this._browser.version,null!=this.handle?n(this.target).delegate(this.handle,a.eventType.mouseDown,n.proxy(this._mousedown,this)).delegate(this.handle,"resizestart",this._blockDefaultActions):n(this.target).on(a.eventType.mouseDown,n.proxy(this._mousedown,this)),this._resizeStartHandler=n.proxy(this._resizeStart,this),this._destroyHandler=n.proxy(this._destroy,this),this._resizeStopHandler=n.proxy(this._resizeStop,this),this._resizeHandler=n.proxy(this._resize,this),this._resizeMouseEnterHandler=n.proxy(this._resizeMouseEnter,this)},_mouseover:function(e){n(e.target).hasClass("e-resizable")?(n(e.target).css({cursor:"se-resize"}),n(this.target).on(a.eventType.mouseDown,n.proxy(this._mousedown,this))):(n(this.target).off(a.eventType.mouseDown),n(this.target).css({cursor:""}))},_blockDefaultActions:function(e){e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},_setModel:function(e){},_mousedown:function(e){var t=e;return e=this._getCoordinate(e),this.target=n(t.currentTarget),this._initPosition={x:e.pageX,y:e.pageY},this._pageX=e.pageX,this._pageY=e.pageY,n(document).on(a.eventType.mouseMove,this._resizeStartHandler).on(a.eventType.mouseUp,this._destroyHandler),n(document.documentElement).trigger(a.eventType.mouseDown,t),!1},_resizeStart:function(e){var t,i,s;n(e.target).hasClass("e-resizable")&&(e=this._getCoordinate(e),i=this._initPosition.x-e.pageX,s=this._initPosition.y-e.pageY,Math.sqrt(i*i+s*s)>=this.model.distance&&(null!=this.model.resizeStart&&this._trigger("resizeStart",{event:e,element:this.target})||(t=this.model.helper({element:this.target}),i=e.pageX-this._pageX+t.outerWidth(),s=e.pageY-this._pageY+t.outerHeight(),this._pageX=e.pageX,this._pageY=e.pageY,this.getElementPosition(t),n(document).off(a.eventType.mouseMove,this._resizeStartHandler).off(a.eventType.mouseUp,this._destroyHandler).on(a.eventType.mouseMove,this._resizeHandler).on(a.eventType.mouseUp,this._resizeStopHandler).on("mouseenter",this._resizeMouseEnterHandler).on("selectstart",!1),a.widgetBase.resizables[this.scope]={resizable:this.target,helper:t.css({width:i,height:s}),destroy:this._destroyHandler})))},_resize:function(e){var t;e=this._getCoordinate(e);this.getElementPosition(a.widgetBase.resizables[this.scope].helper);var i=this.model.helper({element:this.target}),s=e.pageX-this._pageX+i.outerWidth(),i=e.pageY-this._pageY+i.outerHeight();this._pageX=e.pageX,this._pageY=e.pageY,s<this.model.minWidth&&(t=this.model.minWidth-s,s=this.model.minWidth,this._pageX=e.pageX+t),i<this.model.minHeight&&(t=this.model.minHeight-i,i=this.model.minHeight,this._pageY=e.pageY+t),null!=this.model.maxHeight&&i>this.model.maxHeight&&(t=i-this.model.maxHeight,i=this.model.maxHeight,this._pageY=e.pageY-t),null!=this.model.maxWidth&&s>this.model.maxWidth&&(t=s-this.model.maxWidth,s=this.model.maxWidth,this._pageX=e.pageX-t),a.widgetBase.resizables[this.scope].helper.css({width:s,height:i}),this._trigger("resize",{element:this.target})},_resizeStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),"mouseup"!=e.type&&"touchend"!=e.type||this._destroy(e)},_resizeMouseEnter:function(e){this._isIE9?this._resizeManualStop(e):this._isIE8?0==e.button&&this._resizeManualStop(e):0==e.buttons&&this._resizeManualStop(e)},_resizeManualStop:function(e){null!=this.model.resizeStop&&this._trigger("resizeStop",{element:this.target}),this._destroy(e)},_destroy:function(e){n(document).off(a.eventType.mouseUp,this._destroyHandler).off(a.eventType.mouseUp,this._resizeStopHandler).off(a.eventType.mouseMove,this._resizeStartHandler).off(a.eventType.mouseMove,this._resizeHandler).off("mouseenter",this._resizeMouseEnterHandler).off("selectstart",!1),a.widgetBase.resizables[this.scope]=null},getElementPosition:function(e){return null!=e&&0<e.length?{left:e[0].offsetLeft,top:e[0].offsetTop}:null},_getCoordinate:function(e){var t=e;return"touchmove"!=e.type&&"touchstart"!=e.type&&"touchend"!=e.type||(t=e.originalEvent.changedTouches[0]),t}})}(jQuery,Syncfusion),function(s,i){i.widget("ejWaitingPopup","ej.WaitingPopup",{element:null,model:null,validTags:["div","span"],_setFirst:!1,_requiresID:!0,_rootCSS:"e-waitingpopup",defaults:{showOnInit:!1,target:null,appendTo:null,showImage:!0,htmlAttributes:{},cssClass:"",text:null,template:null,create:null,destroy:null},dataTypes:{showOnInit:"boolean",showImage:"boolean",cssClass:"string"},_isTargetVisible:function(){return"none"!=this.element.css("display")},show:function(){this._isTargetVisible()&&(this._refreshPanel(),this.maindiv.css("display","block"),this.model.showOnInit=!0)},hide:function(){this.maindiv.css("display","none"),this.model.showOnInit=!1},refresh:function(){this._isTargetVisible()&&this._refreshPanel()},_setText:function(e){e?this.popupText?this.popupText.html(e):(this._generateTextTag(e),this._setContentPosition()):this.popupText&&(this.popupText.remove(),this.popupText=null)},_showImage:function(e){e?(this.popupImage=i.buildTag("span.e-image"),this.popupText?this.popupImage.insertBefore(this.popupText):this.maindiv.append(this.popupImage)):this.popupImage&&(this.popupImage.remove(),this.popupImage=null)},_setTemplate:function(){var e=this.model.template;"string"==typeof e&&(e=s(e)),"object"==typeof e&&"function"==typeof e.css?this.templateObj=e:this.templateObj=i.buildTag("div","",{"text-align":"center"}).append(e),this.templateObj.css({visibility:"visible",display:"block"}),this.maindiv.append(this.templateObj)},_setTheme:function(e){this.maindiv.removeClass(this.model.cssClass).addClass(e)},_init:function(){this._initialize(),this._render(),this._wireEvents()},_wireEvents:function(){s(window).on("resize",s.proxy(this._resizeHandler,this))},_unwireEvents:function(){s(window).off("resize",s.proxy(this._resizeHandler,this))},_resizeHandler:function(){this.refresh()},_setModel:function(e){for(var t in e)switch(t){case"text":this._setText(e[t]);break;case"cssClass":this._setTheme(e[t]);break;case"htmlAttributes ":this._addAttr(e[t]);break;case"showOnInit":this._setVisibility(e[t]);break;case"showImage":this._showImage(e[t]),this._setContentPosition();break;case"target":this.model.target=e[t],this._setTarget(),this.refresh();break;case"appendTo":this.model.appendTo=e[t],this._setTarget(),i.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?s("body").append(this.maindiv):this.maindiv.appendTo(s(this.model.appendTo)),this.refresh();break;case"template":this.maindiv.empty(),e[t]?(this.model.template=e[t],this._setTemplate()):(this.model.template=e[t]=null,this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),this._setContentPosition()}},_setTarget:function(){"document"==this.model.target?this.targetElement=s(document):"window"==this.model.target?this.targetElement=s(window):this.targetElement=this.model.target?s(this.model.target):this.element},_destroy:function(){this.maindiv.remove(),this._unwireEvents()},_initialize:function(){this.maindiv=null,this.popupText=null,this.popupImage=null,this.templateObj=null,this.targetElement=null},_render:function(){this._setTarget();var e=s("#"+this.element[0].id+"_WaitingPopup").get(0);e&&s(e).remove(),this.maindiv=i.buildTag("div.e-waitpopup-pane e-widget "+this.model.cssClass+"#"+this.element[0].id+"_WaitingPopup"),this.model.template?this._setTemplate():(this._showImage(this.model.showImage),this.model.text&&this._generateTextTag(this.model.text)),i.isNullOrUndefined(this.model.appendTo)||"document"==this.model.appendTo||"window"==this.model.appendTo?s("body").append(this.maindiv):this.maindiv.appendTo(s(this.model.appendTo)),this._setVisibility(this.model.showOnInit),this._addAttr(this.model.htmlAttributes)},_refreshPanel:function(){this.maindiv.width(this.targetElement.outerWidth()),this.maindiv.height(this.targetElement.outerHeight()),this._setPanelPosition(),this._setContentPosition()},_addAttr:function(e){var i=this;s.map(e,function(e,t){"class"==t?i.maindiv.addClass(e):i.maindiv.attr(t,e)})},_setPanelPosition:function(){var e=i.util.getOffset(this.targetElement);null!=this.model.appendTo&&0<s(this.model.appendTo).length&&("relative"!=this.targetElement.css("position")&&"absolute"!=this.targetElement.css("position")||this.targetElement[0]!==s(this.model.appendTo)[0]?(e.left-=this.targetElement.offsetParent().offset().left,e.top-=this.targetElement.offsetParent().offset().top):e={left:0,top:0}),this.maindiv.css({position:"absolute",left:Math.ceil(e.left)+"px",top:Math.ceil(e.top)+"px","z-index":this._maxZindex()+1})},_setContentPosition:function(){var e,t,i,s;null==this.model.template?(t=e=0,i=null,s=this.targetElement.outerHeight(),this.popupText&&(e=this.popupText.outerHeight()),this.popupImage&&(t=this.popupImage.outerHeight()),this.popupImage&&(i=Math.ceil((s-(t+e))/2),this.popupImage.css("top",i+"px")),this.popupText&&(i=i||Math.ceil((s-e)/2),this.popupText.css("top",i+"px"))):this.templateObj.css({position:"relative",left:Math.ceil((this.targetElement.outerWidth()-this.templateObj.outerWidth())/2),top:Math.ceil((this.targetElement.outerHeight()-this.templateObj.outerHeight())/2)})},_generateTextTag:function(e){this.popupText=i.buildTag("div.e-text",e),this.maindiv.append(this.popupText)},_setVisibility:function(e){e&&this._isTargetVisible()?this.show():this.hide()},_maxZindex:function(){return i.util.getZindexPartial(this.element)}})}(jQuery,Syncfusion),function(v,b,m){b.ExcelFilter=b.ExcelFilter||{},b.excelFilter=function(e){return b.loadLocale("ejExcelFilter"),this._ctrlInstance=e.instance,this.id=this._ctrlInstance._id,this._dialogContainer=null,this._showSort=e.showSortOptions||!1,this._interDeterminateState=e.interDeterminateState||!1,this._maxCount=b.isNullOrUndefined(e.maxFilterLimit)?1e3:e.maxFilterLimit,this._formatFiltering=!0,this._locale=this._ctrlInstance.model.locale||"en-US",this.localizedLabels=this._getLocalizedLabel(),this._filterHandler=e.filterHandler||null,this._searchHandler=this._ctrlInstance.model.searchSettings||null,this._cancelHandler=e.cancelHandler||null,this._customFilterHandler=e.customFilterHandler||null,this._cssClass=e.cssClass||null,this._matchCase=e.allowCaseSensitive||!1,this._accent=e.allowAccent||!1,this._title=e.title||this.localizedLabels.title,this._complexBlankCriteria=e.enableComplexBlankFilter,this._blankValue=e.blankValue,this.fName=e.initFilterCol||null,this._spliter=e.valueDelimiter||b.ExcelFilter.valueDelimiter,this._initialFName=this.fName,this._displayName=null,this._dataSource=null,this._isUrlAdaptor=!1,this._$tableID=null,this._$blankVal=null,this._$selectedColors=[],this._$enableColor=!1,this._$filteredByColor="",this._$colType=null,this._$key=0,this.filteredColumn=null,this.sortedColumns=null,this._chkList=null,this._listsWrap=null,this._menuWrap=null,this._localJSON=null,this._actualCount=0,this._totalRcrd=0,this._enableResponsiveRow=!1,this._searchCount=0,this._currentData=null,this._openedFltr=null,this._predicates=[],this.cFilteredCols=null!=this.fName?[this.fName]:[],this._columnsFiltered=[],this.guid=b.getGuid("excelfilter"),this._noDlg=[],this._sepAftr=["sortDesc","notequal","between","top10","endswith","contains"],this._posType=["number","date","datetime","string","boolean","guid"],this._empties=this._complexBlankCriteria?["null","undefined",""]:[this.guid],this._reqInProgess=!1,this._isFiltered=!1,this._onActionBegin=e.actionBegin||null,this._onActionComplete=e.actionComplete||null,this.maxItemOnQuery=0,this.enableNormalize=!0,this.enableSelect=!1,this._onDemandSearch=!1,this._maxFilterCount=!1,this._clearSearchValue=!1,this._islargeData=!1,this._checkedValue=[],this._searchRequest=!1,this._isIndeterminate=!1,this._selectAll="<div class='e-ftrchk'><input type='checkbox' class='e-selectall' value='selectall' class='e-ftrchk' /><label class='e-ftrchk'>("+this.localizedLabels.SelectAll+")</label></div>",this._blanks="<div class='e-ftrchk'><input type='checkbox' id='blanks' class='e-ftrchk' value='"+this._empties.join(this._spliter)+"' @@/><label class='e-ftrchk' for='blanks' value=''>("+this.localizedLabels.Blanks+")</label></div>",this._blank=m,this._addAtLast=!1,this._addToFilter="<div class='e-ftrchk'><input type='checkbox' class='e-addtofilter'/><label class='e-ftrchk'>"+this.localizedLabels.AddToFilter+"</label></div>",this._preChkList=[],this._checked=null,this._add=null,this.guidMenuOpt=[{id:1,text:this.localizedLabels.SortNoSmaller,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortNoLarger,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.GuidFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.GuidMenuOptions}],this.numberMenuOpt=this.booleanMenuOpt=[{id:1,text:this.localizedLabels.SortNoSmaller,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortNoLarger,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.NumberFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.NumberMenuOptions}],this.stringMenuOpt=[{id:1,text:this.localizedLabels.SortTextAscending,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortTextDescending,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.TextFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.StringMenuOptions}],this.dateMenuOpt=[{id:1,text:this.localizedLabels.SortDateOldest,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortDateNewest,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.DateFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.DateMenuOptions}],this.datetimeMenuOpt=[{id:1,text:this.localizedLabels.SortDateOldest,sprite:"e-sortasc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortAsc"}},{id:2,text:this.localizedLabels.SortDateNewest,sprite:"e-sortdesc e-icon e-fnsort",htmlAttribute:{ejfnrole:"sortDesc"}},{id:3,text:this.localizedLabels.SortByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:4,text:this.localizedLabels.ClearFilter,sprite:"e-filternone e-icon",htmlAttribute:{ejfnrole:"clearfilter"}},{id:5,text:this.localizedLabels.FilterByColor,htmlAttribute:{ejfnrole:"popup"},child:[]},{id:6,text:this.localizedLabels.DateTimeFilter,htmlAttribute:{ejfnrole:"filterpopup"},child:this.localizedLabels.DatetimeMenuOptions}],this},b.excelFilter.prototype={isNotBlank:function(e,t){var i=b.isNullOrUndefined(e)||""===e||null===e;return t||""!==e&&null!==e||(this._addAtLast=!0),!i},_checkBlank:function(e){if(this.isNotBlank(e))return!0;e=this._blank==m&&!this._addAtLast;return e&&(this._blank=!0),e},_getValueData:function(e,t){var i=this._empties;if(this.isNotBlank(e,!0)&&(i=b.distinct(t,this._$foreignKey||this.fName,!1),"msie"!=b.browserInfo().name||"8.0"!=b.browserInfo().version))for(var s,n=0;n<i.length;n++)i[n]instanceof Date&&(s={dateString:i[n]},i[n]=JSON.parse(JSON.stringify(s)).dateString);return i.join(this._spliter)},getPredicate:function(e,t,i){this._isUrlAdaptor=this._ctrlInstance._dataSource()instanceof b.DataManager&&(this._ctrlInstance._dataSource().adaptor instanceof b.UrlAdaptor||this._ctrlInstance._dataSource().adaptor instanceof b.WebMethodAdaptor);for(var s,n=t!=m?[t]:b.distinct(e,"field",!1),a={},r=0,o=n.length;r<o;r++)s=new b.DataManager(e).executeLocal((new b.Query).where("field","equal",n[r])),a[n[r]]=this.generatePredicate(s),i&&(this._predicates[this._$key]=this._predicates[this._$key]||{},this._predicates[this._$key][n[r]]=a[n[r]]);return a},generatePredicate:function(e){var t,i,s=e?e.length:0;if(s){i=this._updateDateFilter(e[0]),t=!this._isUrlAdaptor||"date"!=i.type&&"datetime"!=i.type?i.ejpredicate||b.Predicate(i.field,i.operator,i.value,i.ignoreCase||!i.matchcase,i.ignoreAccent||!i.accent):this._getDatePredicate(i);for(var n=1;n<s;n++)e[n]=this._updateDateFilter(e[n]),this._isUrlAdaptor&&2<s&&1<n&&"or"==e[n].predicate?"date"==e[n].type||"datetime"==e[n].type?t.predicates.push(this._getDatePredicate(e[n])):t.predicates.push(b.Predicate(e[n].field,e[n].operator,e[n].value,e[n].ignoreCase||!e[n].matchcase,e[n].ignoreAccent||!e[n].accent)):t=!this._isUrlAdaptor||"date"!=e[n].type&&"datetime"!=e[n].type?e[n].ejpredicate?t[e[n].predicate](e[n].ejpredicate):t[e[n].predicate](e[n].field,e[n].operator,e[n].value,e[n].ignoreCase||!e[n].matchcase,e[n].ignoreAccent||!e[n].accent):t[e[n].predicate](this._getDatePredicate(e[n]));return t||null}},_getDatePredicate:function(e){return b.Predicate(e.field,e.operator,e.value,e.ignoreCase||!e.matchcase,e.ignoreAccent||!e.accent)},getFilterFrom:function(e,t){t=b.distinct(t,this.fName,!1);return 0<this.maxItemOnQuery&&(t=t.slice(0,this.maxItemOnQuery)),b.UrlAdaptor.prototype.getFiltersFrom(t,(new b.Query).foreignKey(this._$foreignKey))},renderDialog:function(e){this._$colType=e;var t=this.id+e+"_excelDlg",i=b.buildTag("div#"+t+".e-excelfilter e-dlgcontainer e-shadow"),s=b.buildTag("ul#"+this.id+e+"_MenuItem"),n=this._getMenuData(e),s=this._createLiTag(s,n,!1),a=b.buildTag("span.e-searchbox e-fields").append(b.buildTag("input#"+this.id+"_SearchBox.e-ejinputtext e-searchinput",{},{},{type:"text",placeholder:this.localizedLabels.Search})).append(b.buildTag("span.e-search e-icon")),r=b.buildTag("div#"+this.id+e+"_CheckBoxList.e-checkboxlist e-fields").append(b.buildTag("div")),o=this._createBtn(),t=b.buildTag("div.e-searchcontainer"),n=b.buildTag("div.e-status e-fields e-hide",this.localizedLabels.CheckBoxStatusMsg);i.append(s),t.append(a),t.append(n),t.append(r),t.append(o),i.append(t),i.appendTo(this._ctrlInstance.element),i.css("display","none"),this._renderCustomFDlg(e),this._dialogContainer=i,null!=this._cssClass&&i.addClass(this._cssClass),this._showSort||(s.find(".e-fnsort").closest("li").css("display","none"),s.find("li.e-separator:first").css("display","none")),this._lsitBoxTemplate(),this._renderSubCtrls(e),"msie"==b.browserInfo().name&&b.browserInfo().version<10&&b.ieClearRemover(a.find("input")[0]),this._wireEvents()},_getDeprecatedLocalizedLabel:function(e){if(-1!=["Ok","OK"].indexOf(e))return this.localizedLabels.Ok||this.localizedLabels.OK},_renderSubCtrls:function(e){v("#"+this.id+e+"_MenuItem").ejMenu({orientation:"vertical",width:266,container:"#"+this.id,click:b.proxy(this._menuHandler,this),enableRTL:this._ctrlInstance.model.enableRTL,enableSeparator:!1}),v("#"+this.id+e+"_OkBtn").ejButton({text:this._getDeprecatedLocalizedLabel("OK"),showRoundedCorner:!0,width:60,click:b.proxy(this._fltrBtnHandler,this),enabled:!0}),v("#"+this.id+e+"_CancelBtn").ejButton({text:this.localizedLabels.Cancel,showRoundedCorner:!0,width:60,click:b.proxy(this.closeXFDialog,this)}),v("#"+this.id+e+"_CheckBoxList").ejScroller({height:130,width:234,scroll:b.proxy(this._virtualize,this)}),v("#"+this.id+e+"_CheckBoxList").ejWaitingPopup({showOnInit:!1})},openXFDialog:function(e){this.fName=e.field,this._dataSource=e.dataSource,this._$colType=e.type||"string",this._$format=e.format||"",this._enableResponsiveRow=e.enableResponsiveRow,this.filteredColumn=e.filteredColumns||this._ctrlInstance.model.filterSettings.filteredColumns,this.sortedColumns=e.sortedColumns||this._ctrlInstance.model.sortSettings.sortedColumns,this._displayName=e.displayName,this.query=e.query||new b.Query,this._$key=e.key||0,this._$tableID=e.tableID,this._$blankVal=b.isNullOrUndefined(this._$tableID)?this._$blankVal:e.blank,this._$selectedColors=e.selectedColors||[],this._$enableColor=e.enableColor||!1,this._$filteredByColor=e.filteredByColor||this._$filteredByColor,this._$foreignField=e.foreignKeyValue,this._$foreignData=e.foreignDataSource,this._$foreignKey=e.foreignKey,this._$foreignKeyType=e.foreignKeyType,this._$foreignData instanceof b.DataManager&&(this._$foreignData.adaptor instanceof b.ODataAdaptor||this._$foreignData.adaptor instanceof b.ODataV4Adaptor||this._$foreignData.adaptor instanceof b.WebApiAdaptor)&&(this.maxItemOnQuery=50),v.extend(this.localizedLabels,e.localizedStrings||{});var t,i={requestType:"filterbeforeopen",filterModel:this,columnName:this.fName,columnType:this._$colType};this._ctrlInstance._trigger(this._onActionBegin,i)||(null!=this._openedFltr&&this._openedFltr.is(v("#"+this.id+this._$colType+"_excelDlg"))||(this.closeXFDialog(),this._openedFltr=v("#"+this.id+this._$colType+"_excelDlg")),this._listsWrap=v("#"+this.id+this._$colType+"_CheckBoxList"),this._menuWrap=v("#"+this.id+this._$colType+"_MenuItem"),this._searchBox=this._openedFltr.find(".e-searchbox input"),this._setPosition(this._openedFltr,e.position),this._openedFltr.addClass(e.cssClass),this._openedFltr.fadeIn(300,function(){}),t=v("#"+this.id+this._$colType+"_MenuItem").find("li[ejfnrole='popup']"),this._$enableColor?(this._createDivTag(t.eq(0).find(".e-shadow"),this._$selectedColors,!1,"sort"),-1==this._$filteredByColor||this._$filteredByColor.length<1||this._$filteredByColor===this.fName?this._createDivTag(t.eq(1).find(".e-shadow"),this._$selectedColors,!1,"filter"):t.eq(1).addClass("e-disable-item")):t.hide(),this._isFiltered=this._predicates[this._$key]!=m&&this._predicates[this._$key][this.fName]!=m,this._isFiltered=e.isFiltered||this._isFiltered,"date"!=this._$colType&&"datetime"!=this._$colType||""!=this._$format||(this._$format="date"==this._$colType?"{0:MM/dd/yyyy}":"{0:MM/dd/yyyy hh:mm:ss}"),this._processListData(),this._listsWrap.data("ejScroller"),this._setDisable(),i={requestType:"filterafteropen",filterModel:this,columnName:this.fName,columnType:this._$colType},this._ctrlInstance._trigger(this._onActionComplete,i))},closeXFDialog:function(e){if(null!=e){e=v(e.target);if(!(0<e.closest("#"+this.id+this._$colType+"_CustomFDlg").length||0<e.closest("#"+this.id+this._$colType+"_excelDlg").length))return}this._openedFltr&&(this._openedFltr.hasClass("e-dlgcustom")?this._openedFltr.ejDialog("close"):(this._openedFltr.fadeOut(300,function(){}),this._listsWrap.ejWaitingPopup("hide")),b.isNullOrUndefined(this._cancelHandler)||this._cancelHandler(),this.resetFilterModel(),this._ctrlInstance._$fDlgIsOpen=!1)},_setPosition:function(e,t){e.css("position","absolute"),e.css("left",t.X).css("top",t.Y)},_setDisable:function(){var e=this._menuWrap.find("li[ejfnrole='clearfilter']"),t=this._menuWrap.find("li[ejfnrole='filterpopup']"),i=this._menuWrap.find("li[ejfnrole *= 'sort']");this._listsWrap.find("input").filter(":checked:not(.e-selectall)").length;this._isFiltered?e.removeClass("e-disable-item"):e.addClass("e-disable-item"),this._showSort&&((e=b.DataManager(this.sortedColumns).executeLocal((new b.Query).where("field","equal",this.fName))).length&&"ascending"==e[0].direction?i.filter("[ejfnrole='sortAsc']").addClass("e-disable-item"):i.filter("[ejfnrole='sortAsc']").removeClass("e-disable-item"),e.length&&"descending"==e[0].direction?i.filter("[ejfnrole='sortDesc']").addClass("e-disable-item"):i.filter("[ejfnrole ='sortDesc']").removeClass("e-disable-item"));var s=t.find(".aschild");if(0!=this.cFilteredCols.length&&-1!=v.inArray(this.fName,this.cFilteredCols)){for(var n=0;n<this.filteredColumn.length;n++)if(this.filteredColumn[n].field==this.fName){0==s.find("#ejFiltercheck").length&&(s.append("<input type='checkbox' id='ejFiltercheck' />"),s.find("#ejFiltercheck").ejCheckBox({checked:!0}),s.find("#ejFiltercheck").ejCheckBox("disable")),0<t.find(".e-shadow .e-exceltick").length&&t.find(".e-shadow .e-exceltick").remove(),(this.filteredColumn[n].field==this.fName&&!b.isNullOrUndefined(this.filteredColumn[n+1])&&this.filteredColumn[n+1].field==this.fName&&(this._$foreignField&&this.filteredColumn[n+1].customFilter||!this._$foreignField)?"greaterthanorequal"==this.filteredColumn[n].operator&&"lessthanorequal"==this.filteredColumn[n+1].operator?t.find(".e-shadow .e-list[ejvalue=between]"):t.find(".e-shadow .e-list[ejvalue=customfilter]"):this._$foreignField?t.find(".e-shadow .e-list[ejvalue="+this.filteredColumn[n].actualFilterOperator+"]"):t.find(".e-shadow .e-list[ejvalue="+this.filteredColumn[n].operator+"]")).find("a").append("<span class='e-exceltick e-icon' />");break}}else for(n=0;n<this.filteredColumn.length;n++)if(this.filteredColumn[n].field==this.fName){this._removeTick(t,s);break}this._isFiltered||0==s.find("#ejFiltercheck").length||this._removeTick(t,s),"boolean"==this._$colType&&this._menuWrap.find("li[aria-haspopup=true]").addClass("e-hide"),this._searchBox.val(""),this._searchBox.siblings().addClass("e-search").removeClass("e-cancel")},_removeTick:function(e,t){t.find("#ejFiltercheck").ejCheckBox("destroy"),e.find(".aschild #ejFiltercheck").remove(),e.find(".e-shadow .e-exceltick.e-icon").remove()},_createBtn:function(e){var t=e?this.id+this._$colType+"Custom":this.id+this._$colType,i=b.buildTag("div.e-btncontainer e-fields"),e=b.buildTag("div");return e.append(b.buildTag("input#"+t+"_OkBtn.e-fltrbtn e-btnsub e-flat",{},{},{type:"button"})).append(b.buildTag("input#"+t+"_CancelBtn.e-fltrbtn e-btncan e-flat",{},{},{type:"button"})),i.append(e)},_menuHandler:function(e){var t,i,s=v(e.element),n=s.attr("ejfnrole"),a={};if("filterbgcolor"===n||"filterfgcolor"===n){var r={field:this.fName,operation:n,color:v(e.element).css("background-color")},a={originalEvent:e.event,action:"filterbycolor",filterDetails:r,tableID:this._$tableID};this._isFiltered=!1}else if("clearfilter"==n){r={field:this.fName,operator:"",value:"",predicate:"or"};a={originalEvent:e.event,fieldName:this.fName,action:"clearfiltering",filterDetails:r,tableID:this._$tableID};r=v.inArray(this.fName,this.cFilteredCols);-1!=r&&this.cFilteredCols.splice(r,1);r=v.inArray(this.fName,this._columnsFiltered);-1!=r&&this._columnsFiltered.splice(r,1),this._initialFName==this.fName&&(this._initialFName=null)}else{if("popup"==n||"filterpopup"==n)return;"operator"==n?this._openCustomFilter(s.attr("ejvalue")):a="sortAsc"==n||"sortDesc"==n?(t="sortAsc"==n?"ascending":"descending",i={field:this.fName,direction:t},{originalEvent:e.event,action:"sorting",sortDetails:i,tableID:this._$tableID}):(i={field:this.fName,direction:t,operation:n,color:v(e.element).css("background-color")},{originalEvent:e.event,action:"sortbycolor",sortDetails:i,tableID:this._$tableID})}"operator"!=n&&(this._filterHandler(a),this.closeXFDialog())},_searchBoxFocus:function(e){var t=v(e.target);t.hasClass("e-cancel")&&(t.prev().val(""),t.next().addClass("e-cancel"),t.addClass("e-search"),t.prev().trigger("keyup")),"focusin"==e.type&&(t.next().addClass("e-cancel"),t.next().removeClass("e-search"))},_search:function(e){var t=e.target.value,i=v(e.target),s="string"!=this.getType()&&parseFloat(t)?parseFloat(t):t,e="contains";s=""==s||s==m?m:s,"boolean"==this._$colType&&(s!=m&&-1!=this.localizedLabels.True.toLocaleLowerCase().indexOf(s.toLowerCase())?s="true":s!=m&&-1!=this.localizedLabels.False.toLocaleLowerCase().indexOf(s.toLowerCase())&&(s="false")),("date"!=this._$colType&&"datetime"!=this._$colType||(s=b.parseDate(t,this.replacer(this._$format,/{0:|}/g,"")),e="equal",null!=this._previousValue||null!=s))&&(this._previousValue=s,delay=this._dataSource instanceof b.DataManager&&this._ctrlInstance._gridRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices?1500:0,sender={type:"filterchoicesearch",value:s,operator:e,matchcase:-1==["date","datetime"].indexOf(this._$colType)&&this._matchCase,accent:this._accent},this._processSearch(sender,delay),""==i.val()?(i.next().addClass("e-search"),i.next().removeClass("e-cancel")):(i.next().addClass("e-cancel"),i.next().removeClass("e-search")))},_processSearch:function(e,t){this._alreadySearchProcessed?this._stopTimer():this._alreadySearchProcessed=!0,this._startTimer(e,t)},_startTimer:function(e,t){(proxy=this)._timer=window.setTimeout(function(){proxy._processListData(e)},t)},_stopTimer:function(){null!=this._timer&&window.clearTimeout(this._timer)},_getLocalizedLabel:function(e){return b.getLocalizedConstants("ej.ExcelFilter",this._locale)},_getMenuData:function(e){return e!=m?this[e+"MenuOpt"]:[]},_checkHtmlEncode:function(e){var t=!b.isNullOrUndefined(this._ctrlInstance.getColumnByField)&&this._ctrlInstance.getColumnByField(this.fName).disableHtmlEncode;return!(b.isNullOrUndefined(t)||!t)},_lsitBoxTemplate:function(){var e={},t={};e[this.id+"isNotBlank"]=b.proxy(this.isNotBlank,this),e[this.id+"checkBlank"]=b.proxy(this._checkBlank,this),e[this.id+"_getValueData"]=b.proxy(this._getValueData,this),e[this.id+"_checkBoxState"]=b.proxy(this._setCheckState,this),e[this.id+"_htmlEncode"]=b.proxy(this._checkHtmlEncode,this),e[this.id+"_genId"]=this._genCheckID,v.views.helpers(e);e=this.id+this._$colType+"{{:~"+this.id+"_genId()}}";t[this.id+this._$colType+"_listBox_Template"]="{{if ~"+this.id+"checkBlank(key)}}<div class='e-ftrchk'><input type='checkbox' id='"+e+"' value='{{html:~"+this.id+"_getValueData(key, items)}}' class='e-ftrchk' {{:~"+this.id+"_checkBoxState(~"+this.id+"_getValueData(key, items))}}/><label class='e-ftrchk' for='"+e+"'>{{if ~"+this.id+"isNotBlank(key,'true')}} {{if ~"+this.id+"_htmlEncode(key)}} {{>key}} {{else}} {{:key}} {{/if}} {{else}} (Blanks) {{/if}}</label></div>{{/if}}",v.templates(t)},_processListData:function(e){var t={},i=new b.Query,s=(new b.Query).requiresCount(),n={};this._searchCount=0;var a,r=this._predicates[this._$key];proxy.query._expands.length&&(i._expands=proxy.query._expands);var o,l,d,h,c=null,u=null,p=null;for(o in b.isNullOrUndefined(this._$foreignField&&this._$foreignData)?(c=this._dataSource,u=this.fName,this._localJSON):(c=this._$foreignData,this._dataSource instanceof b.DataManager&&!(c instanceof b.DataManager)&&(c=b.DataManager(c)),u=this._$foreignField),r)o!=this.fName&&((d=(l=r[o]).from)?i.skip("top"==d?0:c.length-(c.length-l.take)).take(l.take):a=a!=m?a.and(l):l);t.columnName=u,i.requiresCount(),this._dataSource instanceof b.DataManager&&!this._dataSource.dataSource.offline&&this._ctrlInstance._gridRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices&&(i.take(this.maxFilterChoices),this._onDemandSearch=!0),a&&i.where(a),b.merge(i.queries,this.query.queries)||b.merge(i._params,this.query._params),n.requestType=e?e.type:"filterchoicerequest",n.filterModel=this,n.query=i,n.dataSource=c,"filterchoicesearch"==n.requestType&&(n.queryParams=e),this._ctrlInstance._trigger(this._onActionBegin,n)||(!b.isNullOrUndefined(this._searchHandler)&&this._searchHandler.key.length&&(n=this._searchHandler,i.search(n.key,n.fields,n.operator||"contains",n.ignoreCase||!0,n.ignoreAccent||!0)),this.enableSelect&&i.select(this.fName),e&&"filterchoicesearch"==e.type?(this._clearSearchValue=!!b.isNullOrUndefined(e.value),t.type=e.type,t.value=e.value,this._$foreignField&&(i=s),e.value&&i.where(u,e.operator,e.value,!e.matchcase,e.accent),this._dataSource instanceof b.DataManager&&this._ctrlInstance._gridRecordsCount>this._ctrlInstance.model.filterSettings.maxFilterChoices?(this._searchRequest=!0,e=this._$colType,e=this.id+e+"_excelDlg",v("#"+e).is(":visible")&&this._listsWrap.ejWaitingPopup("show"),this._$foreignField?(e=this._$foreignData instanceof b.DataManager?this._$foreignData:b.DataManager(this._$foreignData),this._dataProcessing(e,i,t)):this._dataProcessing(this._dataSource,i,t)):this._dataProcessing(b.DataManager(this._localJSON),i,t)):this._dataSource instanceof b.DataManager?(proxy=this,t.type="filterchoicerequest",this._listsWrap.ejWaitingPopup("show"),this._reqInProgess||(this._reqInProgess=!0,this._$foreignField&&(c=this._dataSource),(h=c.executeQuery(i)).done(function(e){proxy._$foreignField?proxy._filterForeignData(e,t):(p=e.result,t.data=proxy._localJSON=proxy._currentData=p,proxy._totalRcrd=e.count,proxy._listsWrap.ejWaitingPopup("hide"),proxy._setCheckBoxList(t),proxy._reqInProgess=!1)}))):(p=[],h=b.DataManager(this._dataSource).executeLocal(i),t.type="filterchoicerequest",this._$foreignField?this._filterForeignData(h,t):(p=h.result,t.data=this._localJSON=this._currentData=p,this._totalRcrd=h.count,this._setCheckBoxList(t))))},_dataProcessing:function(e,t,i){e.executeQuery(t).done(function(e){i.data=proxy._currentData=e.result,proxy._totalRcrd=proxy._searchCount=e.result.length,proxy._setCheckBoxList(i)})},_filterForeignData:function(e,i){var t,s,n,a,r="boolean"==typeof i,o=this._$foreignKey,l=this._$foreignField,d=this._$foreignKeyType,h=this,c={},u=new b.Query,p=this._$foreignData instanceof b.DataManager?this._$foreignData:b.DataManager(this._$foreignData);if(r){m=e[0],c=e[0],a=e.slice(),m&&this.closeXFDialog(),n=new b.Predicate(l,m.operator,m.value,!m.matchcase,!m.accent);for(var m,g=1,f=e.length;g<f;g++)n=n[(m=e[g]).predicate](l,m.operator,m.value,!m.matchcase,!m.accent);u.where(n)}else t=e.result,(s=e.count)&&u.where(this.getFilterFrom(this._$foreignData,t)),this._listsWrap.ejWaitingPopup("model.showOnInit")||this._listsWrap.ejWaitingPopup("show");u.select([o,l]),p.executeQuery(u).done(function(e){var t;r?(t=(t=0 in(t=b.distinct(e.result,o,!0))?t:[{}]).map(function(e,t){return v.extend({},c,{value:e[o],operator:"equal",actuals:a,type:d})}),h.initiateFilter(t)):(i.data=h._localJSON=h._currentData=e.result,h._totalRcrd=s,h._listsWrap.ejWaitingPopup("hide"),h._setCheckBoxList(i),h._reqInProgess=!1)})},_setCheckBoxList:function(e){var t,i,s={},n=this._blanks;s.requestType=e.type,s.dataSource=this._dataSource,0!=(s.filterModel=this)._currentData.length?(t=this.getDistinct(e.data,e.columnName,!0,!!this._$foreignKey),this._isFiltered,this._actualCount=t.length,t.length=this._maxCount>this._actualCount?this._actualCount:this._maxCount,this._onDemandSearch&&1e3==this._actualCount||this._actualCount>=this._maxCount?this._openedFltr.find("div.e-status").removeClass("e-hide"):this._openedFltr.find("div.e-status").addClass("e-hide"),this._islargeData=this._maxCount<this._actualCount,this._filterdCol=b.DataManager(this.filteredColumn).executeLocal(b.Query().where("field","equal",this.fName)),"filterchoicesearch"!=e.type||b.isNullOrUndefined(e.value)?this._listsWrap.find("div:first").html([this._selectAll,v.render[this.id+this._$colType+"_listBox_Template"](t),b.isNullOrUndefined(e.value)&&this._addAtLast?this.replacer(n,/@@/g,this._setCheckState,this._empties.join(this._spliter)):""].join("")):this._listsWrap.find("div:first").html([this._selectAll,this._addToFilter,v.render[this.id+this._$colType+"_listBox_Template"](t),b.isNullOrUndefined(e.value)&&this._addAtLast?this.replacer(n,/@@/g,this._setCheckState,this._empties.join(this._spliter)):""].join("")),this._chkList=this._listsWrap.find("input:checkbox").not(".e-selectall,.e-addtofilter"),$inView=this._chkList.slice(0,20),$inView.ejCheckBox({change:b.proxy(this._checkHandler,this)}),$inView.siblings().height(14).width(14),this._listsWrap.find(".e-addtofilter").ejCheckBox({change:b.proxy(this._addToFilterHandler,this)}),this._listsWrap.find(".e-addtofilter").attr("id",this.id+this._$colType+"AddToFilter"),this._listsWrap.find(".e-selectall").ejCheckBox({change:b.proxy(this._selectAllHandler,this),enableTriState:this._interDeterminateState,beforeChange:this._selectAllBeforeHandler}),this._listsWrap.find(".e-selectall").attr("id",this.id+this._$colType+"SelectAll"),this._listsWrap.find(".e-selectall,.e-addtofilter").siblings().height(14).width(14),this._listsWrap.find(".e-selectall").closest("span").siblings("label").attr("for",this.id+this._$colType+"SelectAll")):(this._listsWrap.find("div").first().html(b.buildTag("div.e-ftrchk",this.localizedLabels.NoResult,{},{})),this._chkList=this._listsWrap.find("input:checkbox").not(".e-selectall")),b.isNullOrUndefined(this._chkList)||(i=this._chkList.filter(":checked").length),this._isFiltered&&this._searchRequest&&0==i&&this._checkIsIndeterminate(e.columnName,this.filteredColumn),this._isFiltered&&this._actualCount!=i?(0<i||this._isIndeterminate&&this._interDeterminateState)&&this._listsWrap.find(".e-selectall").ejCheckBox("model.checkState","indeterminate"):this._listsWrap.find(".e-selectall").ejCheckBox({checked:!0}),v("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:0!=i}),this._listsWrap.ejScroller({scrollTop:0}).ejScroller("refresh"),this._listsWrap.hasClass("e-waitingpopup")&&this._listsWrap.ejWaitingPopup("hide"),this._ctrlInstance._trigger(this._onActionComplete,s)||(this._isIndeterminate=!1,this._checkedValue=[],"filterchoicerequest"==e.type&&(this._preChkList=this._chkList,this._checked=this._preChkList.filter(":checked")),this._listsWrap.find(".e-addtofilter").length?this._add=this._listsWrap.find(".e-addtofilter"):this._add=null)},_addToFilterHandler:function(e){v("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:e.isChecked||!!this._chkList.filter(":checked").length})},_checkIsIndeterminate:function(e,t){for(var i=0;i<t.length;i++)e==t[i].field&&(this._isIndeterminate=!0)},_createLiTag:function(a,e,r){return proxy=this,v.each(e,function(e,t){var i,s=b.buildTag("li",{},{},t.htmlAttribute||r&&{ejfnrole:"operator",ejvalue:t.value}||{}),n=r&&-1==v.inArray(t.value,proxy._noDlg)?"...":"",n=b.buildTag("a",t.text+n,{},{});t.sprite!=m&&n.append(b.buildTag("span",{},{},{class:t.sprite})),t.child!=m&&(i=3!=t.id&&5!=t.id?proxy._createLiTag(b.buildTag("ul.e-shadow"),t.child,!0):3===t.id?proxy._createDivTag(b.buildTag("ul.e-shadow"),t.child,!0,"sort"):proxy._createDivTag(b.buildTag("ul.e-shadow"),t.child,!0,"filter")),t.child==m?a.append(s.append(n)):a.append(s.append(n).append(i)),-1!=v.inArray(t.value||t.htmlAttribute&&t.htmlAttribute.ejfnrole,proxy._sepAftr)&&a.append(b.buildTag("li.e-separator"))}),a},_createDivTag:function(e,t,i,s){var n,a,r=[],o=[],l=!1,d="",h="",h="sort"==s?(d=this.localizedLabels.SortByCellColor,this.localizedLabels.SortByFontColor):(d=this.localizedLabels.FilterByCellColor,this.localizedLabels.FilterByFontColor),c=s+"colorhdr",u=s+"fonthdr",p=s+"bgcolor",m=s+"fgcolor";if(0<e.length&&e.children().remove(),0<t.length){for(var g=0;g<t.length;g++){for(var f=0;f<r.length;f++)if(r[f]==t[g].background){l=!0;break}l||b.isNullOrUndefined(t[g].background)||t[g].background.startsWith("#6n")||r.push(t[g].background),l=!1;for(f=0;f<o.length;f++)if(o[f]==t[g].foreground){l=!0;break}l||b.isNullOrUndefined(t[g].foreground)||t[g].foreground.startsWith("#6n")||o.push(t[g].foreground),l=!1}if(0<r.length){n=b.buildTag("li.e-list e-bghdrcolor","","",{ejfnrole:c}),a=b.buildTag("a.e-menulink",d,{}),n.append(a),e.append(n);for(g=0;g<r.length;g++)n=b.buildTag("li.e-list e-valcolor",{},{"background-color":r[g]},{ejfnrole:p}),e.append(n)}if(0<o.length){n=b.buildTag("li.e-list e-fghdrcolor","","",{ejfnrole:u}),a=b.buildTag("a.e-menulink",h,{}),n.append(a),e.append(n);for(g=0;g<o.length;g++)n=b.buildTag("li.e-list e-valcolor",{},{"background-color":o[g]},{ejfnrole:m}),e.append(n)}r.length<1&&o.length<1?e.parent().addClass("e-disable-item"):e.parent().removeClass("e-disable-item")}else e.parent().addClass("e-disable-item");return e},_setCheckState:function(e){var t=e,i=e.split(this._spliter),s=i.length;if(!this._isFiltered||this._searchCount)return"checked";for(;s--;)if(t=this.processValue(i[s]),"date"==this._$colType||"datetime"==this._$colType||"boolean"==this._$colType){for(var n=0,a=this._filterdCol.length;n<a;n++)if("boolean"!=this._$colType||t===this._filterdCol[n].value){if("date"==this._$colType||"datetime"==this._$colType){var r=this._filterdCol[n].value,o="date"==this._$colType&&t instanceof Date?this._formatting(this._$format,new Date(t.getFullYear(),t.getMonth(),t.getDate()),this._locale):this._formatting(this._$format,t,this._locale),r="date"==this._$colType&&r instanceof Date?this._formatting(this._$format,new Date(r.getFullYear(),r.getMonth(),r.getDate()),this._locale):this._formatting(this._$format,r,this._locale);if(!(o===r&&"equal"==this._filterdCol[n].operator||this._maxFilterCount))continue;if(this._maxFilterCount&&(this._onDemandSearch||this._islargeData)){if(o==r)return this._checkedValue.push(o),"";if(-1==this._checkedValue.indexOf(r)||this._checkedValue.length==this._filterdCol.length)return"checked";continue}}return"checked"}}else{"string"!=this._$colType||b.isNullOrUndefined(t)||"string"!=typeof t||this._filterdCol[0].value==t.toLowerCase()&&(t=t.toLowerCase());var l=b.DataManager(this._filterdCol).executeLocal(b.Query().where("value","equal",t,this._filterdCol[0].matchcase).where("operator","equal","equal"));if(0!=l.length)return("equal"!=l[0].operator||b.isNullOrUndefined(l[0].actualFilterOperator)||"equal"!=l[0].actualFilterOperator||1!=l[0].isCustom||!(0<this._ctrlInstance.model.currentViewData.length))&&!0===l[0].isCustom?"":"checked";if((this._onDemandSearch||this._islargeData)&&this._maxFilterCount&&0==b.DataManager(this._filterdCol).executeLocal(b.Query().where("value","equal",t).where("operator","notequal","equal")).length)return"checked"}},_genCheckID:function(){return"CheckBox"+this.getIndex()},_formatting:function(e,t,i){if("date"==this._$colType&&""==e&&(e="{0:MM/dd/yyyy hh:mm:ss}"),"boolean"==this._$colType)return""===t?"":this.localizedLabels[1==t?"True":0==t?"False":""];if(this._formatFiltering||"date"==this._$colType){var s=this._ctrlInstance.formatting;return""!=e?s(e,t,i):t}},_updateDateFilter:function(e){return"date"==e.type||e.value instanceof Date?(e.value=e.value instanceof Date?e.value:b.parseJSON({val:e.value}).val,-1==["equal","notequal"].indexOf(e.operator)?e:this._setDateObject(e)):e},_checkHandler:function(e){v("#"+e.model.id).prop("checked",e.isChecked);var t,i=this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall,.e-addtofilter)").length,s=this._listsWrap.find(".e-selectall");i==this._chkList.length?(s.prop("checked",!0),t=!0):0==i?(s.prop("checked",!1),t=!1):e.isInteraction&&s.ejCheckBox("model.checkState","indeterminate"),s.ejCheckBox({checked:t}),v("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:0!=i||!b.isNullOrUndefined(this._add)&&this._add.prop("checked")})},_selectAllBeforeHandler:function(e){e.isChecked&&("indeterminate"==this.model.checkState?(e.cancel=!0,this.model.checkState="uncheck",this.option({checkState:"check"})):this.checkState("uncheck"))},_selectAllHandler:function(e){"check"==e.checkState?(this._chkList.filter(":not(:checked)").ejCheckBox({checked:e.isChecked,change:b.proxy(this._checkHandler,this)}),this._chkList.prop("checked",!0)):"uncheck"==e.checkState&&(this._chkList.filter(function(){if(v(this).hasClass("e-checkbox")&&v(this).prop("checked"))return this}).ejCheckBox({checked:e.isChecked}),this._chkList.prop("checked",!1),this._chkList.removeAttr("checked")),v("#"+this.id+this._$colType+"_OkBtn").ejButton({enabled:e.isChecked||!b.isNullOrUndefined(this._add)&&this._add.prop("checked")})},_renderCustomFDlg:function(e){var t=this.id+e+"_CustomFDlg";v("#"+t).length||((t=b.buildTag("div#"+t+".e-excelfilter e-dlgcustom")).addClass(this._cssClass),this._renderCDlgContent(t,e),t.ejDialog({showOnInit:!1,enableResize:!1,enableModal:!0,allowKeyboardNavigation:!1,title:this._title,width:370,content:"#"+this.id,enableRTL:this._ctrlInstance.model.enableRTL,closeIconTooltip:"Close",cssClass:"e-excelfilter e-customDlg"}),t.ejDialog("refresh"))},_renderCDlgContent:function(e,t){var i=b.buildTag("div.e-dlgfields",this.localizedLabels.Showrowswhere,{},{}),s=this.id+this._$colType,n=b.buildTag("fieldset.e-fieldset"),a=b.buildTag("tr.e-fields"),r=b.buildTag("tr.e-fields"),o=b.buildTag("tr.e-fields e-top"),l=b.buildTag("input#"+s+"_CustomDrop1"),d=b.buildTag("input#"+s+"_CustomDrop2"),h=b.buildTag("input#"+s+"_CustomDrop3"),c=b.buildTag("input#"+s+"_CustomValue1.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),u=b.buildTag("input#"+s+"_CustomValue2.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),p=b.buildTag("input#"+s+"_CustomValue3.e-ejinputtext e-excustmfltr",{},{},{type:"text"}),m=b.buildTag("tr.e-predicate"),g=b.buildTag("input#"+s+"_CustomAndPredicate",{},{},{type:"radio",name:"predicate",value:"and"}),f=b.buildTag("input#"+s+"_CustomOrPredicate",{},{},{type:"radio",name:"predicate",value:"or"}),_=b.buildTag("input#"+s+"_CustomMatchPredicate",{},{},{type:"checkbox"});e.append(i);i=b.buildTag("table.e-optable");a.append(b.buildTag("td.e-operator").append(l)).append(b.buildTag("td.e-value").append(c)),m.append(b.buildTag("td",{},{},{}).append(g).append(b.buildTag("label.e-caption",this.localizedLabels.PredicateAnd,{},{for:s+"_CustomAndPredicate"})).append(f).append(b.buildTag("label.e-caption",this.localizedLabels.PredicateOr,{},{for:s+"_CustomOrPredicate"}))),r.append(b.buildTag("td.e-operator").append(d)).append(b.buildTag("td.e-value").append(u)),i.append(a).append(m).append(r),"string"==t&&m.append(b.buildTag("td",{},{},{}).append(_).append(b.buildTag("label.e-caption",this.localizedLabels.MatchCase,{},{for:s+"_CustomMatchPredicate"}))),"number"!=t&&"guid"!=t||(o.append(b.buildTag("td.e-operator").append(h)).append(b.buildTag("td.e-value").append(p)),i.append(o)),n.append(b.buildTag("legend")).append(i),e.append(b.buildTag("div.e-dlgfields").append(n)),e.append(b.buildTag("div.e-dlgfields").append(this._createBtn(!0))),e.appendTo("body");t.replace(t.charAt(0),t.charAt(0).toUpperCase());v([l,d]).ejDropDownList({fields:{text:"text",value:"value"},height:27,width:120,enableRTL:this._ctrlInstance.model.enableRTL}),"number"==t?(v([l,d]).ejDropDownList({popupWidth:"170px"}),v([c,u]).ejNumericTextbox({showSpinButton:!1,height:"27px",decimalPlaces:2,width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.NumericTextboxWaterMark,focusOut:function(e){0==this.model.decimalPlaces&&this.element.prev(".e-input").val(this.model.value)}})):"guid"==t?(v([l,d]).ejDropDownList({popupWidth:"170px"}),v(c).css({height:"22px",width:"175px"}),v(u).css({height:"22px",width:"177px"})):"date"==t?(v([l,d]).ejDropDownList({popupWidth:"170px"}),v([c,u]).ejDatePicker({cssClass:this._ctrlInstance.model.cssClass,height:"27px",width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.DatePickerWaterMark,locale:this._locale})):"datetime"==t?(v([l,d]).ejDropDownList({popupWidth:"170px"}),v([c,u]).ejDateTimePicker({cssClass:this._ctrlInstance.model.cssClass,height:"27px",width:"177px",enableRTL:this._ctrlInstance.model.enableRTL,watermarkText:this.localizedLabels.DateTimePickerWaterMark,locale:this._locale})):"string"==t&&v([c,u]).ejAutocomplete({cssClass:this._ctrlInstance.model.cssClass,enableRTL:this._ctrlInstance.model.enableRTL,enableDistinct:!0,width:"177px",height:"27px",locale:this._locale}),v([g,f]).ejRadioButton({cssClass:this._ctrlInstance.model.cssClass,enableRTL:this._ctrlInstance.model.enableRTL}),_.ejCheckBox({}),v("#"+s+"Custom_OkBtn").ejButton({text:this._getDeprecatedLocalizedLabel("OK"),showRoundedCorner:!0,width:"23.6%",click:b.proxy(this._fltrBtnHandler,this),enabled:!0}),v("#"+s+"Custom_CancelBtn").ejButton({text:this.localizedLabels.Cancel,showRoundedCorner:!0,width:"23.6%",click:b.proxy(this.closeXFDialog,this)})},_openCustomFilter:function(e){var t="top10"!=e?this._$colType:e,i=this.query,s=t.replace(t.charAt(0),t.charAt(0).toUpperCase()),n=this.id+this._$colType;this.closeXFDialog(),this._openedFltr=v("#"+n+"_CustomFDlg");var a={requestType:"filterbeforeopen",filterModel:this,columnName:this.fName,columnType:this._$colType,isCustomFilter:!0};this._ctrlInstance._trigger(this._onActionBegin,a)||(this._openedFltr.ejDialog("open"),this._openedFltr.ejDialog({open:function(e){(v("#"+n+"_CustomValue1").hasClass("e-autocomplete")||v("#"+n+"_CustomValue1").hasClass("e-datepicker")||v("#"+n+"_CustomValue1").hasClass("e-datetimepicker")?v("#"+n+"_CustomValue1"):v("#"+n+"_CustomValue1").prev()).focus()}}),this._openedFltr.find("legend").html(this._displayName),t=-1!=["Number","Date"].indexOf(s)?6:5,(t=this.localizedLabels[s+"MenuOptions"].slice(0,t)).unshift({text:"",value:""}),v("#"+n+"_CustomDrop1").ejDropDownList({dataSource:t}),v("#"+n+"_CustomDrop2").ejDropDownList({dataSource:t}),"number"==this._$colType&&"top10"==e?(this._openedFltr.find(".e-optable tr").not(".e-top").addClass("e-hide"),this._openedFltr.find(".e-optable tr.e-top").removeClass("e-hide"),v("#"+n+"_CustomDrop3").ejDropDownList({dataSource:this.localizedLabels[s+"MenuOptions"]})):(this._openedFltr.find(".e-optable tr.e-top").addClass("e-hide"),this._openedFltr.find(".e-optable tr").not(".e-top").removeClass("e-hide")),"string"==this._$colType&&(t=this._$foreignField||this.fName,s=this._$foreignData&&this._$foreignField?this._$foreignData:this._dataSource,this._openedFltr.find(".e-autocomplete").ejAutocomplete({fields:{text:t},dataSource:s,query:i,focusIn:function(e){var t=this.element.closest("td").siblings().find(".e-dropdownlist").ejDropDownList("getSelectedValue"),i=this.element.closest(".e-dialog-scroller").find(".e-checkbox").prop("checked");this.model.caseSensitiveSearch=i,this.model.filterType=""==t?this.model.filterType:t}})),"date"==this._$colType&&""!=this._$format?this._openedFltr.find(".e-datepicker").ejDatePicker({dateFormat:this._$format.replace(/{0:|}/g,function(){return""}),enableStrictMode:!0}):"datetime"==this._$colType&&""!=this._$format&&this._openedFltr.find(".e-datetimepicker").ejDateTimePicker({dateTimeFormat:this._$format.replace(/{0:|}/g,function(){return""}),enableStrictMode:!0}),this._setFilteredData(n,e),b.isNullOrUndefined(this._customFilterHandler)||this._customFilterHandler(),a={requestType:"filterafteropen",filterModel:this,columnName:this.fName,columnType:this._$colType,isCustomFilter:!0},this._ctrlInstance._trigger(this._onActionComplete,a))},_setFilteredData:function(e,t){var i,s=v.inArray(this.fName,this.cFilteredCols),n=[],a=[];if("top10"!=t){-1!=s&&(n=b.DataManager(this.filteredColumn).executeLocal(b.Query().where("field","equal",this.fName))),-1!=s&&this._$foreignField&&(n=n[0].actuals),null!=this._initialFName&&this._initialFName==this.fName&&(n[0].isCustom=!0),i=n.length;for(var r=this._openedFltr.find(".e-dropdownlist"),o=this._openedFltr.find(".e-value input.e-ejinputtext.e-input"),l=this._openedFltr.find(".e-predicate"),a=-1!=s&&i&&n[0].from!=m?[t,""]:"between"==t&&-1!=s&&i?[n[0].operator,b.isNullOrUndefined(n[1])?"":n[1].operator]:-1!=s&&i&&n[0].isCustom?["customfilter"!=t&&-1!=s?t:n[0].operator,"customfilter"==t&&n[1]?n[1].operator:""]:-1==s&&"customfilter"==t?["equal",""]:"between"==t||"customfilter"==t?"customfilter"!=t?["greaterthanorequal","lessthanorequal"]:["",""]:[t,""],d=0;d<(-1!=s?i:2);d++){var h=/\D*/.exec(a[d])[0];v(r[d]).prop("value",h),v(r[d]).ejDropDownList("setSelectedValue",h),v(r[d]).ejDropDownList({change:function(e){this.element.closest(".e-fields").find(".e-autocomplete").val("")}});h=-1!=s&&i&&n[d].isCustom&&(h==(this._$foreignField?n[d].actualFilterOperator:n[d].operator)||"customfilter"==h||"between"==h)?this._$foreignField?""!=h?n[d].actualFilterValue:"":n[d].value:"";v(o[d]).hasClass("e-datepicker")?v("#"+o[d].id).ejDatePicker("model.value",-1!=s&&i&&n[d].isCustom?n[d].value:null):v(o[d]).hasClass("e-numerictextbox")?v("#"+o[d].id).ejNumericTextbox("model.value",h):v(o[d]).hasClass("e-datetimepicker")?v(o[d]).ejDateTimePicker("model.value",h):v(o[d]).val(h);h=-1!=s&&i&&n[d].isCustom&&n[d].predicate!=m?this._$foreignField?n[d].actualPredicate:n[d].predicate:"and";l.find("input[value="+h+"]").ejRadioButton({checked:!0}),"string"==this._$colType&&(h=-1!=s&&i&&n[d].isCustom?n[d].matchcase:this._matchCase,l.find("input.e-js[type='checkbox']").ejCheckBox({checked:h})),this._openedFltr.find(".e-value input:visible:eq(0)").select()}}},_setDateObject:function(e){if(null==e.value)return e;e.value;var t=v.extend(!0,{},e),i=v.extend(!0,{},e),s=new Date(t.value.setSeconds(t.value.getSeconds()-1)),n=new Date(i.value.setSeconds(i.value.getSeconds()+2));e.value=new Date(e.value.setSeconds(i.value.getSeconds()-1)),t.value=s,i.value=n,"equal"==e.operator?(t.operator="greaterthan",t.predicate="and",i.operator="lessthan",i.predicate="and"):"notequal"==e.operator&&(t.operator="lessthanorequal",t.predicate="or",i.operator="greaterthanorequal",i.predicate="or");t=(t=b.Predicate(t.field,t.operator,t.value,!1))[i.predicate](i.field,i.operator,i.value,!1);return e.ejpredicate=t,e.type="date",e},_getCDlgFields:function(){var e,t=this._openedFltr.find(".e-dropdownlist"),i=this._openedFltr.find(".e-checkbox"),s=!0,n=[],a=this._openedFltr.find(".e-value input.e-ejinputtext.e-input"),r=this._openedFltr.find(".e-value input"),o=this._openedFltr.find(".e-predicate  div[aria-checked = true]").find("input[type ='radio']").val();-1==v.inArray(this.fName,this.cFilteredCols)&&this.cFilteredCols.push(this.fName);for(var l=0,d=t.length;l<d;l++){var h,c,u=v(t[l]).ejDropDownList("getSelectedValue");if("number"==this._$colType&&(h=parseFloat(a.eq(l).ejNumericTextbox("model.value"))),"guid"==this._$colType&&(h=r.eq(l).val()),"string"==this._$colType&&(h=a.eq(l).val(),s=i.is(":checked")),"date"==this._$colType&&(h=a.eq(l).ejDatePicker("model.value")),"datetime"==this._$colType&&(h=a.eq(l).ejDateTimePicker("model.value")),e={field:this.fName,predicate:1==l?o:"or",matchcase:s,isCustom:!0},"top"==u||"bottom"==u)n.push(v.extend(!0,{value:"",operator:"notequal",take:h,from:u},e));else{if(""==u)break;-1<this._empties.indexOf(h+"")||"number"==this._$colType&&isNaN(h)?(c=this.iterateAndGetCollection(this._empties.join(this._spliter),v.extend({},e,{predicate:"notequal"===u.toLowerCase()?"and":"or",operator:u.toLowerCase()})),c=this.generatePredicate(c),n.push(v.extend({},e,{ejpredicate:c,operator:u.toLowerCase()}))):(c={},v.extend(!0,c,{value:h,operator:u.toLowerCase(),isCustom:!0,actualFilterOperator:u.toLowerCase(),actualFilterValue:h,actualPredicate:e.predicate},e),"date"==this._$colType&&(c.type="date"),n.push("date"==this._$colType&&-1!=["equal","notequal"].indexOf(u.toLowerCase())?this._setDateObject(c):c))}}this._$foreignField==m?this.initiateFilter(n):this._filterForeignData(n,!0)},_fltrBtnHandler:function(e){var t,i=[],s={},n="",a=[];if(this._maxFilterCount=!1,this._clearSearchValue&&(this._searchCount=0),this._openedFltr.hasClass("e-dlgcustom"))i=this._getCDlgFields(),-1==v.inArray(this.fName,this.cFilteredCols)&&i[0]&&this.cFilteredCols.push(this.fName);else{if(!this._isFiltered&&this._listsWrap.find(".e-selectall").ejCheckBox("model.checked")&&(0==this._searchCount||this._add&&this._add.prop("checked")))return this.closeXFDialog();this._onDemandSearch||this._islargeData?this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall)").length<=this._listsWrap.find("input.e-ftrchk").filter(":not(:checked):not(.e-selectall)").length||this._listsWrap.find(".e-selectall").ejCheckBox("model.checked")?(a=this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall)"),n="equal"):(a=this._listsWrap.find("input.e-ftrchk").filter(":not(:checked):not(.e-selectall)"),n="notequal",this._maxFilterCount=!0):(h=this._chkList.filter(":checked"),d=this._chkList.filter(":not(':checked')"),this._add&&this._add.prop("checked")?(d.length&&(t=d),a=0==this._checked.length?this._preChkList:this._checked,h.length&&0!=this._checked.length&&b.merge(a,h)):a=this._listsWrap.find("input.e-ftrchk").filter(":checked:not(.e-selectall,.e-addtofilter)"),n="string"==this._colType?"startswith":"equal");for(var r,o=a.length,l=this.getType(),d="string"!=this._colType||this._matchCase,h="string"!=this._colType||this._accent,c=this._maxFilterCount?{field:this.fName,predicate:"and",operator:n,matchcase:d,accent:h}:{field:this.fName,predicate:"or",operator:n,matchcase:d,accent:h},u=0;u<o;u++){if(!b.isNullOrUndefined(t))for(var p=0;p<t.length;p++){var m=0;if(a[u].value==t[p].value){m=1;break}}if(!m)if(r=a[u].value,this.enableNormalize&&-1!=r.indexOf(this._spliter))b.merge(i,this.iterateAndGetCollection(r,c));else{r=this.processValue(r,l),v.extend(!0,s,{value:r},c);for(p=0;p<i.length;p++){var g=0;if(i[p].value==r){g=1;break}}g||(i.push("date"==l?this._setDateObject(s):s),s={})}}h=v.inArray(this.fName,this.cFilteredCols);-1!=h&&this.cFilteredCols.splice(h,1),this._isFiltered&&this._searchRequest&&(this._checkIsIndeterminate(this.fName,this.filteredColumn),this._isIndeterminate&&(b.merge(i,this.filteredColumn),i=b.distinct(i,"value",!0),this._searchRequest=!1)),this.initiateFilter(i)}},initiateFilter:function(e){var t,i=e[0];if(!b.isNullOrUndefined(i)){isTake=i.from,t=i.ejpredicate||b.Predicate(i.field,i.operator,i.value,!i.matchcase,!i.accent);for(var s=1,n=e.length;s<n;s++)t=e[s].ejpredicate!=m?t[e[s].predicate](e[s].ejpredicate):t[e[s].predicate](e[s].field,e[s].operator,e[s].value,!e[s].matchcase,!e[s].accent);arg={action:"filtering",filterCollection:e,fieldName:this.fName,ejpredicate:t,tableID:this._$tableID},this._predicates[this._$key]==m&&(this._predicates[this._$key]={}),this._predicates[this._$key][this.fName]=isTake?{from:i.from,take:i.take}:t,this._openedFltr.hasClass("e-dlgcustom")||!this._listsWrap.find(".e-selectall").ejCheckBox("model.checked")||this._searchCount&&(!this._add||!this._add.prop("checked")||0!=this._preChkList.filter(":not(':checked')").length&&0!=this._checked.length)&&e.length!=this._preChkList.length||-1==v.inArray(this.fName,this._columnsFiltered)||(arg={action:"clearfiltering",filterDetails:{field:this.fName,operator:"",predicate:"or",value:""},fieldName:this.fName,tableID:this._$tableID}),-1==v.inArray(this.fName,this._columnsFiltered)&&this._columnsFiltered.push(this.fName),this._filterHandler(arg)}this.closeXFDialog()},getDistinct:function(e,t,i,s){for(var n,a,r,o={},l=e.length,d=[];l--;)n=e[l],r=a=b.getObject(t,n),b.isNullOrUndefined(n)||(this.enableNormalize&&(r=this._formatting(this._$format,a,this._locale)),n.ejvalue=r,!s&&a in o||d.push(i?n:a),o[a]=!0);return d=b.group(b.mergeSort(d,t),"ejvalue")},iterateAndGetCollection:function(e,t){var i,s=e.split(this._spliter),n=s.length,a=[],e=this._ctrlInstance._$colType;for("number"!=e&&"date"!=e&&"datetime"!=e||-1<(e=s.indexOf(""))&&s.splice(e,1);n--;)i=this.processValue(s[n]),a.push(v.extend(!0,{value:i},t));return a},processValue:function(e,t){switch(t=t||this.getType(),t=-1!=this._empties.indexOf(e)?"empty":t,e=e===this.guid?this._blankValue+"":e,t){case"empty":e="null"==e?null:"undefined"==e?m:"";break;case"date":case"datetime":e=new Date(e);break;case"number":e=+e;break;case"boolean":e=isNaN(e)||"string"!=typeof e?"true"===e:0!=b.parseInt(e)}return e},getType:function(){return b.isNullOrUndefined(this._$foreignField)?this._$colType:this._$foreignKeyType},replacer:function(e,t,i,s){return"function"==typeof i&&(i=i.call(this,s)),e.replace(t,i)},_virtualize:function(e){var t=v("#"+this.id+this._$colType+"_CheckBoxList").height(),i=this._chkList.not(".e-checkbox").filter(function(){if(this.offsetTop>e.scrollTop-this.offsetHeight&&e.scrollTop+t+70>this.offsetTop+this.offsetHeight)return this});0!=i.length&&(i.filter(":checked").ejCheckBox({checked:!0}),i.filter(":not(:checked)").ejCheckBox({checked:!1}),i.ejCheckBox({change:b.proxy(this._checkHandler,this)}),this._listsWrap.ejScroller("instance").refresh())},resetFilterModel:function(e){this._blank=m,this._addAtLast=!1,this._isFiltered=!1,this._searchCount=0},resetExcelFilter:function(e){var t,i,s,n,a=this.id;for(this._predicates=[],this.cFilteredCols=[],this.resetFilterModel(),t=0,s=this._posType.length;t<s;t++){i=this._posType[t];var r=v("#"+(n=a+i)+"_CustomFDlg");v("#"+n+"_CheckBoxList").ejWaitingPopup("destroy"),v("#"+n+"_excelDlg").remove(),r.find(".e-dropdownlist").ejDropDownList("destroy"),r.find(".e-button").ejButton("destroy"),"string"!=i&&"boolean"!=i||r.find(".e-autocomplete").ejAutocomplete("destroy"),"number"==i&&r.find(".e-numerictextbox").ejNumericTextbox("destroy"),"date"==i&&r.find(".e-datepicker").ejDatePicker("destroy"),r.ejDialog("destroy"),v("#"+n+"_CustomFDlg").remove()}},_wireEvents:function(){this._ctrlInstance._on(this._dialogContainer,"focus click",".e-searchbox",b.proxy(this._searchBoxFocus,this)),this._ctrlInstance._on(this._dialogContainer,"keyup",".e-searchbox input",b.proxy(this._search,this))}},b.ExcelFilter.valueDelimiter="@|@",b.ExcelFilter.Locale=b.ExcelFilter.Locale||{},b.ExcelFilter.Locale.default=b.ExcelFilter.Locale["en-US"]={SortNoSmaller:"Sort Smallest to Largest",SortNoLarger:"Sort Largest to Smallest",SortTextAscending:"Sort A to Z",SortTextDescending:"Sort Z to A",SortDateOldest:"Sort by Oldest",SortDateNewest:"Sort by Newest",SortByColor:"Sort By Color",SortByCellColor:"Sort by Cell Color",SortByFontColor:"Sort by Font Color",FilterByColor:"Filter By Color",CustomSort:"Custom Sort",FilterByCellColor:"Filter by Cell Color",FilterByFontColor:"Filter by Font Color",ClearFilter:"Clear Filter",NumberFilter:"Number Filters",GuidFilter:"Guid Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"Date Time Filters",SelectAll:"Select All",Blanks:"Blanks",Search:"Search",Showrowswhere:"Show rows where",NumericTextboxWaterMark:"Enter value",StringMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Starts With",value:"startswith"},{text:"Ends With",value:"endswith"},{text:"Contains",value:"contains"},{text:"Custom Filter",value:"customfilter"}],NumberMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],GuidMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Custom Filter",value:"customfilter"}],DateMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],DatetimeMenuOptions:[{text:"Equal",value:"equal"},{text:"Not Equal",value:"notequal"},{text:"Less Than",value:"lessthan"},{text:"Less Than Or Equal",value:"lessthanorequal"},{text:"Greater Than",value:"greaterthan"},{text:"Greater Than Or Equal",value:"greaterthanorequal"},{text:"Between",value:"between"},{text:"Custom Filter",value:"customfilter"}],Top10MenuOptions:[{text:"Top",value:"top"},{text:"Bottom",value:"bottom"}],title:"Custom Filter",PredicateAnd:"AND",PredicateOr:"OR",OK:"OK",MatchCase:"Match Case",Cancel:"Cancel",NoResult:"No Matches Found",CheckBoxStatusMsg:"Not all items showing",DatePickerWaterMark:"Select date",DateTimePickerWaterMark:"Select date time",True:"true",False:"false",AddToFilter:"Add current selection to filter"}}(jQuery,Syncfusion);